{"_id":"6892489f0734dfcaf542e912","calculate_sdes":null,"calculation_method":"PATIENT","cms_id":"CMS844v4","component":false,"component_hqmf_set_ids":[],"composite":false,"composite_hqmf_set_id":null,"cql_libraries":[{"_id":"689248980734dfcaf542e7b4","cql":"library HybridHospitalWideMortality version '4.0.000'\r\n\r\nusing QDM version '5.6'\r\n\r\ninclude MATGlobalCommonFunctions version '7.0.000' called Global\r\n\r\nvalueset \"Bicarbonate lab test\": 'urn:oid:2.16.840.1.113762.1.4.1045.139'\r\nvalueset \"Body temperature\": 'urn:oid:2.16.840.1.113762.1.4.1045.152'\r\nvalueset \"Creatinine lab test\": 'urn:oid:2.16.840.1.113883.3.666.5.2363'\r\nvalueset \"Encounter Inpatient\": 'urn:oid:2.16.840.1.113883.3.666.5.307'\r\nvalueset \"Ethnicity\": 'urn:oid:2.16.840.1.114222.4.11.837'\r\nvalueset \"Heart Rate\": 'urn:oid:2.16.840.1.113762.1.4.1045.149'\r\nvalueset \"Hematocrit lab test\": 'urn:oid:2.16.840.1.113762.1.4.1045.114'\r\nvalueset \"Medicare Advantage payer\": 'urn:oid:2.16.840.1.113762.1.4.1104.12'\r\nvalueset \"Medicare FFS payer\": 'urn:oid:2.16.840.1.113762.1.4.1104.10'\r\nvalueset \"ONC Administrative Sex\": 'urn:oid:2.16.840.1.113762.1.4.1'\r\nvalueset \"Oxygen Saturation by Pulse Oximetry\": 'urn:oid:2.16.840.1.113762.1.4.1045.151'\r\nvalueset \"Payer\": 'urn:oid:2.16.840.1.114222.4.11.3591'\r\nvalueset \"Platelet count lab test\": 'urn:oid:2.16.840.1.113762.1.4.1045.127'\r\nvalueset \"Race\": 'urn:oid:2.16.840.1.114222.4.11.836'\r\nvalueset \"Sodium lab test\": 'urn:oid:2.16.840.1.113762.1.4.1045.119'\r\nvalueset \"Systolic Blood Pressure\": 'urn:oid:2.16.840.1.113762.1.4.1045.163'\r\nvalueset \"White blood cells count lab test\": 'urn:oid:2.16.840.1.113762.1.4.1045.129'\r\n\r\nparameter \"Measurement Period\" Interval\u003cDateTime\u003e\r\n\r\ncontext Patient\r\n\r\ndefine \"SDE Ethnicity\":\r\n  [\"Patient Characteristic Ethnicity\": \"Ethnicity\"]\r\n\r\ndefine \"SDE Payer\":\r\n  [\"Patient Characteristic Payer\": \"Payer\"]\r\n\r\ndefine \"SDE Race\":\r\n  [\"Patient Characteristic Race\": \"Race\"]\r\n\r\ndefine \"SDE Sex\":\r\n  [\"Patient Characteristic Sex\": \"ONC Administrative Sex\"]\r\n\r\ndefine \"Initial Population\":\r\n  \"Inpatient Encounters\"\r\n\r\ndefine \"SDE Results\":\r\n  {\n  // First physical exams\r\n    FirstHeartRate: \"FirstPhysicalExamWithEncounterId\"([\"Physical Exam, Performed\": \"Heart Rate\"]),\r\n    FirstSystolicBloodPressure: \"FirstPhysicalExamWithEncounterId\"([\"Physical Exam, Performed\": \"Systolic Blood Pressure\"]),\r\n    FirstBodyTemperature: \"FirstPhysicalExamWithEncounterId\"([\"Physical Exam, Performed\": \"Body temperature\"]),\r\n    FirstOxygenSaturation: \"FirstPhysicalExamWithEncounterId\"([\"Physical Exam, Performed\": \"Oxygen Saturation by Pulse Oximetry\"]),\n  \n  // First lab tests\r\n    FirstHematocritLab: \"FirstLabTestWithEncounterId\"([\"Laboratory Test, Performed\": \"Hematocrit lab test\"]),\r\n    FirstPlateletCount: \"FirstLabTestWithEncounterId\"([\"Laboratory Test, Performed\": \"Platelet count lab test\"]),\r\n    FirstWhiteBloodCellCount: \"FirstLabTestWithEncounterId\"([\"Laboratory Test, Performed\": \"White blood cells count lab test\"]),\r\n    FirstSodiumLab: \"FirstLabTestWithEncounterId\"([\"Laboratory Test, Performed\": \"Sodium lab test\"]),\r\n    FirstBicarbonateLab: \"FirstLabTestWithEncounterId\"([\"Laboratory Test, Performed\": \"Bicarbonate lab test\"]),\r\n    FirstCreatinineLab: \"FirstLabTestWithEncounterId\"([\"Laboratory Test, Performed\": \"Creatinine lab test\"])\r\n  }\r\n\r\ndefine \"Inpatient Encounters\":\r\n  [\"Encounter, Performed\": \"Encounter Inpatient\"] InpatientEncounter\r\n    with ( [\"Patient Characteristic Payer\": \"Medicare FFS payer\"]\r\n      union [\"Patient Characteristic Payer\": \"Medicare Advantage payer\"] ) Payer\r\n      such that Global.\"HospitalizationWithObservationLengthofStay\" ( InpatientEncounter ) \u003c 365\r\n        and InpatientEncounter.relevantPeriod ends during day of \"Measurement Period\"\r\n        and AgeInYearsAt(date from start of InpatientEncounter.relevantPeriod)in Interval[65, 94]\r\n\r\ndefine function \"FirstLabTestWithEncounterId\"(LabList List\u003cQDM.PositiveLaboratoryTestPerformed\u003e):\r\n  \"Inpatient Encounters\" Encounter\r\n    let FirstLab: First(LabList Lab\r\n        where Lab.resultDatetime during Interval[start of Encounter.relevantPeriod - 1440 minutes, start of Encounter.relevantPeriod + 1440 minutes]\r\n        sort by resultDatetime\r\n    )\r\n    return {\r\n      EncounterId: Encounter.id,\r\n      FirstResult: FirstLab.result as Quantity,\r\n      Timing: FirstLab.resultDatetime\r\n    }\r\n\r\ndefine function \"FirstPhysicalExamWithEncounterId\"(ExamList List\u003cQDM.PositivePhysicalExamPerformed\u003e):\r\n  \"Inpatient Encounters\" Encounter\r\n    let FirstExam: First(ExamList Exam\r\n        where Global.\"EarliestOf\"(Exam.relevantDatetime, Exam.relevantPeriod)during Interval[start of Encounter.relevantPeriod - 1440 minutes, start of Encounter.relevantPeriod + 120 minutes]\r\n        sort by Global.\"EarliestOf\"(relevantDatetime, relevantPeriod)\r\n    )\r\n    return {\r\n      EncounterId: Encounter.id,\r\n      FirstResult: FirstExam.result as Quantity,\r\n      Timing: Global.\"EarliestOf\" ( FirstExam.relevantDatetime, FirstExam.relevantPeriod )\r\n    }","elm":{"library":{"annotation":[{"translatorOptions":"EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion,DisableMethodInvocation","type":"CqlToElmInfo"},{"type":"Annotation","s":{"r":"176","s":[{"value":["","library HybridHospitalWideMortality version '4.0.000'"]}]}}],"identifier":{"id":"HybridHospitalWideMortality","version":"4.0.000"},"schemaIdentifier":{"id":"urn:hl7-org:elm","version":"r1"},"usings":{"def":[{"localIdentifier":"System","uri":"urn:hl7-org:elm-types:r1"},{"localId":"1","locator":"3:1-3:23","localIdentifier":"QDM","uri":"urn:healthit-gov:qdm:v5_6","version":"5.6","annotation":[{"type":"Annotation","s":{"r":"1","s":[{"value":["","using "]},{"s":[{"value":["QDM"]}]},{"value":[" version ","'5.6'"]}]}}]}]},"includes":{"def":[{"localId":"2","locator":"5:1-5:64","localIdentifier":"Global","path":"MATGlobalCommonFunctions","version":"7.0.000","annotation":[{"type":"Annotation","s":{"r":"2","s":[{"value":["","include "]},{"s":[{"value":["MATGlobalCommonFunctions"]}]},{"value":[" version ","'7.0.000'"," called ","Global"]}]}}]}]},"parameters":{"def":[{"localId":"22","locator":"25:1-25:49","name":"Measurement Period","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"22","s":[{"value":["","parameter ","\"Measurement Period\""," "]},{"r":"21","s":[{"value":["Interval\u003c"]},{"r":"20","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}}],"parameterTypeSpecifier":{"localId":"21","locator":"25:32-25:49","type":"IntervalTypeSpecifier","pointType":{"localId":"20","locator":"25:41-25:48","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},"valueSets":{"def":[{"localId":"3","locator":"7:1-7:73","name":"Bicarbonate lab test","id":"2.16.840.1.113762.1.4.1045.139","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"3","s":[{"value":["","valueset ","\"Bicarbonate lab test\"",": ","'urn:oid:2.16.840.1.113762.1.4.1045.139'"]}]}}]},{"localId":"4","locator":"8:1-8:69","name":"Body temperature","id":"2.16.840.1.113762.1.4.1045.152","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"4","s":[{"value":["","valueset ","\"Body temperature\"",": ","'urn:oid:2.16.840.1.113762.1.4.1045.152'"]}]}}]},{"localId":"5","locator":"9:1-9:72","name":"Creatinine lab test","id":"2.16.840.1.113883.3.666.5.2363","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"5","s":[{"value":["","valueset ","\"Creatinine lab test\"",": ","'urn:oid:2.16.840.1.113883.3.666.5.2363'"]}]}}]},{"localId":"6","locator":"10:1-10:71","name":"Encounter Inpatient","id":"2.16.840.1.113883.3.666.5.307","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"6","s":[{"value":["","valueset ","\"Encounter Inpatient\"",": ","'urn:oid:2.16.840.1.113883.3.666.5.307'"]}]}}]},{"localId":"7","locator":"11:1-11:58","name":"Ethnicity","id":"2.16.840.1.114222.4.11.837","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"7","s":[{"value":["","valueset ","\"Ethnicity\"",": ","'urn:oid:2.16.840.1.114222.4.11.837'"]}]}}]},{"localId":"8","locator":"12:1-12:63","name":"Heart Rate","id":"2.16.840.1.113762.1.4.1045.149","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"8","s":[{"value":["","valueset ","\"Heart Rate\"",": ","'urn:oid:2.16.840.1.113762.1.4.1045.149'"]}]}}]},{"localId":"9","locator":"13:1-13:72","name":"Hematocrit lab test","id":"2.16.840.1.113762.1.4.1045.114","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"9","s":[{"value":["","valueset ","\"Hematocrit lab test\"",": ","'urn:oid:2.16.840.1.113762.1.4.1045.114'"]}]}}]},{"localId":"10","locator":"14:1-14:76","name":"Medicare Advantage payer","id":"2.16.840.1.113762.1.4.1104.12","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"10","s":[{"value":["","valueset ","\"Medicare Advantage payer\"",": ","'urn:oid:2.16.840.1.113762.1.4.1104.12'"]}]}}]},{"localId":"11","locator":"15:1-15:70","name":"Medicare FFS payer","id":"2.16.840.1.113762.1.4.1104.10","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"11","s":[{"value":["","valueset ","\"Medicare FFS payer\"",": ","'urn:oid:2.16.840.1.113762.1.4.1104.10'"]}]}}]},{"localId":"12","locator":"16:1-16:68","name":"ONC Administrative Sex","id":"2.16.840.1.113762.1.4.1","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"12","s":[{"value":["","valueset ","\"ONC Administrative Sex\"",": ","'urn:oid:2.16.840.1.113762.1.4.1'"]}]}}]},{"localId":"13","locator":"17:1-17:88","name":"Oxygen Saturation by Pulse Oximetry","id":"2.16.840.1.113762.1.4.1045.151","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"13","s":[{"value":["","valueset ","\"Oxygen Saturation by Pulse Oximetry\"",": ","'urn:oid:2.16.840.1.113762.1.4.1045.151'"]}]}}]},{"localId":"14","locator":"18:1-18:55","name":"Payer","id":"2.16.840.1.114222.4.11.3591","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"14","s":[{"value":["","valueset ","\"Payer\"",": ","'urn:oid:2.16.840.1.114222.4.11.3591'"]}]}}]},{"localId":"15","locator":"19:1-19:76","name":"Platelet count lab test","id":"2.16.840.1.113762.1.4.1045.127","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"15","s":[{"value":["","valueset ","\"Platelet count lab test\"",": ","'urn:oid:2.16.840.1.113762.1.4.1045.127'"]}]}}]},{"localId":"16","locator":"20:1-20:53","name":"Race","id":"2.16.840.1.114222.4.11.836","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"16","s":[{"value":["","valueset ","\"Race\"",": ","'urn:oid:2.16.840.1.114222.4.11.836'"]}]}}]},{"localId":"17","locator":"21:1-21:68","name":"Sodium lab test","id":"2.16.840.1.113762.1.4.1045.119","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"17","s":[{"value":["","valueset ","\"Sodium lab test\"",": ","'urn:oid:2.16.840.1.113762.1.4.1045.119'"]}]}}]},{"localId":"18","locator":"22:1-22:76","name":"Systolic Blood Pressure","id":"2.16.840.1.113762.1.4.1045.163","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"18","s":[{"value":["","valueset ","\"Systolic Blood Pressure\"",": ","'urn:oid:2.16.840.1.113762.1.4.1045.163'"]}]}}]},{"localId":"19","locator":"23:1-23:85","name":"White blood cells count lab test","id":"2.16.840.1.113762.1.4.1045.129","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"19","s":[{"value":["","valueset ","\"White blood cells count lab test\"",": ","'urn:oid:2.16.840.1.113762.1.4.1045.129'"]}]}}]}]},"contexts":{"def":[{"locator":"27:1-27:15","name":"Patient"}]},"statements":{"def":[{"locator":"27:1-27:15","name":"Patient","context":"Patient","expression":{"type":"SingletonFrom","operand":{"locator":"27:1-27:15","dataType":"{urn:healthit-gov:qdm:v5_6}Patient","templateId":"Patient","type":"Retrieve"}}},{"localId":"24","locator":"29:1-30:51","name":"SDE Ethnicity","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"24","s":[{"value":["","define ","\"SDE Ethnicity\"",":\n  "]},{"r":"23","s":[{"value":["[","\"Patient Characteristic Ethnicity\"",": "]},{"s":[{"value":["\"Ethnicity\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"23","locator":"30:3-30:51","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicEthnicity","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"30:40-30:50","name":"Ethnicity","type":"ValueSetRef"}}},{"localId":"26","locator":"32:1-33:43","name":"SDE Payer","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"26","s":[{"value":["","define ","\"SDE Payer\"",":\n  "]},{"r":"25","s":[{"value":["[","\"Patient Characteristic Payer\"",": "]},{"s":[{"value":["\"Payer\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"25","locator":"33:3-33:43","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicPayer","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"33:36-33:42","name":"Payer","type":"ValueSetRef"}}},{"localId":"28","locator":"35:1-36:41","name":"SDE Race","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"28","s":[{"value":["","define ","\"SDE Race\"",":\n  "]},{"r":"27","s":[{"value":["[","\"Patient Characteristic Race\"",": "]},{"s":[{"value":["\"Race\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"27","locator":"36:3-36:41","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicRace","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"36:35-36:40","name":"Race","type":"ValueSetRef"}}},{"localId":"30","locator":"38:1-39:58","name":"SDE Sex","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"30","s":[{"value":["","define ","\"SDE Sex\"",":\n  "]},{"r":"29","s":[{"value":["[","\"Patient Characteristic Sex\"",": "]},{"s":[{"value":["\"ONC Administrative Sex\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"29","locator":"39:3-39:58","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicSex","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"39:34-39:57","name":"ONC Administrative Sex","type":"ValueSetRef"}}},{"localId":"59","locator":"61:1-67:97","name":"Inpatient Encounters","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"59","s":[{"value":["","define ","\"Inpatient Encounters\"",":\n  "]},{"r":"58","s":[{"s":[{"r":"32","s":[{"r":"31","s":[{"r":"31","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Encounter Inpatient\""]}]},{"value":["]"]}]}]},{"value":[" ","InpatientEncounter"]}]}]},{"value":["\n    "]},{"r":"57","s":[{"value":["with "]},{"r":"36","s":[{"r":"35","s":[{"value":["( "]},{"r":"35","s":[{"r":"33","s":[{"value":["[","\"Patient Characteristic Payer\"",": "]},{"s":[{"value":["\"Medicare FFS payer\""]}]},{"value":["]"]}]},{"value":["\n      union "]},{"r":"34","s":[{"value":["[","\"Patient Characteristic Payer\"",": "]},{"s":[{"value":["\"Medicare Advantage payer\""]}]},{"value":["]"]}]}]},{"value":[" )"]}]},{"value":[" ","Payer"]}]},{"value":["\n      such that "]},{"r":"56","s":[{"r":"46","s":[{"r":"41","s":[{"r":"39","s":[{"r":"37","s":[{"value":["Global"]}]},{"value":["."]},{"r":"39","s":[{"value":["\"HospitalizationWithObservationLengthofStay\""," ( "]},{"r":"38","s":[{"value":["InpatientEncounter"]}]},{"value":[" )"]}]}]},{"r":"40","value":[" ","\u003c"," ","365"]}]},{"value":["\n        and "]},{"r":"45","s":[{"r":"43","s":[{"r":"42","s":[{"value":["InpatientEncounter"]}]},{"value":["."]},{"r":"43","s":[{"value":["relevantPeriod"]}]}]},{"r":"45","value":[" ","ends during day of"," "]},{"r":"44","s":[{"value":["\"Measurement Period\""]}]}]}]},{"value":["\n        and "]},{"r":"55","s":[{"r":"51","s":[{"value":["AgeInYearsAt","("]},{"r":"50","s":[{"value":["date from "]},{"r":"49","s":[{"value":["start of "]},{"r":"48","s":[{"r":"47","s":[{"value":["InpatientEncounter"]}]},{"value":["."]},{"r":"48","s":[{"value":["relevantPeriod"]}]}]}]}]},{"value":[")"]}]},{"value":["in "]},{"r":"54","s":[{"r":"52","value":["Interval[","65",", ","94","]"]}]}]}]}]}]}]}}],"expression":{"localId":"58","locator":"62:3-67:97","type":"Query","source":[{"localId":"32","locator":"62:3-62:68","alias":"InpatientEncounter","expression":{"localId":"31","locator":"62:3-62:49","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"62:28-62:48","name":"Encounter Inpatient","type":"ValueSetRef"}}}],"relationship":[{"localId":"57","locator":"63:5-67:97","alias":"Payer","type":"With","expression":{"localId":"35","locator":"63:10-64:74","type":"Union","operand":[{"localId":"33","locator":"63:12-63:65","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicPayer","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"63:45-63:64","name":"Medicare FFS payer","type":"ValueSetRef"}},{"localId":"34","locator":"64:13-64:72","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicPayer","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"64:46-64:71","name":"Medicare Advantage payer","type":"ValueSetRef"}}]},"suchThat":{"localId":"56","locator":"65:17-67:97","type":"And","operand":[{"localId":"46","locator":"65:17-66:85","type":"And","operand":[{"localId":"41","locator":"65:17-65:96","type":"Less","operand":[{"localId":"39","locator":"65:17-65:90","name":"HospitalizationWithObservationLengthofStay","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"38","locator":"65:71-65:88","name":"InpatientEncounter","type":"AliasRef"}]},{"localId":"40","locator":"65:94-65:96","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"365","type":"Literal"}]},{"localId":"45","locator":"66:13-66:85","precision":"Day","type":"In","operand":[{"locator":"66:47-66:50","type":"End","operand":{"localId":"43","locator":"66:13-66:45","path":"relevantPeriod","scope":"InpatientEncounter","type":"Property"}},{"localId":"44","locator":"66:66-66:85","name":"Measurement Period","type":"ParameterRef"}]}]},{"localId":"55","locator":"67:13-67:97","type":"In","operand":[{"localId":"51","locator":"67:13-67:78","precision":"Year","type":"CalculateAgeAt","operand":[{"type":"ToDate","operand":{"path":"birthDatetime","type":"Property","source":{"name":"Patient","type":"ExpressionRef"}}},{"localId":"50","locator":"67:26-67:77","type":"DateFrom","operand":{"localId":"49","locator":"67:36-67:77","type":"Start","operand":{"localId":"48","locator":"67:45-67:77","path":"relevantPeriod","scope":"InpatientEncounter","type":"Property"}}}]},{"localId":"54","locator":"67:82-67:97","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"52","locator":"67:91-67:92","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"65","type":"Literal"},"high":{"localId":"53","locator":"67:95-67:96","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"94","type":"Literal"}}]}]}}]}},{"localId":"61","locator":"41:1-42:24","name":"Initial Population","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"61","s":[{"value":["","define ","\"Initial Population\"",":\n  "]},{"r":"60","s":[{"value":["\"Inpatient Encounters\""]}]}]}}],"expression":{"localId":"60","locator":"42:3-42:24","name":"Inpatient Encounters","type":"ExpressionRef"}},{"localId":"111","locator":"81:1-91:5","name":"FirstPhysicalExamWithEncounterId","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"111","s":[{"value":["","define function ","\"FirstPhysicalExamWithEncounterId\"","(","ExamList"," "]},{"r":"64","s":[{"value":["List\u003c"]},{"r":"63","s":[{"value":["QDM",".","PositivePhysicalExamPerformed"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"110","s":[{"r":"110","s":[{"s":[{"r":"66","s":[{"r":"65","s":[{"s":[{"value":["\"Inpatient Encounters\""]}]}]},{"value":[" ","Encounter"]}]}]},{"value":["\n    "]},{"s":[{"value":["let "]},{"r":"95","s":[{"value":["FirstExam",": "]},{"r":"94","s":[{"value":["First","("]},{"r":"93","s":[{"s":[{"r":"68","s":[{"r":"67","s":[{"s":[{"value":["ExamList"]}]}]},{"value":[" ","Exam"]}]}]},{"value":["\n        "]},{"r":"86","s":[{"value":["where "]},{"r":"86","s":[{"r":"74","s":[{"r":"69","s":[{"value":["Global"]}]},{"value":["."]},{"r":"74","s":[{"value":["\"EarliestOf\"","("]},{"r":"71","s":[{"r":"70","s":[{"value":["Exam"]}]},{"value":["."]},{"r":"71","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"73","s":[{"r":"72","s":[{"value":["Exam"]}]},{"value":["."]},{"r":"73","s":[{"value":["relevantPeriod"]}]}]},{"value":[")"]}]}]},{"r":"86","value":["during"," "]},{"r":"85","s":[{"value":["Interval["]},{"r":"79","s":[{"r":"77","s":[{"value":["start of "]},{"r":"76","s":[{"r":"75","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"76","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[" - "]},{"r":"78","s":[{"value":["1440 ","minutes"]}]}]},{"value":[", "]},{"r":"84","s":[{"r":"82","s":[{"value":["start of "]},{"r":"81","s":[{"r":"80","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"81","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[" + "]},{"r":"83","s":[{"value":["120 ","minutes"]}]}]},{"value":["]"]}]}]}]},{"value":["\n        "]},{"r":"92","s":[{"value":["sort by "]},{"r":"91","s":[{"r":"90","s":[{"r":"87","s":[{"value":["Global"]}]},{"value":["."]},{"r":"90","s":[{"value":["\"EarliestOf\"","("]},{"r":"88","s":[{"value":["relevantDatetime"]}]},{"value":[", "]},{"r":"89","s":[{"value":["relevantPeriod"]}]},{"value":[")"]}]}]}]}]}]},{"value":["\n    )"]}]}]}]},{"value":["\n    "]},{"r":"109","s":[{"value":["return "]},{"r":"108","s":[{"value":["{\n      "]},{"s":[{"value":["EncounterId",": "]},{"r":"97","s":[{"r":"96","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"97","s":[{"value":["id"]}]}]}]},{"value":[",\n      "]},{"s":[{"value":["FirstResult",": "]},{"r":"101","s":[{"r":"99","s":[{"r":"98","s":[{"value":["FirstExam"]}]},{"value":["."]},{"r":"99","s":[{"value":["result"]}]}]},{"value":[" as "]},{"r":"100","s":[{"value":["Quantity"]}]}]}]},{"value":[",\n      "]},{"s":[{"value":["Timing",": "]},{"r":"107","s":[{"r":"102","s":[{"value":["Global"]}]},{"value":["."]},{"r":"107","s":[{"value":["\"EarliestOf\""," ( "]},{"r":"104","s":[{"r":"103","s":[{"value":["FirstExam"]}]},{"value":["."]},{"r":"104","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"106","s":[{"r":"105","s":[{"value":["FirstExam"]}]},{"value":["."]},{"r":"106","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]}]},{"value":["\n    }"]}]}]}]}]}]}}],"expression":{"localId":"110","locator":"82:3-91:5","type":"Query","source":[{"localId":"66","locator":"82:3-82:34","alias":"Encounter","expression":{"localId":"65","locator":"82:3-82:24","name":"Inpatient Encounters","type":"ExpressionRef"}}],"let":[{"localId":"95","locator":"83:9-86:5","identifier":"FirstExam","expression":{"localId":"94","locator":"83:20-86:5","type":"First","source":{"localId":"93","locator":"83:26-85:69","type":"Query","source":[{"localId":"68","locator":"83:26-83:38","alias":"Exam","expression":{"localId":"67","locator":"83:26-83:33","name":"ExamList","type":"OperandRef"}}],"relationship":[],"where":{"localId":"86","locator":"84:9-84:191","type":"In","operand":[{"localId":"74","locator":"84:15-84:77","name":"EarliestOf","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"71","locator":"84:35-84:55","path":"relevantDatetime","scope":"Exam","type":"Property"},{"localId":"73","locator":"84:58-84:76","path":"relevantPeriod","scope":"Exam","type":"Property"}]},{"localId":"85","locator":"84:85-84:191","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"79","locator":"84:94-84:141","type":"Subtract","operand":[{"localId":"77","locator":"84:94-84:126","type":"Start","operand":{"localId":"76","locator":"84:103-84:126","path":"relevantPeriod","scope":"Encounter","type":"Property"}},{"localId":"78","locator":"84:130-84:141","value":1440,"unit":"minutes","type":"Quantity"}]},"high":{"localId":"84","locator":"84:144-84:190","type":"Add","operand":[{"localId":"82","locator":"84:144-84:176","type":"Start","operand":{"localId":"81","locator":"84:153-84:176","path":"relevantPeriod","scope":"Encounter","type":"Property"}},{"localId":"83","locator":"84:180-84:190","value":120,"unit":"minutes","type":"Quantity"}]}}]},"sort":{"localId":"92","locator":"85:9-85:69","by":[{"localId":"91","locator":"85:17-85:69","direction":"asc","type":"ByExpression","expression":{"localId":"90","locator":"85:17-85:69","name":"EarliestOf","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"88","locator":"85:37-85:52","name":"relevantDatetime","type":"IdentifierRef"},{"localId":"89","locator":"85:55-85:68","name":"relevantPeriod","type":"IdentifierRef"}]}}]}}}}],"relationship":[],"return":{"localId":"109","locator":"87:5-91:5","expression":{"localId":"108","locator":"87:12-91:5","type":"Tuple","element":[{"name":"EncounterId","value":{"localId":"97","locator":"88:20-88:31","path":"id","scope":"Encounter","type":"Property"}},{"name":"FirstResult","value":{"localId":"101","locator":"89:20-89:47","strict":false,"type":"As","operand":{"localId":"99","locator":"89:20-89:35","path":"result","type":"Property","source":{"localId":"98","locator":"89:20-89:28","name":"FirstExam","type":"QueryLetRef"}},"asTypeSpecifier":{"localId":"100","locator":"89:40-89:47","name":"{urn:hl7-org:elm-types:r1}Quantity","type":"NamedTypeSpecifier"}}},{"name":"Timing","value":{"localId":"107","locator":"90:15-90:90","name":"EarliestOf","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"104","locator":"90:37-90:62","path":"relevantDatetime","type":"Property","source":{"localId":"103","locator":"90:37-90:45","name":"FirstExam","type":"QueryLetRef"}},{"localId":"106","locator":"90:65-90:88","path":"relevantPeriod","type":"Property","source":{"localId":"105","locator":"90:65-90:73","name":"FirstExam","type":"QueryLetRef"}}]}}]}}},"operand":[{"name":"ExamList","operandTypeSpecifier":{"localId":"64","locator":"81:61-81:99","type":"ListTypeSpecifier","elementType":{"localId":"63","locator":"81:66-81:98","name":"{urn:healthit-gov:qdm:v5_6}PositivePhysicalExamPerformed","type":"NamedTypeSpecifier"}}}]},{"localId":"157","locator":"69:1-79:5","name":"FirstLabTestWithEncounterId","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"157","s":[{"value":["","define function ","\"FirstLabTestWithEncounterId\"","(","LabList"," "]},{"r":"121","s":[{"value":["List\u003c"]},{"r":"120","s":[{"value":["QDM",".","PositiveLaboratoryTestPerformed"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"156","s":[{"r":"156","s":[{"s":[{"r":"123","s":[{"r":"122","s":[{"s":[{"value":["\"Inpatient Encounters\""]}]}]},{"value":[" ","Encounter"]}]}]},{"value":["\n    "]},{"s":[{"value":["let "]},{"r":"145","s":[{"value":["FirstLab",": "]},{"r":"144","s":[{"value":["First","("]},{"r":"143","s":[{"s":[{"r":"125","s":[{"r":"124","s":[{"s":[{"value":["LabList"]}]}]},{"value":[" ","Lab"]}]}]},{"value":["\n        "]},{"r":"139","s":[{"value":["where "]},{"r":"139","s":[{"r":"127","s":[{"r":"126","s":[{"value":["Lab"]}]},{"value":["."]},{"r":"127","s":[{"value":["resultDatetime"]}]}]},{"r":"139","value":[" ","during"," "]},{"r":"138","s":[{"value":["Interval["]},{"r":"132","s":[{"r":"130","s":[{"value":["start of "]},{"r":"129","s":[{"r":"128","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"129","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[" - "]},{"r":"131","s":[{"value":["1440 ","minutes"]}]}]},{"value":[", "]},{"r":"137","s":[{"r":"135","s":[{"value":["start of "]},{"r":"134","s":[{"r":"133","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"134","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[" + "]},{"r":"136","s":[{"value":["1440 ","minutes"]}]}]},{"value":["]"]}]}]}]},{"value":["\n        "]},{"r":"142","s":[{"value":["sort by "]},{"r":"141","s":[{"r":"140","s":[{"value":["resultDatetime"]}]}]}]}]},{"value":["\n    )"]}]}]}]},{"value":["\n    "]},{"r":"155","s":[{"value":["return "]},{"r":"154","s":[{"value":["{\n      "]},{"s":[{"value":["EncounterId",": "]},{"r":"147","s":[{"r":"146","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"147","s":[{"value":["id"]}]}]}]},{"value":[",\n      "]},{"s":[{"value":["FirstResult",": "]},{"r":"151","s":[{"r":"149","s":[{"r":"148","s":[{"value":["FirstLab"]}]},{"value":["."]},{"r":"149","s":[{"value":["result"]}]}]},{"value":[" as "]},{"r":"150","s":[{"value":["Quantity"]}]}]}]},{"value":[",\n      "]},{"s":[{"value":["Timing",": "]},{"r":"153","s":[{"r":"152","s":[{"value":["FirstLab"]}]},{"value":["."]},{"r":"153","s":[{"value":["resultDatetime"]}]}]}]},{"value":["\n    }"]}]}]}]}]}]}}],"expression":{"localId":"156","locator":"70:3-79:5","type":"Query","source":[{"localId":"123","locator":"70:3-70:34","alias":"Encounter","expression":{"localId":"122","locator":"70:3-70:24","name":"Inpatient Encounters","type":"ExpressionRef"}}],"let":[{"localId":"145","locator":"71:9-74:5","identifier":"FirstLab","expression":{"localId":"144","locator":"71:19-74:5","type":"First","source":{"localId":"143","locator":"71:25-73:30","type":"Query","source":[{"localId":"125","locator":"71:25-71:35","alias":"Lab","expression":{"localId":"124","locator":"71:25-71:31","name":"LabList","type":"OperandRef"}}],"relationship":[],"where":{"localId":"139","locator":"72:9-72:148","type":"In","operand":[{"localId":"127","locator":"72:15-72:32","path":"resultDatetime","scope":"Lab","type":"Property"},{"localId":"138","locator":"72:41-72:148","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"132","locator":"72:50-72:97","type":"Subtract","operand":[{"localId":"130","locator":"72:50-72:82","type":"Start","operand":{"localId":"129","locator":"72:59-72:82","path":"relevantPeriod","scope":"Encounter","type":"Property"}},{"localId":"131","locator":"72:86-72:97","value":1440,"unit":"minutes","type":"Quantity"}]},"high":{"localId":"137","locator":"72:100-72:147","type":"Add","operand":[{"localId":"135","locator":"72:100-72:132","type":"Start","operand":{"localId":"134","locator":"72:109-72:132","path":"relevantPeriod","scope":"Encounter","type":"Property"}},{"localId":"136","locator":"72:136-72:147","value":1440,"unit":"minutes","type":"Quantity"}]}}]},"sort":{"localId":"142","locator":"73:9-73:30","by":[{"localId":"141","locator":"73:17-73:30","direction":"asc","path":"resultDatetime","type":"ByColumn"}]}}}}],"relationship":[],"return":{"localId":"155","locator":"75:5-79:5","expression":{"localId":"154","locator":"75:12-79:5","type":"Tuple","element":[{"name":"EncounterId","value":{"localId":"147","locator":"76:20-76:31","path":"id","scope":"Encounter","type":"Property"}},{"name":"FirstResult","value":{"localId":"151","locator":"77:20-77:46","strict":false,"type":"As","operand":{"localId":"149","locator":"77:20-77:34","path":"result","type":"Property","source":{"localId":"148","locator":"77:20-77:27","name":"FirstLab","type":"QueryLetRef"}},"asTypeSpecifier":{"localId":"150","locator":"77:39-77:46","name":"{urn:hl7-org:elm-types:r1}Quantity","type":"NamedTypeSpecifier"}}},{"name":"Timing","value":{"localId":"153","locator":"78:15-78:37","path":"resultDatetime","type":"Property","source":{"localId":"152","locator":"78:15-78:22","name":"FirstLab","type":"QueryLetRef"}}}]}}},"operand":[{"name":"LabList","operandTypeSpecifier":{"localId":"121","locator":"69:55-69:95","type":"ListTypeSpecifier","elementType":{"localId":"120","locator":"69:60-69:94","name":"{urn:healthit-gov:qdm:v5_6}PositiveLaboratoryTestPerformed","type":"NamedTypeSpecifier"}}}]},{"localId":"170","locator":"44:1-59:3","name":"SDE Results","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"170","s":[{"value":["","define ","\"SDE Results\"",":\n  "]},{"r":"169","s":[{"value":["{\n  // First physical exams\n    "]},{"s":[{"value":["FirstHeartRate",": "]},{"r":"112","s":[{"value":["\"FirstPhysicalExamWithEncounterId\"","("]},{"r":"62","s":[{"value":["[","\"Physical Exam, Performed\"",": "]},{"s":[{"value":["\"Heart Rate\""]}]},{"value":["]"]}]},{"value":[")"]}]}]},{"value":[",\n    "]},{"s":[{"value":["FirstSystolicBloodPressure",": "]},{"r":"114","s":[{"value":["\"FirstPhysicalExamWithEncounterId\"","("]},{"r":"113","s":[{"value":["[","\"Physical Exam, Performed\"",": "]},{"s":[{"value":["\"Systolic Blood Pressure\""]}]},{"value":["]"]}]},{"value":[")"]}]}]},{"value":[",\n    "]},{"s":[{"value":["FirstBodyTemperature",": "]},{"r":"116","s":[{"value":["\"FirstPhysicalExamWithEncounterId\"","("]},{"r":"115","s":[{"value":["[","\"Physical Exam, Performed\"",": "]},{"s":[{"value":["\"Body temperature\""]}]},{"value":["]"]}]},{"value":[")"]}]}]},{"value":[",\n    "]},{"s":[{"value":["FirstOxygenSaturation",": "]},{"r":"118","s":[{"value":["\"FirstPhysicalExamWithEncounterId\"","("]},{"r":"117","s":[{"value":["[","\"Physical Exam, Performed\"",": "]},{"s":[{"value":["\"Oxygen Saturation by Pulse Oximetry\""]}]},{"value":["]"]}]},{"value":[")"]}]}]},{"value":[",\n  \n  // First lab tests\n    "]},{"s":[{"value":["FirstHematocritLab",": "]},{"r":"158","s":[{"value":["\"FirstLabTestWithEncounterId\"","("]},{"r":"119","s":[{"value":["[","\"Laboratory Test, Performed\"",": "]},{"s":[{"value":["\"Hematocrit lab test\""]}]},{"value":["]"]}]},{"value":[")"]}]}]},{"value":[",\n    "]},{"s":[{"value":["FirstPlateletCount",": "]},{"r":"160","s":[{"value":["\"FirstLabTestWithEncounterId\"","("]},{"r":"159","s":[{"value":["[","\"Laboratory Test, Performed\"",": "]},{"s":[{"value":["\"Platelet count lab test\""]}]},{"value":["]"]}]},{"value":[")"]}]}]},{"value":[",\n    "]},{"s":[{"value":["FirstWhiteBloodCellCount",": "]},{"r":"162","s":[{"value":["\"FirstLabTestWithEncounterId\"","("]},{"r":"161","s":[{"value":["[","\"Laboratory Test, Performed\"",": "]},{"s":[{"value":["\"White blood cells count lab test\""]}]},{"value":["]"]}]},{"value":[")"]}]}]},{"value":[",\n    "]},{"s":[{"value":["FirstSodiumLab",": "]},{"r":"164","s":[{"value":["\"FirstLabTestWithEncounterId\"","("]},{"r":"163","s":[{"value":["[","\"Laboratory Test, Performed\"",": "]},{"s":[{"value":["\"Sodium lab test\""]}]},{"value":["]"]}]},{"value":[")"]}]}]},{"value":[",\n    "]},{"s":[{"value":["FirstBicarbonateLab",": "]},{"r":"166","s":[{"value":["\"FirstLabTestWithEncounterId\"","("]},{"r":"165","s":[{"value":["[","\"Laboratory Test, Performed\"",": "]},{"s":[{"value":["\"Bicarbonate lab test\""]}]},{"value":["]"]}]},{"value":[")"]}]}]},{"value":[",\n    "]},{"s":[{"value":["FirstCreatinineLab",": "]},{"r":"168","s":[{"value":["\"FirstLabTestWithEncounterId\"","("]},{"r":"167","s":[{"value":["[","\"Laboratory Test, Performed\"",": "]},{"s":[{"value":["\"Creatinine lab test\""]}]},{"value":["]"]}]},{"value":[")"]}]}]},{"value":["\n  }"]}]}]}}],"expression":{"localId":"169","locator":"45:3-59:3","type":"Tuple","element":[{"name":"FirstHeartRate","value":{"localId":"112","locator":"47:21-47:98","name":"FirstPhysicalExamWithEncounterId","type":"FunctionRef","operand":[{"localId":"62","locator":"47:56-47:97","dataType":"{urn:healthit-gov:qdm:v5_6}PositivePhysicalExamPerformed","templateId":"PositivePhysicalExamPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"47:85-47:96","name":"Heart Rate","type":"ValueSetRef"}}]}},{"name":"FirstSystolicBloodPressure","value":{"localId":"114","locator":"48:33-48:123","name":"FirstPhysicalExamWithEncounterId","type":"FunctionRef","operand":[{"localId":"113","locator":"48:68-48:122","dataType":"{urn:healthit-gov:qdm:v5_6}PositivePhysicalExamPerformed","templateId":"PositivePhysicalExamPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"48:97-48:121","name":"Systolic Blood Pressure","type":"ValueSetRef"}}]}},{"name":"FirstBodyTemperature","value":{"localId":"116","locator":"49:27-49:110","name":"FirstPhysicalExamWithEncounterId","type":"FunctionRef","operand":[{"localId":"115","locator":"49:62-49:109","dataType":"{urn:healthit-gov:qdm:v5_6}PositivePhysicalExamPerformed","templateId":"PositivePhysicalExamPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"49:91-49:108","name":"Body temperature","type":"ValueSetRef"}}]}},{"name":"FirstOxygenSaturation","value":{"localId":"118","locator":"50:28-50:130","name":"FirstPhysicalExamWithEncounterId","type":"FunctionRef","operand":[{"localId":"117","locator":"50:63-50:129","dataType":"{urn:healthit-gov:qdm:v5_6}PositivePhysicalExamPerformed","templateId":"PositivePhysicalExamPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"50:92-50:128","name":"Oxygen Saturation by Pulse Oximetry","type":"ValueSetRef"}}]}},{"name":"FirstHematocritLab","value":{"localId":"158","locator":"53:25-53:108","name":"FirstLabTestWithEncounterId","type":"FunctionRef","operand":[{"localId":"119","locator":"53:55-53:107","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveLaboratoryTestPerformed","templateId":"PositiveLaboratoryTestPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"53:86-53:106","name":"Hematocrit lab test","type":"ValueSetRef"}}]}},{"name":"FirstPlateletCount","value":{"localId":"160","locator":"54:25-54:112","name":"FirstLabTestWithEncounterId","type":"FunctionRef","operand":[{"localId":"159","locator":"54:55-54:111","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveLaboratoryTestPerformed","templateId":"PositiveLaboratoryTestPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"54:86-54:110","name":"Platelet count lab test","type":"ValueSetRef"}}]}},{"name":"FirstWhiteBloodCellCount","value":{"localId":"162","locator":"55:31-55:127","name":"FirstLabTestWithEncounterId","type":"FunctionRef","operand":[{"localId":"161","locator":"55:61-55:126","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveLaboratoryTestPerformed","templateId":"PositiveLaboratoryTestPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"55:92-55:125","name":"White blood cells count lab test","type":"ValueSetRef"}}]}},{"name":"FirstSodiumLab","value":{"localId":"164","locator":"56:21-56:100","name":"FirstLabTestWithEncounterId","type":"FunctionRef","operand":[{"localId":"163","locator":"56:51-56:99","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveLaboratoryTestPerformed","templateId":"PositiveLaboratoryTestPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"56:82-56:98","name":"Sodium lab test","type":"ValueSetRef"}}]}},{"name":"FirstBicarbonateLab","value":{"localId":"166","locator":"57:26-57:110","name":"FirstLabTestWithEncounterId","type":"FunctionRef","operand":[{"localId":"165","locator":"57:56-57:109","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveLaboratoryTestPerformed","templateId":"PositiveLaboratoryTestPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"57:87-57:108","name":"Bicarbonate lab test","type":"ValueSetRef"}}]}},{"name":"FirstCreatinineLab","value":{"localId":"168","locator":"58:25-58:108","name":"FirstLabTestWithEncounterId","type":"FunctionRef","operand":[{"localId":"167","locator":"58:55-58:107","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveLaboratoryTestPerformed","templateId":"PositiveLaboratoryTestPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"58:86-58:106","name":"Creatinine lab test","type":"ValueSetRef"}}]}}]}}]}}},"elm_annotations":{"statements":[{"children":[{"children":[{"children":[{"text":"define \"SDE Ethnicity\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Ethnicity\": "}]},{"children":[{"children":[{"text":"\"Ethnicity\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"23"}],"ref_id":"24"}],"define_name":"SDE Ethnicity"},{"children":[{"children":[{"children":[{"text":"define \"SDE Payer\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Payer\": "}]},{"children":[{"children":[{"text":"\"Payer\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"25"}],"ref_id":"26"}],"define_name":"SDE Payer"},{"children":[{"children":[{"children":[{"text":"define \"SDE Race\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Race\": "}]},{"children":[{"children":[{"text":"\"Race\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"27"}],"ref_id":"28"}],"define_name":"SDE Race"},{"children":[{"children":[{"children":[{"text":"define \"SDE Sex\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Sex\": "}]},{"children":[{"children":[{"text":"\"ONC Administrative Sex\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"29"}],"ref_id":"30"}],"define_name":"SDE Sex"},{"children":[{"children":[{"children":[{"text":"define \"Inpatient Encounters\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Encounter Inpatient\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"31"}],"node_type":"Retrieve","ref_id":"31"},{"children":[{"text":" InpatientEncounter"}]}],"ref_id":"32"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"text":"[\"Patient Characteristic Payer\": "}]},{"children":[{"children":[{"text":"\"Medicare FFS payer\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"33"},{"children":[{"text":"\n      union "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Payer\": "}]},{"children":[{"children":[{"text":"\"Medicare Advantage payer\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"34"}],"node_type":"Union","ref_id":"35"},{"children":[{"text":" )"}]}],"node_type":"Union","ref_id":"35"},{"children":[{"text":" Payer"}]}],"ref_id":"36"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"37"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"HospitalizationWithObservationLengthofStay\" ( "}]},{"children":[{"children":[{"text":"InpatientEncounter"}]}],"node_type":"AliasRef","ref_id":"38"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"39"}],"node_type":"FunctionRef","ref_id":"39"},{"children":[{"text":" \u003c 365"}],"node_type":"Literal","ref_id":"40"}],"node_type":"Less","ref_id":"41"},{"children":[{"text":"\n        and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"InpatientEncounter"}]}],"ref_id":"42"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"43"}],"node_type":"Property","ref_id":"43"},{"children":[{"text":" ends during day of "}],"node_type":"In","ref_id":"45"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"44"}],"node_type":"In","ref_id":"45"}],"node_type":"And","ref_id":"46"},{"children":[{"text":"\n        and "}]},{"children":[{"children":[{"children":[{"text":"AgeInYearsAt("}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"InpatientEncounter"}]}],"ref_id":"47"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"48"}],"node_type":"Property","ref_id":"48"}],"node_type":"Start","ref_id":"49"}],"node_type":"DateFrom","ref_id":"50"},{"children":[{"text":")"}]}],"node_type":"CalculateAgeAt","ref_id":"51"},{"children":[{"text":"in "}]},{"children":[{"children":[{"text":"Interval[65, 94]"}],"ref_id":"52"}],"node_type":"Interval","ref_id":"54"}],"node_type":"In","ref_id":"55"}],"node_type":"And","ref_id":"56"}],"ref_id":"57"}],"node_type":"Query","ref_id":"58"}],"ref_id":"59"}],"define_name":"Inpatient Encounters"},{"children":[{"children":[{"children":[{"text":"define \"Initial Population\":\n  "}]},{"children":[{"children":[{"text":"\"Inpatient Encounters\""}]}],"node_type":"ExpressionRef","ref_id":"60"}],"ref_id":"61"}],"define_name":"Initial Population"},{"children":[{"children":[{"children":[{"text":"define function \"FirstPhysicalExamWithEncounterId\"(ExamList "}]},{"children":[{"children":[{"text":"List\u003c"}]},{"children":[{"children":[{"text":"QDM.PositivePhysicalExamPerformed"}]}],"ref_id":"63"},{"children":[{"text":"\u003e"}]}],"ref_id":"64"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Inpatient Encounters\""}]}]}],"node_type":"ExpressionRef","ref_id":"65"},{"children":[{"text":" Encounter"}]}],"ref_id":"66"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"FirstExam: "}]},{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"ExamList"}]}]}],"node_type":"OperandRef","ref_id":"67"},{"children":[{"text":" Exam"}]}],"ref_id":"68"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"69"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"EarliestOf\"("}]},{"children":[{"children":[{"children":[{"text":"Exam"}]}],"ref_id":"70"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"71"}],"node_type":"Property","ref_id":"71"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"Exam"}]}],"ref_id":"72"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"73"}],"node_type":"Property","ref_id":"73"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"74"}],"node_type":"FunctionRef","ref_id":"74"},{"children":[{"text":"during "}],"ref_id":"86"},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"75"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"76"}],"node_type":"Property","ref_id":"76"}],"node_type":"Start","ref_id":"77"},{"children":[{"text":" - "}]},{"children":[{"children":[{"text":"1440 minutes"}]}],"node_type":"Quantity","ref_id":"78"}],"ref_id":"79"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"80"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"81"}],"node_type":"Property","ref_id":"81"}],"node_type":"Start","ref_id":"82"},{"children":[{"text":" + "}]},{"children":[{"children":[{"text":"120 minutes"}]}],"node_type":"Quantity","ref_id":"83"}],"ref_id":"84"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"85"}],"ref_id":"86"}],"ref_id":"86"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"87"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"EarliestOf\"("}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"IdentifierRef","ref_id":"88"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"89"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"90"}],"node_type":"FunctionRef","ref_id":"90"}],"ref_id":"91"}],"ref_id":"92"}],"ref_id":"93"},{"children":[{"text":"\n    )"}]}],"node_type":"First","ref_id":"94"}],"ref_id":"95"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"{\n      "}]},{"children":[{"children":[{"text":"EncounterId: "}]},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"96"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"id"}]}],"ref_id":"97"}],"ref_id":"97"}]},{"children":[{"text":",\n      "}]},{"children":[{"children":[{"text":"FirstResult: "}]},{"children":[{"children":[{"children":[{"children":[{"text":"FirstExam"}]}],"ref_id":"98"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"result"}]}],"node_type":"Property","ref_id":"99"}],"node_type":"Property","ref_id":"99"},{"children":[{"text":" as "}]},{"children":[{"children":[{"text":"Quantity"}]}],"ref_id":"100"}],"ref_id":"101"}]},{"children":[{"text":",\n      "}]},{"children":[{"children":[{"text":"Timing: "}]},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"102"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"EarliestOf\" ( "}]},{"children":[{"children":[{"children":[{"text":"FirstExam"}]}],"ref_id":"103"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"104"}],"node_type":"Property","ref_id":"104"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"FirstExam"}]}],"ref_id":"105"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"106"}],"node_type":"Property","ref_id":"106"},{"children":[{"text":" )"}]}],"ref_id":"107"}],"ref_id":"107"}]},{"children":[{"text":"\n    }"}]}],"node_type":"Tuple","ref_id":"108"}],"ref_id":"109"}],"node_type":"Query","ref_id":"110"}],"node_type":"Query","ref_id":"110"}],"ref_id":"111"}],"define_name":"FirstPhysicalExamWithEncounterId"},{"children":[{"children":[{"children":[{"text":"define function \"FirstLabTestWithEncounterId\"(LabList "}]},{"children":[{"children":[{"text":"List\u003c"}]},{"children":[{"children":[{"text":"QDM.PositiveLaboratoryTestPerformed"}]}],"ref_id":"120"},{"children":[{"text":"\u003e"}]}],"ref_id":"121"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Inpatient Encounters\""}]}]}],"node_type":"ExpressionRef","ref_id":"122"},{"children":[{"text":" Encounter"}]}],"ref_id":"123"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"FirstLab: "}]},{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"LabList"}]}]}],"node_type":"OperandRef","ref_id":"124"},{"children":[{"text":" Lab"}]}],"ref_id":"125"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Lab"}]}],"ref_id":"126"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"resultDatetime"}]}],"node_type":"Property","ref_id":"127"}],"node_type":"Property","ref_id":"127"},{"children":[{"text":" during "}],"ref_id":"139"},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"128"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"129"}],"node_type":"Property","ref_id":"129"}],"node_type":"Start","ref_id":"130"},{"children":[{"text":" - "}]},{"children":[{"children":[{"text":"1440 minutes"}]}],"node_type":"Quantity","ref_id":"131"}],"ref_id":"132"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"133"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"134"}],"node_type":"Property","ref_id":"134"}],"node_type":"Start","ref_id":"135"},{"children":[{"text":" + "}]},{"children":[{"children":[{"text":"1440 minutes"}]}],"node_type":"Quantity","ref_id":"136"}],"ref_id":"137"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"138"}],"ref_id":"139"}],"ref_id":"139"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"resultDatetime"}]}],"ref_id":"140"}],"ref_id":"141"}],"ref_id":"142"}],"ref_id":"143"},{"children":[{"text":"\n    )"}]}],"node_type":"First","ref_id":"144"}],"ref_id":"145"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"{\n      "}]},{"children":[{"children":[{"text":"EncounterId: "}]},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"146"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"id"}]}],"ref_id":"147"}],"ref_id":"147"}]},{"children":[{"text":",\n      "}]},{"children":[{"children":[{"text":"FirstResult: "}]},{"children":[{"children":[{"children":[{"children":[{"text":"FirstLab"}]}],"ref_id":"148"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"result"}]}],"node_type":"Property","ref_id":"149"}],"node_type":"Property","ref_id":"149"},{"children":[{"text":" as "}]},{"children":[{"children":[{"text":"Quantity"}]}],"ref_id":"150"}],"ref_id":"151"}]},{"children":[{"text":",\n      "}]},{"children":[{"children":[{"text":"Timing: "}]},{"children":[{"children":[{"children":[{"text":"FirstLab"}]}],"ref_id":"152"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"resultDatetime"}]}],"ref_id":"153"}],"ref_id":"153"}]},{"children":[{"text":"\n    }"}]}],"node_type":"Tuple","ref_id":"154"}],"ref_id":"155"}],"node_type":"Query","ref_id":"156"}],"node_type":"Query","ref_id":"156"}],"ref_id":"157"}],"define_name":"FirstLabTestWithEncounterId"},{"children":[{"children":[{"children":[{"text":"define \"SDE Results\":\n  "}]},{"children":[{"children":[{"text":"{\n  // First physical exams\n    "}]},{"children":[{"children":[{"text":"FirstHeartRate: "}]},{"children":[{"children":[{"text":"\"FirstPhysicalExamWithEncounterId\"("}]},{"children":[{"children":[{"text":"[\"Physical Exam, Performed\": "}]},{"children":[{"children":[{"text":"\"Heart Rate\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"62"},{"children":[{"text":")"}]}],"ref_id":"112"}]},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"FirstSystolicBloodPressure: "}]},{"children":[{"children":[{"text":"\"FirstPhysicalExamWithEncounterId\"("}]},{"children":[{"children":[{"text":"[\"Physical Exam, Performed\": "}]},{"children":[{"children":[{"text":"\"Systolic Blood Pressure\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"113"},{"children":[{"text":")"}]}],"ref_id":"114"}]},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"FirstBodyTemperature: "}]},{"children":[{"children":[{"text":"\"FirstPhysicalExamWithEncounterId\"("}]},{"children":[{"children":[{"text":"[\"Physical Exam, Performed\": "}]},{"children":[{"children":[{"text":"\"Body temperature\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"115"},{"children":[{"text":")"}]}],"ref_id":"116"}]},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"FirstOxygenSaturation: "}]},{"children":[{"children":[{"text":"\"FirstPhysicalExamWithEncounterId\"("}]},{"children":[{"children":[{"text":"[\"Physical Exam, Performed\": "}]},{"children":[{"children":[{"text":"\"Oxygen Saturation by Pulse Oximetry\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"117"},{"children":[{"text":")"}]}],"ref_id":"118"}]},{"children":[{"text":",\n  \n  // First lab tests\n    "}]},{"children":[{"children":[{"text":"FirstHematocritLab: "}]},{"children":[{"children":[{"text":"\"FirstLabTestWithEncounterId\"("}]},{"children":[{"children":[{"text":"[\"Laboratory Test, Performed\": "}]},{"children":[{"children":[{"text":"\"Hematocrit lab test\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"119"},{"children":[{"text":")"}]}],"ref_id":"158"}]},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"FirstPlateletCount: "}]},{"children":[{"children":[{"text":"\"FirstLabTestWithEncounterId\"("}]},{"children":[{"children":[{"text":"[\"Laboratory Test, Performed\": "}]},{"children":[{"children":[{"text":"\"Platelet count lab test\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"159"},{"children":[{"text":")"}]}],"ref_id":"160"}]},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"FirstWhiteBloodCellCount: "}]},{"children":[{"children":[{"text":"\"FirstLabTestWithEncounterId\"("}]},{"children":[{"children":[{"text":"[\"Laboratory Test, Performed\": "}]},{"children":[{"children":[{"text":"\"White blood cells count lab test\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"161"},{"children":[{"text":")"}]}],"ref_id":"162"}]},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"FirstSodiumLab: "}]},{"children":[{"children":[{"text":"\"FirstLabTestWithEncounterId\"("}]},{"children":[{"children":[{"text":"[\"Laboratory Test, Performed\": "}]},{"children":[{"children":[{"text":"\"Sodium lab test\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"163"},{"children":[{"text":")"}]}],"ref_id":"164"}]},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"FirstBicarbonateLab: "}]},{"children":[{"children":[{"text":"\"FirstLabTestWithEncounterId\"("}]},{"children":[{"children":[{"text":"[\"Laboratory Test, Performed\": "}]},{"children":[{"children":[{"text":"\"Bicarbonate lab test\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"165"},{"children":[{"text":")"}]}],"ref_id":"166"}]},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"FirstCreatinineLab: "}]},{"children":[{"children":[{"text":"\"FirstLabTestWithEncounterId\"("}]},{"children":[{"children":[{"text":"[\"Laboratory Test, Performed\": "}]},{"children":[{"children":[{"text":"\"Creatinine lab test\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"167"},{"children":[{"text":")"}]}],"ref_id":"168"}]},{"children":[{"text":"\n  }"}]}],"node_type":"Tuple","ref_id":"169"}],"ref_id":"170"}],"define_name":"SDE Results"}],"identifier":{"id":"HybridHospitalWideMortality","version":"4.0.000"}},"is_main_library":true,"is_top_level":true,"library_name":"HybridHospitalWideMortality","library_version":"4.0.000","statement_dependencies":[{"_id":"689248980734dfcaf542e79f","statement_name":"Patient"},{"_id":"689248980734dfcaf542e7a0","statement_name":"SDE Ethnicity"},{"_id":"689248980734dfcaf542e7a1","statement_name":"SDE Payer"},{"_id":"689248980734dfcaf542e7a2","statement_name":"SDE Race"},{"_id":"689248980734dfcaf542e7a3","statement_name":"SDE Sex"},{"_id":"689248980734dfcaf542e7a4","statement_name":"Inpatient Encounters","statement_references":[{"_id":"689248980734dfcaf542e799","hqmf_id":null,"library_name":"MATGlobalCommonFunctions","statement_name":"HospitalizationWithObservationLengthofStay"},{"_id":"689248980734dfcaf542e79a","hqmf_id":null,"library_name":"HybridHospitalWideMortality","statement_name":"Patient"}]},{"_id":"689248980734dfcaf542e7a5","statement_name":"Initial Population","statement_references":[{"_id":"6892489f0734dfcaf542e915","hqmf_id":null,"library_name":"HybridHospitalWideMortality","statement_name":"Inpatient Encounters"}]},{"_id":"689248980734dfcaf542e7a6","statement_name":"FirstPhysicalExamWithEncounterId","statement_references":[{"_id":"689248980734dfcaf542e79b","hqmf_id":null,"library_name":"HybridHospitalWideMortality","statement_name":"Inpatient Encounters"},{"_id":"689248980734dfcaf542e79c","hqmf_id":null,"library_name":"MATGlobalCommonFunctions","statement_name":"EarliestOf"}]},{"_id":"689248980734dfcaf542e7a7","statement_name":"FirstLabTestWithEncounterId","statement_references":[{"_id":"6892489f0734dfcaf542e916","hqmf_id":null,"library_name":"HybridHospitalWideMortality","statement_name":"Inpatient Encounters"}]},{"_id":"689248980734dfcaf542e7a8","statement_name":"SDE Results","statement_references":[{"_id":"689248980734dfcaf542e79d","hqmf_id":null,"library_name":"HybridHospitalWideMortality","statement_name":"FirstPhysicalExamWithEncounterId"},{"_id":"689248980734dfcaf542e79e","hqmf_id":null,"library_name":"HybridHospitalWideMortality","statement_name":"FirstLabTestWithEncounterId"}]}]},{"_id":"689248980734dfcaf542e7b5","cql":"library MATGlobalCommonFunctions version '7.0.000'\n\nusing QDM version '5.6'\n\nvalueset \"Emergency Department Visit\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.292' \nvalueset \"Encounter Inpatient\": 'urn:oid:2.16.840.1.113883.3.666.5.307' \nvalueset \"Intensive Care Unit\": 'urn:oid:2.16.840.1.113762.1.4.1029.206' \nvalueset \"Observation Services\": 'urn:oid:2.16.840.1.113762.1.4.1111.143' \nvalueset \"Outpatient Surgery Service\": 'urn:oid:2.16.840.1.113762.1.4.1110.38' \n\nparameter \"Measurement Period\" Interval\u003cDateTime\u003e\n\ncontext Patient\n\ndefine \"ED Encounter\":\n  [\"Encounter, Performed\": \"Emergency Department Visit\"]\n\ndefine \"Inpatient Encounter\":\n  [\"Encounter, Performed\": \"Encounter Inpatient\"] EncounterInpatient\n    where \"LengthInDays\"(EncounterInpatient.relevantPeriod)\u003c= 120\n      and EncounterInpatient.relevantPeriod ends during day of \"Measurement Period\"\n\n/*@description: Returns an interval of date values extracted from the input interval of date-time values\n@comment: This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability.*/\ndefine function \"ToDateInterval\"(period Interval\u003cDateTime\u003e ):\n  Interval[date from start of period, date from end of period]\n\n/*calculates the difference in calendar days between the start and end of the given interval.*/\ndefine function \"LengthInDays\"(Value Interval\u003cDateTime\u003e ):\n  difference in days between start of Value and end of Value\n\n/*returns list of all locations within an encounter, including locations for immediately prior ED visit.*/\ndefine function \"HospitalizationLocations\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet EDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn if EDVisit is null then Visit.facilityLocations \n  \t\telse flatten { EDVisit.facilityLocations, Visit.facilityLocations }\n\n/*Returns the arrival time in the ED for the encounter.*/\ndefine function \"EmergencyDepartmentArrivalTime\"(Encounter \"Encounter, Performed\" ):\n  start of First((\"HospitalizationLocations\"(Encounter))HospitalLocation\n  \t\twhere HospitalLocation.code in \"Emergency Department Visit\"\n  \t\tsort by start of locationPeriod\n  ).locationPeriod\n\n/*Returns admission time for an encounter or for immediately prior emergency department visit.*/\ndefine function \"HospitalAdmissionTime\"(Encounter \"Encounter, Performed\" ):\n  start of \"Hospitalization\"(Encounter)\n\n/*Returns earliest arrival time for an encounter including any prior ED visit.*/\ndefine function \"HospitalArrivalTime\"(Encounter \"Encounter, Performed\" ):\n  start of First((\"HospitalizationLocations\"(Encounter))HospitalLocation\n  \t\tsort by start of locationPeriod\n  ).locationPeriod\n\n/*Hospitalization returns the total interval for admission to discharge for the given encounter, or for the admission of any immediately prior emergency department visit to the discharge of the given encounter.*/\ndefine function \"Hospitalization\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet EDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn Interval[Coalesce(start of EDVisit.relevantPeriod, start of Visit.relevantPeriod), \n  \tend of Visit.relevantPeriod]\n\n/*Returns the length of stay in days (i.e. the number of days between admission and discharge) for the given encounter, or from the admission of any immediately prior emergency department visit to the discharge of the encounter*/\ndefine function \"HospitalizationLengthofStay\"(Encounter \"Encounter, Performed\" ):\n  LengthInDays(\"Hospitalization\"(Encounter))\n\n/*Returns the latest departure time for encounter including any prior ED visit.*/\ndefine function \"HospitalDepartureTime\"(Encounter \"Encounter, Performed\" ):\n  end of Last((\"HospitalizationLocations\"(Encounter))HospitalLocation\n  \t\tsort by start of locationPeriod\n  ).locationPeriod\n\n/*Hospital Discharge Time returns the discharge time for an encounter*/\ndefine function \"HospitalDischargeTime\"(Encounter \"Encounter, Performed\" ):\n  end of Encounter.relevantPeriod\n\n/*Hospitalization with Observation and Outpatient Surgery Service returns the total interval from the start of any immediately prior emergency department visit, outpatient surgery visit or observation visit to the discharge of the given encounter.*/\ndefine function \"HospitalizationWithObservationAndOutpatientSurgeryService\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet ObsVisit: Last([\"Encounter, Performed\": \"Observation Services\"] LastObs\n  \t\t\twhere LastObs.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t),\n  \tVisitStart: Coalesce(start of ObsVisit.relevantPeriod, start of Visit.relevantPeriod),\n  \tEDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before VisitStart\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t),\n  \tVisitStartWithED: Coalesce(start of EDVisit.relevantPeriod, VisitStart),\n  \tOutpatientSurgeryVisit: Last([\"Encounter, Performed\": \"Outpatient Surgery Service\"] LastSurgeryOP\n  \t\t\twhere LastSurgeryOP.relevantPeriod ends 1 hour or less on or before VisitStartWithED\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn Interval[Coalesce(start of OutpatientSurgeryVisit.relevantPeriod, VisitStartWithED), \n  \tend of Visit.relevantPeriod]\n\n/*Hospitalization with Observation returns the total interval from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\ndefine function \"HospitalizationWithObservation\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet ObsVisit: Last([\"Encounter, Performed\": \"Observation Services\"] LastObs\n  \t\t\twhere LastObs.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t),\n  \tVisitStart: Coalesce(start of ObsVisit.relevantPeriod, start of Visit.relevantPeriod),\n  \tEDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before VisitStart\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn Interval[Coalesce(start of EDVisit.relevantPeriod, VisitStart), \n  \tend of Visit.relevantPeriod]\n\n/*Hospitalization with Observation Length of Stay returns the length in days from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\ndefine function \"HospitalizationWithObservationLengthofStay\"(Encounter \"Encounter, Performed\" ):\n  \"LengthInDays\"(\"HospitalizationWithObservation\"(Encounter))\n\n/*First Inpatient Intensive Care Unit returns the first intensive care unit for the given encounter, without considering any immediately prior emergency department visit.*/\ndefine function \"FirstInpatientIntensiveCareUnit\"(Encounter \"Encounter, Performed\" ):\n  First((Encounter.facilityLocations)HospitalLocation\n      where HospitalLocation.code in \"Intensive Care Unit\"\n        and HospitalLocation.locationPeriod during Encounter.relevantPeriod\n      sort by start of locationPeriod\n  )\n\n/*Given a datetime and a period, returns the period (if a period is provided) or the interval beginning and ending on the datetime (if a datetime is provided)*/\ndefine function \"NormalizeInterval\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  if pointInTime is not null then Interval[pointInTime, pointInTime]\n    else if period is not null then period \n    else null as Interval\u003cDateTime\u003e\n\n/*Given an interval, return true if the interval has a starting boundary specified (i.e. the start of the interval is not null and not the minimum DateTime value)*/\ndefine function \"HasStart\"(period Interval\u003cDateTime\u003e ):\n  not ( start of period is null\n      or start of period = minimum DateTime\n  )\n\n/*Given an interval, return true if the interval has an ending boundary specified (i.e. the end of the interval is not null and not the maximum DateTime value)*/\ndefine function \"HasEnd\"(period Interval\u003cDateTime\u003e ):\n  not ( \n    end of period is null\n      or \n      end of period = maximum DateTime\n  )\n\n/*Given an interval, return the ending point if the interval has an ending boundary specified, otherwise, return the starting point*/\ndefine function \"Latest\"(period Interval\u003cDateTime\u003e ):\n  if ( HasEnd(period)) then \n  end of period \n    else start of period\n\n/*Given an interval, return the starting point if the interval has a starting boundary specified, otherwise, return the ending point*/\ndefine function \"Earliest\"(period Interval\u003cDateTime\u003e ):\n  if ( HasStart(period)) then start of period \n    else \n  end of period\n\n/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the ending point of the period if the period has an ending boundary specified, otherwise returns the starting point of the interval*/\ndefine function \"LatestOf\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  Latest(NormalizeInterval(pointInTime, period))\n\n/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the starting point of the period if the period has a starting boundary specified, otherwise returns the ending point of the period*/\ndefine function \"EarliestOf\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  Earliest(NormalizeInterval(pointInTime, period))\n\n","elm":{"library":{"annotation":[{"translatorOptions":"EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion,DisableMethodInvocation","type":"CqlToElmInfo"},{"type":"Annotation","s":{"r":"404","s":[{"value":["","library MATGlobalCommonFunctions version '7.0.000'"]}]}}],"identifier":{"id":"MATGlobalCommonFunctions","version":"7.0.000"},"schemaIdentifier":{"id":"urn:hl7-org:elm","version":"r1"},"usings":{"def":[{"localIdentifier":"System","uri":"urn:hl7-org:elm-types:r1"},{"localId":"1","locator":"3:1-3:23","localIdentifier":"QDM","uri":"urn:healthit-gov:qdm:v5_6","version":"5.6","annotation":[{"type":"Annotation","s":{"r":"1","s":[{"value":["","using "]},{"s":[{"value":["QDM"]}]},{"value":[" version ","'5.6'"]}]}}]}]},"parameters":{"def":[{"localId":"9","locator":"11:1-11:49","name":"Measurement Period","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"9","s":[{"value":["","parameter ","\"Measurement Period\""," "]},{"r":"8","s":[{"value":["Interval\u003c"]},{"r":"7","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}}],"parameterTypeSpecifier":{"localId":"8","locator":"11:32-11:49","type":"IntervalTypeSpecifier","pointType":{"localId":"7","locator":"11:41-11:48","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},"valueSets":{"def":[{"localId":"2","locator":"5:1-5:82","name":"Emergency Department Visit","id":"2.16.840.1.113883.3.117.1.7.1.292","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"2","s":[{"value":["","valueset ","\"Emergency Department Visit\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.292'"]}]}}]},{"localId":"3","locator":"6:1-6:71","name":"Encounter Inpatient","id":"2.16.840.1.113883.3.666.5.307","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"3","s":[{"value":["","valueset ","\"Encounter Inpatient\"",": ","'urn:oid:2.16.840.1.113883.3.666.5.307'"]}]}}]},{"localId":"4","locator":"7:1-7:72","name":"Intensive Care Unit","id":"2.16.840.1.113762.1.4.1029.206","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"4","s":[{"value":["","valueset ","\"Intensive Care Unit\"",": ","'urn:oid:2.16.840.1.113762.1.4.1029.206'"]}]}}]},{"localId":"5","locator":"8:1-8:73","name":"Observation Services","id":"2.16.840.1.113762.1.4.1111.143","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"5","s":[{"value":["","valueset ","\"Observation Services\"",": ","'urn:oid:2.16.840.1.113762.1.4.1111.143'"]}]}}]},{"localId":"6","locator":"9:1-9:78","name":"Outpatient Surgery Service","id":"2.16.840.1.113762.1.4.1110.38","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"6","s":[{"value":["","valueset ","\"Outpatient Surgery Service\"",": ","'urn:oid:2.16.840.1.113762.1.4.1110.38'"]}]}}]}]},"contexts":{"def":[{"locator":"13:1-13:15","name":"Patient"}]},"statements":{"def":[{"locator":"13:1-13:15","name":"Patient","context":"Patient","expression":{"type":"SingletonFrom","operand":{"locator":"13:1-13:15","dataType":"{urn:healthit-gov:qdm:v5_6}Patient","templateId":"Patient","type":"Retrieve"}}},{"localId":"11","locator":"15:1-16:56","name":"ED Encounter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"11","s":[{"value":["","define ","\"ED Encounter\"",":\n  "]},{"r":"10","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"10","locator":"16:3-16:56","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"16:28-16:55","name":"Emergency Department Visit","type":"ValueSetRef"}}},{"localId":"23","locator":"32:1-33:60","name":"LengthInDays","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"23","s":[{"value":["/*calculates the difference in calendar days between the start and end of the given interval.*/","define function ","\"LengthInDays\"","(","Value"," "]},{"r":"17","s":[{"value":["Interval\u003c"]},{"r":"16","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"22","s":[{"r":"22","s":[{"value":["difference in days between "]},{"r":"19","s":[{"value":["start of "]},{"r":"18","s":[{"value":["Value"]}]}]},{"value":[" and "]},{"r":"21","s":[{"value":["end of "]},{"r":"20","s":[{"value":["Value"]}]}]}]}]}]}}],"expression":{"localId":"22","locator":"33:3-33:60","precision":"Day","type":"DifferenceBetween","operand":[{"localId":"19","locator":"33:30-33:43","type":"Start","operand":{"localId":"18","locator":"33:39-33:43","name":"Value","type":"OperandRef"}},{"localId":"21","locator":"33:49-33:60","type":"End","operand":{"localId":"20","locator":"33:56-33:60","name":"Value","type":"OperandRef"}}]},"operand":[{"name":"Value","operandTypeSpecifier":{"localId":"17","locator":"32:38-32:55","type":"IntervalTypeSpecifier","pointType":{"localId":"16","locator":"32:47-32:54","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"33","locator":"18:1-21:83","name":"Inpatient Encounter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"33","s":[{"value":["","define ","\"Inpatient Encounter\"",":\n  "]},{"r":"32","s":[{"s":[{"r":"13","s":[{"r":"12","s":[{"r":"12","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Encounter Inpatient\""]}]},{"value":["]"]}]}]},{"value":[" ","EncounterInpatient"]}]}]},{"value":["\n    "]},{"r":"31","s":[{"value":["where "]},{"r":"31","s":[{"r":"26","s":[{"r":"24","s":[{"value":["\"LengthInDays\"","("]},{"r":"15","s":[{"r":"14","s":[{"value":["EncounterInpatient"]}]},{"value":["."]},{"r":"15","s":[{"value":["relevantPeriod"]}]}]},{"value":[")"]}]},{"r":"25","value":["\u003c="," ","120"]}]},{"value":["\n      and "]},{"r":"30","s":[{"r":"28","s":[{"r":"27","s":[{"value":["EncounterInpatient"]}]},{"value":["."]},{"r":"28","s":[{"value":["relevantPeriod"]}]}]},{"r":"30","value":[" ","ends during day of"," "]},{"r":"29","s":[{"value":["\"Measurement Period\""]}]}]}]}]}]}]}}],"expression":{"localId":"32","locator":"19:3-21:83","type":"Query","source":[{"localId":"13","locator":"19:3-19:68","alias":"EncounterInpatient","expression":{"localId":"12","locator":"19:3-19:49","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"19:28-19:48","name":"Encounter Inpatient","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"31","locator":"20:5-21:83","type":"And","operand":[{"localId":"26","locator":"20:11-20:65","type":"LessOrEqual","operand":[{"localId":"24","locator":"20:11-20:59","name":"LengthInDays","type":"FunctionRef","operand":[{"localId":"15","locator":"20:26-20:58","path":"relevantPeriod","scope":"EncounterInpatient","type":"Property"}]},{"localId":"25","locator":"20:63-20:65","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"120","type":"Literal"}]},{"localId":"30","locator":"21:11-21:83","precision":"Day","type":"In","operand":[{"locator":"21:45-21:48","type":"End","operand":{"localId":"28","locator":"21:11-21:43","path":"relevantPeriod","scope":"EncounterInpatient","type":"Property"}},{"localId":"29","locator":"21:64-21:83","name":"Measurement Period","type":"ParameterRef"}]}]}}},{"localId":"43","locator":"28:1-29:62","name":"ToDateInterval","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","t":[{"name":"description","value":"Returns an interval of date values extracted from the input interval of date-time values"},{"name":"description","value":"Returns an interval of date values extracted from the input interval of date-time values"},{"name":"comment","value":"This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability."}],"s":{"r":"43","s":[{"value":["/*@description: Returns an interval of date values extracted from the input interval of date-time values\n@comment: This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability.*/","define function ","\"ToDateInterval\"","(","period"," "]},{"r":"35","s":[{"value":["Interval\u003c"]},{"r":"34","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"42","s":[{"r":"42","s":[{"value":["Interval["]},{"r":"38","s":[{"value":["date from "]},{"r":"37","s":[{"value":["start of "]},{"r":"36","s":[{"value":["period"]}]}]}]},{"value":[", "]},{"r":"41","s":[{"value":["date from "]},{"r":"40","s":[{"value":["end of "]},{"r":"39","s":[{"value":["period"]}]}]}]},{"value":["]"]}]}]}]}}],"expression":{"localId":"42","locator":"29:3-29:62","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"38","locator":"29:12-29:36","type":"DateFrom","operand":{"localId":"37","locator":"29:22-29:36","type":"Start","operand":{"localId":"36","locator":"29:31-29:36","name":"period","type":"OperandRef"}}},"high":{"localId":"41","locator":"29:39-29:61","type":"DateFrom","operand":{"localId":"40","locator":"29:49-29:61","type":"End","operand":{"localId":"39","locator":"29:56-29:61","name":"period","type":"OperandRef"}}}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"35","locator":"28:41-28:58","type":"IntervalTypeSpecifier","pointType":{"localId":"34","locator":"28:50-28:57","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"79","locator":"36:1-44:71","name":"HospitalizationLocations","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"79","s":[{"value":["/*returns list of all locations within an encounter, including locations for immediately prior ED visit.*/","define function ","\"HospitalizationLocations\"","(","Encounter"," "]},{"r":"47","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"78","s":[{"r":"78","s":[{"s":[{"r":"49","s":[{"r":"48","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"65","s":[{"value":["EDVisit",": "]},{"r":"64","s":[{"value":["Last","("]},{"r":"63","s":[{"s":[{"r":"51","s":[{"r":"50","s":[{"r":"50","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"58","s":[{"value":["where "]},{"r":"58","s":[{"r":"53","s":[{"r":"52","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"53","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"58","s":[{"value":["ends "]},{"r":"57","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"56","s":[{"value":["start of "]},{"r":"55","s":[{"r":"54","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"55","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"62","s":[{"value":["sort by \n  \t\t\t"]},{"r":"61","s":[{"r":"60","s":[{"value":["end of "]},{"r":"59","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"77","s":[{"value":["return "]},{"r":"76","s":[{"value":["if "]},{"r":"67","s":[{"r":"66","s":[{"value":["EDVisit"]}]},{"value":[" is null"]}]},{"value":[" then "]},{"r":"69","s":[{"r":"68","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"69","s":[{"value":["facilityLocations"]}]}]},{"value":[" \n  \t\telse "]},{"r":"75","s":[{"value":["flatten "]},{"r":"74","s":[{"value":["{ "]},{"r":"71","s":[{"r":"70","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"71","s":[{"value":["facilityLocations"]}]}]},{"value":[", "]},{"r":"73","s":[{"r":"72","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"73","s":[{"value":["facilityLocations"]}]}]},{"value":[" }"]}]}]}]}]}]}]}]}}],"expression":{"localId":"78","locator":"37:3-44:71","type":"Query","source":[{"localId":"49","locator":"37:3-37:17","alias":"Visit","expression":{"localId":"48","locator":"37:3-37:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"65","locator":"38:8-42:4","identifier":"EDVisit","expression":{"localId":"64","locator":"38:17-42:4","type":"Last","source":{"localId":"63","locator":"38:22-41:26","type":"Query","source":[{"localId":"51","locator":"38:22-38:82","alias":"LastED","expression":{"localId":"50","locator":"38:22-38:75","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"38:47-38:74","name":"Emergency Department Visit","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"58","locator":"39:6-39:95","type":"And","operand":[{"locator":"39:39-39:52","type":"In","operand":[{"locator":"39:34-39:37","type":"End","operand":{"localId":"53","locator":"39:12-39:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"39:39-39:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"39:67-39:95","type":"Subtract","operand":[{"localId":"56","locator":"39:67-39:95","type":"Start","operand":{"localId":"55","locator":"39:76-39:95","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"57","locator":"39:39-39:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"56","locator":"39:67-39:95","type":"Start","operand":{"localId":"55","locator":"39:76-39:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"39:39-39:52","type":"Not","operand":{"locator":"39:39-39:52","type":"IsNull","operand":{"localId":"56","locator":"39:67-39:95","type":"Start","operand":{"localId":"55","locator":"39:76-39:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"62","locator":"40:6-41:26","by":[{"localId":"61","locator":"41:6-41:26","direction":"asc","type":"ByExpression","expression":{"localId":"60","locator":"41:6-41:26","type":"End","operand":{"localId":"59","locator":"41:13-41:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"77","locator":"43:4-44:71","expression":{"localId":"76","locator":"43:11-44:71","type":"If","condition":{"localId":"67","locator":"43:14-43:28","type":"IsNull","operand":{"localId":"66","locator":"43:14-43:20","name":"EDVisit","type":"QueryLetRef"}},"then":{"localId":"69","locator":"43:35-43:57","path":"facilityLocations","scope":"Visit","type":"Property"},"else":{"localId":"75","locator":"44:10-44:71","type":"Flatten","operand":{"localId":"74","locator":"44:18-44:71","type":"List","element":[{"localId":"71","locator":"44:20-44:44","path":"facilityLocations","type":"Property","source":{"localId":"70","locator":"44:20-44:26","name":"EDVisit","type":"QueryLetRef"}},{"localId":"73","locator":"44:47-44:69","path":"facilityLocations","scope":"Visit","type":"Property"}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"47","locator":"36:54-36:75","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"96","locator":"47:1-51:18","name":"EmergencyDepartmentArrivalTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"96","s":[{"value":["/*Returns the arrival time in the ED for the encounter.*/","define function ","\"EmergencyDepartmentArrivalTime\"","(","Encounter"," "]},{"r":"80","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"95","s":[{"r":"95","s":[{"value":["start of "]},{"r":"94","s":[{"r":"93","s":[{"value":["First","("]},{"r":"92","s":[{"s":[{"r":"83","s":[{"r":"82","s":[{"value":["("]},{"r":"82","s":[{"value":["\"HospitalizationLocations\"","("]},{"r":"81","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n  \t\t"]},{"r":"87","s":[{"value":["where "]},{"r":"87","s":[{"r":"85","s":[{"r":"84","s":[{"value":["HospitalLocation"]}]},{"value":["."]},{"r":"85","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"86","s":[{"value":["\"Emergency Department Visit\""]}]}]}]},{"value":["\n  \t\t"]},{"r":"91","s":[{"value":["sort by "]},{"r":"90","s":[{"r":"89","s":[{"value":["start of "]},{"r":"88","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"94","s":[{"value":["locationPeriod"]}]}]}]}]}]}}],"expression":{"localId":"95","locator":"48:3-51:18","type":"Start","operand":{"localId":"94","locator":"48:12-51:18","path":"locationPeriod","type":"Property","source":{"localId":"93","locator":"48:12-51:3","type":"First","source":{"localId":"92","locator":"48:18-50:35","type":"Query","source":[{"localId":"83","locator":"48:18-48:72","alias":"HospitalLocation","expression":{"localId":"82","locator":"48:18-48:56","name":"HospitalizationLocations","type":"FunctionRef","operand":[{"localId":"81","locator":"48:46-48:54","name":"Encounter","type":"OperandRef"}]}}],"relationship":[],"where":{"localId":"87","locator":"49:5-49:63","type":"InValueSet","code":{"localId":"85","locator":"49:11-49:31","path":"code","scope":"HospitalLocation","type":"Property"},"valueset":{"localId":"86","locator":"49:36-49:63","name":"Emergency Department Visit","type":"ValueSetRef"}},"sort":{"localId":"91","locator":"50:5-50:35","by":[{"localId":"90","locator":"50:13-50:35","direction":"asc","type":"ByExpression","expression":{"localId":"89","locator":"50:13-50:35","type":"Start","operand":{"localId":"88","locator":"50:22-50:35","name":"locationPeriod","type":"IdentifierRef"}}}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"80","locator":"47:60-47:81","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"131","locator":"64:1-72:31","name":"Hospitalization","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"131","s":[{"value":["/*Hospitalization returns the total interval for admission to discharge for the given encounter, or for the admission of any immediately prior emergency department visit to the discharge of the given encounter.*/","define function ","\"Hospitalization\"","(","Encounter"," "]},{"r":"99","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"130","s":[{"r":"130","s":[{"s":[{"r":"101","s":[{"r":"100","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"117","s":[{"value":["EDVisit",": "]},{"r":"116","s":[{"value":["Last","("]},{"r":"115","s":[{"s":[{"r":"103","s":[{"r":"102","s":[{"r":"102","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"110","s":[{"value":["where "]},{"r":"110","s":[{"r":"105","s":[{"r":"104","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"105","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"110","s":[{"value":["ends "]},{"r":"109","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"108","s":[{"value":["start of "]},{"r":"107","s":[{"r":"106","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"107","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"114","s":[{"value":["sort by \n  \t\t\t"]},{"r":"113","s":[{"r":"112","s":[{"value":["end of "]},{"r":"111","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"129","s":[{"value":["return "]},{"r":"128","s":[{"value":["Interval["]},{"r":"124","s":[{"value":["Coalesce","("]},{"r":"120","s":[{"value":["start of "]},{"r":"119","s":[{"r":"118","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"119","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"123","s":[{"value":["start of "]},{"r":"122","s":[{"r":"121","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"122","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]},{"value":[", \n  \t"]},{"r":"127","s":[{"value":["end of "]},{"r":"126","s":[{"r":"125","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"126","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["]"]}]}]}]}]}]}}],"expression":{"localId":"130","locator":"65:3-72:31","type":"Query","source":[{"localId":"101","locator":"65:3-65:17","alias":"Visit","expression":{"localId":"100","locator":"65:3-65:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"117","locator":"66:8-70:4","identifier":"EDVisit","expression":{"localId":"116","locator":"66:17-70:4","type":"Last","source":{"localId":"115","locator":"66:22-69:26","type":"Query","source":[{"localId":"103","locator":"66:22-66:82","alias":"LastED","expression":{"localId":"102","locator":"66:22-66:75","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"66:47-66:74","name":"Emergency Department Visit","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"110","locator":"67:6-67:95","type":"And","operand":[{"locator":"67:39-67:52","type":"In","operand":[{"locator":"67:34-67:37","type":"End","operand":{"localId":"105","locator":"67:12-67:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"67:39-67:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"67:67-67:95","type":"Subtract","operand":[{"localId":"108","locator":"67:67-67:95","type":"Start","operand":{"localId":"107","locator":"67:76-67:95","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"109","locator":"67:39-67:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"108","locator":"67:67-67:95","type":"Start","operand":{"localId":"107","locator":"67:76-67:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"67:39-67:52","type":"Not","operand":{"locator":"67:39-67:52","type":"IsNull","operand":{"localId":"108","locator":"67:67-67:95","type":"Start","operand":{"localId":"107","locator":"67:76-67:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"114","locator":"68:6-69:26","by":[{"localId":"113","locator":"69:6-69:26","direction":"asc","type":"ByExpression","expression":{"localId":"112","locator":"69:6-69:26","type":"End","operand":{"localId":"111","locator":"69:13-69:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"129","locator":"71:4-72:31","expression":{"localId":"128","locator":"71:11-72:31","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"124","locator":"71:20-71:91","type":"Coalesce","operand":[{"localId":"120","locator":"71:29-71:59","type":"Start","operand":{"localId":"119","locator":"71:38-71:59","path":"relevantPeriod","type":"Property","source":{"localId":"118","locator":"71:38-71:44","name":"EDVisit","type":"QueryLetRef"}}},{"localId":"123","locator":"71:62-71:90","type":"Start","operand":{"localId":"122","locator":"71:71-71:90","path":"relevantPeriod","scope":"Visit","type":"Property"}}]},"high":{"localId":"127","locator":"72:4-72:30","type":"End","operand":{"localId":"126","locator":"72:11-72:30","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"99","locator":"64:45-64:66","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"134","locator":"54:1-55:39","name":"HospitalAdmissionTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"134","s":[{"value":["/*Returns admission time for an encounter or for immediately prior emergency department visit.*/","define function ","\"HospitalAdmissionTime\"","(","Encounter"," "]},{"r":"97","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"133","s":[{"r":"133","s":[{"value":["start of "]},{"r":"132","s":[{"value":["\"Hospitalization\"","("]},{"r":"98","s":[{"value":["Encounter"]}]},{"value":[")"]}]}]}]}]}}],"expression":{"localId":"133","locator":"55:3-55:39","type":"Start","operand":{"localId":"132","locator":"55:12-55:39","name":"Hospitalization","type":"FunctionRef","operand":[{"localId":"98","locator":"55:30-55:38","name":"Encounter","type":"OperandRef"}]}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"97","locator":"54:51-54:72","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"147","locator":"58:1-61:18","name":"HospitalArrivalTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"147","s":[{"value":["/*Returns earliest arrival time for an encounter including any prior ED visit.*/","define function ","\"HospitalArrivalTime\"","(","Encounter"," "]},{"r":"135","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"146","s":[{"r":"146","s":[{"value":["start of "]},{"r":"145","s":[{"r":"144","s":[{"value":["First","("]},{"r":"143","s":[{"s":[{"r":"138","s":[{"r":"137","s":[{"value":["("]},{"r":"137","s":[{"value":["\"HospitalizationLocations\"","("]},{"r":"136","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n  \t\t"]},{"r":"142","s":[{"value":["sort by "]},{"r":"141","s":[{"r":"140","s":[{"value":["start of "]},{"r":"139","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"145","s":[{"value":["locationPeriod"]}]}]}]}]}]}}],"expression":{"localId":"146","locator":"59:3-61:18","type":"Start","operand":{"localId":"145","locator":"59:12-61:18","path":"locationPeriod","type":"Property","source":{"localId":"144","locator":"59:12-61:3","type":"First","source":{"localId":"143","locator":"59:18-60:35","type":"Query","source":[{"localId":"138","locator":"59:18-59:72","alias":"HospitalLocation","expression":{"localId":"137","locator":"59:18-59:56","name":"HospitalizationLocations","type":"FunctionRef","operand":[{"localId":"136","locator":"59:46-59:54","name":"Encounter","type":"OperandRef"}]}}],"relationship":[],"sort":{"localId":"142","locator":"60:5-60:35","by":[{"localId":"141","locator":"60:13-60:35","direction":"asc","type":"ByExpression","expression":{"localId":"140","locator":"60:13-60:35","type":"Start","operand":{"localId":"139","locator":"60:22-60:35","name":"locationPeriod","type":"IdentifierRef"}}}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"135","locator":"58:49-58:70","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"154","locator":"75:1-76:44","name":"HospitalizationLengthofStay","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"154","s":[{"value":["/*Returns the length of stay in days (i.e. the number of days between admission and discharge) for the given encounter, or from the admission of any immediately prior emergency department visit to the discharge of the encounter*/","define function ","\"HospitalizationLengthofStay\"","(","Encounter"," "]},{"r":"150","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"153","s":[{"r":"153","s":[{"value":["LengthInDays","("]},{"r":"152","s":[{"value":["\"Hospitalization\"","("]},{"r":"151","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"153","locator":"76:3-76:44","name":"LengthInDays","type":"FunctionRef","operand":[{"localId":"152","locator":"76:16-76:43","name":"Hospitalization","type":"FunctionRef","operand":[{"localId":"151","locator":"76:34-76:42","name":"Encounter","type":"OperandRef"}]}]},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"150","locator":"75:57-75:78","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"167","locator":"79:1-82:18","name":"HospitalDepartureTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"167","s":[{"value":["/*Returns the latest departure time for encounter including any prior ED visit.*/","define function ","\"HospitalDepartureTime\"","(","Encounter"," "]},{"r":"155","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"166","s":[{"r":"166","s":[{"value":["end of "]},{"r":"165","s":[{"r":"164","s":[{"value":["Last","("]},{"r":"163","s":[{"s":[{"r":"158","s":[{"r":"157","s":[{"value":["("]},{"r":"157","s":[{"value":["\"HospitalizationLocations\"","("]},{"r":"156","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n  \t\t"]},{"r":"162","s":[{"value":["sort by "]},{"r":"161","s":[{"r":"160","s":[{"value":["start of "]},{"r":"159","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"165","s":[{"value":["locationPeriod"]}]}]}]}]}]}}],"expression":{"localId":"166","locator":"80:3-82:18","type":"End","operand":{"localId":"165","locator":"80:10-82:18","path":"locationPeriod","type":"Property","source":{"localId":"164","locator":"80:10-82:3","type":"Last","source":{"localId":"163","locator":"80:15-81:35","type":"Query","source":[{"localId":"158","locator":"80:15-80:69","alias":"HospitalLocation","expression":{"localId":"157","locator":"80:15-80:53","name":"HospitalizationLocations","type":"FunctionRef","operand":[{"localId":"156","locator":"80:43-80:51","name":"Encounter","type":"OperandRef"}]}}],"relationship":[],"sort":{"localId":"162","locator":"81:5-81:35","by":[{"localId":"161","locator":"81:13-81:35","direction":"asc","type":"ByExpression","expression":{"localId":"160","locator":"81:13-81:35","type":"Start","operand":{"localId":"159","locator":"81:22-81:35","name":"locationPeriod","type":"IdentifierRef"}}}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"155","locator":"79:51-79:72","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"172","locator":"85:1-86:33","name":"HospitalDischargeTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"172","s":[{"value":["/*Hospital Discharge Time returns the discharge time for an encounter*/","define function ","\"HospitalDischargeTime\"","(","Encounter"," "]},{"r":"168","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"171","s":[{"r":"171","s":[{"value":["end of "]},{"r":"170","s":[{"r":"169","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"170","s":[{"value":["relevantPeriod"]}]}]}]}]}]}}],"expression":{"localId":"171","locator":"86:3-86:33","type":"End","operand":{"localId":"170","locator":"86:10-86:33","path":"relevantPeriod","type":"Property","source":{"localId":"169","locator":"86:10-86:18","name":"Encounter","type":"OperandRef"}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"168","locator":"85:51-85:72","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"245","locator":"89:1-109:31","name":"HospitalizationWithObservationAndOutpatientSurgeryService","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"245","s":[{"value":["/*Hospitalization with Observation and Outpatient Surgery Service returns the total interval from the start of any immediately prior emergency department visit, outpatient surgery visit or observation visit to the discharge of the given encounter.*/","define function ","\"HospitalizationWithObservationAndOutpatientSurgeryService\"","(","Encounter"," "]},{"r":"173","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"244","s":[{"r":"244","s":[{"s":[{"r":"175","s":[{"r":"174","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"191","s":[{"value":["ObsVisit",": "]},{"r":"190","s":[{"value":["Last","("]},{"r":"189","s":[{"s":[{"r":"177","s":[{"r":"176","s":[{"r":"176","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Observation Services\""]}]},{"value":["]"]}]}]},{"value":[" ","LastObs"]}]}]},{"value":["\n  \t\t\t"]},{"r":"184","s":[{"value":["where "]},{"r":"184","s":[{"r":"179","s":[{"r":"178","s":[{"value":["LastObs"]}]},{"value":["."]},{"r":"179","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"184","s":[{"value":["ends "]},{"r":"183","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"182","s":[{"value":["start of "]},{"r":"181","s":[{"r":"180","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"181","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"188","s":[{"value":["sort by \n  \t\t\t"]},{"r":"187","s":[{"r":"186","s":[{"value":["end of "]},{"r":"185","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]},{"value":[",\n  \t"]},{"r":"199","s":[{"value":["VisitStart",": "]},{"r":"198","s":[{"value":["Coalesce","("]},{"r":"194","s":[{"value":["start of "]},{"r":"193","s":[{"r":"192","s":[{"value":["ObsVisit"]}]},{"value":["."]},{"r":"193","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"197","s":[{"value":["start of "]},{"r":"196","s":[{"r":"195","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"196","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]}]},{"value":[",\n  \t"]},{"r":"213","s":[{"value":["EDVisit",": "]},{"r":"212","s":[{"value":["Last","("]},{"r":"211","s":[{"s":[{"r":"201","s":[{"r":"200","s":[{"r":"200","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"206","s":[{"value":["where "]},{"r":"206","s":[{"r":"203","s":[{"r":"202","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"203","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"206","s":[{"value":["ends "]},{"r":"205","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"204","s":[{"value":["VisitStart"]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"210","s":[{"value":["sort by \n  \t\t\t"]},{"r":"209","s":[{"r":"208","s":[{"value":["end of "]},{"r":"207","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]},{"value":[",\n  \t"]},{"r":"219","s":[{"value":["VisitStartWithED",": "]},{"r":"218","s":[{"value":["Coalesce","("]},{"r":"216","s":[{"value":["start of "]},{"r":"215","s":[{"r":"214","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"215","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"217","s":[{"value":["VisitStart"]}]},{"value":[")"]}]}]},{"value":[",\n  \t"]},{"r":"233","s":[{"value":["OutpatientSurgeryVisit",": "]},{"r":"232","s":[{"value":["Last","("]},{"r":"231","s":[{"s":[{"r":"221","s":[{"r":"220","s":[{"r":"220","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Outpatient Surgery Service\""]}]},{"value":["]"]}]}]},{"value":[" ","LastSurgeryOP"]}]}]},{"value":["\n  \t\t\t"]},{"r":"226","s":[{"value":["where "]},{"r":"226","s":[{"r":"223","s":[{"r":"222","s":[{"value":["LastSurgeryOP"]}]},{"value":["."]},{"r":"223","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"226","s":[{"value":["ends "]},{"r":"225","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"224","s":[{"value":["VisitStartWithED"]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"230","s":[{"value":["sort by \n  \t\t\t"]},{"r":"229","s":[{"r":"228","s":[{"value":["end of "]},{"r":"227","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"243","s":[{"value":["return "]},{"r":"242","s":[{"value":["Interval["]},{"r":"238","s":[{"value":["Coalesce","("]},{"r":"236","s":[{"value":["start of "]},{"r":"235","s":[{"r":"234","s":[{"value":["OutpatientSurgeryVisit"]}]},{"value":["."]},{"r":"235","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"237","s":[{"value":["VisitStartWithED"]}]},{"value":[")"]}]},{"value":[", \n  \t"]},{"r":"241","s":[{"value":["end of "]},{"r":"240","s":[{"r":"239","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"240","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["]"]}]}]}]}]}]}}],"expression":{"localId":"244","locator":"90:3-109:31","type":"Query","source":[{"localId":"175","locator":"90:3-90:17","alias":"Visit","expression":{"localId":"174","locator":"90:3-90:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"191","locator":"91:8-95:4","identifier":"ObsVisit","expression":{"localId":"190","locator":"91:18-95:4","type":"Last","source":{"localId":"189","locator":"91:23-94:26","type":"Query","source":[{"localId":"177","locator":"91:23-91:78","alias":"LastObs","expression":{"localId":"176","locator":"91:23-91:70","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"91:48-91:69","name":"Observation Services","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"184","locator":"92:6-92:96","type":"And","operand":[{"locator":"92:40-92:53","type":"In","operand":[{"locator":"92:35-92:38","type":"End","operand":{"localId":"179","locator":"92:12-92:33","path":"relevantPeriod","scope":"LastObs","type":"Property"}},{"locator":"92:40-92:53","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"92:68-92:96","type":"Subtract","operand":[{"localId":"182","locator":"92:68-92:96","type":"Start","operand":{"localId":"181","locator":"92:77-92:96","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"183","locator":"92:40-92:45","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"182","locator":"92:68-92:96","type":"Start","operand":{"localId":"181","locator":"92:77-92:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"92:40-92:53","type":"Not","operand":{"locator":"92:40-92:53","type":"IsNull","operand":{"localId":"182","locator":"92:68-92:96","type":"Start","operand":{"localId":"181","locator":"92:77-92:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"188","locator":"93:6-94:26","by":[{"localId":"187","locator":"94:6-94:26","direction":"asc","type":"ByExpression","expression":{"localId":"186","locator":"94:6-94:26","type":"End","operand":{"localId":"185","locator":"94:13-94:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}},{"localId":"199","locator":"96:4-96:88","identifier":"VisitStart","expression":{"localId":"198","locator":"96:16-96:88","type":"Coalesce","operand":[{"localId":"194","locator":"96:25-96:56","type":"Start","operand":{"localId":"193","locator":"96:34-96:56","path":"relevantPeriod","type":"Property","source":{"localId":"192","locator":"96:34-96:41","name":"ObsVisit","type":"QueryLetRef"}}},{"localId":"197","locator":"96:59-96:87","type":"Start","operand":{"localId":"196","locator":"96:68-96:87","path":"relevantPeriod","scope":"Visit","type":"Property"}}]}},{"localId":"213","locator":"97:4-101:4","identifier":"EDVisit","expression":{"localId":"212","locator":"97:13-101:4","type":"Last","source":{"localId":"211","locator":"97:18-100:26","type":"Query","source":[{"localId":"201","locator":"97:18-97:78","alias":"LastED","expression":{"localId":"200","locator":"97:18-97:71","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"97:43-97:70","name":"Emergency Department Visit","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"206","locator":"98:6-98:76","type":"And","operand":[{"locator":"98:39-98:52","type":"In","operand":[{"locator":"98:34-98:37","type":"End","operand":{"localId":"203","locator":"98:12-98:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"98:39-98:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"98:67-98:76","type":"Subtract","operand":[{"localId":"204","locator":"98:67-98:76","name":"VisitStart","type":"QueryLetRef"},{"localId":"205","locator":"98:39-98:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"204","locator":"98:67-98:76","name":"VisitStart","type":"QueryLetRef"}}]},{"locator":"98:39-98:52","type":"Not","operand":{"locator":"98:39-98:52","type":"IsNull","operand":{"localId":"204","locator":"98:67-98:76","name":"VisitStart","type":"QueryLetRef"}}}]},"sort":{"localId":"210","locator":"99:6-100:26","by":[{"localId":"209","locator":"100:6-100:26","direction":"asc","type":"ByExpression","expression":{"localId":"208","locator":"100:6-100:26","type":"End","operand":{"localId":"207","locator":"100:13-100:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}},{"localId":"219","locator":"102:4-102:74","identifier":"VisitStartWithED","expression":{"localId":"218","locator":"102:22-102:74","type":"Coalesce","operand":[{"localId":"216","locator":"102:31-102:61","type":"Start","operand":{"localId":"215","locator":"102:40-102:61","path":"relevantPeriod","type":"Property","source":{"localId":"214","locator":"102:40-102:46","name":"EDVisit","type":"QueryLetRef"}}},{"localId":"217","locator":"102:64-102:73","name":"VisitStart","type":"QueryLetRef"}]}},{"localId":"233","locator":"103:4-107:4","identifier":"OutpatientSurgeryVisit","expression":{"localId":"232","locator":"103:28-107:4","type":"Last","source":{"localId":"231","locator":"103:33-106:26","type":"Query","source":[{"localId":"221","locator":"103:33-103:100","alias":"LastSurgeryOP","expression":{"localId":"220","locator":"103:33-103:86","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"103:58-103:85","name":"Outpatient Surgery Service","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"226","locator":"104:6-104:89","type":"And","operand":[{"locator":"104:46-104:59","type":"In","operand":[{"locator":"104:41-104:44","type":"End","operand":{"localId":"223","locator":"104:12-104:39","path":"relevantPeriod","scope":"LastSurgeryOP","type":"Property"}},{"locator":"104:46-104:59","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"104:74-104:89","type":"Subtract","operand":[{"localId":"224","locator":"104:74-104:89","name":"VisitStartWithED","type":"QueryLetRef"},{"localId":"225","locator":"104:46-104:51","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"224","locator":"104:74-104:89","name":"VisitStartWithED","type":"QueryLetRef"}}]},{"locator":"104:46-104:59","type":"Not","operand":{"locator":"104:46-104:59","type":"IsNull","operand":{"localId":"224","locator":"104:74-104:89","name":"VisitStartWithED","type":"QueryLetRef"}}}]},"sort":{"localId":"230","locator":"105:6-106:26","by":[{"localId":"229","locator":"106:6-106:26","direction":"asc","type":"ByExpression","expression":{"localId":"228","locator":"106:6-106:26","type":"End","operand":{"localId":"227","locator":"106:13-106:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"243","locator":"108:4-109:31","expression":{"localId":"242","locator":"108:11-109:31","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"238","locator":"108:20-108:93","type":"Coalesce","operand":[{"localId":"236","locator":"108:29-108:74","type":"Start","operand":{"localId":"235","locator":"108:38-108:74","path":"relevantPeriod","type":"Property","source":{"localId":"234","locator":"108:38-108:59","name":"OutpatientSurgeryVisit","type":"QueryLetRef"}}},{"localId":"237","locator":"108:77-108:92","name":"VisitStartWithED","type":"QueryLetRef"}]},"high":{"localId":"241","locator":"109:4-109:30","type":"End","operand":{"localId":"240","locator":"109:11-109:30","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"173","locator":"89:87-89:108","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"298","locator":"112:1-126:31","name":"HospitalizationWithObservation","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"298","s":[{"value":["/*Hospitalization with Observation returns the total interval from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/","define function ","\"HospitalizationWithObservation\"","(","Encounter"," "]},{"r":"246","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"297","s":[{"r":"297","s":[{"s":[{"r":"248","s":[{"r":"247","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"264","s":[{"value":["ObsVisit",": "]},{"r":"263","s":[{"value":["Last","("]},{"r":"262","s":[{"s":[{"r":"250","s":[{"r":"249","s":[{"r":"249","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Observation Services\""]}]},{"value":["]"]}]}]},{"value":[" ","LastObs"]}]}]},{"value":["\n  \t\t\t"]},{"r":"257","s":[{"value":["where "]},{"r":"257","s":[{"r":"252","s":[{"r":"251","s":[{"value":["LastObs"]}]},{"value":["."]},{"r":"252","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"257","s":[{"value":["ends "]},{"r":"256","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"255","s":[{"value":["start of "]},{"r":"254","s":[{"r":"253","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"254","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"261","s":[{"value":["sort by \n  \t\t\t"]},{"r":"260","s":[{"r":"259","s":[{"value":["end of "]},{"r":"258","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]},{"value":[",\n  \t"]},{"r":"272","s":[{"value":["VisitStart",": "]},{"r":"271","s":[{"value":["Coalesce","("]},{"r":"267","s":[{"value":["start of "]},{"r":"266","s":[{"r":"265","s":[{"value":["ObsVisit"]}]},{"value":["."]},{"r":"266","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"270","s":[{"value":["start of "]},{"r":"269","s":[{"r":"268","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"269","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]}]},{"value":[",\n  \t"]},{"r":"286","s":[{"value":["EDVisit",": "]},{"r":"285","s":[{"value":["Last","("]},{"r":"284","s":[{"s":[{"r":"274","s":[{"r":"273","s":[{"r":"273","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"279","s":[{"value":["where "]},{"r":"279","s":[{"r":"276","s":[{"r":"275","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"276","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"279","s":[{"value":["ends "]},{"r":"278","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"277","s":[{"value":["VisitStart"]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"283","s":[{"value":["sort by \n  \t\t\t"]},{"r":"282","s":[{"r":"281","s":[{"value":["end of "]},{"r":"280","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"296","s":[{"value":["return "]},{"r":"295","s":[{"value":["Interval["]},{"r":"291","s":[{"value":["Coalesce","("]},{"r":"289","s":[{"value":["start of "]},{"r":"288","s":[{"r":"287","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"288","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"290","s":[{"value":["VisitStart"]}]},{"value":[")"]}]},{"value":[", \n  \t"]},{"r":"294","s":[{"value":["end of "]},{"r":"293","s":[{"r":"292","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"293","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["]"]}]}]}]}]}]}}],"expression":{"localId":"297","locator":"113:3-126:31","type":"Query","source":[{"localId":"248","locator":"113:3-113:17","alias":"Visit","expression":{"localId":"247","locator":"113:3-113:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"264","locator":"114:8-118:4","identifier":"ObsVisit","expression":{"localId":"263","locator":"114:18-118:4","type":"Last","source":{"localId":"262","locator":"114:23-117:26","type":"Query","source":[{"localId":"250","locator":"114:23-114:78","alias":"LastObs","expression":{"localId":"249","locator":"114:23-114:70","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"114:48-114:69","name":"Observation Services","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"257","locator":"115:6-115:96","type":"And","operand":[{"locator":"115:40-115:53","type":"In","operand":[{"locator":"115:35-115:38","type":"End","operand":{"localId":"252","locator":"115:12-115:33","path":"relevantPeriod","scope":"LastObs","type":"Property"}},{"locator":"115:40-115:53","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"115:68-115:96","type":"Subtract","operand":[{"localId":"255","locator":"115:68-115:96","type":"Start","operand":{"localId":"254","locator":"115:77-115:96","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"256","locator":"115:40-115:45","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"255","locator":"115:68-115:96","type":"Start","operand":{"localId":"254","locator":"115:77-115:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"115:40-115:53","type":"Not","operand":{"locator":"115:40-115:53","type":"IsNull","operand":{"localId":"255","locator":"115:68-115:96","type":"Start","operand":{"localId":"254","locator":"115:77-115:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"261","locator":"116:6-117:26","by":[{"localId":"260","locator":"117:6-117:26","direction":"asc","type":"ByExpression","expression":{"localId":"259","locator":"117:6-117:26","type":"End","operand":{"localId":"258","locator":"117:13-117:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}},{"localId":"272","locator":"119:4-119:88","identifier":"VisitStart","expression":{"localId":"271","locator":"119:16-119:88","type":"Coalesce","operand":[{"localId":"267","locator":"119:25-119:56","type":"Start","operand":{"localId":"266","locator":"119:34-119:56","path":"relevantPeriod","type":"Property","source":{"localId":"265","locator":"119:34-119:41","name":"ObsVisit","type":"QueryLetRef"}}},{"localId":"270","locator":"119:59-119:87","type":"Start","operand":{"localId":"269","locator":"119:68-119:87","path":"relevantPeriod","scope":"Visit","type":"Property"}}]}},{"localId":"286","locator":"120:4-124:4","identifier":"EDVisit","expression":{"localId":"285","locator":"120:13-124:4","type":"Last","source":{"localId":"284","locator":"120:18-123:26","type":"Query","source":[{"localId":"274","locator":"120:18-120:78","alias":"LastED","expression":{"localId":"273","locator":"120:18-120:71","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"120:43-120:70","name":"Emergency Department Visit","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"279","locator":"121:6-121:76","type":"And","operand":[{"locator":"121:39-121:52","type":"In","operand":[{"locator":"121:34-121:37","type":"End","operand":{"localId":"276","locator":"121:12-121:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"121:39-121:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"121:67-121:76","type":"Subtract","operand":[{"localId":"277","locator":"121:67-121:76","name":"VisitStart","type":"QueryLetRef"},{"localId":"278","locator":"121:39-121:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"277","locator":"121:67-121:76","name":"VisitStart","type":"QueryLetRef"}}]},{"locator":"121:39-121:52","type":"Not","operand":{"locator":"121:39-121:52","type":"IsNull","operand":{"localId":"277","locator":"121:67-121:76","name":"VisitStart","type":"QueryLetRef"}}}]},"sort":{"localId":"283","locator":"122:6-123:26","by":[{"localId":"282","locator":"123:6-123:26","direction":"asc","type":"ByExpression","expression":{"localId":"281","locator":"123:6-123:26","type":"End","operand":{"localId":"280","locator":"123:13-123:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"296","locator":"125:4-126:31","expression":{"localId":"295","locator":"125:11-126:31","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"291","locator":"125:20-125:72","type":"Coalesce","operand":[{"localId":"289","locator":"125:29-125:59","type":"Start","operand":{"localId":"288","locator":"125:38-125:59","path":"relevantPeriod","type":"Property","source":{"localId":"287","locator":"125:38-125:44","name":"EDVisit","type":"QueryLetRef"}}},{"localId":"290","locator":"125:62-125:71","name":"VisitStart","type":"QueryLetRef"}]},"high":{"localId":"294","locator":"126:4-126:30","type":"End","operand":{"localId":"293","locator":"126:11-126:30","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"246","locator":"112:60-112:81","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"303","locator":"129:1-130:61","name":"HospitalizationWithObservationLengthofStay","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"303","s":[{"value":["/*Hospitalization with Observation Length of Stay returns the length in days from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/","define function ","\"HospitalizationWithObservationLengthofStay\"","(","Encounter"," "]},{"r":"299","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"302","s":[{"r":"302","s":[{"value":["\"LengthInDays\"","("]},{"r":"301","s":[{"value":["\"HospitalizationWithObservation\"","("]},{"r":"300","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"302","locator":"130:3-130:61","name":"LengthInDays","type":"FunctionRef","operand":[{"localId":"301","locator":"130:18-130:60","name":"HospitalizationWithObservation","type":"FunctionRef","operand":[{"localId":"300","locator":"130:51-130:59","name":"Encounter","type":"OperandRef"}]}]},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"299","locator":"129:72-129:93","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"324","locator":"133:1-138:3","name":"FirstInpatientIntensiveCareUnit","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"324","s":[{"value":["/*First Inpatient Intensive Care Unit returns the first intensive care unit for the given encounter, without considering any immediately prior emergency department visit.*/","define function ","\"FirstInpatientIntensiveCareUnit\"","(","Encounter"," "]},{"r":"304","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"323","s":[{"r":"323","s":[{"value":["First","("]},{"r":"322","s":[{"s":[{"r":"307","s":[{"r":"306","s":[{"value":["("]},{"r":"306","s":[{"r":"305","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"306","s":[{"value":["facilityLocations"]}]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n      "]},{"r":"317","s":[{"value":["where "]},{"r":"317","s":[{"r":"311","s":[{"r":"309","s":[{"r":"308","s":[{"value":["HospitalLocation"]}]},{"value":["."]},{"r":"309","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"310","s":[{"value":["\"Intensive Care Unit\""]}]}]},{"value":["\n        and "]},{"r":"316","s":[{"r":"313","s":[{"r":"312","s":[{"value":["HospitalLocation"]}]},{"value":["."]},{"r":"313","s":[{"value":["locationPeriod"]}]}]},{"r":"316","value":[" ","during"," "]},{"r":"315","s":[{"r":"314","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"315","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n      "]},{"r":"321","s":[{"value":["sort by "]},{"r":"320","s":[{"r":"319","s":[{"value":["start of "]},{"r":"318","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]}]}]}}],"expression":{"localId":"323","locator":"134:3-138:3","type":"First","source":{"localId":"322","locator":"134:9-137:37","type":"Query","source":[{"localId":"307","locator":"134:9-134:53","alias":"HospitalLocation","expression":{"localId":"306","locator":"134:9-134:37","path":"facilityLocations","type":"Property","source":{"localId":"305","locator":"134:10-134:18","name":"Encounter","type":"OperandRef"}}}],"relationship":[],"where":{"localId":"317","locator":"135:7-136:75","type":"And","operand":[{"localId":"311","locator":"135:13-135:58","type":"InValueSet","code":{"localId":"309","locator":"135:13-135:33","path":"code","scope":"HospitalLocation","type":"Property"},"valueset":{"localId":"310","locator":"135:38-135:58","name":"Intensive Care Unit","type":"ValueSetRef"}},{"localId":"316","locator":"136:13-136:75","type":"IncludedIn","operand":[{"localId":"313","locator":"136:13-136:43","path":"locationPeriod","scope":"HospitalLocation","type":"Property"},{"localId":"315","locator":"136:52-136:75","path":"relevantPeriod","type":"Property","source":{"localId":"314","locator":"136:52-136:60","name":"Encounter","type":"OperandRef"}}]}]},"sort":{"localId":"321","locator":"137:7-137:37","by":[{"localId":"320","locator":"137:15-137:37","direction":"asc","type":"ByExpression","expression":{"localId":"319","locator":"137:15-137:37","type":"Start","operand":{"localId":"318","locator":"137:24-137:37","name":"locationPeriod","type":"IdentifierRef"}}}]}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"304","locator":"133:61-133:82","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"342","locator":"141:1-144:35","name":"NormalizeInterval","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"342","s":[{"value":["/*Given a datetime and a period, returns the period (if a period is provided) or the interval beginning and ending on the datetime (if a datetime is provided)*/","define function ","\"NormalizeInterval\"","(","pointInTime"," "]},{"r":"325","s":[{"value":["DateTime"]}]},{"value":[", ","period"," "]},{"r":"327","s":[{"value":["Interval\u003c"]},{"r":"326","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"341","s":[{"r":"341","s":[{"value":["if "]},{"r":"329","s":[{"r":"328","s":[{"value":["pointInTime"]}]},{"value":[" is not null"]}]},{"value":[" then "]},{"r":"332","s":[{"value":["Interval["]},{"r":"330","s":[{"value":["pointInTime"]}]},{"value":[", "]},{"r":"331","s":[{"value":["pointInTime"]}]},{"value":["]"]}]},{"value":["\n    else "]},{"r":"340","s":[{"value":["if "]},{"r":"334","s":[{"r":"333","s":[{"value":["period"]}]},{"value":[" is not null"]}]},{"value":[" then "]},{"r":"335","s":[{"value":["period"]}]},{"value":[" \n    else "]},{"r":"339","s":[{"r":"336","value":["null"," as "]},{"r":"338","s":[{"value":["Interval\u003c"]},{"r":"337","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}]}]}]}]}}],"expression":{"localId":"341","locator":"142:3-144:35","type":"If","condition":{"localId":"329","locator":"142:6-142:28","type":"Not","operand":{"locator":"142:6-142:28","type":"IsNull","operand":{"localId":"328","locator":"142:6-142:16","name":"pointInTime","type":"OperandRef"}}},"then":{"localId":"332","locator":"142:35-142:68","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"330","locator":"142:44-142:54","name":"pointInTime","type":"OperandRef"},"high":{"localId":"331","locator":"142:57-142:67","name":"pointInTime","type":"OperandRef"}},"else":{"localId":"340","locator":"143:10-144:35","type":"If","condition":{"localId":"334","locator":"143:13-143:30","type":"Not","operand":{"locator":"143:13-143:30","type":"IsNull","operand":{"localId":"333","locator":"143:13-143:18","name":"period","type":"OperandRef"}}},"then":{"localId":"335","locator":"143:37-143:42","name":"period","type":"OperandRef"},"else":{"localId":"339","locator":"144:10-144:35","strict":false,"type":"As","operand":{"localId":"336","locator":"144:10-144:13","type":"Null"},"asTypeSpecifier":{"localId":"338","locator":"144:18-144:35","type":"IntervalTypeSpecifier","pointType":{"localId":"337","locator":"144:27-144:34","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}},"operand":[{"name":"pointInTime","operandTypeSpecifier":{"localId":"325","locator":"141:49-141:56","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"name":"period","operandTypeSpecifier":{"localId":"327","locator":"141:66-141:83","type":"IntervalTypeSpecifier","pointType":{"localId":"326","locator":"141:75-141:82","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"355","locator":"147:1-150:3","name":"HasStart","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"355","s":[{"value":["/*Given an interval, return true if the interval has a starting boundary specified (i.e. the start of the interval is not null and not the minimum DateTime value)*/","define function ","\"HasStart\"","(","period"," "]},{"r":"344","s":[{"value":["Interval\u003c"]},{"r":"343","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"354","s":[{"r":"354","s":[{"value":["not "]},{"r":"353","s":[{"value":["( "]},{"r":"353","s":[{"r":"347","s":[{"r":"346","s":[{"value":["start of "]},{"r":"345","s":[{"value":["period"]}]}]},{"value":[" is null"]}]},{"value":["\n      or "]},{"r":"352","s":[{"r":"349","s":[{"value":["start of "]},{"r":"348","s":[{"value":["period"]}]}]},{"value":[" ","="," "]},{"r":"351","s":[{"value":["minimum"," "]},{"r":"350","s":[{"value":["DateTime"]}]}]}]}]},{"value":["\n  )"]}]}]}]}]}}],"expression":{"localId":"354","locator":"148:3-150:3","type":"Not","operand":{"localId":"353","locator":"148:7-150:3","type":"Or","operand":[{"localId":"347","locator":"148:9-148:31","type":"IsNull","operand":{"localId":"346","locator":"148:9-148:23","type":"Start","operand":{"localId":"345","locator":"148:18-148:23","name":"period","type":"OperandRef"}}},{"localId":"352","locator":"149:10-149:43","type":"Equal","operand":[{"localId":"349","locator":"149:10-149:24","type":"Start","operand":{"localId":"348","locator":"149:19-149:24","name":"period","type":"OperandRef"}},{"localId":"351","locator":"149:28-149:43","valueType":"{urn:hl7-org:elm-types:r1}DateTime","type":"MinValue"}]}]}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"344","locator":"147:35-147:52","type":"IntervalTypeSpecifier","pointType":{"localId":"343","locator":"147:44-147:51","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"368","locator":"153:1-158:3","name":"HasEnd","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"368","s":[{"value":["/*Given an interval, return true if the interval has an ending boundary specified (i.e. the end of the interval is not null and not the maximum DateTime value)*/","define function ","\"HasEnd\"","(","period"," "]},{"r":"357","s":[{"value":["Interval\u003c"]},{"r":"356","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"367","s":[{"r":"367","s":[{"value":["not "]},{"r":"366","s":[{"value":["( \n    "]},{"r":"366","s":[{"r":"360","s":[{"r":"359","s":[{"value":["end of "]},{"r":"358","s":[{"value":["period"]}]}]},{"value":[" is null"]}]},{"value":["\n      or \n      "]},{"r":"365","s":[{"r":"362","s":[{"value":["end of "]},{"r":"361","s":[{"value":["period"]}]}]},{"value":[" ","="," "]},{"r":"364","s":[{"value":["maximum"," "]},{"r":"363","s":[{"value":["DateTime"]}]}]}]}]},{"value":["\n  )"]}]}]}]}]}}],"expression":{"localId":"367","locator":"154:3-158:3","type":"Not","operand":{"localId":"366","locator":"154:7-158:3","type":"Or","operand":[{"localId":"360","locator":"155:5-155:25","type":"IsNull","operand":{"localId":"359","locator":"155:5-155:17","type":"End","operand":{"localId":"358","locator":"155:12-155:17","name":"period","type":"OperandRef"}}},{"localId":"365","locator":"157:7-157:38","type":"Equal","operand":[{"localId":"362","locator":"157:7-157:19","type":"End","operand":{"localId":"361","locator":"157:14-157:19","name":"period","type":"OperandRef"}},{"localId":"364","locator":"157:23-157:38","valueType":"{urn:hl7-org:elm-types:r1}DateTime","type":"MaxValue"}]}]}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"357","locator":"153:33-153:50","type":"IntervalTypeSpecifier","pointType":{"localId":"356","locator":"153:42-153:49","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"378","locator":"161:1-164:24","name":"Latest","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"378","s":[{"value":["/*Given an interval, return the ending point if the interval has an ending boundary specified, otherwise, return the starting point*/","define function ","\"Latest\"","(","period"," "]},{"r":"370","s":[{"value":["Interval\u003c"]},{"r":"369","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"377","s":[{"r":"377","s":[{"value":["if "]},{"r":"372","s":[{"value":["( "]},{"r":"372","s":[{"value":["HasEnd","("]},{"r":"371","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":[" then \n  "]},{"r":"374","s":[{"value":["end of "]},{"r":"373","s":[{"value":["period"]}]}]},{"value":[" \n    else "]},{"r":"376","s":[{"value":["start of "]},{"r":"375","s":[{"value":["period"]}]}]}]}]}]}}],"expression":{"localId":"377","locator":"162:3-164:24","type":"If","condition":{"localId":"372","locator":"162:6-162:22","name":"HasEnd","type":"FunctionRef","operand":[{"localId":"371","locator":"162:15-162:20","name":"period","type":"OperandRef"}]},"then":{"localId":"374","locator":"163:3-163:15","type":"End","operand":{"localId":"373","locator":"163:10-163:15","name":"period","type":"OperandRef"}},"else":{"localId":"376","locator":"164:10-164:24","type":"Start","operand":{"localId":"375","locator":"164:19-164:24","name":"period","type":"OperandRef"}}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"370","locator":"161:33-161:50","type":"IntervalTypeSpecifier","pointType":{"localId":"369","locator":"161:42-161:49","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"388","locator":"167:1-170:15","name":"Earliest","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"388","s":[{"value":["/*Given an interval, return the starting point if the interval has a starting boundary specified, otherwise, return the ending point*/","define function ","\"Earliest\"","(","period"," "]},{"r":"380","s":[{"value":["Interval\u003c"]},{"r":"379","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"387","s":[{"r":"387","s":[{"value":["if "]},{"r":"382","s":[{"value":["( "]},{"r":"382","s":[{"value":["HasStart","("]},{"r":"381","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":[" then "]},{"r":"384","s":[{"value":["start of "]},{"r":"383","s":[{"value":["period"]}]}]},{"value":[" \n    else \n  "]},{"r":"386","s":[{"value":["end of "]},{"r":"385","s":[{"value":["period"]}]}]}]}]}]}}],"expression":{"localId":"387","locator":"168:3-170:15","type":"If","condition":{"localId":"382","locator":"168:6-168:24","name":"HasStart","type":"FunctionRef","operand":[{"localId":"381","locator":"168:17-168:22","name":"period","type":"OperandRef"}]},"then":{"localId":"384","locator":"168:31-168:45","type":"Start","operand":{"localId":"383","locator":"168:40-168:45","name":"period","type":"OperandRef"}},"else":{"localId":"386","locator":"170:3-170:15","type":"End","operand":{"localId":"385","locator":"170:10-170:15","name":"period","type":"OperandRef"}}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"380","locator":"167:35-167:52","type":"IntervalTypeSpecifier","pointType":{"localId":"379","locator":"167:44-167:51","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"396","locator":"173:1-174:48","name":"LatestOf","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"396","s":[{"value":["/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the ending point of the period if the period has an ending boundary specified, otherwise returns the starting point of the interval*/","define function ","\"LatestOf\"","(","pointInTime"," "]},{"r":"389","s":[{"value":["DateTime"]}]},{"value":[", ","period"," "]},{"r":"391","s":[{"value":["Interval\u003c"]},{"r":"390","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"395","s":[{"r":"395","s":[{"value":["Latest","("]},{"r":"394","s":[{"value":["NormalizeInterval","("]},{"r":"392","s":[{"value":["pointInTime"]}]},{"value":[", "]},{"r":"393","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"395","locator":"174:3-174:48","name":"Latest","type":"FunctionRef","operand":[{"localId":"394","locator":"174:10-174:47","name":"NormalizeInterval","type":"FunctionRef","operand":[{"localId":"392","locator":"174:28-174:38","name":"pointInTime","type":"OperandRef"},{"localId":"393","locator":"174:41-174:46","name":"period","type":"OperandRef"}]}]},"operand":[{"name":"pointInTime","operandTypeSpecifier":{"localId":"389","locator":"173:40-173:47","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"name":"period","operandTypeSpecifier":{"localId":"391","locator":"173:57-173:74","type":"IntervalTypeSpecifier","pointType":{"localId":"390","locator":"173:66-173:73","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"404","locator":"177:1-178:50","name":"EarliestOf","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"404","s":[{"value":["/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the starting point of the period if the period has a starting boundary specified, otherwise returns the ending point of the period*/","define function ","\"EarliestOf\"","(","pointInTime"," "]},{"r":"397","s":[{"value":["DateTime"]}]},{"value":[", ","period"," "]},{"r":"399","s":[{"value":["Interval\u003c"]},{"r":"398","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"403","s":[{"r":"403","s":[{"value":["Earliest","("]},{"r":"402","s":[{"value":["NormalizeInterval","("]},{"r":"400","s":[{"value":["pointInTime"]}]},{"value":[", "]},{"r":"401","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"403","locator":"178:3-178:50","name":"Earliest","type":"FunctionRef","operand":[{"localId":"402","locator":"178:12-178:49","name":"NormalizeInterval","type":"FunctionRef","operand":[{"localId":"400","locator":"178:30-178:40","name":"pointInTime","type":"OperandRef"},{"localId":"401","locator":"178:43-178:48","name":"period","type":"OperandRef"}]}]},"operand":[{"name":"pointInTime","operandTypeSpecifier":{"localId":"397","locator":"177:42-177:49","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"name":"period","operandTypeSpecifier":{"localId":"399","locator":"177:59-177:76","type":"IntervalTypeSpecifier","pointType":{"localId":"398","locator":"177:68-177:75","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]}]}}},"elm_annotations":{"statements":[{"children":[{"children":[{"children":[{"text":"define \"ED Encounter\":\n  "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"10"}],"ref_id":"11"}],"define_name":"ED Encounter"},{"children":[{"children":[{"children":[{"text":"/*calculates the difference in calendar days between the start and end of the given interval.*/define function \"LengthInDays\"(Value "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"16"},{"children":[{"text":"\u003e"}]}],"ref_id":"17"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"difference in days between "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"Value"}]}],"node_type":"OperandRef","ref_id":"18"}],"node_type":"Start","ref_id":"19"},{"children":[{"text":" and "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"Value"}]}],"node_type":"OperandRef","ref_id":"20"}],"node_type":"End","ref_id":"21"}],"node_type":"DifferenceBetween","ref_id":"22"}],"node_type":"DifferenceBetween","ref_id":"22"}],"ref_id":"23"}],"define_name":"LengthInDays"},{"children":[{"children":[{"children":[{"text":"define \"Inpatient Encounter\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Encounter Inpatient\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"12"}],"node_type":"Retrieve","ref_id":"12"},{"children":[{"text":" EncounterInpatient"}]}],"ref_id":"13"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"LengthInDays\"("}]},{"children":[{"children":[{"children":[{"text":"EncounterInpatient"}]}],"ref_id":"14"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"15"}],"node_type":"Property","ref_id":"15"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"24"},{"children":[{"text":"\u003c= 120"}],"node_type":"Literal","ref_id":"25"}],"node_type":"LessOrEqual","ref_id":"26"},{"children":[{"text":"\n      and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"EncounterInpatient"}]}],"ref_id":"27"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"28"}],"node_type":"Property","ref_id":"28"},{"children":[{"text":" ends during day of "}],"node_type":"In","ref_id":"30"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"29"}],"node_type":"In","ref_id":"30"}],"ref_id":"31"}],"ref_id":"31"}],"node_type":"Query","ref_id":"32"}],"ref_id":"33"}],"define_name":"Inpatient Encounter"},{"children":[{"children":[]},{"children":[]},{"children":[]},{"children":[{"children":[{"text":"/*@description: Returns an interval of date values extracted from the input interval of date-time values\n@comment: This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability.*/define function \"ToDateInterval\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"34"},{"children":[{"text":"\u003e"}]}],"ref_id":"35"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"36"}],"node_type":"Start","ref_id":"37"}],"ref_id":"38"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"39"}],"node_type":"End","ref_id":"40"}],"ref_id":"41"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"42"}],"node_type":"Interval","ref_id":"42"}],"ref_id":"43"}],"define_name":"ToDateInterval"},{"children":[{"children":[{"children":[{"text":"/*returns list of all locations within an encounter, including locations for immediately prior ED visit.*/define function \"HospitalizationLocations\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"47"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"48"},{"children":[{"text":" Visit"}]}],"ref_id":"49"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"50"}],"node_type":"Retrieve","ref_id":"50"},{"children":[{"text":" LastED"}]}],"ref_id":"51"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"52"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"53"}],"node_type":"Property","ref_id":"53"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"57"},{"children":[{"text":" or less on or before"}]}],"ref_id":"58"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"54"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"55"}],"node_type":"Property","ref_id":"55"}],"node_type":"Start","ref_id":"56"}],"ref_id":"58"}],"ref_id":"58"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"59"}],"node_type":"End","ref_id":"60"}],"ref_id":"61"}],"ref_id":"62"}],"ref_id":"63"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"64"}],"ref_id":"65"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"node_type":"QueryLetRef","ref_id":"66"},{"children":[{"text":" is null"}]}],"ref_id":"67"},{"children":[{"text":" then "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"68"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"ref_id":"69"}],"ref_id":"69"},{"children":[{"text":" \n      else "}]},{"children":[{"children":[{"text":"flatten "}]},{"children":[{"children":[{"text":"{ "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"70"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"ref_id":"71"}],"ref_id":"71"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"72"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"ref_id":"73"}],"ref_id":"73"},{"children":[{"text":" }"}]}],"node_type":"List","ref_id":"74"}],"ref_id":"75"}],"node_type":"If","ref_id":"76"}],"ref_id":"77"}],"node_type":"Query","ref_id":"78"}],"node_type":"Query","ref_id":"78"}],"ref_id":"79"}],"define_name":"HospitalizationLocations"},{"children":[{"children":[{"children":[{"text":"/*Returns the arrival time in the ED for the encounter.*/define function \"EmergencyDepartmentArrivalTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"80"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"\"HospitalizationLocations\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"81"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"82"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"82"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"83"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"HospitalLocation"}]}],"ref_id":"84"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"85"}],"ref_id":"85"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}],"ref_id":"86"}],"ref_id":"87"}],"ref_id":"87"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"88"}],"node_type":"Start","ref_id":"89"}],"ref_id":"90"}],"ref_id":"91"}],"ref_id":"92"},{"children":[{"text":"\n  )"}]}],"ref_id":"93"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"94"}],"node_type":"Property","ref_id":"94"}],"node_type":"Start","ref_id":"95"}],"node_type":"Start","ref_id":"95"}],"ref_id":"96"}],"define_name":"EmergencyDepartmentArrivalTime"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization returns the total interval for admission to discharge for the given encounter, or for the admission of any immediately prior emergency department visit to the discharge of the given encounter.*/define function \"Hospitalization\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"99"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"100"},{"children":[{"text":" Visit"}]}],"ref_id":"101"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"102"}],"node_type":"Retrieve","ref_id":"102"},{"children":[{"text":" LastED"}]}],"ref_id":"103"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"104"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"105"}],"node_type":"Property","ref_id":"105"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"109"},{"children":[{"text":" or less on or before"}]}],"ref_id":"110"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"106"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"107"}],"node_type":"Property","ref_id":"107"}],"node_type":"Start","ref_id":"108"}],"ref_id":"110"}],"ref_id":"110"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"111"}],"node_type":"End","ref_id":"112"}],"ref_id":"113"}],"ref_id":"114"}],"ref_id":"115"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"116"}],"ref_id":"117"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"118"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"119"}],"node_type":"Property","ref_id":"119"}],"node_type":"Start","ref_id":"120"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"121"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"122"}],"node_type":"Property","ref_id":"122"}],"node_type":"Start","ref_id":"123"},{"children":[{"text":")"}]}],"ref_id":"124"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"125"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"126"}],"node_type":"Property","ref_id":"126"}],"ref_id":"127"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"128"}],"ref_id":"129"}],"node_type":"Query","ref_id":"130"}],"node_type":"Query","ref_id":"130"}],"ref_id":"131"}],"define_name":"Hospitalization"},{"children":[{"children":[{"children":[{"text":"/*Returns admission time for an encounter or for immediately prior emergency department visit.*/define function \"HospitalAdmissionTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"97"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"\"Hospitalization\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"98"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"132"}],"node_type":"Start","ref_id":"133"}],"node_type":"Start","ref_id":"133"}],"ref_id":"134"}],"define_name":"HospitalAdmissionTime"},{"children":[{"children":[{"children":[{"text":"/*Returns earliest arrival time for an encounter including any prior ED visit.*/define function \"HospitalArrivalTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"135"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"\"HospitalizationLocations\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"136"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"137"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"137"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"138"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"139"}],"node_type":"Start","ref_id":"140"}],"ref_id":"141"}],"ref_id":"142"}],"ref_id":"143"},{"children":[{"text":"\n  )"}]}],"ref_id":"144"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"145"}],"node_type":"Property","ref_id":"145"}],"node_type":"Start","ref_id":"146"}],"node_type":"Start","ref_id":"146"}],"ref_id":"147"}],"define_name":"HospitalArrivalTime"},{"children":[{"children":[{"children":[{"text":"/*Returns the length of stay in days (i.e. the number of days between admission and discharge) for the given encounter, or from the admission of any immediately prior emergency department visit to the discharge of the encounter*/define function \"HospitalizationLengthofStay\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"150"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"LengthInDays("}]},{"children":[{"children":[{"text":"\"Hospitalization\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"151"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"152"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"153"}],"node_type":"FunctionRef","ref_id":"153"}],"ref_id":"154"}],"define_name":"HospitalizationLengthofStay"},{"children":[{"children":[{"children":[{"text":"/*Returns the latest departure time for encounter including any prior ED visit.*/define function \"HospitalDepartureTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"155"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"\"HospitalizationLocations\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"156"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"157"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"157"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"158"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"159"}],"node_type":"Start","ref_id":"160"}],"ref_id":"161"}],"ref_id":"162"}],"ref_id":"163"},{"children":[{"text":"\n  )"}]}],"ref_id":"164"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"165"}],"node_type":"Property","ref_id":"165"}],"node_type":"End","ref_id":"166"}],"node_type":"End","ref_id":"166"}],"ref_id":"167"}],"define_name":"HospitalDepartureTime"},{"children":[{"children":[{"children":[{"text":"/*Hospital Discharge Time returns the discharge time for an encounter*/define function \"HospitalDischargeTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"168"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"169"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"170"}],"node_type":"Property","ref_id":"170"}],"node_type":"End","ref_id":"171"}],"node_type":"End","ref_id":"171"}],"ref_id":"172"}],"define_name":"HospitalDischargeTime"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization with Observation and Outpatient Surgery Service returns the total interval from the start of any immediately prior emergency department visit, outpatient surgery visit or observation visit to the discharge of the given encounter.*/define function \"HospitalizationWithObservationAndOutpatientSurgeryService\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"173"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"174"},{"children":[{"text":" Visit"}]}],"ref_id":"175"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"ObsVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Observation Services\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"176"}],"node_type":"Retrieve","ref_id":"176"},{"children":[{"text":" LastObs"}]}],"ref_id":"177"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastObs"}]}],"ref_id":"178"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"179"}],"node_type":"Property","ref_id":"179"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"183"},{"children":[{"text":" or less on or before"}]}],"ref_id":"184"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"180"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"181"}],"node_type":"Property","ref_id":"181"}],"node_type":"Start","ref_id":"182"}],"ref_id":"184"}],"ref_id":"184"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"185"}],"node_type":"End","ref_id":"186"}],"ref_id":"187"}],"ref_id":"188"}],"ref_id":"189"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"190"}],"ref_id":"191"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"VisitStart: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"ObsVisit"}]}],"ref_id":"192"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"193"}],"node_type":"Property","ref_id":"193"}],"node_type":"Start","ref_id":"194"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"195"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"196"}],"node_type":"Property","ref_id":"196"}],"node_type":"Start","ref_id":"197"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"198"}],"ref_id":"199"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"200"}],"node_type":"Retrieve","ref_id":"200"},{"children":[{"text":" LastED"}]}],"ref_id":"201"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"202"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"203"}],"node_type":"Property","ref_id":"203"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"205"},{"children":[{"text":" or less on or before"}]}],"ref_id":"206"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"204"}],"ref_id":"206"}],"ref_id":"206"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"207"}],"node_type":"End","ref_id":"208"}],"ref_id":"209"}],"ref_id":"210"}],"ref_id":"211"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"212"}],"ref_id":"213"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"VisitStartWithED: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"214"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"215"}],"node_type":"Property","ref_id":"215"}],"node_type":"Start","ref_id":"216"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"217"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"218"}],"ref_id":"219"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"OutpatientSurgeryVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Outpatient Surgery Service\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"220"}],"node_type":"Retrieve","ref_id":"220"},{"children":[{"text":" LastSurgeryOP"}]}],"ref_id":"221"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastSurgeryOP"}]}],"ref_id":"222"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"223"}],"node_type":"Property","ref_id":"223"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"225"},{"children":[{"text":" or less on or before"}]}],"ref_id":"226"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"VisitStartWithED"}]}],"node_type":"QueryLetRef","ref_id":"224"}],"ref_id":"226"}],"ref_id":"226"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"227"}],"node_type":"End","ref_id":"228"}],"ref_id":"229"}],"ref_id":"230"}],"ref_id":"231"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"232"}],"ref_id":"233"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"OutpatientSurgeryVisit"}]}],"ref_id":"234"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"235"}],"node_type":"Property","ref_id":"235"}],"node_type":"Start","ref_id":"236"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"VisitStartWithED"}]}],"node_type":"QueryLetRef","ref_id":"237"},{"children":[{"text":")"}]}],"ref_id":"238"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"239"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"240"}],"node_type":"Property","ref_id":"240"}],"ref_id":"241"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"242"}],"ref_id":"243"}],"node_type":"Query","ref_id":"244"}],"node_type":"Query","ref_id":"244"}],"ref_id":"245"}],"define_name":"HospitalizationWithObservationAndOutpatientSurgeryService"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization with Observation returns the total interval from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/define function \"HospitalizationWithObservation\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"246"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"247"},{"children":[{"text":" Visit"}]}],"ref_id":"248"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"ObsVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Observation Services\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"249"}],"node_type":"Retrieve","ref_id":"249"},{"children":[{"text":" LastObs"}]}],"ref_id":"250"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastObs"}]}],"ref_id":"251"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"252"}],"node_type":"Property","ref_id":"252"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"256"},{"children":[{"text":" or less on or before"}]}],"ref_id":"257"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"253"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"254"}],"node_type":"Property","ref_id":"254"}],"node_type":"Start","ref_id":"255"}],"ref_id":"257"}],"ref_id":"257"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"258"}],"node_type":"End","ref_id":"259"}],"ref_id":"260"}],"ref_id":"261"}],"ref_id":"262"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"263"}],"ref_id":"264"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"VisitStart: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"ObsVisit"}]}],"ref_id":"265"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"266"}],"node_type":"Property","ref_id":"266"}],"node_type":"Start","ref_id":"267"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"268"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"269"}],"node_type":"Property","ref_id":"269"}],"node_type":"Start","ref_id":"270"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"271"}],"ref_id":"272"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"273"}],"node_type":"Retrieve","ref_id":"273"},{"children":[{"text":" LastED"}]}],"ref_id":"274"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"275"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"276"}],"node_type":"Property","ref_id":"276"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"278"},{"children":[{"text":" or less on or before"}]}],"ref_id":"279"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"277"}],"ref_id":"279"}],"ref_id":"279"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"280"}],"node_type":"End","ref_id":"281"}],"ref_id":"282"}],"ref_id":"283"}],"ref_id":"284"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"285"}],"ref_id":"286"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"287"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"288"}],"node_type":"Property","ref_id":"288"}],"node_type":"Start","ref_id":"289"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"290"},{"children":[{"text":")"}]}],"ref_id":"291"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"292"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"293"}],"node_type":"Property","ref_id":"293"}],"ref_id":"294"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"295"}],"ref_id":"296"}],"node_type":"Query","ref_id":"297"}],"node_type":"Query","ref_id":"297"}],"ref_id":"298"}],"define_name":"HospitalizationWithObservation"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization with Observation Length of Stay returns the length in days from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/define function \"HospitalizationWithObservationLengthofStay\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"299"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"\"LengthInDays\"("}]},{"children":[{"children":[{"text":"\"HospitalizationWithObservation\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"300"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"301"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"302"}],"node_type":"FunctionRef","ref_id":"302"}],"ref_id":"303"}],"define_name":"HospitalizationWithObservationLengthofStay"},{"children":[{"children":[{"children":[{"text":"/*First Inpatient Intensive Care Unit returns the first intensive care unit for the given encounter, without considering any immediately prior emergency department visit.*/define function \"FirstInpatientIntensiveCareUnit\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"304"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"305"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"node_type":"Property","ref_id":"306"}],"node_type":"Property","ref_id":"306"},{"children":[{"text":")"}]}],"node_type":"Property","ref_id":"306"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"307"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"HospitalLocation"}]}],"ref_id":"308"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"309"}],"ref_id":"309"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Intensive Care Unit\""}]}],"ref_id":"310"}],"node_type":"InValueSet","ref_id":"311"},{"children":[{"text":"\n        and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"HospitalLocation"}]}],"ref_id":"312"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"313"}],"node_type":"Property","ref_id":"313"},{"children":[{"text":" during "}],"node_type":"IncludedIn","ref_id":"316"},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"314"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"315"}],"node_type":"Property","ref_id":"315"}],"node_type":"IncludedIn","ref_id":"316"}],"ref_id":"317"}],"ref_id":"317"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"318"}],"node_type":"Start","ref_id":"319"}],"ref_id":"320"}],"ref_id":"321"}],"ref_id":"322"},{"children":[{"text":"\n  )"}]}],"node_type":"First","ref_id":"323"}],"node_type":"First","ref_id":"323"}],"ref_id":"324"}],"define_name":"FirstInpatientIntensiveCareUnit"},{"children":[{"children":[{"children":[{"text":"/*Given a datetime and a period, returns the period (if a period is provided) or the interval beginning and ending on the datetime (if a datetime is provided)*/define function \"NormalizeInterval\"(pointInTime "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"325"},{"children":[{"text":", period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"326"},{"children":[{"text":"\u003e"}]}],"ref_id":"327"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"pointInTime"}]}],"node_type":"OperandRef","ref_id":"328"},{"children":[{"text":" is not null"}]}],"ref_id":"329"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"pointInTime"}]}],"ref_id":"330"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"pointInTime"}]}],"ref_id":"331"},{"children":[{"text":"]"}]}],"ref_id":"332"},{"children":[{"text":"\n    else "}]},{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"333"},{"children":[{"text":" is not null"}]}],"ref_id":"334"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"period"}]}],"ref_id":"335"},{"children":[{"text":" \n    else "}]},{"children":[{"children":[{"text":"null as "}],"node_type":"Null","ref_id":"336"},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"337"},{"children":[{"text":"\u003e"}]}],"ref_id":"338"}],"ref_id":"339"}],"ref_id":"340"}],"node_type":"If","ref_id":"341"}],"node_type":"If","ref_id":"341"}],"ref_id":"342"}],"define_name":"NormalizeInterval"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return true if the interval has a starting boundary specified (i.e. the start of the interval is not null and not the minimum DateTime value)*/define function \"HasStart\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"343"},{"children":[{"text":"\u003e"}]}],"ref_id":"344"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"not "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"345"}],"node_type":"Start","ref_id":"346"},{"children":[{"text":" is null"}]}],"node_type":"IsNull","ref_id":"347"},{"children":[{"text":"\n      or "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"348"}],"node_type":"Start","ref_id":"349"},{"children":[{"text":" = "}]},{"children":[{"children":[{"text":"minimum "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"350"}],"node_type":"MinValue","ref_id":"351"}],"node_type":"Equal","ref_id":"352"}],"node_type":"Or","ref_id":"353"},{"children":[{"text":"\n  )"}]}],"node_type":"Or","ref_id":"353"}],"node_type":"Not","ref_id":"354"}],"node_type":"Not","ref_id":"354"}],"ref_id":"355"}],"define_name":"HasStart"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return true if the interval has an ending boundary specified (i.e. the end of the interval is not null and not the maximum DateTime value)*/define function \"HasEnd\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"356"},{"children":[{"text":"\u003e"}]}],"ref_id":"357"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"not "}]},{"children":[{"children":[{"text":"( \n    "}]},{"children":[{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"358"}],"node_type":"End","ref_id":"359"},{"children":[{"text":" is null"}]}],"node_type":"IsNull","ref_id":"360"},{"children":[{"text":"\n      or \n      "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"361"}],"node_type":"End","ref_id":"362"},{"children":[{"text":" = "}]},{"children":[{"children":[{"text":"maximum "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"363"}],"node_type":"MaxValue","ref_id":"364"}],"node_type":"Equal","ref_id":"365"}],"node_type":"Or","ref_id":"366"},{"children":[{"text":"\n  )"}]}],"node_type":"Or","ref_id":"366"}],"node_type":"Not","ref_id":"367"}],"node_type":"Not","ref_id":"367"}],"ref_id":"368"}],"define_name":"HasEnd"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return the ending point if the interval has an ending boundary specified, otherwise, return the starting point*/define function \"Latest\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"369"},{"children":[{"text":"\u003e"}]}],"ref_id":"370"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"HasEnd("}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"371"},{"children":[{"text":")"}]}],"ref_id":"372"},{"children":[{"text":")"}]}],"ref_id":"372"},{"children":[{"text":" then \n  "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"373"}],"ref_id":"374"},{"children":[{"text":" \n    else "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"375"}],"ref_id":"376"}],"node_type":"If","ref_id":"377"}],"node_type":"If","ref_id":"377"}],"ref_id":"378"}],"define_name":"Latest"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return the starting point if the interval has a starting boundary specified, otherwise, return the ending point*/define function \"Earliest\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"379"},{"children":[{"text":"\u003e"}]}],"ref_id":"380"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"HasStart("}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"381"},{"children":[{"text":")"}]}],"ref_id":"382"},{"children":[{"text":")"}]}],"ref_id":"382"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"383"}],"ref_id":"384"},{"children":[{"text":" \n    else \n  "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"385"}],"ref_id":"386"}],"node_type":"If","ref_id":"387"}],"node_type":"If","ref_id":"387"}],"ref_id":"388"}],"define_name":"Earliest"},{"children":[{"children":[{"children":[{"text":"/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the ending point of the period if the period has an ending boundary specified, otherwise returns the starting point of the interval*/define function \"LatestOf\"(pointInTime "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"389"},{"children":[{"text":", period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"390"},{"children":[{"text":"\u003e"}]}],"ref_id":"391"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Latest("}]},{"children":[{"children":[{"text":"NormalizeInterval("}]},{"children":[{"children":[{"text":"pointInTime"}]}],"node_type":"OperandRef","ref_id":"392"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"393"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"394"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"395"}],"node_type":"FunctionRef","ref_id":"395"}],"ref_id":"396"}],"define_name":"LatestOf"},{"children":[{"children":[{"children":[{"text":"/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the starting point of the period if the period has a starting boundary specified, otherwise returns the ending point of the period*/define function \"EarliestOf\"(pointInTime "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"397"},{"children":[{"text":", period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"398"},{"children":[{"text":"\u003e"}]}],"ref_id":"399"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Earliest("}]},{"children":[{"children":[{"text":"NormalizeInterval("}]},{"children":[{"children":[{"text":"pointInTime"}]}],"node_type":"OperandRef","ref_id":"400"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"401"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"402"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"403"}],"node_type":"FunctionRef","ref_id":"403"}],"ref_id":"404"}],"define_name":"EarliestOf"}],"identifier":{"id":"MATGlobalCommonFunctions","version":"7.0.000"}},"is_main_library":false,"is_top_level":true,"library_name":"MATGlobalCommonFunctions","library_version":"7.0.000","statement_dependencies":[{"_id":"689248980734dfcaf542e7ad","statement_name":"HospitalizationWithObservationLengthofStay","statement_references":[{"_id":"689248980734dfcaf542e7a9","hqmf_id":null,"library_name":"MATGlobalCommonFunctions","statement_name":"LengthInDays"},{"_id":"689248980734dfcaf542e7aa","hqmf_id":null,"library_name":"MATGlobalCommonFunctions","statement_name":"HospitalizationWithObservation"}]},{"_id":"689248980734dfcaf542e7ae","statement_name":"LengthInDays"},{"_id":"689248980734dfcaf542e7af","statement_name":"HospitalizationWithObservation"},{"_id":"689248980734dfcaf542e7b0","statement_name":"EarliestOf","statement_references":[{"_id":"689248980734dfcaf542e7ab","hqmf_id":null,"library_name":"MATGlobalCommonFunctions","statement_name":"Earliest"},{"_id":"689248980734dfcaf542e7ac","hqmf_id":null,"library_name":"MATGlobalCommonFunctions","statement_name":"NormalizeInterval"}]},{"_id":"689248980734dfcaf542e7b1","statement_name":"Earliest","statement_references":[{"_id":"6892489f0734dfcaf542e917","hqmf_id":null,"library_name":"MATGlobalCommonFunctions","statement_name":"HasStart"}]},{"_id":"689248980734dfcaf542e7b2","statement_name":"HasStart"},{"_id":"689248980734dfcaf542e7b3","statement_name":"NormalizeInterval"}]}],"created_at":null,"description":"This logic is intended to extract electronic clinical data. This is not an electronic clinical quality measure and this logic will not produce measure results. Instead, it will produce a file containing the data that CMS will link with administrative claims to risk adjust the Hybrid HWM outcome measure. It is designed to extract the first resulted set of vital signs and basic laboratory results obtained from encounters for adult Medicare Fee-For-Service and Medicare Advantage patients admitted to acute care short stay hospitals.","hqmf_id":"2C928084-83D3-1B44-0184-3A4838E816AC","hqmf_set_id":"8C58BA2E-398B-494C-BE49-7CBC64EE4C9A","hqmf_version_number":"4.0.000","main_cql_library":"HybridHospitalWideMortality","measure_attributes":[{"code":"OTH","value":"844","name":"eCQM Identifier (Measure Authoring Tool)","code_obj":{"type":"CD","null_flavor":"OTH","original_text":"eCQM Identifier (Measure Authoring Tool)"},"value_obj":{"type":"ED","value":"844","media_type":"text/plain"}},{"code":"OTH","value":"3502","name":"NQF Number","code_obj":{"type":"CD","null_flavor":"OTH","original_text":"NQF Number"},"value_obj":{"type":"ED","value":"3502","media_type":"text/plain"}},{"code":"COPY","value":"Limited proprietary coding is contained in these specifications for user convenience. Users of proprietary code sets should obtain all necessary licenses from the owners of the code sets.\n\nThis material contains SNOMED Clinical Terms(R) (SNOMED CT[R]) copyright 2004-2022 International Health Terminology Standards Development Organisation. All rights reserved.\n\nLOINC(R) copyright 2004-2022 Regenstrief Institute, Inc.","name":"Copyright","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"COPY","title":"Copyright"},"value_obj":{"type":"ED","value":"Limited proprietary coding is contained in these specifications for user convenience. Users of proprietary code sets should obtain all necessary licenses from the owners of the code sets.\n\nThis material contains SNOMED Clinical Terms(R) (SNOMED CT[R]) copyright 2004-2022 International Health Terminology Standards Development Organisation. All rights reserved.\n\nLOINC(R) copyright 2004-2022 Regenstrief Institute, Inc.","media_type":"text/plain"}},{"code":"DISC","value":"These performance specifications are not clinical guidelines and do not establish a standard of medical care, and have not been tested for all potential applications.\n\nTHE MEASURES AND SPECIFICATIONS ARE PROVIDED \"AS IS\" WITHOUT WARRANTY OF ANY KIND.\n\nDue to technical limitations, registered trademarks are indicated by (R) or [R] and unregistered trademarks are indicated by (TM) or [TM].","name":"Disclaimer","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DISC","title":"Disclaimer"},"value_obj":{"type":"ED","value":"These performance specifications are not clinical guidelines and do not establish a standard of medical care, and have not been tested for all potential applications.\n\nTHE MEASURES AND SPECIFICATIONS ARE PROVIDED \"AS IS\" WITHOUT WARRANTY OF ANY KIND.\n\nDue to technical limitations, registered trademarks are indicated by (R) or [R] and unregistered trademarks are indicated by (TM) or [TM].","media_type":"text/plain"}},{"code":"MSRSCORE","name":"Measure Scoring","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRSCORE","title":"Measure Scoring"},"value_obj":{"type":"CD","system":"2.16.840.1.113883.5.1063","code":"COHORT","title":"Cohort"}},{"code":"STRAT","value":"None","name":"Stratification","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"STRAT","title":"Stratification"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"MSRADJ","value":"For a detailed description of how the core clinical data elements are used in the Hybrid HWM measure risk adjustment model, see the Hybrid HWM Measure Methodology Report on CMS.gov here: https://qualitynet.cms.gov/inpatient/measures/hybrid/methodology","name":"Risk Adjustment","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRADJ","title":"Risk Adjustment"},"value_obj":{"type":"ED","value":"For a detailed description of how the core clinical data elements are used in the Hybrid HWM measure risk adjustment model, see the Hybrid HWM Measure Methodology Report on CMS.gov here: https://qualitynet.cms.gov/inpatient/measures/hybrid/methodology","media_type":"text/plain"}},{"code":"MSRAGG","value":"None","name":"Rate Aggregation","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRAGG","title":"Rate Aggregation"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"RAT","value":"The intent of this logic is to extract the FIRST set of clinical data elements from hospital electronic health records (EHRs) for all qualifying encounters. The data will be linked with administrative claims to risk adjust the Hybrid HWM outcome measure. This work addresses stakeholder concerns that clinical data garnered from patients, and used by clinicians to guide diagnostic decisions and treatment, are preferable to administrative claims data when profiling hospitals’ case mix. We are calling the list of data elements for extraction the \"HWM-specific core clinical data elements\". The core clinical data elements are the first set of vital signs and basic laboratory tests resulted from encounters for adult Medicare Fee-For-Service and Medicare Advantage patients, age 65 to 94 (Initial Population), after they arrive at the hospital to which they are subsequently admitted. For example, this first set of data values are often captured in the emergency department or in the pre-operative area, sometimes hours before a patient is admitted to that same facility. \nEncounters over the age of 94 are not included to avoid holding hospitals responsible for the survival of the oldest elderly patients, who may be less likely to have survival as a primary goal. While we acknowledge that many elderly patients do have survival beyond 30 days as a primary goal for their hospitalization, with input from our Technical Expert Panel and work groups, we decided to only include encounters between 65 and 94 years of age.\n\nThese core clinical data elements were selected because they: 1. reflect patients' clinical status when they first present to the hospital; 2. are clinically and statistically relevant to patient outcomes; 3. are consistently obtained on adult inpatient encounters based on current clinical practice; 4. are captured with a standard definition and recorded in a standard format across providers; and 5. are entered in structured fields that are feasibly retrieved from current EHR systems (YNHHSC/CORE, 2015). \n\nAdditional data called Linking Variables are used to link EHR data files with administrative claims data for CMS to calculate results for the Hybrid HWM measure, which are: CMS Certification Number; Health Insurance Claim Number (HICN) or Medicare Beneficiary Identifier (MBI); date of birth; sex; admission date; and discharge date.","name":"Rationale","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"RAT","title":"Rationale"},"value_obj":{"type":"ED","value":"The intent of this logic is to extract the FIRST set of clinical data elements from hospital electronic health records (EHRs) for all qualifying encounters. The data will be linked with administrative claims to risk adjust the Hybrid HWM outcome measure. This work addresses stakeholder concerns that clinical data garnered from patients, and used by clinicians to guide diagnostic decisions and treatment, are preferable to administrative claims data when profiling hospitals’ case mix. We are calling the list of data elements for extraction the \"HWM-specific core clinical data elements\". The core clinical data elements are the first set of vital signs and basic laboratory tests resulted from encounters for adult Medicare Fee-For-Service and Medicare Advantage patients, age 65 to 94 (Initial Population), after they arrive at the hospital to which they are subsequently admitted. For example, this first set of data values are often captured in the emergency department or in the pre-operative area, sometimes hours before a patient is admitted to that same facility. \nEncounters over the age of 94 are not included to avoid holding hospitals responsible for the survival of the oldest elderly patients, who may be less likely to have survival as a primary goal. While we acknowledge that many elderly patients do have survival beyond 30 days as a primary goal for their hospitalization, with input from our Technical Expert Panel and work groups, we decided to only include encounters between 65 and 94 years of age.\n\nThese core clinical data elements were selected because they: 1. reflect patients' clinical status when they first present to the hospital; 2. are clinically and statistically relevant to patient outcomes; 3. are consistently obtained on adult inpatient encounters based on current clinical practice; 4. are captured with a standard definition and recorded in a standard format across providers; and 5. are entered in structured fields that are feasibly retrieved from current EHR systems (YNHHSC/CORE, 2015). \n\nAdditional data called Linking Variables are used to link EHR data files with administrative claims data for CMS to calculate results for the Hybrid HWM measure, which are: CMS Certification Number; Health Insurance Claim Number (HICN) or Medicare Beneficiary Identifier (MBI); date of birth; sex; admission date; and discharge date.","media_type":"text/plain"}},{"code":"CRS","value":"The logic is not meant to guide or alter the care patients receive. The purpose of this core clinical data elements logic is to extract clinical data that are already routinely captured in EHRs from encounters for hospitalized adult patients. It is not intended to require that clinical staff perform additional measurements or tests that are not needed for diagnostic assessment or treatment of patients.","name":"Clinical Recommendation Statement","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"CRS","title":"Clinical Recommendation Statement"},"value_obj":{"type":"ED","value":"The logic is not meant to guide or alter the care patients receive. The purpose of this core clinical data elements logic is to extract clinical data that are already routinely captured in EHRs from encounters for hospitalized adult patients. It is not intended to require that clinical staff perform additional measurements or tests that are not needed for diagnostic assessment or treatment of patients.","media_type":"text/plain"}},{"code":"IDUR","value":"No actual measure score will be generated by hospitals. Instead, hospitals will report the data values for each of the core clinical data elements for all encounters in the Initial Population. These core clinical data elements will be linked to administrative claims data and used by CMS to calculate results for the Hybrid HWM measure.","name":"Improvement Notation","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"IDUR","title":"Improvement Notation"},"value_obj":{"type":"ED","value":"No actual measure score will be generated by hospitals. Instead, hospitals will report the data values for each of the core clinical data elements for all encounters in the Initial Population. These core clinical data elements will be linked to administrative claims data and used by CMS to calculate results for the Hybrid HWM measure.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONYale New Haven Health Services Corporation/Center for Outcomes Research \u0026 Evaluation (YNHHSC/CORE) Prepared for CMS. (2015). 2013 Core Clinical Data Elements Technical Report (Version 1.1). https://www.cms.gov/Medicare/Quality-Initiatives-Patient-Assessment-Instruments/HospitalQualityInits/Downloads/Core-Clinical-Data-Elements-and-Hybrid-Measures.zip","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONYale New Haven Health Services Corporation/Center for Outcomes Research \u0026 Evaluation (YNHHSC/CORE) Prepared for CMS. (2015). 2013 Core Clinical Data Elements Technical Report (Version 1.1). https://www.cms.gov/Medicare/Quality-Initiatives-Patient-Assessment-Instruments/HospitalQualityInits/Downloads/Core-Clinical-Data-Elements-and-Hybrid-Measures.zip","media_type":"text/plain"}},{"code":"DEF","value":"HWM-Specific Core Clinical Data Elements","name":"Definition","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DEF","title":"Definition"},"value_obj":{"type":"ED","value":"HWM-Specific Core Clinical Data Elements","media_type":"text/plain"}},{"code":"GUIDE","value":"These specifications are for use for data with discharges that occur between July 1, 2024 and June 30, 2025. The associated Hospital Specific Report (HSR) is anticipated to be released in Spring 2026. \n\nThis logic guides the user to extract the FIRST resulted HWM-specific core clinical data elements for all Medicare Fee-For-Service and Medicare Advantage encounters for patients age 65 to 94 (Initial Population) directly admitted to the hospital or admitted to the same facility after being treated in another area, such as the emergency department or hospital outpatient location.\n\nThe logic supports extraction of the FIRST set of HWM-specific core clinical data elements in two different ways, depending on if the patient was a direct admission, meaning that the patient was admitted directly to an inpatient unit without first receiving care in the emergency department or other hospital outpatient locations within the same admitting facility:\n\n1. If the patient was a direct admission, the logic supports extraction of the FIRST resulted vital signs within 2 hours (120 minutes) after the start of the inpatient admission, and the FIRST resulted laboratory tests within 24 hours (1440 minutes) after the start of the inpatient admission.\n2. If the patient has values captured prior to admission, for example from the emergency department, pre-operative, or other outpatient area within the hospital, the logic supports extraction of the FIRST resulted vital signs and laboratory tests within 24 hours (1440 minutes) PRIOR to the start of the inpatient admission. All clinical systems used in inpatient and outpatient locations within the hospital facility should be queried when looking for core clinical data element values related to a patient who is subsequently admitted.\n\nValue sets for the laboratory tests represent the LOINC codes currently available for these tests. If the institution is using local codes to capture and store relevant laboratory test data, those sites should map that information to the LOINC code for reporting of the core clinical data elements.\n\nNOTE: Do not report ALL values on an encounter during their entire admission. Only report the FIRST resulted value for EACH core clinical data element collected in the appropriate timeframe, if available.\n\nFor each core clinical data element, please report values using one of the appropriate units of measurement listed below, which represent valid UCUM codes: \n\nCore Clinical Data Element                        UCUM Unit\n\nBicarbonate-----------------------------------meq/L \n                                                              mmol/L \n\nCreatinine-------------------------------------mg/dL \n                                                               umol/L\n\nHeart rate------------------------------------{Beats}/min\n\nHematocrit -----------------------------------%\n\nOxygen saturation (by pulse oximetry)-----%{Oxygen}\n\nPlatelet----------------------------------------10*3/uL\n                                                              10*9/L\n                                                              /mm3\n\nSodium----------------------------------------meq/L\n                                                              mmol/L \n\nSystolic blood pressure----------------------mm[Hg]\n\nTemperature----------------------------------Cel\n                                                              [degF]      \n                                                \nWhite blood cell count ----------------------{Cells}/uL\n                                                              10*3/uL\n                                                              10*9/L \n                                                              /mm3\n\nFor each encounter please also submit the following Linking Variables: \nCMS Certification Number; \nHealth Insurance Claim Number (HICN) or Medicare Beneficiary Identifier (MBI);\nDate of Birth;\nSex;\nInpatient Admission Date; and,\nDischarge Date.\n\nThe initial population includes patients with inpatient hospitalizations and patients from Acute Hospital Care at Home programs, who are treated and billed as inpatients but receive care in their home. \n\nThis version of the specifications uses Quality Data Model (QDM) version 5.6. Please refer to the eCQI Resource Center (https://ecqi.healthit.gov/qdm) for more information on the QDM.","name":"Guidance","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"GUIDE","title":"Guidance"},"value_obj":{"type":"ED","value":"These specifications are for use for data with discharges that occur between July 1, 2024 and June 30, 2025. The associated Hospital Specific Report (HSR) is anticipated to be released in Spring 2026. \n\nThis logic guides the user to extract the FIRST resulted HWM-specific core clinical data elements for all Medicare Fee-For-Service and Medicare Advantage encounters for patients age 65 to 94 (Initial Population) directly admitted to the hospital or admitted to the same facility after being treated in another area, such as the emergency department or hospital outpatient location.\n\nThe logic supports extraction of the FIRST set of HWM-specific core clinical data elements in two different ways, depending on if the patient was a direct admission, meaning that the patient was admitted directly to an inpatient unit without first receiving care in the emergency department or other hospital outpatient locations within the same admitting facility:\n\n1. If the patient was a direct admission, the logic supports extraction of the FIRST resulted vital signs within 2 hours (120 minutes) after the start of the inpatient admission, and the FIRST resulted laboratory tests within 24 hours (1440 minutes) after the start of the inpatient admission.\n2. If the patient has values captured prior to admission, for example from the emergency department, pre-operative, or other outpatient area within the hospital, the logic supports extraction of the FIRST resulted vital signs and laboratory tests within 24 hours (1440 minutes) PRIOR to the start of the inpatient admission. All clinical systems used in inpatient and outpatient locations within the hospital facility should be queried when looking for core clinical data element values related to a patient who is subsequently admitted.\n\nValue sets for the laboratory tests represent the LOINC codes currently available for these tests. If the institution is using local codes to capture and store relevant laboratory test data, those sites should map that information to the LOINC code for reporting of the core clinical data elements.\n\nNOTE: Do not report ALL values on an encounter during their entire admission. Only report the FIRST resulted value for EACH core clinical data element collected in the appropriate timeframe, if available.\n\nFor each core clinical data element, please report values using one of the appropriate units of measurement listed below, which represent valid UCUM codes: \n\nCore Clinical Data Element                        UCUM Unit\n\nBicarbonate-----------------------------------meq/L \n                                                              mmol/L \n\nCreatinine-------------------------------------mg/dL \n                                                               umol/L\n\nHeart rate------------------------------------{Beats}/min\n\nHematocrit -----------------------------------%\n\nOxygen saturation (by pulse oximetry)-----%{Oxygen}\n\nPlatelet----------------------------------------10*3/uL\n                                                              10*9/L\n                                                              /mm3\n\nSodium----------------------------------------meq/L\n                                                              mmol/L \n\nSystolic blood pressure----------------------mm[Hg]\n\nTemperature----------------------------------Cel\n                                                              [degF]      \n                                                \nWhite blood cell count ----------------------{Cells}/uL\n                                                              10*3/uL\n                                                              10*9/L \n                                                              /mm3\n\nFor each encounter please also submit the following Linking Variables: \nCMS Certification Number; \nHealth Insurance Claim Number (HICN) or Medicare Beneficiary Identifier (MBI);\nDate of Birth;\nSex;\nInpatient Admission Date; and,\nDischarge Date.\n\nThe initial population includes patients with inpatient hospitalizations and patients from Acute Hospital Care at Home programs, who are treated and billed as inpatients but receive care in their home. \n\nThis version of the specifications uses Quality Data Model (QDM) version 5.6. Please refer to the eCQI Resource Center (https://ecqi.healthit.gov/qdm) for more information on the QDM.","media_type":"text/plain"}},{"code":"TRANF","value":"TBD","name":"Transmission Format","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"TRANF","title":"Transmission Format"},"value_obj":{"type":"ED","value":"TBD","media_type":"text/plain"}},{"code":"IPOP","value":"All Medicare Fee-For-Service and Medicare Advantage encounters for patients aged 65 to 94 years at the start of an inpatient admission, who are discharged during the measurement period (length of stay \u003c365 days).\n\nNOTE: All Medicare Fee-For-Service and Medicare Advantage encounters meeting the above criteria should be included, regardless of whether Medicare Fee-For-Service/Medicare Advantage is the primary, secondary, or tertiary payer.","name":"Initial Population","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"IPOP","title":"Initial Population"},"value_obj":{"type":"ED","value":"All Medicare Fee-For-Service and Medicare Advantage encounters for patients aged 65 to 94 years at the start of an inpatient admission, who are discharged during the measurement period (length of stay \u003c365 days).\n\nNOTE: All Medicare Fee-For-Service and Medicare Advantage encounters meeting the above criteria should be included, regardless of whether Medicare Fee-For-Service/Medicare Advantage is the primary, secondary, or tertiary payer.","media_type":"text/plain"}},{"code":"SDE","value":"For encounters in the Initial Population, report the FIRST value for vital signs resulted within the 24 hours prior to the inpatient admission. If no values were resulted in the 24 hours prior to the admission (for example, for patients directly admitted to the hospital) report the first value resulted within 2 hours after the start of the inpatient admission. \n\nFor laboratory test results, report the FIRST value resulted within the 24 hours prior to admission. If there are no values in the 24 hours prior to admission, report the first value resulted within 24 hours after the start of the inpatient admission. \n\nFirst values for the core clinical data elements may be resulted in the emergency department or other hospital outpatient locations within the hospital facility before a patient is subsequently admitted to the same hospital. First values for these data elements may also be resulted in an inpatient location for directly admitted patients who do not receive care in the emergency department or other hospital outpatient locations before admission.\n\nThe HWM-specific core clinical data elements are as follows:\nBicarbonate (or carbon dioxide, see Bicarbonate Lab Test value set)\nCreatinine \nHeart rate\nHematocrit\nOxygen saturation (by pulse oximetry)\nPlatelet\nSodium\nSystolic blood pressure\nTemperature\nWhite blood cell count\n\nNOTE: Do not report ALL values on an encounter during their entire admission. Only report the FIRST resulted value for EACH core clinical data element collected in the appropriate timeframe, if available.\n\nFor every patient in the Initial Population, also identify payer, race, ethnicity and sex.","name":"Supplemental Data Elements","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"SDE","title":"Supplemental Data Elements"},"value_obj":{"type":"ED","value":"For encounters in the Initial Population, report the FIRST value for vital signs resulted within the 24 hours prior to the inpatient admission. If no values were resulted in the 24 hours prior to the admission (for example, for patients directly admitted to the hospital) report the first value resulted within 2 hours after the start of the inpatient admission. \n\nFor laboratory test results, report the FIRST value resulted within the 24 hours prior to admission. If there are no values in the 24 hours prior to admission, report the first value resulted within 24 hours after the start of the inpatient admission. \n\nFirst values for the core clinical data elements may be resulted in the emergency department or other hospital outpatient locations within the hospital facility before a patient is subsequently admitted to the same hospital. First values for these data elements may also be resulted in an inpatient location for directly admitted patients who do not receive care in the emergency department or other hospital outpatient locations before admission.\n\nThe HWM-specific core clinical data elements are as follows:\nBicarbonate (or carbon dioxide, see Bicarbonate Lab Test value set)\nCreatinine \nHeart rate\nHematocrit\nOxygen saturation (by pulse oximetry)\nPlatelet\nSodium\nSystolic blood pressure\nTemperature\nWhite blood cell count\n\nNOTE: Do not report ALL values on an encounter during their entire admission. Only report the FIRST resulted value for EACH core clinical data element collected in the appropriate timeframe, if available.\n\nFor every patient in the Initial Population, also identify payer, race, ethnicity and sex.","media_type":"text/plain"}}],"measure_period":{"type":"IVL_TS","low":{"type":"TS","value":"201201010000","inclusive?":true,"derived?":false},"high":{"type":"TS","value":"201212312359","inclusive?":true,"derived?":false},"width":{"type":"PQ","unit":"a","value":"1","inclusive?":true,"derived?":false}},"measure_scoring":"COHORT","population_criteria":{"IPP":{"conjunction?":true,"type":"IPP","hqmf_id":"13BB510B-7A5D-4AE6-A313-D40A2FD54B48","preconditions":[{"id":2,"preconditions":[{"id":1,"reference":"HybridHospitalWideMortality__Initial_Population__AB7198F9_B3A8_4A2E_A583_CF8B2D02F229"}],"conjunction_code":"allTrue"}]}},"population_sets":[{"_id":"6892489f0734dfcaf542e918","population_set_id":"PopulationSet_1","populations":{"IPP":{"_id":"6892489f0734dfcaf542e919","hqmf_id":"13BB510B-7A5D-4AE6-A313-D40A2FD54B48","library_name":"HybridHospitalWideMortality","statement_name":"Initial Population"},"_id":"6892489f0734dfcaf542e91a","_type":"CQM::CohortPopulationMap"},"supplemental_data_elements":[{"_id":"689248980734dfcaf542e794","hqmf_id":"C7A5314E-7B16-4FFB-A32C-8E24A3C5CA10","library_name":"HybridHospitalWideMortality","statement_name":"SDE Ethnicity"},{"_id":"689248980734dfcaf542e795","hqmf_id":"2F617359-CB48-45EC-A4E9-C58E9732CCE1","library_name":"HybridHospitalWideMortality","statement_name":"SDE Payer"},{"_id":"689248980734dfcaf542e796","hqmf_id":"B7707E0A-94CB-48A1-9B75-60D9712E31DD","library_name":"HybridHospitalWideMortality","statement_name":"SDE Race"},{"_id":"689248980734dfcaf542e797","hqmf_id":"9A3BBEED-411E-4B38-B4CD-1D4E5B5FC597","library_name":"HybridHospitalWideMortality","statement_name":"SDE Sex"},{"_id":"689248980734dfcaf542e798","hqmf_id":"1B927DCA-FE2E-4EC7-9493-4E278F181BA7","library_name":"HybridHospitalWideMortality","statement_name":"SDE Results"}],"title":"Population Criteria Section"}],"source_data_criteria":[{"_id":"689248980734dfcaf542e7bb","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.666.5.307","dataElementCodes":[],"description":"Encounter, Performed: EncounterInpatient","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"689248980734dfcaf542e7bb","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"689248980734dfcaf542e7b8","_type":"QDM::PatientCharacteristicPayer","codeListId":"2.16.840.1.114222.4.11.3591","dataElementCodes":[],"description":"Patient Characteristic Payer: Payer","hqmfOid":"2.16.840.1.113883.10.20.28.4.58","id":"689248980734dfcaf542e7b8","qdmCategory":"patient_characteristic","qdmStatus":"payer","qdmTitle":"Patient Characteristic Payer","qdmVersion":"5.6","relevantPeriod":null},{"_id":"689248980734dfcaf542e7be","_type":"QDM::LaboratoryTestPerformed","authorDatetime":null,"codeListId":"2.16.840.1.113762.1.4.1045.127","components":null,"dataElementCodes":[],"description":"Laboratory Test, Performed: Plateletcountlabtest","hqmfOid":"2.16.840.1.113883.10.20.28.4.42","id":"689248980734dfcaf542e7be","interpretation":null,"method":null,"negationRationale":null,"qdmCategory":"laboratory_test","qdmStatus":"performed","qdmTitle":"Laboratory Test, Performed","qdmVersion":"5.6","reason":null,"referenceRange":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null,"resultDatetime":null,"status":null},{"_id":"689248980734dfcaf542e7b6","_type":"QDM::PhysicalExamPerformed","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"2.16.840.1.113762.1.4.1045.149","components":null,"dataElementCodes":[],"description":"Physical Exam, Performed: HeartRate","hqmfOid":"2.16.840.1.113883.10.20.28.4.62","id":"689248980734dfcaf542e7b6","method":null,"negationRationale":null,"qdmCategory":"physical_exam","qdmStatus":"performed","qdmTitle":"Physical Exam, Performed","qdmVersion":"5.6","reason":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null},{"_id":"6892489f0734dfcaf542e91b","_type":"QDM::PatientCharacteristicSex","codeListId":"2.16.840.1.113762.1.4.1","dataElementCodes":[],"description":"Patient Characteristic Sex: ONCAdministrativeSex","hqmfOid":"2.16.840.1.113883.10.20.28.4.55","id":"6892489f0734dfcaf542e91b","qdmCategory":"patient_characteristic","qdmStatus":"gender","qdmTitle":"Patient Characteristic Sex","qdmVersion":"5.6"},{"_id":"689248980734dfcaf542e7b7","_type":"QDM::PhysicalExamPerformed","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"2.16.840.1.113762.1.4.1045.163","components":null,"dataElementCodes":[],"description":"Physical Exam, Performed: SystolicBloodPressure","hqmfOid":"2.16.840.1.113883.10.20.28.4.62","id":"689248980734dfcaf542e7b7","method":null,"negationRationale":null,"qdmCategory":"physical_exam","qdmStatus":"performed","qdmTitle":"Physical Exam, Performed","qdmVersion":"5.6","reason":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null},{"_id":"689248980734dfcaf542e7b9","_type":"QDM::PatientCharacteristicPayer","codeListId":"2.16.840.1.113762.1.4.1104.12","dataElementCodes":[],"description":"Patient Characteristic Payer: MedicareAdvantagepayer","hqmfOid":"2.16.840.1.113883.10.20.28.4.58","id":"689248980734dfcaf542e7b9","qdmCategory":"patient_characteristic","qdmStatus":"payer","qdmTitle":"Patient Characteristic Payer","qdmVersion":"5.6","relevantPeriod":null},{"_id":"689248980734dfcaf542e7ba","_type":"QDM::PhysicalExamPerformed","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"2.16.840.1.113762.1.4.1045.152","components":null,"dataElementCodes":[],"description":"Physical Exam, Performed: Bodytemperature","hqmfOid":"2.16.840.1.113883.10.20.28.4.62","id":"689248980734dfcaf542e7ba","method":null,"negationRationale":null,"qdmCategory":"physical_exam","qdmStatus":"performed","qdmTitle":"Physical Exam, Performed","qdmVersion":"5.6","reason":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null},{"_id":"689248980734dfcaf542e7bc","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113762.1.4.1111.143","dataElementCodes":[],"description":"Encounter, Performed: ObservationServices","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"689248980734dfcaf542e7bc","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"689248980734dfcaf542e7bd","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.117.1.7.1.292","dataElementCodes":[],"description":"Encounter, Performed: EmergencyDepartmentVisit","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"689248980734dfcaf542e7bd","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"689248980734dfcaf542e7bf","_type":"QDM::LaboratoryTestPerformed","authorDatetime":null,"codeListId":"2.16.840.1.113762.1.4.1045.119","components":null,"dataElementCodes":[],"description":"Laboratory Test, Performed: Sodiumlabtest","hqmfOid":"2.16.840.1.113883.10.20.28.4.42","id":"689248980734dfcaf542e7bf","interpretation":null,"method":null,"negationRationale":null,"qdmCategory":"laboratory_test","qdmStatus":"performed","qdmTitle":"Laboratory Test, Performed","qdmVersion":"5.6","reason":null,"referenceRange":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null,"resultDatetime":null,"status":null},{"_id":"6892489f0734dfcaf542e91c","_type":"QDM::PatientCharacteristicEthnicity","codeListId":"2.16.840.1.114222.4.11.837","dataElementCodes":[],"description":"Patient Characteristic Ethnicity: Ethnicity","hqmfOid":"2.16.840.1.113883.10.20.28.4.56","id":"6892489f0734dfcaf542e91c","qdmCategory":"patient_characteristic","qdmStatus":"ethnicity","qdmTitle":"Patient Characteristic Ethnicity","qdmVersion":"5.6"},{"_id":"689248980734dfcaf542e7c0","_type":"QDM::LaboratoryTestPerformed","authorDatetime":null,"codeListId":"2.16.840.1.113762.1.4.1045.139","components":null,"dataElementCodes":[],"description":"Laboratory Test, Performed: Bicarbonatelabtest","hqmfOid":"2.16.840.1.113883.10.20.28.4.42","id":"689248980734dfcaf542e7c0","interpretation":null,"method":null,"negationRationale":null,"qdmCategory":"laboratory_test","qdmStatus":"performed","qdmTitle":"Laboratory Test, Performed","qdmVersion":"5.6","reason":null,"referenceRange":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null,"resultDatetime":null,"status":null},{"_id":"689248980734dfcaf542e7c1","_type":"QDM::LaboratoryTestPerformed","authorDatetime":null,"codeListId":"2.16.840.1.113883.3.666.5.2363","components":null,"dataElementCodes":[],"description":"Laboratory Test, Performed: Creatininelabtest","hqmfOid":"2.16.840.1.113883.10.20.28.4.42","id":"689248980734dfcaf542e7c1","interpretation":null,"method":null,"negationRationale":null,"qdmCategory":"laboratory_test","qdmStatus":"performed","qdmTitle":"Laboratory Test, Performed","qdmVersion":"5.6","reason":null,"referenceRange":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null,"resultDatetime":null,"status":null},{"_id":"6892489f0734dfcaf542e91d","_type":"QDM::PatientCharacteristicRace","codeListId":"2.16.840.1.114222.4.11.836","dataElementCodes":[],"description":"Patient Characteristic Race: Race","hqmfOid":"2.16.840.1.113883.10.20.28.4.59","id":"6892489f0734dfcaf542e91d","qdmCategory":"patient_characteristic","qdmStatus":"race","qdmTitle":"Patient Characteristic Race","qdmVersion":"5.6"},{"_id":"689248980734dfcaf542e7c2","_type":"QDM::PatientCharacteristicPayer","codeListId":"2.16.840.1.113762.1.4.1104.10","dataElementCodes":[],"description":"Patient Characteristic Payer: MedicareFFSpayer","hqmfOid":"2.16.840.1.113883.10.20.28.4.58","id":"689248980734dfcaf542e7c2","qdmCategory":"patient_characteristic","qdmStatus":"payer","qdmTitle":"Patient Characteristic Payer","qdmVersion":"5.6","relevantPeriod":null},{"_id":"689248980734dfcaf542e7c3","_type":"QDM::LaboratoryTestPerformed","authorDatetime":null,"codeListId":"2.16.840.1.113762.1.4.1045.129","components":null,"dataElementCodes":[],"description":"Laboratory Test, Performed: Whitebloodcellscountlabtest","hqmfOid":"2.16.840.1.113883.10.20.28.4.42","id":"689248980734dfcaf542e7c3","interpretation":null,"method":null,"negationRationale":null,"qdmCategory":"laboratory_test","qdmStatus":"performed","qdmTitle":"Laboratory Test, Performed","qdmVersion":"5.6","reason":null,"referenceRange":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null,"resultDatetime":null,"status":null},{"_id":"689248980734dfcaf542e7c4","_type":"QDM::PhysicalExamPerformed","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"2.16.840.1.113762.1.4.1045.151","components":null,"dataElementCodes":[],"description":"Physical Exam, Performed: OxygenSaturationbyPulseOximetry","hqmfOid":"2.16.840.1.113883.10.20.28.4.62","id":"689248980734dfcaf542e7c4","method":null,"negationRationale":null,"qdmCategory":"physical_exam","qdmStatus":"performed","qdmTitle":"Physical Exam, Performed","qdmVersion":"5.6","reason":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null},{"_id":"689248980734dfcaf542e7c5","_type":"QDM::LaboratoryTestPerformed","authorDatetime":null,"codeListId":"2.16.840.1.113762.1.4.1045.114","components":null,"dataElementCodes":[],"description":"Laboratory Test, Performed: Hematocritlabtest","hqmfOid":"2.16.840.1.113883.10.20.28.4.42","id":"689248980734dfcaf542e7c5","interpretation":null,"method":null,"negationRationale":null,"qdmCategory":"laboratory_test","qdmStatus":"performed","qdmTitle":"Laboratory Test, Performed","qdmVersion":"5.6","reason":null,"referenceRange":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null,"resultDatetime":null,"status":null}],"title":"Core Clinical Data Elements for the Hybrid Hospital-Wide (All-Condition, All-Procedure) Risk-Standardized Mortality Measure (HWM)","updated_at":null,"value_set_ids":["6892489f0734dfcaf542e8fc","6892489f0734dfcaf542e8fd","6892489f0734dfcaf542e8fe","6892489f0734dfcaf542e8ff","6892489f0734dfcaf542e900","6892489f0734dfcaf542e901","6892489f0734dfcaf542e902","6892489f0734dfcaf542e903","6892489f0734dfcaf542e904","6892489f0734dfcaf542e905","6892489f0734dfcaf542e906","6892489f0734dfcaf542e907","6892489f0734dfcaf542e908","6892489f0734dfcaf542e909","6892489f0734dfcaf542e90a","6892489f0734dfcaf542e90b","6892489f0734dfcaf542e90c","6892489f0734dfcaf542e90d","6892489f0734dfcaf542e90e","6892489f0734dfcaf542e90f","6892489f0734dfcaf542e910"]}