{"_id":"689244b50734dfcaf5414917","calculate_sdes":null,"calculation_method":"PATIENT","cms_id":"CMS137v12","component":false,"component_hqmf_set_ids":[],"composite":false,"composite_hqmf_set_id":null,"cql_libraries":[{"_id":"689244ad0734dfcaf5414532","cql":"library InitiationandEngagementofSubstanceUseDisorderTreatment version '12.0.000'\r\n\r\nusing QDM version '5.6'\r\n\r\ninclude MATGlobalCommonFunctions version '7.0.000' called Global\r\ninclude Hospice version '5.0.000' called Hospice\r\n\r\nvalueset \"Detoxification Visit\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1059'\r\nvalueset \"Discharge Services Hospital Inpatient\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1007'\r\nvalueset \"Discharge Services Hospital Inpatient Same Day Discharge\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1006'\r\nvalueset \"Emergency Department Evaluation and Management Visit\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1010'\r\nvalueset \"Ethnicity\": 'urn:oid:2.16.840.1.114222.4.11.837'\r\nvalueset \"Initial Hospital Inpatient Visit\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1004'\r\nvalueset \"Initial Hospital Observation Care\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1002'\r\nvalueset \"Office Visit\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1001'\r\nvalueset \"ONC Administrative Sex\": 'urn:oid:2.16.840.1.113762.1.4.1'\r\nvalueset \"Online Assessments\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1089'\r\nvalueset \"Payer\": 'urn:oid:2.16.840.1.114222.4.11.3591'\r\nvalueset \"Psych Visit Psychotherapy\": 'urn:oid:2.16.840.1.113883.3.526.3.1496'\r\nvalueset \"Race\": 'urn:oid:2.16.840.1.114222.4.11.836'\r\nvalueset \"Substance Use Disorder\": 'urn:oid:2.16.840.1.113883.3.464.1003.106.12.1001'\r\nvalueset \"Substance Use Disorder Long Acting Medication\": 'urn:oid:2.16.840.1.113883.3.464.1003.1149'\r\nvalueset \"Substance Use Disorder Long Acting Medication Administration\": 'urn:oid:2.16.840.1.113883.3.464.1003.1156'\r\nvalueset \"Substance Use Disorder Short Acting Medication\": 'urn:oid:2.16.840.1.113883.3.464.1003.1150'\r\nvalueset \"Substance Use Disorder Short Acting Medication Administration\": 'urn:oid:2.16.840.1.113883.3.464.1003.1157'\r\nvalueset \"Substance Use Disorder Treatment\": 'urn:oid:2.16.840.1.113883.3.464.1003.106.12.1005'\r\nvalueset \"Telephone Visits\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1080'\r\n\r\nparameter \"Measurement Period\" Interval\u003cDateTime\u003e\r\n\r\ncontext Patient\r\n\r\ndefine \"Initial Population\":\r\n  AgeInYearsAt(date from start of \"Measurement Period\")\u003e= 13\r\n    and \"First SUD Episode During Measurement Period\" is not null\r\n    and not exists \"History of SUD Diagnosis or Treatment\"\r\n\r\ndefine \"First SUD Episode During Measurement Period\":\r\n  First((\"Qualifying Encounters\")ValidEncounters\r\n      with [\"Diagnosis\": \"Substance Use Disorder\"] SUDDiagnosis\r\n        such that ValidEncounters.relevantPeriod during \"Measurement Period\"\r\n          and SUDDiagnosis.prevalencePeriod starts during ValidEncounters.relevantPeriod\r\n          and SUDDiagnosis.prevalencePeriod starts 47 days or more before day of \r\n          end of \"Measurement Period\"\r\n      sort by start of relevantPeriod\r\n  )\r\n\r\ndefine \"Denominator\":\r\n  \"Initial Population\"\r\n\r\ndefine \"Denominator Exclusions\":\r\n  Hospice.\"Has Hospice Services\"\r\n\r\ndefine \"Numerator 1\":\r\n  exists \"Treatment Initiation With Non Medication Intervention Dates\"\r\n    or exists \"Treatment Initiation With Medication Order Dates\"\r\n\r\ndefine \"Psychosocial Visit\":\r\n  [\"Intervention, Performed\": \"Substance Use Disorder Treatment\"]\r\n    union [\"Intervention, Performed\": \"Psych Visit Psychotherapy\"]\r\n    union ( ( [\"Encounter, Performed\": \"Telephone Visits\"]\r\n        union [\"Encounter, Performed\": \"Online Assessments\"] ) TelehealthEncounter\r\n        where exists TelehealthEncounter.diagnoses Diagnosis\r\n          where Diagnosis.code in \"Substance Use Disorder\"\r\n    )\r\n\r\ndefine \"SDE Ethnicity\":\r\n  [\"Patient Characteristic Ethnicity\": \"Ethnicity\"]\r\n\r\ndefine \"SDE Payer\":\r\n  [\"Patient Characteristic Payer\": \"Payer\"]\r\n\r\ndefine \"SDE Race\":\r\n  [\"Patient Characteristic Race\": \"Race\"]\r\n\r\ndefine \"SDE Sex\":\r\n  [\"Patient Characteristic Sex\": \"ONC Administrative Sex\"]\r\n\r\ndefine \"Stratification 1\":\r\n  AgeInYearsAt(date from start of \"Measurement Period\")in Interval[13, 17]\r\n\r\ndefine \"Stratification 2\":\r\n  AgeInYearsAt(date from start of \"Measurement Period\")in Interval[18, 64]\r\n\r\ndefine \"Treatment Initiation With Medication Order Dates\":\r\n  ( ( [\"Medication, Order\": \"Substance Use Disorder Short Acting Medication\"]\r\n      union [\"Medication, Order\": \"Substance Use Disorder Long Acting Medication\"] ) SUDMedication\r\n      let treatmentDate: date from SUDMedication.authorDatetime\r\n      with \"First SUD Episode During Measurement Period\" FirstSUDEpisode\r\n        such that treatmentDate during Interval[date from start of FirstSUDEpisode.relevantPeriod, date from start of FirstSUDEpisode.relevantPeriod + 14 days )\r\n      return all treatmentDate\r\n  )\r\n    union ( ( [\"Procedure, Performed\": \"Substance Use Disorder Short Acting Medication Administration\"]\r\n        union [\"Procedure, Performed\": \"Substance Use Disorder Long Acting Medication Administration\"] ) SUDMedAdministration\r\n        let treatmentDate: date from start of Global.\"NormalizeInterval\" ( SUDMedAdministration.relevantDatetime, SUDMedAdministration.relevantPeriod )\r\n        with \"First SUD Episode During Measurement Period\" FirstSUDEpisode\r\n          such that treatmentDate during Interval[date from start of FirstSUDEpisode.relevantPeriod, date from start of FirstSUDEpisode.relevantPeriod + 14 days )\r\n        return all treatmentDate\r\n    )\r\n\r\ndefine \"Has Treatment Engagement With Long Acting Medication\":\r\n  exists ( ( [\"Medication, Order\": \"Substance Use Disorder Long Acting Medication\"] LongActingMedOrder\r\n        with ( Min(\"Treatment Initiation With Non Medication Intervention Dates\"\r\n            union \"Treatment Initiation With Medication Order Dates\"\r\n        )) InitiationTreatmentDate\r\n          such that date from LongActingMedOrder.authorDatetime 34 days or less after InitiationTreatmentDate\r\n    )\r\n      union ( [\"Procedure, Performed\": \"Substance Use Disorder Long Acting Medication Administration\"] LongActingTreatment\r\n          with ( Min(\"Treatment Initiation With Non Medication Intervention Dates\"\r\n              union \"Treatment Initiation With Medication Order Dates\"\r\n          )) InitiationTreatmentDate\r\n            such that date from start of Global.\"NormalizeInterval\" ( LongActingTreatment.relevantDatetime, LongActingTreatment.relevantPeriod ) 34 days or less after InitiationTreatmentDate\r\n      )\r\n  )\r\n\r\ndefine \"History of SUD Diagnosis or Treatment\":\r\n  ( ( [\"Intervention, Performed\": \"Substance Use Disorder Treatment\"]\r\n      union [\"Intervention, Performed\": \"Psych Visit Psychotherapy\"]\r\n      union [\"Procedure, Performed\": \"Substance Use Disorder Long Acting Medication Administration\"]\r\n      union [\"Procedure, Performed\": \"Substance Use Disorder Short Acting Medication Administration\"] ) Interventions\r\n      with \"First SUD Episode During Measurement Period\" FirstSUDEpisode\r\n        such that Global.\"NormalizeInterval\" ( Interventions.relevantDatetime, Interventions.relevantPeriod ) starts 60 days or less before day of start of FirstSUDEpisode.relevantPeriod\r\n  )\r\n    union ( ( ( \"Qualifying Encounters\"\r\n        except \"Emergency Department or Detoxification Visit\" ) QualifyingEncounter\r\n        where ( exists QualifyingEncounter.diagnoses Diagnosis\r\n            where Diagnosis.code in \"Substance Use Disorder\"\r\n        ) ) EncounterWithDiagnosis\r\n        with \"First SUD Episode During Measurement Period\" FirstSUDEpisode\r\n          such that EncounterWithDiagnosis.relevantPeriod starts 60 days or less before day of start of FirstSUDEpisode.relevantPeriod\r\n    )\r\n    union ( ( [\"Medication, Order\": \"Substance Use Disorder Long Acting Medication\"]\r\n        union [\"Medication, Order\": \"Substance Use Disorder Short Acting Medication\"] ) SUDMedication\r\n        with \"First SUD Episode During Measurement Period\" FirstSUDEpisode\r\n          such that SUDMedication.authorDatetime 60 days or less before day of start of FirstSUDEpisode.relevantPeriod\r\n    )\r\n\r\ndefine \"Treatment Initiation With Non Medication Intervention Dates\":\r\n  \"Psychosocial Visit\" PsychosocialVisit\r\n    let treatmentDate: date from start of Global.\"NormalizeInterval\" ( PsychosocialVisit.relevantDatetime, PsychosocialVisit.relevantPeriod )\r\n    with \"First SUD Episode During Measurement Period\" FirstSUDEpisode\r\n      such that treatmentDate during Interval[date from start of FirstSUDEpisode.relevantPeriod, date from start of FirstSUDEpisode.relevantPeriod + 14 days )\r\n        and PsychosocialVisit.id !~ FirstSUDEpisode.id\r\n    return all treatmentDate\r\n\r\ndefine \"Stratification 3\":\r\n  AgeInYearsAt(date from start of \"Measurement Period\")\u003e= 65\r\n\r\ndefine \"Has Two or More Treatment Engagements With Short Acting Medication or Non Medication Intervention\":\r\n  Count(((\"Psychosocial Visit\"\r\n        union [\"Procedure, Performed\": \"Substance Use Disorder Short Acting Medication Administration\"])ShortActingTreatment\r\n        with(Min(\"Treatment Initiation With Non Medication Intervention Dates\"\r\n            union \"Treatment Initiation With Medication Order Dates\"\r\n        ))InitiationTreatmentDate\r\n          such that date from start of Global.\"NormalizeInterval\"(ShortActingTreatment.relevantDatetime, ShortActingTreatment.relevantPeriod)34 days or less after InitiationTreatmentDate\r\n        return all ShortActingTreatment\r\n    )\r\n      union([\"Medication, Order\": \"Substance Use Disorder Short Acting Medication\"] ShortActingMedOrder\r\n          with(Min(\"Treatment Initiation With Non Medication Intervention Dates\"\r\n              union \"Treatment Initiation With Medication Order Dates\"\r\n          ))InitiationTreatmentDate\r\n            such that date from ShortActingMedOrder.authorDatetime 34 days or less after InitiationTreatmentDate\r\n          return all ShortActingMedOrder\r\n      )\r\n  )\u003e= 2\r\n\r\ndefine \"Numerator 2\":\r\n  \"Has Treatment Engagement With Long Acting Medication\"\r\n    or \"Has Two or More Treatment Engagements With Short Acting Medication or Non Medication Intervention\"\r\n\r\ndefine \"Qualifying Encounters\":\r\n  ( [\"Encounter, Performed\": \"Office Visit\"]\r\n      union [\"Encounter, Performed\": \"Emergency Department Evaluation and Management Visit\"]\r\n      union [\"Encounter, Performed\": \"Detoxification Visit\"]\r\n      union [\"Encounter, Performed\": \"Initial Hospital Observation Care\"]\r\n      union [\"Encounter, Performed\": \"Initial Hospital Inpatient Visit\"]\r\n      union [\"Encounter, Performed\": \"Discharge Services Hospital Inpatient Same Day Discharge\"]\r\n      union [\"Encounter, Performed\": \"Discharge Services Hospital Inpatient\"]\r\n      union [\"Encounter, Performed\": \"Telephone Visits\"]\r\n      union [\"Encounter, Performed\": \"Online Assessments\"]\r\n  )\r\n\r\ndefine \"Emergency Department or Detoxification Visit\":\r\n  [\"Encounter, Performed\": \"Emergency Department Evaluation and Management Visit\"]\r\n    union [\"Encounter, Performed\": \"Detoxification Visit\"]","elm":{"library":{"annotation":[{"translatorOptions":"EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion,DisableMethodInvocation","type":"CqlToElmInfo"},{"type":"Annotation","s":{"r":"110","s":[{"value":["","library InitiationandEngagementofSubstanceUseDisorderTreatment version '12.0.000'"]}]}}],"identifier":{"id":"InitiationandEngagementofSubstanceUseDisorderTreatment","version":"12.0.000"},"schemaIdentifier":{"id":"urn:hl7-org:elm","version":"r1"},"usings":{"def":[{"localIdentifier":"System","uri":"urn:hl7-org:elm-types:r1"},{"localId":"1","locator":"3:1-3:23","localIdentifier":"QDM","uri":"urn:healthit-gov:qdm:v5_6","version":"5.6","annotation":[{"type":"Annotation","s":{"r":"1","s":[{"value":["","using "]},{"s":[{"value":["QDM"]}]},{"value":[" version ","'5.6'"]}]}}]}]},"includes":{"def":[{"localId":"2","locator":"5:1-5:64","localIdentifier":"Global","path":"MATGlobalCommonFunctions","version":"7.0.000","annotation":[{"type":"Annotation","s":{"r":"2","s":[{"value":["","include "]},{"s":[{"value":["MATGlobalCommonFunctions"]}]},{"value":[" version ","'7.0.000'"," called ","Global"]}]}}]},{"localId":"3","locator":"6:1-6:48","localIdentifier":"Hospice","path":"Hospice","version":"5.0.000","annotation":[{"type":"Annotation","s":{"r":"3","s":[{"value":["","include "]},{"s":[{"value":["Hospice"]}]},{"value":[" version ","'5.0.000'"," called ","Hospice"]}]}}]}]},"parameters":{"def":[{"localId":"26","locator":"29:1-29:49","name":"Measurement Period","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"26","s":[{"value":["","parameter ","\"Measurement Period\""," "]},{"r":"25","s":[{"value":["Interval\u003c"]},{"r":"24","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}}],"parameterTypeSpecifier":{"localId":"25","locator":"29:32-29:49","type":"IntervalTypeSpecifier","pointType":{"localId":"24","locator":"29:41-29:48","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},"valueSets":{"def":[{"localId":"4","locator":"8:1-8:83","name":"Detoxification Visit","id":"2.16.840.1.113883.3.464.1003.101.12.1059","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"4","s":[{"value":["","valueset ","\"Detoxification Visit\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1059'"]}]}}]},{"localId":"5","locator":"9:1-9:100","name":"Discharge Services Hospital Inpatient","id":"2.16.840.1.113883.3.464.1003.101.12.1007","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"5","s":[{"value":["","valueset ","\"Discharge Services Hospital Inpatient\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1007'"]}]}}]},{"localId":"6","locator":"10:1-10:119","name":"Discharge Services Hospital Inpatient Same Day Discharge","id":"2.16.840.1.113883.3.464.1003.101.12.1006","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"6","s":[{"value":["","valueset ","\"Discharge Services Hospital Inpatient Same Day Discharge\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1006'"]}]}}]},{"localId":"7","locator":"11:1-11:115","name":"Emergency Department Evaluation and Management Visit","id":"2.16.840.1.113883.3.464.1003.101.12.1010","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"7","s":[{"value":["","valueset ","\"Emergency Department Evaluation and Management Visit\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1010'"]}]}}]},{"localId":"8","locator":"12:1-12:58","name":"Ethnicity","id":"2.16.840.1.114222.4.11.837","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"8","s":[{"value":["","valueset ","\"Ethnicity\"",": ","'urn:oid:2.16.840.1.114222.4.11.837'"]}]}}]},{"localId":"9","locator":"13:1-13:95","name":"Initial Hospital Inpatient Visit","id":"2.16.840.1.113883.3.464.1003.101.12.1004","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"9","s":[{"value":["","valueset ","\"Initial Hospital Inpatient Visit\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1004'"]}]}}]},{"localId":"10","locator":"14:1-14:96","name":"Initial Hospital Observation Care","id":"2.16.840.1.113883.3.464.1003.101.12.1002","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"10","s":[{"value":["","valueset ","\"Initial Hospital Observation Care\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1002'"]}]}}]},{"localId":"11","locator":"15:1-15:75","name":"Office Visit","id":"2.16.840.1.113883.3.464.1003.101.12.1001","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"11","s":[{"value":["","valueset ","\"Office Visit\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1001'"]}]}}]},{"localId":"12","locator":"16:1-16:68","name":"ONC Administrative Sex","id":"2.16.840.1.113762.1.4.1","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"12","s":[{"value":["","valueset ","\"ONC Administrative Sex\"",": ","'urn:oid:2.16.840.1.113762.1.4.1'"]}]}}]},{"localId":"13","locator":"17:1-17:81","name":"Online Assessments","id":"2.16.840.1.113883.3.464.1003.101.12.1089","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"13","s":[{"value":["","valueset ","\"Online Assessments\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1089'"]}]}}]},{"localId":"14","locator":"18:1-18:55","name":"Payer","id":"2.16.840.1.114222.4.11.3591","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"14","s":[{"value":["","valueset ","\"Payer\"",": ","'urn:oid:2.16.840.1.114222.4.11.3591'"]}]}}]},{"localId":"15","locator":"19:1-19:78","name":"Psych Visit Psychotherapy","id":"2.16.840.1.113883.3.526.3.1496","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"15","s":[{"value":["","valueset ","\"Psych Visit Psychotherapy\"",": ","'urn:oid:2.16.840.1.113883.3.526.3.1496'"]}]}}]},{"localId":"16","locator":"20:1-20:53","name":"Race","id":"2.16.840.1.114222.4.11.836","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"16","s":[{"value":["","valueset ","\"Race\"",": ","'urn:oid:2.16.840.1.114222.4.11.836'"]}]}}]},{"localId":"17","locator":"21:1-21:85","name":"Substance Use Disorder","id":"2.16.840.1.113883.3.464.1003.106.12.1001","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"17","s":[{"value":["","valueset ","\"Substance Use Disorder\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.106.12.1001'"]}]}}]},{"localId":"18","locator":"22:1-22:101","name":"Substance Use Disorder Long Acting Medication","id":"2.16.840.1.113883.3.464.1003.1149","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"18","s":[{"value":["","valueset ","\"Substance Use Disorder Long Acting Medication\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.1149'"]}]}}]},{"localId":"19","locator":"23:1-23:116","name":"Substance Use Disorder Long Acting Medication Administration","id":"2.16.840.1.113883.3.464.1003.1156","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"19","s":[{"value":["","valueset ","\"Substance Use Disorder Long Acting Medication Administration\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.1156'"]}]}}]},{"localId":"20","locator":"24:1-24:102","name":"Substance Use Disorder Short Acting Medication","id":"2.16.840.1.113883.3.464.1003.1150","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"20","s":[{"value":["","valueset ","\"Substance Use Disorder Short Acting Medication\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.1150'"]}]}}]},{"localId":"21","locator":"25:1-25:117","name":"Substance Use Disorder Short Acting Medication Administration","id":"2.16.840.1.113883.3.464.1003.1157","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"21","s":[{"value":["","valueset ","\"Substance Use Disorder Short Acting Medication Administration\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.1157'"]}]}}]},{"localId":"22","locator":"26:1-26:95","name":"Substance Use Disorder Treatment","id":"2.16.840.1.113883.3.464.1003.106.12.1005","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"22","s":[{"value":["","valueset ","\"Substance Use Disorder Treatment\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.106.12.1005'"]}]}}]},{"localId":"23","locator":"27:1-27:79","name":"Telephone Visits","id":"2.16.840.1.113883.3.464.1003.101.12.1080","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"23","s":[{"value":["","valueset ","\"Telephone Visits\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1080'"]}]}}]}]},"contexts":{"def":[{"locator":"31:1-31:15","name":"Patient"}]},"statements":{"def":[{"locator":"31:1-31:15","name":"Patient","context":"Patient","expression":{"type":"SingletonFrom","operand":{"locator":"31:1-31:15","dataType":"{urn:healthit-gov:qdm:v5_6}Patient","templateId":"Patient","type":"Retrieve"}}},{"localId":"50","locator":"171:1-181:3","name":"Qualifying Encounters","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"50","s":[{"value":["","define ","\"Qualifying Encounters\"",":\n  "]},{"r":"49","s":[{"value":["( "]},{"r":"49","s":[{"r":"47","s":[{"r":"45","s":[{"r":"43","s":[{"r":"41","s":[{"r":"39","s":[{"r":"37","s":[{"r":"35","s":[{"r":"33","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Office Visit\""]}]},{"value":["]"]}]},{"value":["\n      union "]},{"r":"34","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Evaluation and Management Visit\""]}]},{"value":["]"]}]}]},{"value":["\n      union "]},{"r":"36","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Detoxification Visit\""]}]},{"value":["]"]}]}]},{"value":["\n      union "]},{"r":"38","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Initial Hospital Observation Care\""]}]},{"value":["]"]}]}]},{"value":["\n      union "]},{"r":"40","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Initial Hospital Inpatient Visit\""]}]},{"value":["]"]}]}]},{"value":["\n      union "]},{"r":"42","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Discharge Services Hospital Inpatient Same Day Discharge\""]}]},{"value":["]"]}]}]},{"value":["\n      union "]},{"r":"44","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Discharge Services Hospital Inpatient\""]}]},{"value":["]"]}]}]},{"value":["\n      union "]},{"r":"46","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Telephone Visits\""]}]},{"value":["]"]}]}]},{"value":["\n      union "]},{"r":"48","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Online Assessments\""]}]},{"value":["]"]}]}]},{"value":["\n  )"]}]}]}}],"expression":{"localId":"49","locator":"172:3-181:3","type":"Union","operand":[{"localId":"47","locator":"172:5-179:56","type":"Union","operand":[{"localId":"43","locator":"172:5-177:96","type":"Union","operand":[{"localId":"39","locator":"172:5-175:73","type":"Union","operand":[{"localId":"35","locator":"172:5-173:92","type":"Union","operand":[{"localId":"33","locator":"172:5-172:44","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"172:30-172:43","name":"Office Visit","type":"ValueSetRef"}},{"localId":"34","locator":"173:13-173:92","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"173:38-173:91","name":"Emergency Department Evaluation and Management Visit","type":"ValueSetRef"}}]},{"type":"Union","operand":[{"localId":"36","locator":"174:13-174:60","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"174:38-174:59","name":"Detoxification Visit","type":"ValueSetRef"}},{"localId":"38","locator":"175:13-175:73","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"175:38-175:72","name":"Initial Hospital Observation Care","type":"ValueSetRef"}}]}]},{"type":"Union","operand":[{"localId":"40","locator":"176:13-176:72","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"176:38-176:71","name":"Initial Hospital Inpatient Visit","type":"ValueSetRef"}},{"localId":"42","locator":"177:13-177:96","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"177:38-177:95","name":"Discharge Services Hospital Inpatient Same Day Discharge","type":"ValueSetRef"}}]}]},{"type":"Union","operand":[{"localId":"44","locator":"178:13-178:77","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"178:38-178:76","name":"Discharge Services Hospital Inpatient","type":"ValueSetRef"}},{"localId":"46","locator":"179:13-179:56","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"179:38-179:55","name":"Telephone Visits","type":"ValueSetRef"}}]}]},{"localId":"48","locator":"180:13-180:58","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"180:38-180:57","name":"Online Assessments","type":"ValueSetRef"}}]}},{"localId":"79","locator":"38:1-46:3","name":"First SUD Episode During Measurement Period","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"79","s":[{"value":["","define ","\"First SUD Episode During Measurement Period\"",":\n  "]},{"r":"78","s":[{"value":["First","("]},{"r":"77","s":[{"s":[{"r":"52","s":[{"r":"51","s":[{"value":["("]},{"r":"51","s":[{"value":["\"Qualifying Encounters\""]}]},{"value":[")"]}]},{"value":["ValidEncounters"]}]}]},{"value":["\n      "]},{"r":"72","s":[{"value":["with "]},{"r":"54","s":[{"r":"53","s":[{"r":"53","s":[{"value":["[","\"Diagnosis\"",": "]},{"s":[{"value":["\"Substance Use Disorder\""]}]},{"value":["]"]}]}]},{"value":[" ","SUDDiagnosis"]}]},{"value":["\n        such that "]},{"r":"71","s":[{"r":"64","s":[{"r":"58","s":[{"r":"56","s":[{"r":"55","s":[{"value":["ValidEncounters"]}]},{"value":["."]},{"r":"56","s":[{"value":["relevantPeriod"]}]}]},{"r":"58","value":[" ","during"," "]},{"r":"57","s":[{"value":["\"Measurement Period\""]}]}]},{"value":["\n          and "]},{"r":"63","s":[{"r":"60","s":[{"r":"59","s":[{"value":["SUDDiagnosis"]}]},{"value":["."]},{"r":"60","s":[{"value":["prevalencePeriod"]}]}]},{"r":"63","value":[" ","starts during"," "]},{"r":"62","s":[{"r":"61","s":[{"value":["ValidEncounters"]}]},{"value":["."]},{"r":"62","s":[{"value":["relevantPeriod"]}]}]}]}]},{"value":["\n          and "]},{"r":"70","s":[{"r":"66","s":[{"r":"65","s":[{"value":["SUDDiagnosis"]}]},{"value":["."]},{"r":"66","s":[{"value":["prevalencePeriod"]}]}]},{"value":[" "]},{"r":"70","s":[{"value":["starts "]},{"r":"69","s":[{"value":["47 ","days"]}]},{"value":[" or more before day of"]}]},{"value":[" \n          "]},{"r":"68","s":[{"value":["end of "]},{"r":"67","s":[{"value":["\"Measurement Period\""]}]}]}]}]}]},{"value":["\n      "]},{"r":"76","s":[{"value":["sort by "]},{"r":"75","s":[{"r":"74","s":[{"value":["start of "]},{"r":"73","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]}]}}],"expression":{"localId":"78","locator":"39:3-46:3","type":"First","source":{"localId":"77","locator":"39:9-45:37","type":"Query","source":[{"localId":"52","locator":"39:9-39:48","alias":"ValidEncounters","expression":{"localId":"51","locator":"39:9-39:33","name":"Qualifying Encounters","type":"ExpressionRef"}}],"relationship":[{"localId":"72","locator":"40:7-44:37","alias":"SUDDiagnosis","type":"With","expression":{"localId":"53","locator":"40:12-40:50","dataType":"{urn:healthit-gov:qdm:v5_6}Diagnosis","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"40:26-40:49","name":"Substance Use Disorder","type":"ValueSetRef"}},"suchThat":{"localId":"71","locator":"41:19-44:37","type":"And","operand":[{"localId":"64","locator":"41:19-42:88","type":"And","operand":[{"localId":"58","locator":"41:19-41:76","type":"IncludedIn","operand":[{"localId":"56","locator":"41:19-41:48","path":"relevantPeriod","scope":"ValidEncounters","type":"Property"},{"localId":"57","locator":"41:57-41:76","name":"Measurement Period","type":"ParameterRef"}]},{"localId":"63","locator":"42:15-42:88","type":"In","operand":[{"locator":"42:45-42:50","type":"Start","operand":{"localId":"60","locator":"42:15-42:43","path":"prevalencePeriod","scope":"SUDDiagnosis","type":"Property"}},{"localId":"62","locator":"42:59-42:88","path":"relevantPeriod","scope":"ValidEncounters","type":"Property"}]}]},{"localId":"70","locator":"43:15-44:37","precision":"Day","type":"SameOrBefore","operand":[{"locator":"43:45-43:50","type":"Start","operand":{"localId":"66","locator":"43:15-43:43","path":"prevalencePeriod","scope":"SUDDiagnosis","type":"Property"}},{"locator":"44:11-44:37","type":"Subtract","operand":[{"localId":"68","locator":"44:11-44:37","type":"End","operand":{"localId":"67","locator":"44:18-44:37","name":"Measurement Period","type":"ParameterRef"}},{"localId":"69","locator":"43:52-43:58","value":47,"unit":"days","type":"Quantity"}]}]}]}}],"sort":{"localId":"76","locator":"45:7-45:37","by":[{"localId":"75","locator":"45:15-45:37","direction":"asc","type":"ByExpression","expression":{"localId":"74","locator":"45:15-45:37","type":"Start","operand":{"localId":"73","locator":"45:24-45:37","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}},{"localId":"110","locator":"183:1-185:58","name":"Emergency Department or Detoxification Visit","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"110","s":[{"value":["","define ","\"Emergency Department or Detoxification Visit\"",":\n  "]},{"r":"109","s":[{"r":"107","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Evaluation and Management Visit\""]}]},{"value":["]"]}]},{"value":["\n    union "]},{"r":"108","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Detoxification Visit\""]}]},{"value":["]"]}]}]}]}}],"expression":{"localId":"109","locator":"184:3-185:58","type":"Union","operand":[{"localId":"107","locator":"184:3-184:82","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"184:28-184:81","name":"Emergency Department Evaluation and Management Visit","type":"ValueSetRef"}},{"localId":"108","locator":"185:11-185:58","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"185:36-185:57","name":"Detoxification Visit","type":"ValueSetRef"}}]}},{"localId":"152","locator":"116:1-136:5","name":"History of SUD Diagnosis or Treatment","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"152","s":[{"value":["","define ","\"History of SUD Diagnosis or Treatment\"",":\n  "]},{"r":"151","s":[{"r":"135","s":[{"r":"105","s":[{"value":["( "]},{"r":"105","s":[{"s":[{"r":"90","s":[{"r":"89","s":[{"value":["( "]},{"r":"89","s":[{"r":"87","s":[{"r":"85","s":[{"r":"83","s":[{"value":["[","\"Intervention, Performed\"",": "]},{"s":[{"value":["\"Substance Use Disorder Treatment\""]}]},{"value":["]"]}]},{"value":["\n      union "]},{"r":"84","s":[{"value":["[","\"Intervention, Performed\"",": "]},{"s":[{"value":["\"Psych Visit Psychotherapy\""]}]},{"value":["]"]}]}]},{"value":["\n      union "]},{"r":"86","s":[{"value":["[","\"Procedure, Performed\"",": "]},{"s":[{"value":["\"Substance Use Disorder Long Acting Medication Administration\""]}]},{"value":["]"]}]}]},{"value":["\n      union "]},{"r":"88","s":[{"value":["[","\"Procedure, Performed\"",": "]},{"s":[{"value":["\"Substance Use Disorder Short Acting Medication Administration\""]}]},{"value":["]"]}]}]},{"value":[" )"]}]},{"value":[" ","Interventions"]}]}]},{"value":["\n      "]},{"r":"104","s":[{"value":["with "]},{"r":"92","s":[{"r":"91","s":[{"s":[{"value":["\"First SUD Episode During Measurement Period\""]}]}]},{"value":[" ","FirstSUDEpisode"]}]},{"value":["\n        such that "]},{"r":"103","s":[{"r":"98","s":[{"r":"93","s":[{"value":["Global"]}]},{"value":["."]},{"r":"98","s":[{"value":["\"NormalizeInterval\""," ( "]},{"r":"95","s":[{"r":"94","s":[{"value":["Interventions"]}]},{"value":["."]},{"r":"95","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"97","s":[{"r":"96","s":[{"value":["Interventions"]}]},{"value":["."]},{"r":"97","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]},{"value":[" "]},{"r":"103","s":[{"value":["starts "]},{"r":"102","s":[{"value":["60 ","days"]}]},{"value":[" or less before day of"]}]},{"value":[" "]},{"r":"101","s":[{"value":["start of "]},{"r":"100","s":[{"r":"99","s":[{"value":["FirstSUDEpisode"]}]},{"value":["."]},{"r":"100","s":[{"value":["relevantPeriod"]}]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["\n    union "]},{"r":"134","s":[{"value":["( "]},{"r":"134","s":[{"s":[{"r":"123","s":[{"r":"122","s":[{"value":["( "]},{"r":"122","s":[{"s":[{"r":"113","s":[{"r":"112","s":[{"value":["( "]},{"r":"112","s":[{"r":"106","s":[{"value":["\"Qualifying Encounters\""]}]},{"value":["\n        except "]},{"r":"111","s":[{"value":["\"Emergency Department or Detoxification Visit\""]}]}]},{"value":[" )"]}]},{"value":[" ","QualifyingEncounter"]}]}]},{"value":["\n        "]},{"r":"121","s":[{"value":["where "]},{"r":"121","s":[{"value":["( "]},{"r":"121","s":[{"value":["exists "]},{"r":"120","s":[{"s":[{"r":"115","s":[{"r":"114","s":[{"s":[{"value":["QualifyingEncounter",".","diagnoses"]}]}]},{"value":[" ","Diagnosis"]}]}]},{"value":["\n            "]},{"r":"119","s":[{"value":["where "]},{"r":"119","s":[{"r":"117","s":[{"r":"116","s":[{"value":["Diagnosis"]}]},{"value":["."]},{"r":"117","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"118","s":[{"value":["\"Substance Use Disorder\""]}]}]}]}]}]},{"value":["\n        )"]}]}]}]},{"value":[" )"]}]},{"value":[" ","EncounterWithDiagnosis"]}]}]},{"value":["\n        "]},{"r":"133","s":[{"value":["with "]},{"r":"125","s":[{"r":"124","s":[{"s":[{"value":["\"First SUD Episode During Measurement Period\""]}]}]},{"value":[" ","FirstSUDEpisode"]}]},{"value":["\n          such that "]},{"r":"132","s":[{"r":"127","s":[{"r":"126","s":[{"value":["EncounterWithDiagnosis"]}]},{"value":["."]},{"r":"127","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"132","s":[{"value":["starts "]},{"r":"131","s":[{"value":["60 ","days"]}]},{"value":[" or less before day of"]}]},{"value":[" "]},{"r":"130","s":[{"value":["start of "]},{"r":"129","s":[{"r":"128","s":[{"value":["FirstSUDEpisode"]}]},{"value":["."]},{"r":"129","s":[{"value":["relevantPeriod"]}]}]}]}]}]}]},{"value":["\n    )"]}]}]},{"value":["\n    union "]},{"r":"150","s":[{"value":["( "]},{"r":"150","s":[{"s":[{"r":"139","s":[{"r":"138","s":[{"value":["( "]},{"r":"138","s":[{"r":"136","s":[{"value":["[","\"Medication, Order\"",": "]},{"s":[{"value":["\"Substance Use Disorder Long Acting Medication\""]}]},{"value":["]"]}]},{"value":["\n        union "]},{"r":"137","s":[{"value":["[","\"Medication, Order\"",": "]},{"s":[{"value":["\"Substance Use Disorder Short Acting Medication\""]}]},{"value":["]"]}]}]},{"value":[" )"]}]},{"value":[" ","SUDMedication"]}]}]},{"value":["\n        "]},{"r":"149","s":[{"value":["with "]},{"r":"141","s":[{"r":"140","s":[{"s":[{"value":["\"First SUD Episode During Measurement Period\""]}]}]},{"value":[" ","FirstSUDEpisode"]}]},{"value":["\n          such that "]},{"r":"148","s":[{"r":"143","s":[{"r":"142","s":[{"value":["SUDMedication"]}]},{"value":["."]},{"r":"143","s":[{"value":["authorDatetime"]}]}]},{"value":[" "]},{"r":"148","s":[{"r":"147","s":[{"value":["60 ","days"]}]},{"value":[" or less before day of"]}]},{"value":[" "]},{"r":"146","s":[{"value":["start of "]},{"r":"145","s":[{"r":"144","s":[{"value":["FirstSUDEpisode"]}]},{"value":["."]},{"r":"145","s":[{"value":["relevantPeriod"]}]}]}]}]}]}]},{"value":["\n    )"]}]}]}]}}],"expression":{"localId":"151","locator":"117:3-136:5","type":"Union","operand":[{"type":"As","operand":{"localId":"135","locator":"117:3-131:5","type":"Union","operand":[{"type":"As","operand":{"localId":"105","locator":"117:3-123:3","type":"Query","source":[{"localId":"90","locator":"117:5-120:117","alias":"Interventions","expression":{"localId":"89","locator":"117:5-120:103","type":"Union","operand":[{"type":"As","operand":{"localId":"87","locator":"117:7-119:100","type":"Union","operand":[{"type":"As","operand":{"localId":"85","locator":"117:7-118:68","type":"Union","operand":[{"localId":"83","locator":"117:7-117:69","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveInterventionPerformed","templateId":"PositiveInterventionPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"117:35-117:68","name":"Substance Use Disorder Treatment","type":"ValueSetRef"}},{"localId":"84","locator":"118:13-118:68","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveInterventionPerformed","templateId":"PositiveInterventionPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"118:41-118:67","name":"Psych Visit Psychotherapy","type":"ValueSetRef"}}]},"asTypeSpecifier":{"type":"ListTypeSpecifier","elementType":{"type":"ChoiceTypeSpecifier","choice":[{"name":"{urn:healthit-gov:qdm:v5_6}PositiveInterventionPerformed","type":"NamedTypeSpecifier"},{"name":"{urn:healthit-gov:qdm:v5_6}PositiveProcedurePerformed","type":"NamedTypeSpecifier"}]}}},{"type":"As","operand":{"localId":"86","locator":"119:13-119:100","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveProcedurePerformed","templateId":"PositiveProcedurePerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"119:38-119:99","name":"Substance Use Disorder Long Acting Medication Administration","type":"ValueSetRef"}},"asTypeSpecifier":{"type":"ListTypeSpecifier","elementType":{"type":"ChoiceTypeSpecifier","choice":[{"name":"{urn:healthit-gov:qdm:v5_6}PositiveInterventionPerformed","type":"NamedTypeSpecifier"},{"name":"{urn:healthit-gov:qdm:v5_6}PositiveProcedurePerformed","type":"NamedTypeSpecifier"}]}}}]},"asTypeSpecifier":{"type":"ListTypeSpecifier","elementType":{"type":"ChoiceTypeSpecifier","choice":[{"name":"{urn:healthit-gov:qdm:v5_6}PositiveInterventionPerformed","type":"NamedTypeSpecifier"},{"name":"{urn:healthit-gov:qdm:v5_6}PositiveProcedurePerformed","type":"NamedTypeSpecifier"}]}}},{"type":"As","operand":{"localId":"88","locator":"120:13-120:101","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveProcedurePerformed","templateId":"PositiveProcedurePerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"120:38-120:100","name":"Substance Use Disorder Short Acting Medication Administration","type":"ValueSetRef"}},"asTypeSpecifier":{"type":"ListTypeSpecifier","elementType":{"type":"ChoiceTypeSpecifier","choice":[{"name":"{urn:healthit-gov:qdm:v5_6}PositiveInterventionPerformed","type":"NamedTypeSpecifier"},{"name":"{urn:healthit-gov:qdm:v5_6}PositiveProcedurePerformed","type":"NamedTypeSpecifier"}]}}}]}}],"relationship":[{"localId":"104","locator":"121:7-122:186","alias":"FirstSUDEpisode","type":"With","expression":{"localId":"91","locator":"121:12-121:56","name":"First SUD Episode During Measurement Period","type":"ExpressionRef"},"suchThat":{"localId":"103","locator":"122:19-122:186","type":"And","operand":[{"locator":"122:118-122:132","precision":"Day","type":"In","operand":[{"locator":"122:111-122:116","type":"Start","operand":{"localId":"98","locator":"122:19-122:109","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"95","locator":"122:48-122:77","path":"relevantDatetime","scope":"Interventions","type":"Property"},{"localId":"97","locator":"122:80-122:107","path":"relevantPeriod","scope":"Interventions","type":"Property"}]}},{"locator":"122:118-122:132","lowClosed":true,"highClosed":false,"type":"Interval","low":{"locator":"122:148-122:186","type":"Subtract","operand":[{"localId":"101","locator":"122:148-122:186","type":"Start","operand":{"localId":"100","locator":"122:157-122:186","path":"relevantPeriod","scope":"FirstSUDEpisode","type":"Property"}},{"localId":"102","locator":"122:118-122:124","value":60,"unit":"days","type":"Quantity"}]},"high":{"localId":"101","locator":"122:148-122:186","type":"Start","operand":{"localId":"100","locator":"122:157-122:186","path":"relevantPeriod","scope":"FirstSUDEpisode","type":"Property"}}}]},{"locator":"122:118-122:132","type":"Not","operand":{"locator":"122:118-122:132","type":"IsNull","operand":{"localId":"101","locator":"122:148-122:186","type":"Start","operand":{"localId":"100","locator":"122:157-122:186","path":"relevantPeriod","scope":"FirstSUDEpisode","type":"Property"}}}}]}}]},"asTypeSpecifier":{"type":"ListTypeSpecifier","elementType":{"type":"ChoiceTypeSpecifier","choice":[{"name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"},{"name":"{urn:healthit-gov:qdm:v5_6}PositiveInterventionPerformed","type":"NamedTypeSpecifier"},{"name":"{urn:healthit-gov:qdm:v5_6}PositiveProcedurePerformed","type":"NamedTypeSpecifier"}]}}},{"type":"As","operand":{"localId":"134","locator":"124:11-131:5","type":"Query","source":[{"localId":"123","locator":"124:13-128:34","alias":"EncounterWithDiagnosis","expression":{"localId":"122","locator":"124:13-128:11","type":"Query","source":[{"localId":"113","locator":"124:15-125:83","alias":"QualifyingEncounter","expression":{"localId":"112","locator":"124:15-125:63","type":"Except","operand":[{"localId":"106","locator":"124:17-124:39","name":"Qualifying Encounters","type":"ExpressionRef"},{"localId":"111","locator":"125:16-125:61","name":"Emergency Department or Detoxification Visit","type":"ExpressionRef"}]}}],"relationship":[],"where":{"localId":"121","locator":"126:9-128:9","type":"Exists","operand":{"localId":"120","locator":"126:24-127:60","type":"Query","source":[{"localId":"115","locator":"126:24-126:62","alias":"Diagnosis","expression":{"localId":"114","locator":"126:24-126:52","path":"diagnoses","scope":"QualifyingEncounter","type":"Property"}}],"relationship":[],"where":{"localId":"119","locator":"127:13-127:60","type":"InValueSet","code":{"localId":"117","locator":"127:19-127:32","path":"code","scope":"Diagnosis","type":"Property"},"valueset":{"localId":"118","locator":"127:37-127:60","name":"Substance Use Disorder","type":"ValueSetRef"}}}}}}],"relationship":[{"localId":"133","locator":"129:9-130:134","alias":"FirstSUDEpisode","type":"With","expression":{"localId":"124","locator":"129:14-129:58","name":"First SUD Episode During Measurement Period","type":"ExpressionRef"},"suchThat":{"localId":"132","locator":"130:21-130:134","type":"And","operand":[{"locator":"130:66-130:80","precision":"Day","type":"In","operand":[{"locator":"130:59-130:64","type":"Start","operand":{"localId":"127","locator":"130:21-130:57","path":"relevantPeriod","scope":"EncounterWithDiagnosis","type":"Property"}},{"locator":"130:66-130:80","lowClosed":true,"highClosed":false,"type":"Interval","low":{"locator":"130:96-130:134","type":"Subtract","operand":[{"localId":"130","locator":"130:96-130:134","type":"Start","operand":{"localId":"129","locator":"130:105-130:134","path":"relevantPeriod","scope":"FirstSUDEpisode","type":"Property"}},{"localId":"131","locator":"130:66-130:72","value":60,"unit":"days","type":"Quantity"}]},"high":{"localId":"130","locator":"130:96-130:134","type":"Start","operand":{"localId":"129","locator":"130:105-130:134","path":"relevantPeriod","scope":"FirstSUDEpisode","type":"Property"}}}]},{"locator":"130:66-130:80","type":"Not","operand":{"locator":"130:66-130:80","type":"IsNull","operand":{"localId":"130","locator":"130:96-130:134","type":"Start","operand":{"localId":"129","locator":"130:105-130:134","path":"relevantPeriod","scope":"FirstSUDEpisode","type":"Property"}}}}]}}]},"asTypeSpecifier":{"type":"ListTypeSpecifier","elementType":{"type":"ChoiceTypeSpecifier","choice":[{"name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"},{"name":"{urn:healthit-gov:qdm:v5_6}PositiveInterventionPerformed","type":"NamedTypeSpecifier"},{"name":"{urn:healthit-gov:qdm:v5_6}PositiveProcedurePerformed","type":"NamedTypeSpecifier"}]}}}]},"asTypeSpecifier":{"type":"ListTypeSpecifier","elementType":{"type":"ChoiceTypeSpecifier","choice":[{"name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"},{"name":"{urn:healthit-gov:qdm:v5_6}PositiveInterventionPerformed","type":"NamedTypeSpecifier"},{"name":"{urn:healthit-gov:qdm:v5_6}PositiveProcedurePerformed","type":"NamedTypeSpecifier"},{"name":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationOrder","type":"NamedTypeSpecifier"}]}}},{"type":"As","operand":{"localId":"150","locator":"132:11-136:5","type":"Query","source":[{"localId":"139","locator":"132:13-133:101","alias":"SUDMedication","expression":{"localId":"138","locator":"132:13-133:87","type":"Union","operand":[{"localId":"136","locator":"132:15-132:84","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationOrder","templateId":"PositiveMedicationOrder","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"132:37-132:83","name":"Substance Use Disorder Long Acting Medication","type":"ValueSetRef"}},{"localId":"137","locator":"133:15-133:85","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationOrder","templateId":"PositiveMedicationOrder","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"133:37-133:84","name":"Substance Use Disorder Short Acting Medication","type":"ValueSetRef"}}]}}],"relationship":[{"localId":"149","locator":"134:9-135:118","alias":"FirstSUDEpisode","type":"With","expression":{"localId":"140","locator":"134:14-134:58","name":"First SUD Episode During Measurement Period","type":"ExpressionRef"},"suchThat":{"localId":"148","locator":"135:21-135:118","type":"And","operand":[{"locator":"135:50-135:64","precision":"Day","type":"In","operand":[{"localId":"143","locator":"135:21-135:48","path":"authorDatetime","scope":"SUDMedication","type":"Property"},{"locator":"135:50-135:64","lowClosed":true,"highClosed":false,"type":"Interval","low":{"locator":"135:80-135:118","type":"Subtract","operand":[{"localId":"146","locator":"135:80-135:118","type":"Start","operand":{"localId":"145","locator":"135:89-135:118","path":"relevantPeriod","scope":"FirstSUDEpisode","type":"Property"}},{"localId":"147","locator":"135:50-135:56","value":60,"unit":"days","type":"Quantity"}]},"high":{"localId":"146","locator":"135:80-135:118","type":"Start","operand":{"localId":"145","locator":"135:89-135:118","path":"relevantPeriod","scope":"FirstSUDEpisode","type":"Property"}}}]},{"locator":"135:50-135:64","type":"Not","operand":{"locator":"135:50-135:64","type":"IsNull","operand":{"localId":"146","locator":"135:80-135:118","type":"Start","operand":{"localId":"145","locator":"135:89-135:118","path":"relevantPeriod","scope":"FirstSUDEpisode","type":"Property"}}}}]}}]},"asTypeSpecifier":{"type":"ListTypeSpecifier","elementType":{"type":"ChoiceTypeSpecifier","choice":[{"name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"},{"name":"{urn:healthit-gov:qdm:v5_6}PositiveInterventionPerformed","type":"NamedTypeSpecifier"},{"name":"{urn:healthit-gov:qdm:v5_6}PositiveProcedurePerformed","type":"NamedTypeSpecifier"},{"name":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationOrder","type":"NamedTypeSpecifier"}]}}}]}},{"localId":"157","locator":"33:1-36:58","name":"Initial Population","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"157","s":[{"value":["","define ","\"Initial Population\"",":\n  "]},{"r":"156","s":[{"r":"82","s":[{"r":"32","s":[{"r":"30","s":[{"value":["AgeInYearsAt","("]},{"r":"29","s":[{"value":["date from "]},{"r":"28","s":[{"value":["start of "]},{"r":"27","s":[{"value":["\"Measurement Period\""]}]}]}]},{"value":[")"]}]},{"r":"31","value":["\u003e="," ","13"]}]},{"value":["\n    and "]},{"r":"81","s":[{"r":"80","s":[{"value":["\"First SUD Episode During Measurement Period\""]}]},{"value":[" is not null"]}]}]},{"value":["\n    and "]},{"r":"155","s":[{"value":["not "]},{"r":"154","s":[{"value":["exists "]},{"r":"153","s":[{"value":["\"History of SUD Diagnosis or Treatment\""]}]}]}]}]}]}}],"expression":{"localId":"156","locator":"34:3-36:58","type":"And","operand":[{"localId":"82","locator":"34:3-35:65","type":"And","operand":[{"localId":"32","locator":"34:3-34:60","type":"GreaterOrEqual","operand":[{"localId":"30","locator":"34:3-34:55","precision":"Year","type":"CalculateAgeAt","operand":[{"type":"ToDate","operand":{"path":"birthDatetime","type":"Property","source":{"name":"Patient","type":"ExpressionRef"}}},{"localId":"29","locator":"34:16-34:54","type":"DateFrom","operand":{"localId":"28","locator":"34:26-34:54","type":"Start","operand":{"localId":"27","locator":"34:35-34:54","name":"Measurement Period","type":"ParameterRef"}}}]},{"localId":"31","locator":"34:59-34:60","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"13","type":"Literal"}]},{"localId":"81","locator":"35:9-35:65","type":"Not","operand":{"locator":"35:9-35:65","type":"IsNull","operand":{"localId":"80","locator":"35:9-35:53","name":"First SUD Episode During Measurement Period","type":"ExpressionRef"}}}]},{"localId":"155","locator":"36:9-36:58","type":"Not","operand":{"localId":"154","locator":"36:13-36:58","type":"Exists","operand":{"localId":"153","locator":"36:20-36:58","name":"History of SUD Diagnosis or Treatment","type":"ExpressionRef"}}}]}},{"localId":"159","locator":"48:1-49:22","name":"Denominator","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"159","s":[{"value":["","define ","\"Denominator\"",":\n  "]},{"r":"158","s":[{"value":["\"Initial Population\""]}]}]}}],"expression":{"localId":"158","locator":"49:3-49:22","name":"Initial Population","type":"ExpressionRef"}},{"localId":"162","locator":"51:1-52:32","name":"Denominator Exclusions","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"162","s":[{"value":["","define ","\"Denominator Exclusions\"",":\n  "]},{"r":"161","s":[{"r":"160","s":[{"value":["Hospice"]}]},{"value":["."]},{"r":"161","s":[{"value":["\"Has Hospice Services\""]}]}]}]}}],"expression":{"localId":"161","locator":"52:3-52:32","name":"Has Hospice Services","libraryName":"Hospice","type":"ExpressionRef"}},{"localId":"180","locator":"58:1-65:5","name":"Psychosocial Visit","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"180","s":[{"value":["","define ","\"Psychosocial Visit\"",":\n  "]},{"r":"179","s":[{"r":"165","s":[{"r":"163","s":[{"value":["[","\"Intervention, Performed\"",": "]},{"s":[{"value":["\"Substance Use Disorder Treatment\""]}]},{"value":["]"]}]},{"value":["\n    union "]},{"r":"164","s":[{"value":["[","\"Intervention, Performed\"",": "]},{"s":[{"value":["\"Psych Visit Psychotherapy\""]}]},{"value":["]"]}]}]},{"value":["\n    union "]},{"r":"178","s":[{"value":["( "]},{"r":"178","s":[{"s":[{"r":"169","s":[{"r":"168","s":[{"value":["( "]},{"r":"168","s":[{"r":"166","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Telephone Visits\""]}]},{"value":["]"]}]},{"value":["\n        union "]},{"r":"167","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Online Assessments\""]}]},{"value":["]"]}]}]},{"value":[" )"]}]},{"value":[" ","TelehealthEncounter"]}]}]},{"value":["\n        "]},{"r":"177","s":[{"value":["where "]},{"r":"177","s":[{"value":["exists "]},{"r":"176","s":[{"s":[{"r":"171","s":[{"r":"170","s":[{"s":[{"value":["TelehealthEncounter",".","diagnoses"]}]}]},{"value":[" ","Diagnosis"]}]}]},{"value":["\n          "]},{"r":"175","s":[{"value":["where "]},{"r":"175","s":[{"r":"173","s":[{"r":"172","s":[{"value":["Diagnosis"]}]},{"value":["."]},{"r":"173","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"174","s":[{"value":["\"Substance Use Disorder\""]}]}]}]}]}]}]}]},{"value":["\n    )"]}]}]}]}}],"expression":{"localId":"179","locator":"59:3-65:5","type":"Union","operand":[{"type":"As","operand":{"localId":"165","locator":"59:3-60:66","type":"Union","operand":[{"localId":"163","locator":"59:3-59:65","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveInterventionPerformed","templateId":"PositiveInterventionPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"59:31-59:64","name":"Substance Use Disorder Treatment","type":"ValueSetRef"}},{"localId":"164","locator":"60:11-60:66","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveInterventionPerformed","templateId":"PositiveInterventionPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"60:39-60:65","name":"Psych Visit Psychotherapy","type":"ValueSetRef"}}]},"asTypeSpecifier":{"type":"ListTypeSpecifier","elementType":{"type":"ChoiceTypeSpecifier","choice":[{"name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"},{"name":"{urn:healthit-gov:qdm:v5_6}PositiveInterventionPerformed","type":"NamedTypeSpecifier"}]}}},{"type":"As","operand":{"localId":"178","locator":"61:11-65:5","type":"Query","source":[{"localId":"169","locator":"61:13-62:82","alias":"TelehealthEncounter","expression":{"localId":"168","locator":"61:13-62:62","type":"Union","operand":[{"localId":"166","locator":"61:15-61:58","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"61:40-61:57","name":"Telephone Visits","type":"ValueSetRef"}},{"localId":"167","locator":"62:15-62:60","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"62:40-62:59","name":"Online Assessments","type":"ValueSetRef"}}]}}],"relationship":[],"where":{"localId":"177","locator":"63:9-64:58","type":"Exists","operand":{"localId":"176","locator":"63:22-64:58","type":"Query","source":[{"localId":"171","locator":"63:22-63:60","alias":"Diagnosis","expression":{"localId":"170","locator":"63:22-63:50","path":"diagnoses","scope":"TelehealthEncounter","type":"Property"}}],"relationship":[],"where":{"localId":"175","locator":"64:11-64:58","type":"InValueSet","code":{"localId":"173","locator":"64:17-64:30","path":"code","scope":"Diagnosis","type":"Property"},"valueset":{"localId":"174","locator":"64:35-64:58","name":"Substance Use Disorder","type":"ValueSetRef"}}}}},"asTypeSpecifier":{"type":"ListTypeSpecifier","elementType":{"type":"ChoiceTypeSpecifier","choice":[{"name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"},{"name":"{urn:healthit-gov:qdm:v5_6}PositiveInterventionPerformed","type":"NamedTypeSpecifier"}]}}}]}},{"localId":"217","locator":"138:1-144:28","name":"Treatment Initiation With Non Medication Intervention Dates","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"217","s":[{"value":["","define ","\"Treatment Initiation With Non Medication Intervention Dates\"",":\n  "]},{"r":"216","s":[{"s":[{"r":"182","s":[{"r":"181","s":[{"s":[{"value":["\"Psychosocial Visit\""]}]}]},{"value":[" ","PsychosocialVisit"]}]}]},{"value":["\n    "]},{"s":[{"value":["let "]},{"r":"191","s":[{"value":["treatmentDate",": "]},{"r":"190","s":[{"value":["date from "]},{"r":"189","s":[{"value":["start of "]},{"r":"188","s":[{"r":"183","s":[{"value":["Global"]}]},{"value":["."]},{"r":"188","s":[{"value":["\"NormalizeInterval\""," ( "]},{"r":"185","s":[{"r":"184","s":[{"value":["PsychosocialVisit"]}]},{"value":["."]},{"r":"185","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"187","s":[{"r":"186","s":[{"value":["PsychosocialVisit"]}]},{"value":["."]},{"r":"187","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]}]}]}]}]},{"value":["\n    "]},{"r":"213","s":[{"value":["with "]},{"r":"193","s":[{"r":"192","s":[{"s":[{"value":["\"First SUD Episode During Measurement Period\""]}]}]},{"value":[" ","FirstSUDEpisode"]}]},{"value":["\n      such that "]},{"r":"212","s":[{"r":"206","s":[{"r":"194","s":[{"value":["treatmentDate"]}]},{"r":"206","value":[" ","during"," "]},{"r":"205","s":[{"value":["Interval["]},{"r":"198","s":[{"value":["date from "]},{"r":"197","s":[{"value":["start of "]},{"r":"196","s":[{"r":"195","s":[{"value":["FirstSUDEpisode"]}]},{"value":["."]},{"r":"196","s":[{"value":["relevantPeriod"]}]}]}]}]},{"value":[", "]},{"r":"204","s":[{"r":"202","s":[{"value":["date from "]},{"r":"201","s":[{"value":["start of "]},{"r":"200","s":[{"r":"199","s":[{"value":["FirstSUDEpisode"]}]},{"value":["."]},{"r":"200","s":[{"value":["relevantPeriod"]}]}]}]}]},{"value":[" + "]},{"r":"203","s":[{"value":["14 ","days"]}]}]},{"value":[" )"]}]}]},{"value":["\n        and "]},{"r":"211","s":[{"r":"208","s":[{"r":"207","s":[{"value":["PsychosocialVisit"]}]},{"value":["."]},{"r":"208","s":[{"value":["id"]}]}]},{"value":[" ","!~"," "]},{"r":"210","s":[{"r":"209","s":[{"value":["FirstSUDEpisode"]}]},{"value":["."]},{"r":"210","s":[{"value":["id"]}]}]}]}]}]},{"value":["\n    "]},{"r":"215","s":[{"value":["return all "]},{"r":"214","s":[{"value":["treatmentDate"]}]}]}]}]}}],"expression":{"localId":"216","locator":"139:3-144:28","type":"Query","source":[{"localId":"182","locator":"139:3-139:40","alias":"PsychosocialVisit","expression":{"localId":"181","locator":"139:3-139:22","name":"Psychosocial Visit","type":"ExpressionRef"}}],"let":[{"localId":"191","locator":"140:9-140:141","identifier":"treatmentDate","expression":{"localId":"190","locator":"140:24-140:141","type":"DateFrom","operand":{"localId":"189","locator":"140:34-140:141","type":"Start","operand":{"localId":"188","locator":"140:43-140:141","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"185","locator":"140:72-140:105","path":"relevantDatetime","scope":"PsychosocialVisit","type":"Property"},{"localId":"187","locator":"140:108-140:139","path":"relevantPeriod","scope":"PsychosocialVisit","type":"Property"}]}}}}],"relationship":[{"localId":"213","locator":"141:5-143:54","alias":"FirstSUDEpisode","type":"With","expression":{"localId":"192","locator":"141:10-141:54","name":"First SUD Episode During Measurement Period","type":"ExpressionRef"},"suchThat":{"localId":"212","locator":"142:17-143:54","type":"And","operand":[{"localId":"206","locator":"142:17-142:158","type":"In","operand":[{"localId":"194","locator":"142:17-142:29","name":"treatmentDate","type":"QueryLetRef"},{"localId":"205","locator":"142:38-142:158","lowClosed":true,"highClosed":false,"type":"Interval","low":{"localId":"198","locator":"142:47-142:95","type":"DateFrom","operand":{"localId":"197","locator":"142:57-142:95","type":"Start","operand":{"localId":"196","locator":"142:66-142:95","path":"relevantPeriod","scope":"FirstSUDEpisode","type":"Property"}}},"high":{"localId":"204","locator":"142:98-142:156","type":"Add","operand":[{"localId":"202","locator":"142:98-142:146","type":"DateFrom","operand":{"localId":"201","locator":"142:108-142:146","type":"Start","operand":{"localId":"200","locator":"142:117-142:146","path":"relevantPeriod","scope":"FirstSUDEpisode","type":"Property"}}},{"localId":"203","locator":"142:150-142:156","value":14,"unit":"days","type":"Quantity"}]}}]},{"localId":"211","locator":"143:13-143:54","type":"Not","operand":{"locator":"143:13-143:54","type":"Equivalent","operand":[{"localId":"208","locator":"143:13-143:32","path":"id","scope":"PsychosocialVisit","type":"Property"},{"localId":"210","locator":"143:37-143:54","path":"id","scope":"FirstSUDEpisode","type":"Property"}]}}]}}],"return":{"localId":"215","locator":"144:5-144:28","distinct":false,"expression":{"localId":"214","locator":"144:16-144:28","name":"treatmentDate","type":"QueryLetRef"}}}},{"localId":"280","locator":"85:1-99:5","name":"Treatment Initiation With Medication Order Dates","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"280","s":[{"value":["","define ","\"Treatment Initiation With Medication Order Dates\"",":\n  "]},{"r":"279","s":[{"r":"246","s":[{"value":["( "]},{"r":"246","s":[{"s":[{"r":"223","s":[{"r":"222","s":[{"value":["( "]},{"r":"222","s":[{"r":"220","s":[{"value":["[","\"Medication, Order\"",": "]},{"s":[{"value":["\"Substance Use Disorder Short Acting Medication\""]}]},{"value":["]"]}]},{"value":["\n      union "]},{"r":"221","s":[{"value":["[","\"Medication, Order\"",": "]},{"s":[{"value":["\"Substance Use Disorder Long Acting Medication\""]}]},{"value":["]"]}]}]},{"value":[" )"]}]},{"value":[" ","SUDMedication"]}]}]},{"value":["\n      "]},{"s":[{"value":["let "]},{"r":"227","s":[{"value":["treatmentDate",": "]},{"r":"226","s":[{"value":["date from "]},{"r":"225","s":[{"r":"224","s":[{"value":["SUDMedication"]}]},{"value":["."]},{"r":"225","s":[{"value":["authorDatetime"]}]}]}]}]}]},{"value":["\n      "]},{"r":"243","s":[{"value":["with "]},{"r":"229","s":[{"r":"228","s":[{"s":[{"value":["\"First SUD Episode During Measurement Period\""]}]}]},{"value":[" ","FirstSUDEpisode"]}]},{"value":["\n        such that "]},{"r":"242","s":[{"r":"230","s":[{"value":["treatmentDate"]}]},{"r":"242","value":[" ","during"," "]},{"r":"241","s":[{"value":["Interval["]},{"r":"234","s":[{"value":["date from "]},{"r":"233","s":[{"value":["start of "]},{"r":"232","s":[{"r":"231","s":[{"value":["FirstSUDEpisode"]}]},{"value":["."]},{"r":"232","s":[{"value":["relevantPeriod"]}]}]}]}]},{"value":[", "]},{"r":"240","s":[{"r":"238","s":[{"value":["date from "]},{"r":"237","s":[{"value":["start of "]},{"r":"236","s":[{"r":"235","s":[{"value":["FirstSUDEpisode"]}]},{"value":["."]},{"r":"236","s":[{"value":["relevantPeriod"]}]}]}]}]},{"value":[" + "]},{"r":"239","s":[{"value":["14 ","days"]}]}]},{"value":[" )"]}]}]}]},{"value":["\n      "]},{"r":"245","s":[{"value":["return all "]},{"r":"244","s":[{"value":["treatmentDate"]}]}]}]},{"value":["\n  )"]}]},{"value":["\n    union "]},{"r":"278","s":[{"value":["( "]},{"r":"278","s":[{"s":[{"r":"250","s":[{"r":"249","s":[{"value":["( "]},{"r":"249","s":[{"r":"247","s":[{"value":["[","\"Procedure, Performed\"",": "]},{"s":[{"value":["\"Substance Use Disorder Short Acting Medication Administration\""]}]},{"value":["]"]}]},{"value":["\n        union "]},{"r":"248","s":[{"value":["[","\"Procedure, Performed\"",": "]},{"s":[{"value":["\"Substance Use Disorder Long Acting Medication Administration\""]}]},{"value":["]"]}]}]},{"value":[" )"]}]},{"value":[" ","SUDMedAdministration"]}]}]},{"value":["\n        "]},{"s":[{"value":["let "]},{"r":"259","s":[{"value":["treatmentDate",": "]},{"r":"258","s":[{"value":["date from "]},{"r":"257","s":[{"value":["start of "]},{"r":"256","s":[{"r":"251","s":[{"value":["Global"]}]},{"value":["."]},{"r":"256","s":[{"value":["\"NormalizeInterval\""," ( "]},{"r":"253","s":[{"r":"252","s":[{"value":["SUDMedAdministration"]}]},{"value":["."]},{"r":"253","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"255","s":[{"r":"254","s":[{"value":["SUDMedAdministration"]}]},{"value":["."]},{"r":"255","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]}]}]}]}]},{"value":["\n        "]},{"r":"275","s":[{"value":["with "]},{"r":"261","s":[{"r":"260","s":[{"s":[{"value":["\"First SUD Episode During Measurement Period\""]}]}]},{"value":[" ","FirstSUDEpisode"]}]},{"value":["\n          such that "]},{"r":"274","s":[{"r":"262","s":[{"value":["treatmentDate"]}]},{"r":"274","value":[" ","during"," "]},{"r":"273","s":[{"value":["Interval["]},{"r":"266","s":[{"value":["date from "]},{"r":"265","s":[{"value":["start of "]},{"r":"264","s":[{"r":"263","s":[{"value":["FirstSUDEpisode"]}]},{"value":["."]},{"r":"264","s":[{"value":["relevantPeriod"]}]}]}]}]},{"value":[", "]},{"r":"272","s":[{"r":"270","s":[{"value":["date from "]},{"r":"269","s":[{"value":["start of "]},{"r":"268","s":[{"r":"267","s":[{"value":["FirstSUDEpisode"]}]},{"value":["."]},{"r":"268","s":[{"value":["relevantPeriod"]}]}]}]}]},{"value":[" + "]},{"r":"271","s":[{"value":["14 ","days"]}]}]},{"value":[" )"]}]}]}]},{"value":["\n        "]},{"r":"277","s":[{"value":["return all "]},{"r":"276","s":[{"value":["treatmentDate"]}]}]}]},{"value":["\n    )"]}]}]}]}}],"expression":{"localId":"279","locator":"86:3-99:5","type":"Union","operand":[{"localId":"246","locator":"86:3-92:3","type":"Query","source":[{"localId":"223","locator":"86:5-87:98","alias":"SUDMedication","expression":{"localId":"222","locator":"86:5-87:84","type":"Union","operand":[{"localId":"220","locator":"86:7-86:77","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationOrder","templateId":"PositiveMedicationOrder","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"86:29-86:76","name":"Substance Use Disorder Short Acting Medication","type":"ValueSetRef"}},{"localId":"221","locator":"87:13-87:82","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationOrder","templateId":"PositiveMedicationOrder","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"87:35-87:81","name":"Substance Use Disorder Long Acting Medication","type":"ValueSetRef"}}]}}],"let":[{"localId":"227","locator":"88:11-88:63","identifier":"treatmentDate","expression":{"localId":"226","locator":"88:26-88:63","type":"DateFrom","operand":{"localId":"225","locator":"88:36-88:63","path":"authorDatetime","scope":"SUDMedication","type":"Property"}}}],"relationship":[{"localId":"243","locator":"89:7-90:160","alias":"FirstSUDEpisode","type":"With","expression":{"localId":"228","locator":"89:12-89:56","name":"First SUD Episode During Measurement Period","type":"ExpressionRef"},"suchThat":{"localId":"242","locator":"90:19-90:160","type":"In","operand":[{"localId":"230","locator":"90:19-90:31","name":"treatmentDate","type":"QueryLetRef"},{"localId":"241","locator":"90:40-90:160","lowClosed":true,"highClosed":false,"type":"Interval","low":{"localId":"234","locator":"90:49-90:97","type":"DateFrom","operand":{"localId":"233","locator":"90:59-90:97","type":"Start","operand":{"localId":"232","locator":"90:68-90:97","path":"relevantPeriod","scope":"FirstSUDEpisode","type":"Property"}}},"high":{"localId":"240","locator":"90:100-90:158","type":"Add","operand":[{"localId":"238","locator":"90:100-90:148","type":"DateFrom","operand":{"localId":"237","locator":"90:110-90:148","type":"Start","operand":{"localId":"236","locator":"90:119-90:148","path":"relevantPeriod","scope":"FirstSUDEpisode","type":"Property"}}},{"localId":"239","locator":"90:152-90:158","value":14,"unit":"days","type":"Quantity"}]}}]}}],"return":{"localId":"245","locator":"91:7-91:30","distinct":false,"expression":{"localId":"244","locator":"91:18-91:30","name":"treatmentDate","type":"QueryLetRef"}}},{"localId":"278","locator":"93:11-99:5","type":"Query","source":[{"localId":"250","locator":"93:13-94:125","alias":"SUDMedAdministration","expression":{"localId":"249","locator":"93:13-94:104","type":"Union","operand":[{"localId":"247","locator":"93:15-93:103","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveProcedurePerformed","templateId":"PositiveProcedurePerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"93:40-93:102","name":"Substance Use Disorder Short Acting Medication Administration","type":"ValueSetRef"}},{"localId":"248","locator":"94:15-94:102","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveProcedurePerformed","templateId":"PositiveProcedurePerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"94:40-94:101","name":"Substance Use Disorder Long Acting Medication Administration","type":"ValueSetRef"}}]}}],"let":[{"localId":"259","locator":"95:13-95:151","identifier":"treatmentDate","expression":{"localId":"258","locator":"95:28-95:151","type":"DateFrom","operand":{"localId":"257","locator":"95:38-95:151","type":"Start","operand":{"localId":"256","locator":"95:47-95:151","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"253","locator":"95:76-95:112","path":"relevantDatetime","scope":"SUDMedAdministration","type":"Property"},{"localId":"255","locator":"95:115-95:149","path":"relevantPeriod","scope":"SUDMedAdministration","type":"Property"}]}}}}],"relationship":[{"localId":"275","locator":"96:9-97:162","alias":"FirstSUDEpisode","type":"With","expression":{"localId":"260","locator":"96:14-96:58","name":"First SUD Episode During Measurement Period","type":"ExpressionRef"},"suchThat":{"localId":"274","locator":"97:21-97:162","type":"In","operand":[{"localId":"262","locator":"97:21-97:33","name":"treatmentDate","type":"QueryLetRef"},{"localId":"273","locator":"97:42-97:162","lowClosed":true,"highClosed":false,"type":"Interval","low":{"localId":"266","locator":"97:51-97:99","type":"DateFrom","operand":{"localId":"265","locator":"97:61-97:99","type":"Start","operand":{"localId":"264","locator":"97:70-97:99","path":"relevantPeriod","scope":"FirstSUDEpisode","type":"Property"}}},"high":{"localId":"272","locator":"97:102-97:160","type":"Add","operand":[{"localId":"270","locator":"97:102-97:150","type":"DateFrom","operand":{"localId":"269","locator":"97:112-97:150","type":"Start","operand":{"localId":"268","locator":"97:121-97:150","path":"relevantPeriod","scope":"FirstSUDEpisode","type":"Property"}}},{"localId":"271","locator":"97:154-97:160","value":14,"unit":"days","type":"Quantity"}]}}]}}],"return":{"localId":"277","locator":"98:9-98:32","distinct":false,"expression":{"localId":"276","locator":"98:20-98:32","name":"treatmentDate","type":"QueryLetRef"}}}]}},{"localId":"284","locator":"54:1-56:64","name":"Numerator 1","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"284","s":[{"value":["","define ","\"Numerator 1\"",":\n  "]},{"r":"283","s":[{"r":"219","s":[{"value":["exists "]},{"r":"218","s":[{"value":["\"Treatment Initiation With Non Medication Intervention Dates\""]}]}]},{"value":["\n    or "]},{"r":"282","s":[{"value":["exists "]},{"r":"281","s":[{"value":["\"Treatment Initiation With Medication Order Dates\""]}]}]}]}]}}],"expression":{"localId":"283","locator":"55:3-56:64","type":"Or","operand":[{"localId":"219","locator":"55:3-55:70","type":"Exists","operand":{"localId":"218","locator":"55:10-55:70","name":"Treatment Initiation With Non Medication Intervention Dates","type":"ExpressionRef"}},{"localId":"282","locator":"56:8-56:64","type":"Exists","operand":{"localId":"281","locator":"56:15-56:64","name":"Treatment Initiation With Medication Order Dates","type":"ExpressionRef"}}]}},{"localId":"286","locator":"67:1-68:51","name":"SDE Ethnicity","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"286","s":[{"value":["","define ","\"SDE Ethnicity\"",":\n  "]},{"r":"285","s":[{"value":["[","\"Patient Characteristic Ethnicity\"",": "]},{"s":[{"value":["\"Ethnicity\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"285","locator":"68:3-68:51","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicEthnicity","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"68:40-68:50","name":"Ethnicity","type":"ValueSetRef"}}},{"localId":"288","locator":"70:1-71:43","name":"SDE Payer","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"288","s":[{"value":["","define ","\"SDE Payer\"",":\n  "]},{"r":"287","s":[{"value":["[","\"Patient Characteristic Payer\"",": "]},{"s":[{"value":["\"Payer\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"287","locator":"71:3-71:43","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicPayer","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"71:36-71:42","name":"Payer","type":"ValueSetRef"}}},{"localId":"290","locator":"73:1-74:41","name":"SDE Race","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"290","s":[{"value":["","define ","\"SDE Race\"",":\n  "]},{"r":"289","s":[{"value":["[","\"Patient Characteristic Race\"",": "]},{"s":[{"value":["\"Race\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"289","locator":"74:3-74:41","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicRace","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"74:35-74:40","name":"Race","type":"ValueSetRef"}}},{"localId":"292","locator":"76:1-77:58","name":"SDE Sex","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"292","s":[{"value":["","define ","\"SDE Sex\"",":\n  "]},{"r":"291","s":[{"value":["[","\"Patient Characteristic Sex\"",": "]},{"s":[{"value":["\"ONC Administrative Sex\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"291","locator":"77:3-77:58","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicSex","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"77:34-77:57","name":"ONC Administrative Sex","type":"ValueSetRef"}}},{"localId":"301","locator":"79:1-80:74","name":"Stratification 1","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"301","s":[{"value":["","define ","\"Stratification 1\"",":\n  "]},{"r":"300","s":[{"r":"296","s":[{"value":["AgeInYearsAt","("]},{"r":"295","s":[{"value":["date from "]},{"r":"294","s":[{"value":["start of "]},{"r":"293","s":[{"value":["\"Measurement Period\""]}]}]}]},{"value":[")"]}]},{"value":["in "]},{"r":"299","s":[{"r":"297","value":["Interval[","13",", ","17","]"]}]}]}]}}],"expression":{"localId":"300","locator":"80:3-80:74","type":"In","operand":[{"localId":"296","locator":"80:3-80:55","precision":"Year","type":"CalculateAgeAt","operand":[{"type":"ToDate","operand":{"path":"birthDatetime","type":"Property","source":{"name":"Patient","type":"ExpressionRef"}}},{"localId":"295","locator":"80:16-80:54","type":"DateFrom","operand":{"localId":"294","locator":"80:26-80:54","type":"Start","operand":{"localId":"293","locator":"80:35-80:54","name":"Measurement Period","type":"ParameterRef"}}}]},{"localId":"299","locator":"80:59-80:74","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"297","locator":"80:68-80:69","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"13","type":"Literal"},"high":{"localId":"298","locator":"80:72-80:73","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"17","type":"Literal"}}]}},{"localId":"310","locator":"82:1-83:74","name":"Stratification 2","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"310","s":[{"value":["","define ","\"Stratification 2\"",":\n  "]},{"r":"309","s":[{"r":"305","s":[{"value":["AgeInYearsAt","("]},{"r":"304","s":[{"value":["date from "]},{"r":"303","s":[{"value":["start of "]},{"r":"302","s":[{"value":["\"Measurement Period\""]}]}]}]},{"value":[")"]}]},{"value":["in "]},{"r":"308","s":[{"r":"306","value":["Interval[","18",", ","64","]"]}]}]}]}}],"expression":{"localId":"309","locator":"83:3-83:74","type":"In","operand":[{"localId":"305","locator":"83:3-83:55","precision":"Year","type":"CalculateAgeAt","operand":[{"type":"ToDate","operand":{"path":"birthDatetime","type":"Property","source":{"name":"Patient","type":"ExpressionRef"}}},{"localId":"304","locator":"83:16-83:54","type":"DateFrom","operand":{"localId":"303","locator":"83:26-83:54","type":"Start","operand":{"localId":"302","locator":"83:35-83:54","name":"Measurement Period","type":"ParameterRef"}}}]},{"localId":"308","locator":"83:59-83:74","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"306","locator":"83:68-83:69","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"18","type":"Literal"},"high":{"localId":"307","locator":"83:72-83:73","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"64","type":"Literal"}}]}},{"localId":"348","locator":"101:1-114:3","name":"Has Treatment Engagement With Long Acting Medication","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"348","s":[{"value":["","define ","\"Has Treatment Engagement With Long Acting Medication\"",":\n  "]},{"r":"347","s":[{"value":["exists "]},{"r":"346","s":[{"value":["( "]},{"r":"346","s":[{"r":"325","s":[{"value":["( "]},{"r":"325","s":[{"s":[{"r":"312","s":[{"r":"311","s":[{"r":"311","s":[{"value":["[","\"Medication, Order\"",": "]},{"s":[{"value":["\"Substance Use Disorder Long Acting Medication\""]}]},{"value":["]"]}]}]},{"value":[" ","LongActingMedOrder"]}]}]},{"value":["\n        "]},{"r":"324","s":[{"value":["with "]},{"r":"317","s":[{"r":"316","s":[{"value":["( "]},{"r":"316","s":[{"value":["Min","("]},{"r":"315","s":[{"r":"313","s":[{"value":["\"Treatment Initiation With Non Medication Intervention Dates\""]}]},{"value":["\n            union "]},{"r":"314","s":[{"value":["\"Treatment Initiation With Medication Order Dates\""]}]}]},{"value":["\n        )"]}]},{"value":[")"]}]},{"value":[" ","InitiationTreatmentDate"]}]},{"value":["\n          such that "]},{"r":"323","s":[{"r":"320","s":[{"value":["date from "]},{"r":"319","s":[{"r":"318","s":[{"value":["LongActingMedOrder"]}]},{"value":["."]},{"r":"319","s":[{"value":["authorDatetime"]}]}]}]},{"value":[" "]},{"r":"323","s":[{"r":"322","s":[{"value":["34 ","days"]}]},{"value":[" or less after"]}]},{"value":[" "]},{"r":"321","s":[{"value":["InitiationTreatmentDate"]}]}]}]}]},{"value":["\n    )"]}]},{"value":["\n      union "]},{"r":"345","s":[{"value":["( "]},{"r":"345","s":[{"s":[{"r":"327","s":[{"r":"326","s":[{"r":"326","s":[{"value":["[","\"Procedure, Performed\"",": "]},{"s":[{"value":["\"Substance Use Disorder Long Acting Medication Administration\""]}]},{"value":["]"]}]}]},{"value":[" ","LongActingTreatment"]}]}]},{"value":["\n          "]},{"r":"344","s":[{"value":["with "]},{"r":"332","s":[{"r":"331","s":[{"value":["( "]},{"r":"331","s":[{"value":["Min","("]},{"r":"330","s":[{"r":"328","s":[{"value":["\"Treatment Initiation With Non Medication Intervention Dates\""]}]},{"value":["\n              union "]},{"r":"329","s":[{"value":["\"Treatment Initiation With Medication Order Dates\""]}]}]},{"value":["\n          )"]}]},{"value":[")"]}]},{"value":[" ","InitiationTreatmentDate"]}]},{"value":["\n            such that "]},{"r":"343","s":[{"r":"340","s":[{"value":["date from "]},{"r":"339","s":[{"value":["start of "]},{"r":"338","s":[{"r":"333","s":[{"value":["Global"]}]},{"value":["."]},{"r":"338","s":[{"value":["\"NormalizeInterval\""," ( "]},{"r":"335","s":[{"r":"334","s":[{"value":["LongActingTreatment"]}]},{"value":["."]},{"r":"335","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"337","s":[{"r":"336","s":[{"value":["LongActingTreatment"]}]},{"value":["."]},{"r":"337","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]}]}]},{"value":[" "]},{"r":"343","s":[{"r":"342","s":[{"value":["34 ","days"]}]},{"value":[" or less after"]}]},{"value":[" "]},{"r":"341","s":[{"value":["InitiationTreatmentDate"]}]}]}]}]},{"value":["\n      )"]}]}]},{"value":["\n  )"]}]}]}]}}],"expression":{"localId":"347","locator":"102:3-114:3","type":"Exists","operand":{"localId":"346","locator":"102:10-114:3","type":"Union","operand":[{"type":"As","operand":{"localId":"325","locator":"102:12-107:5","type":"Query","source":[{"localId":"312","locator":"102:14-102:102","alias":"LongActingMedOrder","expression":{"localId":"311","locator":"102:14-102:83","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationOrder","templateId":"PositiveMedicationOrder","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"102:36-102:82","name":"Substance Use Disorder Long Acting Medication","type":"ValueSetRef"}}}],"relationship":[{"localId":"324","locator":"103:9-106:109","alias":"InitiationTreatmentDate","type":"With","expression":{"localId":"316","locator":"103:14-105:10","type":"Min","source":{"localId":"315","locator":"103:20-104:68","type":"Union","operand":[{"localId":"313","locator":"103:20-103:80","name":"Treatment Initiation With Non Medication Intervention Dates","type":"ExpressionRef"},{"localId":"314","locator":"104:19-104:68","name":"Treatment Initiation With Medication Order Dates","type":"ExpressionRef"}]}},"suchThat":{"localId":"323","locator":"106:21-106:109","type":"And","operand":[{"locator":"106:65-106:79","type":"In","operand":[{"localId":"320","locator":"106:21-106:63","type":"DateFrom","operand":{"localId":"319","locator":"106:31-106:63","path":"authorDatetime","scope":"LongActingMedOrder","type":"Property"}},{"locator":"106:65-106:79","lowClosed":false,"highClosed":true,"type":"Interval","low":{"localId":"321","locator":"106:87-106:109","name":"InitiationTreatmentDate","type":"AliasRef"},"high":{"locator":"106:87-106:109","type":"Add","operand":[{"localId":"321","locator":"106:87-106:109","name":"InitiationTreatmentDate","type":"AliasRef"},{"localId":"322","locator":"106:65-106:71","value":34,"unit":"days","type":"Quantity"}]}}]},{"locator":"106:65-106:79","type":"Not","operand":{"locator":"106:65-106:79","type":"IsNull","operand":{"localId":"321","locator":"106:87-106:109","name":"InitiationTreatmentDate","type":"AliasRef"}}}]}}]},"asTypeSpecifier":{"type":"ListTypeSpecifier","elementType":{"type":"ChoiceTypeSpecifier","choice":[{"name":"{urn:healthit-gov:qdm:v5_6}PositiveProcedurePerformed","type":"NamedTypeSpecifier"},{"name":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationOrder","type":"NamedTypeSpecifier"}]}}},{"type":"As","operand":{"localId":"345","locator":"108:13-113:7","type":"Query","source":[{"localId":"327","locator":"108:15-108:122","alias":"LongActingTreatment","expression":{"localId":"326","locator":"108:15-108:102","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveProcedurePerformed","templateId":"PositiveProcedurePerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"108:40-108:101","name":"Substance Use Disorder Long Acting Medication Administration","type":"ValueSetRef"}}}],"relationship":[{"localId":"344","locator":"109:11-112:190","alias":"InitiationTreatmentDate","type":"With","expression":{"localId":"331","locator":"109:16-111:12","type":"Min","source":{"localId":"330","locator":"109:22-110:70","type":"Union","operand":[{"localId":"328","locator":"109:22-109:82","name":"Treatment Initiation With Non Medication Intervention Dates","type":"ExpressionRef"},{"localId":"329","locator":"110:21-110:70","name":"Treatment Initiation With Medication Order Dates","type":"ExpressionRef"}]}},"suchThat":{"localId":"343","locator":"112:23-112:190","type":"And","operand":[{"locator":"112:146-112:160","type":"In","operand":[{"localId":"340","locator":"112:23-112:144","type":"DateFrom","operand":{"localId":"339","locator":"112:33-112:144","type":"Start","operand":{"localId":"338","locator":"112:42-112:144","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"335","locator":"112:71-112:106","path":"relevantDatetime","scope":"LongActingTreatment","type":"Property"},{"localId":"337","locator":"112:109-112:142","path":"relevantPeriod","scope":"LongActingTreatment","type":"Property"}]}}},{"locator":"112:146-112:160","lowClosed":false,"highClosed":true,"type":"Interval","low":{"localId":"341","locator":"112:168-112:190","name":"InitiationTreatmentDate","type":"AliasRef"},"high":{"locator":"112:168-112:190","type":"Add","operand":[{"localId":"341","locator":"112:168-112:190","name":"InitiationTreatmentDate","type":"AliasRef"},{"localId":"342","locator":"112:146-112:152","value":34,"unit":"days","type":"Quantity"}]}}]},{"locator":"112:146-112:160","type":"Not","operand":{"locator":"112:146-112:160","type":"IsNull","operand":{"localId":"341","locator":"112:168-112:190","name":"InitiationTreatmentDate","type":"AliasRef"}}}]}}]},"asTypeSpecifier":{"type":"ListTypeSpecifier","elementType":{"type":"ChoiceTypeSpecifier","choice":[{"name":"{urn:healthit-gov:qdm:v5_6}PositiveProcedurePerformed","type":"NamedTypeSpecifier"},{"name":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationOrder","type":"NamedTypeSpecifier"}]}}}]}}},{"localId":"355","locator":"146:1-147:60","name":"Stratification 3","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"355","s":[{"value":["","define ","\"Stratification 3\"",":\n  "]},{"r":"354","s":[{"r":"352","s":[{"value":["AgeInYearsAt","("]},{"r":"351","s":[{"value":["date from "]},{"r":"350","s":[{"value":["start of "]},{"r":"349","s":[{"value":["\"Measurement Period\""]}]}]}]},{"value":[")"]}]},{"r":"353","value":["\u003e="," ","65"]}]}]}}],"expression":{"localId":"354","locator":"147:3-147:60","type":"GreaterOrEqual","operand":[{"localId":"352","locator":"147:3-147:55","precision":"Year","type":"CalculateAgeAt","operand":[{"type":"ToDate","operand":{"path":"birthDatetime","type":"Property","source":{"name":"Patient","type":"ExpressionRef"}}},{"localId":"351","locator":"147:16-147:54","type":"DateFrom","operand":{"localId":"350","locator":"147:26-147:54","type":"Start","operand":{"localId":"349","locator":"147:35-147:54","name":"Measurement Period","type":"ParameterRef"}}}]},{"localId":"353","locator":"147:59-147:60","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"65","type":"Literal"}]}},{"localId":"401","locator":"149:1-165:7","name":"Has Two or More Treatment Engagements With Short Acting Medication or Non Medication Intervention","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"401","s":[{"value":["","define ","\"Has Two or More Treatment Engagements With Short Acting Medication or Non Medication Intervention\"",":\n  "]},{"r":"400","s":[{"r":"398","s":[{"value":["Count","("]},{"r":"397","s":[{"r":"379","s":[{"value":["("]},{"r":"379","s":[{"s":[{"r":"359","s":[{"r":"358","s":[{"value":["("]},{"r":"358","s":[{"r":"356","s":[{"value":["\"Psychosocial Visit\""]}]},{"value":["\n        union "]},{"r":"357","s":[{"value":["[","\"Procedure, Performed\"",": "]},{"s":[{"value":["\"Substance Use Disorder Short Acting Medication Administration\""]}]},{"value":["]"]}]}]},{"value":[")"]}]},{"value":["ShortActingTreatment"]}]}]},{"value":["\n        "]},{"r":"376","s":[{"value":["with"]},{"r":"364","s":[{"r":"363","s":[{"value":["("]},{"r":"363","s":[{"value":["Min","("]},{"r":"362","s":[{"r":"360","s":[{"value":["\"Treatment Initiation With Non Medication Intervention Dates\""]}]},{"value":["\n            union "]},{"r":"361","s":[{"value":["\"Treatment Initiation With Medication Order Dates\""]}]}]},{"value":["\n        )"]}]},{"value":[")"]}]},{"value":["InitiationTreatmentDate"]}]},{"value":["\n          such that "]},{"r":"375","s":[{"r":"372","s":[{"value":["date from "]},{"r":"371","s":[{"value":["start of "]},{"r":"370","s":[{"r":"365","s":[{"value":["Global"]}]},{"value":["."]},{"r":"370","s":[{"value":["\"NormalizeInterval\"","("]},{"r":"367","s":[{"r":"366","s":[{"value":["ShortActingTreatment"]}]},{"value":["."]},{"r":"367","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"369","s":[{"r":"368","s":[{"value":["ShortActingTreatment"]}]},{"value":["."]},{"r":"369","s":[{"value":["relevantPeriod"]}]}]},{"value":[")"]}]}]}]}]},{"r":"375","s":[{"r":"374","s":[{"value":["34 ","days"]}]},{"value":[" or less after"]}]},{"value":[" "]},{"r":"373","s":[{"value":["InitiationTreatmentDate"]}]}]}]},{"value":["\n        "]},{"r":"378","s":[{"value":["return all "]},{"r":"377","s":[{"value":["ShortActingTreatment"]}]}]}]},{"value":["\n    )"]}]},{"value":["\n      union"]},{"r":"396","s":[{"value":["("]},{"r":"396","s":[{"s":[{"r":"381","s":[{"r":"380","s":[{"r":"380","s":[{"value":["[","\"Medication, Order\"",": "]},{"s":[{"value":["\"Substance Use Disorder Short Acting Medication\""]}]},{"value":["]"]}]}]},{"value":[" ","ShortActingMedOrder"]}]}]},{"value":["\n          "]},{"r":"393","s":[{"value":["with"]},{"r":"386","s":[{"r":"385","s":[{"value":["("]},{"r":"385","s":[{"value":["Min","("]},{"r":"384","s":[{"r":"382","s":[{"value":["\"Treatment Initiation With Non Medication Intervention Dates\""]}]},{"value":["\n              union "]},{"r":"383","s":[{"value":["\"Treatment Initiation With Medication Order Dates\""]}]}]},{"value":["\n          )"]}]},{"value":[")"]}]},{"value":["InitiationTreatmentDate"]}]},{"value":["\n            such that "]},{"r":"392","s":[{"r":"389","s":[{"value":["date from "]},{"r":"388","s":[{"r":"387","s":[{"value":["ShortActingMedOrder"]}]},{"value":["."]},{"r":"388","s":[{"value":["authorDatetime"]}]}]}]},{"value":[" "]},{"r":"392","s":[{"r":"391","s":[{"value":["34 ","days"]}]},{"value":[" or less after"]}]},{"value":[" "]},{"r":"390","s":[{"value":["InitiationTreatmentDate"]}]}]}]},{"value":["\n          "]},{"r":"395","s":[{"value":["return all "]},{"r":"394","s":[{"value":["ShortActingMedOrder"]}]}]}]},{"value":["\n      )"]}]}]},{"value":["\n  )"]}]},{"r":"399","value":["\u003e="," ","2"]}]}]}}],"expression":{"localId":"400","locator":"150:3-165:7","type":"GreaterOrEqual","operand":[{"localId":"398","locator":"150:3-165:3","type":"Count","source":{"localId":"397","locator":"150:9-164:7","type":"Union","operand":[{"type":"As","operand":{"localId":"379","locator":"150:9-157:5","type":"Query","source":[{"localId":"359","locator":"150:10-151:124","alias":"ShortActingTreatment","expression":{"localId":"358","locator":"150:10-151:104","type":"Union","operand":[{"type":"As","operand":{"localId":"356","locator":"150:11-150:30","name":"Psychosocial Visit","type":"ExpressionRef"},"asTypeSpecifier":{"type":"ListTypeSpecifier","elementType":{"type":"ChoiceTypeSpecifier","choice":[{"name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"},{"name":"{urn:healthit-gov:qdm:v5_6}PositiveInterventionPerformed","type":"NamedTypeSpecifier"},{"name":"{urn:healthit-gov:qdm:v5_6}PositiveProcedurePerformed","type":"NamedTypeSpecifier"}]}}},{"type":"As","operand":{"localId":"357","locator":"151:15-151:103","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveProcedurePerformed","templateId":"PositiveProcedurePerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"151:40-151:102","name":"Substance Use Disorder Short Acting Medication Administration","type":"ValueSetRef"}},"asTypeSpecifier":{"type":"ListTypeSpecifier","elementType":{"type":"ChoiceTypeSpecifier","choice":[{"name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"},{"name":"{urn:healthit-gov:qdm:v5_6}PositiveInterventionPerformed","type":"NamedTypeSpecifier"},{"name":"{urn:healthit-gov:qdm:v5_6}PositiveProcedurePerformed","type":"NamedTypeSpecifier"}]}}}]}}],"relationship":[{"localId":"376","locator":"152:9-155:186","alias":"InitiationTreatmentDate","type":"With","expression":{"localId":"363","locator":"152:13-154:10","type":"Min","source":{"localId":"362","locator":"152:18-153:68","type":"Union","operand":[{"localId":"360","locator":"152:18-152:78","name":"Treatment Initiation With Non Medication Intervention Dates","type":"ExpressionRef"},{"localId":"361","locator":"153:19-153:68","name":"Treatment Initiation With Medication Order Dates","type":"ExpressionRef"}]}},"suchThat":{"localId":"375","locator":"155:21-155:186","type":"And","operand":[{"locator":"155:142-155:156","type":"In","operand":[{"localId":"372","locator":"155:21-155:141","type":"DateFrom","operand":{"localId":"371","locator":"155:31-155:141","type":"Start","operand":{"localId":"370","locator":"155:40-155:141","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"367","locator":"155:67-155:103","path":"relevantDatetime","scope":"ShortActingTreatment","type":"Property"},{"localId":"369","locator":"155:106-155:140","path":"relevantPeriod","scope":"ShortActingTreatment","type":"Property"}]}}},{"locator":"155:142-155:156","lowClosed":false,"highClosed":true,"type":"Interval","low":{"localId":"373","locator":"155:164-155:186","name":"InitiationTreatmentDate","type":"AliasRef"},"high":{"locator":"155:164-155:186","type":"Add","operand":[{"localId":"373","locator":"155:164-155:186","name":"InitiationTreatmentDate","type":"AliasRef"},{"localId":"374","locator":"155:142-155:148","value":34,"unit":"days","type":"Quantity"}]}}]},{"locator":"155:142-155:156","type":"Not","operand":{"locator":"155:142-155:156","type":"IsNull","operand":{"localId":"373","locator":"155:164-155:186","name":"InitiationTreatmentDate","type":"AliasRef"}}}]}}],"return":{"localId":"378","locator":"156:9-156:39","distinct":false,"expression":{"localId":"377","locator":"156:20-156:39","name":"ShortActingTreatment","type":"AliasRef"}}},"asTypeSpecifier":{"type":"ListTypeSpecifier","elementType":{"type":"ChoiceTypeSpecifier","choice":[{"name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"},{"name":"{urn:healthit-gov:qdm:v5_6}PositiveInterventionPerformed","type":"NamedTypeSpecifier"},{"name":"{urn:healthit-gov:qdm:v5_6}PositiveProcedurePerformed","type":"NamedTypeSpecifier"},{"name":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationOrder","type":"NamedTypeSpecifier"}]}}},{"type":"As","operand":{"localId":"396","locator":"158:12-164:7","type":"Query","source":[{"localId":"381","locator":"158:13-158:103","alias":"ShortActingMedOrder","expression":{"localId":"380","locator":"158:13-158:83","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationOrder","templateId":"PositiveMedicationOrder","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"158:35-158:82","name":"Substance Use Disorder Short Acting Medication","type":"ValueSetRef"}}}],"relationship":[{"localId":"393","locator":"159:11-162:112","alias":"InitiationTreatmentDate","type":"With","expression":{"localId":"385","locator":"159:15-161:12","type":"Min","source":{"localId":"384","locator":"159:20-160:70","type":"Union","operand":[{"localId":"382","locator":"159:20-159:80","name":"Treatment Initiation With Non Medication Intervention Dates","type":"ExpressionRef"},{"localId":"383","locator":"160:21-160:70","name":"Treatment Initiation With Medication Order Dates","type":"ExpressionRef"}]}},"suchThat":{"localId":"392","locator":"162:23-162:112","type":"And","operand":[{"locator":"162:68-162:82","type":"In","operand":[{"localId":"389","locator":"162:23-162:66","type":"DateFrom","operand":{"localId":"388","locator":"162:33-162:66","path":"authorDatetime","scope":"ShortActingMedOrder","type":"Property"}},{"locator":"162:68-162:82","lowClosed":false,"highClosed":true,"type":"Interval","low":{"localId":"390","locator":"162:90-162:112","name":"InitiationTreatmentDate","type":"AliasRef"},"high":{"locator":"162:90-162:112","type":"Add","operand":[{"localId":"390","locator":"162:90-162:112","name":"InitiationTreatmentDate","type":"AliasRef"},{"localId":"391","locator":"162:68-162:74","value":34,"unit":"days","type":"Quantity"}]}}]},{"locator":"162:68-162:82","type":"Not","operand":{"locator":"162:68-162:82","type":"IsNull","operand":{"localId":"390","locator":"162:90-162:112","name":"InitiationTreatmentDate","type":"AliasRef"}}}]}}],"return":{"localId":"395","locator":"163:11-163:40","distinct":false,"expression":{"localId":"394","locator":"163:22-163:40","name":"ShortActingMedOrder","type":"AliasRef"}}},"asTypeSpecifier":{"type":"ListTypeSpecifier","elementType":{"type":"ChoiceTypeSpecifier","choice":[{"name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"},{"name":"{urn:healthit-gov:qdm:v5_6}PositiveInterventionPerformed","type":"NamedTypeSpecifier"},{"name":"{urn:healthit-gov:qdm:v5_6}PositiveProcedurePerformed","type":"NamedTypeSpecifier"},{"name":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationOrder","type":"NamedTypeSpecifier"}]}}}]}},{"localId":"399","locator":"165:7","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"2","type":"Literal"}]}},{"localId":"405","locator":"167:1-169:106","name":"Numerator 2","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"405","s":[{"value":["","define ","\"Numerator 2\"",":\n  "]},{"r":"404","s":[{"r":"402","s":[{"value":["\"Has Treatment Engagement With Long Acting Medication\""]}]},{"value":["\n    or "]},{"r":"403","s":[{"value":["\"Has Two or More Treatment Engagements With Short Acting Medication or Non Medication Intervention\""]}]}]}]}}],"expression":{"localId":"404","locator":"168:3-169:106","type":"Or","operand":[{"localId":"402","locator":"168:3-168:56","name":"Has Treatment Engagement With Long Acting Medication","type":"ExpressionRef"},{"localId":"403","locator":"169:8-169:106","name":"Has Two or More Treatment Engagements With Short Acting Medication or Non Medication Intervention","type":"ExpressionRef"}]}}]}}},"elm_annotations":{"statements":[{"children":[{"children":[{"children":[{"text":"define \"Qualifying Encounters\":\n  "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Office Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"33"},{"children":[{"text":"\n      union "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Evaluation and Management Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"34"}],"node_type":"Union","ref_id":"35"},{"children":[{"text":"\n      union "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Detoxification Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"36"}],"ref_id":"37"},{"children":[{"text":"\n      union "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Initial Hospital Observation Care\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"38"}],"node_type":"Union","ref_id":"39"},{"children":[{"text":"\n      union "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Initial Hospital Inpatient Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"40"}],"ref_id":"41"},{"children":[{"text":"\n      union "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Discharge Services Hospital Inpatient Same Day Discharge\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"42"}],"node_type":"Union","ref_id":"43"},{"children":[{"text":"\n      union "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Discharge Services Hospital Inpatient\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"44"}],"ref_id":"45"},{"children":[{"text":"\n      union "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Telephone Visits\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"46"}],"node_type":"Union","ref_id":"47"},{"children":[{"text":"\n      union "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Online Assessments\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"48"}],"node_type":"Union","ref_id":"49"},{"children":[{"text":"\n  )"}]}],"node_type":"Union","ref_id":"49"}],"ref_id":"50"}],"define_name":"Qualifying Encounters"},{"children":[{"children":[{"children":[{"text":"define \"First SUD Episode During Measurement Period\":\n  "}]},{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"\"Qualifying Encounters\""}]}],"node_type":"ExpressionRef","ref_id":"51"},{"children":[{"text":")"}]}],"node_type":"ExpressionRef","ref_id":"51"},{"children":[{"text":"ValidEncounters"}]}],"ref_id":"52"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"[\"Diagnosis\": "}]},{"children":[{"children":[{"text":"\"Substance Use Disorder\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"53"}],"node_type":"Retrieve","ref_id":"53"},{"children":[{"text":" SUDDiagnosis"}]}],"ref_id":"54"},{"children":[{"text":"\n        such that "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"ValidEncounters"}]}],"ref_id":"55"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"56"}],"node_type":"Property","ref_id":"56"},{"children":[{"text":" during "}],"node_type":"IncludedIn","ref_id":"58"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"57"}],"node_type":"IncludedIn","ref_id":"58"},{"children":[{"text":"\n          and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"SUDDiagnosis"}]}],"ref_id":"59"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"prevalencePeriod"}]}],"node_type":"Property","ref_id":"60"}],"node_type":"Property","ref_id":"60"},{"children":[{"text":" starts during "}],"node_type":"In","ref_id":"63"},{"children":[{"children":[{"children":[{"text":"ValidEncounters"}]}],"ref_id":"61"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"62"}],"node_type":"Property","ref_id":"62"}],"node_type":"In","ref_id":"63"}],"node_type":"And","ref_id":"64"},{"children":[{"text":"\n          and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"SUDDiagnosis"}]}],"ref_id":"65"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"prevalencePeriod"}]}],"node_type":"Property","ref_id":"66"}],"node_type":"Property","ref_id":"66"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"starts "}]},{"children":[{"children":[{"text":"47 days"}]}],"node_type":"Quantity","ref_id":"69"},{"children":[{"text":" or more before day of"}]}],"node_type":"SameOrBefore","ref_id":"70"},{"children":[{"text":" \n          "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"67"}],"node_type":"End","ref_id":"68"}],"node_type":"SameOrBefore","ref_id":"70"}],"node_type":"And","ref_id":"71"}],"ref_id":"72"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"73"}],"node_type":"Start","ref_id":"74"}],"ref_id":"75"}],"ref_id":"76"}],"ref_id":"77"},{"children":[{"text":"\n  )"}]}],"node_type":"First","ref_id":"78"}],"ref_id":"79"}],"define_name":"First SUD Episode During Measurement Period"},{"children":[{"children":[{"children":[{"text":"define \"Emergency Department or Detoxification Visit\":\n  "}]},{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Evaluation and Management Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"107"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Detoxification Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"108"}],"node_type":"Union","ref_id":"109"}],"ref_id":"110"}],"define_name":"Emergency Department or Detoxification Visit"},{"children":[{"children":[{"children":[{"text":"define \"History of SUD Diagnosis or Treatment\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Intervention, Performed\": "}]},{"children":[{"children":[{"text":"\"Substance Use Disorder Treatment\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"83"},{"children":[{"text":"\n      union "}]},{"children":[{"children":[{"text":"[\"Intervention, Performed\": "}]},{"children":[{"children":[{"text":"\"Psych Visit Psychotherapy\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"84"}],"node_type":"Union","ref_id":"85"},{"children":[{"text":"\n      union "}]},{"children":[{"children":[{"text":"[\"Procedure, Performed\": "}]},{"children":[{"children":[{"text":"\"Substance Use Disorder Long Acting Medication Administration\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"86"}],"node_type":"Union","ref_id":"87"},{"children":[{"text":"\n      union "}]},{"children":[{"children":[{"text":"[\"Procedure, Performed\": "}]},{"children":[{"children":[{"text":"\"Substance Use Disorder Short Acting Medication Administration\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"88"}],"node_type":"Union","ref_id":"89"},{"children":[{"text":" )"}]}],"node_type":"Union","ref_id":"89"},{"children":[{"text":" Interventions"}]}],"ref_id":"90"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"First SUD Episode During Measurement Period\""}]}]}],"node_type":"ExpressionRef","ref_id":"91"},{"children":[{"text":" FirstSUDEpisode"}]}],"ref_id":"92"},{"children":[{"text":"\n        such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"93"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\" ( "}]},{"children":[{"children":[{"children":[{"text":"Interventions"}]}],"ref_id":"94"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"95"}],"node_type":"Property","ref_id":"95"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"Interventions"}]}],"ref_id":"96"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"97"}],"node_type":"Property","ref_id":"97"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"98"}],"node_type":"FunctionRef","ref_id":"98"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"starts "}]},{"children":[{"children":[{"text":"60 days"}]}],"node_type":"Quantity","ref_id":"102"},{"children":[{"text":" or less before day of"}]}],"node_type":"And","ref_id":"103"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"FirstSUDEpisode"}]}],"ref_id":"99"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"100"}],"node_type":"Property","ref_id":"100"}],"node_type":"Start","ref_id":"101"}],"node_type":"And","ref_id":"103"}],"ref_id":"104"}],"node_type":"Query","ref_id":"105"},{"children":[{"text":"\n  )"}]}],"node_type":"Query","ref_id":"105"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"text":"\"Qualifying Encounters\""}]}],"node_type":"ExpressionRef","ref_id":"106"},{"children":[{"text":"\n        except "}]},{"children":[{"children":[{"text":"\"Emergency Department or Detoxification Visit\""}]}],"node_type":"ExpressionRef","ref_id":"111"}],"node_type":"Except","ref_id":"112"},{"children":[{"text":" )"}]}],"node_type":"Except","ref_id":"112"},{"children":[{"text":" QualifyingEncounter"}]}],"ref_id":"113"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"QualifyingEncounter.diagnoses"}]}]}],"node_type":"Property","ref_id":"114"},{"children":[{"text":" Diagnosis"}]}],"ref_id":"115"}]},{"children":[{"text":"\n            "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Diagnosis"}]}],"ref_id":"116"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"117"}],"ref_id":"117"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Substance Use Disorder\""}]}],"ref_id":"118"}],"ref_id":"119"}],"ref_id":"119"}],"node_type":"Query","ref_id":"120"}],"ref_id":"121"},{"children":[{"text":"\n        )"}]}],"ref_id":"121"}],"ref_id":"121"}],"node_type":"Query","ref_id":"122"},{"children":[{"text":" )"}]}],"node_type":"Query","ref_id":"122"},{"children":[{"text":" EncounterWithDiagnosis"}]}],"ref_id":"123"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"First SUD Episode During Measurement Period\""}]}]}],"node_type":"ExpressionRef","ref_id":"124"},{"children":[{"text":" FirstSUDEpisode"}]}],"ref_id":"125"},{"children":[{"text":"\n          such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"EncounterWithDiagnosis"}]}],"ref_id":"126"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"127"}],"node_type":"Property","ref_id":"127"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"starts "}]},{"children":[{"children":[{"text":"60 days"}]}],"node_type":"Quantity","ref_id":"131"},{"children":[{"text":" or less before day of"}]}],"node_type":"And","ref_id":"132"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"FirstSUDEpisode"}]}],"ref_id":"128"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"129"}],"node_type":"Property","ref_id":"129"}],"node_type":"Start","ref_id":"130"}],"node_type":"And","ref_id":"132"}],"ref_id":"133"}],"node_type":"Query","ref_id":"134"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"134"}],"node_type":"Union","ref_id":"135"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"text":"[\"Medication, Order\": "}]},{"children":[{"children":[{"text":"\"Substance Use Disorder Long Acting Medication\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"136"},{"children":[{"text":"\n        union "}]},{"children":[{"children":[{"text":"[\"Medication, Order\": "}]},{"children":[{"children":[{"text":"\"Substance Use Disorder Short Acting Medication\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"137"}],"node_type":"Union","ref_id":"138"},{"children":[{"text":" )"}]}],"node_type":"Union","ref_id":"138"},{"children":[{"text":" SUDMedication"}]}],"ref_id":"139"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"First SUD Episode During Measurement Period\""}]}]}],"node_type":"ExpressionRef","ref_id":"140"},{"children":[{"text":" FirstSUDEpisode"}]}],"ref_id":"141"},{"children":[{"text":"\n          such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"SUDMedication"}]}],"ref_id":"142"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"143"}],"node_type":"Property","ref_id":"143"},{"children":[{"text":" "}]},{"children":[{"children":[{"children":[{"text":"60 days"}]}],"node_type":"Quantity","ref_id":"147"},{"children":[{"text":" or less before day of"}]}],"node_type":"And","ref_id":"148"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"FirstSUDEpisode"}]}],"ref_id":"144"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"145"}],"node_type":"Property","ref_id":"145"}],"node_type":"Start","ref_id":"146"}],"node_type":"And","ref_id":"148"}],"ref_id":"149"}],"node_type":"Query","ref_id":"150"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"150"}],"node_type":"Union","ref_id":"151"}],"ref_id":"152"}],"define_name":"History of SUD Diagnosis or Treatment"},{"children":[{"children":[{"children":[{"text":"define \"Initial Population\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"AgeInYearsAt("}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"27"}],"node_type":"Start","ref_id":"28"}],"node_type":"DateFrom","ref_id":"29"},{"children":[{"text":")"}]}],"node_type":"CalculateAgeAt","ref_id":"30"},{"children":[{"text":"\u003e= 13"}],"node_type":"Literal","ref_id":"31"}],"node_type":"GreaterOrEqual","ref_id":"32"},{"children":[{"text":"\n    and "}]},{"children":[{"children":[{"children":[{"text":"\"First SUD Episode During Measurement Period\""}]}],"node_type":"ExpressionRef","ref_id":"80"},{"children":[{"text":" is not null"}]}],"node_type":"Not","ref_id":"81"}],"node_type":"And","ref_id":"82"},{"children":[{"text":"\n    and "}]},{"children":[{"children":[{"text":"not "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"\"History of SUD Diagnosis or Treatment\""}]}],"node_type":"ExpressionRef","ref_id":"153"}],"node_type":"Exists","ref_id":"154"}],"node_type":"Not","ref_id":"155"}],"node_type":"And","ref_id":"156"}],"ref_id":"157"}],"define_name":"Initial Population"},{"children":[{"children":[{"children":[{"text":"define \"Denominator\":\n  "}]},{"children":[{"children":[{"text":"\"Initial Population\""}]}],"node_type":"ExpressionRef","ref_id":"158"}],"ref_id":"159"}],"define_name":"Denominator"},{"children":[{"children":[{"children":[{"text":"define \"Denominator Exclusions\":\n  "}]},{"children":[{"children":[{"children":[{"text":"Hospice"}]}],"ref_id":"160"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"Has Hospice Services\""}]}],"node_type":"ExpressionRef","ref_id":"161"}],"node_type":"ExpressionRef","ref_id":"161"}],"ref_id":"162"}],"define_name":"Denominator Exclusions"},{"children":[{"children":[{"children":[{"text":"define \"Psychosocial Visit\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"text":"[\"Intervention, Performed\": "}]},{"children":[{"children":[{"text":"\"Substance Use Disorder Treatment\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"163"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"[\"Intervention, Performed\": "}]},{"children":[{"children":[{"text":"\"Psych Visit Psychotherapy\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"164"}],"node_type":"Union","ref_id":"165"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Telephone Visits\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"166"},{"children":[{"text":"\n        union "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Online Assessments\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"167"}],"node_type":"Union","ref_id":"168"},{"children":[{"text":" )"}]}],"node_type":"Union","ref_id":"168"},{"children":[{"text":" TelehealthEncounter"}]}],"ref_id":"169"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"TelehealthEncounter.diagnoses"}]}]}],"node_type":"Property","ref_id":"170"},{"children":[{"text":" Diagnosis"}]}],"ref_id":"171"}]},{"children":[{"text":"\n          "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Diagnosis"}]}],"ref_id":"172"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"173"}],"ref_id":"173"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Substance Use Disorder\""}]}],"ref_id":"174"}],"ref_id":"175"}],"ref_id":"175"}],"node_type":"Query","ref_id":"176"}],"ref_id":"177"}],"ref_id":"177"}],"node_type":"Query","ref_id":"178"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"178"}],"node_type":"Union","ref_id":"179"}],"ref_id":"180"}],"define_name":"Psychosocial Visit"},{"children":[{"children":[{"children":[{"text":"define \"Treatment Initiation With Non Medication Intervention Dates\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Psychosocial Visit\""}]}]}],"node_type":"ExpressionRef","ref_id":"181"},{"children":[{"text":" PsychosocialVisit"}]}],"ref_id":"182"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"treatmentDate: "}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"183"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\" ( "}]},{"children":[{"children":[{"children":[{"text":"PsychosocialVisit"}]}],"ref_id":"184"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"185"}],"node_type":"Property","ref_id":"185"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"PsychosocialVisit"}]}],"ref_id":"186"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"187"}],"node_type":"Property","ref_id":"187"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"188"}],"node_type":"FunctionRef","ref_id":"188"}],"node_type":"Start","ref_id":"189"}],"node_type":"DateFrom","ref_id":"190"}],"ref_id":"191"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"First SUD Episode During Measurement Period\""}]}]}],"node_type":"ExpressionRef","ref_id":"192"},{"children":[{"text":" FirstSUDEpisode"}]}],"ref_id":"193"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"treatmentDate"}]}],"node_type":"QueryLetRef","ref_id":"194"},{"children":[{"text":" during "}],"node_type":"In","ref_id":"206"},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"FirstSUDEpisode"}]}],"ref_id":"195"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"196"}],"node_type":"Property","ref_id":"196"}],"node_type":"Start","ref_id":"197"}],"ref_id":"198"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"FirstSUDEpisode"}]}],"ref_id":"199"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"200"}],"node_type":"Property","ref_id":"200"}],"node_type":"Start","ref_id":"201"}],"node_type":"DateFrom","ref_id":"202"},{"children":[{"text":" + "}]},{"children":[{"children":[{"text":"14 days"}]}],"node_type":"Quantity","ref_id":"203"}],"ref_id":"204"},{"children":[{"text":" )"}]}],"node_type":"Interval","ref_id":"205"}],"node_type":"In","ref_id":"206"},{"children":[{"text":"\n        and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"PsychosocialVisit"}]}],"ref_id":"207"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"id"}]}],"node_type":"Property","ref_id":"208"}],"node_type":"Property","ref_id":"208"},{"children":[{"text":" !~ "}]},{"children":[{"children":[{"children":[{"text":"FirstSUDEpisode"}]}],"ref_id":"209"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"id"}]}],"node_type":"Property","ref_id":"210"}],"node_type":"Property","ref_id":"210"}],"node_type":"Not","ref_id":"211"}],"node_type":"And","ref_id":"212"}],"ref_id":"213"},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return all "}]},{"children":[{"children":[{"text":"treatmentDate"}]}],"node_type":"QueryLetRef","ref_id":"214"}],"ref_id":"215"}],"node_type":"Query","ref_id":"216"}],"ref_id":"217"}],"define_name":"Treatment Initiation With Non Medication Intervention Dates"},{"children":[{"children":[{"children":[{"text":"define \"Treatment Initiation With Medication Order Dates\":\n  "}]},{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"text":"[\"Medication, Order\": "}]},{"children":[{"children":[{"text":"\"Substance Use Disorder Short Acting Medication\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"220"},{"children":[{"text":"\n      union "}]},{"children":[{"children":[{"text":"[\"Medication, Order\": "}]},{"children":[{"children":[{"text":"\"Substance Use Disorder Long Acting Medication\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"221"}],"node_type":"Union","ref_id":"222"},{"children":[{"text":" )"}]}],"node_type":"Union","ref_id":"222"},{"children":[{"text":" SUDMedication"}]}],"ref_id":"223"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"treatmentDate: "}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"children":[{"text":"SUDMedication"}]}],"ref_id":"224"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"225"}],"node_type":"Property","ref_id":"225"}],"node_type":"DateFrom","ref_id":"226"}],"ref_id":"227"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"First SUD Episode During Measurement Period\""}]}]}],"node_type":"ExpressionRef","ref_id":"228"},{"children":[{"text":" FirstSUDEpisode"}]}],"ref_id":"229"},{"children":[{"text":"\n        such that "}]},{"children":[{"children":[{"children":[{"text":"treatmentDate"}]}],"node_type":"QueryLetRef","ref_id":"230"},{"children":[{"text":" during "}],"node_type":"In","ref_id":"242"},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"FirstSUDEpisode"}]}],"ref_id":"231"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"232"}],"node_type":"Property","ref_id":"232"}],"node_type":"Start","ref_id":"233"}],"ref_id":"234"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"FirstSUDEpisode"}]}],"ref_id":"235"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"236"}],"node_type":"Property","ref_id":"236"}],"node_type":"Start","ref_id":"237"}],"node_type":"DateFrom","ref_id":"238"},{"children":[{"text":" + "}]},{"children":[{"children":[{"text":"14 days"}]}],"node_type":"Quantity","ref_id":"239"}],"ref_id":"240"},{"children":[{"text":" )"}]}],"node_type":"Interval","ref_id":"241"}],"node_type":"In","ref_id":"242"}],"ref_id":"243"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"return all "}]},{"children":[{"children":[{"text":"treatmentDate"}]}],"node_type":"QueryLetRef","ref_id":"244"}],"ref_id":"245"}],"node_type":"Query","ref_id":"246"},{"children":[{"text":"\n  )"}]}],"node_type":"Query","ref_id":"246"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"text":"[\"Procedure, Performed\": "}]},{"children":[{"children":[{"text":"\"Substance Use Disorder Short Acting Medication Administration\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"247"},{"children":[{"text":"\n        union "}]},{"children":[{"children":[{"text":"[\"Procedure, Performed\": "}]},{"children":[{"children":[{"text":"\"Substance Use Disorder Long Acting Medication Administration\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"248"}],"node_type":"Union","ref_id":"249"},{"children":[{"text":" )"}]}],"node_type":"Union","ref_id":"249"},{"children":[{"text":" SUDMedAdministration"}]}],"ref_id":"250"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"treatmentDate: "}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"251"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\" ( "}]},{"children":[{"children":[{"children":[{"text":"SUDMedAdministration"}]}],"ref_id":"252"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"253"}],"node_type":"Property","ref_id":"253"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"SUDMedAdministration"}]}],"ref_id":"254"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"255"}],"node_type":"Property","ref_id":"255"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"256"}],"node_type":"FunctionRef","ref_id":"256"}],"node_type":"Start","ref_id":"257"}],"node_type":"DateFrom","ref_id":"258"}],"ref_id":"259"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"First SUD Episode During Measurement Period\""}]}]}],"node_type":"ExpressionRef","ref_id":"260"},{"children":[{"text":" FirstSUDEpisode"}]}],"ref_id":"261"},{"children":[{"text":"\n          such that "}]},{"children":[{"children":[{"children":[{"text":"treatmentDate"}]}],"node_type":"QueryLetRef","ref_id":"262"},{"children":[{"text":" during "}],"node_type":"In","ref_id":"274"},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"FirstSUDEpisode"}]}],"ref_id":"263"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"264"}],"node_type":"Property","ref_id":"264"}],"node_type":"Start","ref_id":"265"}],"ref_id":"266"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"FirstSUDEpisode"}]}],"ref_id":"267"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"268"}],"node_type":"Property","ref_id":"268"}],"node_type":"Start","ref_id":"269"}],"node_type":"DateFrom","ref_id":"270"},{"children":[{"text":" + "}]},{"children":[{"children":[{"text":"14 days"}]}],"node_type":"Quantity","ref_id":"271"}],"ref_id":"272"},{"children":[{"text":" )"}]}],"node_type":"Interval","ref_id":"273"}],"node_type":"In","ref_id":"274"}],"ref_id":"275"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"return all "}]},{"children":[{"children":[{"text":"treatmentDate"}]}],"node_type":"QueryLetRef","ref_id":"276"}],"ref_id":"277"}],"node_type":"Query","ref_id":"278"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"278"}],"node_type":"Union","ref_id":"279"}],"ref_id":"280"}],"define_name":"Treatment Initiation With Medication Order Dates"},{"children":[{"children":[{"children":[{"text":"define \"Numerator 1\":\n  "}]},{"children":[{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"\"Treatment Initiation With Non Medication Intervention Dates\""}]}],"node_type":"ExpressionRef","ref_id":"218"}],"node_type":"Exists","ref_id":"219"},{"children":[{"text":"\n    or "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"\"Treatment Initiation With Medication Order Dates\""}]}],"node_type":"ExpressionRef","ref_id":"281"}],"node_type":"Exists","ref_id":"282"}],"node_type":"Or","ref_id":"283"}],"ref_id":"284"}],"define_name":"Numerator 1"},{"children":[{"children":[{"children":[{"text":"define \"SDE Ethnicity\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Ethnicity\": "}]},{"children":[{"children":[{"text":"\"Ethnicity\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"285"}],"ref_id":"286"}],"define_name":"SDE Ethnicity"},{"children":[{"children":[{"children":[{"text":"define \"SDE Payer\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Payer\": "}]},{"children":[{"children":[{"text":"\"Payer\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"287"}],"ref_id":"288"}],"define_name":"SDE Payer"},{"children":[{"children":[{"children":[{"text":"define \"SDE Race\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Race\": "}]},{"children":[{"children":[{"text":"\"Race\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"289"}],"ref_id":"290"}],"define_name":"SDE Race"},{"children":[{"children":[{"children":[{"text":"define \"SDE Sex\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Sex\": "}]},{"children":[{"children":[{"text":"\"ONC Administrative Sex\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"291"}],"ref_id":"292"}],"define_name":"SDE Sex"},{"children":[{"children":[{"children":[{"text":"define \"Stratification 1\":\n  "}]},{"children":[{"children":[{"children":[{"text":"AgeInYearsAt("}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"293"}],"node_type":"Start","ref_id":"294"}],"node_type":"DateFrom","ref_id":"295"},{"children":[{"text":")"}]}],"node_type":"CalculateAgeAt","ref_id":"296"},{"children":[{"text":"in "}]},{"children":[{"children":[{"text":"Interval[13, 17]"}],"ref_id":"297"}],"node_type":"Interval","ref_id":"299"}],"node_type":"In","ref_id":"300"}],"ref_id":"301"}],"define_name":"Stratification 1"},{"children":[{"children":[{"children":[{"text":"define \"Stratification 2\":\n  "}]},{"children":[{"children":[{"children":[{"text":"AgeInYearsAt("}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"302"}],"node_type":"Start","ref_id":"303"}],"node_type":"DateFrom","ref_id":"304"},{"children":[{"text":")"}]}],"node_type":"CalculateAgeAt","ref_id":"305"},{"children":[{"text":"in "}]},{"children":[{"children":[{"text":"Interval[18, 64]"}],"ref_id":"306"}],"node_type":"Interval","ref_id":"308"}],"node_type":"In","ref_id":"309"}],"ref_id":"310"}],"define_name":"Stratification 2"},{"children":[{"children":[{"children":[{"text":"define \"Has Treatment Engagement With Long Acting Medication\":\n  "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Medication, Order\": "}]},{"children":[{"children":[{"text":"\"Substance Use Disorder Long Acting Medication\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"311"}],"node_type":"Retrieve","ref_id":"311"},{"children":[{"text":" LongActingMedOrder"}]}],"ref_id":"312"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"Min("}]},{"children":[{"children":[{"children":[{"text":"\"Treatment Initiation With Non Medication Intervention Dates\""}]}],"node_type":"ExpressionRef","ref_id":"313"},{"children":[{"text":"\n            union "}]},{"children":[{"children":[{"text":"\"Treatment Initiation With Medication Order Dates\""}]}],"node_type":"ExpressionRef","ref_id":"314"}],"ref_id":"315"},{"children":[{"text":"\n        )"}]}],"node_type":"Min","ref_id":"316"},{"children":[{"text":")"}]}],"node_type":"Min","ref_id":"316"},{"children":[{"text":" InitiationTreatmentDate"}]}],"ref_id":"317"},{"children":[{"text":"\n          such that "}]},{"children":[{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"children":[{"text":"LongActingMedOrder"}]}],"ref_id":"318"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"319"}],"node_type":"Property","ref_id":"319"}],"node_type":"DateFrom","ref_id":"320"},{"children":[{"text":" "}]},{"children":[{"children":[{"children":[{"text":"34 days"}]}],"node_type":"Quantity","ref_id":"322"},{"children":[{"text":" or less after"}]}],"node_type":"And","ref_id":"323"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"InitiationTreatmentDate"}]}],"node_type":"AliasRef","ref_id":"321"}],"node_type":"And","ref_id":"323"}],"ref_id":"324"}],"node_type":"Query","ref_id":"325"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"325"},{"children":[{"text":"\n      union "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Procedure, Performed\": "}]},{"children":[{"children":[{"text":"\"Substance Use Disorder Long Acting Medication Administration\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"326"}],"node_type":"Retrieve","ref_id":"326"},{"children":[{"text":" LongActingTreatment"}]}],"ref_id":"327"}]},{"children":[{"text":"\n          "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"Min("}]},{"children":[{"children":[{"children":[{"text":"\"Treatment Initiation With Non Medication Intervention Dates\""}]}],"node_type":"ExpressionRef","ref_id":"328"},{"children":[{"text":"\n              union "}]},{"children":[{"children":[{"text":"\"Treatment Initiation With Medication Order Dates\""}]}],"node_type":"ExpressionRef","ref_id":"329"}],"ref_id":"330"},{"children":[{"text":"\n          )"}]}],"node_type":"Min","ref_id":"331"},{"children":[{"text":")"}]}],"node_type":"Min","ref_id":"331"},{"children":[{"text":" InitiationTreatmentDate"}]}],"ref_id":"332"},{"children":[{"text":"\n            such that "}]},{"children":[{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"333"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\" ( "}]},{"children":[{"children":[{"children":[{"text":"LongActingTreatment"}]}],"ref_id":"334"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"335"}],"node_type":"Property","ref_id":"335"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"LongActingTreatment"}]}],"ref_id":"336"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"337"}],"node_type":"Property","ref_id":"337"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"338"}],"node_type":"FunctionRef","ref_id":"338"}],"node_type":"Start","ref_id":"339"}],"node_type":"DateFrom","ref_id":"340"},{"children":[{"text":" "}]},{"children":[{"children":[{"children":[{"text":"34 days"}]}],"node_type":"Quantity","ref_id":"342"},{"children":[{"text":" or less after"}]}],"node_type":"And","ref_id":"343"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"InitiationTreatmentDate"}]}],"node_type":"AliasRef","ref_id":"341"}],"node_type":"And","ref_id":"343"}],"ref_id":"344"}],"node_type":"Query","ref_id":"345"},{"children":[{"text":"\n      )"}]}],"node_type":"Query","ref_id":"345"}],"node_type":"Union","ref_id":"346"},{"children":[{"text":"\n  )"}]}],"node_type":"Union","ref_id":"346"}],"node_type":"Exists","ref_id":"347"}],"ref_id":"348"}],"define_name":"Has Treatment Engagement With Long Acting Medication"},{"children":[{"children":[{"children":[{"text":"define \"Stratification 3\":\n  "}]},{"children":[{"children":[{"children":[{"text":"AgeInYearsAt("}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"349"}],"node_type":"Start","ref_id":"350"}],"node_type":"DateFrom","ref_id":"351"},{"children":[{"text":")"}]}],"node_type":"CalculateAgeAt","ref_id":"352"},{"children":[{"text":"\u003e= 65"}],"node_type":"Literal","ref_id":"353"}],"node_type":"GreaterOrEqual","ref_id":"354"}],"ref_id":"355"}],"define_name":"Stratification 3"},{"children":[{"children":[{"children":[{"text":"define \"Has Two or More Treatment Engagements With Short Acting Medication or Non Medication Intervention\":\n  "}]},{"children":[{"children":[{"children":[{"text":"Count("}]},{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"children":[{"text":"\"Psychosocial Visit\""}]}],"node_type":"ExpressionRef","ref_id":"356"},{"children":[{"text":"\n        union "}]},{"children":[{"children":[{"text":"[\"Procedure, Performed\": "}]},{"children":[{"children":[{"text":"\"Substance Use Disorder Short Acting Medication Administration\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"357"}],"node_type":"Union","ref_id":"358"},{"children":[{"text":")"}]}],"node_type":"Union","ref_id":"358"},{"children":[{"text":"ShortActingTreatment"}]}],"ref_id":"359"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"with"}]},{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"Min("}]},{"children":[{"children":[{"children":[{"text":"\"Treatment Initiation With Non Medication Intervention Dates\""}]}],"node_type":"ExpressionRef","ref_id":"360"},{"children":[{"text":"\n            union "}]},{"children":[{"children":[{"text":"\"Treatment Initiation With Medication Order Dates\""}]}],"node_type":"ExpressionRef","ref_id":"361"}],"ref_id":"362"},{"children":[{"text":"\n        )"}]}],"node_type":"Min","ref_id":"363"},{"children":[{"text":")"}]}],"node_type":"Min","ref_id":"363"},{"children":[{"text":"InitiationTreatmentDate"}]}],"ref_id":"364"},{"children":[{"text":"\n          such that "}]},{"children":[{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"365"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\"("}]},{"children":[{"children":[{"children":[{"text":"ShortActingTreatment"}]}],"ref_id":"366"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"367"}],"node_type":"Property","ref_id":"367"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"ShortActingTreatment"}]}],"ref_id":"368"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"369"}],"node_type":"Property","ref_id":"369"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"370"}],"node_type":"FunctionRef","ref_id":"370"}],"node_type":"Start","ref_id":"371"}],"node_type":"DateFrom","ref_id":"372"},{"children":[{"children":[{"children":[{"text":"34 days"}]}],"node_type":"Quantity","ref_id":"374"},{"children":[{"text":" or less after"}]}],"node_type":"And","ref_id":"375"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"InitiationTreatmentDate"}]}],"node_type":"AliasRef","ref_id":"373"}],"node_type":"And","ref_id":"375"}],"ref_id":"376"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"return all "}]},{"children":[{"children":[{"text":"ShortActingTreatment"}]}],"node_type":"AliasRef","ref_id":"377"}],"ref_id":"378"}],"node_type":"Query","ref_id":"379"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"379"},{"children":[{"text":"\n      union"}]},{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Medication, Order\": "}]},{"children":[{"children":[{"text":"\"Substance Use Disorder Short Acting Medication\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"380"}],"node_type":"Retrieve","ref_id":"380"},{"children":[{"text":" ShortActingMedOrder"}]}],"ref_id":"381"}]},{"children":[{"text":"\n          "}]},{"children":[{"children":[{"text":"with"}]},{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"Min("}]},{"children":[{"children":[{"children":[{"text":"\"Treatment Initiation With Non Medication Intervention Dates\""}]}],"node_type":"ExpressionRef","ref_id":"382"},{"children":[{"text":"\n              union "}]},{"children":[{"children":[{"text":"\"Treatment Initiation With Medication Order Dates\""}]}],"node_type":"ExpressionRef","ref_id":"383"}],"ref_id":"384"},{"children":[{"text":"\n          )"}]}],"node_type":"Min","ref_id":"385"},{"children":[{"text":")"}]}],"node_type":"Min","ref_id":"385"},{"children":[{"text":"InitiationTreatmentDate"}]}],"ref_id":"386"},{"children":[{"text":"\n            such that "}]},{"children":[{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"children":[{"text":"ShortActingMedOrder"}]}],"ref_id":"387"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"388"}],"node_type":"Property","ref_id":"388"}],"node_type":"DateFrom","ref_id":"389"},{"children":[{"text":" "}]},{"children":[{"children":[{"children":[{"text":"34 days"}]}],"node_type":"Quantity","ref_id":"391"},{"children":[{"text":" or less after"}]}],"node_type":"And","ref_id":"392"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"InitiationTreatmentDate"}]}],"node_type":"AliasRef","ref_id":"390"}],"node_type":"And","ref_id":"392"}],"ref_id":"393"},{"children":[{"text":"\n          "}]},{"children":[{"children":[{"text":"return all "}]},{"children":[{"children":[{"text":"ShortActingMedOrder"}]}],"node_type":"AliasRef","ref_id":"394"}],"ref_id":"395"}],"node_type":"Query","ref_id":"396"},{"children":[{"text":"\n      )"}]}],"node_type":"Query","ref_id":"396"}],"ref_id":"397"},{"children":[{"text":"\n  )"}]}],"node_type":"Count","ref_id":"398"},{"children":[{"text":"\u003e= 2"}],"node_type":"Literal","ref_id":"399"}],"node_type":"GreaterOrEqual","ref_id":"400"}],"ref_id":"401"}],"define_name":"Has Two or More Treatment Engagements With Short Acting Medication or Non Medication Intervention"},{"children":[{"children":[{"children":[{"text":"define \"Numerator 2\":\n  "}]},{"children":[{"children":[{"children":[{"text":"\"Has Treatment Engagement With Long Acting Medication\""}]}],"node_type":"ExpressionRef","ref_id":"402"},{"children":[{"text":"\n    or "}]},{"children":[{"children":[{"text":"\"Has Two or More Treatment Engagements With Short Acting Medication or Non Medication Intervention\""}]}],"node_type":"ExpressionRef","ref_id":"403"}],"node_type":"Or","ref_id":"404"}],"ref_id":"405"}],"define_name":"Numerator 2"}],"identifier":{"id":"InitiationandEngagementofSubstanceUseDisorderTreatment","version":"12.0.000"}},"is_main_library":true,"is_top_level":true,"library_name":"InitiationandEngagementofSubstanceUseDisorderTreatment","library_version":"12.0.000","statement_dependencies":[{"_id":"689244ad0734dfcaf541451c","statement_name":"Patient"},{"_id":"689244ad0734dfcaf541451d","statement_name":"Qualifying Encounters"},{"_id":"689244ad0734dfcaf541451e","statement_name":"First SUD Episode During Measurement Period","statement_references":[{"_id":"689244b50734dfcaf541491e","hqmf_id":null,"library_name":"InitiationandEngagementofSubstanceUseDisorderTreatment","statement_name":"Qualifying Encounters"}]},{"_id":"689244ad0734dfcaf541451f","statement_name":"Emergency Department or Detoxification Visit"},{"_id":"689244ad0734dfcaf5414520","statement_name":"History of SUD Diagnosis or Treatment","statement_references":[{"_id":"689244ad0734dfcaf5414505","hqmf_id":null,"library_name":"InitiationandEngagementofSubstanceUseDisorderTreatment","statement_name":"First SUD Episode During Measurement Period"},{"_id":"689244ad0734dfcaf5414506","hqmf_id":null,"library_name":"MATGlobalCommonFunctions","statement_name":"NormalizeInterval"},{"_id":"689244ad0734dfcaf5414507","hqmf_id":null,"library_name":"InitiationandEngagementofSubstanceUseDisorderTreatment","statement_name":"Qualifying Encounters"},{"_id":"689244ad0734dfcaf5414508","hqmf_id":null,"library_name":"InitiationandEngagementofSubstanceUseDisorderTreatment","statement_name":"Emergency Department or Detoxification Visit"}]},{"_id":"689244ad0734dfcaf5414521","statement_name":"Initial Population","statement_references":[{"_id":"689244ad0734dfcaf5414509","hqmf_id":null,"library_name":"InitiationandEngagementofSubstanceUseDisorderTreatment","statement_name":"Patient"},{"_id":"689244ad0734dfcaf541450a","hqmf_id":null,"library_name":"InitiationandEngagementofSubstanceUseDisorderTreatment","statement_name":"First SUD Episode During Measurement Period"},{"_id":"689244ad0734dfcaf541450b","hqmf_id":null,"library_name":"InitiationandEngagementofSubstanceUseDisorderTreatment","statement_name":"History of SUD Diagnosis or Treatment"}]},{"_id":"689244ad0734dfcaf5414522","statement_name":"Denominator","statement_references":[{"_id":"689244b50734dfcaf541491f","hqmf_id":null,"library_name":"InitiationandEngagementofSubstanceUseDisorderTreatment","statement_name":"Initial Population"}]},{"_id":"689244ad0734dfcaf5414523","statement_name":"Denominator Exclusions","statement_references":[{"_id":"689244b50734dfcaf5414920","hqmf_id":null,"library_name":"Hospice","statement_name":"Has Hospice Services"}]},{"_id":"689244ad0734dfcaf5414524","statement_name":"Psychosocial Visit"},{"_id":"689244ad0734dfcaf5414525","statement_name":"Treatment Initiation With Non Medication Intervention Dates","statement_references":[{"_id":"689244ad0734dfcaf541450c","hqmf_id":null,"library_name":"InitiationandEngagementofSubstanceUseDisorderTreatment","statement_name":"Psychosocial Visit"},{"_id":"689244ad0734dfcaf541450d","hqmf_id":null,"library_name":"MATGlobalCommonFunctions","statement_name":"NormalizeInterval"},{"_id":"689244ad0734dfcaf541450e","hqmf_id":null,"library_name":"InitiationandEngagementofSubstanceUseDisorderTreatment","statement_name":"First SUD Episode During Measurement Period"}]},{"_id":"689244ad0734dfcaf5414526","statement_name":"Treatment Initiation With Medication Order Dates","statement_references":[{"_id":"689244ad0734dfcaf541450f","hqmf_id":null,"library_name":"InitiationandEngagementofSubstanceUseDisorderTreatment","statement_name":"First SUD Episode During Measurement Period"},{"_id":"689244ad0734dfcaf5414510","hqmf_id":null,"library_name":"MATGlobalCommonFunctions","statement_name":"NormalizeInterval"}]},{"_id":"689244ad0734dfcaf5414527","statement_name":"Numerator 1","statement_references":[{"_id":"689244ad0734dfcaf5414511","hqmf_id":null,"library_name":"InitiationandEngagementofSubstanceUseDisorderTreatment","statement_name":"Treatment Initiation With Non Medication Intervention Dates"},{"_id":"689244ad0734dfcaf5414512","hqmf_id":null,"library_name":"InitiationandEngagementofSubstanceUseDisorderTreatment","statement_name":"Treatment Initiation With Medication Order Dates"}]},{"_id":"689244ad0734dfcaf5414528","statement_name":"SDE Ethnicity"},{"_id":"689244ad0734dfcaf5414529","statement_name":"SDE Payer"},{"_id":"689244ad0734dfcaf541452a","statement_name":"SDE Race"},{"_id":"689244ad0734dfcaf541452b","statement_name":"SDE Sex"},{"_id":"689244ad0734dfcaf541452c","statement_name":"Stratification 1","statement_references":[{"_id":"689244b50734dfcaf5414921","hqmf_id":null,"library_name":"InitiationandEngagementofSubstanceUseDisorderTreatment","statement_name":"Patient"}]},{"_id":"689244ad0734dfcaf541452d","statement_name":"Stratification 2","statement_references":[{"_id":"689244b50734dfcaf5414922","hqmf_id":null,"library_name":"InitiationandEngagementofSubstanceUseDisorderTreatment","statement_name":"Patient"}]},{"_id":"689244ad0734dfcaf541452e","statement_name":"Has Treatment Engagement With Long Acting Medication","statement_references":[{"_id":"689244ad0734dfcaf5414513","hqmf_id":null,"library_name":"InitiationandEngagementofSubstanceUseDisorderTreatment","statement_name":"Treatment Initiation With Non Medication Intervention Dates"},{"_id":"689244ad0734dfcaf5414514","hqmf_id":null,"library_name":"InitiationandEngagementofSubstanceUseDisorderTreatment","statement_name":"Treatment Initiation With Medication Order Dates"},{"_id":"689244ad0734dfcaf5414515","hqmf_id":null,"library_name":"MATGlobalCommonFunctions","statement_name":"NormalizeInterval"}]},{"_id":"689244ad0734dfcaf541452f","statement_name":"Stratification 3","statement_references":[{"_id":"689244b50734dfcaf5414923","hqmf_id":null,"library_name":"InitiationandEngagementofSubstanceUseDisorderTreatment","statement_name":"Patient"}]},{"_id":"689244ad0734dfcaf5414530","statement_name":"Has Two or More Treatment Engagements With Short Acting Medication or Non Medication Intervention","statement_references":[{"_id":"689244ad0734dfcaf5414516","hqmf_id":null,"library_name":"InitiationandEngagementofSubstanceUseDisorderTreatment","statement_name":"Psychosocial Visit"},{"_id":"689244ad0734dfcaf5414517","hqmf_id":null,"library_name":"InitiationandEngagementofSubstanceUseDisorderTreatment","statement_name":"Treatment Initiation With Non Medication Intervention Dates"},{"_id":"689244ad0734dfcaf5414518","hqmf_id":null,"library_name":"InitiationandEngagementofSubstanceUseDisorderTreatment","statement_name":"Treatment Initiation With Medication Order Dates"},{"_id":"689244ad0734dfcaf5414519","hqmf_id":null,"library_name":"MATGlobalCommonFunctions","statement_name":"NormalizeInterval"}]},{"_id":"689244ad0734dfcaf5414531","statement_name":"Numerator 2","statement_references":[{"_id":"689244ad0734dfcaf541451a","hqmf_id":null,"library_name":"InitiationandEngagementofSubstanceUseDisorderTreatment","statement_name":"Has Treatment Engagement With Long Acting Medication"},{"_id":"689244ad0734dfcaf541451b","hqmf_id":null,"library_name":"InitiationandEngagementofSubstanceUseDisorderTreatment","statement_name":"Has Two or More Treatment Engagements With Short Acting Medication or Non Medication Intervention"}]}]},{"_id":"689244ad0734dfcaf5414533","cql":"library Hospice version '5.0.000'\n\nusing QDM version '5.6'\n\ninclude MATGlobalCommonFunctions version '7.0.000' called Global\n\ncodesystem \"SNOMEDCT\": 'urn:oid:2.16.840.1.113883.6.96' \ncodesystem \"LOINC\": 'urn:oid:2.16.840.1.113883.6.1' \n\nvalueset \"Encounter Inpatient\": 'urn:oid:2.16.840.1.113883.3.666.5.307' \nvalueset \"Hospice Care Ambulatory\": 'urn:oid:2.16.840.1.113883.3.526.3.1584' \nvalueset \"Hospice Diagnosis\": 'urn:oid:2.16.840.1.113883.3.464.1003.1165' \nvalueset \"Hospice Encounter\": 'urn:oid:2.16.840.1.113883.3.464.1003.1003' \n\ncode \"Discharge to healthcare facility for hospice care (procedure)\": '428371000124100' from \"SNOMEDCT\" display 'Discharge to healthcare facility for hospice care (procedure)'\ncode \"Discharge to home for hospice care (procedure)\": '428361000124107' from \"SNOMEDCT\" display 'Discharge to home for hospice care (procedure)'\ncode \"Hospice care [Minimum Data Set]\": '45755-6' from \"LOINC\" display 'Hospice care [Minimum Data Set]'\ncode \"Yes (qualifier value)\": '373066001' from \"SNOMEDCT\" display 'Yes (qualifier value)'\n\nparameter \"Measurement Period\" Interval\u003cDateTime\u003e\n\ncontext Patient\n\ndefine \"Has Hospice Services\":\n  exists ( [\"Encounter, Performed\": \"Encounter Inpatient\"] InpatientEncounter\n      where ( InpatientEncounter.dischargeDisposition ~ \"Discharge to home for hospice care (procedure)\"\n          or InpatientEncounter.dischargeDisposition ~ \"Discharge to healthcare facility for hospice care (procedure)\"\n      )\n        and InpatientEncounter.relevantPeriod ends during day of \"Measurement Period\"\n  )\n    or exists ( [\"Encounter, Performed\": \"Hospice Encounter\"] HospiceEncounter\n        where HospiceEncounter.relevantPeriod overlaps day of \"Measurement Period\"\n    )\n    or exists ( [\"Assessment, Performed\": \"Hospice care [Minimum Data Set]\"] HospiceAssessment\n        where HospiceAssessment.result ~ \"Yes (qualifier value)\"\n          and Global.\"NormalizeInterval\" ( HospiceAssessment.relevantDatetime, HospiceAssessment.relevantPeriod ) overlaps day of \"Measurement Period\"\n    )\n    or exists ( [\"Intervention, Order\": \"Hospice Care Ambulatory\"] HospiceOrder\n        where HospiceOrder.authorDatetime during day of \"Measurement Period\"\n    )\n    or exists ( [\"Intervention, Performed\": \"Hospice Care Ambulatory\"] HospicePerformed\n        where Global.\"NormalizeInterval\" ( HospicePerformed.relevantDatetime, HospicePerformed.relevantPeriod ) overlaps day of \"Measurement Period\"\n    )\n  or exists ( [\"Diagnosis\": \"Hospice Diagnosis\"] HospiceCareDiagnosis\n        where HospiceCareDiagnosis.prevalencePeriod overlaps day of \"Measurement Period\"\n    )\n\n","elm":{"library":{"annotation":[{"translatorOptions":"EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion,DisableMethodInvocation","type":"CqlToElmInfo"},{"type":"Annotation","s":{"r":"96","s":[{"value":["","library Hospice version '5.0.000'"]}]}}],"identifier":{"id":"Hospice","version":"5.0.000"},"schemaIdentifier":{"id":"urn:hl7-org:elm","version":"r1"},"usings":{"def":[{"localIdentifier":"System","uri":"urn:hl7-org:elm-types:r1"},{"localId":"1","locator":"3:1-3:23","localIdentifier":"QDM","uri":"urn:healthit-gov:qdm:v5_6","version":"5.6","annotation":[{"type":"Annotation","s":{"r":"1","s":[{"value":["","using "]},{"s":[{"value":["QDM"]}]},{"value":[" version ","'5.6'"]}]}}]}]},"includes":{"def":[{"localId":"2","locator":"5:1-5:64","localIdentifier":"Global","path":"MATGlobalCommonFunctions","version":"7.0.000","annotation":[{"type":"Annotation","s":{"r":"2","s":[{"value":["","include "]},{"s":[{"value":["MATGlobalCommonFunctions"]}]},{"value":[" version ","'7.0.000'"," called ","Global"]}]}}]}]},"parameters":{"def":[{"localId":"19","locator":"20:1-20:49","name":"Measurement Period","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"19","s":[{"value":["","parameter ","\"Measurement Period\""," "]},{"r":"18","s":[{"value":["Interval\u003c"]},{"r":"17","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}}],"parameterTypeSpecifier":{"localId":"18","locator":"20:32-20:49","type":"IntervalTypeSpecifier","pointType":{"localId":"17","locator":"20:41-20:48","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},"codeSystems":{"def":[{"localId":"3","locator":"7:1-7:55","name":"SNOMEDCT","id":"2.16.840.1.113883.6.96","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"3","s":[{"value":["","codesystem ","\"SNOMEDCT\"",": ","'urn:oid:2.16.840.1.113883.6.96'"]}]}}]},{"localId":"4","locator":"8:1-8:51","name":"LOINC","id":"2.16.840.1.113883.6.1","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"4","s":[{"value":["","codesystem ","\"LOINC\"",": ","'urn:oid:2.16.840.1.113883.6.1'"]}]}}]}]},"valueSets":{"def":[{"localId":"5","locator":"10:1-10:71","name":"Encounter Inpatient","id":"2.16.840.1.113883.3.666.5.307","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"5","s":[{"value":["","valueset ","\"Encounter Inpatient\"",": ","'urn:oid:2.16.840.1.113883.3.666.5.307'"]}]}}]},{"localId":"6","locator":"11:1-11:76","name":"Hospice Care Ambulatory","id":"2.16.840.1.113883.3.526.3.1584","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"6","s":[{"value":["","valueset ","\"Hospice Care Ambulatory\"",": ","'urn:oid:2.16.840.1.113883.3.526.3.1584'"]}]}}]},{"localId":"7","locator":"12:1-12:73","name":"Hospice Diagnosis","id":"2.16.840.1.113883.3.464.1003.1165","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"7","s":[{"value":["","valueset ","\"Hospice Diagnosis\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.1165'"]}]}}]},{"localId":"8","locator":"13:1-13:73","name":"Hospice Encounter","id":"2.16.840.1.113883.3.464.1003.1003","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"8","s":[{"value":["","valueset ","\"Hospice Encounter\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.1003'"]}]}}]}]},"codes":{"def":[{"localId":"10","locator":"15:1-15:175","name":"Discharge to healthcare facility for hospice care (procedure)","id":"428371000124100","display":"Discharge to healthcare facility for hospice care (procedure)","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"10","s":[{"value":["","code ","\"Discharge to healthcare facility for hospice care (procedure)\"",": ","'428371000124100'"," from "]},{"r":"9","s":[{"value":["\"SNOMEDCT\""]}]},{"value":[" display ","'Discharge to healthcare facility for hospice care (procedure)'"]}]}}],"codeSystem":{"localId":"9","locator":"15:94-15:103","name":"SNOMEDCT"}},{"localId":"12","locator":"16:1-16:145","name":"Discharge to home for hospice care (procedure)","id":"428361000124107","display":"Discharge to home for hospice care (procedure)","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"12","s":[{"value":["","code ","\"Discharge to home for hospice care (procedure)\"",": ","'428361000124107'"," from "]},{"r":"11","s":[{"value":["\"SNOMEDCT\""]}]},{"value":[" display ","'Discharge to home for hospice care (procedure)'"]}]}}],"codeSystem":{"localId":"11","locator":"16:79-16:88","name":"SNOMEDCT"}},{"localId":"14","locator":"17:1-17:104","name":"Hospice care [Minimum Data Set]","id":"45755-6","display":"Hospice care [Minimum Data Set]","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"14","s":[{"value":["","code ","\"Hospice care [Minimum Data Set]\"",": ","'45755-6'"," from "]},{"r":"13","s":[{"value":["\"LOINC\""]}]},{"value":[" display ","'Hospice care [Minimum Data Set]'"]}]}}],"codeSystem":{"localId":"13","locator":"17:56-17:62","name":"LOINC"}},{"localId":"16","locator":"18:1-18:89","name":"Yes (qualifier value)","id":"373066001","display":"Yes (qualifier value)","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"16","s":[{"value":["","code ","\"Yes (qualifier value)\"",": ","'373066001'"," from "]},{"r":"15","s":[{"value":["\"SNOMEDCT\""]}]},{"value":[" display ","'Yes (qualifier value)'"]}]}}],"codeSystem":{"localId":"15","locator":"18:48-18:57","name":"SNOMEDCT"}}]},"contexts":{"def":[{"locator":"22:1-22:15","name":"Patient"}]},"statements":{"def":[{"locator":"22:1-22:15","name":"Patient","context":"Patient","expression":{"type":"SingletonFrom","operand":{"locator":"22:1-22:15","dataType":"{urn:healthit-gov:qdm:v5_6}Patient","templateId":"Patient","type":"Retrieve"}}},{"localId":"96","locator":"24:1-46:5","name":"Has Hospice Services","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"96","s":[{"value":["","define ","\"Has Hospice Services\"",":\n  "]},{"r":"95","s":[{"r":"86","s":[{"r":"73","s":[{"r":"64","s":[{"r":"46","s":[{"r":"37","s":[{"value":["exists "]},{"r":"36","s":[{"value":["( "]},{"r":"36","s":[{"s":[{"r":"21","s":[{"r":"20","s":[{"r":"20","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Encounter Inpatient\""]}]},{"value":["]"]}]}]},{"value":[" ","InpatientEncounter"]}]}]},{"value":["\n      "]},{"r":"35","s":[{"value":["where "]},{"r":"35","s":[{"r":"30","s":[{"value":["( "]},{"r":"30","s":[{"r":"25","s":[{"r":"23","s":[{"r":"22","s":[{"value":["InpatientEncounter"]}]},{"value":["."]},{"r":"23","s":[{"value":["dischargeDisposition"]}]}]},{"value":[" ","~"," "]},{"r":"24","s":[{"value":["\"Discharge to home for hospice care (procedure)\""]}]}]},{"value":["\n          or "]},{"r":"29","s":[{"r":"27","s":[{"r":"26","s":[{"value":["InpatientEncounter"]}]},{"value":["."]},{"r":"27","s":[{"value":["dischargeDisposition"]}]}]},{"value":[" ","~"," "]},{"r":"28","s":[{"value":["\"Discharge to healthcare facility for hospice care (procedure)\""]}]}]}]},{"value":["\n      )"]}]},{"value":["\n        and "]},{"r":"34","s":[{"r":"32","s":[{"r":"31","s":[{"value":["InpatientEncounter"]}]},{"value":["."]},{"r":"32","s":[{"value":["relevantPeriod"]}]}]},{"r":"34","value":[" ","ends during day of"," "]},{"r":"33","s":[{"value":["\"Measurement Period\""]}]}]}]}]}]},{"value":["\n  )"]}]}]},{"value":["\n    or "]},{"r":"45","s":[{"value":["exists "]},{"r":"44","s":[{"value":["( "]},{"r":"44","s":[{"s":[{"r":"39","s":[{"r":"38","s":[{"r":"38","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Hospice Encounter\""]}]},{"value":["]"]}]}]},{"value":[" ","HospiceEncounter"]}]}]},{"value":["\n        "]},{"r":"43","s":[{"value":["where "]},{"r":"43","s":[{"r":"41","s":[{"r":"40","s":[{"value":["HospiceEncounter"]}]},{"value":["."]},{"r":"41","s":[{"value":["relevantPeriod"]}]}]},{"r":"43","value":[" ","overlaps day of"," "]},{"r":"42","s":[{"value":["\"Measurement Period\""]}]}]}]}]},{"value":["\n    )"]}]}]}]},{"value":["\n    or "]},{"r":"63","s":[{"value":["exists "]},{"r":"62","s":[{"value":["( "]},{"r":"62","s":[{"s":[{"r":"48","s":[{"r":"47","s":[{"r":"47","s":[{"value":["[","\"Assessment, Performed\"",": "]},{"s":[{"value":["\"Hospice care [Minimum Data Set]\""]}]},{"value":["]"]}]}]},{"value":[" ","HospiceAssessment"]}]}]},{"value":["\n        "]},{"r":"61","s":[{"value":["where "]},{"r":"61","s":[{"r":"52","s":[{"r":"50","s":[{"r":"49","s":[{"value":["HospiceAssessment"]}]},{"value":["."]},{"r":"50","s":[{"value":["result"]}]}]},{"value":[" ","~"," "]},{"r":"51","s":[{"value":["\"Yes (qualifier value)\""]}]}]},{"value":["\n          and "]},{"r":"60","s":[{"r":"58","s":[{"r":"53","s":[{"value":["Global"]}]},{"value":["."]},{"r":"58","s":[{"value":["\"NormalizeInterval\""," ( "]},{"r":"55","s":[{"r":"54","s":[{"value":["HospiceAssessment"]}]},{"value":["."]},{"r":"55","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"57","s":[{"r":"56","s":[{"value":["HospiceAssessment"]}]},{"value":["."]},{"r":"57","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]},{"r":"60","value":[" ","overlaps day of"," "]},{"r":"59","s":[{"value":["\"Measurement Period\""]}]}]}]}]}]},{"value":["\n    )"]}]}]}]},{"value":["\n    or "]},{"r":"72","s":[{"value":["exists "]},{"r":"71","s":[{"value":["( "]},{"r":"71","s":[{"s":[{"r":"66","s":[{"r":"65","s":[{"r":"65","s":[{"value":["[","\"Intervention, Order\"",": "]},{"s":[{"value":["\"Hospice Care Ambulatory\""]}]},{"value":["]"]}]}]},{"value":[" ","HospiceOrder"]}]}]},{"value":["\n        "]},{"r":"70","s":[{"value":["where "]},{"r":"70","s":[{"r":"68","s":[{"r":"67","s":[{"value":["HospiceOrder"]}]},{"value":["."]},{"r":"68","s":[{"value":["authorDatetime"]}]}]},{"r":"70","value":[" ","during day of"," "]},{"r":"69","s":[{"value":["\"Measurement Period\""]}]}]}]}]},{"value":["\n    )"]}]}]}]},{"value":["\n    or "]},{"r":"85","s":[{"value":["exists "]},{"r":"84","s":[{"value":["( "]},{"r":"84","s":[{"s":[{"r":"75","s":[{"r":"74","s":[{"r":"74","s":[{"value":["[","\"Intervention, Performed\"",": "]},{"s":[{"value":["\"Hospice Care Ambulatory\""]}]},{"value":["]"]}]}]},{"value":[" ","HospicePerformed"]}]}]},{"value":["\n        "]},{"r":"83","s":[{"value":["where "]},{"r":"83","s":[{"r":"81","s":[{"r":"76","s":[{"value":["Global"]}]},{"value":["."]},{"r":"81","s":[{"value":["\"NormalizeInterval\""," ( "]},{"r":"78","s":[{"r":"77","s":[{"value":["HospicePerformed"]}]},{"value":["."]},{"r":"78","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"80","s":[{"r":"79","s":[{"value":["HospicePerformed"]}]},{"value":["."]},{"r":"80","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]},{"r":"83","value":[" ","overlaps day of"," "]},{"r":"82","s":[{"value":["\"Measurement Period\""]}]}]}]}]},{"value":["\n    )"]}]}]}]},{"value":["\n  or "]},{"r":"94","s":[{"value":["exists "]},{"r":"93","s":[{"value":["( "]},{"r":"93","s":[{"s":[{"r":"88","s":[{"r":"87","s":[{"r":"87","s":[{"value":["[","\"Diagnosis\"",": "]},{"s":[{"value":["\"Hospice Diagnosis\""]}]},{"value":["]"]}]}]},{"value":[" ","HospiceCareDiagnosis"]}]}]},{"value":["\n        "]},{"r":"92","s":[{"value":["where "]},{"r":"92","s":[{"r":"90","s":[{"r":"89","s":[{"value":["HospiceCareDiagnosis"]}]},{"value":["."]},{"r":"90","s":[{"value":["prevalencePeriod"]}]}]},{"r":"92","value":[" ","overlaps day of"," "]},{"r":"91","s":[{"value":["\"Measurement Period\""]}]}]}]}]},{"value":["\n    )"]}]}]}]}]}}],"expression":{"localId":"95","locator":"25:3-46:5","type":"Or","operand":[{"localId":"86","locator":"25:3-43:5","type":"Or","operand":[{"localId":"73","locator":"25:3-40:5","type":"Or","operand":[{"localId":"64","locator":"25:3-37:5","type":"Or","operand":[{"localId":"46","locator":"25:3-33:5","type":"Or","operand":[{"localId":"37","locator":"25:3-30:3","type":"Exists","operand":{"localId":"36","locator":"25:10-30:3","type":"Query","source":[{"localId":"21","locator":"25:12-25:77","alias":"InpatientEncounter","expression":{"localId":"20","locator":"25:12-25:58","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"25:37-25:57","name":"Encounter Inpatient","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"35","locator":"26:7-29:85","type":"And","operand":[{"localId":"30","locator":"26:13-28:7","type":"Or","operand":[{"localId":"25","locator":"26:15-26:104","type":"Equivalent","operand":[{"localId":"23","locator":"26:15-26:53","path":"dischargeDisposition","scope":"InpatientEncounter","type":"Property"},{"localId":"24","locator":"26:57-26:104","name":"Discharge to home for hospice care (procedure)","type":"CodeRef"}]},{"localId":"29","locator":"27:14-27:118","type":"Equivalent","operand":[{"localId":"27","locator":"27:14-27:52","path":"dischargeDisposition","scope":"InpatientEncounter","type":"Property"},{"localId":"28","locator":"27:56-27:118","name":"Discharge to healthcare facility for hospice care (procedure)","type":"CodeRef"}]}]},{"localId":"34","locator":"29:13-29:85","precision":"Day","type":"In","operand":[{"locator":"29:47-29:50","type":"End","operand":{"localId":"32","locator":"29:13-29:45","path":"relevantPeriod","scope":"InpatientEncounter","type":"Property"}},{"localId":"33","locator":"29:66-29:85","name":"Measurement Period","type":"ParameterRef"}]}]}}},{"localId":"45","locator":"31:8-33:5","type":"Exists","operand":{"localId":"44","locator":"31:15-33:5","type":"Query","source":[{"localId":"39","locator":"31:17-31:78","alias":"HospiceEncounter","expression":{"localId":"38","locator":"31:17-31:61","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"31:42-31:60","name":"Hospice Encounter","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"43","locator":"32:9-32:82","precision":"Day","type":"Overlaps","operand":[{"localId":"41","locator":"32:15-32:45","path":"relevantPeriod","scope":"HospiceEncounter","type":"Property"},{"localId":"42","locator":"32:63-32:82","name":"Measurement Period","type":"ParameterRef"}]}}}]},{"localId":"63","locator":"34:8-37:5","type":"Exists","operand":{"localId":"62","locator":"34:15-37:5","type":"Query","source":[{"localId":"48","locator":"34:17-34:94","alias":"HospiceAssessment","expression":{"localId":"47","locator":"34:17-34:76","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveAssessmentPerformed","templateId":"PositiveAssessmentPerformed","codeProperty":"code","codeComparator":"~","type":"Retrieve","codes":{"type":"ToList","operand":{"locator":"34:43-34:75","name":"Hospice care [Minimum Data Set]","type":"CodeRef"}}}}],"relationship":[],"where":{"localId":"61","locator":"35:9-36:150","type":"And","operand":[{"localId":"52","locator":"35:15-35:64","type":"Equivalent","operand":[{"asType":"{urn:hl7-org:elm-types:r1}Code","type":"As","operand":{"localId":"50","locator":"35:15-35:38","path":"result","scope":"HospiceAssessment","type":"Property"}},{"localId":"51","locator":"35:42-35:64","name":"Yes (qualifier value)","type":"CodeRef"}]},{"localId":"60","locator":"36:15-36:150","precision":"Day","type":"Overlaps","operand":[{"localId":"58","locator":"36:15-36:113","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"55","locator":"36:44-36:77","path":"relevantDatetime","scope":"HospiceAssessment","type":"Property"},{"localId":"57","locator":"36:80-36:111","path":"relevantPeriod","scope":"HospiceAssessment","type":"Property"}]},{"localId":"59","locator":"36:131-36:150","name":"Measurement Period","type":"ParameterRef"}]}]}}}]},{"localId":"72","locator":"38:8-40:5","type":"Exists","operand":{"localId":"71","locator":"38:15-40:5","type":"Query","source":[{"localId":"66","locator":"38:17-38:79","alias":"HospiceOrder","expression":{"localId":"65","locator":"38:17-38:66","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveInterventionOrder","templateId":"PositiveInterventionOrder","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"38:41-38:65","name":"Hospice Care Ambulatory","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"70","locator":"39:9-39:76","precision":"Day","type":"In","operand":[{"localId":"68","locator":"39:15-39:41","path":"authorDatetime","scope":"HospiceOrder","type":"Property"},{"localId":"69","locator":"39:57-39:76","name":"Measurement Period","type":"ParameterRef"}]}}}]},{"localId":"85","locator":"41:8-43:5","type":"Exists","operand":{"localId":"84","locator":"41:15-43:5","type":"Query","source":[{"localId":"75","locator":"41:17-41:87","alias":"HospicePerformed","expression":{"localId":"74","locator":"41:17-41:70","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveInterventionPerformed","templateId":"PositiveInterventionPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"41:45-41:69","name":"Hospice Care Ambulatory","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"83","locator":"42:9-42:148","precision":"Day","type":"Overlaps","operand":[{"localId":"81","locator":"42:15-42:111","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"78","locator":"42:44-42:76","path":"relevantDatetime","scope":"HospicePerformed","type":"Property"},{"localId":"80","locator":"42:79-42:109","path":"relevantPeriod","scope":"HospicePerformed","type":"Property"}]},{"localId":"82","locator":"42:129-42:148","name":"Measurement Period","type":"ParameterRef"}]}}}]},{"localId":"94","locator":"44:6-46:5","type":"Exists","operand":{"localId":"93","locator":"44:13-46:5","type":"Query","source":[{"localId":"88","locator":"44:15-44:69","alias":"HospiceCareDiagnosis","expression":{"localId":"87","locator":"44:15-44:48","dataType":"{urn:healthit-gov:qdm:v5_6}Diagnosis","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"44:29-44:47","name":"Hospice Diagnosis","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"92","locator":"45:9-45:88","precision":"Day","type":"Overlaps","operand":[{"localId":"90","locator":"45:15-45:51","path":"prevalencePeriod","scope":"HospiceCareDiagnosis","type":"Property"},{"localId":"91","locator":"45:69-45:88","name":"Measurement Period","type":"ParameterRef"}]}}}]}}]}}},"elm_annotations":{"statements":[{"children":[{"children":[{"children":[{"text":"define \"Has Hospice Services\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Encounter Inpatient\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"20"}],"node_type":"Retrieve","ref_id":"20"},{"children":[{"text":" InpatientEncounter"}]}],"ref_id":"21"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"InpatientEncounter"}]}],"ref_id":"22"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"dischargeDisposition"}]}],"node_type":"Property","ref_id":"23"}],"node_type":"Property","ref_id":"23"},{"children":[{"text":" ~ "}]},{"children":[{"children":[{"text":"\"Discharge to home for hospice care (procedure)\""}]}],"node_type":"CodeRef","ref_id":"24"}],"node_type":"Equivalent","ref_id":"25"},{"children":[{"text":"\n          or "}]},{"children":[{"children":[{"children":[{"children":[{"text":"InpatientEncounter"}]}],"ref_id":"26"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"dischargeDisposition"}]}],"node_type":"Property","ref_id":"27"}],"node_type":"Property","ref_id":"27"},{"children":[{"text":" ~ "}]},{"children":[{"children":[{"text":"\"Discharge to healthcare facility for hospice care (procedure)\""}]}],"node_type":"CodeRef","ref_id":"28"}],"node_type":"Equivalent","ref_id":"29"}],"node_type":"Or","ref_id":"30"},{"children":[{"text":"\n      )"}]}],"node_type":"Or","ref_id":"30"},{"children":[{"text":"\n        and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"InpatientEncounter"}]}],"ref_id":"31"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"32"}],"node_type":"Property","ref_id":"32"},{"children":[{"text":" ends during day of "}],"node_type":"In","ref_id":"34"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"33"}],"node_type":"In","ref_id":"34"}],"ref_id":"35"}],"ref_id":"35"}],"node_type":"Query","ref_id":"36"},{"children":[{"text":"\n  )"}]}],"node_type":"Query","ref_id":"36"}],"node_type":"Exists","ref_id":"37"},{"children":[{"text":"\n    or "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Hospice Encounter\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"38"}],"node_type":"Retrieve","ref_id":"38"},{"children":[{"text":" HospiceEncounter"}]}],"ref_id":"39"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"HospiceEncounter"}]}],"ref_id":"40"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"41"}],"node_type":"Property","ref_id":"41"},{"children":[{"text":" overlaps day of "}],"ref_id":"43"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"42"}],"ref_id":"43"}],"ref_id":"43"}],"node_type":"Query","ref_id":"44"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"44"}],"node_type":"Exists","ref_id":"45"}],"node_type":"Or","ref_id":"46"},{"children":[{"text":"\n    or "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Assessment, Performed\": "}]},{"children":[{"children":[{"text":"\"Hospice care [Minimum Data Set]\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"47"}],"node_type":"Retrieve","ref_id":"47"},{"children":[{"text":" HospiceAssessment"}]}],"ref_id":"48"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"HospiceAssessment"}]}],"ref_id":"49"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"result"}]}],"node_type":"Property","ref_id":"50"}],"node_type":"Property","ref_id":"50"},{"children":[{"text":" ~ "}]},{"children":[{"children":[{"text":"\"Yes (qualifier value)\""}]}],"node_type":"CodeRef","ref_id":"51"}],"node_type":"Equivalent","ref_id":"52"},{"children":[{"text":"\n          and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"53"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\" ( "}]},{"children":[{"children":[{"children":[{"text":"HospiceAssessment"}]}],"ref_id":"54"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"55"}],"node_type":"Property","ref_id":"55"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"HospiceAssessment"}]}],"ref_id":"56"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"57"}],"node_type":"Property","ref_id":"57"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"58"}],"node_type":"FunctionRef","ref_id":"58"},{"children":[{"text":" overlaps day of "}],"node_type":"Overlaps","ref_id":"60"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"59"}],"node_type":"Overlaps","ref_id":"60"}],"ref_id":"61"}],"ref_id":"61"}],"node_type":"Query","ref_id":"62"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"62"}],"node_type":"Exists","ref_id":"63"}],"node_type":"Or","ref_id":"64"},{"children":[{"text":"\n    or "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Intervention, Order\": "}]},{"children":[{"children":[{"text":"\"Hospice Care Ambulatory\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"65"}],"node_type":"Retrieve","ref_id":"65"},{"children":[{"text":" HospiceOrder"}]}],"ref_id":"66"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"HospiceOrder"}]}],"ref_id":"67"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"68"}],"node_type":"Property","ref_id":"68"},{"children":[{"text":" during day of "}],"ref_id":"70"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"69"}],"ref_id":"70"}],"ref_id":"70"}],"node_type":"Query","ref_id":"71"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"71"}],"node_type":"Exists","ref_id":"72"}],"node_type":"Or","ref_id":"73"},{"children":[{"text":"\n    or "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Intervention, Performed\": "}]},{"children":[{"children":[{"text":"\"Hospice Care Ambulatory\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"74"}],"node_type":"Retrieve","ref_id":"74"},{"children":[{"text":" HospicePerformed"}]}],"ref_id":"75"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"76"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\" ( "}]},{"children":[{"children":[{"children":[{"text":"HospicePerformed"}]}],"ref_id":"77"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"78"}],"node_type":"Property","ref_id":"78"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"HospicePerformed"}]}],"ref_id":"79"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"80"}],"node_type":"Property","ref_id":"80"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"81"}],"node_type":"FunctionRef","ref_id":"81"},{"children":[{"text":" overlaps day of "}],"ref_id":"83"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"82"}],"ref_id":"83"}],"ref_id":"83"}],"node_type":"Query","ref_id":"84"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"84"}],"node_type":"Exists","ref_id":"85"}],"node_type":"Or","ref_id":"86"},{"children":[{"text":"\n  or "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Diagnosis\": "}]},{"children":[{"children":[{"text":"\"Hospice Diagnosis\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"87"}],"node_type":"Retrieve","ref_id":"87"},{"children":[{"text":" HospiceCareDiagnosis"}]}],"ref_id":"88"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"HospiceCareDiagnosis"}]}],"ref_id":"89"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"prevalencePeriod"}]}],"node_type":"Property","ref_id":"90"}],"node_type":"Property","ref_id":"90"},{"children":[{"text":" overlaps day of "}],"ref_id":"92"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"91"}],"ref_id":"92"}],"ref_id":"92"}],"node_type":"Query","ref_id":"93"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"93"}],"node_type":"Exists","ref_id":"94"}],"node_type":"Or","ref_id":"95"}],"ref_id":"96"}],"define_name":"Has Hospice Services"}],"identifier":{"id":"Hospice","version":"5.0.000"}},"is_main_library":false,"is_top_level":true,"library_name":"Hospice","library_version":"5.0.000","statement_dependencies":[{"_id":"689244b50734dfcaf5414924","statement_name":"Has Hospice Services","statement_references":[{"_id":"689244b50734dfcaf5414925","hqmf_id":null,"library_name":"MATGlobalCommonFunctions","statement_name":"NormalizeInterval"}]}]},{"_id":"689244ad0734dfcaf5414534","cql":"library MATGlobalCommonFunctions version '7.0.000'\n\nusing QDM version '5.6'\n\nvalueset \"Emergency Department Visit\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.292' \nvalueset \"Encounter Inpatient\": 'urn:oid:2.16.840.1.113883.3.666.5.307' \nvalueset \"Intensive Care Unit\": 'urn:oid:2.16.840.1.113762.1.4.1029.206' \nvalueset \"Observation Services\": 'urn:oid:2.16.840.1.113762.1.4.1111.143' \nvalueset \"Outpatient Surgery Service\": 'urn:oid:2.16.840.1.113762.1.4.1110.38' \n\nparameter \"Measurement Period\" Interval\u003cDateTime\u003e\n\ncontext Patient\n\ndefine \"ED Encounter\":\n  [\"Encounter, Performed\": \"Emergency Department Visit\"]\n\ndefine \"Inpatient Encounter\":\n  [\"Encounter, Performed\": \"Encounter Inpatient\"] EncounterInpatient\n    where \"LengthInDays\"(EncounterInpatient.relevantPeriod)\u003c= 120\n      and EncounterInpatient.relevantPeriod ends during day of \"Measurement Period\"\n\n/*@description: Returns an interval of date values extracted from the input interval of date-time values\n@comment: This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability.*/\ndefine function \"ToDateInterval\"(period Interval\u003cDateTime\u003e ):\n  Interval[date from start of period, date from end of period]\n\n/*calculates the difference in calendar days between the start and end of the given interval.*/\ndefine function \"LengthInDays\"(Value Interval\u003cDateTime\u003e ):\n  difference in days between start of Value and end of Value\n\n/*returns list of all locations within an encounter, including locations for immediately prior ED visit.*/\ndefine function \"HospitalizationLocations\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet EDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn if EDVisit is null then Visit.facilityLocations \n  \t\telse flatten { EDVisit.facilityLocations, Visit.facilityLocations }\n\n/*Returns the arrival time in the ED for the encounter.*/\ndefine function \"EmergencyDepartmentArrivalTime\"(Encounter \"Encounter, Performed\" ):\n  start of First((\"HospitalizationLocations\"(Encounter))HospitalLocation\n  \t\twhere HospitalLocation.code in \"Emergency Department Visit\"\n  \t\tsort by start of locationPeriod\n  ).locationPeriod\n\n/*Returns admission time for an encounter or for immediately prior emergency department visit.*/\ndefine function \"HospitalAdmissionTime\"(Encounter \"Encounter, Performed\" ):\n  start of \"Hospitalization\"(Encounter)\n\n/*Returns earliest arrival time for an encounter including any prior ED visit.*/\ndefine function \"HospitalArrivalTime\"(Encounter \"Encounter, Performed\" ):\n  start of First((\"HospitalizationLocations\"(Encounter))HospitalLocation\n  \t\tsort by start of locationPeriod\n  ).locationPeriod\n\n/*Hospitalization returns the total interval for admission to discharge for the given encounter, or for the admission of any immediately prior emergency department visit to the discharge of the given encounter.*/\ndefine function \"Hospitalization\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet EDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn Interval[Coalesce(start of EDVisit.relevantPeriod, start of Visit.relevantPeriod), \n  \tend of Visit.relevantPeriod]\n\n/*Returns the length of stay in days (i.e. the number of days between admission and discharge) for the given encounter, or from the admission of any immediately prior emergency department visit to the discharge of the encounter*/\ndefine function \"HospitalizationLengthofStay\"(Encounter \"Encounter, Performed\" ):\n  LengthInDays(\"Hospitalization\"(Encounter))\n\n/*Returns the latest departure time for encounter including any prior ED visit.*/\ndefine function \"HospitalDepartureTime\"(Encounter \"Encounter, Performed\" ):\n  end of Last((\"HospitalizationLocations\"(Encounter))HospitalLocation\n  \t\tsort by start of locationPeriod\n  ).locationPeriod\n\n/*Hospital Discharge Time returns the discharge time for an encounter*/\ndefine function \"HospitalDischargeTime\"(Encounter \"Encounter, Performed\" ):\n  end of Encounter.relevantPeriod\n\n/*Hospitalization with Observation and Outpatient Surgery Service returns the total interval from the start of any immediately prior emergency department visit, outpatient surgery visit or observation visit to the discharge of the given encounter.*/\ndefine function \"HospitalizationWithObservationAndOutpatientSurgeryService\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet ObsVisit: Last([\"Encounter, Performed\": \"Observation Services\"] LastObs\n  \t\t\twhere LastObs.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t),\n  \tVisitStart: Coalesce(start of ObsVisit.relevantPeriod, start of Visit.relevantPeriod),\n  \tEDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before VisitStart\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t),\n  \tVisitStartWithED: Coalesce(start of EDVisit.relevantPeriod, VisitStart),\n  \tOutpatientSurgeryVisit: Last([\"Encounter, Performed\": \"Outpatient Surgery Service\"] LastSurgeryOP\n  \t\t\twhere LastSurgeryOP.relevantPeriod ends 1 hour or less on or before VisitStartWithED\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn Interval[Coalesce(start of OutpatientSurgeryVisit.relevantPeriod, VisitStartWithED), \n  \tend of Visit.relevantPeriod]\n\n/*Hospitalization with Observation returns the total interval from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\ndefine function \"HospitalizationWithObservation\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet ObsVisit: Last([\"Encounter, Performed\": \"Observation Services\"] LastObs\n  \t\t\twhere LastObs.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t),\n  \tVisitStart: Coalesce(start of ObsVisit.relevantPeriod, start of Visit.relevantPeriod),\n  \tEDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before VisitStart\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn Interval[Coalesce(start of EDVisit.relevantPeriod, VisitStart), \n  \tend of Visit.relevantPeriod]\n\n/*Hospitalization with Observation Length of Stay returns the length in days from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\ndefine function \"HospitalizationWithObservationLengthofStay\"(Encounter \"Encounter, Performed\" ):\n  \"LengthInDays\"(\"HospitalizationWithObservation\"(Encounter))\n\n/*First Inpatient Intensive Care Unit returns the first intensive care unit for the given encounter, without considering any immediately prior emergency department visit.*/\ndefine function \"FirstInpatientIntensiveCareUnit\"(Encounter \"Encounter, Performed\" ):\n  First((Encounter.facilityLocations)HospitalLocation\n      where HospitalLocation.code in \"Intensive Care Unit\"\n        and HospitalLocation.locationPeriod during Encounter.relevantPeriod\n      sort by start of locationPeriod\n  )\n\n/*Given a datetime and a period, returns the period (if a period is provided) or the interval beginning and ending on the datetime (if a datetime is provided)*/\ndefine function \"NormalizeInterval\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  if pointInTime is not null then Interval[pointInTime, pointInTime]\n    else if period is not null then period \n    else null as Interval\u003cDateTime\u003e\n\n/*Given an interval, return true if the interval has a starting boundary specified (i.e. the start of the interval is not null and not the minimum DateTime value)*/\ndefine function \"HasStart\"(period Interval\u003cDateTime\u003e ):\n  not ( start of period is null\n      or start of period = minimum DateTime\n  )\n\n/*Given an interval, return true if the interval has an ending boundary specified (i.e. the end of the interval is not null and not the maximum DateTime value)*/\ndefine function \"HasEnd\"(period Interval\u003cDateTime\u003e ):\n  not ( \n    end of period is null\n      or \n      end of period = maximum DateTime\n  )\n\n/*Given an interval, return the ending point if the interval has an ending boundary specified, otherwise, return the starting point*/\ndefine function \"Latest\"(period Interval\u003cDateTime\u003e ):\n  if ( HasEnd(period)) then \n  end of period \n    else start of period\n\n/*Given an interval, return the starting point if the interval has a starting boundary specified, otherwise, return the ending point*/\ndefine function \"Earliest\"(period Interval\u003cDateTime\u003e ):\n  if ( HasStart(period)) then start of period \n    else \n  end of period\n\n/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the ending point of the period if the period has an ending boundary specified, otherwise returns the starting point of the interval*/\ndefine function \"LatestOf\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  Latest(NormalizeInterval(pointInTime, period))\n\n/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the starting point of the period if the period has a starting boundary specified, otherwise returns the ending point of the period*/\ndefine function \"EarliestOf\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  Earliest(NormalizeInterval(pointInTime, period))\n\n","elm":{"library":{"annotation":[{"translatorOptions":"EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion,DisableMethodInvocation","type":"CqlToElmInfo"},{"type":"Annotation","s":{"r":"404","s":[{"value":["","library MATGlobalCommonFunctions version '7.0.000'"]}]}}],"identifier":{"id":"MATGlobalCommonFunctions","version":"7.0.000"},"schemaIdentifier":{"id":"urn:hl7-org:elm","version":"r1"},"usings":{"def":[{"localIdentifier":"System","uri":"urn:hl7-org:elm-types:r1"},{"localId":"1","locator":"3:1-3:23","localIdentifier":"QDM","uri":"urn:healthit-gov:qdm:v5_6","version":"5.6","annotation":[{"type":"Annotation","s":{"r":"1","s":[{"value":["","using "]},{"s":[{"value":["QDM"]}]},{"value":[" version ","'5.6'"]}]}}]}]},"parameters":{"def":[{"localId":"9","locator":"11:1-11:49","name":"Measurement Period","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"9","s":[{"value":["","parameter ","\"Measurement Period\""," "]},{"r":"8","s":[{"value":["Interval\u003c"]},{"r":"7","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}}],"parameterTypeSpecifier":{"localId":"8","locator":"11:32-11:49","type":"IntervalTypeSpecifier","pointType":{"localId":"7","locator":"11:41-11:48","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},"valueSets":{"def":[{"localId":"2","locator":"5:1-5:82","name":"Emergency Department Visit","id":"2.16.840.1.113883.3.117.1.7.1.292","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"2","s":[{"value":["","valueset ","\"Emergency Department Visit\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.292'"]}]}}]},{"localId":"3","locator":"6:1-6:71","name":"Encounter Inpatient","id":"2.16.840.1.113883.3.666.5.307","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"3","s":[{"value":["","valueset ","\"Encounter Inpatient\"",": ","'urn:oid:2.16.840.1.113883.3.666.5.307'"]}]}}]},{"localId":"4","locator":"7:1-7:72","name":"Intensive Care Unit","id":"2.16.840.1.113762.1.4.1029.206","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"4","s":[{"value":["","valueset ","\"Intensive Care Unit\"",": ","'urn:oid:2.16.840.1.113762.1.4.1029.206'"]}]}}]},{"localId":"5","locator":"8:1-8:73","name":"Observation Services","id":"2.16.840.1.113762.1.4.1111.143","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"5","s":[{"value":["","valueset ","\"Observation Services\"",": ","'urn:oid:2.16.840.1.113762.1.4.1111.143'"]}]}}]},{"localId":"6","locator":"9:1-9:78","name":"Outpatient Surgery Service","id":"2.16.840.1.113762.1.4.1110.38","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"6","s":[{"value":["","valueset ","\"Outpatient Surgery Service\"",": ","'urn:oid:2.16.840.1.113762.1.4.1110.38'"]}]}}]}]},"contexts":{"def":[{"locator":"13:1-13:15","name":"Patient"}]},"statements":{"def":[{"locator":"13:1-13:15","name":"Patient","context":"Patient","expression":{"type":"SingletonFrom","operand":{"locator":"13:1-13:15","dataType":"{urn:healthit-gov:qdm:v5_6}Patient","templateId":"Patient","type":"Retrieve"}}},{"localId":"11","locator":"15:1-16:56","name":"ED Encounter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"11","s":[{"value":["","define ","\"ED Encounter\"",":\n  "]},{"r":"10","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"10","locator":"16:3-16:56","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"16:28-16:55","name":"Emergency Department Visit","type":"ValueSetRef"}}},{"localId":"23","locator":"32:1-33:60","name":"LengthInDays","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"23","s":[{"value":["/*calculates the difference in calendar days between the start and end of the given interval.*/","define function ","\"LengthInDays\"","(","Value"," "]},{"r":"17","s":[{"value":["Interval\u003c"]},{"r":"16","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"22","s":[{"r":"22","s":[{"value":["difference in days between "]},{"r":"19","s":[{"value":["start of "]},{"r":"18","s":[{"value":["Value"]}]}]},{"value":[" and "]},{"r":"21","s":[{"value":["end of "]},{"r":"20","s":[{"value":["Value"]}]}]}]}]}]}}],"expression":{"localId":"22","locator":"33:3-33:60","precision":"Day","type":"DifferenceBetween","operand":[{"localId":"19","locator":"33:30-33:43","type":"Start","operand":{"localId":"18","locator":"33:39-33:43","name":"Value","type":"OperandRef"}},{"localId":"21","locator":"33:49-33:60","type":"End","operand":{"localId":"20","locator":"33:56-33:60","name":"Value","type":"OperandRef"}}]},"operand":[{"name":"Value","operandTypeSpecifier":{"localId":"17","locator":"32:38-32:55","type":"IntervalTypeSpecifier","pointType":{"localId":"16","locator":"32:47-32:54","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"33","locator":"18:1-21:83","name":"Inpatient Encounter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"33","s":[{"value":["","define ","\"Inpatient Encounter\"",":\n  "]},{"r":"32","s":[{"s":[{"r":"13","s":[{"r":"12","s":[{"r":"12","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Encounter Inpatient\""]}]},{"value":["]"]}]}]},{"value":[" ","EncounterInpatient"]}]}]},{"value":["\n    "]},{"r":"31","s":[{"value":["where "]},{"r":"31","s":[{"r":"26","s":[{"r":"24","s":[{"value":["\"LengthInDays\"","("]},{"r":"15","s":[{"r":"14","s":[{"value":["EncounterInpatient"]}]},{"value":["."]},{"r":"15","s":[{"value":["relevantPeriod"]}]}]},{"value":[")"]}]},{"r":"25","value":["\u003c="," ","120"]}]},{"value":["\n      and "]},{"r":"30","s":[{"r":"28","s":[{"r":"27","s":[{"value":["EncounterInpatient"]}]},{"value":["."]},{"r":"28","s":[{"value":["relevantPeriod"]}]}]},{"r":"30","value":[" ","ends during day of"," "]},{"r":"29","s":[{"value":["\"Measurement Period\""]}]}]}]}]}]}]}}],"expression":{"localId":"32","locator":"19:3-21:83","type":"Query","source":[{"localId":"13","locator":"19:3-19:68","alias":"EncounterInpatient","expression":{"localId":"12","locator":"19:3-19:49","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"19:28-19:48","name":"Encounter Inpatient","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"31","locator":"20:5-21:83","type":"And","operand":[{"localId":"26","locator":"20:11-20:65","type":"LessOrEqual","operand":[{"localId":"24","locator":"20:11-20:59","name":"LengthInDays","type":"FunctionRef","operand":[{"localId":"15","locator":"20:26-20:58","path":"relevantPeriod","scope":"EncounterInpatient","type":"Property"}]},{"localId":"25","locator":"20:63-20:65","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"120","type":"Literal"}]},{"localId":"30","locator":"21:11-21:83","precision":"Day","type":"In","operand":[{"locator":"21:45-21:48","type":"End","operand":{"localId":"28","locator":"21:11-21:43","path":"relevantPeriod","scope":"EncounterInpatient","type":"Property"}},{"localId":"29","locator":"21:64-21:83","name":"Measurement Period","type":"ParameterRef"}]}]}}},{"localId":"43","locator":"28:1-29:62","name":"ToDateInterval","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","t":[{"name":"description","value":"Returns an interval of date values extracted from the input interval of date-time values"},{"name":"description","value":"Returns an interval of date values extracted from the input interval of date-time values"},{"name":"comment","value":"This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability."}],"s":{"r":"43","s":[{"value":["/*@description: Returns an interval of date values extracted from the input interval of date-time values\n@comment: This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability.*/","define function ","\"ToDateInterval\"","(","period"," "]},{"r":"35","s":[{"value":["Interval\u003c"]},{"r":"34","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"42","s":[{"r":"42","s":[{"value":["Interval["]},{"r":"38","s":[{"value":["date from "]},{"r":"37","s":[{"value":["start of "]},{"r":"36","s":[{"value":["period"]}]}]}]},{"value":[", "]},{"r":"41","s":[{"value":["date from "]},{"r":"40","s":[{"value":["end of "]},{"r":"39","s":[{"value":["period"]}]}]}]},{"value":["]"]}]}]}]}}],"expression":{"localId":"42","locator":"29:3-29:62","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"38","locator":"29:12-29:36","type":"DateFrom","operand":{"localId":"37","locator":"29:22-29:36","type":"Start","operand":{"localId":"36","locator":"29:31-29:36","name":"period","type":"OperandRef"}}},"high":{"localId":"41","locator":"29:39-29:61","type":"DateFrom","operand":{"localId":"40","locator":"29:49-29:61","type":"End","operand":{"localId":"39","locator":"29:56-29:61","name":"period","type":"OperandRef"}}}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"35","locator":"28:41-28:58","type":"IntervalTypeSpecifier","pointType":{"localId":"34","locator":"28:50-28:57","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"79","locator":"36:1-44:71","name":"HospitalizationLocations","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"79","s":[{"value":["/*returns list of all locations within an encounter, including locations for immediately prior ED visit.*/","define function ","\"HospitalizationLocations\"","(","Encounter"," "]},{"r":"47","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"78","s":[{"r":"78","s":[{"s":[{"r":"49","s":[{"r":"48","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"65","s":[{"value":["EDVisit",": "]},{"r":"64","s":[{"value":["Last","("]},{"r":"63","s":[{"s":[{"r":"51","s":[{"r":"50","s":[{"r":"50","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"58","s":[{"value":["where "]},{"r":"58","s":[{"r":"53","s":[{"r":"52","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"53","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"58","s":[{"value":["ends "]},{"r":"57","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"56","s":[{"value":["start of "]},{"r":"55","s":[{"r":"54","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"55","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"62","s":[{"value":["sort by \n  \t\t\t"]},{"r":"61","s":[{"r":"60","s":[{"value":["end of "]},{"r":"59","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"77","s":[{"value":["return "]},{"r":"76","s":[{"value":["if "]},{"r":"67","s":[{"r":"66","s":[{"value":["EDVisit"]}]},{"value":[" is null"]}]},{"value":[" then "]},{"r":"69","s":[{"r":"68","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"69","s":[{"value":["facilityLocations"]}]}]},{"value":[" \n  \t\telse "]},{"r":"75","s":[{"value":["flatten "]},{"r":"74","s":[{"value":["{ "]},{"r":"71","s":[{"r":"70","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"71","s":[{"value":["facilityLocations"]}]}]},{"value":[", "]},{"r":"73","s":[{"r":"72","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"73","s":[{"value":["facilityLocations"]}]}]},{"value":[" }"]}]}]}]}]}]}]}]}}],"expression":{"localId":"78","locator":"37:3-44:71","type":"Query","source":[{"localId":"49","locator":"37:3-37:17","alias":"Visit","expression":{"localId":"48","locator":"37:3-37:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"65","locator":"38:8-42:4","identifier":"EDVisit","expression":{"localId":"64","locator":"38:17-42:4","type":"Last","source":{"localId":"63","locator":"38:22-41:26","type":"Query","source":[{"localId":"51","locator":"38:22-38:82","alias":"LastED","expression":{"localId":"50","locator":"38:22-38:75","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"38:47-38:74","name":"Emergency Department Visit","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"58","locator":"39:6-39:95","type":"And","operand":[{"locator":"39:39-39:52","type":"In","operand":[{"locator":"39:34-39:37","type":"End","operand":{"localId":"53","locator":"39:12-39:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"39:39-39:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"39:67-39:95","type":"Subtract","operand":[{"localId":"56","locator":"39:67-39:95","type":"Start","operand":{"localId":"55","locator":"39:76-39:95","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"57","locator":"39:39-39:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"56","locator":"39:67-39:95","type":"Start","operand":{"localId":"55","locator":"39:76-39:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"39:39-39:52","type":"Not","operand":{"locator":"39:39-39:52","type":"IsNull","operand":{"localId":"56","locator":"39:67-39:95","type":"Start","operand":{"localId":"55","locator":"39:76-39:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"62","locator":"40:6-41:26","by":[{"localId":"61","locator":"41:6-41:26","direction":"asc","type":"ByExpression","expression":{"localId":"60","locator":"41:6-41:26","type":"End","operand":{"localId":"59","locator":"41:13-41:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"77","locator":"43:4-44:71","expression":{"localId":"76","locator":"43:11-44:71","type":"If","condition":{"localId":"67","locator":"43:14-43:28","type":"IsNull","operand":{"localId":"66","locator":"43:14-43:20","name":"EDVisit","type":"QueryLetRef"}},"then":{"localId":"69","locator":"43:35-43:57","path":"facilityLocations","scope":"Visit","type":"Property"},"else":{"localId":"75","locator":"44:10-44:71","type":"Flatten","operand":{"localId":"74","locator":"44:18-44:71","type":"List","element":[{"localId":"71","locator":"44:20-44:44","path":"facilityLocations","type":"Property","source":{"localId":"70","locator":"44:20-44:26","name":"EDVisit","type":"QueryLetRef"}},{"localId":"73","locator":"44:47-44:69","path":"facilityLocations","scope":"Visit","type":"Property"}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"47","locator":"36:54-36:75","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"96","locator":"47:1-51:18","name":"EmergencyDepartmentArrivalTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"96","s":[{"value":["/*Returns the arrival time in the ED for the encounter.*/","define function ","\"EmergencyDepartmentArrivalTime\"","(","Encounter"," "]},{"r":"80","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"95","s":[{"r":"95","s":[{"value":["start of "]},{"r":"94","s":[{"r":"93","s":[{"value":["First","("]},{"r":"92","s":[{"s":[{"r":"83","s":[{"r":"82","s":[{"value":["("]},{"r":"82","s":[{"value":["\"HospitalizationLocations\"","("]},{"r":"81","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n  \t\t"]},{"r":"87","s":[{"value":["where "]},{"r":"87","s":[{"r":"85","s":[{"r":"84","s":[{"value":["HospitalLocation"]}]},{"value":["."]},{"r":"85","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"86","s":[{"value":["\"Emergency Department Visit\""]}]}]}]},{"value":["\n  \t\t"]},{"r":"91","s":[{"value":["sort by "]},{"r":"90","s":[{"r":"89","s":[{"value":["start of "]},{"r":"88","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"94","s":[{"value":["locationPeriod"]}]}]}]}]}]}}],"expression":{"localId":"95","locator":"48:3-51:18","type":"Start","operand":{"localId":"94","locator":"48:12-51:18","path":"locationPeriod","type":"Property","source":{"localId":"93","locator":"48:12-51:3","type":"First","source":{"localId":"92","locator":"48:18-50:35","type":"Query","source":[{"localId":"83","locator":"48:18-48:72","alias":"HospitalLocation","expression":{"localId":"82","locator":"48:18-48:56","name":"HospitalizationLocations","type":"FunctionRef","operand":[{"localId":"81","locator":"48:46-48:54","name":"Encounter","type":"OperandRef"}]}}],"relationship":[],"where":{"localId":"87","locator":"49:5-49:63","type":"InValueSet","code":{"localId":"85","locator":"49:11-49:31","path":"code","scope":"HospitalLocation","type":"Property"},"valueset":{"localId":"86","locator":"49:36-49:63","name":"Emergency Department Visit","type":"ValueSetRef"}},"sort":{"localId":"91","locator":"50:5-50:35","by":[{"localId":"90","locator":"50:13-50:35","direction":"asc","type":"ByExpression","expression":{"localId":"89","locator":"50:13-50:35","type":"Start","operand":{"localId":"88","locator":"50:22-50:35","name":"locationPeriod","type":"IdentifierRef"}}}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"80","locator":"47:60-47:81","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"131","locator":"64:1-72:31","name":"Hospitalization","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"131","s":[{"value":["/*Hospitalization returns the total interval for admission to discharge for the given encounter, or for the admission of any immediately prior emergency department visit to the discharge of the given encounter.*/","define function ","\"Hospitalization\"","(","Encounter"," "]},{"r":"99","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"130","s":[{"r":"130","s":[{"s":[{"r":"101","s":[{"r":"100","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"117","s":[{"value":["EDVisit",": "]},{"r":"116","s":[{"value":["Last","("]},{"r":"115","s":[{"s":[{"r":"103","s":[{"r":"102","s":[{"r":"102","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"110","s":[{"value":["where "]},{"r":"110","s":[{"r":"105","s":[{"r":"104","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"105","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"110","s":[{"value":["ends "]},{"r":"109","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"108","s":[{"value":["start of "]},{"r":"107","s":[{"r":"106","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"107","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"114","s":[{"value":["sort by \n  \t\t\t"]},{"r":"113","s":[{"r":"112","s":[{"value":["end of "]},{"r":"111","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"129","s":[{"value":["return "]},{"r":"128","s":[{"value":["Interval["]},{"r":"124","s":[{"value":["Coalesce","("]},{"r":"120","s":[{"value":["start of "]},{"r":"119","s":[{"r":"118","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"119","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"123","s":[{"value":["start of "]},{"r":"122","s":[{"r":"121","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"122","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]},{"value":[", \n  \t"]},{"r":"127","s":[{"value":["end of "]},{"r":"126","s":[{"r":"125","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"126","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["]"]}]}]}]}]}]}}],"expression":{"localId":"130","locator":"65:3-72:31","type":"Query","source":[{"localId":"101","locator":"65:3-65:17","alias":"Visit","expression":{"localId":"100","locator":"65:3-65:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"117","locator":"66:8-70:4","identifier":"EDVisit","expression":{"localId":"116","locator":"66:17-70:4","type":"Last","source":{"localId":"115","locator":"66:22-69:26","type":"Query","source":[{"localId":"103","locator":"66:22-66:82","alias":"LastED","expression":{"localId":"102","locator":"66:22-66:75","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"66:47-66:74","name":"Emergency Department Visit","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"110","locator":"67:6-67:95","type":"And","operand":[{"locator":"67:39-67:52","type":"In","operand":[{"locator":"67:34-67:37","type":"End","operand":{"localId":"105","locator":"67:12-67:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"67:39-67:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"67:67-67:95","type":"Subtract","operand":[{"localId":"108","locator":"67:67-67:95","type":"Start","operand":{"localId":"107","locator":"67:76-67:95","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"109","locator":"67:39-67:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"108","locator":"67:67-67:95","type":"Start","operand":{"localId":"107","locator":"67:76-67:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"67:39-67:52","type":"Not","operand":{"locator":"67:39-67:52","type":"IsNull","operand":{"localId":"108","locator":"67:67-67:95","type":"Start","operand":{"localId":"107","locator":"67:76-67:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"114","locator":"68:6-69:26","by":[{"localId":"113","locator":"69:6-69:26","direction":"asc","type":"ByExpression","expression":{"localId":"112","locator":"69:6-69:26","type":"End","operand":{"localId":"111","locator":"69:13-69:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"129","locator":"71:4-72:31","expression":{"localId":"128","locator":"71:11-72:31","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"124","locator":"71:20-71:91","type":"Coalesce","operand":[{"localId":"120","locator":"71:29-71:59","type":"Start","operand":{"localId":"119","locator":"71:38-71:59","path":"relevantPeriod","type":"Property","source":{"localId":"118","locator":"71:38-71:44","name":"EDVisit","type":"QueryLetRef"}}},{"localId":"123","locator":"71:62-71:90","type":"Start","operand":{"localId":"122","locator":"71:71-71:90","path":"relevantPeriod","scope":"Visit","type":"Property"}}]},"high":{"localId":"127","locator":"72:4-72:30","type":"End","operand":{"localId":"126","locator":"72:11-72:30","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"99","locator":"64:45-64:66","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"134","locator":"54:1-55:39","name":"HospitalAdmissionTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"134","s":[{"value":["/*Returns admission time for an encounter or for immediately prior emergency department visit.*/","define function ","\"HospitalAdmissionTime\"","(","Encounter"," "]},{"r":"97","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"133","s":[{"r":"133","s":[{"value":["start of "]},{"r":"132","s":[{"value":["\"Hospitalization\"","("]},{"r":"98","s":[{"value":["Encounter"]}]},{"value":[")"]}]}]}]}]}}],"expression":{"localId":"133","locator":"55:3-55:39","type":"Start","operand":{"localId":"132","locator":"55:12-55:39","name":"Hospitalization","type":"FunctionRef","operand":[{"localId":"98","locator":"55:30-55:38","name":"Encounter","type":"OperandRef"}]}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"97","locator":"54:51-54:72","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"147","locator":"58:1-61:18","name":"HospitalArrivalTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"147","s":[{"value":["/*Returns earliest arrival time for an encounter including any prior ED visit.*/","define function ","\"HospitalArrivalTime\"","(","Encounter"," "]},{"r":"135","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"146","s":[{"r":"146","s":[{"value":["start of "]},{"r":"145","s":[{"r":"144","s":[{"value":["First","("]},{"r":"143","s":[{"s":[{"r":"138","s":[{"r":"137","s":[{"value":["("]},{"r":"137","s":[{"value":["\"HospitalizationLocations\"","("]},{"r":"136","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n  \t\t"]},{"r":"142","s":[{"value":["sort by "]},{"r":"141","s":[{"r":"140","s":[{"value":["start of "]},{"r":"139","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"145","s":[{"value":["locationPeriod"]}]}]}]}]}]}}],"expression":{"localId":"146","locator":"59:3-61:18","type":"Start","operand":{"localId":"145","locator":"59:12-61:18","path":"locationPeriod","type":"Property","source":{"localId":"144","locator":"59:12-61:3","type":"First","source":{"localId":"143","locator":"59:18-60:35","type":"Query","source":[{"localId":"138","locator":"59:18-59:72","alias":"HospitalLocation","expression":{"localId":"137","locator":"59:18-59:56","name":"HospitalizationLocations","type":"FunctionRef","operand":[{"localId":"136","locator":"59:46-59:54","name":"Encounter","type":"OperandRef"}]}}],"relationship":[],"sort":{"localId":"142","locator":"60:5-60:35","by":[{"localId":"141","locator":"60:13-60:35","direction":"asc","type":"ByExpression","expression":{"localId":"140","locator":"60:13-60:35","type":"Start","operand":{"localId":"139","locator":"60:22-60:35","name":"locationPeriod","type":"IdentifierRef"}}}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"135","locator":"58:49-58:70","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"154","locator":"75:1-76:44","name":"HospitalizationLengthofStay","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"154","s":[{"value":["/*Returns the length of stay in days (i.e. the number of days between admission and discharge) for the given encounter, or from the admission of any immediately prior emergency department visit to the discharge of the encounter*/","define function ","\"HospitalizationLengthofStay\"","(","Encounter"," "]},{"r":"150","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"153","s":[{"r":"153","s":[{"value":["LengthInDays","("]},{"r":"152","s":[{"value":["\"Hospitalization\"","("]},{"r":"151","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"153","locator":"76:3-76:44","name":"LengthInDays","type":"FunctionRef","operand":[{"localId":"152","locator":"76:16-76:43","name":"Hospitalization","type":"FunctionRef","operand":[{"localId":"151","locator":"76:34-76:42","name":"Encounter","type":"OperandRef"}]}]},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"150","locator":"75:57-75:78","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"167","locator":"79:1-82:18","name":"HospitalDepartureTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"167","s":[{"value":["/*Returns the latest departure time for encounter including any prior ED visit.*/","define function ","\"HospitalDepartureTime\"","(","Encounter"," "]},{"r":"155","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"166","s":[{"r":"166","s":[{"value":["end of "]},{"r":"165","s":[{"r":"164","s":[{"value":["Last","("]},{"r":"163","s":[{"s":[{"r":"158","s":[{"r":"157","s":[{"value":["("]},{"r":"157","s":[{"value":["\"HospitalizationLocations\"","("]},{"r":"156","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n  \t\t"]},{"r":"162","s":[{"value":["sort by "]},{"r":"161","s":[{"r":"160","s":[{"value":["start of "]},{"r":"159","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"165","s":[{"value":["locationPeriod"]}]}]}]}]}]}}],"expression":{"localId":"166","locator":"80:3-82:18","type":"End","operand":{"localId":"165","locator":"80:10-82:18","path":"locationPeriod","type":"Property","source":{"localId":"164","locator":"80:10-82:3","type":"Last","source":{"localId":"163","locator":"80:15-81:35","type":"Query","source":[{"localId":"158","locator":"80:15-80:69","alias":"HospitalLocation","expression":{"localId":"157","locator":"80:15-80:53","name":"HospitalizationLocations","type":"FunctionRef","operand":[{"localId":"156","locator":"80:43-80:51","name":"Encounter","type":"OperandRef"}]}}],"relationship":[],"sort":{"localId":"162","locator":"81:5-81:35","by":[{"localId":"161","locator":"81:13-81:35","direction":"asc","type":"ByExpression","expression":{"localId":"160","locator":"81:13-81:35","type":"Start","operand":{"localId":"159","locator":"81:22-81:35","name":"locationPeriod","type":"IdentifierRef"}}}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"155","locator":"79:51-79:72","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"172","locator":"85:1-86:33","name":"HospitalDischargeTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"172","s":[{"value":["/*Hospital Discharge Time returns the discharge time for an encounter*/","define function ","\"HospitalDischargeTime\"","(","Encounter"," "]},{"r":"168","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"171","s":[{"r":"171","s":[{"value":["end of "]},{"r":"170","s":[{"r":"169","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"170","s":[{"value":["relevantPeriod"]}]}]}]}]}]}}],"expression":{"localId":"171","locator":"86:3-86:33","type":"End","operand":{"localId":"170","locator":"86:10-86:33","path":"relevantPeriod","type":"Property","source":{"localId":"169","locator":"86:10-86:18","name":"Encounter","type":"OperandRef"}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"168","locator":"85:51-85:72","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"245","locator":"89:1-109:31","name":"HospitalizationWithObservationAndOutpatientSurgeryService","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"245","s":[{"value":["/*Hospitalization with Observation and Outpatient Surgery Service returns the total interval from the start of any immediately prior emergency department visit, outpatient surgery visit or observation visit to the discharge of the given encounter.*/","define function ","\"HospitalizationWithObservationAndOutpatientSurgeryService\"","(","Encounter"," "]},{"r":"173","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"244","s":[{"r":"244","s":[{"s":[{"r":"175","s":[{"r":"174","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"191","s":[{"value":["ObsVisit",": "]},{"r":"190","s":[{"value":["Last","("]},{"r":"189","s":[{"s":[{"r":"177","s":[{"r":"176","s":[{"r":"176","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Observation Services\""]}]},{"value":["]"]}]}]},{"value":[" ","LastObs"]}]}]},{"value":["\n  \t\t\t"]},{"r":"184","s":[{"value":["where "]},{"r":"184","s":[{"r":"179","s":[{"r":"178","s":[{"value":["LastObs"]}]},{"value":["."]},{"r":"179","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"184","s":[{"value":["ends "]},{"r":"183","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"182","s":[{"value":["start of "]},{"r":"181","s":[{"r":"180","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"181","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"188","s":[{"value":["sort by \n  \t\t\t"]},{"r":"187","s":[{"r":"186","s":[{"value":["end of "]},{"r":"185","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]},{"value":[",\n  \t"]},{"r":"199","s":[{"value":["VisitStart",": "]},{"r":"198","s":[{"value":["Coalesce","("]},{"r":"194","s":[{"value":["start of "]},{"r":"193","s":[{"r":"192","s":[{"value":["ObsVisit"]}]},{"value":["."]},{"r":"193","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"197","s":[{"value":["start of "]},{"r":"196","s":[{"r":"195","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"196","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]}]},{"value":[",\n  \t"]},{"r":"213","s":[{"value":["EDVisit",": "]},{"r":"212","s":[{"value":["Last","("]},{"r":"211","s":[{"s":[{"r":"201","s":[{"r":"200","s":[{"r":"200","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"206","s":[{"value":["where "]},{"r":"206","s":[{"r":"203","s":[{"r":"202","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"203","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"206","s":[{"value":["ends "]},{"r":"205","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"204","s":[{"value":["VisitStart"]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"210","s":[{"value":["sort by \n  \t\t\t"]},{"r":"209","s":[{"r":"208","s":[{"value":["end of "]},{"r":"207","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]},{"value":[",\n  \t"]},{"r":"219","s":[{"value":["VisitStartWithED",": "]},{"r":"218","s":[{"value":["Coalesce","("]},{"r":"216","s":[{"value":["start of "]},{"r":"215","s":[{"r":"214","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"215","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"217","s":[{"value":["VisitStart"]}]},{"value":[")"]}]}]},{"value":[",\n  \t"]},{"r":"233","s":[{"value":["OutpatientSurgeryVisit",": "]},{"r":"232","s":[{"value":["Last","("]},{"r":"231","s":[{"s":[{"r":"221","s":[{"r":"220","s":[{"r":"220","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Outpatient Surgery Service\""]}]},{"value":["]"]}]}]},{"value":[" ","LastSurgeryOP"]}]}]},{"value":["\n  \t\t\t"]},{"r":"226","s":[{"value":["where "]},{"r":"226","s":[{"r":"223","s":[{"r":"222","s":[{"value":["LastSurgeryOP"]}]},{"value":["."]},{"r":"223","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"226","s":[{"value":["ends "]},{"r":"225","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"224","s":[{"value":["VisitStartWithED"]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"230","s":[{"value":["sort by \n  \t\t\t"]},{"r":"229","s":[{"r":"228","s":[{"value":["end of "]},{"r":"227","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"243","s":[{"value":["return "]},{"r":"242","s":[{"value":["Interval["]},{"r":"238","s":[{"value":["Coalesce","("]},{"r":"236","s":[{"value":["start of "]},{"r":"235","s":[{"r":"234","s":[{"value":["OutpatientSurgeryVisit"]}]},{"value":["."]},{"r":"235","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"237","s":[{"value":["VisitStartWithED"]}]},{"value":[")"]}]},{"value":[", \n  \t"]},{"r":"241","s":[{"value":["end of "]},{"r":"240","s":[{"r":"239","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"240","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["]"]}]}]}]}]}]}}],"expression":{"localId":"244","locator":"90:3-109:31","type":"Query","source":[{"localId":"175","locator":"90:3-90:17","alias":"Visit","expression":{"localId":"174","locator":"90:3-90:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"191","locator":"91:8-95:4","identifier":"ObsVisit","expression":{"localId":"190","locator":"91:18-95:4","type":"Last","source":{"localId":"189","locator":"91:23-94:26","type":"Query","source":[{"localId":"177","locator":"91:23-91:78","alias":"LastObs","expression":{"localId":"176","locator":"91:23-91:70","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"91:48-91:69","name":"Observation Services","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"184","locator":"92:6-92:96","type":"And","operand":[{"locator":"92:40-92:53","type":"In","operand":[{"locator":"92:35-92:38","type":"End","operand":{"localId":"179","locator":"92:12-92:33","path":"relevantPeriod","scope":"LastObs","type":"Property"}},{"locator":"92:40-92:53","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"92:68-92:96","type":"Subtract","operand":[{"localId":"182","locator":"92:68-92:96","type":"Start","operand":{"localId":"181","locator":"92:77-92:96","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"183","locator":"92:40-92:45","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"182","locator":"92:68-92:96","type":"Start","operand":{"localId":"181","locator":"92:77-92:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"92:40-92:53","type":"Not","operand":{"locator":"92:40-92:53","type":"IsNull","operand":{"localId":"182","locator":"92:68-92:96","type":"Start","operand":{"localId":"181","locator":"92:77-92:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"188","locator":"93:6-94:26","by":[{"localId":"187","locator":"94:6-94:26","direction":"asc","type":"ByExpression","expression":{"localId":"186","locator":"94:6-94:26","type":"End","operand":{"localId":"185","locator":"94:13-94:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}},{"localId":"199","locator":"96:4-96:88","identifier":"VisitStart","expression":{"localId":"198","locator":"96:16-96:88","type":"Coalesce","operand":[{"localId":"194","locator":"96:25-96:56","type":"Start","operand":{"localId":"193","locator":"96:34-96:56","path":"relevantPeriod","type":"Property","source":{"localId":"192","locator":"96:34-96:41","name":"ObsVisit","type":"QueryLetRef"}}},{"localId":"197","locator":"96:59-96:87","type":"Start","operand":{"localId":"196","locator":"96:68-96:87","path":"relevantPeriod","scope":"Visit","type":"Property"}}]}},{"localId":"213","locator":"97:4-101:4","identifier":"EDVisit","expression":{"localId":"212","locator":"97:13-101:4","type":"Last","source":{"localId":"211","locator":"97:18-100:26","type":"Query","source":[{"localId":"201","locator":"97:18-97:78","alias":"LastED","expression":{"localId":"200","locator":"97:18-97:71","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"97:43-97:70","name":"Emergency Department Visit","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"206","locator":"98:6-98:76","type":"And","operand":[{"locator":"98:39-98:52","type":"In","operand":[{"locator":"98:34-98:37","type":"End","operand":{"localId":"203","locator":"98:12-98:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"98:39-98:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"98:67-98:76","type":"Subtract","operand":[{"localId":"204","locator":"98:67-98:76","name":"VisitStart","type":"QueryLetRef"},{"localId":"205","locator":"98:39-98:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"204","locator":"98:67-98:76","name":"VisitStart","type":"QueryLetRef"}}]},{"locator":"98:39-98:52","type":"Not","operand":{"locator":"98:39-98:52","type":"IsNull","operand":{"localId":"204","locator":"98:67-98:76","name":"VisitStart","type":"QueryLetRef"}}}]},"sort":{"localId":"210","locator":"99:6-100:26","by":[{"localId":"209","locator":"100:6-100:26","direction":"asc","type":"ByExpression","expression":{"localId":"208","locator":"100:6-100:26","type":"End","operand":{"localId":"207","locator":"100:13-100:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}},{"localId":"219","locator":"102:4-102:74","identifier":"VisitStartWithED","expression":{"localId":"218","locator":"102:22-102:74","type":"Coalesce","operand":[{"localId":"216","locator":"102:31-102:61","type":"Start","operand":{"localId":"215","locator":"102:40-102:61","path":"relevantPeriod","type":"Property","source":{"localId":"214","locator":"102:40-102:46","name":"EDVisit","type":"QueryLetRef"}}},{"localId":"217","locator":"102:64-102:73","name":"VisitStart","type":"QueryLetRef"}]}},{"localId":"233","locator":"103:4-107:4","identifier":"OutpatientSurgeryVisit","expression":{"localId":"232","locator":"103:28-107:4","type":"Last","source":{"localId":"231","locator":"103:33-106:26","type":"Query","source":[{"localId":"221","locator":"103:33-103:100","alias":"LastSurgeryOP","expression":{"localId":"220","locator":"103:33-103:86","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"103:58-103:85","name":"Outpatient Surgery Service","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"226","locator":"104:6-104:89","type":"And","operand":[{"locator":"104:46-104:59","type":"In","operand":[{"locator":"104:41-104:44","type":"End","operand":{"localId":"223","locator":"104:12-104:39","path":"relevantPeriod","scope":"LastSurgeryOP","type":"Property"}},{"locator":"104:46-104:59","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"104:74-104:89","type":"Subtract","operand":[{"localId":"224","locator":"104:74-104:89","name":"VisitStartWithED","type":"QueryLetRef"},{"localId":"225","locator":"104:46-104:51","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"224","locator":"104:74-104:89","name":"VisitStartWithED","type":"QueryLetRef"}}]},{"locator":"104:46-104:59","type":"Not","operand":{"locator":"104:46-104:59","type":"IsNull","operand":{"localId":"224","locator":"104:74-104:89","name":"VisitStartWithED","type":"QueryLetRef"}}}]},"sort":{"localId":"230","locator":"105:6-106:26","by":[{"localId":"229","locator":"106:6-106:26","direction":"asc","type":"ByExpression","expression":{"localId":"228","locator":"106:6-106:26","type":"End","operand":{"localId":"227","locator":"106:13-106:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"243","locator":"108:4-109:31","expression":{"localId":"242","locator":"108:11-109:31","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"238","locator":"108:20-108:93","type":"Coalesce","operand":[{"localId":"236","locator":"108:29-108:74","type":"Start","operand":{"localId":"235","locator":"108:38-108:74","path":"relevantPeriod","type":"Property","source":{"localId":"234","locator":"108:38-108:59","name":"OutpatientSurgeryVisit","type":"QueryLetRef"}}},{"localId":"237","locator":"108:77-108:92","name":"VisitStartWithED","type":"QueryLetRef"}]},"high":{"localId":"241","locator":"109:4-109:30","type":"End","operand":{"localId":"240","locator":"109:11-109:30","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"173","locator":"89:87-89:108","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"298","locator":"112:1-126:31","name":"HospitalizationWithObservation","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"298","s":[{"value":["/*Hospitalization with Observation returns the total interval from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/","define function ","\"HospitalizationWithObservation\"","(","Encounter"," "]},{"r":"246","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"297","s":[{"r":"297","s":[{"s":[{"r":"248","s":[{"r":"247","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"264","s":[{"value":["ObsVisit",": "]},{"r":"263","s":[{"value":["Last","("]},{"r":"262","s":[{"s":[{"r":"250","s":[{"r":"249","s":[{"r":"249","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Observation Services\""]}]},{"value":["]"]}]}]},{"value":[" ","LastObs"]}]}]},{"value":["\n  \t\t\t"]},{"r":"257","s":[{"value":["where "]},{"r":"257","s":[{"r":"252","s":[{"r":"251","s":[{"value":["LastObs"]}]},{"value":["."]},{"r":"252","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"257","s":[{"value":["ends "]},{"r":"256","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"255","s":[{"value":["start of "]},{"r":"254","s":[{"r":"253","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"254","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"261","s":[{"value":["sort by \n  \t\t\t"]},{"r":"260","s":[{"r":"259","s":[{"value":["end of "]},{"r":"258","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]},{"value":[",\n  \t"]},{"r":"272","s":[{"value":["VisitStart",": "]},{"r":"271","s":[{"value":["Coalesce","("]},{"r":"267","s":[{"value":["start of "]},{"r":"266","s":[{"r":"265","s":[{"value":["ObsVisit"]}]},{"value":["."]},{"r":"266","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"270","s":[{"value":["start of "]},{"r":"269","s":[{"r":"268","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"269","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]}]},{"value":[",\n  \t"]},{"r":"286","s":[{"value":["EDVisit",": "]},{"r":"285","s":[{"value":["Last","("]},{"r":"284","s":[{"s":[{"r":"274","s":[{"r":"273","s":[{"r":"273","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"279","s":[{"value":["where "]},{"r":"279","s":[{"r":"276","s":[{"r":"275","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"276","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"279","s":[{"value":["ends "]},{"r":"278","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"277","s":[{"value":["VisitStart"]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"283","s":[{"value":["sort by \n  \t\t\t"]},{"r":"282","s":[{"r":"281","s":[{"value":["end of "]},{"r":"280","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"296","s":[{"value":["return "]},{"r":"295","s":[{"value":["Interval["]},{"r":"291","s":[{"value":["Coalesce","("]},{"r":"289","s":[{"value":["start of "]},{"r":"288","s":[{"r":"287","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"288","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"290","s":[{"value":["VisitStart"]}]},{"value":[")"]}]},{"value":[", \n  \t"]},{"r":"294","s":[{"value":["end of "]},{"r":"293","s":[{"r":"292","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"293","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["]"]}]}]}]}]}]}}],"expression":{"localId":"297","locator":"113:3-126:31","type":"Query","source":[{"localId":"248","locator":"113:3-113:17","alias":"Visit","expression":{"localId":"247","locator":"113:3-113:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"264","locator":"114:8-118:4","identifier":"ObsVisit","expression":{"localId":"263","locator":"114:18-118:4","type":"Last","source":{"localId":"262","locator":"114:23-117:26","type":"Query","source":[{"localId":"250","locator":"114:23-114:78","alias":"LastObs","expression":{"localId":"249","locator":"114:23-114:70","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"114:48-114:69","name":"Observation Services","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"257","locator":"115:6-115:96","type":"And","operand":[{"locator":"115:40-115:53","type":"In","operand":[{"locator":"115:35-115:38","type":"End","operand":{"localId":"252","locator":"115:12-115:33","path":"relevantPeriod","scope":"LastObs","type":"Property"}},{"locator":"115:40-115:53","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"115:68-115:96","type":"Subtract","operand":[{"localId":"255","locator":"115:68-115:96","type":"Start","operand":{"localId":"254","locator":"115:77-115:96","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"256","locator":"115:40-115:45","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"255","locator":"115:68-115:96","type":"Start","operand":{"localId":"254","locator":"115:77-115:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"115:40-115:53","type":"Not","operand":{"locator":"115:40-115:53","type":"IsNull","operand":{"localId":"255","locator":"115:68-115:96","type":"Start","operand":{"localId":"254","locator":"115:77-115:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"261","locator":"116:6-117:26","by":[{"localId":"260","locator":"117:6-117:26","direction":"asc","type":"ByExpression","expression":{"localId":"259","locator":"117:6-117:26","type":"End","operand":{"localId":"258","locator":"117:13-117:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}},{"localId":"272","locator":"119:4-119:88","identifier":"VisitStart","expression":{"localId":"271","locator":"119:16-119:88","type":"Coalesce","operand":[{"localId":"267","locator":"119:25-119:56","type":"Start","operand":{"localId":"266","locator":"119:34-119:56","path":"relevantPeriod","type":"Property","source":{"localId":"265","locator":"119:34-119:41","name":"ObsVisit","type":"QueryLetRef"}}},{"localId":"270","locator":"119:59-119:87","type":"Start","operand":{"localId":"269","locator":"119:68-119:87","path":"relevantPeriod","scope":"Visit","type":"Property"}}]}},{"localId":"286","locator":"120:4-124:4","identifier":"EDVisit","expression":{"localId":"285","locator":"120:13-124:4","type":"Last","source":{"localId":"284","locator":"120:18-123:26","type":"Query","source":[{"localId":"274","locator":"120:18-120:78","alias":"LastED","expression":{"localId":"273","locator":"120:18-120:71","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"120:43-120:70","name":"Emergency Department Visit","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"279","locator":"121:6-121:76","type":"And","operand":[{"locator":"121:39-121:52","type":"In","operand":[{"locator":"121:34-121:37","type":"End","operand":{"localId":"276","locator":"121:12-121:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"121:39-121:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"121:67-121:76","type":"Subtract","operand":[{"localId":"277","locator":"121:67-121:76","name":"VisitStart","type":"QueryLetRef"},{"localId":"278","locator":"121:39-121:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"277","locator":"121:67-121:76","name":"VisitStart","type":"QueryLetRef"}}]},{"locator":"121:39-121:52","type":"Not","operand":{"locator":"121:39-121:52","type":"IsNull","operand":{"localId":"277","locator":"121:67-121:76","name":"VisitStart","type":"QueryLetRef"}}}]},"sort":{"localId":"283","locator":"122:6-123:26","by":[{"localId":"282","locator":"123:6-123:26","direction":"asc","type":"ByExpression","expression":{"localId":"281","locator":"123:6-123:26","type":"End","operand":{"localId":"280","locator":"123:13-123:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"296","locator":"125:4-126:31","expression":{"localId":"295","locator":"125:11-126:31","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"291","locator":"125:20-125:72","type":"Coalesce","operand":[{"localId":"289","locator":"125:29-125:59","type":"Start","operand":{"localId":"288","locator":"125:38-125:59","path":"relevantPeriod","type":"Property","source":{"localId":"287","locator":"125:38-125:44","name":"EDVisit","type":"QueryLetRef"}}},{"localId":"290","locator":"125:62-125:71","name":"VisitStart","type":"QueryLetRef"}]},"high":{"localId":"294","locator":"126:4-126:30","type":"End","operand":{"localId":"293","locator":"126:11-126:30","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"246","locator":"112:60-112:81","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"303","locator":"129:1-130:61","name":"HospitalizationWithObservationLengthofStay","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"303","s":[{"value":["/*Hospitalization with Observation Length of Stay returns the length in days from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/","define function ","\"HospitalizationWithObservationLengthofStay\"","(","Encounter"," "]},{"r":"299","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"302","s":[{"r":"302","s":[{"value":["\"LengthInDays\"","("]},{"r":"301","s":[{"value":["\"HospitalizationWithObservation\"","("]},{"r":"300","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"302","locator":"130:3-130:61","name":"LengthInDays","type":"FunctionRef","operand":[{"localId":"301","locator":"130:18-130:60","name":"HospitalizationWithObservation","type":"FunctionRef","operand":[{"localId":"300","locator":"130:51-130:59","name":"Encounter","type":"OperandRef"}]}]},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"299","locator":"129:72-129:93","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"324","locator":"133:1-138:3","name":"FirstInpatientIntensiveCareUnit","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"324","s":[{"value":["/*First Inpatient Intensive Care Unit returns the first intensive care unit for the given encounter, without considering any immediately prior emergency department visit.*/","define function ","\"FirstInpatientIntensiveCareUnit\"","(","Encounter"," "]},{"r":"304","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"323","s":[{"r":"323","s":[{"value":["First","("]},{"r":"322","s":[{"s":[{"r":"307","s":[{"r":"306","s":[{"value":["("]},{"r":"306","s":[{"r":"305","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"306","s":[{"value":["facilityLocations"]}]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n      "]},{"r":"317","s":[{"value":["where "]},{"r":"317","s":[{"r":"311","s":[{"r":"309","s":[{"r":"308","s":[{"value":["HospitalLocation"]}]},{"value":["."]},{"r":"309","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"310","s":[{"value":["\"Intensive Care Unit\""]}]}]},{"value":["\n        and "]},{"r":"316","s":[{"r":"313","s":[{"r":"312","s":[{"value":["HospitalLocation"]}]},{"value":["."]},{"r":"313","s":[{"value":["locationPeriod"]}]}]},{"r":"316","value":[" ","during"," "]},{"r":"315","s":[{"r":"314","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"315","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n      "]},{"r":"321","s":[{"value":["sort by "]},{"r":"320","s":[{"r":"319","s":[{"value":["start of "]},{"r":"318","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]}]}]}}],"expression":{"localId":"323","locator":"134:3-138:3","type":"First","source":{"localId":"322","locator":"134:9-137:37","type":"Query","source":[{"localId":"307","locator":"134:9-134:53","alias":"HospitalLocation","expression":{"localId":"306","locator":"134:9-134:37","path":"facilityLocations","type":"Property","source":{"localId":"305","locator":"134:10-134:18","name":"Encounter","type":"OperandRef"}}}],"relationship":[],"where":{"localId":"317","locator":"135:7-136:75","type":"And","operand":[{"localId":"311","locator":"135:13-135:58","type":"InValueSet","code":{"localId":"309","locator":"135:13-135:33","path":"code","scope":"HospitalLocation","type":"Property"},"valueset":{"localId":"310","locator":"135:38-135:58","name":"Intensive Care Unit","type":"ValueSetRef"}},{"localId":"316","locator":"136:13-136:75","type":"IncludedIn","operand":[{"localId":"313","locator":"136:13-136:43","path":"locationPeriod","scope":"HospitalLocation","type":"Property"},{"localId":"315","locator":"136:52-136:75","path":"relevantPeriod","type":"Property","source":{"localId":"314","locator":"136:52-136:60","name":"Encounter","type":"OperandRef"}}]}]},"sort":{"localId":"321","locator":"137:7-137:37","by":[{"localId":"320","locator":"137:15-137:37","direction":"asc","type":"ByExpression","expression":{"localId":"319","locator":"137:15-137:37","type":"Start","operand":{"localId":"318","locator":"137:24-137:37","name":"locationPeriod","type":"IdentifierRef"}}}]}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"304","locator":"133:61-133:82","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"342","locator":"141:1-144:35","name":"NormalizeInterval","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"342","s":[{"value":["/*Given a datetime and a period, returns the period (if a period is provided) or the interval beginning and ending on the datetime (if a datetime is provided)*/","define function ","\"NormalizeInterval\"","(","pointInTime"," "]},{"r":"325","s":[{"value":["DateTime"]}]},{"value":[", ","period"," "]},{"r":"327","s":[{"value":["Interval\u003c"]},{"r":"326","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"341","s":[{"r":"341","s":[{"value":["if "]},{"r":"329","s":[{"r":"328","s":[{"value":["pointInTime"]}]},{"value":[" is not null"]}]},{"value":[" then "]},{"r":"332","s":[{"value":["Interval["]},{"r":"330","s":[{"value":["pointInTime"]}]},{"value":[", "]},{"r":"331","s":[{"value":["pointInTime"]}]},{"value":["]"]}]},{"value":["\n    else "]},{"r":"340","s":[{"value":["if "]},{"r":"334","s":[{"r":"333","s":[{"value":["period"]}]},{"value":[" is not null"]}]},{"value":[" then "]},{"r":"335","s":[{"value":["period"]}]},{"value":[" \n    else "]},{"r":"339","s":[{"r":"336","value":["null"," as "]},{"r":"338","s":[{"value":["Interval\u003c"]},{"r":"337","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}]}]}]}]}}],"expression":{"localId":"341","locator":"142:3-144:35","type":"If","condition":{"localId":"329","locator":"142:6-142:28","type":"Not","operand":{"locator":"142:6-142:28","type":"IsNull","operand":{"localId":"328","locator":"142:6-142:16","name":"pointInTime","type":"OperandRef"}}},"then":{"localId":"332","locator":"142:35-142:68","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"330","locator":"142:44-142:54","name":"pointInTime","type":"OperandRef"},"high":{"localId":"331","locator":"142:57-142:67","name":"pointInTime","type":"OperandRef"}},"else":{"localId":"340","locator":"143:10-144:35","type":"If","condition":{"localId":"334","locator":"143:13-143:30","type":"Not","operand":{"locator":"143:13-143:30","type":"IsNull","operand":{"localId":"333","locator":"143:13-143:18","name":"period","type":"OperandRef"}}},"then":{"localId":"335","locator":"143:37-143:42","name":"period","type":"OperandRef"},"else":{"localId":"339","locator":"144:10-144:35","strict":false,"type":"As","operand":{"localId":"336","locator":"144:10-144:13","type":"Null"},"asTypeSpecifier":{"localId":"338","locator":"144:18-144:35","type":"IntervalTypeSpecifier","pointType":{"localId":"337","locator":"144:27-144:34","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}},"operand":[{"name":"pointInTime","operandTypeSpecifier":{"localId":"325","locator":"141:49-141:56","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"name":"period","operandTypeSpecifier":{"localId":"327","locator":"141:66-141:83","type":"IntervalTypeSpecifier","pointType":{"localId":"326","locator":"141:75-141:82","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"355","locator":"147:1-150:3","name":"HasStart","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"355","s":[{"value":["/*Given an interval, return true if the interval has a starting boundary specified (i.e. the start of the interval is not null and not the minimum DateTime value)*/","define function ","\"HasStart\"","(","period"," "]},{"r":"344","s":[{"value":["Interval\u003c"]},{"r":"343","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"354","s":[{"r":"354","s":[{"value":["not "]},{"r":"353","s":[{"value":["( "]},{"r":"353","s":[{"r":"347","s":[{"r":"346","s":[{"value":["start of "]},{"r":"345","s":[{"value":["period"]}]}]},{"value":[" is null"]}]},{"value":["\n      or "]},{"r":"352","s":[{"r":"349","s":[{"value":["start of "]},{"r":"348","s":[{"value":["period"]}]}]},{"value":[" ","="," "]},{"r":"351","s":[{"value":["minimum"," "]},{"r":"350","s":[{"value":["DateTime"]}]}]}]}]},{"value":["\n  )"]}]}]}]}]}}],"expression":{"localId":"354","locator":"148:3-150:3","type":"Not","operand":{"localId":"353","locator":"148:7-150:3","type":"Or","operand":[{"localId":"347","locator":"148:9-148:31","type":"IsNull","operand":{"localId":"346","locator":"148:9-148:23","type":"Start","operand":{"localId":"345","locator":"148:18-148:23","name":"period","type":"OperandRef"}}},{"localId":"352","locator":"149:10-149:43","type":"Equal","operand":[{"localId":"349","locator":"149:10-149:24","type":"Start","operand":{"localId":"348","locator":"149:19-149:24","name":"period","type":"OperandRef"}},{"localId":"351","locator":"149:28-149:43","valueType":"{urn:hl7-org:elm-types:r1}DateTime","type":"MinValue"}]}]}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"344","locator":"147:35-147:52","type":"IntervalTypeSpecifier","pointType":{"localId":"343","locator":"147:44-147:51","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"368","locator":"153:1-158:3","name":"HasEnd","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"368","s":[{"value":["/*Given an interval, return true if the interval has an ending boundary specified (i.e. the end of the interval is not null and not the maximum DateTime value)*/","define function ","\"HasEnd\"","(","period"," "]},{"r":"357","s":[{"value":["Interval\u003c"]},{"r":"356","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"367","s":[{"r":"367","s":[{"value":["not "]},{"r":"366","s":[{"value":["( \n    "]},{"r":"366","s":[{"r":"360","s":[{"r":"359","s":[{"value":["end of "]},{"r":"358","s":[{"value":["period"]}]}]},{"value":[" is null"]}]},{"value":["\n      or \n      "]},{"r":"365","s":[{"r":"362","s":[{"value":["end of "]},{"r":"361","s":[{"value":["period"]}]}]},{"value":[" ","="," "]},{"r":"364","s":[{"value":["maximum"," "]},{"r":"363","s":[{"value":["DateTime"]}]}]}]}]},{"value":["\n  )"]}]}]}]}]}}],"expression":{"localId":"367","locator":"154:3-158:3","type":"Not","operand":{"localId":"366","locator":"154:7-158:3","type":"Or","operand":[{"localId":"360","locator":"155:5-155:25","type":"IsNull","operand":{"localId":"359","locator":"155:5-155:17","type":"End","operand":{"localId":"358","locator":"155:12-155:17","name":"period","type":"OperandRef"}}},{"localId":"365","locator":"157:7-157:38","type":"Equal","operand":[{"localId":"362","locator":"157:7-157:19","type":"End","operand":{"localId":"361","locator":"157:14-157:19","name":"period","type":"OperandRef"}},{"localId":"364","locator":"157:23-157:38","valueType":"{urn:hl7-org:elm-types:r1}DateTime","type":"MaxValue"}]}]}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"357","locator":"153:33-153:50","type":"IntervalTypeSpecifier","pointType":{"localId":"356","locator":"153:42-153:49","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"378","locator":"161:1-164:24","name":"Latest","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"378","s":[{"value":["/*Given an interval, return the ending point if the interval has an ending boundary specified, otherwise, return the starting point*/","define function ","\"Latest\"","(","period"," "]},{"r":"370","s":[{"value":["Interval\u003c"]},{"r":"369","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"377","s":[{"r":"377","s":[{"value":["if "]},{"r":"372","s":[{"value":["( "]},{"r":"372","s":[{"value":["HasEnd","("]},{"r":"371","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":[" then \n  "]},{"r":"374","s":[{"value":["end of "]},{"r":"373","s":[{"value":["period"]}]}]},{"value":[" \n    else "]},{"r":"376","s":[{"value":["start of "]},{"r":"375","s":[{"value":["period"]}]}]}]}]}]}}],"expression":{"localId":"377","locator":"162:3-164:24","type":"If","condition":{"localId":"372","locator":"162:6-162:22","name":"HasEnd","type":"FunctionRef","operand":[{"localId":"371","locator":"162:15-162:20","name":"period","type":"OperandRef"}]},"then":{"localId":"374","locator":"163:3-163:15","type":"End","operand":{"localId":"373","locator":"163:10-163:15","name":"period","type":"OperandRef"}},"else":{"localId":"376","locator":"164:10-164:24","type":"Start","operand":{"localId":"375","locator":"164:19-164:24","name":"period","type":"OperandRef"}}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"370","locator":"161:33-161:50","type":"IntervalTypeSpecifier","pointType":{"localId":"369","locator":"161:42-161:49","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"388","locator":"167:1-170:15","name":"Earliest","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"388","s":[{"value":["/*Given an interval, return the starting point if the interval has a starting boundary specified, otherwise, return the ending point*/","define function ","\"Earliest\"","(","period"," "]},{"r":"380","s":[{"value":["Interval\u003c"]},{"r":"379","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"387","s":[{"r":"387","s":[{"value":["if "]},{"r":"382","s":[{"value":["( "]},{"r":"382","s":[{"value":["HasStart","("]},{"r":"381","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":[" then "]},{"r":"384","s":[{"value":["start of "]},{"r":"383","s":[{"value":["period"]}]}]},{"value":[" \n    else \n  "]},{"r":"386","s":[{"value":["end of "]},{"r":"385","s":[{"value":["period"]}]}]}]}]}]}}],"expression":{"localId":"387","locator":"168:3-170:15","type":"If","condition":{"localId":"382","locator":"168:6-168:24","name":"HasStart","type":"FunctionRef","operand":[{"localId":"381","locator":"168:17-168:22","name":"period","type":"OperandRef"}]},"then":{"localId":"384","locator":"168:31-168:45","type":"Start","operand":{"localId":"383","locator":"168:40-168:45","name":"period","type":"OperandRef"}},"else":{"localId":"386","locator":"170:3-170:15","type":"End","operand":{"localId":"385","locator":"170:10-170:15","name":"period","type":"OperandRef"}}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"380","locator":"167:35-167:52","type":"IntervalTypeSpecifier","pointType":{"localId":"379","locator":"167:44-167:51","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"396","locator":"173:1-174:48","name":"LatestOf","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"396","s":[{"value":["/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the ending point of the period if the period has an ending boundary specified, otherwise returns the starting point of the interval*/","define function ","\"LatestOf\"","(","pointInTime"," "]},{"r":"389","s":[{"value":["DateTime"]}]},{"value":[", ","period"," "]},{"r":"391","s":[{"value":["Interval\u003c"]},{"r":"390","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"395","s":[{"r":"395","s":[{"value":["Latest","("]},{"r":"394","s":[{"value":["NormalizeInterval","("]},{"r":"392","s":[{"value":["pointInTime"]}]},{"value":[", "]},{"r":"393","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"395","locator":"174:3-174:48","name":"Latest","type":"FunctionRef","operand":[{"localId":"394","locator":"174:10-174:47","name":"NormalizeInterval","type":"FunctionRef","operand":[{"localId":"392","locator":"174:28-174:38","name":"pointInTime","type":"OperandRef"},{"localId":"393","locator":"174:41-174:46","name":"period","type":"OperandRef"}]}]},"operand":[{"name":"pointInTime","operandTypeSpecifier":{"localId":"389","locator":"173:40-173:47","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"name":"period","operandTypeSpecifier":{"localId":"391","locator":"173:57-173:74","type":"IntervalTypeSpecifier","pointType":{"localId":"390","locator":"173:66-173:73","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"404","locator":"177:1-178:50","name":"EarliestOf","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"404","s":[{"value":["/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the starting point of the period if the period has a starting boundary specified, otherwise returns the ending point of the period*/","define function ","\"EarliestOf\"","(","pointInTime"," "]},{"r":"397","s":[{"value":["DateTime"]}]},{"value":[", ","period"," "]},{"r":"399","s":[{"value":["Interval\u003c"]},{"r":"398","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"403","s":[{"r":"403","s":[{"value":["Earliest","("]},{"r":"402","s":[{"value":["NormalizeInterval","("]},{"r":"400","s":[{"value":["pointInTime"]}]},{"value":[", "]},{"r":"401","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"403","locator":"178:3-178:50","name":"Earliest","type":"FunctionRef","operand":[{"localId":"402","locator":"178:12-178:49","name":"NormalizeInterval","type":"FunctionRef","operand":[{"localId":"400","locator":"178:30-178:40","name":"pointInTime","type":"OperandRef"},{"localId":"401","locator":"178:43-178:48","name":"period","type":"OperandRef"}]}]},"operand":[{"name":"pointInTime","operandTypeSpecifier":{"localId":"397","locator":"177:42-177:49","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"name":"period","operandTypeSpecifier":{"localId":"399","locator":"177:59-177:76","type":"IntervalTypeSpecifier","pointType":{"localId":"398","locator":"177:68-177:75","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]}]}}},"elm_annotations":{"statements":[{"children":[{"children":[{"children":[{"text":"define \"ED Encounter\":\n  "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"10"}],"ref_id":"11"}],"define_name":"ED Encounter"},{"children":[{"children":[{"children":[{"text":"/*calculates the difference in calendar days between the start and end of the given interval.*/define function \"LengthInDays\"(Value "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"16"},{"children":[{"text":"\u003e"}]}],"ref_id":"17"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"difference in days between "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"Value"}]}],"node_type":"OperandRef","ref_id":"18"}],"node_type":"Start","ref_id":"19"},{"children":[{"text":" and "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"Value"}]}],"node_type":"OperandRef","ref_id":"20"}],"node_type":"End","ref_id":"21"}],"node_type":"DifferenceBetween","ref_id":"22"}],"node_type":"DifferenceBetween","ref_id":"22"}],"ref_id":"23"}],"define_name":"LengthInDays"},{"children":[{"children":[{"children":[{"text":"define \"Inpatient Encounter\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Encounter Inpatient\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"12"}],"node_type":"Retrieve","ref_id":"12"},{"children":[{"text":" EncounterInpatient"}]}],"ref_id":"13"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"LengthInDays\"("}]},{"children":[{"children":[{"children":[{"text":"EncounterInpatient"}]}],"ref_id":"14"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"15"}],"node_type":"Property","ref_id":"15"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"24"},{"children":[{"text":"\u003c= 120"}],"node_type":"Literal","ref_id":"25"}],"node_type":"LessOrEqual","ref_id":"26"},{"children":[{"text":"\n      and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"EncounterInpatient"}]}],"ref_id":"27"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"28"}],"node_type":"Property","ref_id":"28"},{"children":[{"text":" ends during day of "}],"node_type":"In","ref_id":"30"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"29"}],"node_type":"In","ref_id":"30"}],"ref_id":"31"}],"ref_id":"31"}],"node_type":"Query","ref_id":"32"}],"ref_id":"33"}],"define_name":"Inpatient Encounter"},{"children":[{"children":[]},{"children":[]},{"children":[]},{"children":[{"children":[{"text":"/*@description: Returns an interval of date values extracted from the input interval of date-time values\n@comment: This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability.*/define function \"ToDateInterval\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"34"},{"children":[{"text":"\u003e"}]}],"ref_id":"35"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"36"}],"node_type":"Start","ref_id":"37"}],"ref_id":"38"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"39"}],"node_type":"End","ref_id":"40"}],"ref_id":"41"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"42"}],"node_type":"Interval","ref_id":"42"}],"ref_id":"43"}],"define_name":"ToDateInterval"},{"children":[{"children":[{"children":[{"text":"/*returns list of all locations within an encounter, including locations for immediately prior ED visit.*/define function \"HospitalizationLocations\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"47"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"48"},{"children":[{"text":" Visit"}]}],"ref_id":"49"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"50"}],"node_type":"Retrieve","ref_id":"50"},{"children":[{"text":" LastED"}]}],"ref_id":"51"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"52"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"53"}],"node_type":"Property","ref_id":"53"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"57"},{"children":[{"text":" or less on or before"}]}],"ref_id":"58"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"54"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"55"}],"node_type":"Property","ref_id":"55"}],"node_type":"Start","ref_id":"56"}],"ref_id":"58"}],"ref_id":"58"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"59"}],"node_type":"End","ref_id":"60"}],"ref_id":"61"}],"ref_id":"62"}],"ref_id":"63"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"64"}],"ref_id":"65"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"node_type":"QueryLetRef","ref_id":"66"},{"children":[{"text":" is null"}]}],"ref_id":"67"},{"children":[{"text":" then "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"68"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"ref_id":"69"}],"ref_id":"69"},{"children":[{"text":" \n      else "}]},{"children":[{"children":[{"text":"flatten "}]},{"children":[{"children":[{"text":"{ "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"70"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"ref_id":"71"}],"ref_id":"71"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"72"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"ref_id":"73"}],"ref_id":"73"},{"children":[{"text":" }"}]}],"node_type":"List","ref_id":"74"}],"ref_id":"75"}],"node_type":"If","ref_id":"76"}],"ref_id":"77"}],"node_type":"Query","ref_id":"78"}],"node_type":"Query","ref_id":"78"}],"ref_id":"79"}],"define_name":"HospitalizationLocations"},{"children":[{"children":[{"children":[{"text":"/*Returns the arrival time in the ED for the encounter.*/define function \"EmergencyDepartmentArrivalTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"80"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"\"HospitalizationLocations\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"81"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"82"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"82"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"83"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"HospitalLocation"}]}],"ref_id":"84"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"85"}],"ref_id":"85"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}],"ref_id":"86"}],"ref_id":"87"}],"ref_id":"87"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"88"}],"node_type":"Start","ref_id":"89"}],"ref_id":"90"}],"ref_id":"91"}],"ref_id":"92"},{"children":[{"text":"\n  )"}]}],"ref_id":"93"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"94"}],"node_type":"Property","ref_id":"94"}],"node_type":"Start","ref_id":"95"}],"node_type":"Start","ref_id":"95"}],"ref_id":"96"}],"define_name":"EmergencyDepartmentArrivalTime"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization returns the total interval for admission to discharge for the given encounter, or for the admission of any immediately prior emergency department visit to the discharge of the given encounter.*/define function \"Hospitalization\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"99"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"100"},{"children":[{"text":" Visit"}]}],"ref_id":"101"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"102"}],"node_type":"Retrieve","ref_id":"102"},{"children":[{"text":" LastED"}]}],"ref_id":"103"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"104"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"105"}],"node_type":"Property","ref_id":"105"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"109"},{"children":[{"text":" or less on or before"}]}],"ref_id":"110"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"106"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"107"}],"node_type":"Property","ref_id":"107"}],"node_type":"Start","ref_id":"108"}],"ref_id":"110"}],"ref_id":"110"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"111"}],"node_type":"End","ref_id":"112"}],"ref_id":"113"}],"ref_id":"114"}],"ref_id":"115"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"116"}],"ref_id":"117"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"118"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"119"}],"node_type":"Property","ref_id":"119"}],"node_type":"Start","ref_id":"120"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"121"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"122"}],"node_type":"Property","ref_id":"122"}],"node_type":"Start","ref_id":"123"},{"children":[{"text":")"}]}],"ref_id":"124"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"125"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"126"}],"node_type":"Property","ref_id":"126"}],"ref_id":"127"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"128"}],"ref_id":"129"}],"node_type":"Query","ref_id":"130"}],"node_type":"Query","ref_id":"130"}],"ref_id":"131"}],"define_name":"Hospitalization"},{"children":[{"children":[{"children":[{"text":"/*Returns admission time for an encounter or for immediately prior emergency department visit.*/define function \"HospitalAdmissionTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"97"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"\"Hospitalization\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"98"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"132"}],"node_type":"Start","ref_id":"133"}],"node_type":"Start","ref_id":"133"}],"ref_id":"134"}],"define_name":"HospitalAdmissionTime"},{"children":[{"children":[{"children":[{"text":"/*Returns earliest arrival time for an encounter including any prior ED visit.*/define function \"HospitalArrivalTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"135"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"\"HospitalizationLocations\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"136"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"137"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"137"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"138"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"139"}],"node_type":"Start","ref_id":"140"}],"ref_id":"141"}],"ref_id":"142"}],"ref_id":"143"},{"children":[{"text":"\n  )"}]}],"ref_id":"144"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"145"}],"node_type":"Property","ref_id":"145"}],"node_type":"Start","ref_id":"146"}],"node_type":"Start","ref_id":"146"}],"ref_id":"147"}],"define_name":"HospitalArrivalTime"},{"children":[{"children":[{"children":[{"text":"/*Returns the length of stay in days (i.e. the number of days between admission and discharge) for the given encounter, or from the admission of any immediately prior emergency department visit to the discharge of the encounter*/define function \"HospitalizationLengthofStay\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"150"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"LengthInDays("}]},{"children":[{"children":[{"text":"\"Hospitalization\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"151"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"152"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"153"}],"node_type":"FunctionRef","ref_id":"153"}],"ref_id":"154"}],"define_name":"HospitalizationLengthofStay"},{"children":[{"children":[{"children":[{"text":"/*Returns the latest departure time for encounter including any prior ED visit.*/define function \"HospitalDepartureTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"155"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"\"HospitalizationLocations\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"156"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"157"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"157"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"158"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"159"}],"node_type":"Start","ref_id":"160"}],"ref_id":"161"}],"ref_id":"162"}],"ref_id":"163"},{"children":[{"text":"\n  )"}]}],"ref_id":"164"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"165"}],"node_type":"Property","ref_id":"165"}],"node_type":"End","ref_id":"166"}],"node_type":"End","ref_id":"166"}],"ref_id":"167"}],"define_name":"HospitalDepartureTime"},{"children":[{"children":[{"children":[{"text":"/*Hospital Discharge Time returns the discharge time for an encounter*/define function \"HospitalDischargeTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"168"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"169"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"170"}],"node_type":"Property","ref_id":"170"}],"node_type":"End","ref_id":"171"}],"node_type":"End","ref_id":"171"}],"ref_id":"172"}],"define_name":"HospitalDischargeTime"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization with Observation and Outpatient Surgery Service returns the total interval from the start of any immediately prior emergency department visit, outpatient surgery visit or observation visit to the discharge of the given encounter.*/define function \"HospitalizationWithObservationAndOutpatientSurgeryService\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"173"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"174"},{"children":[{"text":" Visit"}]}],"ref_id":"175"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"ObsVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Observation Services\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"176"}],"node_type":"Retrieve","ref_id":"176"},{"children":[{"text":" LastObs"}]}],"ref_id":"177"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastObs"}]}],"ref_id":"178"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"179"}],"node_type":"Property","ref_id":"179"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"183"},{"children":[{"text":" or less on or before"}]}],"ref_id":"184"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"180"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"181"}],"node_type":"Property","ref_id":"181"}],"node_type":"Start","ref_id":"182"}],"ref_id":"184"}],"ref_id":"184"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"185"}],"node_type":"End","ref_id":"186"}],"ref_id":"187"}],"ref_id":"188"}],"ref_id":"189"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"190"}],"ref_id":"191"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"VisitStart: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"ObsVisit"}]}],"ref_id":"192"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"193"}],"node_type":"Property","ref_id":"193"}],"node_type":"Start","ref_id":"194"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"195"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"196"}],"node_type":"Property","ref_id":"196"}],"node_type":"Start","ref_id":"197"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"198"}],"ref_id":"199"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"200"}],"node_type":"Retrieve","ref_id":"200"},{"children":[{"text":" LastED"}]}],"ref_id":"201"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"202"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"203"}],"node_type":"Property","ref_id":"203"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"205"},{"children":[{"text":" or less on or before"}]}],"ref_id":"206"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"204"}],"ref_id":"206"}],"ref_id":"206"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"207"}],"node_type":"End","ref_id":"208"}],"ref_id":"209"}],"ref_id":"210"}],"ref_id":"211"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"212"}],"ref_id":"213"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"VisitStartWithED: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"214"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"215"}],"node_type":"Property","ref_id":"215"}],"node_type":"Start","ref_id":"216"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"217"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"218"}],"ref_id":"219"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"OutpatientSurgeryVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Outpatient Surgery Service\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"220"}],"node_type":"Retrieve","ref_id":"220"},{"children":[{"text":" LastSurgeryOP"}]}],"ref_id":"221"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastSurgeryOP"}]}],"ref_id":"222"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"223"}],"node_type":"Property","ref_id":"223"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"225"},{"children":[{"text":" or less on or before"}]}],"ref_id":"226"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"VisitStartWithED"}]}],"node_type":"QueryLetRef","ref_id":"224"}],"ref_id":"226"}],"ref_id":"226"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"227"}],"node_type":"End","ref_id":"228"}],"ref_id":"229"}],"ref_id":"230"}],"ref_id":"231"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"232"}],"ref_id":"233"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"OutpatientSurgeryVisit"}]}],"ref_id":"234"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"235"}],"node_type":"Property","ref_id":"235"}],"node_type":"Start","ref_id":"236"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"VisitStartWithED"}]}],"node_type":"QueryLetRef","ref_id":"237"},{"children":[{"text":")"}]}],"ref_id":"238"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"239"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"240"}],"node_type":"Property","ref_id":"240"}],"ref_id":"241"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"242"}],"ref_id":"243"}],"node_type":"Query","ref_id":"244"}],"node_type":"Query","ref_id":"244"}],"ref_id":"245"}],"define_name":"HospitalizationWithObservationAndOutpatientSurgeryService"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization with Observation returns the total interval from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/define function \"HospitalizationWithObservation\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"246"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"247"},{"children":[{"text":" Visit"}]}],"ref_id":"248"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"ObsVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Observation Services\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"249"}],"node_type":"Retrieve","ref_id":"249"},{"children":[{"text":" LastObs"}]}],"ref_id":"250"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastObs"}]}],"ref_id":"251"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"252"}],"node_type":"Property","ref_id":"252"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"256"},{"children":[{"text":" or less on or before"}]}],"ref_id":"257"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"253"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"254"}],"node_type":"Property","ref_id":"254"}],"node_type":"Start","ref_id":"255"}],"ref_id":"257"}],"ref_id":"257"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"258"}],"node_type":"End","ref_id":"259"}],"ref_id":"260"}],"ref_id":"261"}],"ref_id":"262"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"263"}],"ref_id":"264"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"VisitStart: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"ObsVisit"}]}],"ref_id":"265"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"266"}],"node_type":"Property","ref_id":"266"}],"node_type":"Start","ref_id":"267"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"268"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"269"}],"node_type":"Property","ref_id":"269"}],"node_type":"Start","ref_id":"270"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"271"}],"ref_id":"272"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"273"}],"node_type":"Retrieve","ref_id":"273"},{"children":[{"text":" LastED"}]}],"ref_id":"274"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"275"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"276"}],"node_type":"Property","ref_id":"276"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"278"},{"children":[{"text":" or less on or before"}]}],"ref_id":"279"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"277"}],"ref_id":"279"}],"ref_id":"279"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"280"}],"node_type":"End","ref_id":"281"}],"ref_id":"282"}],"ref_id":"283"}],"ref_id":"284"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"285"}],"ref_id":"286"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"287"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"288"}],"node_type":"Property","ref_id":"288"}],"node_type":"Start","ref_id":"289"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"290"},{"children":[{"text":")"}]}],"ref_id":"291"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"292"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"293"}],"node_type":"Property","ref_id":"293"}],"ref_id":"294"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"295"}],"ref_id":"296"}],"node_type":"Query","ref_id":"297"}],"node_type":"Query","ref_id":"297"}],"ref_id":"298"}],"define_name":"HospitalizationWithObservation"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization with Observation Length of Stay returns the length in days from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/define function \"HospitalizationWithObservationLengthofStay\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"299"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"\"LengthInDays\"("}]},{"children":[{"children":[{"text":"\"HospitalizationWithObservation\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"300"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"301"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"302"}],"node_type":"FunctionRef","ref_id":"302"}],"ref_id":"303"}],"define_name":"HospitalizationWithObservationLengthofStay"},{"children":[{"children":[{"children":[{"text":"/*First Inpatient Intensive Care Unit returns the first intensive care unit for the given encounter, without considering any immediately prior emergency department visit.*/define function \"FirstInpatientIntensiveCareUnit\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"304"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"305"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"node_type":"Property","ref_id":"306"}],"node_type":"Property","ref_id":"306"},{"children":[{"text":")"}]}],"node_type":"Property","ref_id":"306"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"307"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"HospitalLocation"}]}],"ref_id":"308"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"309"}],"ref_id":"309"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Intensive Care Unit\""}]}],"ref_id":"310"}],"node_type":"InValueSet","ref_id":"311"},{"children":[{"text":"\n        and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"HospitalLocation"}]}],"ref_id":"312"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"313"}],"node_type":"Property","ref_id":"313"},{"children":[{"text":" during "}],"node_type":"IncludedIn","ref_id":"316"},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"314"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"315"}],"node_type":"Property","ref_id":"315"}],"node_type":"IncludedIn","ref_id":"316"}],"ref_id":"317"}],"ref_id":"317"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"318"}],"node_type":"Start","ref_id":"319"}],"ref_id":"320"}],"ref_id":"321"}],"ref_id":"322"},{"children":[{"text":"\n  )"}]}],"node_type":"First","ref_id":"323"}],"node_type":"First","ref_id":"323"}],"ref_id":"324"}],"define_name":"FirstInpatientIntensiveCareUnit"},{"children":[{"children":[{"children":[{"text":"/*Given a datetime and a period, returns the period (if a period is provided) or the interval beginning and ending on the datetime (if a datetime is provided)*/define function \"NormalizeInterval\"(pointInTime "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"325"},{"children":[{"text":", period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"326"},{"children":[{"text":"\u003e"}]}],"ref_id":"327"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"pointInTime"}]}],"node_type":"OperandRef","ref_id":"328"},{"children":[{"text":" is not null"}]}],"ref_id":"329"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"pointInTime"}]}],"ref_id":"330"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"pointInTime"}]}],"ref_id":"331"},{"children":[{"text":"]"}]}],"ref_id":"332"},{"children":[{"text":"\n    else "}]},{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"333"},{"children":[{"text":" is not null"}]}],"ref_id":"334"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"period"}]}],"ref_id":"335"},{"children":[{"text":" \n    else "}]},{"children":[{"children":[{"text":"null as "}],"node_type":"Null","ref_id":"336"},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"337"},{"children":[{"text":"\u003e"}]}],"ref_id":"338"}],"ref_id":"339"}],"ref_id":"340"}],"node_type":"If","ref_id":"341"}],"node_type":"If","ref_id":"341"}],"ref_id":"342"}],"define_name":"NormalizeInterval"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return true if the interval has a starting boundary specified (i.e. the start of the interval is not null and not the minimum DateTime value)*/define function \"HasStart\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"343"},{"children":[{"text":"\u003e"}]}],"ref_id":"344"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"not "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"345"}],"node_type":"Start","ref_id":"346"},{"children":[{"text":" is null"}]}],"node_type":"IsNull","ref_id":"347"},{"children":[{"text":"\n      or "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"348"}],"node_type":"Start","ref_id":"349"},{"children":[{"text":" = "}]},{"children":[{"children":[{"text":"minimum "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"350"}],"node_type":"MinValue","ref_id":"351"}],"node_type":"Equal","ref_id":"352"}],"node_type":"Or","ref_id":"353"},{"children":[{"text":"\n  )"}]}],"node_type":"Or","ref_id":"353"}],"node_type":"Not","ref_id":"354"}],"node_type":"Not","ref_id":"354"}],"ref_id":"355"}],"define_name":"HasStart"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return true if the interval has an ending boundary specified (i.e. the end of the interval is not null and not the maximum DateTime value)*/define function \"HasEnd\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"356"},{"children":[{"text":"\u003e"}]}],"ref_id":"357"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"not "}]},{"children":[{"children":[{"text":"( \n    "}]},{"children":[{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"358"}],"node_type":"End","ref_id":"359"},{"children":[{"text":" is null"}]}],"node_type":"IsNull","ref_id":"360"},{"children":[{"text":"\n      or \n      "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"361"}],"node_type":"End","ref_id":"362"},{"children":[{"text":" = "}]},{"children":[{"children":[{"text":"maximum "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"363"}],"node_type":"MaxValue","ref_id":"364"}],"node_type":"Equal","ref_id":"365"}],"node_type":"Or","ref_id":"366"},{"children":[{"text":"\n  )"}]}],"node_type":"Or","ref_id":"366"}],"node_type":"Not","ref_id":"367"}],"node_type":"Not","ref_id":"367"}],"ref_id":"368"}],"define_name":"HasEnd"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return the ending point if the interval has an ending boundary specified, otherwise, return the starting point*/define function \"Latest\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"369"},{"children":[{"text":"\u003e"}]}],"ref_id":"370"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"HasEnd("}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"371"},{"children":[{"text":")"}]}],"ref_id":"372"},{"children":[{"text":")"}]}],"ref_id":"372"},{"children":[{"text":" then \n  "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"373"}],"ref_id":"374"},{"children":[{"text":" \n    else "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"375"}],"ref_id":"376"}],"node_type":"If","ref_id":"377"}],"node_type":"If","ref_id":"377"}],"ref_id":"378"}],"define_name":"Latest"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return the starting point if the interval has a starting boundary specified, otherwise, return the ending point*/define function \"Earliest\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"379"},{"children":[{"text":"\u003e"}]}],"ref_id":"380"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"HasStart("}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"381"},{"children":[{"text":")"}]}],"ref_id":"382"},{"children":[{"text":")"}]}],"ref_id":"382"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"383"}],"ref_id":"384"},{"children":[{"text":" \n    else \n  "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"385"}],"ref_id":"386"}],"node_type":"If","ref_id":"387"}],"node_type":"If","ref_id":"387"}],"ref_id":"388"}],"define_name":"Earliest"},{"children":[{"children":[{"children":[{"text":"/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the ending point of the period if the period has an ending boundary specified, otherwise returns the starting point of the interval*/define function \"LatestOf\"(pointInTime "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"389"},{"children":[{"text":", period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"390"},{"children":[{"text":"\u003e"}]}],"ref_id":"391"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Latest("}]},{"children":[{"children":[{"text":"NormalizeInterval("}]},{"children":[{"children":[{"text":"pointInTime"}]}],"node_type":"OperandRef","ref_id":"392"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"393"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"394"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"395"}],"node_type":"FunctionRef","ref_id":"395"}],"ref_id":"396"}],"define_name":"LatestOf"},{"children":[{"children":[{"children":[{"text":"/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the starting point of the period if the period has a starting boundary specified, otherwise returns the ending point of the period*/define function \"EarliestOf\"(pointInTime "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"397"},{"children":[{"text":", period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"398"},{"children":[{"text":"\u003e"}]}],"ref_id":"399"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Earliest("}]},{"children":[{"children":[{"text":"NormalizeInterval("}]},{"children":[{"children":[{"text":"pointInTime"}]}],"node_type":"OperandRef","ref_id":"400"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"401"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"402"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"403"}],"node_type":"FunctionRef","ref_id":"403"}],"ref_id":"404"}],"define_name":"EarliestOf"}],"identifier":{"id":"MATGlobalCommonFunctions","version":"7.0.000"}},"is_main_library":false,"is_top_level":true,"library_name":"MATGlobalCommonFunctions","library_version":"7.0.000","statement_dependencies":[{"_id":"689244b50734dfcaf5414926","statement_name":"NormalizeInterval"}]}],"created_at":null,"description":"Percentage of patients 13 years of age and older with a new substance use disorder (SUD) episode who received the following (Two rates are reported):\n\na. Percentage of patients who initiated treatment, including either an intervention or medication for the treatment of SUD, within 14 days of the new SUD episode. \nb. Percentage of patients who engaged in ongoing treatment, including two additional interventions or short-term medications, or one long-term medication for the treatment of SUD, within 34 days of the initiation.","hqmf_id":"2C928084-82EA-D7C5-0182-EC98D1C20129","hqmf_set_id":"C3657D72-21B4-4675-820A-86C7FE293BF5","hqmf_version_number":"12.0.000","main_cql_library":"InitiationandEngagementofSubstanceUseDisorderTreatment","measure_attributes":[{"code":"OTH","value":"137","name":"eCQM Identifier (Measure Authoring Tool)","code_obj":{"type":"CD","null_flavor":"OTH","original_text":"eCQM Identifier (Measure Authoring Tool)"},"value_obj":{"type":"ED","value":"137","media_type":"text/plain"}},{"code":"OTH","value":"Not Applicable","name":"NQF Number","code_obj":{"type":"CD","null_flavor":"OTH","original_text":"NQF Number"},"value_obj":{"type":"ED","value":"Not Applicable","media_type":"text/plain"}},{"code":"COPY","value":"This Physician Performance Measure (Measure) and related data specifications are owned and were developed by the National Committee for Quality Assurance (NCQA). NCQA is not responsible for any use of the Measure. NCQA makes no representations, warranties, or endorsement about the quality of any organization or physician that uses or reports performance measures and NCQA has no liability to anyone who relies on such measures or specifications. NCQA holds a copyright in the Measure. The Measure can be reproduced and distributed, without modification, for noncommercial purposes (e.g., use by healthcare providers in connection with their practices) without obtaining approval from NCQA. Commercial use is defined as the sale, licensing, or distribution of the Measure for commercial gain, or incorporation of the Measure into a product or service that is sold, licensed or distributed for commercial gain. All commercial uses or requests for modification must be approved by NCQA and are subject to a license at the discretion of NCQA. (C) 2012-2022 National Committee for Quality Assurance. All Rights Reserved.\n\nLimited proprietary coding is contained in the Measure specifications for user convenience. Users of proprietary code sets should obtain all necessary licenses from the owners of the code sets. NCQA disclaims all liability for use or accuracy of any third-party codes contained in the specifications.\n\nCPT(R) codes, descriptions and other data are copyright 2022. American Medical Association. All rights reserved. CPT is a trademark of the American Medical Association. No fee schedules, basic units, relative values or related listings are included in CPT. The AMA assumes no liability for the data contained herein. Applicable FARS/DFARS restrictions apply to government use.\n\nLOINC(R) copyright 2004-2022 Regenstrief Institute, Inc. \n\nThis material contains SNOMED Clinical Terms(R) (SNOMED CT[R]) copyright 2004-2022 International Health Terminology Standards Development Organisation. \n\nICD-10 copyright 2022 World Health Organization. All Rights Reserved.","name":"Copyright","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"COPY","title":"Copyright"},"value_obj":{"type":"ED","value":"This Physician Performance Measure (Measure) and related data specifications are owned and were developed by the National Committee for Quality Assurance (NCQA). NCQA is not responsible for any use of the Measure. NCQA makes no representations, warranties, or endorsement about the quality of any organization or physician that uses or reports performance measures and NCQA has no liability to anyone who relies on such measures or specifications. NCQA holds a copyright in the Measure. The Measure can be reproduced and distributed, without modification, for noncommercial purposes (e.g., use by healthcare providers in connection with their practices) without obtaining approval from NCQA. Commercial use is defined as the sale, licensing, or distribution of the Measure for commercial gain, or incorporation of the Measure into a product or service that is sold, licensed or distributed for commercial gain. All commercial uses or requests for modification must be approved by NCQA and are subject to a license at the discretion of NCQA. (C) 2012-2022 National Committee for Quality Assurance. All Rights Reserved.\n\nLimited proprietary coding is contained in the Measure specifications for user convenience. Users of proprietary code sets should obtain all necessary licenses from the owners of the code sets. NCQA disclaims all liability for use or accuracy of any third-party codes contained in the specifications.\n\nCPT(R) codes, descriptions and other data are copyright 2022. American Medical Association. All rights reserved. CPT is a trademark of the American Medical Association. No fee schedules, basic units, relative values or related listings are included in CPT. The AMA assumes no liability for the data contained herein. Applicable FARS/DFARS restrictions apply to government use.\n\nLOINC(R) copyright 2004-2022 Regenstrief Institute, Inc. \n\nThis material contains SNOMED Clinical Terms(R) (SNOMED CT[R]) copyright 2004-2022 International Health Terminology Standards Development Organisation. \n\nICD-10 copyright 2022 World Health Organization. All Rights Reserved.","media_type":"text/plain"}},{"code":"DISC","value":"The performance Measure is not a clinical guideline and does not establish a standard of medical care, and has not been tested for all potential applications. THE MEASURE AND SPECIFICATIONS ARE PROVIDED \"AS IS\" WITHOUT WARRANTY OF ANY KIND.\n \nDue to technical limitations, registered trademarks are indicated by (R) or [R] and unregistered trademarks are indicated by (TM) or [TM].","name":"Disclaimer","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DISC","title":"Disclaimer"},"value_obj":{"type":"ED","value":"The performance Measure is not a clinical guideline and does not establish a standard of medical care, and has not been tested for all potential applications. THE MEASURE AND SPECIFICATIONS ARE PROVIDED \"AS IS\" WITHOUT WARRANTY OF ANY KIND.\n \nDue to technical limitations, registered trademarks are indicated by (R) or [R] and unregistered trademarks are indicated by (TM) or [TM].","media_type":"text/plain"}},{"code":"MSRSCORE","name":"Measure Scoring","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRSCORE","title":"Measure Scoring"},"value_obj":{"type":"CD","system":"2.16.840.1.113883.5.1063","code":"PROPOR","title":"Proportion"}},{"code":"MSRTYPE","name":"Measure Type","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRTYPE","title":"Measure Type"},"value_obj":{"type":"CD","system":"2.16.840.1.113883.5.1063","code":"PROCESS","title":"PROCESS"}},{"code":"STRAT","value":"Report a total score, and each of the following strata:\nStratum 1: Patients age 13-17 at the start of the measurement period\nStratum 2: Patients age 18-64 at the start of the measurement period\nStratum 3: Patients age 65 and older at the start of the measurement period","name":"Stratification","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"STRAT","title":"Stratification"},"value_obj":{"type":"ED","value":"Report a total score, and each of the following strata:\nStratum 1: Patients age 13-17 at the start of the measurement period\nStratum 2: Patients age 18-64 at the start of the measurement period\nStratum 3: Patients age 65 and older at the start of the measurement period","media_type":"text/plain"}},{"code":"MSRADJ","value":"None","name":"Risk Adjustment","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRADJ","title":"Risk Adjustment"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"MSRAGG","value":"None","name":"Rate Aggregation","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRAGG","title":"Rate Aggregation"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"RAT","value":"There are more deaths, illnesses and disabilities from substance abuse than from any other preventable health condition. In 2018, 20.3 million individuals in the U.S. age 12 or older (approximately 8 percent of the population) were classified as having an SUD within the past year (Substance Abuse and Mental Health Services Administration [SAMHSA], 2019). Despite the high prevalence of SUD in the U.S., fewer than 20 percent of individuals with SUD receive any substance use treatment and only 12 percent receive treatment in a specialty SUD program (SAMHSA, 2019).","name":"Rationale","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"RAT","title":"Rationale"},"value_obj":{"type":"ED","value":"There are more deaths, illnesses and disabilities from substance abuse than from any other preventable health condition. In 2018, 20.3 million individuals in the U.S. age 12 or older (approximately 8 percent of the population) were classified as having an SUD within the past year (Substance Abuse and Mental Health Services Administration [SAMHSA], 2019). Despite the high prevalence of SUD in the U.S., fewer than 20 percent of individuals with SUD receive any substance use treatment and only 12 percent receive treatment in a specialty SUD program (SAMHSA, 2019).","media_type":"text/plain"}},{"code":"CRS","value":"American Society of Addiction Medicine (2020) \n- All Food and Drug Administration approved medications for the treatment of opioid use disorder should be available to all patients. Clinicians should consider the patients preferences, past treatment history, current state of illness, and treatment setting when deciding between the use of methadone, buprenorphine, and naltrexone.\n- There is no recommended time limit for pharmacological treatment\n- Patients psychosocial needs should be assessed, and patients should be offered or referred to psychosocial treatment based on their individual needs. However, a patients decision to decline psychosocial treatment or the absence of available psychosocial treatment should not preclude or delay pharmacotherapy, with appropriate medication management. Motivational interviewing or enhancement can be used to encourage patients to engage in psychosocial treatment services appropriate for addressing individual needs.\n\nAmerican Psychiatric Association (2018)\n- Patients with alcohol use disorder should have a documented comprehensive and person-centered treatment plan that includes evidence-based nonpharmacological and pharmacological treatments. [1C]\n- Naltrexone or acamprosate should be offered to patients with moderate to severe alcohol use disorder who have a goal of reducing alcohol consumption or achieving abstinence, prefer pharmacotherapy or have not responded to nonpharmacological treatments alone, and have no contraindications to the use of these medications. [1B]\n- Disulfiram should be offered to patients with moderate to severe alcohol use disorder who have a goal of achieving abstinence, prefer disulfiram or are intolerant to or have not responded to naltrexone and acamprosate, are capable of understanding the risks of alcohol consumption while taking disulfiram, and have no contraindications to the use of this medication. [2C]\n- Topiramate or gabapentin should be offered to patients with moderate to severe alcohol use disorder who have a goal of reducing alcohol consumption or achieving abstinence, prefer topiramate or gabapentin or are intolerant to or have not responded to naltrexone and acamprosate, and have no contraindications to the use of these medications. [2C]\n\nAmerican Psychiatric Association (2006)\n- Because many substance use disorders are chronic, patients usually require long-term treatment, although the intensity and specific components of treatment may vary over time [I rating]. \n- It is important to intensify the monitoring for substance use during periods when the patient is at a high risk of relapsing, including during the early stages of treatment, times of transition to less intensive levels of care, and the first year after active treatment has ceased [I rating].\n- Outpatient treatment of substance use disorders is appropriate for patients whose clinical condition or environmental circumstances do not require a more intensive level of care [I rating]. As in other treatment settings, a comprehensive approach is optimal, using, where indicated, a variety of psychotherapeutic and pharmacological interventions along with behavioral monitoring [I rating ].\n- Disulfiram is also recommended for patients with alcohol dependence [II rating]. \n- Naltrexone, injectable naltrexone, acamprosate, a y-aminobutyric acid (GABA) are recommended for patients with alcohol dependence [I rating]. Disulfiram is also recommended for patients with alcohol dependence [II rating]. \n- Methadone and buprenorphine are recommended for patients with opioid dependence [I rating]. \n- Naltrexone is an alternative strategy [I rating].\n\nAmerican Society of Addiction Medicine (2015) \n- Methadone and buprenorphine are recommended for opioid use disorder treatment and withdrawal management.\n- Naltrexone (oral; extended-release injectable) is recommended for relapse prevention.\n\nMichigan Quality Improvement Consortium (2017)\n- Patients with substance use disorder or risky substance use: Patient Education and Brief Intervention by PCP or Trained Staff (e.g. RN, MSW)\n- If diagnosed with substance use disorder or risky substance use, initiate an intervention within 14 days.\n- Frequent follow-up is helpful to support behavior change; preferably 2 visits within 30 days.\n- Refer to a substance abuse health specialist, an addiction physician specialist, or a physician experienced in pharmacologic management of addiction.\n\nDepartment of Veterans Affairs/Department of Defense (2015)\n- Offer referral to specialty SUD care for addiction treatment if based on willingness to engage. [B]\n- For patients with moderate-severe alcohol use disorder, we recommend: Acamprosate, Disulfiram, Naltrexone- oral or extended release, or Topiramate. [A]\n- Medications should be offered in combined with addiction-focused counseling. offering one or more of the following interventions considering patient preference and provider training/competence: Behavioral Couples Therapy for alcohol use disorder, Cognitive Behavioral Therapy for substance use disorders, Community Reinforcement Approach, Motivational Enhancement Therapy, 12-Step Facilitation. [A]\n- For patients with opioid use disorder we recommend buprenorphine/naloxone or methadone in an Opioid Treatment Program. For patients for whom agonist treatment is contraindicated, unacceptable, unavailable, or discontinued, we recommend extended-release injectable naltrexone. [A]\n- For patients initiated in an intensive phase of outpatient or residential treatment, recommend ongoing systematic relapse prevention efforts or recovery support, individualized on the basis of treatment response. [A]","name":"Clinical Recommendation Statement","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"CRS","title":"Clinical Recommendation Statement"},"value_obj":{"type":"ED","value":"American Society of Addiction Medicine (2020) \n- All Food and Drug Administration approved medications for the treatment of opioid use disorder should be available to all patients. Clinicians should consider the patients preferences, past treatment history, current state of illness, and treatment setting when deciding between the use of methadone, buprenorphine, and naltrexone.\n- There is no recommended time limit for pharmacological treatment\n- Patients psychosocial needs should be assessed, and patients should be offered or referred to psychosocial treatment based on their individual needs. However, a patients decision to decline psychosocial treatment or the absence of available psychosocial treatment should not preclude or delay pharmacotherapy, with appropriate medication management. Motivational interviewing or enhancement can be used to encourage patients to engage in psychosocial treatment services appropriate for addressing individual needs.\n\nAmerican Psychiatric Association (2018)\n- Patients with alcohol use disorder should have a documented comprehensive and person-centered treatment plan that includes evidence-based nonpharmacological and pharmacological treatments. [1C]\n- Naltrexone or acamprosate should be offered to patients with moderate to severe alcohol use disorder who have a goal of reducing alcohol consumption or achieving abstinence, prefer pharmacotherapy or have not responded to nonpharmacological treatments alone, and have no contraindications to the use of these medications. [1B]\n- Disulfiram should be offered to patients with moderate to severe alcohol use disorder who have a goal of achieving abstinence, prefer disulfiram or are intolerant to or have not responded to naltrexone and acamprosate, are capable of understanding the risks of alcohol consumption while taking disulfiram, and have no contraindications to the use of this medication. [2C]\n- Topiramate or gabapentin should be offered to patients with moderate to severe alcohol use disorder who have a goal of reducing alcohol consumption or achieving abstinence, prefer topiramate or gabapentin or are intolerant to or have not responded to naltrexone and acamprosate, and have no contraindications to the use of these medications. [2C]\n\nAmerican Psychiatric Association (2006)\n- Because many substance use disorders are chronic, patients usually require long-term treatment, although the intensity and specific components of treatment may vary over time [I rating]. \n- It is important to intensify the monitoring for substance use during periods when the patient is at a high risk of relapsing, including during the early stages of treatment, times of transition to less intensive levels of care, and the first year after active treatment has ceased [I rating].\n- Outpatient treatment of substance use disorders is appropriate for patients whose clinical condition or environmental circumstances do not require a more intensive level of care [I rating]. As in other treatment settings, a comprehensive approach is optimal, using, where indicated, a variety of psychotherapeutic and pharmacological interventions along with behavioral monitoring [I rating ].\n- Disulfiram is also recommended for patients with alcohol dependence [II rating]. \n- Naltrexone, injectable naltrexone, acamprosate, a y-aminobutyric acid (GABA) are recommended for patients with alcohol dependence [I rating]. Disulfiram is also recommended for patients with alcohol dependence [II rating]. \n- Methadone and buprenorphine are recommended for patients with opioid dependence [I rating]. \n- Naltrexone is an alternative strategy [I rating].\n\nAmerican Society of Addiction Medicine (2015) \n- Methadone and buprenorphine are recommended for opioid use disorder treatment and withdrawal management.\n- Naltrexone (oral; extended-release injectable) is recommended for relapse prevention.\n\nMichigan Quality Improvement Consortium (2017)\n- Patients with substance use disorder or risky substance use: Patient Education and Brief Intervention by PCP or Trained Staff (e.g. RN, MSW)\n- If diagnosed with substance use disorder or risky substance use, initiate an intervention within 14 days.\n- Frequent follow-up is helpful to support behavior change; preferably 2 visits within 30 days.\n- Refer to a substance abuse health specialist, an addiction physician specialist, or a physician experienced in pharmacologic management of addiction.\n\nDepartment of Veterans Affairs/Department of Defense (2015)\n- Offer referral to specialty SUD care for addiction treatment if based on willingness to engage. [B]\n- For patients with moderate-severe alcohol use disorder, we recommend: Acamprosate, Disulfiram, Naltrexone- oral or extended release, or Topiramate. [A]\n- Medications should be offered in combined with addiction-focused counseling. offering one or more of the following interventions considering patient preference and provider training/competence: Behavioral Couples Therapy for alcohol use disorder, Cognitive Behavioral Therapy for substance use disorders, Community Reinforcement Approach, Motivational Enhancement Therapy, 12-Step Facilitation. [A]\n- For patients with opioid use disorder we recommend buprenorphine/naloxone or methadone in an Opioid Treatment Program. For patients for whom agonist treatment is contraindicated, unacceptable, unavailable, or discontinued, we recommend extended-release injectable naltrexone. [A]\n- For patients initiated in an intensive phase of outpatient or residential treatment, recommend ongoing systematic relapse prevention efforts or recovery support, individualized on the basis of treatment response. [A]","media_type":"text/plain"}},{"code":"IDUR","value":"Higher score indicates better quality","name":"Improvement Notation","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"IDUR","title":"Improvement Notation"},"value_obj":{"type":"ED","value":"Higher score indicates better quality","media_type":"text/plain"}},{"code":"REF","value":"CITATIONAmerican Psychiatric Association, Kleber, H. D., \u0026 McIntyre, J. S. (2006). Practice Guideline for Treatment of Patients with Substance Use Disorders (pp. 1-276). Arlington, VA: American Psychiatric Association.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONAmerican Psychiatric Association, Kleber, H. D., \u0026 McIntyre, J. S. (2006). Practice Guideline for Treatment of Patients with Substance Use Disorders (pp. 1-276). Arlington, VA: American Psychiatric Association.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONCunningham, C., Edlund, F. M. J., Fishman, M., Gordon, D. A. J., Jones, D. H. E., Langleben, D., ... \u0026 Freedman, D. K. (2020). The ASAM National Practice Guideline for the Treatment of Opioid Use Disorder: 2020 Focused Update.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONCunningham, C., Edlund, F. M. J., Fishman, M., Gordon, D. A. J., Jones, D. H. E., Langleben, D., ... \u0026 Freedman, D. K. (2020). The ASAM National Practice Guideline for the Treatment of Opioid Use Disorder: 2020 Focused Update.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONDepartment of Veteran Affairs, Department of Defense. (2015). VA/DoD Clinical Practice Guideline for the Management of Substance Use Disorders. Washington DC: Department of Veterans Affairs, Department of Defense.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONDepartment of Veteran Affairs, Department of Defense. (2015). VA/DoD Clinical Practice Guideline for the Management of Substance Use Disorders. Washington DC: Department of Veterans Affairs, Department of Defense.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONKampman, K., Jarvis, M. (2015). American Society of Addiction Medicine (ASAM) National Practice Guideline for the Use of Medications in the Treatment of Addiction Involving Opioid Use. Journal of Addiction Medicine; 9(5), 358367. https://doi.org/10.1097/ADM.0000000000000166","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONKampman, K., Jarvis, M. (2015). American Society of Addiction Medicine (ASAM) National Practice Guideline for the Use of Medications in the Treatment of Addiction Involving Opioid Use. Journal of Addiction Medicine; 9(5), 358367. https://doi.org/10.1097/ADM.0000000000000166","media_type":"text/plain"}},{"code":"REF","value":"CITATIONMichigan Quality Improvement Consortium. (2017). Screening, diagnosis, and referral for substance use disorders. Southfield, (MI): Michigan Quality Improvement Consortium. Retrieved from http://www.mqic.org/pdf/mqic_screening_diagnosis_and_referral_for_substance_use_disorders_cpg.pdf","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONMichigan Quality Improvement Consortium. (2017). Screening, diagnosis, and referral for substance use disorders. Southfield, (MI): Michigan Quality Improvement Consortium. Retrieved from http://www.mqic.org/pdf/mqic_screening_diagnosis_and_referral_for_substance_use_disorders_cpg.pdf","media_type":"text/plain"}},{"code":"REF","value":"CITATIONPietras, S., Azur, M., \u0026 Brown, J. (2015). Review of medication assisted treatment guidelines and measures for opioid and alcohol use. Washington, DC: Assistant Secretary for Planning and Evaluation.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONPietras, S., Azur, M., \u0026 Brown, J. (2015). Review of medication assisted treatment guidelines and measures for opioid and alcohol use. Washington, DC: Assistant Secretary for Planning and Evaluation.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONReus, V. et al. (2018). Practice Guideline for the Pharmacological Treatment of Patients with Alcohol Use Disorder. American Journal of Psychiatry, 175(1), 86-90. https://doi.org/10.1176/appi.ajp.2017.1750101","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONReus, V. et al. (2018). Practice Guideline for the Pharmacological Treatment of Patients with Alcohol Use Disorder. American Journal of Psychiatry, 175(1), 86-90. https://doi.org/10.1176/appi.ajp.2017.1750101","media_type":"text/plain"}},{"code":"REF","value":"CITATIONSchneider Institute for Health Policy. (2001). Substance abuse: The nation's number one health problem. Robert Wood Johnson Foundation.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONSchneider Institute for Health Policy. (2001). Substance abuse: The nation's number one health problem. Robert Wood Johnson Foundation.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONSubstance Abuse and Mental Health Services Administration (SAMHSA). (2019). Key Substance Use and Mental Health Indicators in the United States: Results from the 2018 National Survey on Drug Use and Health. Retrieved from https://www.samhsa.gov/data/sites/default/files/cbhsq-reports/NSDUHNationalFindingsReport2018/NSDUHNationalFindingsReport2018.htm#mhisudSubstance","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONSubstance Abuse and Mental Health Services Administration (SAMHSA). (2019). Key Substance Use and Mental Health Indicators in the United States: Results from the 2018 National Survey on Drug Use and Health. Retrieved from https://www.samhsa.gov/data/sites/default/files/cbhsq-reports/NSDUHNationalFindingsReport2018/NSDUHNationalFindingsReport2018.htm#mhisudSubstance","media_type":"text/plain"}},{"code":"DEF","value":"The new SUD episode is the first encounter during the Intake Period with a diagnosis of SUD with no encounter or medication treatment for a diagnosis of SUD in the 60 days prior.\n\nThe initiation of treatment is the first SUD treatment within 14 days of a new SUD episode.\n\nTreatment includes inpatient SUD admissions, outpatient visits, intensive outpatient encounters or partial hospitalizations, and medications for the treatment of SUD.\n\nThe Intake Period: January 1-November 14 of the measurement year. The Intake Period is used to capture new SUD episodes. The November 14 cut-off date ensures that all services can occur before the measurement period ends.","name":"Definition","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DEF","title":"Definition"},"value_obj":{"type":"ED","value":"The new SUD episode is the first encounter during the Intake Period with a diagnosis of SUD with no encounter or medication treatment for a diagnosis of SUD in the 60 days prior.\n\nThe initiation of treatment is the first SUD treatment within 14 days of a new SUD episode.\n\nTreatment includes inpatient SUD admissions, outpatient visits, intensive outpatient encounters or partial hospitalizations, and medications for the treatment of SUD.\n\nThe Intake Period: January 1-November 14 of the measurement year. The Intake Period is used to capture new SUD episodes. The November 14 cut-off date ensures that all services can occur before the measurement period ends.","media_type":"text/plain"}},{"code":"GUIDE","value":"This eCQM is a patient-based measure.\n\nThis version of the eCQM uses QDM version 5.6. Please refer to the eCQI resource center (https://ecqi.healthit.gov/qdm) for more information on the QDM.","name":"Guidance","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"GUIDE","title":"Guidance"},"value_obj":{"type":"ED","value":"This eCQM is a patient-based measure.\n\nThis version of the eCQM uses QDM version 5.6. Please refer to the eCQI resource center (https://ecqi.healthit.gov/qdm) for more information on the QDM.","media_type":"text/plain"}},{"code":"TRANF","value":"TBD","name":"Transmission Format","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"TRANF","title":"Transmission Format"},"value_obj":{"type":"ED","value":"TBD","media_type":"text/plain"}},{"code":"IPOP","value":"Patients 13 years of age and older as of the start of the measurement period who were diagnosed with a new SUD episode during a visit between January 1 and November 14 of the measurement period","name":"Initial Population","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"IPOP","title":"Initial Population"},"value_obj":{"type":"ED","value":"Patients 13 years of age and older as of the start of the measurement period who were diagnosed with a new SUD episode during a visit between January 1 and November 14 of the measurement period","media_type":"text/plain"}},{"code":"DENOM","value":"Equals Initial Population","name":"Denominator","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DENOM","title":"Denominator"},"value_obj":{"type":"ED","value":"Equals Initial Population","media_type":"text/plain"}},{"code":"DENEX","value":"Exclude patients who are in hospice care for any part of the measurement period","name":"Denominator Exclusions","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DENEX","title":"Denominator Exclusions"},"value_obj":{"type":"ED","value":"Exclude patients who are in hospice care for any part of the measurement period","media_type":"text/plain"}},{"code":"NUMER","value":"Numerator 1: Initiation of treatment includes either anintervention or medication for the treatment of SUD within 14 days of the new SUD episode\n\nNumerator 2: Engagement in ongoing SUD treatment within 34 days of initiation includes:\n\n1. A long-acting SUD medication on the day after the initiation through 34 days after the initiation of treatment\n\n2. One of the following options on the day after the initiation of treatment through 34 days after the initiation of treatment: a) two engagement visits, b) two engagement medication treatment events, c) one engagement visit and one engagement medication treatment event","name":"Numerator","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"NUMER","title":"Numerator"},"value_obj":{"type":"ED","value":"Numerator 1: Initiation of treatment includes either anintervention or medication for the treatment of SUD within 14 days of the new SUD episode\n\nNumerator 2: Engagement in ongoing SUD treatment within 34 days of initiation includes:\n\n1. A long-acting SUD medication on the day after the initiation through 34 days after the initiation of treatment\n\n2. One of the following options on the day after the initiation of treatment through 34 days after the initiation of treatment: a) two engagement visits, b) two engagement medication treatment events, c) one engagement visit and one engagement medication treatment event","media_type":"text/plain"}},{"code":"NUMEX","value":"Not Applicable","name":"Numerator Exclusions","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"NUMEX","title":"Numerator Exclusions"},"value_obj":{"type":"ED","value":"Not Applicable","media_type":"text/plain"}},{"code":"DENEXCEP","value":"None","name":"Denominator Exceptions","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DENEXCEP","title":"Denominator Exceptions"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"SDE","value":"For every patient evaluated by this measure also identify payer, race, ethnicity and sex","name":"Supplemental Data Elements","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"SDE","title":"Supplemental Data Elements"},"value_obj":{"type":"ED","value":"For every patient evaluated by this measure also identify payer, race, ethnicity and sex","media_type":"text/plain"}}],"measure_period":{"type":"IVL_TS","low":{"type":"TS","value":"201201010000","inclusive?":true,"derived?":false},"high":{"type":"TS","value":"201212312359","inclusive?":true,"derived?":false},"width":{"type":"PQ","unit":"a","value":"1","inclusive?":true,"derived?":false}},"measure_scoring":"PROPORTION","population_criteria":{"IPP":{"conjunction?":true,"type":"IPP","hqmf_id":"703CE63C-957D-4214-AAEF-6DE14AE91E80","preconditions":[{"id":2,"preconditions":[{"id":1,"reference":"InitiationandEngagementofSubstanceUseDisorderTreatment__Initial_Population__38182BBF_CAF4_4796_8A66_E9B56799104E"}],"conjunction_code":"allTrue"}]},"DENOM":{"conjunction?":true,"type":"DENOM","hqmf_id":"CBB623A8-C906-4712-983B-A532F984C2E9","preconditions":[{"id":4,"preconditions":[{"id":3,"reference":"InitiationandEngagementofSubstanceUseDisorderTreatment__Denominator__38182BBF_CAF4_4796_8A66_E9B56799104E"}],"conjunction_code":"allTrue"}]},"NUMER":{"conjunction?":true,"type":"NUMER","hqmf_id":"D2C1C13B-097B-4210-922F-7AAE70F50F46","preconditions":[{"id":6,"preconditions":[{"id":5,"reference":"InitiationandEngagementofSubstanceUseDisorderTreatment__Numerator_1__38182BBF_CAF4_4796_8A66_E9B56799104E"}],"conjunction_code":"allTrue"}]},"DENEX":{"conjunction?":true,"type":"DENEX","hqmf_id":"A6BAB6F7-FEB7-465E-8669-B48C2A05A003","preconditions":[{"id":8,"preconditions":[{"id":7,"reference":"InitiationandEngagementofSubstanceUseDisorderTreatment__Denominator_Exclusions__38182BBF_CAF4_4796_8A66_E9B56799104E"}],"conjunction_code":"atLeastOneTrue"}]},"STRAT":{"conjunction?":true,"type":"STRAT","hqmf_id":"404DA201-FD78-41DF-89F8-57E135602098","preconditions":[{"id":12,"preconditions":[{"id":11,"reference":"InitiationandEngagementofSubstanceUseDisorderTreatment__Stratification_1__38182BBF_CAF4_4796_8A66_E9B56799104E"}],"conjunction_code":"allTrue"}]},"STRAT_1":{"conjunction?":true,"type":"STRAT","hqmf_id":"C8C9D5C1-4D6D-4F11-BA18-09645919EE7E","preconditions":[{"id":16,"preconditions":[{"id":15,"reference":"InitiationandEngagementofSubstanceUseDisorderTreatment__Stratification_2__38182BBF_CAF4_4796_8A66_E9B56799104E"}],"conjunction_code":"allTrue"}]},"STRAT_2":{"conjunction?":true,"type":"STRAT","hqmf_id":"BB3F8E59-845E-4D0A-BEE2-30D270EAC5CD","preconditions":[{"id":20,"preconditions":[{"id":19,"reference":"InitiationandEngagementofSubstanceUseDisorderTreatment__Stratification_3__38182BBF_CAF4_4796_8A66_E9B56799104E"}],"conjunction_code":"allTrue"}]},"IPP_1":{"conjunction?":true,"type":"IPP","hqmf_id":"6492A3E6-D8C8-40A1-B280-909DB3436D1E","preconditions":[{"id":22,"preconditions":[{"id":21,"reference":"InitiationandEngagementofSubstanceUseDisorderTreatment__Initial_Population__38182BBF_CAF4_4796_8A66_E9B56799104E"}],"conjunction_code":"allTrue"}]},"DENOM_1":{"conjunction?":true,"type":"DENOM","hqmf_id":"1F384AE6-DC33-4464-A743-D883C75BDCE9","preconditions":[{"id":24,"preconditions":[{"id":23,"reference":"InitiationandEngagementofSubstanceUseDisorderTreatment__Denominator__38182BBF_CAF4_4796_8A66_E9B56799104E"}],"conjunction_code":"allTrue"}]},"NUMER_1":{"conjunction?":true,"type":"NUMER","hqmf_id":"3C89FB2F-3335-4384-8F25-FB58A1B00AE3","preconditions":[{"id":26,"preconditions":[{"id":25,"reference":"InitiationandEngagementofSubstanceUseDisorderTreatment__Numerator_2__38182BBF_CAF4_4796_8A66_E9B56799104E"}],"conjunction_code":"allTrue"}]},"DENEX_1":{"conjunction?":true,"type":"DENEX","hqmf_id":"353DB0FA-5117-40DD-A989-8FA220D184BC","preconditions":[{"id":28,"preconditions":[{"id":27,"reference":"InitiationandEngagementofSubstanceUseDisorderTreatment__Denominator_Exclusions__38182BBF_CAF4_4796_8A66_E9B56799104E"}],"conjunction_code":"atLeastOneTrue"}]},"STRAT_3":{"conjunction?":true,"type":"STRAT","hqmf_id":"E96FDC2B-1E60-41FE-A93D-ED20407BFDB5","preconditions":[{"id":32,"preconditions":[{"id":31,"reference":"InitiationandEngagementofSubstanceUseDisorderTreatment__Stratification_1__38182BBF_CAF4_4796_8A66_E9B56799104E"}],"conjunction_code":"allTrue"}]},"STRAT_4":{"conjunction?":true,"type":"STRAT","hqmf_id":"54B42C7D-4F4D-4F6B-BCB8-920B974DFC9C","preconditions":[{"id":36,"preconditions":[{"id":35,"reference":"InitiationandEngagementofSubstanceUseDisorderTreatment__Stratification_2__38182BBF_CAF4_4796_8A66_E9B56799104E"}],"conjunction_code":"allTrue"}]},"STRAT_5":{"conjunction?":true,"type":"STRAT","hqmf_id":"6834216F-BB45-4BFE-B326-5D710D33E041","preconditions":[{"id":40,"preconditions":[{"id":39,"reference":"InitiationandEngagementofSubstanceUseDisorderTreatment__Stratification_3__38182BBF_CAF4_4796_8A66_E9B56799104E"}],"conjunction_code":"allTrue"}]}},"population_sets":[{"_id":"689244ad0734dfcaf5414503","population_set_id":"PopulationSet_1","populations":{"DENEX":{"_id":"689244b50734dfcaf5414927","hqmf_id":"A6BAB6F7-FEB7-465E-8669-B48C2A05A003","library_name":"InitiationandEngagementofSubstanceUseDisorderTreatment","statement_name":"Denominator Exclusions"},"DENOM":{"_id":"689244b50734dfcaf5414928","hqmf_id":"CBB623A8-C906-4712-983B-A532F984C2E9","library_name":"InitiationandEngagementofSubstanceUseDisorderTreatment","statement_name":"Denominator"},"IPP":{"_id":"689244b50734dfcaf5414929","hqmf_id":"703CE63C-957D-4214-AAEF-6DE14AE91E80","library_name":"InitiationandEngagementofSubstanceUseDisorderTreatment","statement_name":"Initial Population"},"NUMER":{"_id":"689244b50734dfcaf541492a","hqmf_id":"D2C1C13B-097B-4210-922F-7AAE70F50F46","library_name":"InitiationandEngagementofSubstanceUseDisorderTreatment","statement_name":"Numerator 1"},"_id":"689244b50734dfcaf541492b","_type":"CQM::ProportionPopulationMap"},"stratifications":[{"_id":"689244ad0734dfcaf54144f9","hqmf_id":"404DA201-FD78-41DF-89F8-57E135602098","statement":{"_id":"689244b50734dfcaf541492c","hqmf_id":"404DA201-FD78-41DF-89F8-57E135602098","library_name":"InitiationandEngagementofSubstanceUseDisorderTreatment","statement_name":"Stratification 1"},"stratification_id":"PopulationSet_1_Stratification_1","title":"PopSet1 Stratification 1"},{"_id":"689244ad0734dfcaf54144fa","hqmf_id":"C8C9D5C1-4D6D-4F11-BA18-09645919EE7E","statement":{"_id":"689244b50734dfcaf541492d","hqmf_id":"C8C9D5C1-4D6D-4F11-BA18-09645919EE7E","library_name":"InitiationandEngagementofSubstanceUseDisorderTreatment","statement_name":"Stratification 2"},"stratification_id":"PopulationSet_1_Stratification_2","title":"PopSet1 Stratification 2"},{"_id":"689244ad0734dfcaf54144fb","hqmf_id":"BB3F8E59-845E-4D0A-BEE2-30D270EAC5CD","statement":{"_id":"689244b50734dfcaf541492e","hqmf_id":"BB3F8E59-845E-4D0A-BEE2-30D270EAC5CD","library_name":"InitiationandEngagementofSubstanceUseDisorderTreatment","statement_name":"Stratification 3"},"stratification_id":"PopulationSet_1_Stratification_3","title":"PopSet1 Stratification 3"}],"supplemental_data_elements":[{"_id":"689244ad0734dfcaf54144f5","hqmf_id":"7398C151-11CD-417B-8D65-76B5CD4E8A4E","library_name":"InitiationandEngagementofSubstanceUseDisorderTreatment","statement_name":"SDE Ethnicity"},{"_id":"689244ad0734dfcaf54144f6","hqmf_id":"E6B5AD58-0B76-47FB-A4DB-DC8D7AEE4811","library_name":"InitiationandEngagementofSubstanceUseDisorderTreatment","statement_name":"SDE Payer"},{"_id":"689244ad0734dfcaf54144f7","hqmf_id":"81C0B5BD-57E4-4F80-BC9C-9CB661D30099","library_name":"InitiationandEngagementofSubstanceUseDisorderTreatment","statement_name":"SDE Race"},{"_id":"689244ad0734dfcaf54144f8","hqmf_id":"86829C72-950F-4DB9-8171-7C23586A1114","library_name":"InitiationandEngagementofSubstanceUseDisorderTreatment","statement_name":"SDE Sex"}],"title":"Population Criteria Section"},{"_id":"689244ad0734dfcaf5414504","population_set_id":"PopulationSet_2","populations":{"DENEX":{"_id":"689244b50734dfcaf541492f","hqmf_id":"353DB0FA-5117-40DD-A989-8FA220D184BC","library_name":"InitiationandEngagementofSubstanceUseDisorderTreatment","statement_name":"Denominator Exclusions"},"DENOM":{"_id":"689244b50734dfcaf5414930","hqmf_id":"1F384AE6-DC33-4464-A743-D883C75BDCE9","library_name":"InitiationandEngagementofSubstanceUseDisorderTreatment","statement_name":"Denominator"},"IPP":{"_id":"689244b50734dfcaf5414931","hqmf_id":"6492A3E6-D8C8-40A1-B280-909DB3436D1E","library_name":"InitiationandEngagementofSubstanceUseDisorderTreatment","statement_name":"Initial Population"},"NUMER":{"_id":"689244b50734dfcaf5414932","hqmf_id":"3C89FB2F-3335-4384-8F25-FB58A1B00AE3","library_name":"InitiationandEngagementofSubstanceUseDisorderTreatment","statement_name":"Numerator 2"},"_id":"689244b50734dfcaf5414933","_type":"CQM::ProportionPopulationMap"},"stratifications":[{"_id":"689244ad0734dfcaf5414500","hqmf_id":"E96FDC2B-1E60-41FE-A93D-ED20407BFDB5","statement":{"_id":"689244b50734dfcaf5414934","hqmf_id":"E96FDC2B-1E60-41FE-A93D-ED20407BFDB5","library_name":"InitiationandEngagementofSubstanceUseDisorderTreatment","statement_name":"Stratification 1"},"stratification_id":"PopulationSet_2_Stratification_1","title":"PopSet2 Stratification 1"},{"_id":"689244ad0734dfcaf5414501","hqmf_id":"54B42C7D-4F4D-4F6B-BCB8-920B974DFC9C","statement":{"_id":"689244b50734dfcaf5414935","hqmf_id":"54B42C7D-4F4D-4F6B-BCB8-920B974DFC9C","library_name":"InitiationandEngagementofSubstanceUseDisorderTreatment","statement_name":"Stratification 2"},"stratification_id":"PopulationSet_2_Stratification_2","title":"PopSet2 Stratification 2"},{"_id":"689244ad0734dfcaf5414502","hqmf_id":"6834216F-BB45-4BFE-B326-5D710D33E041","statement":{"_id":"689244b50734dfcaf5414936","hqmf_id":"6834216F-BB45-4BFE-B326-5D710D33E041","library_name":"InitiationandEngagementofSubstanceUseDisorderTreatment","statement_name":"Stratification 3"},"stratification_id":"PopulationSet_2_Stratification_3","title":"PopSet2 Stratification 3"}],"supplemental_data_elements":[{"_id":"689244ad0734dfcaf54144fc","hqmf_id":"0845CB20-8BF9-49EF-A9E5-C16F00516DBC","library_name":"InitiationandEngagementofSubstanceUseDisorderTreatment","statement_name":"SDE Ethnicity"},{"_id":"689244ad0734dfcaf54144fd","hqmf_id":"5DEF5B3E-D5C9-4A8C-AFB3-91CABC20A190","library_name":"InitiationandEngagementofSubstanceUseDisorderTreatment","statement_name":"SDE Payer"},{"_id":"689244ad0734dfcaf54144fe","hqmf_id":"92B6F716-48CF-455D-8053-552C7366F2B6","library_name":"InitiationandEngagementofSubstanceUseDisorderTreatment","statement_name":"SDE Race"},{"_id":"689244ad0734dfcaf54144ff","hqmf_id":"741911BC-8427-404A-B353-3CC8A30AFC6A","library_name":"InitiationandEngagementofSubstanceUseDisorderTreatment","statement_name":"SDE Sex"}],"title":"Population Criteria Section"}],"source_data_criteria":[{"_id":"689244b50734dfcaf5414937","_type":"QDM::PatientCharacteristicPayer","codeListId":"2.16.840.1.114222.4.11.3591","dataElementCodes":[],"description":"Patient Characteristic Payer: Payer","hqmfOid":"2.16.840.1.113883.10.20.28.4.58","id":"689244b50734dfcaf5414937","qdmCategory":"patient_characteristic","qdmStatus":"payer","qdmTitle":"Patient Characteristic Payer","qdmVersion":"5.6","relevantPeriod":null},{"_id":"689244ae0734dfcaf541453a","_type":"QDM::MedicationOrder","authorDatetime":null,"codeListId":"2.16.840.1.113883.3.464.1003.1149","dataElementCodes":[],"daysSupplied":null,"description":"Medication, Order: SubstanceUseDisorderLongActingMedication","dosage":null,"frequency":null,"hqmfOid":"2.16.840.1.113883.10.20.28.4.51","id":"689244ae0734dfcaf541453a","negationRationale":null,"qdmCategory":"medication","qdmStatus":"order","qdmTitle":"Medication, Order","qdmVersion":"5.6","reason":null,"refills":null,"relatedTo":null,"relevantPeriod":null,"route":null,"setting":null,"supply":null},{"_id":"689244b50734dfcaf5414938","_type":"QDM::PatientCharacteristicSex","codeListId":"2.16.840.1.113762.1.4.1","dataElementCodes":[],"description":"Patient Characteristic Sex: ONCAdministrativeSex","hqmfOid":"2.16.840.1.113883.10.20.28.4.55","id":"689244b50734dfcaf5414938","qdmCategory":"patient_characteristic","qdmStatus":"gender","qdmTitle":"Patient Characteristic Sex","qdmVersion":"5.6"},{"_id":"689244ae0734dfcaf541453c","_type":"QDM::InterventionPerformed","authorDatetime":null,"codeListId":"2.16.840.1.113883.3.464.1003.106.12.1005","dataElementCodes":[],"description":"Intervention, Performed: SubstanceUseDisorderTreatment","hqmfOid":"2.16.840.1.113883.10.20.28.4.36","id":"689244ae0734dfcaf541453c","negationRationale":null,"qdmCategory":"intervention","qdmStatus":"performed","qdmTitle":"Intervention, Performed","qdmVersion":"5.6","reason":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null,"status":null},{"_id":"689244ae0734dfcaf5414547","_type":"QDM::Diagnosis","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"2.16.840.1.113883.3.464.1003.106.12.1001","dataElementCodes":[],"description":"Diagnosis: SubstanceUseDisorder","hqmfOid":"2.16.840.1.113883.10.20.28.4.110","id":"689244ae0734dfcaf5414547","prevalencePeriod":null,"qdmCategory":"condition","qdmTitle":"Diagnosis","qdmVersion":"5.6","qrdaOid":"2.16.840.1.113883.10.20.24.3.135","severity":null},{"_id":"689244ae0734dfcaf5414535","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.464.1003.101.12.1010","dataElementCodes":[],"description":"Encounter, Performed: EmergencyDepartmentEvaluationandManagementVisit","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"689244ae0734dfcaf5414535","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"689244ae0734dfcaf5414536","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.666.5.307","dataElementCodes":[],"description":"Encounter, Performed: EncounterInpatient","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"689244ae0734dfcaf5414536","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"689244ae0734dfcaf5414537","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.464.1003.101.12.1080","dataElementCodes":[],"description":"Encounter, Performed: TelephoneVisits","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"689244ae0734dfcaf5414537","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"689244ae0734dfcaf5414538","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.464.1003.101.12.1004","dataElementCodes":[],"description":"Encounter, Performed: InitialHospitalInpatientVisit","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"689244ae0734dfcaf5414538","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"689244ae0734dfcaf5414539","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.464.1003.101.12.1006","dataElementCodes":[],"description":"Encounter, Performed: DischargeServicesHospitalInpatientSameDayDischarge","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"689244ae0734dfcaf5414539","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"689244ae0734dfcaf541453b","_type":"QDM::MedicationOrder","authorDatetime":null,"codeListId":"2.16.840.1.113883.3.464.1003.1150","dataElementCodes":[],"daysSupplied":null,"description":"Medication, Order: SubstanceUseDisorderShortActingMedication","dosage":null,"frequency":null,"hqmfOid":"2.16.840.1.113883.10.20.28.4.51","id":"689244ae0734dfcaf541453b","negationRationale":null,"qdmCategory":"medication","qdmStatus":"order","qdmTitle":"Medication, Order","qdmVersion":"5.6","reason":null,"refills":null,"relatedTo":null,"relevantPeriod":null,"route":null,"setting":null,"supply":null},{"_id":"689244b50734dfcaf5414939","_type":"QDM::InterventionOrder","authorDatetime":null,"codeListId":"2.16.840.1.113883.3.526.3.1584","dataElementCodes":[],"description":"Intervention, Order: HospiceCareAmbulatory","hqmfOid":"2.16.840.1.113883.10.20.28.4.35","id":"689244b50734dfcaf5414939","negationRationale":null,"qdmCategory":"intervention","qdmStatus":"order","qdmTitle":"Intervention, Order","qdmVersion":"5.6","reason":null},{"_id":"689244ae0734dfcaf541453d","_type":"QDM::InterventionPerformed","authorDatetime":null,"codeListId":"2.16.840.1.113883.3.526.3.1584","dataElementCodes":[],"description":"Intervention, Performed: HospiceCareAmbulatory","hqmfOid":"2.16.840.1.113883.10.20.28.4.36","id":"689244ae0734dfcaf541453d","negationRationale":null,"qdmCategory":"intervention","qdmStatus":"performed","qdmTitle":"Intervention, Performed","qdmVersion":"5.6","reason":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null,"status":null},{"_id":"689244ae0734dfcaf541453e","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.464.1003.101.12.1059","dataElementCodes":[],"description":"Encounter, Performed: DetoxificationVisit","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"689244ae0734dfcaf541453e","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"689244ae0734dfcaf5414542","_type":"QDM::ProcedurePerformed","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"2.16.840.1.113883.3.464.1003.1157","components":null,"dataElementCodes":[],"description":"Procedure, Performed: SubstanceUseDisorderShortActingMedicationAdministration","hqmfOid":"2.16.840.1.113883.10.20.28.4.67","id":"689244ae0734dfcaf5414542","incisionDatetime":null,"method":null,"negationRationale":null,"qdmCategory":"procedure","qdmStatus":"performed","qdmTitle":"Procedure, Performed","qdmVersion":"5.6","rank":null,"reason":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null,"status":null},{"_id":"689244ae0734dfcaf541453f","_type":"QDM::InterventionPerformed","authorDatetime":null,"codeListId":"2.16.840.1.113883.3.526.3.1496","dataElementCodes":[],"description":"Intervention, Performed: PsychVisitPsychotherapy","hqmfOid":"2.16.840.1.113883.10.20.28.4.36","id":"689244ae0734dfcaf541453f","negationRationale":null,"qdmCategory":"intervention","qdmStatus":"performed","qdmTitle":"Intervention, Performed","qdmVersion":"5.6","reason":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null,"status":null},{"_id":"689244b50734dfcaf541493a","_type":"QDM::PatientCharacteristicEthnicity","codeListId":"2.16.840.1.114222.4.11.837","dataElementCodes":[],"description":"Patient Characteristic Ethnicity: Ethnicity","hqmfOid":"2.16.840.1.113883.10.20.28.4.56","id":"689244b50734dfcaf541493a","qdmCategory":"patient_characteristic","qdmStatus":"ethnicity","qdmTitle":"Patient Characteristic Ethnicity","qdmVersion":"5.6"},{"_id":"689244ae0734dfcaf5414540","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.464.1003.101.12.1002","dataElementCodes":[],"description":"Encounter, Performed: InitialHospitalObservationCare","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"689244ae0734dfcaf5414540","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"689244b50734dfcaf541493b","_type":"QDM::PatientCharacteristicRace","codeListId":"2.16.840.1.114222.4.11.836","dataElementCodes":[],"description":"Patient Characteristic Race: Race","hqmfOid":"2.16.840.1.113883.10.20.28.4.59","id":"689244b50734dfcaf541493b","qdmCategory":"patient_characteristic","qdmStatus":"race","qdmTitle":"Patient Characteristic Race","qdmVersion":"5.6"},{"_id":"689244ae0734dfcaf5414541","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.464.1003.1003","dataElementCodes":[],"description":"Encounter, Performed: HospiceEncounter","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"689244ae0734dfcaf5414541","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"689244ae0734dfcaf5414543","_type":"QDM::ProcedurePerformed","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"2.16.840.1.113883.3.464.1003.1156","components":null,"dataElementCodes":[],"description":"Procedure, Performed: SubstanceUseDisorderLongActingMedicationAdministration","hqmfOid":"2.16.840.1.113883.10.20.28.4.67","id":"689244ae0734dfcaf5414543","incisionDatetime":null,"method":null,"negationRationale":null,"qdmCategory":"procedure","qdmStatus":"performed","qdmTitle":"Procedure, Performed","qdmVersion":"5.6","rank":null,"reason":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null,"status":null},{"_id":"689244ae0734dfcaf5414544","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.464.1003.101.12.1007","dataElementCodes":[],"description":"Encounter, Performed: DischargeServicesHospitalInpatient","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"689244ae0734dfcaf5414544","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"689244ae0734dfcaf5414545","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.464.1003.101.12.1089","dataElementCodes":[],"description":"Encounter, Performed: OnlineAssessments","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"689244ae0734dfcaf5414545","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"689244ae0734dfcaf5414546","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.464.1003.101.12.1001","dataElementCodes":[],"description":"Encounter, Performed: OfficeVisit","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"689244ae0734dfcaf5414546","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"689244ae0734dfcaf5414548","_type":"QDM::Diagnosis","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"2.16.840.1.113883.3.464.1003.1165","dataElementCodes":[],"description":"Diagnosis: HospiceDiagnosis","hqmfOid":"2.16.840.1.113883.10.20.28.4.110","id":"689244ae0734dfcaf5414548","prevalencePeriod":null,"qdmCategory":"condition","qdmTitle":"Diagnosis","qdmVersion":"5.6","qrdaOid":"2.16.840.1.113883.10.20.24.3.135","severity":null},{"_id":"689244b50734dfcaf541493c","_type":"QDM::AssessmentPerformed","authorDatetime":null,"codeListId":"drc-fba6a4e5f5a529f9af0e0ac4cc9930b15eed11995ff69f544d676472e0b4ea9f","components":null,"dataElementCodes":[],"description":"Assessment, Performed: Hospice care [Minimum Data Set]","hqmfOid":"2.16.840.1.113883.10.20.28.4.117","id":"689244b50734dfcaf541493c","interpretation":null,"method":null,"negationRationale":null,"qdmCategory":"assessment","qdmStatus":"performed","qdmTitle":"Assessment, Performed","qdmVersion":"5.6","reason":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null}],"title":"Initiation and Engagement of Substance Use Disorder Treatment","updated_at":null,"value_set_ids":["689244ae0734dfcaf5414549","689244ae0734dfcaf541454a","689244ae0734dfcaf541454b","689244ae0734dfcaf541454c","689244b50734dfcaf54148fa","689244b50734dfcaf54148fb","689244b50734dfcaf54148fc","689244b50734dfcaf54148fd","689244b50734dfcaf54148fe","689244b50734dfcaf54148ff","689244b50734dfcaf5414900","689244b50734dfcaf5414901","689244b50734dfcaf5414902","689244b50734dfcaf5414903","689244b50734dfcaf5414904","689244b50734dfcaf5414905","689244b50734dfcaf5414906","689244b50734dfcaf5414907","689244b50734dfcaf5414908","689244b50734dfcaf5414909","689244b50734dfcaf541490a","689244b50734dfcaf541490b","689244b50734dfcaf541490c","689244b50734dfcaf541490d","689244b50734dfcaf541490e","689244b50734dfcaf541490f","689244b50734dfcaf5414910","689244b50734dfcaf5414911","689244b50734dfcaf5414912","689244b50734dfcaf5414913","689244b50734dfcaf5414914","689244b50734dfcaf5414915"]}