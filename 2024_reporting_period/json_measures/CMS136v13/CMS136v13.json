{"_id":"689244ad0734dfcaf54144bc","calculate_sdes":null,"calculation_method":"PATIENT","cms_id":"CMS136v13","component":false,"component_hqmf_set_ids":[],"composite":false,"composite_hqmf_set_id":null,"cql_libraries":[{"_id":"6892448f0734dfcaf541367d","cql":"library FollowUpCareforChildrenPrescribedADHDMedicationADD version '13.0.000'\r\n\r\nusing QDM version '5.6'\r\n\r\ninclude MATGlobalCommonFunctions version '7.0.000' called Global\r\ninclude Hospice version '5.0.000' called Hospice\r\ninclude CumulativeMedicationDuration version '2.0.000' called CMD\r\n\r\ncodesystem \"RXNORM\": 'urn:oid:2.16.840.1.113883.6.88'\r\n\r\nvalueset \"Ambulatory\": 'urn:oid:2.16.840.1.113883.3.464.1003.122.12.1003'\r\nvalueset \"Atomoxetine\": 'urn:oid:2.16.840.1.113883.3.464.1003.1170'\r\nvalueset \"Behavioral Health Follow up Visit\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1054'\r\nvalueset \"Clonidine\": 'urn:oid:2.16.840.1.113883.3.464.1003.1171'\r\nvalueset \"Dexmethylphenidate\": 'urn:oid:2.16.840.1.113883.3.464.1003.1172'\r\nvalueset \"Dextroamphetamine\": 'urn:oid:2.16.840.1.113883.3.464.1003.1173'\r\nvalueset \"Encounter Inpatient\": 'urn:oid:2.16.840.1.113883.3.666.5.307'\r\nvalueset \"Ethnicity\": 'urn:oid:2.16.840.1.114222.4.11.837'\r\nvalueset \"Guanfacine\": 'urn:oid:2.16.840.1.113883.3.464.1003.196.11.1252'\r\nvalueset \"Home Healthcare Services\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1016'\r\nvalueset \"Initial Hospital Observation Care\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1002'\r\nvalueset \"Lisdexamfetamine\": 'urn:oid:2.16.840.1.113883.3.464.1003.1174'\r\nvalueset \"Mental Behavioral and Neurodevelopmental Disorders\": 'urn:oid:2.16.840.1.113883.3.464.1003.105.12.1203'\r\nvalueset \"Methylphenidate\": 'urn:oid:2.16.840.1.113883.3.464.1003.1176'\r\nvalueset \"Narcolepsy\": 'urn:oid:2.16.840.1.113883.3.464.1003.114.12.1011'\r\nvalueset \"Office Visit\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1001'\r\nvalueset \"ONC Administrative Sex\": 'urn:oid:2.16.840.1.113762.1.4.1'\r\nvalueset \"Online Assessments\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1089'\r\nvalueset \"Outpatient Consultation\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1008'\r\nvalueset \"Payer\": 'urn:oid:2.16.840.1.114222.4.11.3591'\r\nvalueset \"Preventive Care Services Group Counseling\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1027'\r\nvalueset \"Preventive Care Services Individual Counseling\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1026'\r\nvalueset \"Preventive Care Services, Initial Office Visit, 0 to 17\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1022'\r\nvalueset \"Preventive Care, Established Office Visit, 0 to 17\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1024'\r\nvalueset \"Psych Visit Diagnostic Evaluation\": 'urn:oid:2.16.840.1.113883.3.526.3.1492'\r\nvalueset \"Psych Visit Psychotherapy\": 'urn:oid:2.16.840.1.113883.3.526.3.1496'\r\nvalueset \"Psychotherapy and Pharmacologic Management\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1055'\r\nvalueset \"Race\": 'urn:oid:2.16.840.1.114222.4.11.836'\r\nvalueset \"Telephone Visits\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1080'\r\n\r\ncode \"methamphetamine hydrochloride 5 MG Oral Tablet\": '977860' from \"RXNORM\" display 'methamphetamine hydrochloride 5 MG Oral Tablet'\r\n\r\nparameter \"Measurement Period\" Interval\u003cDateTime\u003e\r\n\r\ncontext Patient\n\n/*Index Prescription Start Date (IPSD)*/\r\n\r\ndefine \"IPSD\":\r\n  date from Coalesce(\"First ADHD Medication Prescribed During Intake Period\".relevantPeriod.low, \"First ADHD Medication Prescribed During Intake Period\".authorDatetime)\r\n\r\ndefine \"Denominator 1\":\r\n  \"Initial Population 1\"\r\n\r\ndefine \"Denominator 2\":\r\n  \"Initial Population 2\"\r\n\r\ndefine \"Denominator Exclusions\":\r\n  Hospice.\"Has Hospice Services\"\r\n    or exists ( \"Narcolepsy Exclusion\" )\r\n\r\ndefine \"Encounter During Initiation Phase\":\r\n  \"Qualifying Numerator Encounter\" ValidNumeratorEncounter\r\n    where Global.\"ToDateInterval\" ( ValidNumeratorEncounter.relevantPeriod ) starts 30 days or less after day of \"IPSD\"\r\n\r\ndefine \"First ADHD Medication Prescribed During Intake Period\":\r\n  First(\"ADHD Medication Prescribed During Intake Period and Not Previously on ADHD Medication\")\r\n\r\ndefine \"Has ADHD Cumulative Medication Duration Greater Than or Equal to 210 Days\":\r\n  \"ADHD Cumulative Medication Duration\" \u003e= 210\r\n\r\ndefine \"ADHD Cumulative Medication Duration\":\r\n  CMD.\"CumulativeDuration\" ( \"ADHD Medications Taken on IPSD or During Continuation and Maintenance Phase\" )\r\n\r\ndefine \"Initial Population 1\":\r\n  AgeInYearsAt(date from start of \"Intake Period\")\u003e= 6\r\n    and AgeInYearsAt(date from \r\n      end of \"Intake Period\"\r\n    )\u003c= 12\r\n    and exists \"Qualifying Encounter\"\r\n    and \"First ADHD Medication Prescribed During Intake Period\" is not null\r\n    and not exists \"Inpatient Stay with Qualifying Diagnosis During Initiation Phase\"\r\n\r\ndefine \"Initial Population 2\":\r\n  AgeInYearsAt(date from start of \"Intake Period\")\u003e= 6\r\n    and AgeInYearsAt(date from \r\n      end of \"Intake Period\"\r\n    )\u003c= 12\r\n    and exists \"Qualifying Encounter\"\r\n    and \"First ADHD Medication Prescribed During Intake Period\" is not null\r\n    and \"Has ADHD Cumulative Medication Duration Greater Than or Equal to 210 Days\"\r\n    and not exists \"Inpatient Stay with Qualifying Diagnosis During Continuation and Maintenance Phase\"\r\n\r\ndefine \"Inpatient Stay with Qualifying Diagnosis\":\r\n  ( [\"Encounter, Performed\": \"Encounter Inpatient\"] InpatientStay\r\n      where exists ( InpatientStay.diagnoses EncounterDiagnoses\r\n          where ( EncounterDiagnoses.rank = 1\r\n              and EncounterDiagnoses.code in \"Mental Behavioral and Neurodevelopmental Disorders\"\r\n          )\r\n      )\r\n  )\r\n\r\ndefine \"Inpatient Stay with Qualifying Diagnosis During Continuation and Maintenance Phase\":\r\n  \"Inpatient Stay with Qualifying Diagnosis\" InpatientStay\r\n    where Global.\"ToDateInterval\" ( InpatientStay.relevantPeriod ) starts 300 days or less after day of \"IPSD\"\r\n\r\ndefine \"Inpatient Stay with Qualifying Diagnosis During Initiation Phase\":\r\n  \"Inpatient Stay with Qualifying Diagnosis\" InpatientStay\r\n    where Global.\"ToDateInterval\" ( InpatientStay.relevantPeriod ) starts 30 days or less after day of \"IPSD\"\r\n\r\ndefine \"Intake Period\":\r\n  Interval[\"March 1 of Year Prior to Measurement Period\", \"Last Calendar Day of February of Measurement Period\"]\r\n\r\ndefine \"Last Calendar Day of February of Measurement Period\":\r\n  ( DateTime(year from start of \"Measurement Period\", 3, 1, 23, 59, 59, 0, 0)) - 1 day\r\n\r\ndefine \"March 1 of Year Prior to Measurement Period\":\r\n  DateTime((year from start of \"Measurement Period\" - 1), 3, 1, 0, 0, 0, 0, 0)\r\n\r\ndefine \"Narcolepsy Exclusion\":\r\n  [\"Diagnosis\": \"Narcolepsy\"] Narcolepsy\r\n    where Narcolepsy.prevalencePeriod starts on or before \r\n    end \"Measurement Period\"\r\n\r\ndefine \"Numerator 1\":\r\n  exists ( \"Encounter During Initiation Phase\" )\r\n\r\ndefine \"Numerator 2\":\r\n  exists ( \"Encounter During Initiation Phase\" )\r\n    and ( ( \"Two or More Encounters 31 to 300 Days into Continuation and Maintenance Phase\" )\r\n        or ( exists ( \"Encounter 31 to 300 Days into Continuation and Maintenance Phase\" Encounter1\r\n              with \"Online Assessment 31 to 300 Days into Continuation and Maintenance Phase\" Encounter2\r\n                such that Encounter1 is not null\r\n                  and Encounter2 is not null\r\n                  and Encounter1 !~ Encounter2\r\n          )\r\n        )\r\n    )\r\n\r\ndefine \"Qualifying Encounter\":\r\n  ( [\"Encounter, Performed\": \"Office Visit\"]\r\n    union [\"Encounter, Performed\": \"Home Healthcare Services\"]\r\n    union [\"Encounter, Performed\": \"Preventive Care, Established Office Visit, 0 to 17\"]\r\n    union [\"Encounter, Performed\": \"Preventive Care Services, Initial Office Visit, 0 to 17\"] ) ValidEncounters\r\n    where Global.\"ToDateInterval\" ( ValidEncounters.relevantPeriod ) during day of Interval[\"IPSD\" - 6 months, \"IPSD\"]\r\n\r\ndefine \"Qualifying Numerator Encounter\":\r\n  ( [\"Encounter, Performed\": \"Office Visit\"]\r\n      union [\"Encounter, Performed\": \"Initial Hospital Observation Care\"]\r\n      union [\"Encounter, Performed\": \"Preventive Care Services Group Counseling\"]\r\n      union [\"Encounter, Performed\": \"Behavioral Health Follow up Visit\"]\r\n      union [\"Encounter, Performed\": \"Preventive Care Services Individual Counseling\"]\r\n      union ( [\"Encounter, Performed\": \"Psychotherapy and Pharmacologic Management\"] PsychPharmManagement\r\n          where exists ( PsychPharmManagement.facilityLocations Location\r\n              where Location.code in \"Ambulatory\"\r\n          )\r\n      )\r\n      union [\"Encounter, Performed\": \"Outpatient Consultation\"]\r\n      union [\"Encounter, Performed\": \"Home Healthcare Services\"]\r\n      union [\"Encounter, Performed\": \"Preventive Care Services, Initial Office Visit, 0 to 17\"]\r\n      union [\"Encounter, Performed\": \"Preventive Care, Established Office Visit, 0 to 17\"]\r\n      union [\"Encounter, Performed\": \"Psych Visit Diagnostic Evaluation\"]\r\n      union [\"Encounter, Performed\": \"Psych Visit Psychotherapy\"]\r\n      union [\"Encounter, Performed\": \"Telephone Visits\"]\r\n  )\r\n\r\ndefine \"SDE Ethnicity\":\r\n  [\"Patient Characteristic Ethnicity\": \"Ethnicity\"]\r\n\r\ndefine \"SDE Payer\":\r\n  [\"Patient Characteristic Payer\": \"Payer\"]\r\n\r\ndefine \"SDE Race\":\r\n  [\"Patient Characteristic Race\": \"Race\"]\r\n\r\ndefine \"SDE Sex\":\r\n  [\"Patient Characteristic Sex\": \"ONC Administrative Sex\"]\r\n\r\ndefine \"Two or More Encounters 31 to 300 Days into Continuation and Maintenance Phase\":\r\n  Count(\"Encounter 31 to 300 Days into Continuation and Maintenance Phase\")\u003e= 2\n\n/*Note relevantPeriod.low represents the interval's lower boundary and its usage is to ensure appropriate evaluation of the coalesce.*/\r\n\r\ndefine \"ADHD Medication Prescribed During Intake Period and Not Previously on ADHD Medication\":\r\n  ( ( [\"Medication, Order\": \"Atomoxetine\"]\r\n    union [\"Medication, Order\": \"Clonidine\"]\r\n    union [\"Medication, Order\": \"Dexmethylphenidate\"]\r\n    union [\"Medication, Order\": \"Dextroamphetamine\"]\r\n    union [\"Medication, Order\": \"Lisdexamfetamine\"]\r\n    union [\"Medication, Order\": \"methamphetamine hydrochloride 5 MG Oral Tablet\"]\r\n    union [\"Medication, Order\": \"Methylphenidate\"]\r\n    union [\"Medication, Order\": \"Guanfacine\"] ) ADHDMedications\r\n    where Coalesce(ADHDMedications.relevantPeriod.low, ADHDMedications.authorDatetime)during \"Intake Period\" ) ADHDMedicationOrder\r\n    without ( [\"Medication, Active\": \"Atomoxetine\"]\r\n      union [\"Medication, Active\": \"Clonidine\"]\r\n      union [\"Medication, Active\": \"Dexmethylphenidate\"]\r\n      union [\"Medication, Active\": \"Dextroamphetamine\"]\r\n      union [\"Medication, Active\": \"Lisdexamfetamine\"]\r\n      union [\"Medication, Active\": \"methamphetamine hydrochloride 5 MG Oral Tablet\"]\r\n      union [\"Medication, Active\": \"Methylphenidate\"]\r\n      union [\"Medication, Active\": \"Guanfacine\"] ) ActiveADHDMedication\r\n      such that Global.\"ToDateInterval\" ( Global.\"NormalizeInterval\" ( ActiveADHDMedication.relevantDatetime, ActiveADHDMedication.relevantPeriod ) ) overlaps Interval[date from Coalesce(ADHDMedicationOrder.relevantPeriod.low, ADHDMedicationOrder.authorDatetime)- 120 days, date from Coalesce(ADHDMedicationOrder.relevantPeriod.low, ADHDMedicationOrder.authorDatetime))\r\n    sort by Coalesce(relevantPeriod.low, authorDatetime)asc\r\n\r\ndefine \"Encounter 31 to 300 Days into Continuation and Maintenance Phase\":\r\n  \"Qualifying Numerator Encounter\" ValidNumeratorEncounter\r\n    where Global.\"ToDateInterval\" ( ValidNumeratorEncounter.relevantPeriod ) starts during day of Interval[\"IPSD\" + 31 days, \"IPSD\" + 300 days]\r\n    return date from start of ValidNumeratorEncounter.relevantPeriod\r\n\r\ndefine \"Online Assessment 31 to 300 Days into Continuation and Maintenance Phase\":\r\n  [\"Encounter, Performed\": \"Online Assessments\"] OnlineAssessment\r\n    where Global.\"ToDateInterval\" ( OnlineAssessment.relevantPeriod ) starts during day of Interval[\"IPSD\" + 31 days, \"IPSD\" + 300 days]\r\n    return date from start of OnlineAssessment.relevantPeriod\r\n\r\ndefine \"ADHD Medications Taken on IPSD or During Continuation and Maintenance Phase\":\r\n  ( ( CMD.\"RolloutIntervals\" ( ( [\"Medication, Order\": \"Atomoxetine\"] AtomoxetineMed\r\n        return all {\r\n          period: CMD.\"MedicationOrderPeriod\" ( AtomoxetineMed ),\r\n          periodStart: start of CMD.\"MedicationOrderPeriod\" ( AtomoxetineMed )\r\n        }\r\n        sort by periodStart\r\n    ).period )\r\n  )\r\n    union ( CMD.\"RolloutIntervals\" ( ( [\"Medication, Order\": \"Clonidine\"] ClonidineMed\r\n          return all {\r\n            period: CMD.\"MedicationOrderPeriod\" ( ClonidineMed ),\r\n            periodStart: start of CMD.\"MedicationOrderPeriod\" ( ClonidineMed )\r\n          }\r\n          sort by periodStart\r\n      ).period )\r\n    )\r\n    union ( CMD.\"RolloutIntervals\" ( ( [\"Medication, Order\": \"Dexmethylphenidate\"] DexmethylphenidateMed\r\n          return all {\r\n            period: CMD.\"MedicationOrderPeriod\" ( DexmethylphenidateMed ),\r\n            periodStart: start of CMD.\"MedicationOrderPeriod\" ( DexmethylphenidateMed )\r\n          }\r\n          sort by periodStart\r\n      ).period )\r\n    )\r\n    union ( CMD.\"RolloutIntervals\" ( ( [\"Medication, Order\": \"Dextroamphetamine\"] DextroamphetamineMed\r\n          return all {\r\n            period: CMD.\"MedicationOrderPeriod\" ( DextroamphetamineMed ),\r\n            periodStart: start of CMD.\"MedicationOrderPeriod\" ( DextroamphetamineMed )\r\n          }\r\n          sort by periodStart\r\n      ).period )\r\n    )\r\n    union ( CMD.\"RolloutIntervals\" ( ( [\"Medication, Order\": \"Lisdexamfetamine\"] LisdexamfetamineMed\r\n          return all {\r\n            period: CMD.\"MedicationOrderPeriod\" ( LisdexamfetamineMed ),\r\n            periodStart: start of CMD.\"MedicationOrderPeriod\" ( LisdexamfetamineMed )\r\n          }\r\n          sort by periodStart\r\n      ).period )\r\n    )\r\n    union ( CMD.\"RolloutIntervals\" ( ( [\"Medication, Order\": \"Methylphenidate\"] MethylphenidateMed\r\n          return all {\r\n            period: CMD.\"MedicationOrderPeriod\" ( MethylphenidateMed ),\r\n            periodStart: start of CMD.\"MedicationOrderPeriod\" ( MethylphenidateMed )\r\n          }\r\n          sort by periodStart\r\n      ).period )\r\n    )\r\n    union ( CMD.\"RolloutIntervals\" ( ( [\"Medication, Order\": \"Guanfacine\"] GuanfacineMed\r\n          return all {\r\n            period: CMD.\"MedicationOrderPeriod\" ( GuanfacineMed ),\r\n            periodStart: start of CMD.\"MedicationOrderPeriod\" ( GuanfacineMed )\r\n          }\r\n          sort by periodStart\r\n      ).period )\r\n    )\r\n    union ( CMD.\"RolloutIntervals\" ( ( [\"Medication, Order\": \"methamphetamine hydrochloride 5 MG Oral Tablet\"] MethamphetamineMed\r\n          return all {\r\n            period: CMD.\"MedicationOrderPeriod\" ( MethamphetamineMed ),\r\n            periodStart: start of CMD.\"MedicationOrderPeriod\" ( MethamphetamineMed )\r\n          }\r\n          sort by periodStart\r\n      ).period )\r\n    ) ) ADHDMedication\r\n    let IPSDAndContinuationMaintenancePhase: Interval[\"IPSD\", \"IPSD\" + 300 days]\r\n    return all ADHDMedication\r\n      intersect IPSDAndContinuationMaintenancePhase","elm":{"library":{"annotation":[{"translatorOptions":"EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion,DisableMethodInvocation","type":"CqlToElmInfo"},{"type":"Annotation","s":{"r":"420","s":[{"value":["","library FollowUpCareforChildrenPrescribedADHDMedicationADD version '13.0.000'"]}]}}],"identifier":{"id":"FollowUpCareforChildrenPrescribedADHDMedicationADD","version":"13.0.000"},"schemaIdentifier":{"id":"urn:hl7-org:elm","version":"r1"},"usings":{"def":[{"localIdentifier":"System","uri":"urn:hl7-org:elm-types:r1"},{"localId":"1","locator":"3:1-3:23","localIdentifier":"QDM","uri":"urn:healthit-gov:qdm:v5_6","version":"5.6","annotation":[{"type":"Annotation","s":{"r":"1","s":[{"value":["","using "]},{"s":[{"value":["QDM"]}]},{"value":[" version ","'5.6'"]}]}}]}]},"includes":{"def":[{"localId":"2","locator":"5:1-5:64","localIdentifier":"Global","path":"MATGlobalCommonFunctions","version":"7.0.000","annotation":[{"type":"Annotation","s":{"r":"2","s":[{"value":["","include "]},{"s":[{"value":["MATGlobalCommonFunctions"]}]},{"value":[" version ","'7.0.000'"," called ","Global"]}]}}]},{"localId":"3","locator":"6:1-6:48","localIdentifier":"Hospice","path":"Hospice","version":"5.0.000","annotation":[{"type":"Annotation","s":{"r":"3","s":[{"value":["","include "]},{"s":[{"value":["Hospice"]}]},{"value":[" version ","'5.0.000'"," called ","Hospice"]}]}}]},{"localId":"4","locator":"7:1-7:65","localIdentifier":"CMD","path":"CumulativeMedicationDuration","version":"2.0.000","annotation":[{"type":"Annotation","s":{"r":"4","s":[{"value":["","include "]},{"s":[{"value":["CumulativeMedicationDuration"]}]},{"value":[" version ","'2.0.000'"," called ","CMD"]}]}}]}]},"parameters":{"def":[{"localId":"39","locator":"43:1-43:49","name":"Measurement Period","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"39","s":[{"value":["","parameter ","\"Measurement Period\""," "]},{"r":"38","s":[{"value":["Interval\u003c"]},{"r":"37","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}}],"parameterTypeSpecifier":{"localId":"38","locator":"43:32-43:49","type":"IntervalTypeSpecifier","pointType":{"localId":"37","locator":"43:41-43:48","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},"codeSystems":{"def":[{"localId":"5","locator":"9:1-9:53","name":"RXNORM","id":"2.16.840.1.113883.6.88","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"5","s":[{"value":["","codesystem ","\"RXNORM\"",": ","'urn:oid:2.16.840.1.113883.6.88'"]}]}}]}]},"valueSets":{"def":[{"localId":"6","locator":"11:1-11:73","name":"Ambulatory","id":"2.16.840.1.113883.3.464.1003.122.12.1003","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"6","s":[{"value":["","valueset ","\"Ambulatory\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.122.12.1003'"]}]}}]},{"localId":"7","locator":"12:1-12:67","name":"Atomoxetine","id":"2.16.840.1.113883.3.464.1003.1170","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"7","s":[{"value":["","valueset ","\"Atomoxetine\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.1170'"]}]}}]},{"localId":"8","locator":"13:1-13:96","name":"Behavioral Health Follow up Visit","id":"2.16.840.1.113883.3.464.1003.101.12.1054","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"8","s":[{"value":["","valueset ","\"Behavioral Health Follow up Visit\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1054'"]}]}}]},{"localId":"9","locator":"14:1-14:65","name":"Clonidine","id":"2.16.840.1.113883.3.464.1003.1171","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"9","s":[{"value":["","valueset ","\"Clonidine\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.1171'"]}]}}]},{"localId":"10","locator":"15:1-15:74","name":"Dexmethylphenidate","id":"2.16.840.1.113883.3.464.1003.1172","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"10","s":[{"value":["","valueset ","\"Dexmethylphenidate\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.1172'"]}]}}]},{"localId":"11","locator":"16:1-16:73","name":"Dextroamphetamine","id":"2.16.840.1.113883.3.464.1003.1173","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"11","s":[{"value":["","valueset ","\"Dextroamphetamine\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.1173'"]}]}}]},{"localId":"12","locator":"17:1-17:71","name":"Encounter Inpatient","id":"2.16.840.1.113883.3.666.5.307","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"12","s":[{"value":["","valueset ","\"Encounter Inpatient\"",": ","'urn:oid:2.16.840.1.113883.3.666.5.307'"]}]}}]},{"localId":"13","locator":"18:1-18:58","name":"Ethnicity","id":"2.16.840.1.114222.4.11.837","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"13","s":[{"value":["","valueset ","\"Ethnicity\"",": ","'urn:oid:2.16.840.1.114222.4.11.837'"]}]}}]},{"localId":"14","locator":"19:1-19:73","name":"Guanfacine","id":"2.16.840.1.113883.3.464.1003.196.11.1252","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"14","s":[{"value":["","valueset ","\"Guanfacine\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.196.11.1252'"]}]}}]},{"localId":"15","locator":"20:1-20:87","name":"Home Healthcare Services","id":"2.16.840.1.113883.3.464.1003.101.12.1016","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"15","s":[{"value":["","valueset ","\"Home Healthcare Services\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1016'"]}]}}]},{"localId":"16","locator":"21:1-21:96","name":"Initial Hospital Observation Care","id":"2.16.840.1.113883.3.464.1003.101.12.1002","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"16","s":[{"value":["","valueset ","\"Initial Hospital Observation Care\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1002'"]}]}}]},{"localId":"17","locator":"22:1-22:72","name":"Lisdexamfetamine","id":"2.16.840.1.113883.3.464.1003.1174","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"17","s":[{"value":["","valueset ","\"Lisdexamfetamine\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.1174'"]}]}}]},{"localId":"18","locator":"23:1-23:113","name":"Mental Behavioral and Neurodevelopmental Disorders","id":"2.16.840.1.113883.3.464.1003.105.12.1203","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"18","s":[{"value":["","valueset ","\"Mental Behavioral and Neurodevelopmental Disorders\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.105.12.1203'"]}]}}]},{"localId":"19","locator":"24:1-24:71","name":"Methylphenidate","id":"2.16.840.1.113883.3.464.1003.1176","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"19","s":[{"value":["","valueset ","\"Methylphenidate\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.1176'"]}]}}]},{"localId":"20","locator":"25:1-25:73","name":"Narcolepsy","id":"2.16.840.1.113883.3.464.1003.114.12.1011","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"20","s":[{"value":["","valueset ","\"Narcolepsy\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.114.12.1011'"]}]}}]},{"localId":"21","locator":"26:1-26:75","name":"Office Visit","id":"2.16.840.1.113883.3.464.1003.101.12.1001","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"21","s":[{"value":["","valueset ","\"Office Visit\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1001'"]}]}}]},{"localId":"22","locator":"27:1-27:68","name":"ONC Administrative Sex","id":"2.16.840.1.113762.1.4.1","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"22","s":[{"value":["","valueset ","\"ONC Administrative Sex\"",": ","'urn:oid:2.16.840.1.113762.1.4.1'"]}]}}]},{"localId":"23","locator":"28:1-28:81","name":"Online Assessments","id":"2.16.840.1.113883.3.464.1003.101.12.1089","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"23","s":[{"value":["","valueset ","\"Online Assessments\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1089'"]}]}}]},{"localId":"24","locator":"29:1-29:86","name":"Outpatient Consultation","id":"2.16.840.1.113883.3.464.1003.101.12.1008","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"24","s":[{"value":["","valueset ","\"Outpatient Consultation\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1008'"]}]}}]},{"localId":"25","locator":"30:1-30:55","name":"Payer","id":"2.16.840.1.114222.4.11.3591","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"25","s":[{"value":["","valueset ","\"Payer\"",": ","'urn:oid:2.16.840.1.114222.4.11.3591'"]}]}}]},{"localId":"26","locator":"31:1-31:104","name":"Preventive Care Services Group Counseling","id":"2.16.840.1.113883.3.464.1003.101.12.1027","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"26","s":[{"value":["","valueset ","\"Preventive Care Services Group Counseling\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1027'"]}]}}]},{"localId":"27","locator":"32:1-32:109","name":"Preventive Care Services Individual Counseling","id":"2.16.840.1.113883.3.464.1003.101.12.1026","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"27","s":[{"value":["","valueset ","\"Preventive Care Services Individual Counseling\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1026'"]}]}}]},{"localId":"28","locator":"33:1-33:118","name":"Preventive Care Services, Initial Office Visit, 0 to 17","id":"2.16.840.1.113883.3.464.1003.101.12.1022","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"28","s":[{"value":["","valueset ","\"Preventive Care Services, Initial Office Visit, 0 to 17\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1022'"]}]}}]},{"localId":"29","locator":"34:1-34:113","name":"Preventive Care, Established Office Visit, 0 to 17","id":"2.16.840.1.113883.3.464.1003.101.12.1024","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"29","s":[{"value":["","valueset ","\"Preventive Care, Established Office Visit, 0 to 17\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1024'"]}]}}]},{"localId":"30","locator":"35:1-35:86","name":"Psych Visit Diagnostic Evaluation","id":"2.16.840.1.113883.3.526.3.1492","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"30","s":[{"value":["","valueset ","\"Psych Visit Diagnostic Evaluation\"",": ","'urn:oid:2.16.840.1.113883.3.526.3.1492'"]}]}}]},{"localId":"31","locator":"36:1-36:78","name":"Psych Visit Psychotherapy","id":"2.16.840.1.113883.3.526.3.1496","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"31","s":[{"value":["","valueset ","\"Psych Visit Psychotherapy\"",": ","'urn:oid:2.16.840.1.113883.3.526.3.1496'"]}]}}]},{"localId":"32","locator":"37:1-37:105","name":"Psychotherapy and Pharmacologic Management","id":"2.16.840.1.113883.3.464.1003.101.12.1055","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"32","s":[{"value":["","valueset ","\"Psychotherapy and Pharmacologic Management\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1055'"]}]}}]},{"localId":"33","locator":"38:1-38:53","name":"Race","id":"2.16.840.1.114222.4.11.836","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"33","s":[{"value":["","valueset ","\"Race\"",": ","'urn:oid:2.16.840.1.114222.4.11.836'"]}]}}]},{"localId":"34","locator":"39:1-39:79","name":"Telephone Visits","id":"2.16.840.1.113883.3.464.1003.101.12.1080","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"34","s":[{"value":["","valueset ","\"Telephone Visits\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1080'"]}]}}]}]},"codes":{"def":[{"localId":"36","locator":"41:1-41:134","name":"methamphetamine hydrochloride 5 MG Oral Tablet","id":"977860","display":"methamphetamine hydrochloride 5 MG Oral Tablet","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"36","s":[{"value":["","code ","\"methamphetamine hydrochloride 5 MG Oral Tablet\"",": ","'977860'"," from "]},{"r":"35","s":[{"value":["\"RXNORM\""]}]},{"value":[" display ","'methamphetamine hydrochloride 5 MG Oral Tablet'"]}]}}],"codeSystem":{"localId":"35","locator":"41:70-41:77","name":"RXNORM"}}]},"contexts":{"def":[{"locator":"45:1-45:15","name":"Patient"}]},"statements":{"def":[{"locator":"45:1-45:15","name":"Patient","context":"Patient","expression":{"type":"SingletonFrom","operand":{"locator":"45:1-45:15","dataType":"{urn:healthit-gov:qdm:v5_6}Patient","templateId":"Patient","type":"Retrieve"}}},{"localId":"75","locator":"116:1-117:78","name":"March 1 of Year Prior to Measurement Period","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"75","s":[{"value":["","define ","\"March 1 of Year Prior to Measurement Period\"",":\n  "]},{"r":"74","s":[{"value":["DateTime","("]},{"r":"66","s":[{"value":["("]},{"r":"66","s":[{"r":"64","s":[{"value":["year from "]},{"r":"63","s":[{"value":["start of "]},{"r":"62","s":[{"value":["\"Measurement Period\""]}]}]}]},{"r":"65","value":[" - ","1"]}]},{"value":[")"]}]},{"r":"67","value":[", ","3",", ","1",", ","0",", ","0",", ","0",", ","0",", ","0",")"]}]}]}}],"expression":{"localId":"74","locator":"117:3-117:78","type":"DateTime","year":{"localId":"66","locator":"117:12-117:56","type":"Subtract","operand":[{"localId":"64","locator":"117:13-117:51","precision":"Year","type":"DateTimeComponentFrom","operand":{"localId":"63","locator":"117:23-117:51","type":"Start","operand":{"localId":"62","locator":"117:32-117:51","name":"Measurement Period","type":"ParameterRef"}}},{"localId":"65","locator":"117:55","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"1","type":"Literal"}]},"month":{"localId":"67","locator":"117:59","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"3","type":"Literal"},"day":{"localId":"68","locator":"117:62","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"1","type":"Literal"},"hour":{"localId":"69","locator":"117:65","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"0","type":"Literal"},"minute":{"localId":"70","locator":"117:68","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"0","type":"Literal"},"second":{"localId":"71","locator":"117:71","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"0","type":"Literal"},"millisecond":{"localId":"72","locator":"117:74","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"0","type":"Literal"},"timezoneOffset":{"type":"ToDecimal","operand":{"localId":"73","locator":"117:77","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"0","type":"Literal"}}}},{"localId":"90","locator":"113:1-114:86","name":"Last Calendar Day of February of Measurement Period","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"90","s":[{"value":["","define ","\"Last Calendar Day of February of Measurement Period\"",":\n  "]},{"r":"89","s":[{"r":"87","s":[{"value":["( "]},{"r":"87","s":[{"value":["DateTime","("]},{"r":"79","s":[{"value":["year from "]},{"r":"78","s":[{"value":["start of "]},{"r":"77","s":[{"value":["\"Measurement Period\""]}]}]}]},{"r":"80","value":[", ","3",", ","1",", ","23",", ","59",", ","59",", ","0",", ","0",")"]}]},{"value":[")"]}]},{"value":[" - "]},{"r":"88","s":[{"value":["1 ","day"]}]}]}]}}],"expression":{"localId":"89","locator":"114:3-114:86","type":"Subtract","operand":[{"localId":"87","locator":"114:3-114:78","type":"DateTime","year":{"localId":"79","locator":"114:14-114:52","precision":"Year","type":"DateTimeComponentFrom","operand":{"localId":"78","locator":"114:24-114:52","type":"Start","operand":{"localId":"77","locator":"114:33-114:52","name":"Measurement Period","type":"ParameterRef"}}},"month":{"localId":"80","locator":"114:55","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"3","type":"Literal"},"day":{"localId":"81","locator":"114:58","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"1","type":"Literal"},"hour":{"localId":"82","locator":"114:61-114:62","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"23","type":"Literal"},"minute":{"localId":"83","locator":"114:65-114:66","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"59","type":"Literal"},"second":{"localId":"84","locator":"114:69-114:70","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"59","type":"Literal"},"millisecond":{"localId":"85","locator":"114:73","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"0","type":"Literal"},"timezoneOffset":{"type":"ToDecimal","operand":{"localId":"86","locator":"114:76","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"0","type":"Literal"}}},{"localId":"88","locator":"114:82-114:86","value":1,"unit":"day","type":"Quantity"}]}},{"localId":"93","locator":"110:1-111:112","name":"Intake Period","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"93","s":[{"value":["","define ","\"Intake Period\"",":\n  "]},{"r":"92","s":[{"value":["Interval["]},{"r":"76","s":[{"value":["\"March 1 of Year Prior to Measurement Period\""]}]},{"value":[", "]},{"r":"91","s":[{"value":["\"Last Calendar Day of February of Measurement Period\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"92","locator":"111:3-111:112","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"76","locator":"111:12-111:56","name":"March 1 of Year Prior to Measurement Period","type":"ExpressionRef"},"high":{"localId":"91","locator":"111:59-111:111","name":"Last Calendar Day of February of Measurement Period","type":"ExpressionRef"}}},{"localId":"151","locator":"182:1-201:59","name":"ADHD Medication Prescribed During Intake Period and Not Previously on ADHD Medication","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"151","s":[{"value":["/*Note relevantPeriod.low represents the interval's lower boundary and its usage is to ensure appropriate evaluation of the coalesce.*/","define ","\"ADHD Medication Prescribed During Intake Period and Not Previously on ADHD Medication\"",":\n  "]},{"r":"150","s":[{"s":[{"r":"97","s":[{"r":"96","s":[{"value":["( "]},{"r":"96","s":[{"s":[{"r":"55","s":[{"r":"54","s":[{"value":["( "]},{"r":"54","s":[{"r":"52","s":[{"r":"50","s":[{"r":"48","s":[{"r":"46","s":[{"r":"44","s":[{"r":"42","s":[{"r":"40","s":[{"value":["[","\"Medication, Order\"",": "]},{"s":[{"value":["\"Atomoxetine\""]}]},{"value":["]"]}]},{"value":["\n    union "]},{"r":"41","s":[{"value":["[","\"Medication, Order\"",": "]},{"s":[{"value":["\"Clonidine\""]}]},{"value":["]"]}]}]},{"value":["\n    union "]},{"r":"43","s":[{"value":["[","\"Medication, Order\"",": "]},{"s":[{"value":["\"Dexmethylphenidate\""]}]},{"value":["]"]}]}]},{"value":["\n    union "]},{"r":"45","s":[{"value":["[","\"Medication, Order\"",": "]},{"s":[{"value":["\"Dextroamphetamine\""]}]},{"value":["]"]}]}]},{"value":["\n    union "]},{"r":"47","s":[{"value":["[","\"Medication, Order\"",": "]},{"s":[{"value":["\"Lisdexamfetamine\""]}]},{"value":["]"]}]}]},{"value":["\n    union "]},{"r":"49","s":[{"value":["[","\"Medication, Order\"",": "]},{"s":[{"value":["\"methamphetamine hydrochloride 5 MG Oral Tablet\""]}]},{"value":["]"]}]}]},{"value":["\n    union "]},{"r":"51","s":[{"value":["[","\"Medication, Order\"",": "]},{"s":[{"value":["\"Methylphenidate\""]}]},{"value":["]"]}]}]},{"value":["\n    union "]},{"r":"53","s":[{"value":["[","\"Medication, Order\"",": "]},{"s":[{"value":["\"Guanfacine\""]}]},{"value":["]"]}]}]},{"value":[" )"]}]},{"value":[" ","ADHDMedications"]}]}]},{"value":["\n    "]},{"r":"95","s":[{"value":["where "]},{"r":"95","s":[{"r":"61","s":[{"value":["Coalesce","("]},{"r":"58","s":[{"r":"57","s":[{"r":"56","s":[{"value":["ADHDMedications"]}]},{"value":["."]},{"r":"57","s":[{"value":["relevantPeriod"]}]}]},{"value":["."]},{"r":"58","s":[{"value":["low"]}]}]},{"value":[", "]},{"r":"60","s":[{"r":"59","s":[{"value":["ADHDMedications"]}]},{"value":["."]},{"r":"60","s":[{"value":["authorDatetime"]}]}]},{"value":[")"]}]},{"r":"95","value":["during"," "]},{"r":"94","s":[{"value":["\"Intake Period\""]}]}]}]}]},{"value":[" )"]}]},{"value":[" ","ADHDMedicationOrder"]}]}]},{"value":["\n    "]},{"r":"140","s":[{"value":["without "]},{"r":"113","s":[{"r":"112","s":[{"value":["( "]},{"r":"112","s":[{"r":"110","s":[{"r":"108","s":[{"r":"106","s":[{"r":"104","s":[{"r":"102","s":[{"r":"100","s":[{"r":"98","s":[{"value":["[","\"Medication, Active\"",": "]},{"s":[{"value":["\"Atomoxetine\""]}]},{"value":["]"]}]},{"value":["\n      union "]},{"r":"99","s":[{"value":["[","\"Medication, Active\"",": "]},{"s":[{"value":["\"Clonidine\""]}]},{"value":["]"]}]}]},{"value":["\n      union "]},{"r":"101","s":[{"value":["[","\"Medication, Active\"",": "]},{"s":[{"value":["\"Dexmethylphenidate\""]}]},{"value":["]"]}]}]},{"value":["\n      union "]},{"r":"103","s":[{"value":["[","\"Medication, Active\"",": "]},{"s":[{"value":["\"Dextroamphetamine\""]}]},{"value":["]"]}]}]},{"value":["\n      union "]},{"r":"105","s":[{"value":["[","\"Medication, Active\"",": "]},{"s":[{"value":["\"Lisdexamfetamine\""]}]},{"value":["]"]}]}]},{"value":["\n      union "]},{"r":"107","s":[{"value":["[","\"Medication, Active\"",": "]},{"s":[{"value":["\"methamphetamine hydrochloride 5 MG Oral Tablet\""]}]},{"value":["]"]}]}]},{"value":["\n      union "]},{"r":"109","s":[{"value":["[","\"Medication, Active\"",": "]},{"s":[{"value":["\"Methylphenidate\""]}]},{"value":["]"]}]}]},{"value":["\n      union "]},{"r":"111","s":[{"value":["[","\"Medication, Active\"",": "]},{"s":[{"value":["\"Guanfacine\""]}]},{"value":["]"]}]}]},{"value":[" )"]}]},{"value":[" ","ActiveADHDMedication"]}]},{"value":["\n      such that "]},{"r":"139","s":[{"r":"121","s":[{"r":"114","s":[{"value":["Global"]}]},{"value":["."]},{"r":"121","s":[{"value":["\"ToDateInterval\""," ( "]},{"r":"120","s":[{"r":"115","s":[{"value":["Global"]}]},{"value":["."]},{"r":"120","s":[{"value":["\"NormalizeInterval\""," ( "]},{"r":"117","s":[{"r":"116","s":[{"value":["ActiveADHDMedication"]}]},{"value":["."]},{"r":"117","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"119","s":[{"r":"118","s":[{"value":["ActiveADHDMedication"]}]},{"value":["."]},{"r":"119","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]},{"value":[" )"]}]}]},{"r":"139","value":[" ","overlaps"," "]},{"r":"138","s":[{"value":["Interval["]},{"r":"130","s":[{"r":"128","s":[{"value":["date from "]},{"r":"127","s":[{"value":["Coalesce","("]},{"r":"124","s":[{"r":"123","s":[{"r":"122","s":[{"value":["ADHDMedicationOrder"]}]},{"value":["."]},{"r":"123","s":[{"value":["relevantPeriod"]}]}]},{"value":["."]},{"r":"124","s":[{"value":["low"]}]}]},{"value":[", "]},{"r":"126","s":[{"r":"125","s":[{"value":["ADHDMedicationOrder"]}]},{"value":["."]},{"r":"126","s":[{"value":["authorDatetime"]}]}]},{"value":[")"]}]}]},{"value":["- "]},{"r":"129","s":[{"value":["120 ","days"]}]}]},{"value":[", "]},{"r":"137","s":[{"value":["date from "]},{"r":"136","s":[{"value":["Coalesce","("]},{"r":"133","s":[{"r":"132","s":[{"r":"131","s":[{"value":["ADHDMedicationOrder"]}]},{"value":["."]},{"r":"132","s":[{"value":["relevantPeriod"]}]}]},{"value":["."]},{"r":"133","s":[{"value":["low"]}]}]},{"value":[", "]},{"r":"135","s":[{"r":"134","s":[{"value":["ADHDMedicationOrder"]}]},{"value":["."]},{"r":"135","s":[{"value":["authorDatetime"]}]}]},{"value":[")"]}]}]},{"value":[")"]}]}]}]},{"value":["\n    "]},{"r":"149","s":[{"value":["sort by "]},{"r":"148","s":[{"r":"147","s":[{"value":["Coalesce","("]},{"r":"145","s":[{"r":"144","s":[{"value":["relevantPeriod"]}]},{"value":["."]},{"r":"145","s":[{"value":["low"]}]}]},{"value":[", "]},{"r":"146","s":[{"value":["authorDatetime"]}]},{"value":[")"]}]},{"value":["asc"]}]}]}]}]}}],"expression":{"localId":"150","locator":"183:3-201:59","type":"Query","source":[{"localId":"97","locator":"183:3-191:130","alias":"ADHDMedicationOrder","expression":{"localId":"96","locator":"183:3-191:110","type":"Query","source":[{"localId":"55","locator":"183:5-190:63","alias":"ADHDMedications","expression":{"localId":"54","locator":"183:5-190:47","type":"Union","operand":[{"localId":"50","locator":"183:7-188:81","type":"Union","operand":[{"localId":"46","locator":"183:7-186:52","type":"Union","operand":[{"localId":"42","locator":"183:7-184:44","type":"Union","operand":[{"localId":"40","locator":"183:7-183:42","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationOrder","templateId":"PositiveMedicationOrder","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"183:29-183:41","name":"Atomoxetine","type":"ValueSetRef"}},{"localId":"41","locator":"184:11-184:44","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationOrder","templateId":"PositiveMedicationOrder","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"184:33-184:43","name":"Clonidine","type":"ValueSetRef"}}]},{"type":"Union","operand":[{"localId":"43","locator":"185:11-185:53","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationOrder","templateId":"PositiveMedicationOrder","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"185:33-185:52","name":"Dexmethylphenidate","type":"ValueSetRef"}},{"localId":"45","locator":"186:11-186:52","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationOrder","templateId":"PositiveMedicationOrder","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"186:33-186:51","name":"Dextroamphetamine","type":"ValueSetRef"}}]}]},{"type":"Union","operand":[{"localId":"47","locator":"187:11-187:51","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationOrder","templateId":"PositiveMedicationOrder","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"187:33-187:50","name":"Lisdexamfetamine","type":"ValueSetRef"}},{"localId":"49","locator":"188:11-188:81","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationOrder","templateId":"PositiveMedicationOrder","codeProperty":"code","codeComparator":"~","type":"Retrieve","codes":{"type":"ToList","operand":{"locator":"188:33-188:80","name":"methamphetamine hydrochloride 5 MG Oral Tablet","type":"CodeRef"}}}]}]},{"type":"Union","operand":[{"localId":"51","locator":"189:11-189:50","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationOrder","templateId":"PositiveMedicationOrder","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"189:33-189:49","name":"Methylphenidate","type":"ValueSetRef"}},{"localId":"53","locator":"190:11-190:45","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationOrder","templateId":"PositiveMedicationOrder","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"190:33-190:44","name":"Guanfacine","type":"ValueSetRef"}}]}]}}],"relationship":[],"where":{"localId":"95","locator":"191:5-191:108","type":"In","operand":[{"localId":"61","locator":"191:11-191:86","type":"Coalesce","operand":[{"localId":"58","locator":"191:20-191:53","path":"low","type":"Property","source":{"localId":"57","locator":"191:20-191:49","path":"relevantPeriod","scope":"ADHDMedications","type":"Property"}},{"localId":"60","locator":"191:56-191:85","path":"authorDatetime","scope":"ADHDMedications","type":"Property"}]},{"localId":"94","locator":"191:94-191:108","name":"Intake Period","type":"ExpressionRef"}]}}}],"relationship":[{"localId":"140","locator":"192:5-200:369","alias":"ActiveADHDMedication","type":"Without","expression":{"localId":"112","locator":"192:13-199:50","type":"Union","operand":[{"localId":"108","locator":"192:15-197:84","type":"Union","operand":[{"localId":"104","locator":"192:15-195:55","type":"Union","operand":[{"localId":"100","locator":"192:15-193:47","type":"Union","operand":[{"localId":"98","locator":"192:15-192:51","dataType":"{urn:healthit-gov:qdm:v5_6}MedicationActive","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"192:38-192:50","name":"Atomoxetine","type":"ValueSetRef"}},{"localId":"99","locator":"193:13-193:47","dataType":"{urn:healthit-gov:qdm:v5_6}MedicationActive","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"193:36-193:46","name":"Clonidine","type":"ValueSetRef"}}]},{"type":"Union","operand":[{"localId":"101","locator":"194:13-194:56","dataType":"{urn:healthit-gov:qdm:v5_6}MedicationActive","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"194:36-194:55","name":"Dexmethylphenidate","type":"ValueSetRef"}},{"localId":"103","locator":"195:13-195:55","dataType":"{urn:healthit-gov:qdm:v5_6}MedicationActive","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"195:36-195:54","name":"Dextroamphetamine","type":"ValueSetRef"}}]}]},{"type":"Union","operand":[{"localId":"105","locator":"196:13-196:54","dataType":"{urn:healthit-gov:qdm:v5_6}MedicationActive","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"196:36-196:53","name":"Lisdexamfetamine","type":"ValueSetRef"}},{"localId":"107","locator":"197:13-197:84","dataType":"{urn:healthit-gov:qdm:v5_6}MedicationActive","codeProperty":"code","codeComparator":"~","type":"Retrieve","codes":{"type":"ToList","operand":{"locator":"197:36-197:83","name":"methamphetamine hydrochloride 5 MG Oral Tablet","type":"CodeRef"}}}]}]},{"type":"Union","operand":[{"localId":"109","locator":"198:13-198:53","dataType":"{urn:healthit-gov:qdm:v5_6}MedicationActive","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"198:36-198:52","name":"Methylphenidate","type":"ValueSetRef"}},{"localId":"111","locator":"199:13-199:48","dataType":"{urn:healthit-gov:qdm:v5_6}MedicationActive","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"199:36-199:47","name":"Guanfacine","type":"ValueSetRef"}}]}]},"suchThat":{"localId":"139","locator":"200:17-200:369","type":"Overlaps","operand":[{"localId":"121","locator":"200:17-200:149","name":"ToDateInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"120","locator":"200:43-200:147","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"117","locator":"200:72-200:108","path":"relevantDatetime","scope":"ActiveADHDMedication","type":"Property"},{"localId":"119","locator":"200:111-200:145","path":"relevantPeriod","scope":"ActiveADHDMedication","type":"Property"}]}]},{"localId":"138","locator":"200:160-200:369","lowClosed":true,"highClosed":false,"type":"Interval","low":{"localId":"130","locator":"200:169-200:272","type":"Subtract","operand":[{"localId":"128","locator":"200:169-200:262","type":"DateFrom","operand":{"localId":"127","locator":"200:179-200:262","type":"Coalesce","operand":[{"localId":"124","locator":"200:188-200:225","path":"low","type":"Property","source":{"localId":"123","locator":"200:188-200:221","path":"relevantPeriod","scope":"ADHDMedicationOrder","type":"Property"}},{"localId":"126","locator":"200:228-200:261","path":"authorDatetime","scope":"ADHDMedicationOrder","type":"Property"}]}},{"localId":"129","locator":"200:265-200:272","value":120,"unit":"days","type":"Quantity"}]},"high":{"localId":"137","locator":"200:275-200:368","type":"DateFrom","operand":{"localId":"136","locator":"200:285-200:368","type":"Coalesce","operand":[{"localId":"133","locator":"200:294-200:331","path":"low","type":"Property","source":{"localId":"132","locator":"200:294-200:327","path":"relevantPeriod","scope":"ADHDMedicationOrder","type":"Property"}},{"localId":"135","locator":"200:334-200:367","path":"authorDatetime","scope":"ADHDMedicationOrder","type":"Property"}]}}}]}}],"sort":{"localId":"149","locator":"201:5-201:59","by":[{"localId":"148","locator":"201:13-201:59","direction":"asc","type":"ByExpression","expression":{"localId":"147","locator":"201:13-201:56","type":"Coalesce","operand":[{"localId":"145","locator":"201:22-201:39","path":"low","type":"Property","source":{"localId":"144","locator":"201:22-201:35","name":"relevantPeriod","type":"IdentifierRef"}},{"localId":"146","locator":"201:42-201:55","name":"authorDatetime","type":"IdentifierRef"}]}}]}}},{"localId":"154","locator":"65:1-66:96","name":"First ADHD Medication Prescribed During Intake Period","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"154","s":[{"value":["","define ","\"First ADHD Medication Prescribed During Intake Period\"",":\n  "]},{"r":"153","s":[{"value":["First","("]},{"r":"152","s":[{"value":["\"ADHD Medication Prescribed During Intake Period and Not Previously on ADHD Medication\""]}]},{"value":[")"]}]}]}}],"expression":{"localId":"153","locator":"66:3-66:96","type":"First","source":{"localId":"152","locator":"66:9-66:95","name":"ADHD Medication Prescribed During Intake Period and Not Previously on ADHD Medication","type":"ExpressionRef"}}},{"localId":"162","locator":"48:1-49:168","name":"IPSD","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"162","s":[{"value":["/*Index Prescription Start Date (IPSD)*/","define ","\"IPSD\"",":\n  "]},{"r":"161","s":[{"value":["date from "]},{"r":"160","s":[{"value":["Coalesce","("]},{"r":"157","s":[{"r":"156","s":[{"r":"155","s":[{"value":["\"First ADHD Medication Prescribed During Intake Period\""]}]},{"value":["."]},{"r":"156","s":[{"value":["relevantPeriod"]}]}]},{"value":["."]},{"r":"157","s":[{"value":["low"]}]}]},{"value":[", "]},{"r":"159","s":[{"r":"158","s":[{"value":["\"First ADHD Medication Prescribed During Intake Period\""]}]},{"value":["."]},{"r":"159","s":[{"value":["authorDatetime"]}]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"161","locator":"49:3-49:168","type":"DateFrom","operand":{"localId":"160","locator":"49:13-49:168","type":"Coalesce","operand":[{"localId":"157","locator":"49:22-49:95","path":"low","type":"Property","source":{"localId":"156","locator":"49:22-49:91","path":"relevantPeriod","type":"Property","source":{"localId":"155","locator":"49:22-49:76","name":"First ADHD Medication Prescribed During Intake Period","type":"ExpressionRef"}}},{"localId":"159","locator":"49:98-49:167","path":"authorDatetime","type":"Property","source":{"localId":"158","locator":"49:98-49:152","name":"First ADHD Medication Prescribed During Intake Period","type":"ExpressionRef"}}]}}},{"localId":"195","locator":"139:1-144:118","name":"Qualifying Encounter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"195","s":[{"value":["","define ","\"Qualifying Encounter\"",":\n  "]},{"r":"194","s":[{"s":[{"r":"183","s":[{"r":"182","s":[{"value":["( "]},{"r":"182","s":[{"r":"180","s":[{"r":"178","s":[{"r":"176","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Office Visit\""]}]},{"value":["]"]}]},{"value":["\n    union "]},{"r":"177","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Home Healthcare Services\""]}]},{"value":["]"]}]}]},{"value":["\n    union "]},{"r":"179","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Preventive Care, Established Office Visit, 0 to 17\""]}]},{"value":["]"]}]}]},{"value":["\n    union "]},{"r":"181","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Preventive Care Services, Initial Office Visit, 0 to 17\""]}]},{"value":["]"]}]}]},{"value":[" )"]}]},{"value":[" ","ValidEncounters"]}]}]},{"value":["\n    "]},{"r":"193","s":[{"value":["where "]},{"r":"193","s":[{"r":"187","s":[{"r":"184","s":[{"value":["Global"]}]},{"value":["."]},{"r":"187","s":[{"value":["\"ToDateInterval\""," ( "]},{"r":"186","s":[{"r":"185","s":[{"value":["ValidEncounters"]}]},{"value":["."]},{"r":"186","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]},{"r":"193","value":[" ","during day of"," "]},{"r":"192","s":[{"value":["Interval["]},{"r":"190","s":[{"r":"188","s":[{"value":["\"IPSD\""]}]},{"value":[" - "]},{"r":"189","s":[{"value":["6 ","months"]}]}]},{"value":[", "]},{"r":"191","s":[{"value":["\"IPSD\""]}]},{"value":["]"]}]}]}]}]}]}}],"expression":{"localId":"194","locator":"140:3-144:118","type":"Query","source":[{"localId":"183","locator":"140:3-143:111","alias":"ValidEncounters","expression":{"localId":"182","locator":"140:3-143:95","type":"Union","operand":[{"localId":"178","locator":"140:5-141:62","type":"Union","operand":[{"localId":"176","locator":"140:5-140:44","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"140:30-140:43","name":"Office Visit","type":"ValueSetRef"}},{"localId":"177","locator":"141:11-141:62","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"141:36-141:61","name":"Home Healthcare Services","type":"ValueSetRef"}}]},{"type":"Union","operand":[{"localId":"179","locator":"142:11-142:88","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"142:36-142:87","name":"Preventive Care, Established Office Visit, 0 to 17","type":"ValueSetRef"}},{"localId":"181","locator":"143:11-143:93","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"143:36-143:92","name":"Preventive Care Services, Initial Office Visit, 0 to 17","type":"ValueSetRef"}}]}]}}],"relationship":[],"where":{"localId":"193","locator":"144:5-144:118","precision":"Day","type":"IncludedIn","operand":[{"localId":"187","locator":"144:11-144:68","name":"ToDateInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"186","locator":"144:37-144:66","path":"relevantPeriod","scope":"ValidEncounters","type":"Property"}]},{"localId":"192","locator":"144:84-144:118","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"190","locator":"144:93-144:109","type":"Subtract","operand":[{"localId":"188","locator":"144:93-144:98","name":"IPSD","type":"ExpressionRef"},{"localId":"189","locator":"144:102-144:109","value":6,"unit":"months","type":"Quantity"}]},"high":{"localId":"191","locator":"144:112-144:117","name":"IPSD","type":"ExpressionRef"}}]}}},{"localId":"218","locator":"93:1-100:3","name":"Inpatient Stay with Qualifying Diagnosis","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"218","s":[{"value":["","define ","\"Inpatient Stay with Qualifying Diagnosis\"",":\n  "]},{"r":"217","s":[{"value":["( "]},{"r":"217","s":[{"s":[{"r":"203","s":[{"r":"202","s":[{"r":"202","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Encounter Inpatient\""]}]},{"value":["]"]}]}]},{"value":[" ","InpatientStay"]}]}]},{"value":["\n      "]},{"r":"216","s":[{"value":["where "]},{"r":"216","s":[{"value":["exists "]},{"r":"215","s":[{"value":["( "]},{"r":"215","s":[{"s":[{"r":"205","s":[{"r":"204","s":[{"s":[{"value":["InpatientStay",".","diagnoses"]}]}]},{"value":[" ","EncounterDiagnoses"]}]}]},{"value":["\n          "]},{"r":"214","s":[{"value":["where "]},{"r":"214","s":[{"value":["( "]},{"r":"214","s":[{"r":"209","s":[{"r":"207","s":[{"r":"206","s":[{"value":["EncounterDiagnoses"]}]},{"value":["."]},{"r":"207","s":[{"value":["rank"]}]}]},{"r":"208","value":[" ","="," ","1"]}]},{"value":["\n              and "]},{"r":"213","s":[{"r":"211","s":[{"r":"210","s":[{"value":["EncounterDiagnoses"]}]},{"value":["."]},{"r":"211","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"212","s":[{"value":["\"Mental Behavioral and Neurodevelopmental Disorders\""]}]}]}]},{"value":["\n          )"]}]}]}]},{"value":["\n      )"]}]}]}]}]},{"value":["\n  )"]}]}]}}],"expression":{"localId":"217","locator":"94:3-100:3","type":"Query","source":[{"localId":"203","locator":"94:5-94:65","alias":"InpatientStay","expression":{"localId":"202","locator":"94:5-94:51","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"94:30-94:50","name":"Encounter Inpatient","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"216","locator":"95:7-99:7","type":"Exists","operand":{"localId":"215","locator":"95:20-99:7","type":"Query","source":[{"localId":"205","locator":"95:22-95:63","alias":"EncounterDiagnoses","expression":{"localId":"204","locator":"95:22-95:44","path":"diagnoses","scope":"InpatientStay","type":"Property"}}],"relationship":[],"where":{"localId":"214","locator":"96:11-98:11","type":"And","operand":[{"localId":"209","locator":"96:19-96:45","type":"Equal","operand":[{"localId":"207","locator":"96:19-96:41","path":"rank","scope":"EncounterDiagnoses","type":"Property"},{"localId":"208","locator":"96:45","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"1","type":"Literal"}]},{"localId":"213","locator":"97:19-97:97","type":"InValueSet","code":{"localId":"211","locator":"97:19-97:41","path":"code","scope":"EncounterDiagnoses","type":"Property"},"valueset":{"localId":"212","locator":"97:46-97:97","name":"Mental Behavioral and Neurodevelopmental Disorders","type":"ValueSetRef"}}]}}}}},{"localId":"229","locator":"106:1-108:109","name":"Inpatient Stay with Qualifying Diagnosis During Initiation Phase","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"229","s":[{"value":["","define ","\"Inpatient Stay with Qualifying Diagnosis During Initiation Phase\"",":\n  "]},{"r":"228","s":[{"s":[{"r":"220","s":[{"r":"219","s":[{"s":[{"value":["\"Inpatient Stay with Qualifying Diagnosis\""]}]}]},{"value":[" ","InpatientStay"]}]}]},{"value":["\n    "]},{"r":"227","s":[{"value":["where "]},{"r":"227","s":[{"r":"224","s":[{"r":"221","s":[{"value":["Global"]}]},{"value":["."]},{"r":"224","s":[{"value":["\"ToDateInterval\""," ( "]},{"r":"223","s":[{"r":"222","s":[{"value":["InpatientStay"]}]},{"value":["."]},{"r":"223","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]},{"value":[" "]},{"r":"227","s":[{"value":["starts "]},{"r":"226","s":[{"value":["30 ","days"]}]},{"value":[" or less after day of"]}]},{"value":[" "]},{"r":"225","s":[{"value":["\"IPSD\""]}]}]}]}]}]}}],"expression":{"localId":"228","locator":"107:3-108:109","type":"Query","source":[{"localId":"220","locator":"107:3-107:58","alias":"InpatientStay","expression":{"localId":"219","locator":"107:3-107:44","name":"Inpatient Stay with Qualifying Diagnosis","type":"ExpressionRef"}}],"relationship":[],"where":{"localId":"227","locator":"108:5-108:109","type":"And","operand":[{"locator":"108:75-108:89","precision":"Day","type":"In","operand":[{"locator":"108:68-108:73","type":"Start","operand":{"localId":"224","locator":"108:11-108:66","name":"ToDateInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"223","locator":"108:37-108:64","path":"relevantPeriod","scope":"InpatientStay","type":"Property"}]}},{"locator":"108:75-108:89","lowClosed":false,"highClosed":true,"type":"Interval","low":{"localId":"225","locator":"108:104-108:109","name":"IPSD","type":"ExpressionRef"},"high":{"locator":"108:104-108:109","type":"Add","operand":[{"localId":"225","locator":"108:104-108:109","name":"IPSD","type":"ExpressionRef"},{"localId":"226","locator":"108:75-108:81","value":30,"unit":"days","type":"Quantity"}]}}]},{"locator":"108:75-108:89","type":"Not","operand":{"locator":"108:75-108:89","type":"IsNull","operand":{"localId":"225","locator":"108:104-108:109","name":"IPSD","type":"ExpressionRef"}}}]}}},{"localId":"234","locator":"74:1-81:85","name":"Initial Population 1","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"234","s":[{"value":["","define ","\"Initial Population 1\"",":\n  "]},{"r":"233","s":[{"r":"201","s":[{"r":"198","s":[{"r":"175","s":[{"r":"168","s":[{"r":"166","s":[{"value":["AgeInYearsAt","("]},{"r":"165","s":[{"value":["date from "]},{"r":"164","s":[{"value":["start of "]},{"r":"163","s":[{"value":["\"Intake Period\""]}]}]}]},{"value":[")"]}]},{"r":"167","value":["\u003e="," ","6"]}]},{"value":["\n    and "]},{"r":"174","s":[{"r":"172","s":[{"value":["AgeInYearsAt","("]},{"r":"171","s":[{"value":["date from \n      "]},{"r":"170","s":[{"value":["end of "]},{"r":"169","s":[{"value":["\"Intake Period\""]}]}]}]},{"value":["\n    )"]}]},{"r":"173","value":["\u003c="," ","12"]}]}]},{"value":["\n    and "]},{"r":"197","s":[{"value":["exists "]},{"r":"196","s":[{"value":["\"Qualifying Encounter\""]}]}]}]},{"value":["\n    and "]},{"r":"200","s":[{"r":"199","s":[{"value":["\"First ADHD Medication Prescribed During Intake Period\""]}]},{"value":[" is not null"]}]}]},{"value":["\n    and "]},{"r":"232","s":[{"value":["not "]},{"r":"231","s":[{"value":["exists "]},{"r":"230","s":[{"value":["\"Inpatient Stay with Qualifying Diagnosis During Initiation Phase\""]}]}]}]}]}]}}],"expression":{"localId":"233","locator":"75:3-81:85","type":"And","operand":[{"localId":"201","locator":"75:3-80:75","type":"And","operand":[{"localId":"198","locator":"75:3-79:37","type":"And","operand":[{"localId":"175","locator":"75:3-78:10","type":"And","operand":[{"localId":"168","locator":"75:3-75:54","type":"GreaterOrEqual","operand":[{"localId":"166","locator":"75:3-75:50","precision":"Year","type":"CalculateAgeAt","operand":[{"type":"ToDate","operand":{"path":"birthDatetime","type":"Property","source":{"name":"Patient","type":"ExpressionRef"}}},{"localId":"165","locator":"75:16-75:49","type":"DateFrom","operand":{"localId":"164","locator":"75:26-75:49","type":"Start","operand":{"localId":"163","locator":"75:35-75:49","name":"Intake Period","type":"ExpressionRef"}}}]},{"localId":"167","locator":"75:54","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"6","type":"Literal"}]},{"localId":"174","locator":"76:9-78:10","type":"LessOrEqual","operand":[{"localId":"172","locator":"76:9-78:5","precision":"Year","type":"CalculateAgeAt","operand":[{"type":"ToDate","operand":{"path":"birthDatetime","type":"Property","source":{"name":"Patient","type":"ExpressionRef"}}},{"localId":"171","locator":"76:22-77:28","type":"DateFrom","operand":{"localId":"170","locator":"77:7-77:28","type":"End","operand":{"localId":"169","locator":"77:14-77:28","name":"Intake Period","type":"ExpressionRef"}}}]},{"localId":"173","locator":"78:9-78:10","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"12","type":"Literal"}]}]},{"localId":"197","locator":"79:9-79:37","type":"Exists","operand":{"localId":"196","locator":"79:16-79:37","name":"Qualifying Encounter","type":"ExpressionRef"}}]},{"localId":"200","locator":"80:9-80:75","type":"Not","operand":{"locator":"80:9-80:75","type":"IsNull","operand":{"localId":"199","locator":"80:9-80:63","name":"First ADHD Medication Prescribed During Intake Period","type":"ExpressionRef"}}}]},{"localId":"232","locator":"81:9-81:85","type":"Not","operand":{"localId":"231","locator":"81:13-81:85","type":"Exists","operand":{"localId":"230","locator":"81:20-81:85","name":"Inpatient Stay with Qualifying Diagnosis During Initiation Phase","type":"ExpressionRef"}}}]}},{"localId":"236","locator":"51:1-52:24","name":"Denominator 1","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"236","s":[{"value":["","define ","\"Denominator 1\"",":\n  "]},{"r":"235","s":[{"value":["\"Initial Population 1\""]}]}]}}],"expression":{"localId":"235","locator":"52:3-52:24","name":"Initial Population 1","type":"ExpressionRef"}},{"localId":"420","locator":"213:1-280:51","name":"ADHD Medications Taken on IPSD or During Continuation and Maintenance Phase","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"420","s":[{"value":["","define ","\"ADHD Medications Taken on IPSD or During Continuation and Maintenance Phase\"",":\n  "]},{"r":"419","s":[{"s":[{"r":"408","s":[{"r":"407","s":[{"value":["( "]},{"r":"407","s":[{"r":"388","s":[{"r":"369","s":[{"r":"350","s":[{"r":"331","s":[{"r":"312","s":[{"r":"293","s":[{"r":"274","s":[{"value":["( "]},{"r":"274","s":[{"r":"257","s":[{"value":["CMD"]}]},{"value":["."]},{"r":"274","s":[{"value":["\"RolloutIntervals\""," ( "]},{"r":"273","s":[{"r":"272","s":[{"value":["( "]},{"r":"272","s":[{"s":[{"r":"259","s":[{"r":"258","s":[{"r":"258","s":[{"value":["[","\"Medication, Order\"",": "]},{"s":[{"value":["\"Atomoxetine\""]}]},{"value":["]"]}]}]},{"value":[" ","AtomoxetineMed"]}]}]},{"value":["\n        "]},{"r":"268","s":[{"value":["return all "]},{"r":"267","s":[{"value":["{\n          "]},{"s":[{"value":["period",": "]},{"r":"262","s":[{"r":"260","s":[{"value":["CMD"]}]},{"value":["."]},{"r":"262","s":[{"value":["\"MedicationOrderPeriod\""," ( "]},{"r":"261","s":[{"value":["AtomoxetineMed"]}]},{"value":[" )"]}]}]}]},{"value":[",\n          "]},{"s":[{"value":["periodStart",": "]},{"r":"266","s":[{"value":["start of "]},{"r":"265","s":[{"r":"263","s":[{"value":["CMD"]}]},{"value":["."]},{"r":"265","s":[{"value":["\"MedicationOrderPeriod\""," ( "]},{"r":"264","s":[{"value":["AtomoxetineMed"]}]},{"value":[" )"]}]}]}]}]},{"value":["\n        }"]}]}]},{"value":["\n        "]},{"r":"271","s":[{"value":["sort by "]},{"r":"270","s":[{"r":"269","s":[{"value":["periodStart"]}]}]}]}]},{"value":["\n    )"]}]},{"value":["."]},{"r":"273","s":[{"value":["period"]}]}]},{"value":[" )"]}]}]},{"value":["\n  )"]}]},{"value":["\n    union "]},{"r":"292","s":[{"value":["( "]},{"r":"292","s":[{"r":"275","s":[{"value":["CMD"]}]},{"value":["."]},{"r":"292","s":[{"value":["\"RolloutIntervals\""," ( "]},{"r":"291","s":[{"r":"290","s":[{"value":["( "]},{"r":"290","s":[{"s":[{"r":"277","s":[{"r":"276","s":[{"r":"276","s":[{"value":["[","\"Medication, Order\"",": "]},{"s":[{"value":["\"Clonidine\""]}]},{"value":["]"]}]}]},{"value":[" ","ClonidineMed"]}]}]},{"value":["\n          "]},{"r":"286","s":[{"value":["return all "]},{"r":"285","s":[{"value":["{\n            "]},{"s":[{"value":["period",": "]},{"r":"280","s":[{"r":"278","s":[{"value":["CMD"]}]},{"value":["."]},{"r":"280","s":[{"value":["\"MedicationOrderPeriod\""," ( "]},{"r":"279","s":[{"value":["ClonidineMed"]}]},{"value":[" )"]}]}]}]},{"value":[",\n            "]},{"s":[{"value":["periodStart",": "]},{"r":"284","s":[{"value":["start of "]},{"r":"283","s":[{"r":"281","s":[{"value":["CMD"]}]},{"value":["."]},{"r":"283","s":[{"value":["\"MedicationOrderPeriod\""," ( "]},{"r":"282","s":[{"value":["ClonidineMed"]}]},{"value":[" )"]}]}]}]}]},{"value":["\n          }"]}]}]},{"value":["\n          "]},{"r":"289","s":[{"value":["sort by "]},{"r":"288","s":[{"r":"287","s":[{"value":["periodStart"]}]}]}]}]},{"value":["\n      )"]}]},{"value":["."]},{"r":"291","s":[{"value":["period"]}]}]},{"value":[" )"]}]}]},{"value":["\n    )"]}]}]},{"value":["\n    union "]},{"r":"311","s":[{"value":["( "]},{"r":"311","s":[{"r":"294","s":[{"value":["CMD"]}]},{"value":["."]},{"r":"311","s":[{"value":["\"RolloutIntervals\""," ( "]},{"r":"310","s":[{"r":"309","s":[{"value":["( "]},{"r":"309","s":[{"s":[{"r":"296","s":[{"r":"295","s":[{"r":"295","s":[{"value":["[","\"Medication, Order\"",": "]},{"s":[{"value":["\"Dexmethylphenidate\""]}]},{"value":["]"]}]}]},{"value":[" ","DexmethylphenidateMed"]}]}]},{"value":["\n          "]},{"r":"305","s":[{"value":["return all "]},{"r":"304","s":[{"value":["{\n            "]},{"s":[{"value":["period",": "]},{"r":"299","s":[{"r":"297","s":[{"value":["CMD"]}]},{"value":["."]},{"r":"299","s":[{"value":["\"MedicationOrderPeriod\""," ( "]},{"r":"298","s":[{"value":["DexmethylphenidateMed"]}]},{"value":[" )"]}]}]}]},{"value":[",\n            "]},{"s":[{"value":["periodStart",": "]},{"r":"303","s":[{"value":["start of "]},{"r":"302","s":[{"r":"300","s":[{"value":["CMD"]}]},{"value":["."]},{"r":"302","s":[{"value":["\"MedicationOrderPeriod\""," ( "]},{"r":"301","s":[{"value":["DexmethylphenidateMed"]}]},{"value":[" )"]}]}]}]}]},{"value":["\n          }"]}]}]},{"value":["\n          "]},{"r":"308","s":[{"value":["sort by "]},{"r":"307","s":[{"r":"306","s":[{"value":["periodStart"]}]}]}]}]},{"value":["\n      )"]}]},{"value":["."]},{"r":"310","s":[{"value":["period"]}]}]},{"value":[" )"]}]}]},{"value":["\n    )"]}]}]},{"value":["\n    union "]},{"r":"330","s":[{"value":["( "]},{"r":"330","s":[{"r":"313","s":[{"value":["CMD"]}]},{"value":["."]},{"r":"330","s":[{"value":["\"RolloutIntervals\""," ( "]},{"r":"329","s":[{"r":"328","s":[{"value":["( "]},{"r":"328","s":[{"s":[{"r":"315","s":[{"r":"314","s":[{"r":"314","s":[{"value":["[","\"Medication, Order\"",": "]},{"s":[{"value":["\"Dextroamphetamine\""]}]},{"value":["]"]}]}]},{"value":[" ","DextroamphetamineMed"]}]}]},{"value":["\n          "]},{"r":"324","s":[{"value":["return all "]},{"r":"323","s":[{"value":["{\n            "]},{"s":[{"value":["period",": "]},{"r":"318","s":[{"r":"316","s":[{"value":["CMD"]}]},{"value":["."]},{"r":"318","s":[{"value":["\"MedicationOrderPeriod\""," ( "]},{"r":"317","s":[{"value":["DextroamphetamineMed"]}]},{"value":[" )"]}]}]}]},{"value":[",\n            "]},{"s":[{"value":["periodStart",": "]},{"r":"322","s":[{"value":["start of "]},{"r":"321","s":[{"r":"319","s":[{"value":["CMD"]}]},{"value":["."]},{"r":"321","s":[{"value":["\"MedicationOrderPeriod\""," ( "]},{"r":"320","s":[{"value":["DextroamphetamineMed"]}]},{"value":[" )"]}]}]}]}]},{"value":["\n          }"]}]}]},{"value":["\n          "]},{"r":"327","s":[{"value":["sort by "]},{"r":"326","s":[{"r":"325","s":[{"value":["periodStart"]}]}]}]}]},{"value":["\n      )"]}]},{"value":["."]},{"r":"329","s":[{"value":["period"]}]}]},{"value":[" )"]}]}]},{"value":["\n    )"]}]}]},{"value":["\n    union "]},{"r":"349","s":[{"value":["( "]},{"r":"349","s":[{"r":"332","s":[{"value":["CMD"]}]},{"value":["."]},{"r":"349","s":[{"value":["\"RolloutIntervals\""," ( "]},{"r":"348","s":[{"r":"347","s":[{"value":["( "]},{"r":"347","s":[{"s":[{"r":"334","s":[{"r":"333","s":[{"r":"333","s":[{"value":["[","\"Medication, Order\"",": "]},{"s":[{"value":["\"Lisdexamfetamine\""]}]},{"value":["]"]}]}]},{"value":[" ","LisdexamfetamineMed"]}]}]},{"value":["\n          "]},{"r":"343","s":[{"value":["return all "]},{"r":"342","s":[{"value":["{\n            "]},{"s":[{"value":["period",": "]},{"r":"337","s":[{"r":"335","s":[{"value":["CMD"]}]},{"value":["."]},{"r":"337","s":[{"value":["\"MedicationOrderPeriod\""," ( "]},{"r":"336","s":[{"value":["LisdexamfetamineMed"]}]},{"value":[" )"]}]}]}]},{"value":[",\n            "]},{"s":[{"value":["periodStart",": "]},{"r":"341","s":[{"value":["start of "]},{"r":"340","s":[{"r":"338","s":[{"value":["CMD"]}]},{"value":["."]},{"r":"340","s":[{"value":["\"MedicationOrderPeriod\""," ( "]},{"r":"339","s":[{"value":["LisdexamfetamineMed"]}]},{"value":[" )"]}]}]}]}]},{"value":["\n          }"]}]}]},{"value":["\n          "]},{"r":"346","s":[{"value":["sort by "]},{"r":"345","s":[{"r":"344","s":[{"value":["periodStart"]}]}]}]}]},{"value":["\n      )"]}]},{"value":["."]},{"r":"348","s":[{"value":["period"]}]}]},{"value":[" )"]}]}]},{"value":["\n    )"]}]}]},{"value":["\n    union "]},{"r":"368","s":[{"value":["( "]},{"r":"368","s":[{"r":"351","s":[{"value":["CMD"]}]},{"value":["."]},{"r":"368","s":[{"value":["\"RolloutIntervals\""," ( "]},{"r":"367","s":[{"r":"366","s":[{"value":["( "]},{"r":"366","s":[{"s":[{"r":"353","s":[{"r":"352","s":[{"r":"352","s":[{"value":["[","\"Medication, Order\"",": "]},{"s":[{"value":["\"Methylphenidate\""]}]},{"value":["]"]}]}]},{"value":[" ","MethylphenidateMed"]}]}]},{"value":["\n          "]},{"r":"362","s":[{"value":["return all "]},{"r":"361","s":[{"value":["{\n            "]},{"s":[{"value":["period",": "]},{"r":"356","s":[{"r":"354","s":[{"value":["CMD"]}]},{"value":["."]},{"r":"356","s":[{"value":["\"MedicationOrderPeriod\""," ( "]},{"r":"355","s":[{"value":["MethylphenidateMed"]}]},{"value":[" )"]}]}]}]},{"value":[",\n            "]},{"s":[{"value":["periodStart",": "]},{"r":"360","s":[{"value":["start of "]},{"r":"359","s":[{"r":"357","s":[{"value":["CMD"]}]},{"value":["."]},{"r":"359","s":[{"value":["\"MedicationOrderPeriod\""," ( "]},{"r":"358","s":[{"value":["MethylphenidateMed"]}]},{"value":[" )"]}]}]}]}]},{"value":["\n          }"]}]}]},{"value":["\n          "]},{"r":"365","s":[{"value":["sort by "]},{"r":"364","s":[{"r":"363","s":[{"value":["periodStart"]}]}]}]}]},{"value":["\n      )"]}]},{"value":["."]},{"r":"367","s":[{"value":["period"]}]}]},{"value":[" )"]}]}]},{"value":["\n    )"]}]}]},{"value":["\n    union "]},{"r":"387","s":[{"value":["( "]},{"r":"387","s":[{"r":"370","s":[{"value":["CMD"]}]},{"value":["."]},{"r":"387","s":[{"value":["\"RolloutIntervals\""," ( "]},{"r":"386","s":[{"r":"385","s":[{"value":["( "]},{"r":"385","s":[{"s":[{"r":"372","s":[{"r":"371","s":[{"r":"371","s":[{"value":["[","\"Medication, Order\"",": "]},{"s":[{"value":["\"Guanfacine\""]}]},{"value":["]"]}]}]},{"value":[" ","GuanfacineMed"]}]}]},{"value":["\n          "]},{"r":"381","s":[{"value":["return all "]},{"r":"380","s":[{"value":["{\n            "]},{"s":[{"value":["period",": "]},{"r":"375","s":[{"r":"373","s":[{"value":["CMD"]}]},{"value":["."]},{"r":"375","s":[{"value":["\"MedicationOrderPeriod\""," ( "]},{"r":"374","s":[{"value":["GuanfacineMed"]}]},{"value":[" )"]}]}]}]},{"value":[",\n            "]},{"s":[{"value":["periodStart",": "]},{"r":"379","s":[{"value":["start of "]},{"r":"378","s":[{"r":"376","s":[{"value":["CMD"]}]},{"value":["."]},{"r":"378","s":[{"value":["\"MedicationOrderPeriod\""," ( "]},{"r":"377","s":[{"value":["GuanfacineMed"]}]},{"value":[" )"]}]}]}]}]},{"value":["\n          }"]}]}]},{"value":["\n          "]},{"r":"384","s":[{"value":["sort by "]},{"r":"383","s":[{"r":"382","s":[{"value":["periodStart"]}]}]}]}]},{"value":["\n      )"]}]},{"value":["."]},{"r":"386","s":[{"value":["period"]}]}]},{"value":[" )"]}]}]},{"value":["\n    )"]}]}]},{"value":["\n    union "]},{"r":"406","s":[{"value":["( "]},{"r":"406","s":[{"r":"389","s":[{"value":["CMD"]}]},{"value":["."]},{"r":"406","s":[{"value":["\"RolloutIntervals\""," ( "]},{"r":"405","s":[{"r":"404","s":[{"value":["( "]},{"r":"404","s":[{"s":[{"r":"391","s":[{"r":"390","s":[{"r":"390","s":[{"value":["[","\"Medication, Order\"",": "]},{"s":[{"value":["\"methamphetamine hydrochloride 5 MG Oral Tablet\""]}]},{"value":["]"]}]}]},{"value":[" ","MethamphetamineMed"]}]}]},{"value":["\n          "]},{"r":"400","s":[{"value":["return all "]},{"r":"399","s":[{"value":["{\n            "]},{"s":[{"value":["period",": "]},{"r":"394","s":[{"r":"392","s":[{"value":["CMD"]}]},{"value":["."]},{"r":"394","s":[{"value":["\"MedicationOrderPeriod\""," ( "]},{"r":"393","s":[{"value":["MethamphetamineMed"]}]},{"value":[" )"]}]}]}]},{"value":[",\n            "]},{"s":[{"value":["periodStart",": "]},{"r":"398","s":[{"value":["start of "]},{"r":"397","s":[{"r":"395","s":[{"value":["CMD"]}]},{"value":["."]},{"r":"397","s":[{"value":["\"MedicationOrderPeriod\""," ( "]},{"r":"396","s":[{"value":["MethamphetamineMed"]}]},{"value":[" )"]}]}]}]}]},{"value":["\n          }"]}]}]},{"value":["\n          "]},{"r":"403","s":[{"value":["sort by "]},{"r":"402","s":[{"r":"401","s":[{"value":["periodStart"]}]}]}]}]},{"value":["\n      )"]}]},{"value":["."]},{"r":"405","s":[{"value":["period"]}]}]},{"value":[" )"]}]}]},{"value":["\n    )"]}]}]},{"value":[" )"]}]},{"value":[" ","ADHDMedication"]}]}]},{"value":["\n    "]},{"s":[{"value":["let "]},{"r":"414","s":[{"value":["IPSDAndContinuationMaintenancePhase",": "]},{"r":"413","s":[{"value":["Interval["]},{"r":"409","s":[{"value":["\"IPSD\""]}]},{"value":[", "]},{"r":"412","s":[{"r":"410","s":[{"value":["\"IPSD\""]}]},{"value":[" + "]},{"r":"411","s":[{"value":["300 ","days"]}]}]},{"value":["]"]}]}]}]},{"value":["\n    "]},{"r":"418","s":[{"value":["return all "]},{"r":"417","s":[{"r":"415","s":[{"value":["ADHDMedication"]}]},{"value":["\n      intersect "]},{"r":"416","s":[{"value":["IPSDAndContinuationMaintenancePhase"]}]}]}]}]}]}}],"expression":{"localId":"419","locator":"214:3-280:51","type":"Query","source":[{"localId":"408","locator":"214:3-277:22","alias":"ADHDMedication","expression":{"localId":"407","locator":"214:3-277:7","type":"Union","operand":[{"localId":"369","locator":"214:5-261:5","type":"Union","operand":[{"localId":"331","locator":"214:5-245:5","type":"Union","operand":[{"localId":"293","locator":"214:5-229:5","type":"Union","operand":[{"localId":"274","locator":"214:5-221:3","name":"RolloutIntervals","libraryName":"CMD","type":"FunctionRef","operand":[{"localId":"273","locator":"214:32-220:12","type":"Query","source":[{"alias":"$this","expression":{"localId":"272","locator":"214:32-220:5","type":"Query","source":[{"localId":"259","locator":"214:34-214:84","alias":"AtomoxetineMed","expression":{"localId":"258","locator":"214:34-214:69","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationOrder","templateId":"PositiveMedicationOrder","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"214:56-214:68","name":"Atomoxetine","type":"ValueSetRef"}}}],"relationship":[],"return":{"localId":"268","locator":"215:9-218:9","distinct":false,"expression":{"localId":"267","locator":"215:20-218:9","type":"Tuple","element":[{"name":"period","value":{"localId":"262","locator":"216:19-216:64","name":"MedicationOrderPeriod","libraryName":"CMD","type":"FunctionRef","operand":[{"localId":"261","locator":"216:49-216:62","name":"AtomoxetineMed","type":"AliasRef"}]}},{"name":"periodStart","value":{"localId":"266","locator":"217:24-217:78","type":"Start","operand":{"localId":"265","locator":"217:33-217:78","name":"MedicationOrderPeriod","libraryName":"CMD","type":"FunctionRef","operand":[{"localId":"264","locator":"217:63-217:76","name":"AtomoxetineMed","type":"AliasRef"}]}}}]}},"sort":{"localId":"271","locator":"219:9-219:27","by":[{"localId":"270","locator":"219:17-219:27","direction":"asc","path":"periodStart","type":"ByColumn"}]}}}],"where":{"type":"Not","operand":{"type":"IsNull","operand":{"path":"period","type":"Property","source":{"name":"$this","type":"AliasRef"}}}},"return":{"distinct":false,"expression":{"path":"period","type":"Property","source":{"name":"$this","type":"AliasRef"}}}}]},{"localId":"292","locator":"222:11-229:5","name":"RolloutIntervals","libraryName":"CMD","type":"FunctionRef","operand":[{"localId":"291","locator":"222:38-228:14","type":"Query","source":[{"alias":"$this","expression":{"localId":"290","locator":"222:38-228:7","type":"Query","source":[{"localId":"277","locator":"222:40-222:86","alias":"ClonidineMed","expression":{"localId":"276","locator":"222:40-222:73","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationOrder","templateId":"PositiveMedicationOrder","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"222:62-222:72","name":"Clonidine","type":"ValueSetRef"}}}],"relationship":[],"return":{"localId":"286","locator":"223:11-226:11","distinct":false,"expression":{"localId":"285","locator":"223:22-226:11","type":"Tuple","element":[{"name":"period","value":{"localId":"280","locator":"224:21-224:64","name":"MedicationOrderPeriod","libraryName":"CMD","type":"FunctionRef","operand":[{"localId":"279","locator":"224:51-224:62","name":"ClonidineMed","type":"AliasRef"}]}},{"name":"periodStart","value":{"localId":"284","locator":"225:26-225:78","type":"Start","operand":{"localId":"283","locator":"225:35-225:78","name":"MedicationOrderPeriod","libraryName":"CMD","type":"FunctionRef","operand":[{"localId":"282","locator":"225:65-225:76","name":"ClonidineMed","type":"AliasRef"}]}}}]}},"sort":{"localId":"289","locator":"227:11-227:29","by":[{"localId":"288","locator":"227:19-227:29","direction":"asc","path":"periodStart","type":"ByColumn"}]}}}],"where":{"type":"Not","operand":{"type":"IsNull","operand":{"path":"period","type":"Property","source":{"name":"$this","type":"AliasRef"}}}},"return":{"distinct":false,"expression":{"path":"period","type":"Property","source":{"name":"$this","type":"AliasRef"}}}}]}]},{"type":"Union","operand":[{"localId":"311","locator":"230:11-237:5","name":"RolloutIntervals","libraryName":"CMD","type":"FunctionRef","operand":[{"localId":"310","locator":"230:38-236:14","type":"Query","source":[{"alias":"$this","expression":{"localId":"309","locator":"230:38-236:7","type":"Query","source":[{"localId":"296","locator":"230:40-230:104","alias":"DexmethylphenidateMed","expression":{"localId":"295","locator":"230:40-230:82","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationOrder","templateId":"PositiveMedicationOrder","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"230:62-230:81","name":"Dexmethylphenidate","type":"ValueSetRef"}}}],"relationship":[],"return":{"localId":"305","locator":"231:11-234:11","distinct":false,"expression":{"localId":"304","locator":"231:22-234:11","type":"Tuple","element":[{"name":"period","value":{"localId":"299","locator":"232:21-232:73","name":"MedicationOrderPeriod","libraryName":"CMD","type":"FunctionRef","operand":[{"localId":"298","locator":"232:51-232:71","name":"DexmethylphenidateMed","type":"AliasRef"}]}},{"name":"periodStart","value":{"localId":"303","locator":"233:26-233:87","type":"Start","operand":{"localId":"302","locator":"233:35-233:87","name":"MedicationOrderPeriod","libraryName":"CMD","type":"FunctionRef","operand":[{"localId":"301","locator":"233:65-233:85","name":"DexmethylphenidateMed","type":"AliasRef"}]}}}]}},"sort":{"localId":"308","locator":"235:11-235:29","by":[{"localId":"307","locator":"235:19-235:29","direction":"asc","path":"periodStart","type":"ByColumn"}]}}}],"where":{"type":"Not","operand":{"type":"IsNull","operand":{"path":"period","type":"Property","source":{"name":"$this","type":"AliasRef"}}}},"return":{"distinct":false,"expression":{"path":"period","type":"Property","source":{"name":"$this","type":"AliasRef"}}}}]},{"localId":"330","locator":"238:11-245:5","name":"RolloutIntervals","libraryName":"CMD","type":"FunctionRef","operand":[{"localId":"329","locator":"238:38-244:14","type":"Query","source":[{"alias":"$this","expression":{"localId":"328","locator":"238:38-244:7","type":"Query","source":[{"localId":"315","locator":"238:40-238:102","alias":"DextroamphetamineMed","expression":{"localId":"314","locator":"238:40-238:81","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationOrder","templateId":"PositiveMedicationOrder","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"238:62-238:80","name":"Dextroamphetamine","type":"ValueSetRef"}}}],"relationship":[],"return":{"localId":"324","locator":"239:11-242:11","distinct":false,"expression":{"localId":"323","locator":"239:22-242:11","type":"Tuple","element":[{"name":"period","value":{"localId":"318","locator":"240:21-240:72","name":"MedicationOrderPeriod","libraryName":"CMD","type":"FunctionRef","operand":[{"localId":"317","locator":"240:51-240:70","name":"DextroamphetamineMed","type":"AliasRef"}]}},{"name":"periodStart","value":{"localId":"322","locator":"241:26-241:86","type":"Start","operand":{"localId":"321","locator":"241:35-241:86","name":"MedicationOrderPeriod","libraryName":"CMD","type":"FunctionRef","operand":[{"localId":"320","locator":"241:65-241:84","name":"DextroamphetamineMed","type":"AliasRef"}]}}}]}},"sort":{"localId":"327","locator":"243:11-243:29","by":[{"localId":"326","locator":"243:19-243:29","direction":"asc","path":"periodStart","type":"ByColumn"}]}}}],"where":{"type":"Not","operand":{"type":"IsNull","operand":{"path":"period","type":"Property","source":{"name":"$this","type":"AliasRef"}}}},"return":{"distinct":false,"expression":{"path":"period","type":"Property","source":{"name":"$this","type":"AliasRef"}}}}]}]}]},{"type":"Union","operand":[{"localId":"349","locator":"246:11-253:5","name":"RolloutIntervals","libraryName":"CMD","type":"FunctionRef","operand":[{"localId":"348","locator":"246:38-252:14","type":"Query","source":[{"alias":"$this","expression":{"localId":"347","locator":"246:38-252:7","type":"Query","source":[{"localId":"334","locator":"246:40-246:100","alias":"LisdexamfetamineMed","expression":{"localId":"333","locator":"246:40-246:80","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationOrder","templateId":"PositiveMedicationOrder","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"246:62-246:79","name":"Lisdexamfetamine","type":"ValueSetRef"}}}],"relationship":[],"return":{"localId":"343","locator":"247:11-250:11","distinct":false,"expression":{"localId":"342","locator":"247:22-250:11","type":"Tuple","element":[{"name":"period","value":{"localId":"337","locator":"248:21-248:71","name":"MedicationOrderPeriod","libraryName":"CMD","type":"FunctionRef","operand":[{"localId":"336","locator":"248:51-248:69","name":"LisdexamfetamineMed","type":"AliasRef"}]}},{"name":"periodStart","value":{"localId":"341","locator":"249:26-249:85","type":"Start","operand":{"localId":"340","locator":"249:35-249:85","name":"MedicationOrderPeriod","libraryName":"CMD","type":"FunctionRef","operand":[{"localId":"339","locator":"249:65-249:83","name":"LisdexamfetamineMed","type":"AliasRef"}]}}}]}},"sort":{"localId":"346","locator":"251:11-251:29","by":[{"localId":"345","locator":"251:19-251:29","direction":"asc","path":"periodStart","type":"ByColumn"}]}}}],"where":{"type":"Not","operand":{"type":"IsNull","operand":{"path":"period","type":"Property","source":{"name":"$this","type":"AliasRef"}}}},"return":{"distinct":false,"expression":{"path":"period","type":"Property","source":{"name":"$this","type":"AliasRef"}}}}]},{"localId":"368","locator":"254:11-261:5","name":"RolloutIntervals","libraryName":"CMD","type":"FunctionRef","operand":[{"localId":"367","locator":"254:38-260:14","type":"Query","source":[{"alias":"$this","expression":{"localId":"366","locator":"254:38-260:7","type":"Query","source":[{"localId":"353","locator":"254:40-254:98","alias":"MethylphenidateMed","expression":{"localId":"352","locator":"254:40-254:79","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationOrder","templateId":"PositiveMedicationOrder","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"254:62-254:78","name":"Methylphenidate","type":"ValueSetRef"}}}],"relationship":[],"return":{"localId":"362","locator":"255:11-258:11","distinct":false,"expression":{"localId":"361","locator":"255:22-258:11","type":"Tuple","element":[{"name":"period","value":{"localId":"356","locator":"256:21-256:70","name":"MedicationOrderPeriod","libraryName":"CMD","type":"FunctionRef","operand":[{"localId":"355","locator":"256:51-256:68","name":"MethylphenidateMed","type":"AliasRef"}]}},{"name":"periodStart","value":{"localId":"360","locator":"257:26-257:84","type":"Start","operand":{"localId":"359","locator":"257:35-257:84","name":"MedicationOrderPeriod","libraryName":"CMD","type":"FunctionRef","operand":[{"localId":"358","locator":"257:65-257:82","name":"MethylphenidateMed","type":"AliasRef"}]}}}]}},"sort":{"localId":"365","locator":"259:11-259:29","by":[{"localId":"364","locator":"259:19-259:29","direction":"asc","path":"periodStart","type":"ByColumn"}]}}}],"where":{"type":"Not","operand":{"type":"IsNull","operand":{"path":"period","type":"Property","source":{"name":"$this","type":"AliasRef"}}}},"return":{"distinct":false,"expression":{"path":"period","type":"Property","source":{"name":"$this","type":"AliasRef"}}}}]}]}]},{"type":"Union","operand":[{"localId":"387","locator":"262:11-269:5","name":"RolloutIntervals","libraryName":"CMD","type":"FunctionRef","operand":[{"localId":"386","locator":"262:38-268:14","type":"Query","source":[{"alias":"$this","expression":{"localId":"385","locator":"262:38-268:7","type":"Query","source":[{"localId":"372","locator":"262:40-262:88","alias":"GuanfacineMed","expression":{"localId":"371","locator":"262:40-262:74","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationOrder","templateId":"PositiveMedicationOrder","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"262:62-262:73","name":"Guanfacine","type":"ValueSetRef"}}}],"relationship":[],"return":{"localId":"381","locator":"263:11-266:11","distinct":false,"expression":{"localId":"380","locator":"263:22-266:11","type":"Tuple","element":[{"name":"period","value":{"localId":"375","locator":"264:21-264:65","name":"MedicationOrderPeriod","libraryName":"CMD","type":"FunctionRef","operand":[{"localId":"374","locator":"264:51-264:63","name":"GuanfacineMed","type":"AliasRef"}]}},{"name":"periodStart","value":{"localId":"379","locator":"265:26-265:79","type":"Start","operand":{"localId":"378","locator":"265:35-265:79","name":"MedicationOrderPeriod","libraryName":"CMD","type":"FunctionRef","operand":[{"localId":"377","locator":"265:65-265:77","name":"GuanfacineMed","type":"AliasRef"}]}}}]}},"sort":{"localId":"384","locator":"267:11-267:29","by":[{"localId":"383","locator":"267:19-267:29","direction":"asc","path":"periodStart","type":"ByColumn"}]}}}],"where":{"type":"Not","operand":{"type":"IsNull","operand":{"path":"period","type":"Property","source":{"name":"$this","type":"AliasRef"}}}},"return":{"distinct":false,"expression":{"path":"period","type":"Property","source":{"name":"$this","type":"AliasRef"}}}}]},{"localId":"406","locator":"270:11-277:5","name":"RolloutIntervals","libraryName":"CMD","type":"FunctionRef","operand":[{"localId":"405","locator":"270:38-276:14","type":"Query","source":[{"alias":"$this","expression":{"localId":"404","locator":"270:38-276:7","type":"Query","source":[{"localId":"391","locator":"270:40-270:129","alias":"MethamphetamineMed","expression":{"localId":"390","locator":"270:40-270:110","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationOrder","templateId":"PositiveMedicationOrder","codeProperty":"code","codeComparator":"~","type":"Retrieve","codes":{"type":"ToList","operand":{"locator":"270:62-270:109","name":"methamphetamine hydrochloride 5 MG Oral Tablet","type":"CodeRef"}}}}],"relationship":[],"return":{"localId":"400","locator":"271:11-274:11","distinct":false,"expression":{"localId":"399","locator":"271:22-274:11","type":"Tuple","element":[{"name":"period","value":{"localId":"394","locator":"272:21-272:70","name":"MedicationOrderPeriod","libraryName":"CMD","type":"FunctionRef","operand":[{"localId":"393","locator":"272:51-272:68","name":"MethamphetamineMed","type":"AliasRef"}]}},{"name":"periodStart","value":{"localId":"398","locator":"273:26-273:84","type":"Start","operand":{"localId":"397","locator":"273:35-273:84","name":"MedicationOrderPeriod","libraryName":"CMD","type":"FunctionRef","operand":[{"localId":"396","locator":"273:65-273:82","name":"MethamphetamineMed","type":"AliasRef"}]}}}]}},"sort":{"localId":"403","locator":"275:11-275:29","by":[{"localId":"402","locator":"275:19-275:29","direction":"asc","path":"periodStart","type":"ByColumn"}]}}}],"where":{"type":"Not","operand":{"type":"IsNull","operand":{"path":"period","type":"Property","source":{"name":"$this","type":"AliasRef"}}}},"return":{"distinct":false,"expression":{"path":"period","type":"Property","source":{"name":"$this","type":"AliasRef"}}}}]}]}]}}],"let":[{"localId":"414","locator":"278:9-278:80","identifier":"IPSDAndContinuationMaintenancePhase","expression":{"localId":"413","locator":"278:46-278:80","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"409","locator":"278:55-278:60","name":"IPSD","type":"ExpressionRef"},"high":{"localId":"412","locator":"278:63-278:79","type":"Add","operand":[{"localId":"410","locator":"278:63-278:68","name":"IPSD","type":"ExpressionRef"},{"localId":"411","locator":"278:72-278:79","value":300,"unit":"days","type":"Quantity"}]}}}],"relationship":[],"return":{"localId":"418","locator":"279:5-280:51","distinct":false,"expression":{"localId":"417","locator":"279:16-280:51","type":"Intersect","operand":[{"localId":"415","locator":"279:16-279:29","name":"ADHDMedication","type":"AliasRef"},{"localId":"416","locator":"280:17-280:51","name":"IPSDAndContinuationMaintenancePhase","type":"QueryLetRef"}]}}}},{"localId":"423","locator":"71:1-72:108","name":"ADHD Cumulative Medication Duration","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"423","s":[{"value":["","define ","\"ADHD Cumulative Medication Duration\"",":\n  "]},{"r":"422","s":[{"r":"256","s":[{"value":["CMD"]}]},{"value":["."]},{"r":"422","s":[{"value":["\"CumulativeDuration\""," ( "]},{"r":"421","s":[{"value":["\"ADHD Medications Taken on IPSD or During Continuation and Maintenance Phase\""]}]},{"value":[" )"]}]}]}]}}],"expression":{"localId":"422","locator":"72:3-72:108","name":"CumulativeDuration","libraryName":"CMD","type":"FunctionRef","operand":[{"localId":"421","locator":"72:30-72:106","name":"ADHD Medications Taken on IPSD or During Continuation and Maintenance Phase","type":"ExpressionRef"}]}},{"localId":"427","locator":"68:1-69:46","name":"Has ADHD Cumulative Medication Duration Greater Than or Equal to 210 Days","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"427","s":[{"value":["","define ","\"Has ADHD Cumulative Medication Duration Greater Than or Equal to 210 Days\"",":\n  "]},{"r":"426","s":[{"r":"424","s":[{"value":["\"ADHD Cumulative Medication Duration\""]}]},{"r":"425","value":[" ","\u003e="," ","210"]}]}]}}],"expression":{"localId":"426","locator":"69:3-69:46","type":"GreaterOrEqual","operand":[{"localId":"424","locator":"69:3-69:39","name":"ADHD Cumulative Medication Duration","type":"ExpressionRef"},{"localId":"425","locator":"69:44-69:46","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"210","type":"Literal"}]}},{"localId":"440","locator":"102:1-104:110","name":"Inpatient Stay with Qualifying Diagnosis During Continuation and Maintenance Phase","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"440","s":[{"value":["","define ","\"Inpatient Stay with Qualifying Diagnosis During Continuation and Maintenance Phase\"",":\n  "]},{"r":"439","s":[{"s":[{"r":"431","s":[{"r":"430","s":[{"s":[{"value":["\"Inpatient Stay with Qualifying Diagnosis\""]}]}]},{"value":[" ","InpatientStay"]}]}]},{"value":["\n    "]},{"r":"438","s":[{"value":["where "]},{"r":"438","s":[{"r":"435","s":[{"r":"432","s":[{"value":["Global"]}]},{"value":["."]},{"r":"435","s":[{"value":["\"ToDateInterval\""," ( "]},{"r":"434","s":[{"r":"433","s":[{"value":["InpatientStay"]}]},{"value":["."]},{"r":"434","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]},{"value":[" "]},{"r":"438","s":[{"value":["starts "]},{"r":"437","s":[{"value":["300 ","days"]}]},{"value":[" or less after day of"]}]},{"value":[" "]},{"r":"436","s":[{"value":["\"IPSD\""]}]}]}]}]}]}}],"expression":{"localId":"439","locator":"103:3-104:110","type":"Query","source":[{"localId":"431","locator":"103:3-103:58","alias":"InpatientStay","expression":{"localId":"430","locator":"103:3-103:44","name":"Inpatient Stay with Qualifying Diagnosis","type":"ExpressionRef"}}],"relationship":[],"where":{"localId":"438","locator":"104:5-104:110","type":"And","operand":[{"locator":"104:75-104:90","precision":"Day","type":"In","operand":[{"locator":"104:68-104:73","type":"Start","operand":{"localId":"435","locator":"104:11-104:66","name":"ToDateInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"434","locator":"104:37-104:64","path":"relevantPeriod","scope":"InpatientStay","type":"Property"}]}},{"locator":"104:75-104:90","lowClosed":false,"highClosed":true,"type":"Interval","low":{"localId":"436","locator":"104:105-104:110","name":"IPSD","type":"ExpressionRef"},"high":{"locator":"104:105-104:110","type":"Add","operand":[{"localId":"436","locator":"104:105-104:110","name":"IPSD","type":"ExpressionRef"},{"localId":"437","locator":"104:75-104:82","value":300,"unit":"days","type":"Quantity"}]}}]},{"locator":"104:75-104:90","type":"Not","operand":{"locator":"104:75-104:90","type":"IsNull","operand":{"localId":"436","locator":"104:105-104:110","name":"IPSD","type":"ExpressionRef"}}}]}}},{"localId":"445","locator":"83:1-91:103","name":"Initial Population 2","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"445","s":[{"value":["","define ","\"Initial Population 2\"",":\n  "]},{"r":"444","s":[{"r":"429","s":[{"r":"255","s":[{"r":"252","s":[{"r":"249","s":[{"r":"242","s":[{"r":"240","s":[{"value":["AgeInYearsAt","("]},{"r":"239","s":[{"value":["date from "]},{"r":"238","s":[{"value":["start of "]},{"r":"237","s":[{"value":["\"Intake Period\""]}]}]}]},{"value":[")"]}]},{"r":"241","value":["\u003e="," ","6"]}]},{"value":["\n    and "]},{"r":"248","s":[{"r":"246","s":[{"value":["AgeInYearsAt","("]},{"r":"245","s":[{"value":["date from \n      "]},{"r":"244","s":[{"value":["end of "]},{"r":"243","s":[{"value":["\"Intake Period\""]}]}]}]},{"value":["\n    )"]}]},{"r":"247","value":["\u003c="," ","12"]}]}]},{"value":["\n    and "]},{"r":"251","s":[{"value":["exists "]},{"r":"250","s":[{"value":["\"Qualifying Encounter\""]}]}]}]},{"value":["\n    and "]},{"r":"254","s":[{"r":"253","s":[{"value":["\"First ADHD Medication Prescribed During Intake Period\""]}]},{"value":[" is not null"]}]}]},{"value":["\n    and "]},{"r":"428","s":[{"value":["\"Has ADHD Cumulative Medication Duration Greater Than or Equal to 210 Days\""]}]}]},{"value":["\n    and "]},{"r":"443","s":[{"value":["not "]},{"r":"442","s":[{"value":["exists "]},{"r":"441","s":[{"value":["\"Inpatient Stay with Qualifying Diagnosis During Continuation and Maintenance Phase\""]}]}]}]}]}]}}],"expression":{"localId":"444","locator":"84:3-91:103","type":"And","operand":[{"localId":"429","locator":"84:3-90:83","type":"And","operand":[{"localId":"255","locator":"84:3-89:75","type":"And","operand":[{"localId":"252","locator":"84:3-88:37","type":"And","operand":[{"localId":"249","locator":"84:3-87:10","type":"And","operand":[{"localId":"242","locator":"84:3-84:54","type":"GreaterOrEqual","operand":[{"localId":"240","locator":"84:3-84:50","precision":"Year","type":"CalculateAgeAt","operand":[{"type":"ToDate","operand":{"path":"birthDatetime","type":"Property","source":{"name":"Patient","type":"ExpressionRef"}}},{"localId":"239","locator":"84:16-84:49","type":"DateFrom","operand":{"localId":"238","locator":"84:26-84:49","type":"Start","operand":{"localId":"237","locator":"84:35-84:49","name":"Intake Period","type":"ExpressionRef"}}}]},{"localId":"241","locator":"84:54","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"6","type":"Literal"}]},{"localId":"248","locator":"85:9-87:10","type":"LessOrEqual","operand":[{"localId":"246","locator":"85:9-87:5","precision":"Year","type":"CalculateAgeAt","operand":[{"type":"ToDate","operand":{"path":"birthDatetime","type":"Property","source":{"name":"Patient","type":"ExpressionRef"}}},{"localId":"245","locator":"85:22-86:28","type":"DateFrom","operand":{"localId":"244","locator":"86:7-86:28","type":"End","operand":{"localId":"243","locator":"86:14-86:28","name":"Intake Period","type":"ExpressionRef"}}}]},{"localId":"247","locator":"87:9-87:10","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"12","type":"Literal"}]}]},{"localId":"251","locator":"88:9-88:37","type":"Exists","operand":{"localId":"250","locator":"88:16-88:37","name":"Qualifying Encounter","type":"ExpressionRef"}}]},{"localId":"254","locator":"89:9-89:75","type":"Not","operand":{"locator":"89:9-89:75","type":"IsNull","operand":{"localId":"253","locator":"89:9-89:63","name":"First ADHD Medication Prescribed During Intake Period","type":"ExpressionRef"}}}]},{"localId":"428","locator":"90:9-90:83","name":"Has ADHD Cumulative Medication Duration Greater Than or Equal to 210 Days","type":"ExpressionRef"}]},{"localId":"443","locator":"91:9-91:103","type":"Not","operand":{"localId":"442","locator":"91:13-91:103","type":"Exists","operand":{"localId":"441","locator":"91:20-91:103","name":"Inpatient Stay with Qualifying Diagnosis During Continuation and Maintenance Phase","type":"ExpressionRef"}}}]}},{"localId":"447","locator":"54:1-55:24","name":"Denominator 2","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"447","s":[{"value":["","define ","\"Denominator 2\"",":\n  "]},{"r":"446","s":[{"value":["\"Initial Population 2\""]}]}]}}],"expression":{"localId":"446","locator":"55:3-55:24","name":"Initial Population 2","type":"ExpressionRef"}},{"localId":"457","locator":"119:1-122:28","name":"Narcolepsy Exclusion","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"457","s":[{"value":["","define ","\"Narcolepsy Exclusion\"",":\n  "]},{"r":"456","s":[{"s":[{"r":"451","s":[{"r":"450","s":[{"r":"450","s":[{"value":["[","\"Diagnosis\"",": "]},{"s":[{"value":["\"Narcolepsy\""]}]},{"value":["]"]}]}]},{"value":[" ","Narcolepsy"]}]}]},{"value":["\n    "]},{"r":"455","s":[{"value":["where "]},{"r":"455","s":[{"r":"453","s":[{"r":"452","s":[{"value":["Narcolepsy"]}]},{"value":["."]},{"r":"453","s":[{"value":["prevalencePeriod"]}]}]},{"r":"455","value":[" ","starts on or before \n    end"," "]},{"r":"454","s":[{"value":["\"Measurement Period\""]}]}]}]}]}]}}],"expression":{"localId":"456","locator":"120:3-122:28","type":"Query","source":[{"localId":"451","locator":"120:3-120:40","alias":"Narcolepsy","expression":{"localId":"450","locator":"120:3-120:29","dataType":"{urn:healthit-gov:qdm:v5_6}Diagnosis","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"120:17-120:28","name":"Narcolepsy","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"455","locator":"121:5-122:28","type":"SameOrBefore","operand":[{"locator":"121:39-121:44","type":"Start","operand":{"localId":"453","locator":"121:11-121:37","path":"prevalencePeriod","scope":"Narcolepsy","type":"Property"}},{"locator":"122:5-122:7","type":"End","operand":{"localId":"454","locator":"122:9-122:28","name":"Measurement Period","type":"ParameterRef"}}]}}},{"localId":"461","locator":"57:1-59:40","name":"Denominator Exclusions","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"461","s":[{"value":["","define ","\"Denominator Exclusions\"",":\n  "]},{"r":"460","s":[{"r":"449","s":[{"r":"448","s":[{"value":["Hospice"]}]},{"value":["."]},{"r":"449","s":[{"value":["\"Has Hospice Services\""]}]}]},{"value":["\n    or "]},{"r":"459","s":[{"value":["exists "]},{"r":"458","s":[{"value":["( "]},{"r":"458","s":[{"value":["\"Narcolepsy Exclusion\""]}]},{"value":[" )"]}]}]}]}]}}],"expression":{"localId":"460","locator":"58:3-59:40","type":"Or","operand":[{"localId":"449","locator":"58:3-58:32","name":"Has Hospice Services","libraryName":"Hospice","type":"ExpressionRef"},{"localId":"459","locator":"59:8-59:40","type":"Exists","operand":{"localId":"458","locator":"59:15-59:40","name":"Narcolepsy Exclusion","type":"ExpressionRef"}}]}},{"localId":"497","locator":"146:1-164:3","name":"Qualifying Numerator Encounter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"497","s":[{"value":["","define ","\"Qualifying Numerator Encounter\"",":\n  "]},{"r":"496","s":[{"value":["( "]},{"r":"496","s":[{"r":"494","s":[{"r":"492","s":[{"r":"490","s":[{"r":"488","s":[{"r":"486","s":[{"r":"484","s":[{"r":"482","s":[{"r":"470","s":[{"r":"468","s":[{"r":"466","s":[{"r":"464","s":[{"r":"462","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Office Visit\""]}]},{"value":["]"]}]},{"value":["\n      union "]},{"r":"463","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Initial Hospital Observation Care\""]}]},{"value":["]"]}]}]},{"value":["\n      union "]},{"r":"465","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Preventive Care Services Group Counseling\""]}]},{"value":["]"]}]}]},{"value":["\n      union "]},{"r":"467","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Behavioral Health Follow up Visit\""]}]},{"value":["]"]}]}]},{"value":["\n      union "]},{"r":"469","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Preventive Care Services Individual Counseling\""]}]},{"value":["]"]}]}]},{"value":["\n      union "]},{"r":"481","s":[{"value":["( "]},{"r":"481","s":[{"s":[{"r":"472","s":[{"r":"471","s":[{"r":"471","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Psychotherapy and Pharmacologic Management\""]}]},{"value":["]"]}]}]},{"value":[" ","PsychPharmManagement"]}]}]},{"value":["\n          "]},{"r":"480","s":[{"value":["where "]},{"r":"480","s":[{"value":["exists "]},{"r":"479","s":[{"value":["( "]},{"r":"479","s":[{"s":[{"r":"474","s":[{"r":"473","s":[{"s":[{"value":["PsychPharmManagement",".","facilityLocations"]}]}]},{"value":[" ","Location"]}]}]},{"value":["\n              "]},{"r":"478","s":[{"value":["where "]},{"r":"478","s":[{"r":"476","s":[{"r":"475","s":[{"value":["Location"]}]},{"value":["."]},{"r":"476","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"477","s":[{"value":["\"Ambulatory\""]}]}]}]}]},{"value":["\n          )"]}]}]}]}]},{"value":["\n      )"]}]}]},{"value":["\n      union "]},{"r":"483","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Outpatient Consultation\""]}]},{"value":["]"]}]}]},{"value":["\n      union "]},{"r":"485","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Home Healthcare Services\""]}]},{"value":["]"]}]}]},{"value":["\n      union "]},{"r":"487","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Preventive Care Services, Initial Office Visit, 0 to 17\""]}]},{"value":["]"]}]}]},{"value":["\n      union "]},{"r":"489","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Preventive Care, Established Office Visit, 0 to 17\""]}]},{"value":["]"]}]}]},{"value":["\n      union "]},{"r":"491","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Psych Visit Diagnostic Evaluation\""]}]},{"value":["]"]}]}]},{"value":["\n      union "]},{"r":"493","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Psych Visit Psychotherapy\""]}]},{"value":["]"]}]}]},{"value":["\n      union "]},{"r":"495","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Telephone Visits\""]}]},{"value":["]"]}]}]},{"value":["\n  )"]}]}]}}],"expression":{"localId":"496","locator":"147:3-164:3","type":"Union","operand":[{"localId":"494","locator":"147:5-162:65","type":"Union","operand":[{"localId":"490","locator":"147:5-160:90","type":"Union","operand":[{"localId":"486","locator":"147:5-158:64","type":"Union","operand":[{"localId":"482","locator":"147:5-156:7","type":"Union","operand":[{"localId":"468","locator":"147:5-150:73","type":"Union","operand":[{"localId":"464","locator":"147:5-148:73","type":"Union","operand":[{"localId":"462","locator":"147:5-147:44","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"147:30-147:43","name":"Office Visit","type":"ValueSetRef"}},{"localId":"463","locator":"148:13-148:73","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"148:38-148:72","name":"Initial Hospital Observation Care","type":"ValueSetRef"}}]},{"type":"Union","operand":[{"localId":"465","locator":"149:13-149:81","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"149:38-149:80","name":"Preventive Care Services Group Counseling","type":"ValueSetRef"}},{"localId":"467","locator":"150:13-150:73","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"150:38-150:72","name":"Behavioral Health Follow up Visit","type":"ValueSetRef"}}]}]},{"type":"Union","operand":[{"localId":"469","locator":"151:13-151:86","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"151:38-151:85","name":"Preventive Care Services Individual Counseling","type":"ValueSetRef"}},{"localId":"481","locator":"152:13-156:7","type":"Query","source":[{"localId":"472","locator":"152:15-152:105","alias":"PsychPharmManagement","expression":{"localId":"471","locator":"152:15-152:84","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"152:40-152:83","name":"Psychotherapy and Pharmacologic Management","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"480","locator":"153:11-155:11","type":"Exists","operand":{"localId":"479","locator":"153:24-155:11","type":"Query","source":[{"localId":"474","locator":"153:26-153:72","alias":"Location","expression":{"localId":"473","locator":"153:26-153:63","path":"facilityLocations","scope":"PsychPharmManagement","type":"Property"}}],"relationship":[],"where":{"localId":"478","locator":"154:15-154:49","type":"InValueSet","code":{"localId":"476","locator":"154:21-154:33","path":"code","scope":"Location","type":"Property"},"valueset":{"localId":"477","locator":"154:38-154:49","name":"Ambulatory","type":"ValueSetRef"}}}}}]}]},{"type":"Union","operand":[{"localId":"483","locator":"157:13-157:63","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"157:38-157:62","name":"Outpatient Consultation","type":"ValueSetRef"}},{"localId":"485","locator":"158:13-158:64","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"158:38-158:63","name":"Home Healthcare Services","type":"ValueSetRef"}}]}]},{"type":"Union","operand":[{"localId":"487","locator":"159:13-159:95","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"159:38-159:94","name":"Preventive Care Services, Initial Office Visit, 0 to 17","type":"ValueSetRef"}},{"localId":"489","locator":"160:13-160:90","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"160:38-160:89","name":"Preventive Care, Established Office Visit, 0 to 17","type":"ValueSetRef"}}]}]},{"type":"Union","operand":[{"localId":"491","locator":"161:13-161:73","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"161:38-161:72","name":"Psych Visit Diagnostic Evaluation","type":"ValueSetRef"}},{"localId":"493","locator":"162:13-162:65","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"162:38-162:64","name":"Psych Visit Psychotherapy","type":"ValueSetRef"}}]}]},{"localId":"495","locator":"163:13-163:56","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"163:38-163:55","name":"Telephone Visits","type":"ValueSetRef"}}]}},{"localId":"508","locator":"61:1-63:119","name":"Encounter During Initiation Phase","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"508","s":[{"value":["","define ","\"Encounter During Initiation Phase\"",":\n  "]},{"r":"507","s":[{"s":[{"r":"499","s":[{"r":"498","s":[{"s":[{"value":["\"Qualifying Numerator Encounter\""]}]}]},{"value":[" ","ValidNumeratorEncounter"]}]}]},{"value":["\n    "]},{"r":"506","s":[{"value":["where "]},{"r":"506","s":[{"r":"503","s":[{"r":"500","s":[{"value":["Global"]}]},{"value":["."]},{"r":"503","s":[{"value":["\"ToDateInterval\""," ( "]},{"r":"502","s":[{"r":"501","s":[{"value":["ValidNumeratorEncounter"]}]},{"value":["."]},{"r":"502","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]},{"value":[" "]},{"r":"506","s":[{"value":["starts "]},{"r":"505","s":[{"value":["30 ","days"]}]},{"value":[" or less after day of"]}]},{"value":[" "]},{"r":"504","s":[{"value":["\"IPSD\""]}]}]}]}]}]}}],"expression":{"localId":"507","locator":"62:3-63:119","type":"Query","source":[{"localId":"499","locator":"62:3-62:58","alias":"ValidNumeratorEncounter","expression":{"localId":"498","locator":"62:3-62:34","name":"Qualifying Numerator Encounter","type":"ExpressionRef"}}],"relationship":[],"where":{"localId":"506","locator":"63:5-63:119","type":"And","operand":[{"locator":"63:85-63:99","precision":"Day","type":"In","operand":[{"locator":"63:78-63:83","type":"Start","operand":{"localId":"503","locator":"63:11-63:76","name":"ToDateInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"502","locator":"63:37-63:74","path":"relevantPeriod","scope":"ValidNumeratorEncounter","type":"Property"}]}},{"locator":"63:85-63:99","lowClosed":false,"highClosed":true,"type":"Interval","low":{"localId":"504","locator":"63:114-63:119","name":"IPSD","type":"ExpressionRef"},"high":{"locator":"63:114-63:119","type":"Add","operand":[{"localId":"504","locator":"63:114-63:119","name":"IPSD","type":"ExpressionRef"},{"localId":"505","locator":"63:85-63:91","value":30,"unit":"days","type":"Quantity"}]}}]},{"locator":"63:85-63:99","type":"Not","operand":{"locator":"63:85-63:99","type":"IsNull","operand":{"localId":"504","locator":"63:114-63:119","name":"IPSD","type":"ExpressionRef"}}}]}}},{"localId":"511","locator":"124:1-125:48","name":"Numerator 1","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"511","s":[{"value":["","define ","\"Numerator 1\"",":\n  "]},{"r":"510","s":[{"value":["exists "]},{"r":"509","s":[{"value":["( "]},{"r":"509","s":[{"value":["\"Encounter During Initiation Phase\""]}]},{"value":[" )"]}]}]}]}}],"expression":{"localId":"510","locator":"125:3-125:48","type":"Exists","operand":{"localId":"509","locator":"125:10-125:48","name":"Encounter During Initiation Phase","type":"ExpressionRef"}}},{"localId":"534","locator":"203:1-206:68","name":"Encounter 31 to 300 Days into Continuation and Maintenance Phase","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"534","s":[{"value":["","define ","\"Encounter 31 to 300 Days into Continuation and Maintenance Phase\"",":\n  "]},{"r":"533","s":[{"s":[{"r":"515","s":[{"r":"514","s":[{"s":[{"value":["\"Qualifying Numerator Encounter\""]}]}]},{"value":[" ","ValidNumeratorEncounter"]}]}]},{"value":["\n    "]},{"r":"527","s":[{"value":["where "]},{"r":"527","s":[{"r":"519","s":[{"r":"516","s":[{"value":["Global"]}]},{"value":["."]},{"r":"519","s":[{"value":["\"ToDateInterval\""," ( "]},{"r":"518","s":[{"r":"517","s":[{"value":["ValidNumeratorEncounter"]}]},{"value":["."]},{"r":"518","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]},{"r":"527","value":[" ","starts during day of"," "]},{"r":"526","s":[{"value":["Interval["]},{"r":"522","s":[{"r":"520","s":[{"value":["\"IPSD\""]}]},{"value":[" + "]},{"r":"521","s":[{"value":["31 ","days"]}]}]},{"value":[", "]},{"r":"525","s":[{"r":"523","s":[{"value":["\"IPSD\""]}]},{"value":[" + "]},{"r":"524","s":[{"value":["300 ","days"]}]}]},{"value":["]"]}]}]}]},{"value":["\n    "]},{"r":"532","s":[{"value":["return "]},{"r":"531","s":[{"value":["date from "]},{"r":"530","s":[{"value":["start of "]},{"r":"529","s":[{"r":"528","s":[{"value":["ValidNumeratorEncounter"]}]},{"value":["."]},{"r":"529","s":[{"value":["relevantPeriod"]}]}]}]}]}]}]}]}}],"expression":{"localId":"533","locator":"204:3-206:68","type":"Query","source":[{"localId":"515","locator":"204:3-204:58","alias":"ValidNumeratorEncounter","expression":{"localId":"514","locator":"204:3-204:34","name":"Qualifying Numerator Encounter","type":"ExpressionRef"}}],"relationship":[],"where":{"localId":"527","locator":"205:5-205:143","precision":"Day","type":"In","operand":[{"locator":"205:78-205:83","type":"Start","operand":{"localId":"519","locator":"205:11-205:76","name":"ToDateInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"518","locator":"205:37-205:74","path":"relevantPeriod","scope":"ValidNumeratorEncounter","type":"Property"}]}},{"localId":"526","locator":"205:99-205:143","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"522","locator":"205:108-205:123","type":"Add","operand":[{"localId":"520","locator":"205:108-205:113","name":"IPSD","type":"ExpressionRef"},{"localId":"521","locator":"205:117-205:123","value":31,"unit":"days","type":"Quantity"}]},"high":{"localId":"525","locator":"205:126-205:142","type":"Add","operand":[{"localId":"523","locator":"205:126-205:131","name":"IPSD","type":"ExpressionRef"},{"localId":"524","locator":"205:135-205:142","value":300,"unit":"days","type":"Quantity"}]}}]},"return":{"localId":"532","locator":"206:5-206:68","expression":{"localId":"531","locator":"206:12-206:68","type":"DateFrom","operand":{"localId":"530","locator":"206:22-206:68","type":"Start","operand":{"localId":"529","locator":"206:31-206:68","path":"relevantPeriod","scope":"ValidNumeratorEncounter","type":"Property"}}}}}},{"localId":"539","locator":"178:1-179:79","name":"Two or More Encounters 31 to 300 Days into Continuation and Maintenance Phase","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"539","s":[{"value":["","define ","\"Two or More Encounters 31 to 300 Days into Continuation and Maintenance Phase\"",":\n  "]},{"r":"538","s":[{"r":"536","s":[{"value":["Count","("]},{"r":"535","s":[{"value":["\"Encounter 31 to 300 Days into Continuation and Maintenance Phase\""]}]},{"value":[")"]}]},{"r":"537","value":["\u003e="," ","2"]}]}]}}],"expression":{"localId":"538","locator":"179:3-179:79","type":"GreaterOrEqual","operand":[{"localId":"536","locator":"179:3-179:75","type":"Count","source":{"localId":"535","locator":"179:9-179:74","name":"Encounter 31 to 300 Days into Continuation and Maintenance Phase","type":"ExpressionRef"}},{"localId":"537","locator":"179:79","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"2","type":"Literal"}]}},{"localId":"563","locator":"208:1-211:61","name":"Online Assessment 31 to 300 Days into Continuation and Maintenance Phase","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"563","s":[{"value":["","define ","\"Online Assessment 31 to 300 Days into Continuation and Maintenance Phase\"",":\n  "]},{"r":"562","s":[{"s":[{"r":"544","s":[{"r":"543","s":[{"r":"543","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Online Assessments\""]}]},{"value":["]"]}]}]},{"value":[" ","OnlineAssessment"]}]}]},{"value":["\n    "]},{"r":"556","s":[{"value":["where "]},{"r":"556","s":[{"r":"548","s":[{"r":"545","s":[{"value":["Global"]}]},{"value":["."]},{"r":"548","s":[{"value":["\"ToDateInterval\""," ( "]},{"r":"547","s":[{"r":"546","s":[{"value":["OnlineAssessment"]}]},{"value":["."]},{"r":"547","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]},{"r":"556","value":[" ","starts during day of"," "]},{"r":"555","s":[{"value":["Interval["]},{"r":"551","s":[{"r":"549","s":[{"value":["\"IPSD\""]}]},{"value":[" + "]},{"r":"550","s":[{"value":["31 ","days"]}]}]},{"value":[", "]},{"r":"554","s":[{"r":"552","s":[{"value":["\"IPSD\""]}]},{"value":[" + "]},{"r":"553","s":[{"value":["300 ","days"]}]}]},{"value":["]"]}]}]}]},{"value":["\n    "]},{"r":"561","s":[{"value":["return "]},{"r":"560","s":[{"value":["date from "]},{"r":"559","s":[{"value":["start of "]},{"r":"558","s":[{"r":"557","s":[{"value":["OnlineAssessment"]}]},{"value":["."]},{"r":"558","s":[{"value":["relevantPeriod"]}]}]}]}]}]}]}]}}],"expression":{"localId":"562","locator":"209:3-211:61","type":"Query","source":[{"localId":"544","locator":"209:3-209:65","alias":"OnlineAssessment","expression":{"localId":"543","locator":"209:3-209:48","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"209:28-209:47","name":"Online Assessments","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"556","locator":"210:5-210:136","precision":"Day","type":"In","operand":[{"locator":"210:71-210:76","type":"Start","operand":{"localId":"548","locator":"210:11-210:69","name":"ToDateInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"547","locator":"210:37-210:67","path":"relevantPeriod","scope":"OnlineAssessment","type":"Property"}]}},{"localId":"555","locator":"210:92-210:136","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"551","locator":"210:101-210:116","type":"Add","operand":[{"localId":"549","locator":"210:101-210:106","name":"IPSD","type":"ExpressionRef"},{"localId":"550","locator":"210:110-210:116","value":31,"unit":"days","type":"Quantity"}]},"high":{"localId":"554","locator":"210:119-210:135","type":"Add","operand":[{"localId":"552","locator":"210:119-210:124","name":"IPSD","type":"ExpressionRef"},{"localId":"553","locator":"210:128-210:135","value":300,"unit":"days","type":"Quantity"}]}}]},"return":{"localId":"561","locator":"211:5-211:61","expression":{"localId":"560","locator":"211:12-211:61","type":"DateFrom","operand":{"localId":"559","locator":"211:22-211:61","type":"Start","operand":{"localId":"558","locator":"211:31-211:61","path":"relevantPeriod","scope":"OnlineAssessment","type":"Property"}}}}}},{"localId":"580","locator":"127:1-137:5","name":"Numerator 2","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"580","s":[{"value":["","define ","\"Numerator 2\"",":\n  "]},{"r":"579","s":[{"r":"513","s":[{"value":["exists "]},{"r":"512","s":[{"value":["( "]},{"r":"512","s":[{"value":["\"Encounter During Initiation Phase\""]}]},{"value":[" )"]}]}]},{"value":["\n    and "]},{"r":"578","s":[{"value":["( "]},{"r":"578","s":[{"r":"540","s":[{"value":["( "]},{"r":"540","s":[{"value":["\"Two or More Encounters 31 to 300 Days into Continuation and Maintenance Phase\""]}]},{"value":[" )"]}]},{"value":["\n        or "]},{"r":"577","s":[{"value":["( "]},{"r":"577","s":[{"value":["exists "]},{"r":"576","s":[{"value":["( "]},{"r":"576","s":[{"s":[{"r":"542","s":[{"r":"541","s":[{"s":[{"value":["\"Encounter 31 to 300 Days into Continuation and Maintenance Phase\""]}]}]},{"value":[" ","Encounter1"]}]}]},{"value":["\n              "]},{"r":"575","s":[{"value":["with "]},{"r":"565","s":[{"r":"564","s":[{"s":[{"value":["\"Online Assessment 31 to 300 Days into Continuation and Maintenance Phase\""]}]}]},{"value":[" ","Encounter2"]}]},{"value":["\n                such that "]},{"r":"574","s":[{"r":"570","s":[{"r":"567","s":[{"r":"566","s":[{"value":["Encounter1"]}]},{"value":[" is not null"]}]},{"value":["\n                  and "]},{"r":"569","s":[{"r":"568","s":[{"value":["Encounter2"]}]},{"value":[" is not null"]}]}]},{"value":["\n                  and "]},{"r":"573","s":[{"r":"571","s":[{"value":["Encounter1"]}]},{"value":[" ","!~"," "]},{"r":"572","s":[{"value":["Encounter2"]}]}]}]}]}]},{"value":["\n          )"]}]}]},{"value":["\n        )"]}]}]},{"value":["\n    )"]}]}]}]}}],"expression":{"localId":"579","locator":"128:3-137:5","type":"And","operand":[{"localId":"513","locator":"128:3-128:48","type":"Exists","operand":{"localId":"512","locator":"128:10-128:48","name":"Encounter During Initiation Phase","type":"ExpressionRef"}},{"localId":"578","locator":"129:9-137:5","type":"Or","operand":[{"localId":"540","locator":"129:11-129:93","name":"Two or More Encounters 31 to 300 Days into Continuation and Maintenance Phase","type":"ExpressionRef"},{"localId":"577","locator":"130:12-136:9","type":"Exists","operand":{"localId":"576","locator":"130:21-135:11","type":"Query","source":[{"localId":"542","locator":"130:23-130:99","alias":"Encounter1","expression":{"localId":"541","locator":"130:23-130:88","name":"Encounter 31 to 300 Days into Continuation and Maintenance Phase","type":"ExpressionRef"}}],"relationship":[{"localId":"575","locator":"131:15-134:46","alias":"Encounter2","type":"With","expression":{"localId":"564","locator":"131:20-131:93","name":"Online Assessment 31 to 300 Days into Continuation and Maintenance Phase","type":"ExpressionRef"},"suchThat":{"localId":"574","locator":"132:27-134:46","type":"And","operand":[{"localId":"570","locator":"132:27-133:44","type":"And","operand":[{"localId":"567","locator":"132:27-132:48","type":"Not","operand":{"locator":"132:27-132:48","type":"IsNull","operand":{"localId":"566","locator":"132:27-132:36","name":"Encounter1","type":"AliasRef"}}},{"localId":"569","locator":"133:23-133:44","type":"Not","operand":{"locator":"133:23-133:44","type":"IsNull","operand":{"localId":"568","locator":"133:23-133:32","name":"Encounter2","type":"AliasRef"}}}]},{"localId":"573","locator":"134:23-134:46","type":"Not","operand":{"locator":"134:23-134:46","type":"Equivalent","operand":[{"localId":"571","locator":"134:23-134:32","name":"Encounter1","type":"AliasRef"},{"localId":"572","locator":"134:37-134:46","name":"Encounter2","type":"AliasRef"}]}}]}}]}}]}]}},{"localId":"582","locator":"166:1-167:51","name":"SDE Ethnicity","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"582","s":[{"value":["","define ","\"SDE Ethnicity\"",":\n  "]},{"r":"581","s":[{"value":["[","\"Patient Characteristic Ethnicity\"",": "]},{"s":[{"value":["\"Ethnicity\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"581","locator":"167:3-167:51","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicEthnicity","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"167:40-167:50","name":"Ethnicity","type":"ValueSetRef"}}},{"localId":"584","locator":"169:1-170:43","name":"SDE Payer","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"584","s":[{"value":["","define ","\"SDE Payer\"",":\n  "]},{"r":"583","s":[{"value":["[","\"Patient Characteristic Payer\"",": "]},{"s":[{"value":["\"Payer\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"583","locator":"170:3-170:43","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicPayer","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"170:36-170:42","name":"Payer","type":"ValueSetRef"}}},{"localId":"586","locator":"172:1-173:41","name":"SDE Race","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"586","s":[{"value":["","define ","\"SDE Race\"",":\n  "]},{"r":"585","s":[{"value":["[","\"Patient Characteristic Race\"",": "]},{"s":[{"value":["\"Race\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"585","locator":"173:3-173:41","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicRace","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"173:35-173:40","name":"Race","type":"ValueSetRef"}}},{"localId":"588","locator":"175:1-176:58","name":"SDE Sex","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"588","s":[{"value":["","define ","\"SDE Sex\"",":\n  "]},{"r":"587","s":[{"value":["[","\"Patient Characteristic Sex\"",": "]},{"s":[{"value":["\"ONC Administrative Sex\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"587","locator":"176:3-176:58","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicSex","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"176:34-176:57","name":"ONC Administrative Sex","type":"ValueSetRef"}}}]}}},"elm_annotations":{"statements":[{"children":[{"children":[{"children":[{"text":"define \"March 1 of Year Prior to Measurement Period\":\n  "}]},{"children":[{"children":[{"text":"DateTime("}]},{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"children":[{"text":"year from "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"62"}],"node_type":"Start","ref_id":"63"}],"node_type":"DateTimeComponentFrom","ref_id":"64"},{"children":[{"text":" - 1"}],"node_type":"Literal","ref_id":"65"}],"ref_id":"66"},{"children":[{"text":")"}]}],"ref_id":"66"},{"children":[{"text":", 3, 1, 0, 0, 0, 0, 0)"}],"ref_id":"67"}],"node_type":"DateTime","ref_id":"74"}],"ref_id":"75"}],"define_name":"March 1 of Year Prior to Measurement Period"},{"children":[{"children":[{"children":[{"text":"define \"Last Calendar Day of February of Measurement Period\":\n  "}]},{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"DateTime("}]},{"children":[{"children":[{"text":"year from "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"77"}],"node_type":"Start","ref_id":"78"}],"ref_id":"79"},{"children":[{"text":", 3, 1, 23, 59, 59, 0, 0)"}],"ref_id":"80"}],"node_type":"DateTime","ref_id":"87"},{"children":[{"text":")"}]}],"node_type":"DateTime","ref_id":"87"},{"children":[{"text":" - "}]},{"children":[{"children":[{"text":"1 day"}]}],"node_type":"Quantity","ref_id":"88"}],"node_type":"Subtract","ref_id":"89"}],"ref_id":"90"}],"define_name":"Last Calendar Day of February of Measurement Period"},{"children":[{"children":[{"children":[{"text":"define \"Intake Period\":\n  "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"\"March 1 of Year Prior to Measurement Period\""}]}],"ref_id":"76"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"\"Last Calendar Day of February of Measurement Period\""}]}],"ref_id":"91"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"92"}],"ref_id":"93"}],"define_name":"Intake Period"},{"children":[{"children":[{"children":[{"text":"/*Note relevantPeriod.low represents the interval's lower boundary and its usage is to ensure appropriate evaluation of the coalesce.*/define \"ADHD Medication Prescribed During Intake Period and Not Previously on ADHD Medication\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Medication, Order\": "}]},{"children":[{"children":[{"text":"\"Atomoxetine\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"40"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"[\"Medication, Order\": "}]},{"children":[{"children":[{"text":"\"Clonidine\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"41"}],"node_type":"Union","ref_id":"42"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"[\"Medication, Order\": "}]},{"children":[{"children":[{"text":"\"Dexmethylphenidate\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"43"}],"ref_id":"44"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"[\"Medication, Order\": "}]},{"children":[{"children":[{"text":"\"Dextroamphetamine\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"45"}],"node_type":"Union","ref_id":"46"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"[\"Medication, Order\": "}]},{"children":[{"children":[{"text":"\"Lisdexamfetamine\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"47"}],"ref_id":"48"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"[\"Medication, Order\": "}]},{"children":[{"children":[{"text":"\"methamphetamine hydrochloride 5 MG Oral Tablet\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"49"}],"node_type":"Union","ref_id":"50"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"[\"Medication, Order\": "}]},{"children":[{"children":[{"text":"\"Methylphenidate\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"51"}],"ref_id":"52"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"[\"Medication, Order\": "}]},{"children":[{"children":[{"text":"\"Guanfacine\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"53"}],"node_type":"Union","ref_id":"54"},{"children":[{"text":" )"}]}],"node_type":"Union","ref_id":"54"},{"children":[{"text":" ADHDMedications"}]}],"ref_id":"55"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"children":[{"children":[{"text":"ADHDMedications"}]}],"ref_id":"56"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"ref_id":"57"}],"ref_id":"57"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"low"}]}],"node_type":"Property","ref_id":"58"}],"node_type":"Property","ref_id":"58"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"ADHDMedications"}]}],"ref_id":"59"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"60"}],"node_type":"Property","ref_id":"60"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"61"},{"children":[{"text":"during "}],"ref_id":"95"},{"children":[{"children":[{"text":"\"Intake Period\""}]}],"node_type":"ExpressionRef","ref_id":"94"}],"ref_id":"95"}],"ref_id":"95"}],"node_type":"Query","ref_id":"96"},{"children":[{"text":" )"}]}],"node_type":"Query","ref_id":"96"},{"children":[{"text":" ADHDMedicationOrder"}]}],"ref_id":"97"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"without "}]},{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Medication, Active\": "}]},{"children":[{"children":[{"text":"\"Atomoxetine\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"98"},{"children":[{"text":"\n      union "}]},{"children":[{"children":[{"text":"[\"Medication, Active\": "}]},{"children":[{"children":[{"text":"\"Clonidine\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"99"}],"node_type":"Union","ref_id":"100"},{"children":[{"text":"\n      union "}]},{"children":[{"children":[{"text":"[\"Medication, Active\": "}]},{"children":[{"children":[{"text":"\"Dexmethylphenidate\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"101"}],"ref_id":"102"},{"children":[{"text":"\n      union "}]},{"children":[{"children":[{"text":"[\"Medication, Active\": "}]},{"children":[{"children":[{"text":"\"Dextroamphetamine\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"103"}],"node_type":"Union","ref_id":"104"},{"children":[{"text":"\n      union "}]},{"children":[{"children":[{"text":"[\"Medication, Active\": "}]},{"children":[{"children":[{"text":"\"Lisdexamfetamine\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"105"}],"ref_id":"106"},{"children":[{"text":"\n      union "}]},{"children":[{"children":[{"text":"[\"Medication, Active\": "}]},{"children":[{"children":[{"text":"\"methamphetamine hydrochloride 5 MG Oral Tablet\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"107"}],"node_type":"Union","ref_id":"108"},{"children":[{"text":"\n      union "}]},{"children":[{"children":[{"text":"[\"Medication, Active\": "}]},{"children":[{"children":[{"text":"\"Methylphenidate\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"109"}],"ref_id":"110"},{"children":[{"text":"\n      union "}]},{"children":[{"children":[{"text":"[\"Medication, Active\": "}]},{"children":[{"children":[{"text":"\"Guanfacine\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"111"}],"node_type":"Union","ref_id":"112"},{"children":[{"text":" )"}]}],"node_type":"Union","ref_id":"112"},{"children":[{"text":" ActiveADHDMedication"}]}],"ref_id":"113"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"114"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"ToDateInterval\" ( "}]},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"115"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\" ( "}]},{"children":[{"children":[{"children":[{"text":"ActiveADHDMedication"}]}],"ref_id":"116"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"117"}],"node_type":"Property","ref_id":"117"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"ActiveADHDMedication"}]}],"ref_id":"118"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"119"}],"node_type":"Property","ref_id":"119"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"120"}],"node_type":"FunctionRef","ref_id":"120"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"121"}],"node_type":"FunctionRef","ref_id":"121"},{"children":[{"text":" overlaps "}],"node_type":"Overlaps","ref_id":"139"},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"children":[{"children":[{"text":"ADHDMedicationOrder"}]}],"ref_id":"122"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"ref_id":"123"}],"ref_id":"123"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"low"}]}],"node_type":"Property","ref_id":"124"}],"node_type":"Property","ref_id":"124"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"ADHDMedicationOrder"}]}],"ref_id":"125"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"126"}],"node_type":"Property","ref_id":"126"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"127"}],"node_type":"DateFrom","ref_id":"128"},{"children":[{"text":"- "}]},{"children":[{"children":[{"text":"120 days"}]}],"node_type":"Quantity","ref_id":"129"}],"ref_id":"130"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"children":[{"children":[{"text":"ADHDMedicationOrder"}]}],"ref_id":"131"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"ref_id":"132"}],"ref_id":"132"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"low"}]}],"node_type":"Property","ref_id":"133"}],"node_type":"Property","ref_id":"133"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"ADHDMedicationOrder"}]}],"ref_id":"134"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"135"}],"node_type":"Property","ref_id":"135"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"136"}],"ref_id":"137"},{"children":[{"text":")"}]}],"node_type":"Interval","ref_id":"138"}],"node_type":"Overlaps","ref_id":"139"}],"ref_id":"140"},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"children":[{"text":"relevantPeriod"}]}],"ref_id":"144"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"low"}]}],"node_type":"Property","ref_id":"145"}],"node_type":"Property","ref_id":"145"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"IdentifierRef","ref_id":"146"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"147"},{"children":[{"text":"asc"}]}],"ref_id":"148"}],"ref_id":"149"}],"node_type":"Query","ref_id":"150"}],"ref_id":"151"}],"define_name":"ADHD Medication Prescribed During Intake Period and Not Previously on ADHD Medication"},{"children":[{"children":[{"children":[{"text":"define \"First ADHD Medication Prescribed During Intake Period\":\n  "}]},{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"text":"\"ADHD Medication Prescribed During Intake Period and Not Previously on ADHD Medication\""}]}],"ref_id":"152"},{"children":[{"text":")"}]}],"node_type":"First","ref_id":"153"}],"ref_id":"154"}],"define_name":"First ADHD Medication Prescribed During Intake Period"},{"children":[{"children":[{"children":[{"text":"/*Index Prescription Start Date (IPSD)*/define \"IPSD\":\n  "}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"First ADHD Medication Prescribed During Intake Period\""}]}],"ref_id":"155"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"ref_id":"156"}],"ref_id":"156"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"low"}]}],"node_type":"Property","ref_id":"157"}],"node_type":"Property","ref_id":"157"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"\"First ADHD Medication Prescribed During Intake Period\""}]}],"ref_id":"158"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"159"}],"node_type":"Property","ref_id":"159"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"160"}],"node_type":"DateFrom","ref_id":"161"}],"ref_id":"162"}],"define_name":"IPSD"},{"children":[{"children":[{"children":[{"text":"define \"Qualifying Encounter\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Office Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"176"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Home Healthcare Services\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"177"}],"node_type":"Union","ref_id":"178"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Preventive Care, Established Office Visit, 0 to 17\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"179"}],"ref_id":"180"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Preventive Care Services, Initial Office Visit, 0 to 17\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"181"}],"node_type":"Union","ref_id":"182"},{"children":[{"text":" )"}]}],"node_type":"Union","ref_id":"182"},{"children":[{"text":" ValidEncounters"}]}],"ref_id":"183"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"184"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"ToDateInterval\" ( "}]},{"children":[{"children":[{"children":[{"text":"ValidEncounters"}]}],"ref_id":"185"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"186"}],"node_type":"Property","ref_id":"186"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"187"}],"node_type":"FunctionRef","ref_id":"187"},{"children":[{"text":" during day of "}],"ref_id":"193"},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"children":[{"text":"\"IPSD\""}]}],"node_type":"ExpressionRef","ref_id":"188"},{"children":[{"text":" - "}]},{"children":[{"children":[{"text":"6 months"}]}],"node_type":"Quantity","ref_id":"189"}],"ref_id":"190"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"\"IPSD\""}]}],"ref_id":"191"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"192"}],"ref_id":"193"}],"ref_id":"193"}],"node_type":"Query","ref_id":"194"}],"ref_id":"195"}],"define_name":"Qualifying Encounter"},{"children":[{"children":[{"children":[{"text":"define \"Inpatient Stay with Qualifying Diagnosis\":\n  "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Encounter Inpatient\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"202"}],"node_type":"Retrieve","ref_id":"202"},{"children":[{"text":" InpatientStay"}]}],"ref_id":"203"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"InpatientStay.diagnoses"}]}]}],"node_type":"Property","ref_id":"204"},{"children":[{"text":" EncounterDiagnoses"}]}],"ref_id":"205"}]},{"children":[{"text":"\n          "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"EncounterDiagnoses"}]}],"ref_id":"206"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"rank"}]}],"node_type":"Property","ref_id":"207"}],"node_type":"Property","ref_id":"207"},{"children":[{"text":" = 1"}],"node_type":"Literal","ref_id":"208"}],"node_type":"Equal","ref_id":"209"},{"children":[{"text":"\n              and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"EncounterDiagnoses"}]}],"ref_id":"210"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"211"}],"ref_id":"211"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Mental Behavioral and Neurodevelopmental Disorders\""}]}],"ref_id":"212"}],"node_type":"InValueSet","ref_id":"213"}],"ref_id":"214"},{"children":[{"text":"\n          )"}]}],"ref_id":"214"}],"ref_id":"214"}],"node_type":"Query","ref_id":"215"},{"children":[{"text":"\n      )"}]}],"node_type":"Query","ref_id":"215"}],"ref_id":"216"}],"ref_id":"216"}],"node_type":"Query","ref_id":"217"},{"children":[{"text":"\n  )"}]}],"node_type":"Query","ref_id":"217"}],"ref_id":"218"}],"define_name":"Inpatient Stay with Qualifying Diagnosis"},{"children":[{"children":[{"children":[{"text":"define \"Inpatient Stay with Qualifying Diagnosis During Initiation Phase\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Inpatient Stay with Qualifying Diagnosis\""}]}]}],"node_type":"ExpressionRef","ref_id":"219"},{"children":[{"text":" InpatientStay"}]}],"ref_id":"220"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"221"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"ToDateInterval\" ( "}]},{"children":[{"children":[{"children":[{"text":"InpatientStay"}]}],"ref_id":"222"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"223"}],"node_type":"Property","ref_id":"223"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"224"}],"node_type":"FunctionRef","ref_id":"224"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"starts "}]},{"children":[{"children":[{"text":"30 days"}]}],"node_type":"Quantity","ref_id":"226"},{"children":[{"text":" or less after day of"}]}],"ref_id":"227"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"\"IPSD\""}]}],"node_type":"ExpressionRef","ref_id":"225"}],"ref_id":"227"}],"ref_id":"227"}],"node_type":"Query","ref_id":"228"}],"ref_id":"229"}],"define_name":"Inpatient Stay with Qualifying Diagnosis During Initiation Phase"},{"children":[{"children":[{"children":[{"text":"define \"Initial Population 1\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"AgeInYearsAt("}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"\"Intake Period\""}]}],"node_type":"ExpressionRef","ref_id":"163"}],"node_type":"Start","ref_id":"164"}],"node_type":"DateFrom","ref_id":"165"},{"children":[{"text":")"}]}],"node_type":"CalculateAgeAt","ref_id":"166"},{"children":[{"text":"\u003e= 6"}],"node_type":"Literal","ref_id":"167"}],"node_type":"GreaterOrEqual","ref_id":"168"},{"children":[{"text":"\n    and "}]},{"children":[{"children":[{"children":[{"text":"AgeInYearsAt("}]},{"children":[{"children":[{"text":"date from \n      "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"\"Intake Period\""}]}],"node_type":"ExpressionRef","ref_id":"169"}],"node_type":"End","ref_id":"170"}],"node_type":"DateFrom","ref_id":"171"},{"children":[{"text":"\n    )"}]}],"node_type":"CalculateAgeAt","ref_id":"172"},{"children":[{"text":"\u003c= 12"}],"node_type":"Literal","ref_id":"173"}],"node_type":"LessOrEqual","ref_id":"174"}],"node_type":"And","ref_id":"175"},{"children":[{"text":"\n    and "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"\"Qualifying Encounter\""}]}],"node_type":"ExpressionRef","ref_id":"196"}],"node_type":"Exists","ref_id":"197"}],"node_type":"And","ref_id":"198"},{"children":[{"text":"\n    and "}]},{"children":[{"children":[{"children":[{"text":"\"First ADHD Medication Prescribed During Intake Period\""}]}],"node_type":"ExpressionRef","ref_id":"199"},{"children":[{"text":" is not null"}]}],"node_type":"Not","ref_id":"200"}],"node_type":"And","ref_id":"201"},{"children":[{"text":"\n    and "}]},{"children":[{"children":[{"text":"not "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"\"Inpatient Stay with Qualifying Diagnosis During Initiation Phase\""}]}],"node_type":"ExpressionRef","ref_id":"230"}],"node_type":"Exists","ref_id":"231"}],"node_type":"Not","ref_id":"232"}],"node_type":"And","ref_id":"233"}],"ref_id":"234"}],"define_name":"Initial Population 1"},{"children":[{"children":[{"children":[{"text":"define \"Denominator 1\":\n  "}]},{"children":[{"children":[{"text":"\"Initial Population 1\""}]}],"node_type":"ExpressionRef","ref_id":"235"}],"ref_id":"236"}],"define_name":"Denominator 1"},{"children":[{"children":[{"children":[{"text":"define \"ADHD Medications Taken on IPSD or During Continuation and Maintenance Phase\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"text":"CMD"}]}],"ref_id":"257"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"RolloutIntervals\" ( "}]},{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Medication, Order\": "}]},{"children":[{"children":[{"text":"\"Atomoxetine\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"258"}],"node_type":"Retrieve","ref_id":"258"},{"children":[{"text":" AtomoxetineMed"}]}],"ref_id":"259"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"return all "}]},{"children":[{"children":[{"text":"{\n          "}]},{"children":[{"children":[{"text":"period: "}]},{"children":[{"children":[{"children":[{"text":"CMD"}]}],"ref_id":"260"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"MedicationOrderPeriod\" ( "}]},{"children":[{"children":[{"text":"AtomoxetineMed"}]}],"node_type":"AliasRef","ref_id":"261"},{"children":[{"text":" )"}]}],"ref_id":"262"}],"ref_id":"262"}]},{"children":[{"text":",\n          "}]},{"children":[{"children":[{"text":"periodStart: "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"CMD"}]}],"ref_id":"263"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"MedicationOrderPeriod\" ( "}]},{"children":[{"children":[{"text":"AtomoxetineMed"}]}],"node_type":"AliasRef","ref_id":"264"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"265"}],"node_type":"FunctionRef","ref_id":"265"}],"ref_id":"266"}]},{"children":[{"text":"\n        }"}]}],"node_type":"Tuple","ref_id":"267"}],"ref_id":"268"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"periodStart"}]}],"ref_id":"269"}],"ref_id":"270"}],"ref_id":"271"}],"node_type":"Query","ref_id":"272"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"272"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"Query","ref_id":"273"}],"node_type":"Query","ref_id":"273"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"274"}],"node_type":"FunctionRef","ref_id":"274"},{"children":[{"text":"\n  )"}]}],"node_type":"FunctionRef","ref_id":"274"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"text":"CMD"}]}],"ref_id":"275"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"RolloutIntervals\" ( "}]},{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Medication, Order\": "}]},{"children":[{"children":[{"text":"\"Clonidine\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"276"}],"node_type":"Retrieve","ref_id":"276"},{"children":[{"text":" ClonidineMed"}]}],"ref_id":"277"}]},{"children":[{"text":"\n          "}]},{"children":[{"children":[{"text":"return all "}]},{"children":[{"children":[{"text":"{\n            "}]},{"children":[{"children":[{"text":"period: "}]},{"children":[{"children":[{"children":[{"text":"CMD"}]}],"ref_id":"278"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"MedicationOrderPeriod\" ( "}]},{"children":[{"children":[{"text":"ClonidineMed"}]}],"node_type":"AliasRef","ref_id":"279"},{"children":[{"text":" )"}]}],"ref_id":"280"}],"ref_id":"280"}]},{"children":[{"text":",\n            "}]},{"children":[{"children":[{"text":"periodStart: "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"CMD"}]}],"ref_id":"281"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"MedicationOrderPeriod\" ( "}]},{"children":[{"children":[{"text":"ClonidineMed"}]}],"node_type":"AliasRef","ref_id":"282"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"283"}],"node_type":"FunctionRef","ref_id":"283"}],"ref_id":"284"}]},{"children":[{"text":"\n          }"}]}],"node_type":"Tuple","ref_id":"285"}],"ref_id":"286"},{"children":[{"text":"\n          "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"periodStart"}]}],"ref_id":"287"}],"ref_id":"288"}],"ref_id":"289"}],"node_type":"Query","ref_id":"290"},{"children":[{"text":"\n      )"}]}],"node_type":"Query","ref_id":"290"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"Query","ref_id":"291"}],"node_type":"Query","ref_id":"291"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"292"}],"node_type":"FunctionRef","ref_id":"292"},{"children":[{"text":"\n    )"}]}],"node_type":"FunctionRef","ref_id":"292"}],"node_type":"Union","ref_id":"293"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"text":"CMD"}]}],"ref_id":"294"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"RolloutIntervals\" ( "}]},{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Medication, Order\": "}]},{"children":[{"children":[{"text":"\"Dexmethylphenidate\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"295"}],"node_type":"Retrieve","ref_id":"295"},{"children":[{"text":" DexmethylphenidateMed"}]}],"ref_id":"296"}]},{"children":[{"text":"\n          "}]},{"children":[{"children":[{"text":"return all "}]},{"children":[{"children":[{"text":"{\n            "}]},{"children":[{"children":[{"text":"period: "}]},{"children":[{"children":[{"children":[{"text":"CMD"}]}],"ref_id":"297"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"MedicationOrderPeriod\" ( "}]},{"children":[{"children":[{"text":"DexmethylphenidateMed"}]}],"node_type":"AliasRef","ref_id":"298"},{"children":[{"text":" )"}]}],"ref_id":"299"}],"ref_id":"299"}]},{"children":[{"text":",\n            "}]},{"children":[{"children":[{"text":"periodStart: "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"CMD"}]}],"ref_id":"300"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"MedicationOrderPeriod\" ( "}]},{"children":[{"children":[{"text":"DexmethylphenidateMed"}]}],"node_type":"AliasRef","ref_id":"301"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"302"}],"node_type":"FunctionRef","ref_id":"302"}],"ref_id":"303"}]},{"children":[{"text":"\n          }"}]}],"node_type":"Tuple","ref_id":"304"}],"ref_id":"305"},{"children":[{"text":"\n          "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"periodStart"}]}],"ref_id":"306"}],"ref_id":"307"}],"ref_id":"308"}],"node_type":"Query","ref_id":"309"},{"children":[{"text":"\n      )"}]}],"node_type":"Query","ref_id":"309"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"Query","ref_id":"310"}],"node_type":"Query","ref_id":"310"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"311"}],"node_type":"FunctionRef","ref_id":"311"},{"children":[{"text":"\n    )"}]}],"node_type":"FunctionRef","ref_id":"311"}],"ref_id":"312"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"text":"CMD"}]}],"ref_id":"313"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"RolloutIntervals\" ( "}]},{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Medication, Order\": "}]},{"children":[{"children":[{"text":"\"Dextroamphetamine\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"314"}],"node_type":"Retrieve","ref_id":"314"},{"children":[{"text":" DextroamphetamineMed"}]}],"ref_id":"315"}]},{"children":[{"text":"\n          "}]},{"children":[{"children":[{"text":"return all "}]},{"children":[{"children":[{"text":"{\n            "}]},{"children":[{"children":[{"text":"period: "}]},{"children":[{"children":[{"children":[{"text":"CMD"}]}],"ref_id":"316"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"MedicationOrderPeriod\" ( "}]},{"children":[{"children":[{"text":"DextroamphetamineMed"}]}],"node_type":"AliasRef","ref_id":"317"},{"children":[{"text":" )"}]}],"ref_id":"318"}],"ref_id":"318"}]},{"children":[{"text":",\n            "}]},{"children":[{"children":[{"text":"periodStart: "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"CMD"}]}],"ref_id":"319"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"MedicationOrderPeriod\" ( "}]},{"children":[{"children":[{"text":"DextroamphetamineMed"}]}],"node_type":"AliasRef","ref_id":"320"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"321"}],"node_type":"FunctionRef","ref_id":"321"}],"ref_id":"322"}]},{"children":[{"text":"\n          }"}]}],"node_type":"Tuple","ref_id":"323"}],"ref_id":"324"},{"children":[{"text":"\n          "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"periodStart"}]}],"ref_id":"325"}],"ref_id":"326"}],"ref_id":"327"}],"node_type":"Query","ref_id":"328"},{"children":[{"text":"\n      )"}]}],"node_type":"Query","ref_id":"328"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"Query","ref_id":"329"}],"node_type":"Query","ref_id":"329"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"330"}],"node_type":"FunctionRef","ref_id":"330"},{"children":[{"text":"\n    )"}]}],"node_type":"FunctionRef","ref_id":"330"}],"node_type":"Union","ref_id":"331"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"text":"CMD"}]}],"ref_id":"332"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"RolloutIntervals\" ( "}]},{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Medication, Order\": "}]},{"children":[{"children":[{"text":"\"Lisdexamfetamine\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"333"}],"node_type":"Retrieve","ref_id":"333"},{"children":[{"text":" LisdexamfetamineMed"}]}],"ref_id":"334"}]},{"children":[{"text":"\n          "}]},{"children":[{"children":[{"text":"return all "}]},{"children":[{"children":[{"text":"{\n            "}]},{"children":[{"children":[{"text":"period: "}]},{"children":[{"children":[{"children":[{"text":"CMD"}]}],"ref_id":"335"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"MedicationOrderPeriod\" ( "}]},{"children":[{"children":[{"text":"LisdexamfetamineMed"}]}],"node_type":"AliasRef","ref_id":"336"},{"children":[{"text":" )"}]}],"ref_id":"337"}],"ref_id":"337"}]},{"children":[{"text":",\n            "}]},{"children":[{"children":[{"text":"periodStart: "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"CMD"}]}],"ref_id":"338"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"MedicationOrderPeriod\" ( "}]},{"children":[{"children":[{"text":"LisdexamfetamineMed"}]}],"node_type":"AliasRef","ref_id":"339"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"340"}],"node_type":"FunctionRef","ref_id":"340"}],"ref_id":"341"}]},{"children":[{"text":"\n          }"}]}],"node_type":"Tuple","ref_id":"342"}],"ref_id":"343"},{"children":[{"text":"\n          "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"periodStart"}]}],"ref_id":"344"}],"ref_id":"345"}],"ref_id":"346"}],"node_type":"Query","ref_id":"347"},{"children":[{"text":"\n      )"}]}],"node_type":"Query","ref_id":"347"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"Query","ref_id":"348"}],"node_type":"Query","ref_id":"348"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"349"}],"node_type":"FunctionRef","ref_id":"349"},{"children":[{"text":"\n    )"}]}],"node_type":"FunctionRef","ref_id":"349"}],"ref_id":"350"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"text":"CMD"}]}],"ref_id":"351"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"RolloutIntervals\" ( "}]},{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Medication, Order\": "}]},{"children":[{"children":[{"text":"\"Methylphenidate\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"352"}],"node_type":"Retrieve","ref_id":"352"},{"children":[{"text":" MethylphenidateMed"}]}],"ref_id":"353"}]},{"children":[{"text":"\n          "}]},{"children":[{"children":[{"text":"return all "}]},{"children":[{"children":[{"text":"{\n            "}]},{"children":[{"children":[{"text":"period: "}]},{"children":[{"children":[{"children":[{"text":"CMD"}]}],"ref_id":"354"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"MedicationOrderPeriod\" ( "}]},{"children":[{"children":[{"text":"MethylphenidateMed"}]}],"node_type":"AliasRef","ref_id":"355"},{"children":[{"text":" )"}]}],"ref_id":"356"}],"ref_id":"356"}]},{"children":[{"text":",\n            "}]},{"children":[{"children":[{"text":"periodStart: "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"CMD"}]}],"ref_id":"357"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"MedicationOrderPeriod\" ( "}]},{"children":[{"children":[{"text":"MethylphenidateMed"}]}],"node_type":"AliasRef","ref_id":"358"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"359"}],"node_type":"FunctionRef","ref_id":"359"}],"ref_id":"360"}]},{"children":[{"text":"\n          }"}]}],"node_type":"Tuple","ref_id":"361"}],"ref_id":"362"},{"children":[{"text":"\n          "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"periodStart"}]}],"ref_id":"363"}],"ref_id":"364"}],"ref_id":"365"}],"node_type":"Query","ref_id":"366"},{"children":[{"text":"\n      )"}]}],"node_type":"Query","ref_id":"366"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"Query","ref_id":"367"}],"node_type":"Query","ref_id":"367"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"368"}],"node_type":"FunctionRef","ref_id":"368"},{"children":[{"text":"\n    )"}]}],"node_type":"FunctionRef","ref_id":"368"}],"node_type":"Union","ref_id":"369"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"text":"CMD"}]}],"ref_id":"370"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"RolloutIntervals\" ( "}]},{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Medication, Order\": "}]},{"children":[{"children":[{"text":"\"Guanfacine\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"371"}],"node_type":"Retrieve","ref_id":"371"},{"children":[{"text":" GuanfacineMed"}]}],"ref_id":"372"}]},{"children":[{"text":"\n          "}]},{"children":[{"children":[{"text":"return all "}]},{"children":[{"children":[{"text":"{\n            "}]},{"children":[{"children":[{"text":"period: "}]},{"children":[{"children":[{"children":[{"text":"CMD"}]}],"ref_id":"373"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"MedicationOrderPeriod\" ( "}]},{"children":[{"children":[{"text":"GuanfacineMed"}]}],"node_type":"AliasRef","ref_id":"374"},{"children":[{"text":" )"}]}],"ref_id":"375"}],"ref_id":"375"}]},{"children":[{"text":",\n            "}]},{"children":[{"children":[{"text":"periodStart: "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"CMD"}]}],"ref_id":"376"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"MedicationOrderPeriod\" ( "}]},{"children":[{"children":[{"text":"GuanfacineMed"}]}],"node_type":"AliasRef","ref_id":"377"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"378"}],"node_type":"FunctionRef","ref_id":"378"}],"ref_id":"379"}]},{"children":[{"text":"\n          }"}]}],"node_type":"Tuple","ref_id":"380"}],"ref_id":"381"},{"children":[{"text":"\n          "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"periodStart"}]}],"ref_id":"382"}],"ref_id":"383"}],"ref_id":"384"}],"node_type":"Query","ref_id":"385"},{"children":[{"text":"\n      )"}]}],"node_type":"Query","ref_id":"385"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"Query","ref_id":"386"}],"node_type":"Query","ref_id":"386"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"387"}],"node_type":"FunctionRef","ref_id":"387"},{"children":[{"text":"\n    )"}]}],"node_type":"FunctionRef","ref_id":"387"}],"ref_id":"388"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"text":"CMD"}]}],"ref_id":"389"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"RolloutIntervals\" ( "}]},{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Medication, Order\": "}]},{"children":[{"children":[{"text":"\"methamphetamine hydrochloride 5 MG Oral Tablet\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"390"}],"node_type":"Retrieve","ref_id":"390"},{"children":[{"text":" MethamphetamineMed"}]}],"ref_id":"391"}]},{"children":[{"text":"\n          "}]},{"children":[{"children":[{"text":"return all "}]},{"children":[{"children":[{"text":"{\n            "}]},{"children":[{"children":[{"text":"period: "}]},{"children":[{"children":[{"children":[{"text":"CMD"}]}],"ref_id":"392"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"MedicationOrderPeriod\" ( "}]},{"children":[{"children":[{"text":"MethamphetamineMed"}]}],"node_type":"AliasRef","ref_id":"393"},{"children":[{"text":" )"}]}],"ref_id":"394"}],"ref_id":"394"}]},{"children":[{"text":",\n            "}]},{"children":[{"children":[{"text":"periodStart: "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"CMD"}]}],"ref_id":"395"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"MedicationOrderPeriod\" ( "}]},{"children":[{"children":[{"text":"MethamphetamineMed"}]}],"node_type":"AliasRef","ref_id":"396"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"397"}],"node_type":"FunctionRef","ref_id":"397"}],"ref_id":"398"}]},{"children":[{"text":"\n          }"}]}],"node_type":"Tuple","ref_id":"399"}],"ref_id":"400"},{"children":[{"text":"\n          "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"periodStart"}]}],"ref_id":"401"}],"ref_id":"402"}],"ref_id":"403"}],"node_type":"Query","ref_id":"404"},{"children":[{"text":"\n      )"}]}],"node_type":"Query","ref_id":"404"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"Query","ref_id":"405"}],"node_type":"Query","ref_id":"405"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"406"}],"node_type":"FunctionRef","ref_id":"406"},{"children":[{"text":"\n    )"}]}],"node_type":"FunctionRef","ref_id":"406"}],"node_type":"Union","ref_id":"407"},{"children":[{"text":" )"}]}],"node_type":"Union","ref_id":"407"},{"children":[{"text":" ADHDMedication"}]}],"ref_id":"408"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"IPSDAndContinuationMaintenancePhase: "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"\"IPSD\""}]}],"ref_id":"409"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"\"IPSD\""}]}],"node_type":"ExpressionRef","ref_id":"410"},{"children":[{"text":" + "}]},{"children":[{"children":[{"text":"300 days"}]}],"node_type":"Quantity","ref_id":"411"}],"ref_id":"412"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"413"}],"ref_id":"414"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return all "}]},{"children":[{"children":[{"children":[{"text":"ADHDMedication"}]}],"node_type":"AliasRef","ref_id":"415"},{"children":[{"text":"\n      intersect "}]},{"children":[{"children":[{"text":"IPSDAndContinuationMaintenancePhase"}]}],"node_type":"QueryLetRef","ref_id":"416"}],"node_type":"Intersect","ref_id":"417"}],"ref_id":"418"}],"node_type":"Query","ref_id":"419"}],"ref_id":"420"}],"define_name":"ADHD Medications Taken on IPSD or During Continuation and Maintenance Phase"},{"children":[{"children":[{"children":[{"text":"define \"ADHD Cumulative Medication Duration\":\n  "}]},{"children":[{"children":[{"children":[{"text":"CMD"}]}],"ref_id":"256"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"CumulativeDuration\" ( "}]},{"children":[{"children":[{"text":"\"ADHD Medications Taken on IPSD or During Continuation and Maintenance Phase\""}]}],"node_type":"ExpressionRef","ref_id":"421"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"422"}],"node_type":"FunctionRef","ref_id":"422"}],"ref_id":"423"}],"define_name":"ADHD Cumulative Medication Duration"},{"children":[{"children":[{"children":[{"text":"define \"Has ADHD Cumulative Medication Duration Greater Than or Equal to 210 Days\":\n  "}]},{"children":[{"children":[{"children":[{"text":"\"ADHD Cumulative Medication Duration\""}]}],"node_type":"ExpressionRef","ref_id":"424"},{"children":[{"text":" \u003e= 210"}],"node_type":"Literal","ref_id":"425"}],"node_type":"GreaterOrEqual","ref_id":"426"}],"ref_id":"427"}],"define_name":"Has ADHD Cumulative Medication Duration Greater Than or Equal to 210 Days"},{"children":[{"children":[{"children":[{"text":"define \"Inpatient Stay with Qualifying Diagnosis During Continuation and Maintenance Phase\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Inpatient Stay with Qualifying Diagnosis\""}]}]}],"node_type":"ExpressionRef","ref_id":"430"},{"children":[{"text":" InpatientStay"}]}],"ref_id":"431"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"432"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"ToDateInterval\" ( "}]},{"children":[{"children":[{"children":[{"text":"InpatientStay"}]}],"ref_id":"433"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"434"}],"node_type":"Property","ref_id":"434"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"435"}],"node_type":"FunctionRef","ref_id":"435"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"starts "}]},{"children":[{"children":[{"text":"300 days"}]}],"node_type":"Quantity","ref_id":"437"},{"children":[{"text":" or less after day of"}]}],"ref_id":"438"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"\"IPSD\""}]}],"node_type":"ExpressionRef","ref_id":"436"}],"ref_id":"438"}],"ref_id":"438"}],"node_type":"Query","ref_id":"439"}],"ref_id":"440"}],"define_name":"Inpatient Stay with Qualifying Diagnosis During Continuation and Maintenance Phase"},{"children":[{"children":[{"children":[{"text":"define \"Initial Population 2\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"AgeInYearsAt("}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"\"Intake Period\""}]}],"node_type":"ExpressionRef","ref_id":"237"}],"node_type":"Start","ref_id":"238"}],"node_type":"DateFrom","ref_id":"239"},{"children":[{"text":")"}]}],"node_type":"CalculateAgeAt","ref_id":"240"},{"children":[{"text":"\u003e= 6"}],"node_type":"Literal","ref_id":"241"}],"node_type":"GreaterOrEqual","ref_id":"242"},{"children":[{"text":"\n    and "}]},{"children":[{"children":[{"children":[{"text":"AgeInYearsAt("}]},{"children":[{"children":[{"text":"date from \n      "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"\"Intake Period\""}]}],"node_type":"ExpressionRef","ref_id":"243"}],"node_type":"End","ref_id":"244"}],"node_type":"DateFrom","ref_id":"245"},{"children":[{"text":"\n    )"}]}],"node_type":"CalculateAgeAt","ref_id":"246"},{"children":[{"text":"\u003c= 12"}],"node_type":"Literal","ref_id":"247"}],"node_type":"LessOrEqual","ref_id":"248"}],"node_type":"And","ref_id":"249"},{"children":[{"text":"\n    and "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"\"Qualifying Encounter\""}]}],"node_type":"ExpressionRef","ref_id":"250"}],"node_type":"Exists","ref_id":"251"}],"node_type":"And","ref_id":"252"},{"children":[{"text":"\n    and "}]},{"children":[{"children":[{"children":[{"text":"\"First ADHD Medication Prescribed During Intake Period\""}]}],"node_type":"ExpressionRef","ref_id":"253"},{"children":[{"text":" is not null"}]}],"node_type":"Not","ref_id":"254"}],"node_type":"And","ref_id":"255"},{"children":[{"text":"\n    and "}]},{"children":[{"children":[{"text":"\"Has ADHD Cumulative Medication Duration Greater Than or Equal to 210 Days\""}]}],"node_type":"ExpressionRef","ref_id":"428"}],"node_type":"And","ref_id":"429"},{"children":[{"text":"\n    and "}]},{"children":[{"children":[{"text":"not "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"\"Inpatient Stay with Qualifying Diagnosis During Continuation and Maintenance Phase\""}]}],"node_type":"ExpressionRef","ref_id":"441"}],"node_type":"Exists","ref_id":"442"}],"node_type":"Not","ref_id":"443"}],"node_type":"And","ref_id":"444"}],"ref_id":"445"}],"define_name":"Initial Population 2"},{"children":[{"children":[{"children":[{"text":"define \"Denominator 2\":\n  "}]},{"children":[{"children":[{"text":"\"Initial Population 2\""}]}],"node_type":"ExpressionRef","ref_id":"446"}],"ref_id":"447"}],"define_name":"Denominator 2"},{"children":[{"children":[{"children":[{"text":"define \"Narcolepsy Exclusion\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Diagnosis\": "}]},{"children":[{"children":[{"text":"\"Narcolepsy\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"450"}],"node_type":"Retrieve","ref_id":"450"},{"children":[{"text":" Narcolepsy"}]}],"ref_id":"451"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Narcolepsy"}]}],"ref_id":"452"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"prevalencePeriod"}]}],"node_type":"Property","ref_id":"453"}],"node_type":"Property","ref_id":"453"},{"children":[{"text":" starts on or before \n    end "}],"ref_id":"455"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"454"}],"ref_id":"455"}],"ref_id":"455"}],"node_type":"Query","ref_id":"456"}],"ref_id":"457"}],"define_name":"Narcolepsy Exclusion"},{"children":[{"children":[{"children":[{"text":"define \"Denominator Exclusions\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Hospice"}]}],"ref_id":"448"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"Has Hospice Services\""}]}],"node_type":"ExpressionRef","ref_id":"449"}],"node_type":"ExpressionRef","ref_id":"449"},{"children":[{"text":"\n    or "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"\"Narcolepsy Exclusion\""}]}],"node_type":"ExpressionRef","ref_id":"458"},{"children":[{"text":" )"}]}],"node_type":"ExpressionRef","ref_id":"458"}],"node_type":"Exists","ref_id":"459"}],"node_type":"Or","ref_id":"460"}],"ref_id":"461"}],"define_name":"Denominator Exclusions"},{"children":[{"children":[{"children":[{"text":"define \"Qualifying Numerator Encounter\":\n  "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Office Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"462"},{"children":[{"text":"\n      union "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Initial Hospital Observation Care\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"463"}],"node_type":"Union","ref_id":"464"},{"children":[{"text":"\n      union "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Preventive Care Services Group Counseling\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"465"}],"ref_id":"466"},{"children":[{"text":"\n      union "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Behavioral Health Follow up Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"467"}],"node_type":"Union","ref_id":"468"},{"children":[{"text":"\n      union "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Preventive Care Services Individual Counseling\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"469"}],"ref_id":"470"},{"children":[{"text":"\n      union "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Psychotherapy and Pharmacologic Management\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"471"}],"node_type":"Retrieve","ref_id":"471"},{"children":[{"text":" PsychPharmManagement"}]}],"ref_id":"472"}]},{"children":[{"text":"\n          "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"PsychPharmManagement.facilityLocations"}]}]}],"node_type":"Property","ref_id":"473"},{"children":[{"text":" Location"}]}],"ref_id":"474"}]},{"children":[{"text":"\n              "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Location"}]}],"ref_id":"475"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"476"}],"ref_id":"476"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Ambulatory\""}]}],"ref_id":"477"}],"ref_id":"478"}],"ref_id":"478"}],"node_type":"Query","ref_id":"479"},{"children":[{"text":"\n          )"}]}],"node_type":"Query","ref_id":"479"}],"ref_id":"480"}],"ref_id":"480"}],"node_type":"Query","ref_id":"481"},{"children":[{"text":"\n      )"}]}],"node_type":"Query","ref_id":"481"}],"node_type":"Union","ref_id":"482"},{"children":[{"text":"\n      union "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Outpatient Consultation\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"483"}],"ref_id":"484"},{"children":[{"text":"\n      union "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Home Healthcare Services\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"485"}],"node_type":"Union","ref_id":"486"},{"children":[{"text":"\n      union "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Preventive Care Services, Initial Office Visit, 0 to 17\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"487"}],"ref_id":"488"},{"children":[{"text":"\n      union "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Preventive Care, Established Office Visit, 0 to 17\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"489"}],"node_type":"Union","ref_id":"490"},{"children":[{"text":"\n      union "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Psych Visit Diagnostic Evaluation\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"491"}],"ref_id":"492"},{"children":[{"text":"\n      union "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Psych Visit Psychotherapy\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"493"}],"node_type":"Union","ref_id":"494"},{"children":[{"text":"\n      union "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Telephone Visits\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"495"}],"node_type":"Union","ref_id":"496"},{"children":[{"text":"\n  )"}]}],"node_type":"Union","ref_id":"496"}],"ref_id":"497"}],"define_name":"Qualifying Numerator Encounter"},{"children":[{"children":[{"children":[{"text":"define \"Encounter During Initiation Phase\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Qualifying Numerator Encounter\""}]}]}],"node_type":"ExpressionRef","ref_id":"498"},{"children":[{"text":" ValidNumeratorEncounter"}]}],"ref_id":"499"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"500"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"ToDateInterval\" ( "}]},{"children":[{"children":[{"children":[{"text":"ValidNumeratorEncounter"}]}],"ref_id":"501"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"502"}],"node_type":"Property","ref_id":"502"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"503"}],"node_type":"FunctionRef","ref_id":"503"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"starts "}]},{"children":[{"children":[{"text":"30 days"}]}],"node_type":"Quantity","ref_id":"505"},{"children":[{"text":" or less after day of"}]}],"ref_id":"506"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"\"IPSD\""}]}],"node_type":"ExpressionRef","ref_id":"504"}],"ref_id":"506"}],"ref_id":"506"}],"node_type":"Query","ref_id":"507"}],"ref_id":"508"}],"define_name":"Encounter During Initiation Phase"},{"children":[{"children":[{"children":[{"text":"define \"Numerator 1\":\n  "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"\"Encounter During Initiation Phase\""}]}],"node_type":"ExpressionRef","ref_id":"509"},{"children":[{"text":" )"}]}],"node_type":"ExpressionRef","ref_id":"509"}],"node_type":"Exists","ref_id":"510"}],"ref_id":"511"}],"define_name":"Numerator 1"},{"children":[{"children":[{"children":[{"text":"define \"Encounter 31 to 300 Days into Continuation and Maintenance Phase\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Qualifying Numerator Encounter\""}]}]}],"node_type":"ExpressionRef","ref_id":"514"},{"children":[{"text":" ValidNumeratorEncounter"}]}],"ref_id":"515"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"516"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"ToDateInterval\" ( "}]},{"children":[{"children":[{"children":[{"text":"ValidNumeratorEncounter"}]}],"ref_id":"517"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"518"}],"node_type":"Property","ref_id":"518"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"519"}],"node_type":"FunctionRef","ref_id":"519"},{"children":[{"text":" starts during day of "}],"ref_id":"527"},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"children":[{"text":"\"IPSD\""}]}],"node_type":"ExpressionRef","ref_id":"520"},{"children":[{"text":" + "}]},{"children":[{"children":[{"text":"31 days"}]}],"node_type":"Quantity","ref_id":"521"}],"ref_id":"522"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"\"IPSD\""}]}],"node_type":"ExpressionRef","ref_id":"523"},{"children":[{"text":" + "}]},{"children":[{"children":[{"text":"300 days"}]}],"node_type":"Quantity","ref_id":"524"}],"ref_id":"525"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"526"}],"ref_id":"527"}],"ref_id":"527"},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"ValidNumeratorEncounter"}]}],"ref_id":"528"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"529"}],"node_type":"Property","ref_id":"529"}],"node_type":"Start","ref_id":"530"}],"node_type":"DateFrom","ref_id":"531"}],"ref_id":"532"}],"node_type":"Query","ref_id":"533"}],"ref_id":"534"}],"define_name":"Encounter 31 to 300 Days into Continuation and Maintenance Phase"},{"children":[{"children":[{"children":[{"text":"define \"Two or More Encounters 31 to 300 Days into Continuation and Maintenance Phase\":\n  "}]},{"children":[{"children":[{"children":[{"text":"Count("}]},{"children":[{"children":[{"text":"\"Encounter 31 to 300 Days into Continuation and Maintenance Phase\""}]}],"ref_id":"535"},{"children":[{"text":")"}]}],"node_type":"Count","ref_id":"536"},{"children":[{"text":"\u003e= 2"}],"node_type":"Literal","ref_id":"537"}],"node_type":"GreaterOrEqual","ref_id":"538"}],"ref_id":"539"}],"define_name":"Two or More Encounters 31 to 300 Days into Continuation and Maintenance Phase"},{"children":[{"children":[{"children":[{"text":"define \"Online Assessment 31 to 300 Days into Continuation and Maintenance Phase\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Online Assessments\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"543"}],"node_type":"Retrieve","ref_id":"543"},{"children":[{"text":" OnlineAssessment"}]}],"ref_id":"544"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"545"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"ToDateInterval\" ( "}]},{"children":[{"children":[{"children":[{"text":"OnlineAssessment"}]}],"ref_id":"546"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"547"}],"node_type":"Property","ref_id":"547"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"548"}],"node_type":"FunctionRef","ref_id":"548"},{"children":[{"text":" starts during day of "}],"ref_id":"556"},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"children":[{"text":"\"IPSD\""}]}],"node_type":"ExpressionRef","ref_id":"549"},{"children":[{"text":" + "}]},{"children":[{"children":[{"text":"31 days"}]}],"node_type":"Quantity","ref_id":"550"}],"ref_id":"551"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"\"IPSD\""}]}],"node_type":"ExpressionRef","ref_id":"552"},{"children":[{"text":" + "}]},{"children":[{"children":[{"text":"300 days"}]}],"node_type":"Quantity","ref_id":"553"}],"ref_id":"554"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"555"}],"ref_id":"556"}],"ref_id":"556"},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"OnlineAssessment"}]}],"ref_id":"557"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"558"}],"node_type":"Property","ref_id":"558"}],"node_type":"Start","ref_id":"559"}],"node_type":"DateFrom","ref_id":"560"}],"ref_id":"561"}],"node_type":"Query","ref_id":"562"}],"ref_id":"563"}],"define_name":"Online Assessment 31 to 300 Days into Continuation and Maintenance Phase"},{"children":[{"children":[{"children":[{"text":"define \"Numerator 2\":\n  "}]},{"children":[{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"\"Encounter During Initiation Phase\""}]}],"node_type":"ExpressionRef","ref_id":"512"},{"children":[{"text":" )"}]}],"node_type":"ExpressionRef","ref_id":"512"}],"node_type":"Exists","ref_id":"513"},{"children":[{"text":"\n    and "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"\"Two or More Encounters 31 to 300 Days into Continuation and Maintenance Phase\""}]}],"node_type":"ExpressionRef","ref_id":"540"},{"children":[{"text":" )"}]}],"node_type":"ExpressionRef","ref_id":"540"},{"children":[{"text":"\n        or "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Encounter 31 to 300 Days into Continuation and Maintenance Phase\""}]}]}],"node_type":"ExpressionRef","ref_id":"541"},{"children":[{"text":" Encounter1"}]}],"ref_id":"542"}]},{"children":[{"text":"\n              "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"Online Assessment 31 to 300 Days into Continuation and Maintenance Phase\""}]}]}],"node_type":"ExpressionRef","ref_id":"564"},{"children":[{"text":" Encounter2"}]}],"ref_id":"565"},{"children":[{"text":"\n                such that "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter1"}]}],"node_type":"AliasRef","ref_id":"566"},{"children":[{"text":" is not null"}]}],"node_type":"Not","ref_id":"567"},{"children":[{"text":"\n                  and "}]},{"children":[{"children":[{"children":[{"text":"Encounter2"}]}],"node_type":"AliasRef","ref_id":"568"},{"children":[{"text":" is not null"}]}],"node_type":"Not","ref_id":"569"}],"node_type":"And","ref_id":"570"},{"children":[{"text":"\n                  and "}]},{"children":[{"children":[{"children":[{"text":"Encounter1"}]}],"node_type":"AliasRef","ref_id":"571"},{"children":[{"text":" !~ "}]},{"children":[{"children":[{"text":"Encounter2"}]}],"node_type":"AliasRef","ref_id":"572"}],"node_type":"Not","ref_id":"573"}],"node_type":"And","ref_id":"574"}],"ref_id":"575"}],"node_type":"Query","ref_id":"576"},{"children":[{"text":"\n          )"}]}],"node_type":"Query","ref_id":"576"}],"node_type":"Exists","ref_id":"577"},{"children":[{"text":"\n        )"}]}],"node_type":"Exists","ref_id":"577"}],"node_type":"Or","ref_id":"578"},{"children":[{"text":"\n    )"}]}],"node_type":"Or","ref_id":"578"}],"node_type":"And","ref_id":"579"}],"ref_id":"580"}],"define_name":"Numerator 2"},{"children":[{"children":[{"children":[{"text":"define \"SDE Ethnicity\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Ethnicity\": "}]},{"children":[{"children":[{"text":"\"Ethnicity\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"581"}],"ref_id":"582"}],"define_name":"SDE Ethnicity"},{"children":[{"children":[{"children":[{"text":"define \"SDE Payer\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Payer\": "}]},{"children":[{"children":[{"text":"\"Payer\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"583"}],"ref_id":"584"}],"define_name":"SDE Payer"},{"children":[{"children":[{"children":[{"text":"define \"SDE Race\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Race\": "}]},{"children":[{"children":[{"text":"\"Race\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"585"}],"ref_id":"586"}],"define_name":"SDE Race"},{"children":[{"children":[{"children":[{"text":"define \"SDE Sex\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Sex\": "}]},{"children":[{"children":[{"text":"\"ONC Administrative Sex\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"587"}],"ref_id":"588"}],"define_name":"SDE Sex"}],"identifier":{"id":"FollowUpCareforChildrenPrescribedADHDMedicationADD","version":"13.0.000"}},"is_main_library":true,"is_top_level":true,"library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","library_version":"13.0.000","statement_dependencies":[{"_id":"6892448f0734dfcaf5413654","statement_name":"Patient"},{"_id":"6892448f0734dfcaf5413655","statement_name":"March 1 of Year Prior to Measurement Period"},{"_id":"6892448f0734dfcaf5413656","statement_name":"Last Calendar Day of February of Measurement Period"},{"_id":"6892448f0734dfcaf5413657","statement_name":"Intake Period","statement_references":[{"_id":"6892448f0734dfcaf5413629","hqmf_id":null,"library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"March 1 of Year Prior to Measurement Period"},{"_id":"6892448f0734dfcaf541362a","hqmf_id":null,"library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"Last Calendar Day of February of Measurement Period"}]},{"_id":"6892448f0734dfcaf5413658","statement_name":"ADHD Medication Prescribed During Intake Period and Not Previously on ADHD Medication","statement_references":[{"_id":"6892448f0734dfcaf541362b","hqmf_id":null,"library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"Intake Period"},{"_id":"6892448f0734dfcaf541362c","hqmf_id":null,"library_name":"MATGlobalCommonFunctions","statement_name":"ToDateInterval"},{"_id":"6892448f0734dfcaf541362d","hqmf_id":null,"library_name":"MATGlobalCommonFunctions","statement_name":"NormalizeInterval"}]},{"_id":"6892448f0734dfcaf5413659","statement_name":"First ADHD Medication Prescribed During Intake Period","statement_references":[{"_id":"689244ad0734dfcaf54144da","hqmf_id":null,"library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"ADHD Medication Prescribed During Intake Period and Not Previously on ADHD Medication"}]},{"_id":"6892448f0734dfcaf541365a","statement_name":"IPSD","statement_references":[{"_id":"689244ad0734dfcaf54144db","hqmf_id":null,"library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"First ADHD Medication Prescribed During Intake Period"}]},{"_id":"6892448f0734dfcaf541365b","statement_name":"Qualifying Encounter","statement_references":[{"_id":"6892448f0734dfcaf541362e","hqmf_id":null,"library_name":"MATGlobalCommonFunctions","statement_name":"ToDateInterval"},{"_id":"6892448f0734dfcaf541362f","hqmf_id":null,"library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"IPSD"}]},{"_id":"6892448f0734dfcaf541365c","statement_name":"Inpatient Stay with Qualifying Diagnosis"},{"_id":"6892448f0734dfcaf541365d","statement_name":"Inpatient Stay with Qualifying Diagnosis During Initiation Phase","statement_references":[{"_id":"6892448f0734dfcaf5413630","hqmf_id":null,"library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"Inpatient Stay with Qualifying Diagnosis"},{"_id":"6892448f0734dfcaf5413631","hqmf_id":null,"library_name":"MATGlobalCommonFunctions","statement_name":"ToDateInterval"},{"_id":"6892448f0734dfcaf5413632","hqmf_id":null,"library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"IPSD"}]},{"_id":"6892448f0734dfcaf541365e","statement_name":"Initial Population 1","statement_references":[{"_id":"6892448f0734dfcaf5413633","hqmf_id":null,"library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"Patient"},{"_id":"6892448f0734dfcaf5413634","hqmf_id":null,"library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"Intake Period"},{"_id":"6892448f0734dfcaf5413635","hqmf_id":null,"library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"Qualifying Encounter"},{"_id":"6892448f0734dfcaf5413636","hqmf_id":null,"library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"First ADHD Medication Prescribed During Intake Period"},{"_id":"6892448f0734dfcaf5413637","hqmf_id":null,"library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"Inpatient Stay with Qualifying Diagnosis During Initiation Phase"}]},{"_id":"6892448f0734dfcaf541365f","statement_name":"Denominator 1","statement_references":[{"_id":"689244ad0734dfcaf54144dc","hqmf_id":null,"library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"Initial Population 1"}]},{"_id":"6892448f0734dfcaf5413660","statement_name":"ADHD Medications Taken on IPSD or During Continuation and Maintenance Phase","statement_references":[{"_id":"6892448f0734dfcaf5413638","hqmf_id":null,"library_name":"CumulativeMedicationDuration","statement_name":"RolloutIntervals"},{"_id":"6892448f0734dfcaf5413639","hqmf_id":null,"library_name":"CumulativeMedicationDuration","statement_name":"MedicationOrderPeriod"},{"_id":"6892448f0734dfcaf541363a","hqmf_id":null,"library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"IPSD"}]},{"_id":"6892448f0734dfcaf5413661","statement_name":"ADHD Cumulative Medication Duration","statement_references":[{"_id":"6892448f0734dfcaf541363b","hqmf_id":null,"library_name":"CumulativeMedicationDuration","statement_name":"CumulativeDuration"},{"_id":"6892448f0734dfcaf541363c","hqmf_id":null,"library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"ADHD Medications Taken on IPSD or During Continuation and Maintenance Phase"}]},{"_id":"6892448f0734dfcaf5413662","statement_name":"Has ADHD Cumulative Medication Duration Greater Than or Equal to 210 Days","statement_references":[{"_id":"689244ad0734dfcaf54144dd","hqmf_id":null,"library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"ADHD Cumulative Medication Duration"}]},{"_id":"6892448f0734dfcaf5413663","statement_name":"Inpatient Stay with Qualifying Diagnosis During Continuation and Maintenance Phase","statement_references":[{"_id":"6892448f0734dfcaf541363d","hqmf_id":null,"library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"Inpatient Stay with Qualifying Diagnosis"},{"_id":"6892448f0734dfcaf541363e","hqmf_id":null,"library_name":"MATGlobalCommonFunctions","statement_name":"ToDateInterval"},{"_id":"6892448f0734dfcaf541363f","hqmf_id":null,"library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"IPSD"}]},{"_id":"6892448f0734dfcaf5413664","statement_name":"Initial Population 2","statement_references":[{"_id":"6892448f0734dfcaf5413640","hqmf_id":null,"library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"Patient"},{"_id":"6892448f0734dfcaf5413641","hqmf_id":null,"library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"Intake Period"},{"_id":"6892448f0734dfcaf5413642","hqmf_id":null,"library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"Qualifying Encounter"},{"_id":"6892448f0734dfcaf5413643","hqmf_id":null,"library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"First ADHD Medication Prescribed During Intake Period"},{"_id":"6892448f0734dfcaf5413644","hqmf_id":null,"library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"Has ADHD Cumulative Medication Duration Greater Than or Equal to 210 Days"},{"_id":"6892448f0734dfcaf5413645","hqmf_id":null,"library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"Inpatient Stay with Qualifying Diagnosis During Continuation and Maintenance Phase"}]},{"_id":"6892448f0734dfcaf5413665","statement_name":"Denominator 2","statement_references":[{"_id":"689244ad0734dfcaf54144de","hqmf_id":null,"library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"Initial Population 2"}]},{"_id":"6892448f0734dfcaf5413666","statement_name":"Narcolepsy Exclusion"},{"_id":"6892448f0734dfcaf5413667","statement_name":"Denominator Exclusions","statement_references":[{"_id":"6892448f0734dfcaf5413646","hqmf_id":null,"library_name":"Hospice","statement_name":"Has Hospice Services"},{"_id":"6892448f0734dfcaf5413647","hqmf_id":null,"library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"Narcolepsy Exclusion"}]},{"_id":"6892448f0734dfcaf5413668","statement_name":"Qualifying Numerator Encounter"},{"_id":"6892448f0734dfcaf5413669","statement_name":"Encounter During Initiation Phase","statement_references":[{"_id":"6892448f0734dfcaf5413648","hqmf_id":null,"library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"Qualifying Numerator Encounter"},{"_id":"6892448f0734dfcaf5413649","hqmf_id":null,"library_name":"MATGlobalCommonFunctions","statement_name":"ToDateInterval"},{"_id":"6892448f0734dfcaf541364a","hqmf_id":null,"library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"IPSD"}]},{"_id":"6892448f0734dfcaf541366a","statement_name":"Numerator 1","statement_references":[{"_id":"689244ad0734dfcaf54144df","hqmf_id":null,"library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"Encounter During Initiation Phase"}]},{"_id":"6892448f0734dfcaf541366b","statement_name":"Encounter 31 to 300 Days into Continuation and Maintenance Phase","statement_references":[{"_id":"6892448f0734dfcaf541364b","hqmf_id":null,"library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"Qualifying Numerator Encounter"},{"_id":"6892448f0734dfcaf541364c","hqmf_id":null,"library_name":"MATGlobalCommonFunctions","statement_name":"ToDateInterval"},{"_id":"6892448f0734dfcaf541364d","hqmf_id":null,"library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"IPSD"}]},{"_id":"6892448f0734dfcaf541366c","statement_name":"Two or More Encounters 31 to 300 Days into Continuation and Maintenance Phase","statement_references":[{"_id":"689244ad0734dfcaf54144e0","hqmf_id":null,"library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"Encounter 31 to 300 Days into Continuation and Maintenance Phase"}]},{"_id":"6892448f0734dfcaf541366d","statement_name":"Online Assessment 31 to 300 Days into Continuation and Maintenance Phase","statement_references":[{"_id":"6892448f0734dfcaf541364e","hqmf_id":null,"library_name":"MATGlobalCommonFunctions","statement_name":"ToDateInterval"},{"_id":"6892448f0734dfcaf541364f","hqmf_id":null,"library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"IPSD"}]},{"_id":"6892448f0734dfcaf541366e","statement_name":"Numerator 2","statement_references":[{"_id":"6892448f0734dfcaf5413650","hqmf_id":null,"library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"Encounter During Initiation Phase"},{"_id":"6892448f0734dfcaf5413651","hqmf_id":null,"library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"Two or More Encounters 31 to 300 Days into Continuation and Maintenance Phase"},{"_id":"6892448f0734dfcaf5413652","hqmf_id":null,"library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"Encounter 31 to 300 Days into Continuation and Maintenance Phase"},{"_id":"6892448f0734dfcaf5413653","hqmf_id":null,"library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"Online Assessment 31 to 300 Days into Continuation and Maintenance Phase"}]},{"_id":"6892448f0734dfcaf541366f","statement_name":"SDE Ethnicity"},{"_id":"6892448f0734dfcaf5413670","statement_name":"SDE Payer"},{"_id":"6892448f0734dfcaf5413671","statement_name":"SDE Race"},{"_id":"6892448f0734dfcaf5413672","statement_name":"SDE Sex"}]},{"_id":"6892448f0734dfcaf541367e","cql":"library CumulativeMedicationDuration version '2.0.000'\n\n/*@description: This library provides cumulative medication duration calculation logic for use with Quality Data Model prescription, discharge, administration, and dispensing events. \nThe logic here follows the guidance provided as part of the 5.6 version of Quality Data Model.\n@comment: Note that the logic here assumes single-instruction dosing information. Split-dosing, tapering, and other more complex dosing instructions are not handled.*/\n\nusing QDM version '5.6'\n\ninclude MATGlobalCommonFunctions version '7.0.000' called Global\n\ncodesystem \"SNOMEDCT\": 'urn:oid:2.16.840.1.113883.6.96' \n\ncode \"Every eight hours (qualifier value)\": '307469008' from \"SNOMEDCT\" display 'Every eight hours (qualifier value)'\ncode \"Every eight to twelve hours (qualifier value)\": '396140003' from \"SNOMEDCT\" display 'Every eight to twelve hours (qualifier value)'\ncode \"Every forty eight hours (qualifier value)\": '396131002' from \"SNOMEDCT\" display 'Every forty eight hours (qualifier value)'\ncode \"Every forty hours (qualifier value)\": '396130001' from \"SNOMEDCT\" display 'Every forty hours (qualifier value)'\ncode \"Every four hours (qualifier value)\": '225756002' from \"SNOMEDCT\" display 'Every four hours (qualifier value)'\ncode \"Every seventy two hours (qualifier value)\": '396143001' from \"SNOMEDCT\" display 'Every seventy two hours (qualifier value)'\ncode \"Every six hours (qualifier value)\": '307468000' from \"SNOMEDCT\" display 'Every six hours (qualifier value)'\ncode \"Every six to eight hours (qualifier value)\": '396139000' from \"SNOMEDCT\" display 'Every six to eight hours (qualifier value)'\ncode \"Every thirty six hours (qualifier value)\": '396126004' from \"SNOMEDCT\" display 'Every thirty six hours (qualifier value)'\ncode \"Every three to four hours (qualifier value)\": '225754004' from \"SNOMEDCT\" display 'Every three to four hours (qualifier value)'\ncode \"Every three to six hours (qualifier value)\": '396127008' from \"SNOMEDCT\" display 'Every three to six hours (qualifier value)'\ncode \"Every twelve hours (qualifier value)\": '307470009' from \"SNOMEDCT\" display 'Every twelve hours (qualifier value)'\ncode \"Every twenty four hours (qualifier value)\": '396125000' from \"SNOMEDCT\" display 'Every twenty four hours (qualifier value)'\ncode \"Every two to four hours (qualifier value)\": '225752000' from \"SNOMEDCT\" display 'Every two to four hours (qualifier value)'\ncode \"Four times daily (qualifier value)\": '307439001' from \"SNOMEDCT\" display 'Four times daily (qualifier value)'\ncode \"Once daily (qualifier value)\": '229797004' from \"SNOMEDCT\" display 'Once daily (qualifier value)'\ncode \"One to four times a day (qualifier value)\": '396109005' from \"SNOMEDCT\" display 'One to four times a day (qualifier value)'\ncode \"One to three times a day (qualifier value)\": '396108002' from \"SNOMEDCT\" display 'One to three times a day (qualifier value)'\ncode \"One to two times a day (qualifier value)\": '396107007' from \"SNOMEDCT\" display 'One to two times a day (qualifier value)'\ncode \"Three times daily (qualifier value)\": '229798009' from \"SNOMEDCT\" display 'Three times daily (qualifier value)'\ncode \"Twice a day (qualifier value)\": '229799001' from \"SNOMEDCT\" display 'Twice a day (qualifier value)'\ncode \"Two to four times a day (qualifier value)\": '396111001' from \"SNOMEDCT\" display 'Two to four times a day (qualifier value)'\n\ncontext Patient\n\n/*@description: Converts a frequency quantity to a daily frequency (as a decimal)\n@comment: This function considers both the value and unit of the given frequency. E.g. the frequency `30 'min'` will result in a daily frequency of `48.0`*/\ndefine function \"QuantityToDaily\"(Frequency Quantity ):\n  case Frequency.unit\n      when 'h' then (24.0 / Frequency.value)\n      when 'min' then (24.0 / Frequency.value) * 60\n      when 's' then (24.0 / Frequency.value) * 60 * 60\n      when 'd' then (24.0 / Frequency.value) / 24\n      when 'wk' then (24.0 / Frequency.value) / (24 * 7)\n      when 'mo' then (24.0 / Frequency.value) / (24 * 30) /* assuming 30 days in month */\n      when 'a' then (24.0 / Frequency.value) / (24 * 365) /* assuming 365 days in year */\n      when 'hour' then (24.0 / Frequency.value)\n      when 'minute' then (24.0 / Frequency.value) * 60\n      when 'second' then (24.0 / Frequency.value) * 60 * 60\n      when 'day' then (24.0 / Frequency.value) / 24\n      when 'week' then (24.0 / Frequency.value) / (24 * 7)\n      when 'month' then (24.0 / Frequency.value) / (24 * 30) /* assuming 30 days in month */\n      when 'year' then (24.0 / Frequency.value) / (24 * 365) /* assuming 365 days in year */\n      when 'hours' then (24.0 / Frequency.value)\n      when 'minutes' then (24.0 / Frequency.value) * 60\n      when 'seconds' then (24.0 / Frequency.value) * 60 * 60\n      when 'days' then (24.0 / Frequency.value) / 24\n      when 'weeks' then (24.0 / Frequency.value) / (24 * 7)\n      when 'months' then (24.0 / Frequency.value) / (24 * 30) /* assuming 30 days in month */\n      when 'years' then (24.0 / Frequency.value) / (24 * 365) /* assuming 365 days in year */\n      else null\n    end\n\n/*@description: Returns the equivalent daily frequency (as a decimal) of the given code\n@comment: Note that for ranges, the boundary resulting in the highest frequency result is used. E.g. `Every two to four hours` results in `12.0` and `One to two` times a day results in `2.0`.*/\ndefine function \"CodeToDaily\"(Frequency Code ):\n  case\n    when Frequency ~ \"Once daily (qualifier value)\" then 1.0\n    when Frequency ~ \"Twice a day (qualifier value)\" then 2.0\n    when Frequency ~ \"Three times daily (qualifier value)\" then 3.0\n    when Frequency ~ \"Four times daily (qualifier value)\" then 4.0\n    when Frequency ~ \"Every twenty four hours (qualifier value)\" then 1.0\n    when Frequency ~ \"Every twelve hours (qualifier value)\" then 2.0\n    when Frequency ~ \"Every thirty six hours (qualifier value)\" then 0.67\n    when Frequency ~ \"Every eight hours (qualifier value)\" then 3.0\n    when Frequency ~ \"Every four hours (qualifier value)\" then 6.0\n    when Frequency ~ \"Every six hours (qualifier value)\" then 4.0\n    when Frequency ~ \"Every seventy two hours (qualifier value)\" then 0.33\n    when Frequency ~ \"Every forty eight hours (qualifier value)\" then 0.5\n    when Frequency ~ \"Every eight to twelve hours (qualifier value)\" then 3.0\n    when Frequency ~ \"Every six to eight hours (qualifier value)\" then 4.0\n    when Frequency ~ \"Every three to four hours (qualifier value)\" then 8.0\n    when Frequency ~ \"Every three to six hours (qualifier value)\" then 8.0\n    when Frequency ~ \"Every two to four hours (qualifier value)\" then 12.0\n    when Frequency ~ \"One to four times a day (qualifier value)\" then 4.0\n    when Frequency ~ \"One to three times a day (qualifier value)\" then 3.0\n    when Frequency ~ \"One to two times a day (qualifier value)\" then 2.0\n    when Frequency ~ \"Two to four times a day (qualifier value)\" then 4.0\n    else null\n  end\n\n/*@description: Returns the daily frequency (as a decimal) of the given input*/\ndefine function \"ToDaily\"(Frequency Choice\u003cQuantity, Code\u003e ):\n  case\n    when Frequency is Quantity then QuantityToDaily(Frequency as Quantity)\n    else CodeToDaily(Frequency as Code)\n  end\n\n/*@description: Calculates the Medication Period for a single Medication, Order\n  @comment: This function calculates the expected period of a medication order using the following approach: If `supply`, `dosage`, and `frequency` elements are present, `daysSupplied` is derived by calculating `(supply / (dosage * frequency)) * (1 + refills)`. If `daysSupplied` element is present, the duration is `daysSupplied * (1 + refills)`. The result is then the interval from `relevantPeriod.low` to `relevantPeriod.low + daysSupplied`, or `authorDatetime` to `authorDatetime + daysSupplied`. Otherwise, the `relevantPeriod` element is used if present and completely specified.\n  Note that the supply and dosage Quantity values on the order are assumed to be in terms of the same unit, typically a tablet or mL.\n  @seealso: [CumulativeMedicationDuration](https://github.com/cqframework/CQL-Formatting-and-Usage-Wiki/blob/master/Source/Libraries)\n  Note that relevantPeriod.low represents the interval's lower boundary and relevantPeriod.high represents the interval's higher boundary.*/\ndefine function \"MedicationOrderPeriod\"(MedOrder \"Medication, Order\" ):\n  MedOrder Order\n    let startDate: date from Coalesce(Order.relevantPeriod.low, Order.authorDatetime),\n    totalDaysSupplied: Coalesce(Order.supply.value /(Order.dosage.value * ToDaily(Order.frequency)), Order.daysSupplied) * ( 1 + Coalesce(Order.refills, 0) )\n    return if startDate is null then null \n      else if totalDaysSupplied is not null then Interval[startDate, startDate + Quantity { value: totalDaysSupplied - 1, unit: 'day' }]\n      else if Order.relevantPeriod.high is not null then Interval[startDate, date from end of Order.relevantPeriod]\n      else null\n\n/*@description: Calculates Medication Period for a given Medication, Dispensed\n  @comment: This function calculates the effective duration of a single medication dispensing event using the following approach: If `supply`, `dosage`, and `frequency` elements are present, `daysSupplied` is derived by calculating `(supply / (dosage * frequency))`. If `daysSupplied` element is present, the duration is `daysSupplied`. The result is then the interval from `relevantPeriod.low` to `relevantPeriod.low + daysSupplied`, or `relevantDatetime` to `relevantDatetime + daysSupplied`, or `authorDatetime` to `authorDatetime + daysSupplied`. Otherwise, the `relevantPeriod` element is used if present and completely specified.\n  Note that the supply and dosage Quantity values on the order are assumed to be in terms of the same unit, typically a tablet or mL.\n  @seealso: [CumulativeMedicationDuration](https://github.com/cqframework/CQL-Formatting-and-Usage-Wiki/blob/master/Source/Libraries)\n  Note that relevantPeriod.low represents the interval's lower boundary and relevantPeriod.high represents the interval's higher boundary.*/\ndefine function \"MedicationDispensedPeriod\"(MedDispense \"Medication, Dispensed\" ):\n  MedDispense Dispense\n    let startDate: date from Coalesce(Dispense.relevantPeriod.low, Dispense.relevantDatetime, Dispense.authorDatetime),\n    totalDaysSupplied: Coalesce(Dispense.supply.value /(Dispense.dosage.value * ToDaily(Dispense.frequency)), Dispense.daysSupplied)\n    return if startDate is null then null \n      else if totalDaysSupplied is not null then Interval[startDate, startDate + Quantity { value: totalDaysSupplied - 1, unit: 'day' }]\n      else if Dispense.relevantPeriod.high is not null then Interval[startDate, date from end of Dispense.relevantPeriod]\n      else null\n\n/*@description: Returns the established therapeutic duration for a given medication\n  @comment: This is likely measure specific, though could potentially be established for any drug and distributed as a CodeSystem supplement. Defaulting to 14 days here for illustration.\n  @seealso: [CumulativeMedicationDuration](https://github.com/cqframework/CQL-Formatting-and-Usage-Wiki/blob/master/Source/Libraries)\n  Note that this function is still under development and should not be used.*/\ndefine function \"TherapeuticDuration\"(medication Code ):\n  14 days\n\n/*@description: Calculates Medication Period for a given Medication, Administration\n  @comment: This function calculates the effective duration of a single medication administration event using the following approach: If a TherapeuticDuration is defined for the medication, the result is the interval from the earliest of the `relevantDatetime` and `relevantPeriod` elements, to the end of the therapeutic duration.\n  @seealso: [CumulativeMedicationDuration](https://github.com/cqframework/CQL-Formatting-and-Usage-Wiki/blob/master/Source/Libraries)\n  Note that this function is still under development and should not be used.*/\ndefine function \"MedicationAdministrationPeriod\"(MedAdministration \"Medication, Administered\" ):\n  MedAdministration Administration\n       let\n         therapeuticDuration: TherapeuticDuration(Administration.code),\n         startDate: date from Global.EarliestOf(Administration.relevantDatetime, Administration.relevantPeriod)\n       return\n         if startDate is not null and therapeuticDuration is not null then\n           Interval[startDate, startDate + therapeuticDuration - 1]\n         else\n           null\n\n/*@description: Calculates the Medication Period for a Medication, Discharge\n@comment: This function calculates the effective duration of a single medication discharge event using the following approach: If the `daysSupplied` element is present, the duration is `daysSupplied * (1 + refills)`. Otherwise, the duration is calculated using `(supply / (dosage * frequency)) * (1 + refills)`. The result is then the interval from `authorDatetime` to `authorDatetime + daysSupplied`.\nNote that the supply and dosage Quantity values on the order are assumed to be in terms of the same unit, typically a tablet or mL.\n@seealso: [CumulativeMedicationDuration](https://github.com/cqframework/CQL-Formatting-and-Usage-Wiki/blob/master/Source/Libraries)\nNote that this function has not been tested.*/\ndefine function \"MedicationDischargePeriod\"(Medication \"Medication, Discharge\" ):\n  (\n    Coalesce(\n      Medication.daysSupplied,\n      Medication.supply.value / (Medication.dosage.value * ToDaily(Medication.frequency))\n    ) * (1 + Coalesce(Medication.refills, 0))\n  ) totalDaysSupplied\n    let startDate: date from Medication.authorDatetime\n    return\n      if startDate is not null and totalDaysSupplied is not null then\n        Interval[startDate, startDate + Quantity { value: totalDaysSupplied - 1, unit: 'day' }]\n      else\n        null\n\n/*@description: Returns the total duration in days covered by the given periods\n  @comment: This function calculates the total duration in days covered by the given periods. If multiple periods in the input include the same day, that day is only counted once in the final result.*/\ndefine function \"CumulativeDuration\"(Intervals List\u003cInterval\u003cDate\u003e\u003e ):\n  if Intervals is not null then ( Sum((collapse Intervals per day)X\n        return all(difference in days between start of X and \n          end of X\n        )+ 1\n    )\n  ) \n    else null\n\n/*@description: Rolls out periods so that overlapping periods delay the start of subsequent periods\n  @comment: Returns the periods with overlapping periods delayed so that there is no overlap between any two periods in the result.*/\ndefine function \"RolloutIntervals\"(intervals List\u003cInterval\u003cDate\u003e\u003e ):\n  intervals I aggregate all R starting ( null as List\u003cInterval\u003cDate\u003e\u003e): R\n    union ( { I X\n        let S: Max({ \n          end of Last(R)+ 1 day, start of X }\n        ),\n        E: S + Quantity { value: Coalesce(duration in days of X, 0), unit: 'day' }\n        return Interval[S, E]}\n    )\n\n/*@description: Calculates the effective duration of the given medication event, whether it is an order, dispense, discharge, or administration. Note that this function is still under development and should not be used.*/\ndefine function \"MedicationPeriod\"(Medication Choice\u003c\"Medication, Order\",\n       \"Medication, Dispensed\",\n       \"Medication, Discharge\",\n       \"Medication, Administered\"\n     \u003e ):\n  Coalesce(\n       MedicationOrderPeriod(Medication),\n       MedicationDispensedPeriod(Medication),\n       MedicationDischargePeriod(Medication),\n       MedicationAdministrationPeriod(Medication)\n     )\n\n/*@description: Calculates the cumulative medication duration of the given medication events\n  @comment: This function will _roll out_ periods from dispense and administration events, and then collapse across that result and periods from prescriptions. The separation of medications by type should already be done prior to using this function. In addition, calculations that combine dosages from different types of medications (such as Morphine Milligram Equivalent (MME)) require further consideration. Note that this function is still under development and should not be used.*/\ndefine function \"CalculateCumulativeMedicationDuration\"(Medications List\u003cChoice\u003c\"Medication, Order\",\n       \"Medication, Dispensed\",\n       \"Medication, Discharge\",\n       \"Medication, Administered\"\n     \u003e\u003e ):\n  CumulativeDuration((\n         Medications M\n           where M is \"Medication, Order\" or M is \"Medication, Discharge\"\n           return MedicationPeriod(M)\n       )\n         union (\n           RolloutIntervals(\n             Medications M\n               where M is \"Medication, Dispensed\" or M is \"Medication, Administered\"\n               return MedicationPeriod(M)\n           )\n         )\n     )\n\n","elm":{"library":{"annotation":[{"translatorOptions":"EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion,DisableMethodInvocation","type":"CqlToElmInfo"},{"type":"Annotation","s":{"r":"683","s":[{"value":["","library CumulativeMedicationDuration version '2.0.000'"]}]}}],"identifier":{"id":"CumulativeMedicationDuration","version":"2.0.000"},"schemaIdentifier":{"id":"urn:hl7-org:elm","version":"r1"},"usings":{"def":[{"localIdentifier":"System","uri":"urn:hl7-org:elm-types:r1"},{"localId":"1","locator":"7:1-7:23","localIdentifier":"QDM","uri":"urn:healthit-gov:qdm:v5_6","version":"5.6","annotation":[{"type":"Annotation","t":[{"name":"description","value":"This library provides cumulative medication duration calculation logic for use with Quality Data Model prescription, discharge, administration, and dispensing events."},{"name":"description","value":"This library provides cumulative medication duration calculation logic for use with Quality Data Model prescription, discharge, administration, and dispensing events. \nThe logic here follows the guidance provided as part of the 5.6 version of Quality Data Model."},{"name":"comment","value":"Note that the logic here assumes single-instruction dosing information. Split-dosing, tapering, and other more complex dosing instructions are not handled."}],"s":{"r":"1","s":[{"value":["/*@description: This library provides cumulative medication duration calculation logic for use with Quality Data Model prescription, discharge, administration, and dispensing events. \nThe logic here follows the guidance provided as part of the 5.6 version of Quality Data Model.\n@comment: Note that the logic here assumes single-instruction dosing information. Split-dosing, tapering, and other more complex dosing instructions are not handled.*/","using "]},{"s":[{"value":["QDM"]}]},{"value":[" version ","'5.6'"]}]}}]}]},"includes":{"def":[{"localId":"2","locator":"9:1-9:64","localIdentifier":"Global","path":"MATGlobalCommonFunctions","version":"7.0.000","annotation":[{"type":"Annotation","s":{"r":"2","s":[{"value":["","include "]},{"s":[{"value":["MATGlobalCommonFunctions"]}]},{"value":[" version ","'7.0.000'"," called ","Global"]}]}}]}]},"codeSystems":{"def":[{"localId":"3","locator":"11:1-11:55","name":"SNOMEDCT","id":"2.16.840.1.113883.6.96","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"3","s":[{"value":["","codesystem ","\"SNOMEDCT\"",": ","'urn:oid:2.16.840.1.113883.6.96'"]}]}}]}]},"codes":{"def":[{"localId":"5","locator":"13:1-13:117","name":"Every eight hours (qualifier value)","id":"307469008","display":"Every eight hours (qualifier value)","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"5","s":[{"value":["","code ","\"Every eight hours (qualifier value)\"",": ","'307469008'"," from "]},{"r":"4","s":[{"value":["\"SNOMEDCT\""]}]},{"value":[" display ","'Every eight hours (qualifier value)'"]}]}}],"codeSystem":{"localId":"4","locator":"13:62-13:71","name":"SNOMEDCT"}},{"localId":"7","locator":"14:1-14:137","name":"Every eight to twelve hours (qualifier value)","id":"396140003","display":"Every eight to twelve hours (qualifier value)","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"7","s":[{"value":["","code ","\"Every eight to twelve hours (qualifier value)\"",": ","'396140003'"," from "]},{"r":"6","s":[{"value":["\"SNOMEDCT\""]}]},{"value":[" display ","'Every eight to twelve hours (qualifier value)'"]}]}}],"codeSystem":{"localId":"6","locator":"14:72-14:81","name":"SNOMEDCT"}},{"localId":"9","locator":"15:1-15:129","name":"Every forty eight hours (qualifier value)","id":"396131002","display":"Every forty eight hours (qualifier value)","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"9","s":[{"value":["","code ","\"Every forty eight hours (qualifier value)\"",": ","'396131002'"," from "]},{"r":"8","s":[{"value":["\"SNOMEDCT\""]}]},{"value":[" display ","'Every forty eight hours (qualifier value)'"]}]}}],"codeSystem":{"localId":"8","locator":"15:68-15:77","name":"SNOMEDCT"}},{"localId":"11","locator":"16:1-16:117","name":"Every forty hours (qualifier value)","id":"396130001","display":"Every forty hours (qualifier value)","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"11","s":[{"value":["","code ","\"Every forty hours (qualifier value)\"",": ","'396130001'"," from "]},{"r":"10","s":[{"value":["\"SNOMEDCT\""]}]},{"value":[" display ","'Every forty hours (qualifier value)'"]}]}}],"codeSystem":{"localId":"10","locator":"16:62-16:71","name":"SNOMEDCT"}},{"localId":"13","locator":"17:1-17:115","name":"Every four hours (qualifier value)","id":"225756002","display":"Every four hours (qualifier value)","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"13","s":[{"value":["","code ","\"Every four hours (qualifier value)\"",": ","'225756002'"," from "]},{"r":"12","s":[{"value":["\"SNOMEDCT\""]}]},{"value":[" display ","'Every four hours (qualifier value)'"]}]}}],"codeSystem":{"localId":"12","locator":"17:61-17:70","name":"SNOMEDCT"}},{"localId":"15","locator":"18:1-18:129","name":"Every seventy two hours (qualifier value)","id":"396143001","display":"Every seventy two hours (qualifier value)","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"15","s":[{"value":["","code ","\"Every seventy two hours (qualifier value)\"",": ","'396143001'"," from "]},{"r":"14","s":[{"value":["\"SNOMEDCT\""]}]},{"value":[" display ","'Every seventy two hours (qualifier value)'"]}]}}],"codeSystem":{"localId":"14","locator":"18:68-18:77","name":"SNOMEDCT"}},{"localId":"17","locator":"19:1-19:113","name":"Every six hours (qualifier value)","id":"307468000","display":"Every six hours (qualifier value)","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"17","s":[{"value":["","code ","\"Every six hours (qualifier value)\"",": ","'307468000'"," from "]},{"r":"16","s":[{"value":["\"SNOMEDCT\""]}]},{"value":[" display ","'Every six hours (qualifier value)'"]}]}}],"codeSystem":{"localId":"16","locator":"19:60-19:69","name":"SNOMEDCT"}},{"localId":"19","locator":"20:1-20:131","name":"Every six to eight hours (qualifier value)","id":"396139000","display":"Every six to eight hours (qualifier value)","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"19","s":[{"value":["","code ","\"Every six to eight hours (qualifier value)\"",": ","'396139000'"," from "]},{"r":"18","s":[{"value":["\"SNOMEDCT\""]}]},{"value":[" display ","'Every six to eight hours (qualifier value)'"]}]}}],"codeSystem":{"localId":"18","locator":"20:69-20:78","name":"SNOMEDCT"}},{"localId":"21","locator":"21:1-21:127","name":"Every thirty six hours (qualifier value)","id":"396126004","display":"Every thirty six hours (qualifier value)","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"21","s":[{"value":["","code ","\"Every thirty six hours (qualifier value)\"",": ","'396126004'"," from "]},{"r":"20","s":[{"value":["\"SNOMEDCT\""]}]},{"value":[" display ","'Every thirty six hours (qualifier value)'"]}]}}],"codeSystem":{"localId":"20","locator":"21:67-21:76","name":"SNOMEDCT"}},{"localId":"23","locator":"22:1-22:133","name":"Every three to four hours (qualifier value)","id":"225754004","display":"Every three to four hours (qualifier value)","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"23","s":[{"value":["","code ","\"Every three to four hours (qualifier value)\"",": ","'225754004'"," from "]},{"r":"22","s":[{"value":["\"SNOMEDCT\""]}]},{"value":[" display ","'Every three to four hours (qualifier value)'"]}]}}],"codeSystem":{"localId":"22","locator":"22:70-22:79","name":"SNOMEDCT"}},{"localId":"25","locator":"23:1-23:131","name":"Every three to six hours (qualifier value)","id":"396127008","display":"Every three to six hours (qualifier value)","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"25","s":[{"value":["","code ","\"Every three to six hours (qualifier value)\"",": ","'396127008'"," from "]},{"r":"24","s":[{"value":["\"SNOMEDCT\""]}]},{"value":[" display ","'Every three to six hours (qualifier value)'"]}]}}],"codeSystem":{"localId":"24","locator":"23:69-23:78","name":"SNOMEDCT"}},{"localId":"27","locator":"24:1-24:119","name":"Every twelve hours (qualifier value)","id":"307470009","display":"Every twelve hours (qualifier value)","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"27","s":[{"value":["","code ","\"Every twelve hours (qualifier value)\"",": ","'307470009'"," from "]},{"r":"26","s":[{"value":["\"SNOMEDCT\""]}]},{"value":[" display ","'Every twelve hours (qualifier value)'"]}]}}],"codeSystem":{"localId":"26","locator":"24:63-24:72","name":"SNOMEDCT"}},{"localId":"29","locator":"25:1-25:129","name":"Every twenty four hours (qualifier value)","id":"396125000","display":"Every twenty four hours (qualifier value)","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"29","s":[{"value":["","code ","\"Every twenty four hours (qualifier value)\"",": ","'396125000'"," from "]},{"r":"28","s":[{"value":["\"SNOMEDCT\""]}]},{"value":[" display ","'Every twenty four hours (qualifier value)'"]}]}}],"codeSystem":{"localId":"28","locator":"25:68-25:77","name":"SNOMEDCT"}},{"localId":"31","locator":"26:1-26:129","name":"Every two to four hours (qualifier value)","id":"225752000","display":"Every two to four hours (qualifier value)","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"31","s":[{"value":["","code ","\"Every two to four hours (qualifier value)\"",": ","'225752000'"," from "]},{"r":"30","s":[{"value":["\"SNOMEDCT\""]}]},{"value":[" display ","'Every two to four hours (qualifier value)'"]}]}}],"codeSystem":{"localId":"30","locator":"26:68-26:77","name":"SNOMEDCT"}},{"localId":"33","locator":"27:1-27:115","name":"Four times daily (qualifier value)","id":"307439001","display":"Four times daily (qualifier value)","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"33","s":[{"value":["","code ","\"Four times daily (qualifier value)\"",": ","'307439001'"," from "]},{"r":"32","s":[{"value":["\"SNOMEDCT\""]}]},{"value":[" display ","'Four times daily (qualifier value)'"]}]}}],"codeSystem":{"localId":"32","locator":"27:61-27:70","name":"SNOMEDCT"}},{"localId":"35","locator":"28:1-28:103","name":"Once daily (qualifier value)","id":"229797004","display":"Once daily (qualifier value)","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"35","s":[{"value":["","code ","\"Once daily (qualifier value)\"",": ","'229797004'"," from "]},{"r":"34","s":[{"value":["\"SNOMEDCT\""]}]},{"value":[" display ","'Once daily (qualifier value)'"]}]}}],"codeSystem":{"localId":"34","locator":"28:55-28:64","name":"SNOMEDCT"}},{"localId":"37","locator":"29:1-29:129","name":"One to four times a day (qualifier value)","id":"396109005","display":"One to four times a day (qualifier value)","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"37","s":[{"value":["","code ","\"One to four times a day (qualifier value)\"",": ","'396109005'"," from "]},{"r":"36","s":[{"value":["\"SNOMEDCT\""]}]},{"value":[" display ","'One to four times a day (qualifier value)'"]}]}}],"codeSystem":{"localId":"36","locator":"29:68-29:77","name":"SNOMEDCT"}},{"localId":"39","locator":"30:1-30:131","name":"One to three times a day (qualifier value)","id":"396108002","display":"One to three times a day (qualifier value)","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"39","s":[{"value":["","code ","\"One to three times a day (qualifier value)\"",": ","'396108002'"," from "]},{"r":"38","s":[{"value":["\"SNOMEDCT\""]}]},{"value":[" display ","'One to three times a day (qualifier value)'"]}]}}],"codeSystem":{"localId":"38","locator":"30:69-30:78","name":"SNOMEDCT"}},{"localId":"41","locator":"31:1-31:127","name":"One to two times a day (qualifier value)","id":"396107007","display":"One to two times a day (qualifier value)","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"41","s":[{"value":["","code ","\"One to two times a day (qualifier value)\"",": ","'396107007'"," from "]},{"r":"40","s":[{"value":["\"SNOMEDCT\""]}]},{"value":[" display ","'One to two times a day (qualifier value)'"]}]}}],"codeSystem":{"localId":"40","locator":"31:67-31:76","name":"SNOMEDCT"}},{"localId":"43","locator":"32:1-32:117","name":"Three times daily (qualifier value)","id":"229798009","display":"Three times daily (qualifier value)","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"43","s":[{"value":["","code ","\"Three times daily (qualifier value)\"",": ","'229798009'"," from "]},{"r":"42","s":[{"value":["\"SNOMEDCT\""]}]},{"value":[" display ","'Three times daily (qualifier value)'"]}]}}],"codeSystem":{"localId":"42","locator":"32:62-32:71","name":"SNOMEDCT"}},{"localId":"45","locator":"33:1-33:105","name":"Twice a day (qualifier value)","id":"229799001","display":"Twice a day (qualifier value)","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"45","s":[{"value":["","code ","\"Twice a day (qualifier value)\"",": ","'229799001'"," from "]},{"r":"44","s":[{"value":["\"SNOMEDCT\""]}]},{"value":[" display ","'Twice a day (qualifier value)'"]}]}}],"codeSystem":{"localId":"44","locator":"33:56-33:65","name":"SNOMEDCT"}},{"localId":"47","locator":"34:1-34:129","name":"Two to four times a day (qualifier value)","id":"396111001","display":"Two to four times a day (qualifier value)","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"47","s":[{"value":["","code ","\"Two to four times a day (qualifier value)\"",": ","'396111001'"," from "]},{"r":"46","s":[{"value":["\"SNOMEDCT\""]}]},{"value":[" display ","'Two to four times a day (qualifier value)'"]}]}}],"codeSystem":{"localId":"46","locator":"34:68-34:77","name":"SNOMEDCT"}}]},"contexts":{"def":[{"locator":"36:1-36:15","name":"Patient"}]},"statements":{"def":[{"locator":"36:1-36:15","name":"Patient","context":"Patient","expression":{"type":"SingletonFrom","operand":{"locator":"36:1-36:15","dataType":"{urn:healthit-gov:qdm:v5_6}Patient","templateId":"Patient","type":"Retrieve"}}},{"localId":"239","locator":"40:1-64:7","name":"QuantityToDaily","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","t":[{"name":"description","value":"Converts a frequency quantity to a daily frequency (as a decimal)"},{"name":"description","value":"Converts a frequency quantity to a daily frequency (as a decimal)"},{"name":"comment","value":"This function considers both the value and unit of the given frequency. E.g. the frequency `30 'min'` will result in a daily frequency of `48.0`"}],"s":{"r":"239","s":[{"value":["/*@description: Converts a frequency quantity to a daily frequency (as a decimal)\n@comment: This function considers both the value and unit of the given frequency. E.g. the frequency `30 'min'` will result in a daily frequency of `48.0`*/","define function ","\"QuantityToDaily\"","(","Frequency"," "]},{"r":"48","s":[{"value":["Quantity"]}]},{"value":[" ):\n  "]},{"r":"238","s":[{"r":"238","s":[{"value":["case "]},{"r":"50","s":[{"r":"49","s":[{"value":["Frequency"]}]},{"value":["."]},{"r":"50","s":[{"value":["unit"]}]}]},{"value":["\n      "]},{"r":"56","s":[{"value":["when "]},{"r":"51","s":[{"value":["'h'"]}]},{"value":[" then "]},{"r":"55","s":[{"value":["("]},{"r":"55","s":[{"r":"52","value":["24.0"," / "]},{"r":"54","s":[{"r":"53","s":[{"value":["Frequency"]}]},{"value":["."]},{"r":"54","s":[{"value":["value"]}]}]}]},{"value":[")"]}]}]},{"value":["\n      "]},{"r":"64","s":[{"value":["when "]},{"r":"57","s":[{"value":["'min'"]}]},{"value":[" then "]},{"r":"63","s":[{"r":"61","s":[{"value":["("]},{"r":"61","s":[{"r":"58","value":["24.0"," / "]},{"r":"60","s":[{"r":"59","s":[{"value":["Frequency"]}]},{"value":["."]},{"r":"60","s":[{"value":["value"]}]}]}]},{"value":[")"]}]},{"r":"62","value":[" * ","60"]}]}]},{"value":["\n      "]},{"r":"74","s":[{"value":["when "]},{"r":"65","s":[{"value":["'s'"]}]},{"value":[" then "]},{"r":"73","s":[{"r":"71","s":[{"r":"69","s":[{"value":["("]},{"r":"69","s":[{"r":"66","value":["24.0"," / "]},{"r":"68","s":[{"r":"67","s":[{"value":["Frequency"]}]},{"value":["."]},{"r":"68","s":[{"value":["value"]}]}]}]},{"value":[")"]}]},{"r":"70","value":[" * ","60"]}]},{"r":"72","value":[" * ","60"]}]}]},{"value":["\n      "]},{"r":"82","s":[{"value":["when "]},{"r":"75","s":[{"value":["'d'"]}]},{"value":[" then "]},{"r":"81","s":[{"r":"79","s":[{"value":["("]},{"r":"79","s":[{"r":"76","value":["24.0"," / "]},{"r":"78","s":[{"r":"77","s":[{"value":["Frequency"]}]},{"value":["."]},{"r":"78","s":[{"value":["value"]}]}]}]},{"value":[")"]}]},{"r":"80","value":[" / ","24"]}]}]},{"value":["\n      "]},{"r":"92","s":[{"value":["when "]},{"r":"83","s":[{"value":["'wk'"]}]},{"value":[" then "]},{"r":"91","s":[{"r":"87","s":[{"value":["("]},{"r":"87","s":[{"r":"84","value":["24.0"," / "]},{"r":"86","s":[{"r":"85","s":[{"value":["Frequency"]}]},{"value":["."]},{"r":"86","s":[{"value":["value"]}]}]}]},{"value":[")"]}]},{"value":[" / "]},{"r":"90","s":[{"value":["("]},{"r":"90","s":[{"r":"88","value":["24"," * ","7"]}]},{"value":[")"]}]}]}]},{"value":["\n      "]},{"r":"102","s":[{"value":["when "]},{"r":"93","s":[{"value":["'mo'"]}]},{"value":[" then "]},{"r":"101","s":[{"r":"97","s":[{"value":["("]},{"r":"97","s":[{"r":"94","value":["24.0"," / "]},{"r":"96","s":[{"r":"95","s":[{"value":["Frequency"]}]},{"value":["."]},{"r":"96","s":[{"value":["value"]}]}]}]},{"value":[")"]}]},{"value":[" / "]},{"r":"100","s":[{"value":["("]},{"r":"100","s":[{"r":"98","value":["24"," * ","30"]}]},{"value":[")"]}]}]}]},{"value":[" /* assuming 30 days in month */\n      "]},{"r":"112","s":[{"value":["when "]},{"r":"103","s":[{"value":["'a'"]}]},{"value":[" then "]},{"r":"111","s":[{"r":"107","s":[{"value":["("]},{"r":"107","s":[{"r":"104","value":["24.0"," / "]},{"r":"106","s":[{"r":"105","s":[{"value":["Frequency"]}]},{"value":["."]},{"r":"106","s":[{"value":["value"]}]}]}]},{"value":[")"]}]},{"value":[" / "]},{"r":"110","s":[{"value":["("]},{"r":"110","s":[{"r":"108","value":["24"," * ","365"]}]},{"value":[")"]}]}]}]},{"value":[" /* assuming 365 days in year */\n      "]},{"r":"118","s":[{"value":["when "]},{"r":"113","s":[{"value":["'hour'"]}]},{"value":[" then "]},{"r":"117","s":[{"value":["("]},{"r":"117","s":[{"r":"114","value":["24.0"," / "]},{"r":"116","s":[{"r":"115","s":[{"value":["Frequency"]}]},{"value":["."]},{"r":"116","s":[{"value":["value"]}]}]}]},{"value":[")"]}]}]},{"value":["\n      "]},{"r":"126","s":[{"value":["when "]},{"r":"119","s":[{"value":["'minute'"]}]},{"value":[" then "]},{"r":"125","s":[{"r":"123","s":[{"value":["("]},{"r":"123","s":[{"r":"120","value":["24.0"," / "]},{"r":"122","s":[{"r":"121","s":[{"value":["Frequency"]}]},{"value":["."]},{"r":"122","s":[{"value":["value"]}]}]}]},{"value":[")"]}]},{"r":"124","value":[" * ","60"]}]}]},{"value":["\n      "]},{"r":"136","s":[{"value":["when "]},{"r":"127","s":[{"value":["'second'"]}]},{"value":[" then "]},{"r":"135","s":[{"r":"133","s":[{"r":"131","s":[{"value":["("]},{"r":"131","s":[{"r":"128","value":["24.0"," / "]},{"r":"130","s":[{"r":"129","s":[{"value":["Frequency"]}]},{"value":["."]},{"r":"130","s":[{"value":["value"]}]}]}]},{"value":[")"]}]},{"r":"132","value":[" * ","60"]}]},{"r":"134","value":[" * ","60"]}]}]},{"value":["\n      "]},{"r":"144","s":[{"value":["when "]},{"r":"137","s":[{"value":["'day'"]}]},{"value":[" then "]},{"r":"143","s":[{"r":"141","s":[{"value":["("]},{"r":"141","s":[{"r":"138","value":["24.0"," / "]},{"r":"140","s":[{"r":"139","s":[{"value":["Frequency"]}]},{"value":["."]},{"r":"140","s":[{"value":["value"]}]}]}]},{"value":[")"]}]},{"r":"142","value":[" / ","24"]}]}]},{"value":["\n      "]},{"r":"154","s":[{"value":["when "]},{"r":"145","s":[{"value":["'week'"]}]},{"value":[" then "]},{"r":"153","s":[{"r":"149","s":[{"value":["("]},{"r":"149","s":[{"r":"146","value":["24.0"," / "]},{"r":"148","s":[{"r":"147","s":[{"value":["Frequency"]}]},{"value":["."]},{"r":"148","s":[{"value":["value"]}]}]}]},{"value":[")"]}]},{"value":[" / "]},{"r":"152","s":[{"value":["("]},{"r":"152","s":[{"r":"150","value":["24"," * ","7"]}]},{"value":[")"]}]}]}]},{"value":["\n      "]},{"r":"164","s":[{"value":["when "]},{"r":"155","s":[{"value":["'month'"]}]},{"value":[" then "]},{"r":"163","s":[{"r":"159","s":[{"value":["("]},{"r":"159","s":[{"r":"156","value":["24.0"," / "]},{"r":"158","s":[{"r":"157","s":[{"value":["Frequency"]}]},{"value":["."]},{"r":"158","s":[{"value":["value"]}]}]}]},{"value":[")"]}]},{"value":[" / "]},{"r":"162","s":[{"value":["("]},{"r":"162","s":[{"r":"160","value":["24"," * ","30"]}]},{"value":[")"]}]}]}]},{"value":[" /* assuming 30 days in month */\n      "]},{"r":"174","s":[{"value":["when "]},{"r":"165","s":[{"value":["'year'"]}]},{"value":[" then "]},{"r":"173","s":[{"r":"169","s":[{"value":["("]},{"r":"169","s":[{"r":"166","value":["24.0"," / "]},{"r":"168","s":[{"r":"167","s":[{"value":["Frequency"]}]},{"value":["."]},{"r":"168","s":[{"value":["value"]}]}]}]},{"value":[")"]}]},{"value":[" / "]},{"r":"172","s":[{"value":["("]},{"r":"172","s":[{"r":"170","value":["24"," * ","365"]}]},{"value":[")"]}]}]}]},{"value":[" /* assuming 365 days in year */\n      "]},{"r":"180","s":[{"value":["when "]},{"r":"175","s":[{"value":["'hours'"]}]},{"value":[" then "]},{"r":"179","s":[{"value":["("]},{"r":"179","s":[{"r":"176","value":["24.0"," / "]},{"r":"178","s":[{"r":"177","s":[{"value":["Frequency"]}]},{"value":["."]},{"r":"178","s":[{"value":["value"]}]}]}]},{"value":[")"]}]}]},{"value":["\n      "]},{"r":"188","s":[{"value":["when "]},{"r":"181","s":[{"value":["'minutes'"]}]},{"value":[" then "]},{"r":"187","s":[{"r":"185","s":[{"value":["("]},{"r":"185","s":[{"r":"182","value":["24.0"," / "]},{"r":"184","s":[{"r":"183","s":[{"value":["Frequency"]}]},{"value":["."]},{"r":"184","s":[{"value":["value"]}]}]}]},{"value":[")"]}]},{"r":"186","value":[" * ","60"]}]}]},{"value":["\n      "]},{"r":"198","s":[{"value":["when "]},{"r":"189","s":[{"value":["'seconds'"]}]},{"value":[" then "]},{"r":"197","s":[{"r":"195","s":[{"r":"193","s":[{"value":["("]},{"r":"193","s":[{"r":"190","value":["24.0"," / "]},{"r":"192","s":[{"r":"191","s":[{"value":["Frequency"]}]},{"value":["."]},{"r":"192","s":[{"value":["value"]}]}]}]},{"value":[")"]}]},{"r":"194","value":[" * ","60"]}]},{"r":"196","value":[" * ","60"]}]}]},{"value":["\n      "]},{"r":"206","s":[{"value":["when "]},{"r":"199","s":[{"value":["'days'"]}]},{"value":[" then "]},{"r":"205","s":[{"r":"203","s":[{"value":["("]},{"r":"203","s":[{"r":"200","value":["24.0"," / "]},{"r":"202","s":[{"r":"201","s":[{"value":["Frequency"]}]},{"value":["."]},{"r":"202","s":[{"value":["value"]}]}]}]},{"value":[")"]}]},{"r":"204","value":[" / ","24"]}]}]},{"value":["\n      "]},{"r":"216","s":[{"value":["when "]},{"r":"207","s":[{"value":["'weeks'"]}]},{"value":[" then "]},{"r":"215","s":[{"r":"211","s":[{"value":["("]},{"r":"211","s":[{"r":"208","value":["24.0"," / "]},{"r":"210","s":[{"r":"209","s":[{"value":["Frequency"]}]},{"value":["."]},{"r":"210","s":[{"value":["value"]}]}]}]},{"value":[")"]}]},{"value":[" / "]},{"r":"214","s":[{"value":["("]},{"r":"214","s":[{"r":"212","value":["24"," * ","7"]}]},{"value":[")"]}]}]}]},{"value":["\n      "]},{"r":"226","s":[{"value":["when "]},{"r":"217","s":[{"value":["'months'"]}]},{"value":[" then "]},{"r":"225","s":[{"r":"221","s":[{"value":["("]},{"r":"221","s":[{"r":"218","value":["24.0"," / "]},{"r":"220","s":[{"r":"219","s":[{"value":["Frequency"]}]},{"value":["."]},{"r":"220","s":[{"value":["value"]}]}]}]},{"value":[")"]}]},{"value":[" / "]},{"r":"224","s":[{"value":["("]},{"r":"224","s":[{"r":"222","value":["24"," * ","30"]}]},{"value":[")"]}]}]}]},{"value":[" /* assuming 30 days in month */\n      "]},{"r":"236","s":[{"value":["when "]},{"r":"227","s":[{"value":["'years'"]}]},{"value":[" then "]},{"r":"235","s":[{"r":"231","s":[{"value":["("]},{"r":"231","s":[{"r":"228","value":["24.0"," / "]},{"r":"230","s":[{"r":"229","s":[{"value":["Frequency"]}]},{"value":["."]},{"r":"230","s":[{"value":["value"]}]}]}]},{"value":[")"]}]},{"value":[" / "]},{"r":"234","s":[{"value":["("]},{"r":"234","s":[{"r":"232","value":["24"," * ","365"]}]},{"value":[")"]}]}]}]},{"r":"237","value":[" /* assuming 365 days in year */\n      else ","null","\n    end"]}]}]}]}}],"expression":{"localId":"238","locator":"41:3-64:7","type":"Case","comparand":{"localId":"50","locator":"41:8-41:21","path":"unit","type":"Property","source":{"localId":"49","locator":"41:8-41:16","name":"Frequency","type":"OperandRef"}},"caseItem":[{"localId":"56","locator":"42:7-42:44","when":{"localId":"51","locator":"42:12-42:14","valueType":"{urn:hl7-org:elm-types:r1}String","value":"h","type":"Literal"},"then":{"localId":"55","locator":"42:21-42:44","type":"Divide","operand":[{"localId":"52","locator":"42:22-42:25","valueType":"{urn:hl7-org:elm-types:r1}Decimal","value":"24.0","type":"Literal"},{"localId":"54","locator":"42:29-42:43","path":"value","type":"Property","source":{"localId":"53","locator":"42:29-42:37","name":"Frequency","type":"OperandRef"}}]}},{"localId":"64","locator":"43:7-43:51","when":{"localId":"57","locator":"43:12-43:16","valueType":"{urn:hl7-org:elm-types:r1}String","value":"min","type":"Literal"},"then":{"localId":"63","locator":"43:23-43:51","type":"Multiply","operand":[{"localId":"61","locator":"43:23-43:46","type":"Divide","operand":[{"localId":"58","locator":"43:24-43:27","valueType":"{urn:hl7-org:elm-types:r1}Decimal","value":"24.0","type":"Literal"},{"localId":"60","locator":"43:31-43:45","path":"value","type":"Property","source":{"localId":"59","locator":"43:31-43:39","name":"Frequency","type":"OperandRef"}}]},{"type":"ToDecimal","operand":{"localId":"62","locator":"43:50-43:51","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"60","type":"Literal"}}]}},{"localId":"74","locator":"44:7-44:54","when":{"localId":"65","locator":"44:12-44:14","valueType":"{urn:hl7-org:elm-types:r1}String","value":"s","type":"Literal"},"then":{"localId":"73","locator":"44:21-44:54","type":"Multiply","operand":[{"localId":"71","locator":"44:21-44:49","type":"Multiply","operand":[{"localId":"69","locator":"44:21-44:44","type":"Divide","operand":[{"localId":"66","locator":"44:22-44:25","valueType":"{urn:hl7-org:elm-types:r1}Decimal","value":"24.0","type":"Literal"},{"localId":"68","locator":"44:29-44:43","path":"value","type":"Property","source":{"localId":"67","locator":"44:29-44:37","name":"Frequency","type":"OperandRef"}}]},{"type":"ToDecimal","operand":{"localId":"70","locator":"44:48-44:49","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"60","type":"Literal"}}]},{"type":"ToDecimal","operand":{"localId":"72","locator":"44:53-44:54","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"60","type":"Literal"}}]}},{"localId":"82","locator":"45:7-45:49","when":{"localId":"75","locator":"45:12-45:14","valueType":"{urn:hl7-org:elm-types:r1}String","value":"d","type":"Literal"},"then":{"localId":"81","locator":"45:21-45:49","type":"Divide","operand":[{"localId":"79","locator":"45:21-45:44","type":"Divide","operand":[{"localId":"76","locator":"45:22-45:25","valueType":"{urn:hl7-org:elm-types:r1}Decimal","value":"24.0","type":"Literal"},{"localId":"78","locator":"45:29-45:43","path":"value","type":"Property","source":{"localId":"77","locator":"45:29-45:37","name":"Frequency","type":"OperandRef"}}]},{"type":"ToDecimal","operand":{"localId":"80","locator":"45:48-45:49","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"24","type":"Literal"}}]}},{"localId":"92","locator":"46:7-46:56","when":{"localId":"83","locator":"46:12-46:15","valueType":"{urn:hl7-org:elm-types:r1}String","value":"wk","type":"Literal"},"then":{"localId":"91","locator":"46:22-46:56","type":"Divide","operand":[{"localId":"87","locator":"46:22-46:45","type":"Divide","operand":[{"localId":"84","locator":"46:23-46:26","valueType":"{urn:hl7-org:elm-types:r1}Decimal","value":"24.0","type":"Literal"},{"localId":"86","locator":"46:30-46:44","path":"value","type":"Property","source":{"localId":"85","locator":"46:30-46:38","name":"Frequency","type":"OperandRef"}}]},{"type":"ToDecimal","operand":{"localId":"90","locator":"46:49-46:56","type":"Multiply","operand":[{"localId":"88","locator":"46:50-46:51","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"24","type":"Literal"},{"localId":"89","locator":"46:55","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"7","type":"Literal"}]}}]}},{"localId":"102","locator":"47:7-47:57","when":{"localId":"93","locator":"47:12-47:15","valueType":"{urn:hl7-org:elm-types:r1}String","value":"mo","type":"Literal"},"then":{"localId":"101","locator":"47:22-47:57","type":"Divide","operand":[{"localId":"97","locator":"47:22-47:45","type":"Divide","operand":[{"localId":"94","locator":"47:23-47:26","valueType":"{urn:hl7-org:elm-types:r1}Decimal","value":"24.0","type":"Literal"},{"localId":"96","locator":"47:30-47:44","path":"value","type":"Property","source":{"localId":"95","locator":"47:30-47:38","name":"Frequency","type":"OperandRef"}}]},{"type":"ToDecimal","operand":{"localId":"100","locator":"47:49-47:57","type":"Multiply","operand":[{"localId":"98","locator":"47:50-47:51","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"24","type":"Literal"},{"localId":"99","locator":"47:55-47:56","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"30","type":"Literal"}]}}]}},{"localId":"112","locator":"48:7-48:57","when":{"localId":"103","locator":"48:12-48:14","valueType":"{urn:hl7-org:elm-types:r1}String","value":"a","type":"Literal"},"then":{"localId":"111","locator":"48:21-48:57","type":"Divide","operand":[{"localId":"107","locator":"48:21-48:44","type":"Divide","operand":[{"localId":"104","locator":"48:22-48:25","valueType":"{urn:hl7-org:elm-types:r1}Decimal","value":"24.0","type":"Literal"},{"localId":"106","locator":"48:29-48:43","path":"value","type":"Property","source":{"localId":"105","locator":"48:29-48:37","name":"Frequency","type":"OperandRef"}}]},{"type":"ToDecimal","operand":{"localId":"110","locator":"48:48-48:57","type":"Multiply","operand":[{"localId":"108","locator":"48:49-48:50","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"24","type":"Literal"},{"localId":"109","locator":"48:54-48:56","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"365","type":"Literal"}]}}]}},{"localId":"118","locator":"49:7-49:47","when":{"localId":"113","locator":"49:12-49:17","valueType":"{urn:hl7-org:elm-types:r1}String","value":"hour","type":"Literal"},"then":{"localId":"117","locator":"49:24-49:47","type":"Divide","operand":[{"localId":"114","locator":"49:25-49:28","valueType":"{urn:hl7-org:elm-types:r1}Decimal","value":"24.0","type":"Literal"},{"localId":"116","locator":"49:32-49:46","path":"value","type":"Property","source":{"localId":"115","locator":"49:32-49:40","name":"Frequency","type":"OperandRef"}}]}},{"localId":"126","locator":"50:7-50:54","when":{"localId":"119","locator":"50:12-50:19","valueType":"{urn:hl7-org:elm-types:r1}String","value":"minute","type":"Literal"},"then":{"localId":"125","locator":"50:26-50:54","type":"Multiply","operand":[{"localId":"123","locator":"50:26-50:49","type":"Divide","operand":[{"localId":"120","locator":"50:27-50:30","valueType":"{urn:hl7-org:elm-types:r1}Decimal","value":"24.0","type":"Literal"},{"localId":"122","locator":"50:34-50:48","path":"value","type":"Property","source":{"localId":"121","locator":"50:34-50:42","name":"Frequency","type":"OperandRef"}}]},{"type":"ToDecimal","operand":{"localId":"124","locator":"50:53-50:54","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"60","type":"Literal"}}]}},{"localId":"136","locator":"51:7-51:59","when":{"localId":"127","locator":"51:12-51:19","valueType":"{urn:hl7-org:elm-types:r1}String","value":"second","type":"Literal"},"then":{"localId":"135","locator":"51:26-51:59","type":"Multiply","operand":[{"localId":"133","locator":"51:26-51:54","type":"Multiply","operand":[{"localId":"131","locator":"51:26-51:49","type":"Divide","operand":[{"localId":"128","locator":"51:27-51:30","valueType":"{urn:hl7-org:elm-types:r1}Decimal","value":"24.0","type":"Literal"},{"localId":"130","locator":"51:34-51:48","path":"value","type":"Property","source":{"localId":"129","locator":"51:34-51:42","name":"Frequency","type":"OperandRef"}}]},{"type":"ToDecimal","operand":{"localId":"132","locator":"51:53-51:54","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"60","type":"Literal"}}]},{"type":"ToDecimal","operand":{"localId":"134","locator":"51:58-51:59","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"60","type":"Literal"}}]}},{"localId":"144","locator":"52:7-52:51","when":{"localId":"137","locator":"52:12-52:16","valueType":"{urn:hl7-org:elm-types:r1}String","value":"day","type":"Literal"},"then":{"localId":"143","locator":"52:23-52:51","type":"Divide","operand":[{"localId":"141","locator":"52:23-52:46","type":"Divide","operand":[{"localId":"138","locator":"52:24-52:27","valueType":"{urn:hl7-org:elm-types:r1}Decimal","value":"24.0","type":"Literal"},{"localId":"140","locator":"52:31-52:45","path":"value","type":"Property","source":{"localId":"139","locator":"52:31-52:39","name":"Frequency","type":"OperandRef"}}]},{"type":"ToDecimal","operand":{"localId":"142","locator":"52:50-52:51","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"24","type":"Literal"}}]}},{"localId":"154","locator":"53:7-53:58","when":{"localId":"145","locator":"53:12-53:17","valueType":"{urn:hl7-org:elm-types:r1}String","value":"week","type":"Literal"},"then":{"localId":"153","locator":"53:24-53:58","type":"Divide","operand":[{"localId":"149","locator":"53:24-53:47","type":"Divide","operand":[{"localId":"146","locator":"53:25-53:28","valueType":"{urn:hl7-org:elm-types:r1}Decimal","value":"24.0","type":"Literal"},{"localId":"148","locator":"53:32-53:46","path":"value","type":"Property","source":{"localId":"147","locator":"53:32-53:40","name":"Frequency","type":"OperandRef"}}]},{"type":"ToDecimal","operand":{"localId":"152","locator":"53:51-53:58","type":"Multiply","operand":[{"localId":"150","locator":"53:52-53:53","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"24","type":"Literal"},{"localId":"151","locator":"53:57","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"7","type":"Literal"}]}}]}},{"localId":"164","locator":"54:7-54:60","when":{"localId":"155","locator":"54:12-54:18","valueType":"{urn:hl7-org:elm-types:r1}String","value":"month","type":"Literal"},"then":{"localId":"163","locator":"54:25-54:60","type":"Divide","operand":[{"localId":"159","locator":"54:25-54:48","type":"Divide","operand":[{"localId":"156","locator":"54:26-54:29","valueType":"{urn:hl7-org:elm-types:r1}Decimal","value":"24.0","type":"Literal"},{"localId":"158","locator":"54:33-54:47","path":"value","type":"Property","source":{"localId":"157","locator":"54:33-54:41","name":"Frequency","type":"OperandRef"}}]},{"type":"ToDecimal","operand":{"localId":"162","locator":"54:52-54:60","type":"Multiply","operand":[{"localId":"160","locator":"54:53-54:54","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"24","type":"Literal"},{"localId":"161","locator":"54:58-54:59","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"30","type":"Literal"}]}}]}},{"localId":"174","locator":"55:7-55:60","when":{"localId":"165","locator":"55:12-55:17","valueType":"{urn:hl7-org:elm-types:r1}String","value":"year","type":"Literal"},"then":{"localId":"173","locator":"55:24-55:60","type":"Divide","operand":[{"localId":"169","locator":"55:24-55:47","type":"Divide","operand":[{"localId":"166","locator":"55:25-55:28","valueType":"{urn:hl7-org:elm-types:r1}Decimal","value":"24.0","type":"Literal"},{"localId":"168","locator":"55:32-55:46","path":"value","type":"Property","source":{"localId":"167","locator":"55:32-55:40","name":"Frequency","type":"OperandRef"}}]},{"type":"ToDecimal","operand":{"localId":"172","locator":"55:51-55:60","type":"Multiply","operand":[{"localId":"170","locator":"55:52-55:53","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"24","type":"Literal"},{"localId":"171","locator":"55:57-55:59","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"365","type":"Literal"}]}}]}},{"localId":"180","locator":"56:7-56:48","when":{"localId":"175","locator":"56:12-56:18","valueType":"{urn:hl7-org:elm-types:r1}String","value":"hours","type":"Literal"},"then":{"localId":"179","locator":"56:25-56:48","type":"Divide","operand":[{"localId":"176","locator":"56:26-56:29","valueType":"{urn:hl7-org:elm-types:r1}Decimal","value":"24.0","type":"Literal"},{"localId":"178","locator":"56:33-56:47","path":"value","type":"Property","source":{"localId":"177","locator":"56:33-56:41","name":"Frequency","type":"OperandRef"}}]}},{"localId":"188","locator":"57:7-57:55","when":{"localId":"181","locator":"57:12-57:20","valueType":"{urn:hl7-org:elm-types:r1}String","value":"minutes","type":"Literal"},"then":{"localId":"187","locator":"57:27-57:55","type":"Multiply","operand":[{"localId":"185","locator":"57:27-57:50","type":"Divide","operand":[{"localId":"182","locator":"57:28-57:31","valueType":"{urn:hl7-org:elm-types:r1}Decimal","value":"24.0","type":"Literal"},{"localId":"184","locator":"57:35-57:49","path":"value","type":"Property","source":{"localId":"183","locator":"57:35-57:43","name":"Frequency","type":"OperandRef"}}]},{"type":"ToDecimal","operand":{"localId":"186","locator":"57:54-57:55","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"60","type":"Literal"}}]}},{"localId":"198","locator":"58:7-58:60","when":{"localId":"189","locator":"58:12-58:20","valueType":"{urn:hl7-org:elm-types:r1}String","value":"seconds","type":"Literal"},"then":{"localId":"197","locator":"58:27-58:60","type":"Multiply","operand":[{"localId":"195","locator":"58:27-58:55","type":"Multiply","operand":[{"localId":"193","locator":"58:27-58:50","type":"Divide","operand":[{"localId":"190","locator":"58:28-58:31","valueType":"{urn:hl7-org:elm-types:r1}Decimal","value":"24.0","type":"Literal"},{"localId":"192","locator":"58:35-58:49","path":"value","type":"Property","source":{"localId":"191","locator":"58:35-58:43","name":"Frequency","type":"OperandRef"}}]},{"type":"ToDecimal","operand":{"localId":"194","locator":"58:54-58:55","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"60","type":"Literal"}}]},{"type":"ToDecimal","operand":{"localId":"196","locator":"58:59-58:60","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"60","type":"Literal"}}]}},{"localId":"206","locator":"59:7-59:52","when":{"localId":"199","locator":"59:12-59:17","valueType":"{urn:hl7-org:elm-types:r1}String","value":"days","type":"Literal"},"then":{"localId":"205","locator":"59:24-59:52","type":"Divide","operand":[{"localId":"203","locator":"59:24-59:47","type":"Divide","operand":[{"localId":"200","locator":"59:25-59:28","valueType":"{urn:hl7-org:elm-types:r1}Decimal","value":"24.0","type":"Literal"},{"localId":"202","locator":"59:32-59:46","path":"value","type":"Property","source":{"localId":"201","locator":"59:32-59:40","name":"Frequency","type":"OperandRef"}}]},{"type":"ToDecimal","operand":{"localId":"204","locator":"59:51-59:52","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"24","type":"Literal"}}]}},{"localId":"216","locator":"60:7-60:59","when":{"localId":"207","locator":"60:12-60:18","valueType":"{urn:hl7-org:elm-types:r1}String","value":"weeks","type":"Literal"},"then":{"localId":"215","locator":"60:25-60:59","type":"Divide","operand":[{"localId":"211","locator":"60:25-60:48","type":"Divide","operand":[{"localId":"208","locator":"60:26-60:29","valueType":"{urn:hl7-org:elm-types:r1}Decimal","value":"24.0","type":"Literal"},{"localId":"210","locator":"60:33-60:47","path":"value","type":"Property","source":{"localId":"209","locator":"60:33-60:41","name":"Frequency","type":"OperandRef"}}]},{"type":"ToDecimal","operand":{"localId":"214","locator":"60:52-60:59","type":"Multiply","operand":[{"localId":"212","locator":"60:53-60:54","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"24","type":"Literal"},{"localId":"213","locator":"60:58","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"7","type":"Literal"}]}}]}},{"localId":"226","locator":"61:7-61:61","when":{"localId":"217","locator":"61:12-61:19","valueType":"{urn:hl7-org:elm-types:r1}String","value":"months","type":"Literal"},"then":{"localId":"225","locator":"61:26-61:61","type":"Divide","operand":[{"localId":"221","locator":"61:26-61:49","type":"Divide","operand":[{"localId":"218","locator":"61:27-61:30","valueType":"{urn:hl7-org:elm-types:r1}Decimal","value":"24.0","type":"Literal"},{"localId":"220","locator":"61:34-61:48","path":"value","type":"Property","source":{"localId":"219","locator":"61:34-61:42","name":"Frequency","type":"OperandRef"}}]},{"type":"ToDecimal","operand":{"localId":"224","locator":"61:53-61:61","type":"Multiply","operand":[{"localId":"222","locator":"61:54-61:55","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"24","type":"Literal"},{"localId":"223","locator":"61:59-61:60","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"30","type":"Literal"}]}}]}},{"localId":"236","locator":"62:7-62:61","when":{"localId":"227","locator":"62:12-62:18","valueType":"{urn:hl7-org:elm-types:r1}String","value":"years","type":"Literal"},"then":{"localId":"235","locator":"62:25-62:61","type":"Divide","operand":[{"localId":"231","locator":"62:25-62:48","type":"Divide","operand":[{"localId":"228","locator":"62:26-62:29","valueType":"{urn:hl7-org:elm-types:r1}Decimal","value":"24.0","type":"Literal"},{"localId":"230","locator":"62:33-62:47","path":"value","type":"Property","source":{"localId":"229","locator":"62:33-62:41","name":"Frequency","type":"OperandRef"}}]},{"type":"ToDecimal","operand":{"localId":"234","locator":"62:52-62:61","type":"Multiply","operand":[{"localId":"232","locator":"62:53-62:54","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"24","type":"Literal"},{"localId":"233","locator":"62:58-62:60","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"365","type":"Literal"}]}}]}}],"else":{"asType":"{urn:hl7-org:elm-types:r1}Decimal","type":"As","operand":{"localId":"237","locator":"63:12-63:15","type":"Null"}}},"operand":[{"name":"Frequency","operandTypeSpecifier":{"localId":"48","locator":"40:45-40:52","name":"{urn:hl7-org:elm-types:r1}Quantity","type":"NamedTypeSpecifier"}}]},{"localId":"348","locator":"68:1-92:5","name":"CodeToDaily","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","t":[{"name":"description","value":"Returns the equivalent daily frequency (as a decimal) of the given code"},{"name":"description","value":"Returns the equivalent daily frequency (as a decimal) of the given code"},{"name":"comment","value":"Note that for ranges, the boundary resulting in the highest frequency result is used. E.g. `Every two to four hours` results in `12.0` and `One to two` times a day results in `2.0`."}],"s":{"r":"348","s":[{"value":["/*@description: Returns the equivalent daily frequency (as a decimal) of the given code\n@comment: Note that for ranges, the boundary resulting in the highest frequency result is used. E.g. `Every two to four hours` results in `12.0` and `One to two` times a day results in `2.0`.*/","define function ","\"CodeToDaily\"","(","Frequency"," "]},{"r":"240","s":[{"value":["Code"]}]},{"value":[" ):\n  "]},{"r":"347","s":[{"r":"347","s":[{"value":["case\n    "]},{"r":"245","s":[{"value":["when "]},{"r":"243","s":[{"r":"241","s":[{"value":["Frequency"]}]},{"value":[" ","~"," "]},{"r":"242","s":[{"value":["\"Once daily (qualifier value)\""]}]}]},{"r":"244","value":[" then ","1.0"]}]},{"value":["\n    "]},{"r":"250","s":[{"value":["when "]},{"r":"248","s":[{"r":"246","s":[{"value":["Frequency"]}]},{"value":[" ","~"," "]},{"r":"247","s":[{"value":["\"Twice a day (qualifier value)\""]}]}]},{"r":"249","value":[" then ","2.0"]}]},{"value":["\n    "]},{"r":"255","s":[{"value":["when "]},{"r":"253","s":[{"r":"251","s":[{"value":["Frequency"]}]},{"value":[" ","~"," "]},{"r":"252","s":[{"value":["\"Three times daily (qualifier value)\""]}]}]},{"r":"254","value":[" then ","3.0"]}]},{"value":["\n    "]},{"r":"260","s":[{"value":["when "]},{"r":"258","s":[{"r":"256","s":[{"value":["Frequency"]}]},{"value":[" ","~"," "]},{"r":"257","s":[{"value":["\"Four times daily (qualifier value)\""]}]}]},{"r":"259","value":[" then ","4.0"]}]},{"value":["\n    "]},{"r":"265","s":[{"value":["when "]},{"r":"263","s":[{"r":"261","s":[{"value":["Frequency"]}]},{"value":[" ","~"," "]},{"r":"262","s":[{"value":["\"Every twenty four hours (qualifier value)\""]}]}]},{"r":"264","value":[" then ","1.0"]}]},{"value":["\n    "]},{"r":"270","s":[{"value":["when "]},{"r":"268","s":[{"r":"266","s":[{"value":["Frequency"]}]},{"value":[" ","~"," "]},{"r":"267","s":[{"value":["\"Every twelve hours (qualifier value)\""]}]}]},{"r":"269","value":[" then ","2.0"]}]},{"value":["\n    "]},{"r":"275","s":[{"value":["when "]},{"r":"273","s":[{"r":"271","s":[{"value":["Frequency"]}]},{"value":[" ","~"," "]},{"r":"272","s":[{"value":["\"Every thirty six hours (qualifier value)\""]}]}]},{"r":"274","value":[" then ","0.67"]}]},{"value":["\n    "]},{"r":"280","s":[{"value":["when "]},{"r":"278","s":[{"r":"276","s":[{"value":["Frequency"]}]},{"value":[" ","~"," "]},{"r":"277","s":[{"value":["\"Every eight hours (qualifier value)\""]}]}]},{"r":"279","value":[" then ","3.0"]}]},{"value":["\n    "]},{"r":"285","s":[{"value":["when "]},{"r":"283","s":[{"r":"281","s":[{"value":["Frequency"]}]},{"value":[" ","~"," "]},{"r":"282","s":[{"value":["\"Every four hours (qualifier value)\""]}]}]},{"r":"284","value":[" then ","6.0"]}]},{"value":["\n    "]},{"r":"290","s":[{"value":["when "]},{"r":"288","s":[{"r":"286","s":[{"value":["Frequency"]}]},{"value":[" ","~"," "]},{"r":"287","s":[{"value":["\"Every six hours (qualifier value)\""]}]}]},{"r":"289","value":[" then ","4.0"]}]},{"value":["\n    "]},{"r":"295","s":[{"value":["when "]},{"r":"293","s":[{"r":"291","s":[{"value":["Frequency"]}]},{"value":[" ","~"," "]},{"r":"292","s":[{"value":["\"Every seventy two hours (qualifier value)\""]}]}]},{"r":"294","value":[" then ","0.33"]}]},{"value":["\n    "]},{"r":"300","s":[{"value":["when "]},{"r":"298","s":[{"r":"296","s":[{"value":["Frequency"]}]},{"value":[" ","~"," "]},{"r":"297","s":[{"value":["\"Every forty eight hours (qualifier value)\""]}]}]},{"r":"299","value":[" then ","0.5"]}]},{"value":["\n    "]},{"r":"305","s":[{"value":["when "]},{"r":"303","s":[{"r":"301","s":[{"value":["Frequency"]}]},{"value":[" ","~"," "]},{"r":"302","s":[{"value":["\"Every eight to twelve hours (qualifier value)\""]}]}]},{"r":"304","value":[" then ","3.0"]}]},{"value":["\n    "]},{"r":"310","s":[{"value":["when "]},{"r":"308","s":[{"r":"306","s":[{"value":["Frequency"]}]},{"value":[" ","~"," "]},{"r":"307","s":[{"value":["\"Every six to eight hours (qualifier value)\""]}]}]},{"r":"309","value":[" then ","4.0"]}]},{"value":["\n    "]},{"r":"315","s":[{"value":["when "]},{"r":"313","s":[{"r":"311","s":[{"value":["Frequency"]}]},{"value":[" ","~"," "]},{"r":"312","s":[{"value":["\"Every three to four hours (qualifier value)\""]}]}]},{"r":"314","value":[" then ","8.0"]}]},{"value":["\n    "]},{"r":"320","s":[{"value":["when "]},{"r":"318","s":[{"r":"316","s":[{"value":["Frequency"]}]},{"value":[" ","~"," "]},{"r":"317","s":[{"value":["\"Every three to six hours (qualifier value)\""]}]}]},{"r":"319","value":[" then ","8.0"]}]},{"value":["\n    "]},{"r":"325","s":[{"value":["when "]},{"r":"323","s":[{"r":"321","s":[{"value":["Frequency"]}]},{"value":[" ","~"," "]},{"r":"322","s":[{"value":["\"Every two to four hours (qualifier value)\""]}]}]},{"r":"324","value":[" then ","12.0"]}]},{"value":["\n    "]},{"r":"330","s":[{"value":["when "]},{"r":"328","s":[{"r":"326","s":[{"value":["Frequency"]}]},{"value":[" ","~"," "]},{"r":"327","s":[{"value":["\"One to four times a day (qualifier value)\""]}]}]},{"r":"329","value":[" then ","4.0"]}]},{"value":["\n    "]},{"r":"335","s":[{"value":["when "]},{"r":"333","s":[{"r":"331","s":[{"value":["Frequency"]}]},{"value":[" ","~"," "]},{"r":"332","s":[{"value":["\"One to three times a day (qualifier value)\""]}]}]},{"r":"334","value":[" then ","3.0"]}]},{"value":["\n    "]},{"r":"340","s":[{"value":["when "]},{"r":"338","s":[{"r":"336","s":[{"value":["Frequency"]}]},{"value":[" ","~"," "]},{"r":"337","s":[{"value":["\"One to two times a day (qualifier value)\""]}]}]},{"r":"339","value":[" then ","2.0"]}]},{"value":["\n    "]},{"r":"345","s":[{"value":["when "]},{"r":"343","s":[{"r":"341","s":[{"value":["Frequency"]}]},{"value":[" ","~"," "]},{"r":"342","s":[{"value":["\"Two to four times a day (qualifier value)\""]}]}]},{"r":"344","value":[" then ","4.0"]}]},{"r":"346","value":["\n    else ","null","\n  end"]}]}]}]}}],"expression":{"localId":"347","locator":"69:3-92:5","type":"Case","caseItem":[{"localId":"245","locator":"70:5-70:60","when":{"localId":"243","locator":"70:10-70:51","type":"Equivalent","operand":[{"localId":"241","locator":"70:10-70:18","name":"Frequency","type":"OperandRef"},{"localId":"242","locator":"70:22-70:51","name":"Once daily (qualifier value)","type":"CodeRef"}]},"then":{"localId":"244","locator":"70:58-70:60","valueType":"{urn:hl7-org:elm-types:r1}Decimal","value":"1.0","type":"Literal"}},{"localId":"250","locator":"71:5-71:61","when":{"localId":"248","locator":"71:10-71:52","type":"Equivalent","operand":[{"localId":"246","locator":"71:10-71:18","name":"Frequency","type":"OperandRef"},{"localId":"247","locator":"71:22-71:52","name":"Twice a day (qualifier value)","type":"CodeRef"}]},"then":{"localId":"249","locator":"71:59-71:61","valueType":"{urn:hl7-org:elm-types:r1}Decimal","value":"2.0","type":"Literal"}},{"localId":"255","locator":"72:5-72:67","when":{"localId":"253","locator":"72:10-72:58","type":"Equivalent","operand":[{"localId":"251","locator":"72:10-72:18","name":"Frequency","type":"OperandRef"},{"localId":"252","locator":"72:22-72:58","name":"Three times daily (qualifier value)","type":"CodeRef"}]},"then":{"localId":"254","locator":"72:65-72:67","valueType":"{urn:hl7-org:elm-types:r1}Decimal","value":"3.0","type":"Literal"}},{"localId":"260","locator":"73:5-73:66","when":{"localId":"258","locator":"73:10-73:57","type":"Equivalent","operand":[{"localId":"256","locator":"73:10-73:18","name":"Frequency","type":"OperandRef"},{"localId":"257","locator":"73:22-73:57","name":"Four times daily (qualifier value)","type":"CodeRef"}]},"then":{"localId":"259","locator":"73:64-73:66","valueType":"{urn:hl7-org:elm-types:r1}Decimal","value":"4.0","type":"Literal"}},{"localId":"265","locator":"74:5-74:73","when":{"localId":"263","locator":"74:10-74:64","type":"Equivalent","operand":[{"localId":"261","locator":"74:10-74:18","name":"Frequency","type":"OperandRef"},{"localId":"262","locator":"74:22-74:64","name":"Every twenty four hours (qualifier value)","type":"CodeRef"}]},"then":{"localId":"264","locator":"74:71-74:73","valueType":"{urn:hl7-org:elm-types:r1}Decimal","value":"1.0","type":"Literal"}},{"localId":"270","locator":"75:5-75:68","when":{"localId":"268","locator":"75:10-75:59","type":"Equivalent","operand":[{"localId":"266","locator":"75:10-75:18","name":"Frequency","type":"OperandRef"},{"localId":"267","locator":"75:22-75:59","name":"Every twelve hours (qualifier value)","type":"CodeRef"}]},"then":{"localId":"269","locator":"75:66-75:68","valueType":"{urn:hl7-org:elm-types:r1}Decimal","value":"2.0","type":"Literal"}},{"localId":"275","locator":"76:5-76:73","when":{"localId":"273","locator":"76:10-76:63","type":"Equivalent","operand":[{"localId":"271","locator":"76:10-76:18","name":"Frequency","type":"OperandRef"},{"localId":"272","locator":"76:22-76:63","name":"Every thirty six hours (qualifier value)","type":"CodeRef"}]},"then":{"localId":"274","locator":"76:70-76:73","valueType":"{urn:hl7-org:elm-types:r1}Decimal","value":"0.67","type":"Literal"}},{"localId":"280","locator":"77:5-77:67","when":{"localId":"278","locator":"77:10-77:58","type":"Equivalent","operand":[{"localId":"276","locator":"77:10-77:18","name":"Frequency","type":"OperandRef"},{"localId":"277","locator":"77:22-77:58","name":"Every eight hours (qualifier value)","type":"CodeRef"}]},"then":{"localId":"279","locator":"77:65-77:67","valueType":"{urn:hl7-org:elm-types:r1}Decimal","value":"3.0","type":"Literal"}},{"localId":"285","locator":"78:5-78:66","when":{"localId":"283","locator":"78:10-78:57","type":"Equivalent","operand":[{"localId":"281","locator":"78:10-78:18","name":"Frequency","type":"OperandRef"},{"localId":"282","locator":"78:22-78:57","name":"Every four hours (qualifier value)","type":"CodeRef"}]},"then":{"localId":"284","locator":"78:64-78:66","valueType":"{urn:hl7-org:elm-types:r1}Decimal","value":"6.0","type":"Literal"}},{"localId":"290","locator":"79:5-79:65","when":{"localId":"288","locator":"79:10-79:56","type":"Equivalent","operand":[{"localId":"286","locator":"79:10-79:18","name":"Frequency","type":"OperandRef"},{"localId":"287","locator":"79:22-79:56","name":"Every six hours (qualifier value)","type":"CodeRef"}]},"then":{"localId":"289","locator":"79:63-79:65","valueType":"{urn:hl7-org:elm-types:r1}Decimal","value":"4.0","type":"Literal"}},{"localId":"295","locator":"80:5-80:74","when":{"localId":"293","locator":"80:10-80:64","type":"Equivalent","operand":[{"localId":"291","locator":"80:10-80:18","name":"Frequency","type":"OperandRef"},{"localId":"292","locator":"80:22-80:64","name":"Every seventy two hours (qualifier value)","type":"CodeRef"}]},"then":{"localId":"294","locator":"80:71-80:74","valueType":"{urn:hl7-org:elm-types:r1}Decimal","value":"0.33","type":"Literal"}},{"localId":"300","locator":"81:5-81:73","when":{"localId":"298","locator":"81:10-81:64","type":"Equivalent","operand":[{"localId":"296","locator":"81:10-81:18","name":"Frequency","type":"OperandRef"},{"localId":"297","locator":"81:22-81:64","name":"Every forty eight hours (qualifier value)","type":"CodeRef"}]},"then":{"localId":"299","locator":"81:71-81:73","valueType":"{urn:hl7-org:elm-types:r1}Decimal","value":"0.5","type":"Literal"}},{"localId":"305","locator":"82:5-82:77","when":{"localId":"303","locator":"82:10-82:68","type":"Equivalent","operand":[{"localId":"301","locator":"82:10-82:18","name":"Frequency","type":"OperandRef"},{"localId":"302","locator":"82:22-82:68","name":"Every eight to twelve hours (qualifier value)","type":"CodeRef"}]},"then":{"localId":"304","locator":"82:75-82:77","valueType":"{urn:hl7-org:elm-types:r1}Decimal","value":"3.0","type":"Literal"}},{"localId":"310","locator":"83:5-83:74","when":{"localId":"308","locator":"83:10-83:65","type":"Equivalent","operand":[{"localId":"306","locator":"83:10-83:18","name":"Frequency","type":"OperandRef"},{"localId":"307","locator":"83:22-83:65","name":"Every six to eight hours (qualifier value)","type":"CodeRef"}]},"then":{"localId":"309","locator":"83:72-83:74","valueType":"{urn:hl7-org:elm-types:r1}Decimal","value":"4.0","type":"Literal"}},{"localId":"315","locator":"84:5-84:75","when":{"localId":"313","locator":"84:10-84:66","type":"Equivalent","operand":[{"localId":"311","locator":"84:10-84:18","name":"Frequency","type":"OperandRef"},{"localId":"312","locator":"84:22-84:66","name":"Every three to four hours (qualifier value)","type":"CodeRef"}]},"then":{"localId":"314","locator":"84:73-84:75","valueType":"{urn:hl7-org:elm-types:r1}Decimal","value":"8.0","type":"Literal"}},{"localId":"320","locator":"85:5-85:74","when":{"localId":"318","locator":"85:10-85:65","type":"Equivalent","operand":[{"localId":"316","locator":"85:10-85:18","name":"Frequency","type":"OperandRef"},{"localId":"317","locator":"85:22-85:65","name":"Every three to six hours (qualifier value)","type":"CodeRef"}]},"then":{"localId":"319","locator":"85:72-85:74","valueType":"{urn:hl7-org:elm-types:r1}Decimal","value":"8.0","type":"Literal"}},{"localId":"325","locator":"86:5-86:74","when":{"localId":"323","locator":"86:10-86:64","type":"Equivalent","operand":[{"localId":"321","locator":"86:10-86:18","name":"Frequency","type":"OperandRef"},{"localId":"322","locator":"86:22-86:64","name":"Every two to four hours (qualifier value)","type":"CodeRef"}]},"then":{"localId":"324","locator":"86:71-86:74","valueType":"{urn:hl7-org:elm-types:r1}Decimal","value":"12.0","type":"Literal"}},{"localId":"330","locator":"87:5-87:73","when":{"localId":"328","locator":"87:10-87:64","type":"Equivalent","operand":[{"localId":"326","locator":"87:10-87:18","name":"Frequency","type":"OperandRef"},{"localId":"327","locator":"87:22-87:64","name":"One to four times a day (qualifier value)","type":"CodeRef"}]},"then":{"localId":"329","locator":"87:71-87:73","valueType":"{urn:hl7-org:elm-types:r1}Decimal","value":"4.0","type":"Literal"}},{"localId":"335","locator":"88:5-88:74","when":{"localId":"333","locator":"88:10-88:65","type":"Equivalent","operand":[{"localId":"331","locator":"88:10-88:18","name":"Frequency","type":"OperandRef"},{"localId":"332","locator":"88:22-88:65","name":"One to three times a day (qualifier value)","type":"CodeRef"}]},"then":{"localId":"334","locator":"88:72-88:74","valueType":"{urn:hl7-org:elm-types:r1}Decimal","value":"3.0","type":"Literal"}},{"localId":"340","locator":"89:5-89:72","when":{"localId":"338","locator":"89:10-89:63","type":"Equivalent","operand":[{"localId":"336","locator":"89:10-89:18","name":"Frequency","type":"OperandRef"},{"localId":"337","locator":"89:22-89:63","name":"One to two times a day (qualifier value)","type":"CodeRef"}]},"then":{"localId":"339","locator":"89:70-89:72","valueType":"{urn:hl7-org:elm-types:r1}Decimal","value":"2.0","type":"Literal"}},{"localId":"345","locator":"90:5-90:73","when":{"localId":"343","locator":"90:10-90:64","type":"Equivalent","operand":[{"localId":"341","locator":"90:10-90:18","name":"Frequency","type":"OperandRef"},{"localId":"342","locator":"90:22-90:64","name":"Two to four times a day (qualifier value)","type":"CodeRef"}]},"then":{"localId":"344","locator":"90:71-90:73","valueType":"{urn:hl7-org:elm-types:r1}Decimal","value":"4.0","type":"Literal"}}],"else":{"asType":"{urn:hl7-org:elm-types:r1}Decimal","type":"As","operand":{"localId":"346","locator":"91:10-91:13","type":"Null"}}},"operand":[{"name":"Frequency","operandTypeSpecifier":{"localId":"240","locator":"68:41-68:44","name":"{urn:hl7-org:elm-types:r1}Code","type":"NamedTypeSpecifier"}}]},{"localId":"365","locator":"95:1-99:5","name":"ToDaily","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","t":[{"name":"description","value":"Returns the daily frequency (as a decimal) of the given input*/"},{"name":"description","value":"Returns the daily frequency (as a decimal) of the given input*/"}],"s":{"r":"365","s":[{"value":["/*@description: Returns the daily frequency (as a decimal) of the given input*/","define function ","\"ToDaily\"","(","Frequency"," "]},{"r":"351","s":[{"value":["Choice\u003c"]},{"r":"349","s":[{"value":["Quantity"]}]},{"value":[", "]},{"r":"350","s":[{"value":["Code"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"364","s":[{"r":"364","s":[{"value":["case\n    "]},{"r":"359","s":[{"value":["when "]},{"r":"354","s":[{"r":"352","s":[{"value":["Frequency"]}]},{"value":[" is "]},{"r":"353","s":[{"value":["Quantity"]}]}]},{"value":[" then "]},{"r":"358","s":[{"value":["QuantityToDaily","("]},{"r":"357","s":[{"r":"355","s":[{"value":["Frequency"]}]},{"value":[" as "]},{"r":"356","s":[{"value":["Quantity"]}]}]},{"value":[")"]}]}]},{"value":["\n    else "]},{"r":"363","s":[{"value":["CodeToDaily","("]},{"r":"362","s":[{"r":"360","s":[{"value":["Frequency"]}]},{"value":[" as "]},{"r":"361","s":[{"value":["Code"]}]}]},{"value":[")"]}]},{"value":["\n  end"]}]}]}]}}],"expression":{"localId":"364","locator":"96:3-99:5","type":"Case","caseItem":[{"localId":"359","locator":"97:5-97:74","when":{"localId":"354","locator":"97:10-97:30","type":"Is","operand":{"localId":"352","locator":"97:10-97:18","name":"Frequency","type":"OperandRef"},"isTypeSpecifier":{"localId":"353","locator":"97:23-97:30","name":"{urn:hl7-org:elm-types:r1}Quantity","type":"NamedTypeSpecifier"}},"then":{"localId":"358","locator":"97:37-97:74","name":"QuantityToDaily","type":"FunctionRef","operand":[{"localId":"357","locator":"97:53-97:73","strict":false,"type":"As","operand":{"localId":"355","locator":"97:53-97:61","name":"Frequency","type":"OperandRef"},"asTypeSpecifier":{"localId":"356","locator":"97:66-97:73","name":"{urn:hl7-org:elm-types:r1}Quantity","type":"NamedTypeSpecifier"}}]}}],"else":{"localId":"363","locator":"98:10-98:39","name":"CodeToDaily","type":"FunctionRef","operand":[{"localId":"362","locator":"98:22-98:38","strict":false,"type":"As","operand":{"localId":"360","locator":"98:22-98:30","name":"Frequency","type":"OperandRef"},"asTypeSpecifier":{"localId":"361","locator":"98:35-98:38","name":"{urn:hl7-org:elm-types:r1}Code","type":"NamedTypeSpecifier"}}]}},"operand":[{"name":"Frequency","operandTypeSpecifier":{"localId":"351","locator":"95:37-95:58","type":"ChoiceTypeSpecifier","choice":[{"localId":"349","locator":"95:44-95:51","name":"{urn:hl7-org:elm-types:r1}Quantity","type":"NamedTypeSpecifier"},{"localId":"350","locator":"95:54-95:57","name":"{urn:hl7-org:elm-types:r1}Code","type":"NamedTypeSpecifier"}]}}]},{"localId":"429","locator":"106:1-113:15","name":"MedicationOrderPeriod","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","t":[{"name":"description","value":"Calculates the Medication Period for a single Medication, Order"},{"name":"description","value":"Calculates the Medication Period for a single Medication, Order"},{"name":"comment","value":"This function calculates the expected period of a medication order using the following approach: If `supply`, `dosage`, and `frequency` elements are present, `daysSupplied` is derived by calculating `(supply / (dosage * frequency)) * (1 + refills)`. If `daysSupplied` element is present, the duration is `daysSupplied * (1 + refills)`. The result is then the interval from `relevantPeriod.low` to `relevantPeriod.low + daysSupplied`, or `authorDatetime` to `authorDatetime + daysSupplied`. Otherwise, the `relevantPeriod` element is used if present and completely specified.\n  Note that the supply and dosage Quantity values on the order are assumed to be in terms of the same unit, typically a tablet or mL."},{"name":"seealso","value":"[CumulativeMedicationDuration](https://github.com/cqframework/CQL-Formatting-and-Usage-Wiki/blob/master/Source/Libraries)\n  Note that relevantPeriod.low represents the interval's lower boundary and relevantPeriod.high represents the interval's higher boundary."}],"s":{"r":"429","s":[{"value":["/*@description: Calculates the Medication Period for a single Medication, Order\n  @comment: This function calculates the expected period of a medication order using the following approach: If `supply`, `dosage`, and `frequency` elements are present, `daysSupplied` is derived by calculating `(supply / (dosage * frequency)) * (1 + refills)`. If `daysSupplied` element is present, the duration is `daysSupplied * (1 + refills)`. The result is then the interval from `relevantPeriod.low` to `relevantPeriod.low + daysSupplied`, or `authorDatetime` to `authorDatetime + daysSupplied`. Otherwise, the `relevantPeriod` element is used if present and completely specified.\n  Note that the supply and dosage Quantity values on the order are assumed to be in terms of the same unit, typically a tablet or mL.\n  @seealso: [CumulativeMedicationDuration](https://github.com/cqframework/CQL-Formatting-and-Usage-Wiki/blob/master/Source/Libraries)\n  Note that relevantPeriod.low represents the interval's lower boundary and relevantPeriod.high represents the interval's higher boundary.*/","define function ","\"MedicationOrderPeriod\"","(","MedOrder"," "]},{"r":"366","s":[{"value":["\"Medication, Order\""]}]},{"value":[" ):\n  "]},{"r":"428","s":[{"r":"428","s":[{"s":[{"r":"368","s":[{"r":"367","s":[{"s":[{"value":["MedOrder"]}]}]},{"value":[" ","Order"]}]}]},{"value":["\n    "]},{"s":[{"value":["let "]},{"r":"376","s":[{"value":["startDate",": "]},{"r":"375","s":[{"value":["date from "]},{"r":"374","s":[{"value":["Coalesce","("]},{"r":"371","s":[{"r":"370","s":[{"r":"369","s":[{"value":["Order"]}]},{"value":["."]},{"r":"370","s":[{"value":["relevantPeriod"]}]}]},{"value":["."]},{"r":"371","s":[{"value":["low"]}]}]},{"value":[", "]},{"r":"373","s":[{"r":"372","s":[{"value":["Order"]}]},{"value":["."]},{"r":"373","s":[{"value":["authorDatetime"]}]}]},{"value":[")"]}]}]}]},{"value":[",\n    "]},{"r":"398","s":[{"value":["totalDaysSupplied",": "]},{"r":"397","s":[{"r":"390","s":[{"value":["Coalesce","("]},{"r":"387","s":[{"r":"379","s":[{"r":"378","s":[{"r":"377","s":[{"value":["Order"]}]},{"value":["."]},{"r":"378","s":[{"value":["supply"]}]}]},{"value":["."]},{"r":"379","s":[{"value":["value"]}]}]},{"value":[" /"]},{"r":"386","s":[{"value":["("]},{"r":"386","s":[{"r":"382","s":[{"r":"381","s":[{"r":"380","s":[{"value":["Order"]}]},{"value":["."]},{"r":"381","s":[{"value":["dosage"]}]}]},{"value":["."]},{"r":"382","s":[{"value":["value"]}]}]},{"value":[" * "]},{"r":"385","s":[{"value":["ToDaily","("]},{"r":"384","s":[{"r":"383","s":[{"value":["Order"]}]},{"value":["."]},{"r":"384","s":[{"value":["frequency"]}]}]},{"value":[")"]}]}]},{"value":[")"]}]}]},{"value":[", "]},{"r":"389","s":[{"r":"388","s":[{"value":["Order"]}]},{"value":["."]},{"r":"389","s":[{"value":["daysSupplied"]}]}]},{"value":[")"]}]},{"value":[" * "]},{"r":"396","s":[{"value":["( "]},{"r":"396","s":[{"r":"391","value":["1"," + "]},{"r":"395","s":[{"value":["Coalesce","("]},{"r":"393","s":[{"r":"392","s":[{"value":["Order"]}]},{"value":["."]},{"r":"393","s":[{"value":["refills"]}]}]},{"r":"394","value":[", ","0",")"]}]}]},{"value":[" )"]}]}]}]}]},{"value":["\n    "]},{"r":"427","s":[{"value":["return "]},{"r":"426","s":[{"value":["if "]},{"r":"400","s":[{"r":"399","s":[{"value":["startDate"]}]},{"value":[" is null"]}]},{"r":"401","value":[" then ","null"," \n      else "]},{"r":"425","s":[{"value":["if "]},{"r":"403","s":[{"r":"402","s":[{"value":["totalDaysSupplied"]}]},{"value":[" is not null"]}]},{"value":[" then "]},{"r":"412","s":[{"value":["Interval["]},{"r":"404","s":[{"value":["startDate"]}]},{"value":[", "]},{"r":"411","s":[{"r":"405","s":[{"value":["startDate"]}]},{"value":[" + "]},{"r":"410","s":[{"value":["Quantity"," { "]},{"s":[{"value":["value",": "]},{"r":"408","s":[{"r":"406","s":[{"value":["totalDaysSupplied"]}]},{"r":"407","value":[" - ","1"]}]}]},{"value":[", "]},{"s":[{"value":["unit",": "]},{"r":"409","s":[{"value":["'day'"]}]}]},{"value":[" }"]}]}]},{"value":["]"]}]},{"value":["\n      else "]},{"r":"424","s":[{"value":["if "]},{"r":"416","s":[{"r":"415","s":[{"r":"414","s":[{"r":"413","s":[{"value":["Order"]}]},{"value":["."]},{"r":"414","s":[{"value":["relevantPeriod"]}]}]},{"value":["."]},{"r":"415","s":[{"value":["high"]}]}]},{"value":[" is not null"]}]},{"value":[" then "]},{"r":"422","s":[{"value":["Interval["]},{"r":"417","s":[{"value":["startDate"]}]},{"value":[", "]},{"r":"421","s":[{"value":["date from "]},{"r":"420","s":[{"value":["end of "]},{"r":"419","s":[{"r":"418","s":[{"value":["Order"]}]},{"value":["."]},{"r":"419","s":[{"value":["relevantPeriod"]}]}]}]}]},{"value":["]"]}]},{"r":"423","value":["\n      else ","null"]}]}]}]}]}]}]}]}}],"expression":{"localId":"428","locator":"107:3-113:15","type":"Query","source":[{"localId":"368","locator":"107:3-107:16","alias":"Order","expression":{"localId":"367","locator":"107:3-107:10","name":"MedOrder","type":"OperandRef"}}],"let":[{"localId":"376","locator":"108:9-108:85","identifier":"startDate","expression":{"localId":"375","locator":"108:20-108:85","type":"DateFrom","operand":{"localId":"374","locator":"108:30-108:85","type":"Coalesce","operand":[{"localId":"371","locator":"108:39-108:62","path":"low","type":"Property","source":{"localId":"370","locator":"108:39-108:58","path":"relevantPeriod","scope":"Order","type":"Property"}},{"localId":"373","locator":"108:65-108:84","path":"authorDatetime","scope":"Order","type":"Property"}]}}},{"localId":"398","locator":"109:5-109:157","identifier":"totalDaysSupplied","expression":{"localId":"397","locator":"109:24-109:157","type":"Multiply","operand":[{"localId":"390","locator":"109:24-109:120","type":"Coalesce","operand":[{"localId":"387","locator":"109:33-109:99","type":"Divide","operand":[{"localId":"379","locator":"109:33-109:50","path":"value","type":"Property","source":{"localId":"378","locator":"109:33-109:44","path":"supply","scope":"Order","type":"Property"}},{"localId":"386","locator":"109:53-109:99","type":"Multiply","operand":[{"localId":"382","locator":"109:54-109:71","path":"value","type":"Property","source":{"localId":"381","locator":"109:54-109:65","path":"dosage","scope":"Order","type":"Property"}},{"localId":"385","locator":"109:75-109:98","name":"ToDaily","type":"FunctionRef","operand":[{"type":"As","operand":{"localId":"384","locator":"109:83-109:97","path":"frequency","scope":"Order","type":"Property"},"asTypeSpecifier":{"type":"ChoiceTypeSpecifier","choice":[{"name":"{urn:hl7-org:elm-types:r1}Quantity","type":"NamedTypeSpecifier"},{"name":"{urn:hl7-org:elm-types:r1}Code","type":"NamedTypeSpecifier"}]}}]}]}]},{"type":"ToDecimal","operand":{"localId":"389","locator":"109:102-109:119","path":"daysSupplied","scope":"Order","type":"Property"}}]},{"type":"ToDecimal","operand":{"localId":"396","locator":"109:124-109:157","type":"Add","operand":[{"localId":"391","locator":"109:126","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"1","type":"Literal"},{"localId":"395","locator":"109:130-109:155","type":"Coalesce","operand":[{"localId":"393","locator":"109:139-109:151","path":"refills","scope":"Order","type":"Property"},{"localId":"394","locator":"109:154","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"0","type":"Literal"}]}]}}]}}],"relationship":[],"return":{"localId":"427","locator":"110:5-113:15","expression":{"localId":"426","locator":"110:12-113:15","type":"If","condition":{"localId":"400","locator":"110:15-110:31","type":"IsNull","operand":{"localId":"399","locator":"110:15-110:23","name":"startDate","type":"QueryLetRef"}},"then":{"type":"As","operand":{"localId":"401","locator":"110:38-110:41","type":"Null"},"asTypeSpecifier":{"type":"IntervalTypeSpecifier","pointType":{"name":"{urn:hl7-org:elm-types:r1}Date","type":"NamedTypeSpecifier"}}},"else":{"localId":"425","locator":"111:12-113:15","type":"If","condition":{"localId":"403","locator":"111:15-111:43","type":"Not","operand":{"locator":"111:15-111:43","type":"IsNull","operand":{"localId":"402","locator":"111:15-111:31","name":"totalDaysSupplied","type":"QueryLetRef"}}},"then":{"localId":"412","locator":"111:50-111:136","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"404","locator":"111:59-111:67","name":"startDate","type":"QueryLetRef"},"high":{"localId":"411","locator":"111:70-111:135","type":"Add","operand":[{"localId":"405","locator":"111:70-111:78","name":"startDate","type":"QueryLetRef"},{"localId":"410","locator":"111:82-111:135","classType":"{urn:hl7-org:elm-types:r1}Quantity","type":"Instance","element":[{"name":"value","value":{"localId":"408","locator":"111:100-111:120","type":"Subtract","operand":[{"localId":"406","locator":"111:100-111:116","name":"totalDaysSupplied","type":"QueryLetRef"},{"type":"ToDecimal","operand":{"localId":"407","locator":"111:120","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"1","type":"Literal"}}]}},{"name":"unit","value":{"localId":"409","locator":"111:129-111:133","valueType":"{urn:hl7-org:elm-types:r1}String","value":"day","type":"Literal"}}]}]}},"else":{"localId":"424","locator":"112:12-113:15","type":"If","condition":{"localId":"416","locator":"112:15-112:51","type":"Not","operand":{"locator":"112:15-112:51","type":"IsNull","operand":{"localId":"415","locator":"112:15-112:39","path":"high","type":"Property","source":{"localId":"414","locator":"112:15-112:34","path":"relevantPeriod","scope":"Order","type":"Property"}}}},"then":{"localId":"422","locator":"112:58-112:115","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"417","locator":"112:67-112:75","name":"startDate","type":"QueryLetRef"},"high":{"localId":"421","locator":"112:78-112:114","type":"DateFrom","operand":{"localId":"420","locator":"112:88-112:114","type":"End","operand":{"localId":"419","locator":"112:95-112:114","path":"relevantPeriod","scope":"Order","type":"Property"}}}},"else":{"type":"As","operand":{"localId":"423","locator":"113:12-113:15","type":"Null"},"asTypeSpecifier":{"type":"IntervalTypeSpecifier","pointType":{"name":"{urn:hl7-org:elm-types:r1}Date","type":"NamedTypeSpecifier"}}}}}}}},"operand":[{"name":"MedOrder","operandTypeSpecifier":{"localId":"366","locator":"106:50-106:68","name":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationOrder","type":"NamedTypeSpecifier"}}]},{"localId":"488","locator":"120:1-127:15","name":"MedicationDispensedPeriod","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","t":[{"name":"description","value":"Calculates Medication Period for a given Medication, Dispensed"},{"name":"description","value":"Calculates Medication Period for a given Medication, Dispensed"},{"name":"comment","value":"This function calculates the effective duration of a single medication dispensing event using the following approach: If `supply`, `dosage`, and `frequency` elements are present, `daysSupplied` is derived by calculating `(supply / (dosage * frequency))`. If `daysSupplied` element is present, the duration is `daysSupplied`. The result is then the interval from `relevantPeriod.low` to `relevantPeriod.low + daysSupplied`, or `relevantDatetime` to `relevantDatetime + daysSupplied`, or `authorDatetime` to `authorDatetime + daysSupplied`. Otherwise, the `relevantPeriod` element is used if present and completely specified.\n  Note that the supply and dosage Quantity values on the order are assumed to be in terms of the same unit, typically a tablet or mL."},{"name":"seealso","value":"[CumulativeMedicationDuration](https://github.com/cqframework/CQL-Formatting-and-Usage-Wiki/blob/master/Source/Libraries)\n  Note that relevantPeriod.low represents the interval's lower boundary and relevantPeriod.high represents the interval's higher boundary."}],"s":{"r":"488","s":[{"value":["/*@description: Calculates Medication Period for a given Medication, Dispensed\n  @comment: This function calculates the effective duration of a single medication dispensing event using the following approach: If `supply`, `dosage`, and `frequency` elements are present, `daysSupplied` is derived by calculating `(supply / (dosage * frequency))`. If `daysSupplied` element is present, the duration is `daysSupplied`. The result is then the interval from `relevantPeriod.low` to `relevantPeriod.low + daysSupplied`, or `relevantDatetime` to `relevantDatetime + daysSupplied`, or `authorDatetime` to `authorDatetime + daysSupplied`. Otherwise, the `relevantPeriod` element is used if present and completely specified.\n  Note that the supply and dosage Quantity values on the order are assumed to be in terms of the same unit, typically a tablet or mL.\n  @seealso: [CumulativeMedicationDuration](https://github.com/cqframework/CQL-Formatting-and-Usage-Wiki/blob/master/Source/Libraries)\n  Note that relevantPeriod.low represents the interval's lower boundary and relevantPeriod.high represents the interval's higher boundary.*/","define function ","\"MedicationDispensedPeriod\"","(","MedDispense"," "]},{"r":"430","s":[{"value":["\"Medication, Dispensed\""]}]},{"value":[" ):\n  "]},{"r":"487","s":[{"r":"487","s":[{"s":[{"r":"432","s":[{"r":"431","s":[{"s":[{"value":["MedDispense"]}]}]},{"value":[" ","Dispense"]}]}]},{"value":["\n    "]},{"s":[{"value":["let "]},{"r":"442","s":[{"value":["startDate",": "]},{"r":"441","s":[{"value":["date from "]},{"r":"440","s":[{"value":["Coalesce","("]},{"r":"435","s":[{"r":"434","s":[{"r":"433","s":[{"value":["Dispense"]}]},{"value":["."]},{"r":"434","s":[{"value":["relevantPeriod"]}]}]},{"value":["."]},{"r":"435","s":[{"value":["low"]}]}]},{"value":[", "]},{"r":"437","s":[{"r":"436","s":[{"value":["Dispense"]}]},{"value":["."]},{"r":"437","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"439","s":[{"r":"438","s":[{"value":["Dispense"]}]},{"value":["."]},{"r":"439","s":[{"value":["authorDatetime"]}]}]},{"value":[")"]}]}]}]},{"value":[",\n    "]},{"r":"457","s":[{"value":["totalDaysSupplied",": "]},{"r":"456","s":[{"value":["Coalesce","("]},{"r":"453","s":[{"r":"445","s":[{"r":"444","s":[{"r":"443","s":[{"value":["Dispense"]}]},{"value":["."]},{"r":"444","s":[{"value":["supply"]}]}]},{"value":["."]},{"r":"445","s":[{"value":["value"]}]}]},{"value":[" /"]},{"r":"452","s":[{"value":["("]},{"r":"452","s":[{"r":"448","s":[{"r":"447","s":[{"r":"446","s":[{"value":["Dispense"]}]},{"value":["."]},{"r":"447","s":[{"value":["dosage"]}]}]},{"value":["."]},{"r":"448","s":[{"value":["value"]}]}]},{"value":[" * "]},{"r":"451","s":[{"value":["ToDaily","("]},{"r":"450","s":[{"r":"449","s":[{"value":["Dispense"]}]},{"value":["."]},{"r":"450","s":[{"value":["frequency"]}]}]},{"value":[")"]}]}]},{"value":[")"]}]}]},{"value":[", "]},{"r":"455","s":[{"r":"454","s":[{"value":["Dispense"]}]},{"value":["."]},{"r":"455","s":[{"value":["daysSupplied"]}]}]},{"value":[")"]}]}]}]},{"value":["\n    "]},{"r":"486","s":[{"value":["return "]},{"r":"485","s":[{"value":["if "]},{"r":"459","s":[{"r":"458","s":[{"value":["startDate"]}]},{"value":[" is null"]}]},{"r":"460","value":[" then ","null"," \n      else "]},{"r":"484","s":[{"value":["if "]},{"r":"462","s":[{"r":"461","s":[{"value":["totalDaysSupplied"]}]},{"value":[" is not null"]}]},{"value":[" then "]},{"r":"471","s":[{"value":["Interval["]},{"r":"463","s":[{"value":["startDate"]}]},{"value":[", "]},{"r":"470","s":[{"r":"464","s":[{"value":["startDate"]}]},{"value":[" + "]},{"r":"469","s":[{"value":["Quantity"," { "]},{"s":[{"value":["value",": "]},{"r":"467","s":[{"r":"465","s":[{"value":["totalDaysSupplied"]}]},{"r":"466","value":[" - ","1"]}]}]},{"value":[", "]},{"s":[{"value":["unit",": "]},{"r":"468","s":[{"value":["'day'"]}]}]},{"value":[" }"]}]}]},{"value":["]"]}]},{"value":["\n      else "]},{"r":"483","s":[{"value":["if "]},{"r":"475","s":[{"r":"474","s":[{"r":"473","s":[{"r":"472","s":[{"value":["Dispense"]}]},{"value":["."]},{"r":"473","s":[{"value":["relevantPeriod"]}]}]},{"value":["."]},{"r":"474","s":[{"value":["high"]}]}]},{"value":[" is not null"]}]},{"value":[" then "]},{"r":"481","s":[{"value":["Interval["]},{"r":"476","s":[{"value":["startDate"]}]},{"value":[", "]},{"r":"480","s":[{"value":["date from "]},{"r":"479","s":[{"value":["end of "]},{"r":"478","s":[{"r":"477","s":[{"value":["Dispense"]}]},{"value":["."]},{"r":"478","s":[{"value":["relevantPeriod"]}]}]}]}]},{"value":["]"]}]},{"r":"482","value":["\n      else ","null"]}]}]}]}]}]}]}]}}],"expression":{"localId":"487","locator":"121:3-127:15","type":"Query","source":[{"localId":"432","locator":"121:3-121:22","alias":"Dispense","expression":{"localId":"431","locator":"121:3-121:13","name":"MedDispense","type":"OperandRef"}}],"let":[{"localId":"442","locator":"122:9-122:118","identifier":"startDate","expression":{"localId":"441","locator":"122:20-122:118","type":"DateFrom","operand":{"localId":"440","locator":"122:30-122:118","type":"Coalesce","operand":[{"localId":"435","locator":"122:39-122:65","path":"low","type":"Property","source":{"localId":"434","locator":"122:39-122:61","path":"relevantPeriod","scope":"Dispense","type":"Property"}},{"localId":"437","locator":"122:68-122:92","path":"relevantDatetime","scope":"Dispense","type":"Property"},{"localId":"439","locator":"122:95-122:117","path":"authorDatetime","scope":"Dispense","type":"Property"}]}}},{"localId":"457","locator":"123:5-123:132","identifier":"totalDaysSupplied","expression":{"localId":"456","locator":"123:24-123:132","type":"Coalesce","operand":[{"localId":"453","locator":"123:33-123:108","type":"Divide","operand":[{"localId":"445","locator":"123:33-123:53","path":"value","type":"Property","source":{"localId":"444","locator":"123:33-123:47","path":"supply","scope":"Dispense","type":"Property"}},{"localId":"452","locator":"123:56-123:108","type":"Multiply","operand":[{"localId":"448","locator":"123:57-123:77","path":"value","type":"Property","source":{"localId":"447","locator":"123:57-123:71","path":"dosage","scope":"Dispense","type":"Property"}},{"localId":"451","locator":"123:81-123:107","name":"ToDaily","type":"FunctionRef","operand":[{"type":"As","operand":{"localId":"450","locator":"123:89-123:106","path":"frequency","scope":"Dispense","type":"Property"},"asTypeSpecifier":{"type":"ChoiceTypeSpecifier","choice":[{"name":"{urn:hl7-org:elm-types:r1}Quantity","type":"NamedTypeSpecifier"},{"name":"{urn:hl7-org:elm-types:r1}Code","type":"NamedTypeSpecifier"}]}}]}]}]},{"type":"ToDecimal","operand":{"localId":"455","locator":"123:111-123:131","path":"daysSupplied","scope":"Dispense","type":"Property"}}]}}],"relationship":[],"return":{"localId":"486","locator":"124:5-127:15","expression":{"localId":"485","locator":"124:12-127:15","type":"If","condition":{"localId":"459","locator":"124:15-124:31","type":"IsNull","operand":{"localId":"458","locator":"124:15-124:23","name":"startDate","type":"QueryLetRef"}},"then":{"type":"As","operand":{"localId":"460","locator":"124:38-124:41","type":"Null"},"asTypeSpecifier":{"type":"IntervalTypeSpecifier","pointType":{"name":"{urn:hl7-org:elm-types:r1}Date","type":"NamedTypeSpecifier"}}},"else":{"localId":"484","locator":"125:12-127:15","type":"If","condition":{"localId":"462","locator":"125:15-125:43","type":"Not","operand":{"locator":"125:15-125:43","type":"IsNull","operand":{"localId":"461","locator":"125:15-125:31","name":"totalDaysSupplied","type":"QueryLetRef"}}},"then":{"localId":"471","locator":"125:50-125:136","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"463","locator":"125:59-125:67","name":"startDate","type":"QueryLetRef"},"high":{"localId":"470","locator":"125:70-125:135","type":"Add","operand":[{"localId":"464","locator":"125:70-125:78","name":"startDate","type":"QueryLetRef"},{"localId":"469","locator":"125:82-125:135","classType":"{urn:hl7-org:elm-types:r1}Quantity","type":"Instance","element":[{"name":"value","value":{"localId":"467","locator":"125:100-125:120","type":"Subtract","operand":[{"localId":"465","locator":"125:100-125:116","name":"totalDaysSupplied","type":"QueryLetRef"},{"type":"ToDecimal","operand":{"localId":"466","locator":"125:120","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"1","type":"Literal"}}]}},{"name":"unit","value":{"localId":"468","locator":"125:129-125:133","valueType":"{urn:hl7-org:elm-types:r1}String","value":"day","type":"Literal"}}]}]}},"else":{"localId":"483","locator":"126:12-127:15","type":"If","condition":{"localId":"475","locator":"126:15-126:54","type":"Not","operand":{"locator":"126:15-126:54","type":"IsNull","operand":{"localId":"474","locator":"126:15-126:42","path":"high","type":"Property","source":{"localId":"473","locator":"126:15-126:37","path":"relevantPeriod","scope":"Dispense","type":"Property"}}}},"then":{"localId":"481","locator":"126:61-126:121","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"476","locator":"126:70-126:78","name":"startDate","type":"QueryLetRef"},"high":{"localId":"480","locator":"126:81-126:120","type":"DateFrom","operand":{"localId":"479","locator":"126:91-126:120","type":"End","operand":{"localId":"478","locator":"126:98-126:120","path":"relevantPeriod","scope":"Dispense","type":"Property"}}}},"else":{"type":"As","operand":{"localId":"482","locator":"127:12-127:15","type":"Null"},"asTypeSpecifier":{"type":"IntervalTypeSpecifier","pointType":{"name":"{urn:hl7-org:elm-types:r1}Date","type":"NamedTypeSpecifier"}}}}}}}},"operand":[{"name":"MedDispense","operandTypeSpecifier":{"localId":"430","locator":"120:57-120:79","name":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationDispensed","type":"NamedTypeSpecifier"}}]},{"localId":"491","locator":"133:1-134:9","name":"TherapeuticDuration","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","t":[{"name":"description","value":"Returns the established therapeutic duration for a given medication"},{"name":"description","value":"Returns the established therapeutic duration for a given medication"},{"name":"comment","value":"This is likely measure specific, though could potentially be established for any drug and distributed as a CodeSystem supplement. Defaulting to 14 days here for illustration."},{"name":"seealso","value":"[CumulativeMedicationDuration](https://github.com/cqframework/CQL-Formatting-and-Usage-Wiki/blob/master/Source/Libraries)\n  Note that this function is still under development and should not be used."}],"s":{"r":"491","s":[{"value":["/*@description: Returns the established therapeutic duration for a given medication\n  @comment: This is likely measure specific, though could potentially be established for any drug and distributed as a CodeSystem supplement. Defaulting to 14 days here for illustration.\n  @seealso: [CumulativeMedicationDuration](https://github.com/cqframework/CQL-Formatting-and-Usage-Wiki/blob/master/Source/Libraries)\n  Note that this function is still under development and should not be used.*/","define function ","\"TherapeuticDuration\"","(","medication"," "]},{"r":"489","s":[{"value":["Code"]}]},{"value":[" ):\n  "]},{"r":"490","s":[{"r":"490","s":[{"value":["14 ","days"]}]}]}]}}],"expression":{"localId":"490","locator":"134:3-134:9","value":14,"unit":"days","type":"Quantity"},"operand":[{"name":"medication","operandTypeSpecifier":{"localId":"489","locator":"133:50-133:53","name":"{urn:hl7-org:elm-types:r1}Code","type":"NamedTypeSpecifier"}}]},{"localId":"523","locator":"140:1-149:15","name":"MedicationAdministrationPeriod","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","t":[{"name":"description","value":"Calculates Medication Period for a given Medication, Administration"},{"name":"description","value":"Calculates Medication Period for a given Medication, Administration"},{"name":"comment","value":"This function calculates the effective duration of a single medication administration event using the following approach: If a TherapeuticDuration is defined for the medication, the result is the interval from the earliest of the `relevantDatetime` and `relevantPeriod` elements, to the end of the therapeutic duration."},{"name":"seealso","value":"[CumulativeMedicationDuration](https://github.com/cqframework/CQL-Formatting-and-Usage-Wiki/blob/master/Source/Libraries)\n  Note that this function is still under development and should not be used."}],"s":{"r":"523","s":[{"value":["/*@description: Calculates Medication Period for a given Medication, Administration\n  @comment: This function calculates the effective duration of a single medication administration event using the following approach: If a TherapeuticDuration is defined for the medication, the result is the interval from the earliest of the `relevantDatetime` and `relevantPeriod` elements, to the end of the therapeutic duration.\n  @seealso: [CumulativeMedicationDuration](https://github.com/cqframework/CQL-Formatting-and-Usage-Wiki/blob/master/Source/Libraries)\n  Note that this function is still under development and should not be used.*/","define function ","\"MedicationAdministrationPeriod\"","(","MedAdministration"," "]},{"r":"492","s":[{"value":["\"Medication, Administered\""]}]},{"value":[" ):\n  "]},{"r":"522","s":[{"r":"522","s":[{"s":[{"r":"494","s":[{"r":"493","s":[{"s":[{"value":["MedAdministration"]}]}]},{"value":[" ","Administration"]}]}]},{"value":["\n       "]},{"s":[{"value":["let\n         "]},{"r":"498","s":[{"value":["therapeuticDuration",": "]},{"r":"497","s":[{"value":["TherapeuticDuration","("]},{"r":"496","s":[{"r":"495","s":[{"value":["Administration"]}]},{"value":["."]},{"r":"496","s":[{"value":["code"]}]}]},{"value":[")"]}]}]},{"value":[",\n         "]},{"r":"506","s":[{"value":["startDate",": "]},{"r":"505","s":[{"value":["date from "]},{"r":"504","s":[{"r":"499","s":[{"value":["Global"]}]},{"value":["."]},{"r":"504","s":[{"value":["EarliestOf","("]},{"r":"501","s":[{"r":"500","s":[{"value":["Administration"]}]},{"value":["."]},{"r":"501","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"503","s":[{"r":"502","s":[{"value":["Administration"]}]},{"value":["."]},{"r":"503","s":[{"value":["relevantPeriod"]}]}]},{"value":[")"]}]}]}]}]}]},{"value":["\n       "]},{"r":"521","s":[{"value":["return\n         "]},{"r":"520","s":[{"value":["if "]},{"r":"511","s":[{"r":"508","s":[{"r":"507","s":[{"value":["startDate"]}]},{"value":[" is not null"]}]},{"value":[" and "]},{"r":"510","s":[{"r":"509","s":[{"value":["therapeuticDuration"]}]},{"value":[" is not null"]}]}]},{"value":[" then\n           "]},{"r":"518","s":[{"value":["Interval["]},{"r":"512","s":[{"value":["startDate"]}]},{"value":[", "]},{"r":"517","s":[{"r":"515","s":[{"r":"513","s":[{"value":["startDate"]}]},{"value":[" + "]},{"r":"514","s":[{"value":["therapeuticDuration"]}]}]},{"r":"516","value":[" - ","1"]}]},{"value":["]"]}]},{"r":"519","value":["\n         else\n           ","null"]}]}]}]}]}]}}],"expression":{"localId":"522","locator":"141:3-149:15","type":"Query","source":[{"localId":"494","locator":"141:3-141:34","alias":"Administration","expression":{"localId":"493","locator":"141:3-141:19","name":"MedAdministration","type":"OperandRef"}}],"let":[{"localId":"498","locator":"143:10-143:70","identifier":"therapeuticDuration","expression":{"localId":"497","locator":"143:31-143:70","name":"TherapeuticDuration","type":"FunctionRef","operand":[{"localId":"496","locator":"143:51-143:69","path":"code","scope":"Administration","type":"Property"}]}},{"localId":"506","locator":"144:10-144:111","identifier":"startDate","expression":{"localId":"505","locator":"144:21-144:111","type":"DateFrom","operand":{"localId":"504","locator":"144:31-144:111","name":"EarliestOf","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"501","locator":"144:49-144:79","path":"relevantDatetime","scope":"Administration","type":"Property"},{"localId":"503","locator":"144:82-144:110","path":"relevantPeriod","scope":"Administration","type":"Property"}]}}}],"relationship":[],"return":{"localId":"521","locator":"145:8-149:15","expression":{"localId":"520","locator":"146:10-149:15","type":"If","condition":{"localId":"511","locator":"146:13-146:69","type":"And","operand":[{"localId":"508","locator":"146:13-146:33","type":"Not","operand":{"locator":"146:13-146:33","type":"IsNull","operand":{"localId":"507","locator":"146:13-146:21","name":"startDate","type":"QueryLetRef"}}},{"localId":"510","locator":"146:39-146:69","type":"Not","operand":{"locator":"146:39-146:69","type":"IsNull","operand":{"localId":"509","locator":"146:39-146:57","name":"therapeuticDuration","type":"QueryLetRef"}}}]},"then":{"localId":"518","locator":"147:12-147:67","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"512","locator":"147:21-147:29","name":"startDate","type":"QueryLetRef"},"high":{"localId":"517","locator":"147:32-147:66","type":"Subtract","operand":[{"localId":"515","locator":"147:32-147:62","type":"Add","operand":[{"localId":"513","locator":"147:32-147:40","name":"startDate","type":"QueryLetRef"},{"localId":"514","locator":"147:44-147:62","name":"therapeuticDuration","type":"QueryLetRef"}]},{"type":"ToQuantity","operand":{"localId":"516","locator":"147:66","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"1","type":"Literal"}}]}},"else":{"type":"As","operand":{"localId":"519","locator":"149:12-149:15","type":"Null"},"asTypeSpecifier":{"type":"IntervalTypeSpecifier","pointType":{"name":"{urn:hl7-org:elm-types:r1}Date","type":"NamedTypeSpecifier"}}}}}},"operand":[{"name":"MedAdministration","operandTypeSpecifier":{"localId":"492","locator":"140:68-140:93","name":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationAdministered","type":"NamedTypeSpecifier"}}]},{"localId":"569","locator":"156:1-168:12","name":"MedicationDischargePeriod","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","t":[{"name":"description","value":"Calculates the Medication Period for a Medication, Discharge"},{"name":"description","value":"Calculates the Medication Period for a Medication, Discharge"},{"name":"comment","value":"This function calculates the effective duration of a single medication discharge event using the following approach: If the `daysSupplied` element is present, the duration is `daysSupplied * (1 + refills)`. Otherwise, the duration is calculated using `(supply / (dosage * frequency)) * (1 + refills)`. The result is then the interval from `authorDatetime` to `authorDatetime + daysSupplied`.\nNote that the supply and dosage Quantity values on the order are assumed to be in terms of the same unit, typically a tablet or mL."},{"name":"seealso","value":"[CumulativeMedicationDuration](https://github.com/cqframework/CQL-Formatting-and-Usage-Wiki/blob/master/Source/Libraries)\nNote that this function has not been tested."}],"s":{"r":"569","s":[{"value":["/*@description: Calculates the Medication Period for a Medication, Discharge\n@comment: This function calculates the effective duration of a single medication discharge event using the following approach: If the `daysSupplied` element is present, the duration is `daysSupplied * (1 + refills)`. Otherwise, the duration is calculated using `(supply / (dosage * frequency)) * (1 + refills)`. The result is then the interval from `authorDatetime` to `authorDatetime + daysSupplied`.\nNote that the supply and dosage Quantity values on the order are assumed to be in terms of the same unit, typically a tablet or mL.\n@seealso: [CumulativeMedicationDuration](https://github.com/cqframework/CQL-Formatting-and-Usage-Wiki/blob/master/Source/Libraries)\nNote that this function has not been tested.*/","define function ","\"MedicationDischargePeriod\"","(","Medication"," "]},{"r":"524","s":[{"value":["\"Medication, Discharge\""]}]},{"value":[" ):\n  "]},{"r":"568","s":[{"r":"568","s":[{"s":[{"r":"546","s":[{"r":"545","s":[{"value":["(\n    "]},{"r":"545","s":[{"r":"538","s":[{"value":["Coalesce","(\n      "]},{"r":"526","s":[{"r":"525","s":[{"value":["Medication"]}]},{"value":["."]},{"r":"526","s":[{"value":["daysSupplied"]}]}]},{"value":[",\n      "]},{"r":"537","s":[{"r":"529","s":[{"r":"528","s":[{"r":"527","s":[{"value":["Medication"]}]},{"value":["."]},{"r":"528","s":[{"value":["supply"]}]}]},{"value":["."]},{"r":"529","s":[{"value":["value"]}]}]},{"value":[" / "]},{"r":"536","s":[{"value":["("]},{"r":"536","s":[{"r":"532","s":[{"r":"531","s":[{"r":"530","s":[{"value":["Medication"]}]},{"value":["."]},{"r":"531","s":[{"value":["dosage"]}]}]},{"value":["."]},{"r":"532","s":[{"value":["value"]}]}]},{"value":[" * "]},{"r":"535","s":[{"value":["ToDaily","("]},{"r":"534","s":[{"r":"533","s":[{"value":["Medication"]}]},{"value":["."]},{"r":"534","s":[{"value":["frequency"]}]}]},{"value":[")"]}]}]},{"value":[")"]}]}]},{"value":["\n    )"]}]},{"value":[" * "]},{"r":"544","s":[{"value":["("]},{"r":"544","s":[{"r":"539","value":["1"," + "]},{"r":"543","s":[{"value":["Coalesce","("]},{"r":"541","s":[{"r":"540","s":[{"value":["Medication"]}]},{"value":["."]},{"r":"541","s":[{"value":["refills"]}]}]},{"r":"542","value":[", ","0",")"]}]}]},{"value":[")"]}]}]},{"value":["\n  )"]}]},{"value":[" ","totalDaysSupplied"]}]}]},{"value":["\n    "]},{"s":[{"value":["let "]},{"r":"550","s":[{"value":["startDate",": "]},{"r":"549","s":[{"value":["date from "]},{"r":"548","s":[{"r":"547","s":[{"value":["Medication"]}]},{"value":["."]},{"r":"548","s":[{"value":["authorDatetime"]}]}]}]}]}]},{"value":["\n    "]},{"r":"567","s":[{"value":["return\n      "]},{"r":"566","s":[{"value":["if "]},{"r":"555","s":[{"r":"552","s":[{"r":"551","s":[{"value":["startDate"]}]},{"value":[" is not null"]}]},{"value":[" and "]},{"r":"554","s":[{"r":"553","s":[{"value":["totalDaysSupplied"]}]},{"value":[" is not null"]}]}]},{"value":[" then\n        "]},{"r":"564","s":[{"value":["Interval["]},{"r":"556","s":[{"value":["startDate"]}]},{"value":[", "]},{"r":"563","s":[{"r":"557","s":[{"value":["startDate"]}]},{"value":[" + "]},{"r":"562","s":[{"value":["Quantity"," { "]},{"s":[{"value":["value",": "]},{"r":"560","s":[{"r":"558","s":[{"value":["totalDaysSupplied"]}]},{"r":"559","value":[" - ","1"]}]}]},{"value":[", "]},{"s":[{"value":["unit",": "]},{"r":"561","s":[{"value":["'day'"]}]}]},{"value":[" }"]}]}]},{"value":["]"]}]},{"r":"565","value":["\n      else\n        ","null"]}]}]}]}]}]}}],"expression":{"localId":"568","locator":"157:3-168:12","type":"Query","source":[{"localId":"546","locator":"157:3-162:21","alias":"totalDaysSupplied","expression":{"localId":"545","locator":"157:3-162:3","type":"Multiply","operand":[{"localId":"538","locator":"158:5-161:5","type":"Coalesce","operand":[{"type":"ToDecimal","operand":{"localId":"526","locator":"159:7-159:29","path":"daysSupplied","type":"Property","source":{"localId":"525","locator":"159:7-159:16","name":"Medication","type":"OperandRef"}}},{"localId":"537","locator":"160:7-160:89","type":"Divide","operand":[{"localId":"529","locator":"160:7-160:29","path":"value","type":"Property","source":{"localId":"528","locator":"160:7-160:23","path":"supply","type":"Property","source":{"localId":"527","locator":"160:7-160:16","name":"Medication","type":"OperandRef"}}},{"localId":"536","locator":"160:33-160:89","type":"Multiply","operand":[{"localId":"532","locator":"160:34-160:56","path":"value","type":"Property","source":{"localId":"531","locator":"160:34-160:50","path":"dosage","type":"Property","source":{"localId":"530","locator":"160:34-160:43","name":"Medication","type":"OperandRef"}}},{"localId":"535","locator":"160:60-160:88","name":"ToDaily","type":"FunctionRef","operand":[{"type":"As","operand":{"localId":"534","locator":"160:68-160:87","path":"frequency","type":"Property","source":{"localId":"533","locator":"160:68-160:77","name":"Medication","type":"OperandRef"}},"asTypeSpecifier":{"type":"ChoiceTypeSpecifier","choice":[{"name":"{urn:hl7-org:elm-types:r1}Quantity","type":"NamedTypeSpecifier"},{"name":"{urn:hl7-org:elm-types:r1}Code","type":"NamedTypeSpecifier"}]}}]}]}]}]},{"type":"ToDecimal","operand":{"localId":"544","locator":"161:9-161:45","type":"Add","operand":[{"localId":"539","locator":"161:10","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"1","type":"Literal"},{"localId":"543","locator":"161:14-161:44","type":"Coalesce","operand":[{"localId":"541","locator":"161:23-161:40","path":"refills","type":"Property","source":{"localId":"540","locator":"161:23-161:32","name":"Medication","type":"OperandRef"}},{"localId":"542","locator":"161:43","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"0","type":"Literal"}]}]}}]}}],"let":[{"localId":"550","locator":"163:9-163:54","identifier":"startDate","expression":{"localId":"549","locator":"163:20-163:54","type":"DateFrom","operand":{"localId":"548","locator":"163:30-163:54","path":"authorDatetime","type":"Property","source":{"localId":"547","locator":"163:30-163:39","name":"Medication","type":"OperandRef"}}}}],"relationship":[],"return":{"localId":"567","locator":"164:5-168:12","expression":{"localId":"566","locator":"165:7-168:12","type":"If","condition":{"localId":"555","locator":"165:10-165:64","type":"And","operand":[{"localId":"552","locator":"165:10-165:30","type":"Not","operand":{"locator":"165:10-165:30","type":"IsNull","operand":{"localId":"551","locator":"165:10-165:18","name":"startDate","type":"QueryLetRef"}}},{"localId":"554","locator":"165:36-165:64","type":"Not","operand":{"locator":"165:36-165:64","type":"IsNull","operand":{"localId":"553","locator":"165:36-165:52","name":"totalDaysSupplied","type":"AliasRef"}}}]},"then":{"localId":"564","locator":"166:9-166:95","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"556","locator":"166:18-166:26","name":"startDate","type":"QueryLetRef"},"high":{"localId":"563","locator":"166:29-166:94","type":"Add","operand":[{"localId":"557","locator":"166:29-166:37","name":"startDate","type":"QueryLetRef"},{"localId":"562","locator":"166:41-166:94","classType":"{urn:hl7-org:elm-types:r1}Quantity","type":"Instance","element":[{"name":"value","value":{"localId":"560","locator":"166:59-166:79","type":"Subtract","operand":[{"localId":"558","locator":"166:59-166:75","name":"totalDaysSupplied","type":"AliasRef"},{"type":"ToDecimal","operand":{"localId":"559","locator":"166:79","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"1","type":"Literal"}}]}},{"name":"unit","value":{"localId":"561","locator":"166:88-166:92","valueType":"{urn:hl7-org:elm-types:r1}String","value":"day","type":"Literal"}}]}]}},"else":{"type":"As","operand":{"localId":"565","locator":"168:9-168:12","type":"Null"},"asTypeSpecifier":{"type":"IntervalTypeSpecifier","pointType":{"name":"{urn:hl7-org:elm-types:r1}Date","type":"NamedTypeSpecifier"}}}}}},"operand":[{"name":"Medication","operandTypeSpecifier":{"localId":"524","locator":"156:56-156:78","name":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationDischarge","type":"NamedTypeSpecifier"}}]},{"localId":"590","locator":"172:1-179:13","name":"CumulativeDuration","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","t":[{"name":"description","value":"Returns the total duration in days covered by the given periods"},{"name":"description","value":"Returns the total duration in days covered by the given periods"},{"name":"comment","value":"This function calculates the total duration in days covered by the given periods. If multiple periods in the input include the same day, that day is only counted once in the final result."}],"s":{"r":"590","s":[{"value":["/*@description: Returns the total duration in days covered by the given periods\n  @comment: This function calculates the total duration in days covered by the given periods. If multiple periods in the input include the same day, that day is only counted once in the final result.*/","define function ","\"CumulativeDuration\"","(","Intervals"," "]},{"r":"572","s":[{"value":["List\u003c"]},{"r":"571","s":[{"value":["Interval\u003c"]},{"r":"570","s":[{"value":["Date"]}]},{"value":["\u003e"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"589","s":[{"r":"589","s":[{"value":["if "]},{"r":"574","s":[{"r":"573","s":[{"value":["Intervals"]}]},{"value":[" is not null"]}]},{"value":[" then "]},{"r":"587","s":[{"value":["( "]},{"r":"587","s":[{"value":["Sum","("]},{"r":"586","s":[{"s":[{"r":"577","s":[{"r":"576","s":[{"value":["("]},{"r":"576","s":[{"value":["collapse "]},{"r":"575","s":[{"value":["Intervals"]}]},{"value":[" per ","day"]}]},{"value":[")"]}]},{"value":["X"]}]}]},{"value":["\n        "]},{"r":"585","s":[{"value":["return all"]},{"r":"584","s":[{"r":"582","s":[{"value":["("]},{"r":"582","s":[{"value":["difference in days between "]},{"r":"579","s":[{"value":["start of "]},{"r":"578","s":[{"value":["X"]}]}]},{"value":[" and \n          "]},{"r":"581","s":[{"value":["end of "]},{"r":"580","s":[{"value":["X"]}]}]}]},{"value":["\n        )"]}]},{"r":"583","value":["+ ","1"]}]}]}]},{"value":["\n    )"]}]},{"value":["\n  )"]}]},{"r":"588","value":[" \n    else ","null"]}]}]}]}}],"expression":{"localId":"589","locator":"173:3-179:13","type":"If","condition":{"localId":"574","locator":"173:6-173:26","type":"Not","operand":{"locator":"173:6-173:26","type":"IsNull","operand":{"localId":"573","locator":"173:6-173:14","name":"Intervals","type":"OperandRef"}}},"then":{"localId":"587","locator":"173:33-178:3","type":"Sum","source":{"localId":"586","locator":"173:39-176:12","type":"Query","source":[{"localId":"577","locator":"173:39-173:67","alias":"X","expression":{"localId":"576","locator":"173:39-173:66","type":"Collapse","operand":[{"localId":"575","locator":"173:49-173:57","name":"Intervals","type":"OperandRef"},{"value":1.0,"unit":"day","type":"Quantity"}]}}],"relationship":[],"return":{"localId":"585","locator":"174:9-176:12","distinct":false,"expression":{"localId":"584","locator":"174:19-176:12","type":"Add","operand":[{"localId":"582","locator":"174:19-176:9","precision":"Day","type":"DifferenceBetween","operand":[{"localId":"579","locator":"174:47-174:56","type":"Start","operand":{"localId":"578","locator":"174:56","name":"X","type":"AliasRef"}},{"localId":"581","locator":"175:11-175:18","type":"End","operand":{"localId":"580","locator":"175:18","name":"X","type":"AliasRef"}}]},{"localId":"583","locator":"176:12","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"1","type":"Literal"}]}}}},"else":{"asType":"{urn:hl7-org:elm-types:r1}Integer","type":"As","operand":{"localId":"588","locator":"179:10-179:13","type":"Null"}}},"operand":[{"name":"Intervals","operandTypeSpecifier":{"localId":"572","locator":"172:48-172:67","type":"ListTypeSpecifier","elementType":{"localId":"571","locator":"172:53-172:66","type":"IntervalTypeSpecifier","pointType":{"localId":"570","locator":"172:62-172:65","name":"{urn:hl7-org:elm-types:r1}Date","type":"NamedTypeSpecifier"}}}}]},{"localId":"632","locator":"183:1-191:5","name":"RolloutIntervals","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","t":[{"name":"description","value":"Rolls out periods so that overlapping periods delay the start of subsequent periods"},{"name":"description","value":"Rolls out periods so that overlapping periods delay the start of subsequent periods"},{"name":"comment","value":"Returns the periods with overlapping periods delayed so that there is no overlap between any two periods in the result."}],"s":{"r":"632","s":[{"value":["/*@description: Rolls out periods so that overlapping periods delay the start of subsequent periods\n  @comment: Returns the periods with overlapping periods delayed so that there is no overlap between any two periods in the result.*/","define function ","\"RolloutIntervals\"","(","intervals"," "]},{"r":"593","s":[{"value":["List\u003c"]},{"r":"592","s":[{"value":["Interval\u003c"]},{"r":"591","s":[{"value":["Date"]}]},{"value":["\u003e"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"631","s":[{"r":"631","s":[{"s":[{"r":"595","s":[{"r":"594","s":[{"s":[{"value":["intervals"]}]}]},{"value":[" ","I"]}]}]},{"value":[" "]},{"r":"630","s":[{"value":["aggregate all ","R"," "]},{"r":"600","s":[{"value":["starting ( "]},{"r":"600","s":[{"r":"596","value":["null"," as "]},{"r":"599","s":[{"value":["List\u003c"]},{"r":"598","s":[{"value":["Interval\u003c"]},{"r":"597","s":[{"value":["Date"]}]},{"value":["\u003e"]}]},{"value":["\u003e"]}]}]},{"value":[")"]}]},{"value":[": "]},{"r":"629","s":[{"r":"601","s":[{"value":["R"]}]},{"value":["\n    union "]},{"r":"628","s":[{"value":["( "]},{"r":"628","s":[{"value":["{ "]},{"r":"627","s":[{"s":[{"r":"603","s":[{"r":"602","s":[{"s":[{"value":["I"]}]}]},{"value":[" ","X"]}]}]},{"value":["\n        "]},{"s":[{"value":["let "]},{"r":"613","s":[{"value":["S",": "]},{"r":"612","s":[{"value":["Max","("]},{"r":"611","s":[{"value":["{ \n          "]},{"r":"608","s":[{"r":"606","s":[{"value":["end of "]},{"r":"605","s":[{"value":["Last","("]},{"r":"604","s":[{"value":["R"]}]},{"value":[")"]}]}]},{"value":["+ "]},{"r":"607","s":[{"value":["1 ","day"]}]}]},{"value":[", "]},{"r":"610","s":[{"value":["start of "]},{"r":"609","s":[{"value":["X"]}]}]},{"value":[" }"]}]},{"value":["\n        )"]}]}]},{"value":[",\n        "]},{"r":"622","s":[{"value":["E",": "]},{"r":"621","s":[{"r":"614","s":[{"value":["S"]}]},{"value":[" + "]},{"r":"620","s":[{"value":["Quantity"," { "]},{"s":[{"value":["value",": "]},{"r":"618","s":[{"value":["Coalesce","("]},{"r":"616","s":[{"value":["duration in days of "]},{"r":"615","s":[{"value":["X"]}]}]},{"r":"617","value":[", ","0",")"]}]}]},{"value":[", "]},{"s":[{"value":["unit",": "]},{"r":"619","s":[{"value":["'day'"]}]}]},{"value":[" }"]}]}]}]}]},{"value":["\n        "]},{"r":"626","s":[{"value":["return "]},{"r":"625","s":[{"value":["Interval["]},{"r":"623","s":[{"value":["S"]}]},{"value":[", "]},{"r":"624","s":[{"value":["E"]}]},{"value":["]"]}]}]}]},{"value":["}"]}]},{"value":["\n    )"]}]}]}]}]}]}]}}],"expression":{"localId":"631","locator":"184:3-191:5","type":"Query","source":[{"localId":"595","locator":"184:3-184:13","alias":"I","expression":{"localId":"594","locator":"184:3-184:11","name":"intervals","type":"OperandRef"}}],"relationship":[],"aggregate":{"localId":"630","locator":"184:15-191:5","identifier":"R","distinct":false,"expression":{"localId":"629","locator":"184:73-191:5","type":"Union","operand":[{"localId":"601","locator":"184:73","name":"R","type":"QueryLetRef"},{"localId":"628","locator":"185:11-191:5","type":"List","element":[{"localId":"627","locator":"185:15-190:29","type":"Query","source":[{"localId":"603","locator":"185:15-185:17","alias":"X","expression":{"localId":"602","locator":"185:15","name":"I","type":"AliasRef"}}],"let":[{"localId":"613","locator":"186:13-188:9","identifier":"S","expression":{"localId":"612","locator":"186:16-188:9","type":"Max","source":{"localId":"611","locator":"186:20-187:45","type":"List","element":[{"localId":"608","locator":"187:11-187:31","type":"Add","operand":[{"localId":"606","locator":"187:11-187:24","type":"End","operand":{"localId":"605","locator":"187:18-187:24","type":"Last","source":{"localId":"604","locator":"187:23","name":"R","type":"QueryLetRef"}}},{"localId":"607","locator":"187:27-187:31","value":1,"unit":"day","type":"Quantity"}]},{"localId":"610","locator":"187:34-187:43","type":"Start","operand":{"localId":"609","locator":"187:43","name":"X","type":"AliasRef"}}]}}},{"localId":"622","locator":"189:9-189:82","identifier":"E","expression":{"localId":"621","locator":"189:12-189:82","type":"Add","operand":[{"localId":"614","locator":"189:12","name":"S","type":"QueryLetRef"},{"localId":"620","locator":"189:16-189:82","classType":"{urn:hl7-org:elm-types:r1}Quantity","type":"Instance","element":[{"name":"value","value":{"type":"ToDecimal","operand":{"localId":"618","locator":"189:34-189:67","type":"Coalesce","operand":[{"localId":"616","locator":"189:43-189:63","precision":"Day","type":"DurationBetween","operand":[{"type":"Start","operand":{"localId":"615","locator":"189:63","name":"X","type":"AliasRef"}},{"type":"End","operand":{"localId":"615","locator":"189:63","name":"X","type":"AliasRef"}}]},{"localId":"617","locator":"189:66","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"0","type":"Literal"}]}}},{"name":"unit","value":{"localId":"619","locator":"189:76-189:80","valueType":"{urn:hl7-org:elm-types:r1}String","value":"day","type":"Literal"}}]}]}}],"relationship":[],"return":{"localId":"626","locator":"190:9-190:29","expression":{"localId":"625","locator":"190:16-190:29","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"623","locator":"190:25","name":"S","type":"QueryLetRef"},"high":{"localId":"624","locator":"190:28","name":"E","type":"QueryLetRef"}}}}]}]},"starting":{"localId":"600","locator":"184:31-184:70","strict":false,"type":"As","operand":{"localId":"596","locator":"184:42-184:45","type":"Null"},"asTypeSpecifier":{"localId":"599","locator":"184:50-184:69","type":"ListTypeSpecifier","elementType":{"localId":"598","locator":"184:55-184:68","type":"IntervalTypeSpecifier","pointType":{"localId":"597","locator":"184:64-184:67","name":"{urn:hl7-org:elm-types:r1}Date","type":"NamedTypeSpecifier"}}}}}},"operand":[{"name":"intervals","operandTypeSpecifier":{"localId":"593","locator":"183:46-183:65","type":"ListTypeSpecifier","elementType":{"localId":"592","locator":"183:51-183:64","type":"IntervalTypeSpecifier","pointType":{"localId":"591","locator":"183:60-183:63","name":"{urn:hl7-org:elm-types:r1}Date","type":"NamedTypeSpecifier"}}}}]},{"localId":"647","locator":"194:1-204:6","name":"MedicationPeriod","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","t":[{"name":"description","value":"Calculates the effective duration of the given medication event, whether it is an order, dispense, discharge, or administration. Note that this function is still under development and should not be used.*/"},{"name":"description","value":"Calculates the effective duration of the given medication event, whether it is an order, dispense, discharge, or administration. Note that this function is still under development and should not be used.*/"}],"s":{"r":"647","s":[{"value":["/*@description: Calculates the effective duration of the given medication event, whether it is an order, dispense, discharge, or administration. Note that this function is still under development and should not be used.*/","define function ","\"MedicationPeriod\"","(","Medication"," "]},{"r":"637","s":[{"value":["Choice\u003c"]},{"r":"633","s":[{"value":["\"Medication, Order\""]}]},{"value":[",\n       "]},{"r":"634","s":[{"value":["\"Medication, Dispensed\""]}]},{"value":[",\n       "]},{"r":"635","s":[{"value":["\"Medication, Discharge\""]}]},{"value":[",\n       "]},{"r":"636","s":[{"value":["\"Medication, Administered\""]}]},{"value":["\n     \u003e"]}]},{"value":[" ):\n  "]},{"r":"646","s":[{"r":"646","s":[{"value":["Coalesce","(\n       "]},{"r":"639","s":[{"value":["MedicationOrderPeriod","("]},{"r":"638","s":[{"value":["Medication"]}]},{"value":[")"]}]},{"value":[",\n       "]},{"r":"641","s":[{"value":["MedicationDispensedPeriod","("]},{"r":"640","s":[{"value":["Medication"]}]},{"value":[")"]}]},{"value":[",\n       "]},{"r":"643","s":[{"value":["MedicationDischargePeriod","("]},{"r":"642","s":[{"value":["Medication"]}]},{"value":[")"]}]},{"value":[",\n       "]},{"r":"645","s":[{"value":["MedicationAdministrationPeriod","("]},{"r":"644","s":[{"value":["Medication"]}]},{"value":[")"]}]},{"value":["\n     )"]}]}]}]}}],"expression":{"localId":"646","locator":"199:3-204:6","type":"Coalesce","operand":[{"localId":"639","locator":"200:8-200:40","name":"MedicationOrderPeriod","type":"FunctionRef","operand":[{"asType":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationOrder","type":"As","operand":{"localId":"638","locator":"200:30-200:39","name":"Medication","type":"OperandRef"}}]},{"localId":"641","locator":"201:8-201:44","name":"MedicationDispensedPeriod","type":"FunctionRef","operand":[{"asType":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationDispensed","type":"As","operand":{"localId":"640","locator":"201:34-201:43","name":"Medication","type":"OperandRef"}}]},{"localId":"643","locator":"202:8-202:44","name":"MedicationDischargePeriod","type":"FunctionRef","operand":[{"asType":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationDischarge","type":"As","operand":{"localId":"642","locator":"202:34-202:43","name":"Medication","type":"OperandRef"}}]},{"localId":"645","locator":"203:8-203:49","name":"MedicationAdministrationPeriod","type":"FunctionRef","operand":[{"asType":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationAdministered","type":"As","operand":{"localId":"644","locator":"203:39-203:48","name":"Medication","type":"OperandRef"}}]}]},"operand":[{"name":"Medication","operandTypeSpecifier":{"localId":"637","locator":"194:47-198:6","type":"ChoiceTypeSpecifier","choice":[{"localId":"633","locator":"194:54-194:72","name":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationOrder","type":"NamedTypeSpecifier"},{"localId":"634","locator":"195:8-195:30","name":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationDispensed","type":"NamedTypeSpecifier"},{"localId":"635","locator":"196:8-196:30","name":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationDischarge","type":"NamedTypeSpecifier"},{"localId":"636","locator":"197:8-197:33","name":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationAdministered","type":"NamedTypeSpecifier"}]}}]},{"localId":"683","locator":"208:1-225:6","name":"CalculateCumulativeMedicationDuration","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","t":[{"name":"description","value":"Calculates the cumulative medication duration of the given medication events"},{"name":"description","value":"Calculates the cumulative medication duration of the given medication events"},{"name":"comment","value":"This function will _roll out_ periods from dispense and administration events, and then collapse across that result and periods from prescriptions. The separation of medications by type should already be done prior to using this function. In addition, calculations that combine dosages from different types of medications (such as Morphine Milligram Equivalent (MME)) require further consideration. Note that this function is still under development and should not be used."}],"s":{"r":"683","s":[{"value":["/*@description: Calculates the cumulative medication duration of the given medication events\n  @comment: This function will _roll out_ periods from dispense and administration events, and then collapse across that result and periods from prescriptions. The separation of medications by type should already be done prior to using this function. In addition, calculations that combine dosages from different types of medications (such as Morphine Milligram Equivalent (MME)) require further consideration. Note that this function is still under development and should not be used.*/","define function ","\"CalculateCumulativeMedicationDuration\"","(","Medications"," "]},{"r":"653","s":[{"value":["List\u003c"]},{"r":"652","s":[{"value":["Choice\u003c"]},{"r":"648","s":[{"value":["\"Medication, Order\""]}]},{"value":[",\n       "]},{"r":"649","s":[{"value":["\"Medication, Dispensed\""]}]},{"value":[",\n       "]},{"r":"650","s":[{"value":["\"Medication, Discharge\""]}]},{"value":[",\n       "]},{"r":"651","s":[{"value":["\"Medication, Administered\""]}]},{"value":["\n     \u003e"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"682","s":[{"r":"682","s":[{"value":["CumulativeDuration","("]},{"r":"681","s":[{"r":"666","s":[{"value":["(\n         "]},{"r":"666","s":[{"s":[{"r":"655","s":[{"r":"654","s":[{"s":[{"value":["Medications"]}]}]},{"value":[" ","M"]}]}]},{"value":["\n           "]},{"r":"662","s":[{"value":["where "]},{"r":"662","s":[{"r":"658","s":[{"r":"656","s":[{"value":["M"]}]},{"value":[" is "]},{"r":"657","s":[{"value":["\"Medication, Order\""]}]}]},{"value":[" or "]},{"r":"661","s":[{"r":"659","s":[{"value":["M"]}]},{"value":[" is "]},{"r":"660","s":[{"value":["\"Medication, Discharge\""]}]}]}]}]},{"value":["\n           "]},{"r":"665","s":[{"value":["return "]},{"r":"664","s":[{"value":["MedicationPeriod","("]},{"r":"663","s":[{"value":["M"]}]},{"value":[")"]}]}]}]},{"value":["\n       )"]}]},{"value":["\n         union "]},{"r":"680","s":[{"value":["(\n           "]},{"r":"680","s":[{"value":["RolloutIntervals","(\n             "]},{"r":"679","s":[{"s":[{"r":"668","s":[{"r":"667","s":[{"s":[{"value":["Medications"]}]}]},{"value":[" ","M"]}]}]},{"value":["\n               "]},{"r":"675","s":[{"value":["where "]},{"r":"675","s":[{"r":"671","s":[{"r":"669","s":[{"value":["M"]}]},{"value":[" is "]},{"r":"670","s":[{"value":["\"Medication, Dispensed\""]}]}]},{"value":[" or "]},{"r":"674","s":[{"r":"672","s":[{"value":["M"]}]},{"value":[" is "]},{"r":"673","s":[{"value":["\"Medication, Administered\""]}]}]}]}]},{"value":["\n               "]},{"r":"678","s":[{"value":["return "]},{"r":"677","s":[{"value":["MedicationPeriod","("]},{"r":"676","s":[{"value":["M"]}]},{"value":[")"]}]}]}]},{"value":["\n           )"]}]},{"value":["\n         )"]}]}]},{"value":["\n     )"]}]}]}]}}],"expression":{"localId":"682","locator":"213:3-225:6","name":"CumulativeDuration","type":"FunctionRef","operand":[{"localId":"681","locator":"213:22-224:10","type":"Union","operand":[{"localId":"666","locator":"213:22-217:8","type":"Query","source":[{"localId":"655","locator":"214:10-214:22","alias":"M","expression":{"localId":"654","locator":"214:10-214:20","name":"Medications","type":"OperandRef"}}],"relationship":[],"where":{"localId":"662","locator":"215:12-215:73","type":"Or","operand":[{"localId":"658","locator":"215:18-215:41","type":"Is","operand":{"localId":"656","locator":"215:18","name":"M","type":"AliasRef"},"isTypeSpecifier":{"localId":"657","locator":"215:23-215:41","name":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationOrder","type":"NamedTypeSpecifier"}},{"localId":"661","locator":"215:46-215:73","type":"Is","operand":{"localId":"659","locator":"215:46","name":"M","type":"AliasRef"},"isTypeSpecifier":{"localId":"660","locator":"215:51-215:73","name":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationDischarge","type":"NamedTypeSpecifier"}}]},"return":{"localId":"665","locator":"216:12-216:37","expression":{"localId":"664","locator":"216:19-216:37","name":"MedicationPeriod","type":"FunctionRef","operand":[{"localId":"663","locator":"216:36","name":"M","type":"AliasRef"}]}}},{"localId":"680","locator":"218:16-224:10","name":"RolloutIntervals","type":"FunctionRef","operand":[{"localId":"679","locator":"220:14-222:41","type":"Query","source":[{"localId":"668","locator":"220:14-220:26","alias":"M","expression":{"localId":"667","locator":"220:14-220:24","name":"Medications","type":"OperandRef"}}],"relationship":[],"where":{"localId":"675","locator":"221:16-221:84","type":"Or","operand":[{"localId":"671","locator":"221:22-221:49","type":"Is","operand":{"localId":"669","locator":"221:22","name":"M","type":"AliasRef"},"isTypeSpecifier":{"localId":"670","locator":"221:27-221:49","name":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationDispensed","type":"NamedTypeSpecifier"}},{"localId":"674","locator":"221:54-221:84","type":"Is","operand":{"localId":"672","locator":"221:54","name":"M","type":"AliasRef"},"isTypeSpecifier":{"localId":"673","locator":"221:59-221:84","name":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationAdministered","type":"NamedTypeSpecifier"}}]},"return":{"localId":"678","locator":"222:16-222:41","expression":{"localId":"677","locator":"222:23-222:41","name":"MedicationPeriod","type":"FunctionRef","operand":[{"localId":"676","locator":"222:40","name":"M","type":"AliasRef"}]}}}]}]}]},"operand":[{"name":"Medications","operandTypeSpecifier":{"localId":"653","locator":"208:69-212:7","type":"ListTypeSpecifier","elementType":{"localId":"652","locator":"208:74-212:6","type":"ChoiceTypeSpecifier","choice":[{"localId":"648","locator":"208:81-208:99","name":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationOrder","type":"NamedTypeSpecifier"},{"localId":"649","locator":"209:8-209:30","name":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationDispensed","type":"NamedTypeSpecifier"},{"localId":"650","locator":"210:8-210:30","name":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationDischarge","type":"NamedTypeSpecifier"},{"localId":"651","locator":"211:8-211:33","name":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationAdministered","type":"NamedTypeSpecifier"}]}}}]}]}}},"elm_annotations":{"statements":[{"children":[{"children":[]},{"children":[]},{"children":[]},{"children":[{"children":[{"text":"/*@description: Converts a frequency quantity to a daily frequency (as a decimal)\n@comment: This function considers both the value and unit of the given frequency. E.g. the frequency `30 'min'` will result in a daily frequency of `48.0`*/define function \"QuantityToDaily\"(Frequency "}]},{"children":[{"children":[{"text":"Quantity"}]}],"ref_id":"48"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"case "}]},{"children":[{"children":[{"children":[{"text":"Frequency"}]}],"ref_id":"49"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"unit"}]}],"ref_id":"50"}],"ref_id":"50"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"when "}]},{"children":[{"children":[{"text":"'h'"}]}],"ref_id":"51"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"24.0 / "}],"node_type":"Literal","ref_id":"52"},{"children":[{"children":[{"children":[{"text":"Frequency"}]}],"ref_id":"53"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"value"}]}],"node_type":"Property","ref_id":"54"}],"node_type":"Property","ref_id":"54"}],"ref_id":"55"},{"children":[{"text":")"}]}],"ref_id":"55"}],"ref_id":"56"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"when "}]},{"children":[{"children":[{"text":"'min'"}]}],"ref_id":"57"},{"children":[{"text":" then "}]},{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"24.0 / "}],"node_type":"Literal","ref_id":"58"},{"children":[{"children":[{"children":[{"text":"Frequency"}]}],"ref_id":"59"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"value"}]}],"node_type":"Property","ref_id":"60"}],"node_type":"Property","ref_id":"60"}],"node_type":"Divide","ref_id":"61"},{"children":[{"text":")"}]}],"node_type":"Divide","ref_id":"61"},{"children":[{"text":" * 60"}],"node_type":"Literal","ref_id":"62"}],"ref_id":"63"}],"ref_id":"64"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"when "}]},{"children":[{"children":[{"text":"'s'"}]}],"ref_id":"65"},{"children":[{"text":" then "}]},{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"24.0 / "}],"node_type":"Literal","ref_id":"66"},{"children":[{"children":[{"children":[{"text":"Frequency"}]}],"ref_id":"67"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"value"}]}],"node_type":"Property","ref_id":"68"}],"node_type":"Property","ref_id":"68"}],"node_type":"Divide","ref_id":"69"},{"children":[{"text":")"}]}],"node_type":"Divide","ref_id":"69"},{"children":[{"text":" * 60"}],"node_type":"Literal","ref_id":"70"}],"node_type":"Multiply","ref_id":"71"},{"children":[{"text":" * 60"}],"node_type":"Literal","ref_id":"72"}],"ref_id":"73"}],"ref_id":"74"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"when "}]},{"children":[{"children":[{"text":"'d'"}]}],"ref_id":"75"},{"children":[{"text":" then "}]},{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"24.0 / "}],"node_type":"Literal","ref_id":"76"},{"children":[{"children":[{"children":[{"text":"Frequency"}]}],"ref_id":"77"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"value"}]}],"node_type":"Property","ref_id":"78"}],"node_type":"Property","ref_id":"78"}],"node_type":"Divide","ref_id":"79"},{"children":[{"text":")"}]}],"node_type":"Divide","ref_id":"79"},{"children":[{"text":" / 24"}],"node_type":"Literal","ref_id":"80"}],"ref_id":"81"}],"ref_id":"82"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"when "}]},{"children":[{"children":[{"text":"'wk'"}]}],"ref_id":"83"},{"children":[{"text":" then "}]},{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"24.0 / "}],"node_type":"Literal","ref_id":"84"},{"children":[{"children":[{"children":[{"text":"Frequency"}]}],"ref_id":"85"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"value"}]}],"node_type":"Property","ref_id":"86"}],"node_type":"Property","ref_id":"86"}],"node_type":"Divide","ref_id":"87"},{"children":[{"text":")"}]}],"node_type":"Divide","ref_id":"87"},{"children":[{"text":" / "}]},{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"24 * 7"}],"node_type":"Literal","ref_id":"88"}],"node_type":"Multiply","ref_id":"90"},{"children":[{"text":")"}]}],"node_type":"Multiply","ref_id":"90"}],"ref_id":"91"}],"ref_id":"92"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"when "}]},{"children":[{"children":[{"text":"'mo'"}]}],"ref_id":"93"},{"children":[{"text":" then "}]},{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"24.0 / "}],"node_type":"Literal","ref_id":"94"},{"children":[{"children":[{"children":[{"text":"Frequency"}]}],"ref_id":"95"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"value"}]}],"node_type":"Property","ref_id":"96"}],"node_type":"Property","ref_id":"96"}],"node_type":"Divide","ref_id":"97"},{"children":[{"text":")"}]}],"node_type":"Divide","ref_id":"97"},{"children":[{"text":" / "}]},{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"24 * 30"}],"node_type":"Literal","ref_id":"98"}],"node_type":"Multiply","ref_id":"100"},{"children":[{"text":")"}]}],"node_type":"Multiply","ref_id":"100"}],"ref_id":"101"}],"ref_id":"102"},{"children":[{"text":" /* assuming 30 days in month */\n      "}]},{"children":[{"children":[{"text":"when "}]},{"children":[{"children":[{"text":"'a'"}]}],"ref_id":"103"},{"children":[{"text":" then "}]},{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"24.0 / "}],"node_type":"Literal","ref_id":"104"},{"children":[{"children":[{"children":[{"text":"Frequency"}]}],"ref_id":"105"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"value"}]}],"node_type":"Property","ref_id":"106"}],"node_type":"Property","ref_id":"106"}],"node_type":"Divide","ref_id":"107"},{"children":[{"text":")"}]}],"node_type":"Divide","ref_id":"107"},{"children":[{"text":" / "}]},{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"24 * 365"}],"node_type":"Literal","ref_id":"108"}],"node_type":"Multiply","ref_id":"110"},{"children":[{"text":")"}]}],"node_type":"Multiply","ref_id":"110"}],"ref_id":"111"}],"ref_id":"112"},{"children":[{"text":" /* assuming 365 days in year */\n      "}]},{"children":[{"children":[{"text":"when "}]},{"children":[{"children":[{"text":"'hour'"}]}],"ref_id":"113"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"24.0 / "}],"node_type":"Literal","ref_id":"114"},{"children":[{"children":[{"children":[{"text":"Frequency"}]}],"ref_id":"115"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"value"}]}],"node_type":"Property","ref_id":"116"}],"node_type":"Property","ref_id":"116"}],"ref_id":"117"},{"children":[{"text":")"}]}],"ref_id":"117"}],"ref_id":"118"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"when "}]},{"children":[{"children":[{"text":"'minute'"}]}],"ref_id":"119"},{"children":[{"text":" then "}]},{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"24.0 / "}],"node_type":"Literal","ref_id":"120"},{"children":[{"children":[{"children":[{"text":"Frequency"}]}],"ref_id":"121"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"value"}]}],"node_type":"Property","ref_id":"122"}],"node_type":"Property","ref_id":"122"}],"node_type":"Divide","ref_id":"123"},{"children":[{"text":")"}]}],"node_type":"Divide","ref_id":"123"},{"children":[{"text":" * 60"}],"node_type":"Literal","ref_id":"124"}],"ref_id":"125"}],"ref_id":"126"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"when "}]},{"children":[{"children":[{"text":"'second'"}]}],"ref_id":"127"},{"children":[{"text":" then "}]},{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"24.0 / "}],"node_type":"Literal","ref_id":"128"},{"children":[{"children":[{"children":[{"text":"Frequency"}]}],"ref_id":"129"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"value"}]}],"node_type":"Property","ref_id":"130"}],"node_type":"Property","ref_id":"130"}],"node_type":"Divide","ref_id":"131"},{"children":[{"text":")"}]}],"node_type":"Divide","ref_id":"131"},{"children":[{"text":" * 60"}],"node_type":"Literal","ref_id":"132"}],"node_type":"Multiply","ref_id":"133"},{"children":[{"text":" * 60"}],"node_type":"Literal","ref_id":"134"}],"ref_id":"135"}],"ref_id":"136"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"when "}]},{"children":[{"children":[{"text":"'day'"}]}],"ref_id":"137"},{"children":[{"text":" then "}]},{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"24.0 / "}],"node_type":"Literal","ref_id":"138"},{"children":[{"children":[{"children":[{"text":"Frequency"}]}],"ref_id":"139"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"value"}]}],"node_type":"Property","ref_id":"140"}],"node_type":"Property","ref_id":"140"}],"node_type":"Divide","ref_id":"141"},{"children":[{"text":")"}]}],"node_type":"Divide","ref_id":"141"},{"children":[{"text":" / 24"}],"node_type":"Literal","ref_id":"142"}],"ref_id":"143"}],"ref_id":"144"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"when "}]},{"children":[{"children":[{"text":"'week'"}]}],"ref_id":"145"},{"children":[{"text":" then "}]},{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"24.0 / "}],"node_type":"Literal","ref_id":"146"},{"children":[{"children":[{"children":[{"text":"Frequency"}]}],"ref_id":"147"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"value"}]}],"node_type":"Property","ref_id":"148"}],"node_type":"Property","ref_id":"148"}],"node_type":"Divide","ref_id":"149"},{"children":[{"text":")"}]}],"node_type":"Divide","ref_id":"149"},{"children":[{"text":" / "}]},{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"24 * 7"}],"node_type":"Literal","ref_id":"150"}],"node_type":"Multiply","ref_id":"152"},{"children":[{"text":")"}]}],"node_type":"Multiply","ref_id":"152"}],"ref_id":"153"}],"ref_id":"154"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"when "}]},{"children":[{"children":[{"text":"'month'"}]}],"ref_id":"155"},{"children":[{"text":" then "}]},{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"24.0 / "}],"node_type":"Literal","ref_id":"156"},{"children":[{"children":[{"children":[{"text":"Frequency"}]}],"ref_id":"157"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"value"}]}],"node_type":"Property","ref_id":"158"}],"node_type":"Property","ref_id":"158"}],"node_type":"Divide","ref_id":"159"},{"children":[{"text":")"}]}],"node_type":"Divide","ref_id":"159"},{"children":[{"text":" / "}]},{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"24 * 30"}],"node_type":"Literal","ref_id":"160"}],"node_type":"Multiply","ref_id":"162"},{"children":[{"text":")"}]}],"node_type":"Multiply","ref_id":"162"}],"ref_id":"163"}],"ref_id":"164"},{"children":[{"text":" /* assuming 30 days in month */\n      "}]},{"children":[{"children":[{"text":"when "}]},{"children":[{"children":[{"text":"'year'"}]}],"ref_id":"165"},{"children":[{"text":" then "}]},{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"24.0 / "}],"node_type":"Literal","ref_id":"166"},{"children":[{"children":[{"children":[{"text":"Frequency"}]}],"ref_id":"167"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"value"}]}],"node_type":"Property","ref_id":"168"}],"node_type":"Property","ref_id":"168"}],"node_type":"Divide","ref_id":"169"},{"children":[{"text":")"}]}],"node_type":"Divide","ref_id":"169"},{"children":[{"text":" / "}]},{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"24 * 365"}],"node_type":"Literal","ref_id":"170"}],"node_type":"Multiply","ref_id":"172"},{"children":[{"text":")"}]}],"node_type":"Multiply","ref_id":"172"}],"ref_id":"173"}],"ref_id":"174"},{"children":[{"text":" /* assuming 365 days in year */\n      "}]},{"children":[{"children":[{"text":"when "}]},{"children":[{"children":[{"text":"'hours'"}]}],"ref_id":"175"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"24.0 / "}],"node_type":"Literal","ref_id":"176"},{"children":[{"children":[{"children":[{"text":"Frequency"}]}],"ref_id":"177"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"value"}]}],"node_type":"Property","ref_id":"178"}],"node_type":"Property","ref_id":"178"}],"ref_id":"179"},{"children":[{"text":")"}]}],"ref_id":"179"}],"ref_id":"180"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"when "}]},{"children":[{"children":[{"text":"'minutes'"}]}],"ref_id":"181"},{"children":[{"text":" then "}]},{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"24.0 / "}],"node_type":"Literal","ref_id":"182"},{"children":[{"children":[{"children":[{"text":"Frequency"}]}],"ref_id":"183"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"value"}]}],"node_type":"Property","ref_id":"184"}],"node_type":"Property","ref_id":"184"}],"node_type":"Divide","ref_id":"185"},{"children":[{"text":")"}]}],"node_type":"Divide","ref_id":"185"},{"children":[{"text":" * 60"}],"node_type":"Literal","ref_id":"186"}],"ref_id":"187"}],"ref_id":"188"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"when "}]},{"children":[{"children":[{"text":"'seconds'"}]}],"ref_id":"189"},{"children":[{"text":" then "}]},{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"24.0 / "}],"node_type":"Literal","ref_id":"190"},{"children":[{"children":[{"children":[{"text":"Frequency"}]}],"ref_id":"191"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"value"}]}],"node_type":"Property","ref_id":"192"}],"node_type":"Property","ref_id":"192"}],"node_type":"Divide","ref_id":"193"},{"children":[{"text":")"}]}],"node_type":"Divide","ref_id":"193"},{"children":[{"text":" * 60"}],"node_type":"Literal","ref_id":"194"}],"node_type":"Multiply","ref_id":"195"},{"children":[{"text":" * 60"}],"node_type":"Literal","ref_id":"196"}],"ref_id":"197"}],"ref_id":"198"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"when "}]},{"children":[{"children":[{"text":"'days'"}]}],"ref_id":"199"},{"children":[{"text":" then "}]},{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"24.0 / "}],"node_type":"Literal","ref_id":"200"},{"children":[{"children":[{"children":[{"text":"Frequency"}]}],"ref_id":"201"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"value"}]}],"node_type":"Property","ref_id":"202"}],"node_type":"Property","ref_id":"202"}],"node_type":"Divide","ref_id":"203"},{"children":[{"text":")"}]}],"node_type":"Divide","ref_id":"203"},{"children":[{"text":" / 24"}],"node_type":"Literal","ref_id":"204"}],"ref_id":"205"}],"ref_id":"206"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"when "}]},{"children":[{"children":[{"text":"'weeks'"}]}],"ref_id":"207"},{"children":[{"text":" then "}]},{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"24.0 / "}],"node_type":"Literal","ref_id":"208"},{"children":[{"children":[{"children":[{"text":"Frequency"}]}],"ref_id":"209"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"value"}]}],"node_type":"Property","ref_id":"210"}],"node_type":"Property","ref_id":"210"}],"node_type":"Divide","ref_id":"211"},{"children":[{"text":")"}]}],"node_type":"Divide","ref_id":"211"},{"children":[{"text":" / "}]},{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"24 * 7"}],"node_type":"Literal","ref_id":"212"}],"node_type":"Multiply","ref_id":"214"},{"children":[{"text":")"}]}],"node_type":"Multiply","ref_id":"214"}],"ref_id":"215"}],"ref_id":"216"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"when "}]},{"children":[{"children":[{"text":"'months'"}]}],"ref_id":"217"},{"children":[{"text":" then "}]},{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"24.0 / "}],"node_type":"Literal","ref_id":"218"},{"children":[{"children":[{"children":[{"text":"Frequency"}]}],"ref_id":"219"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"value"}]}],"node_type":"Property","ref_id":"220"}],"node_type":"Property","ref_id":"220"}],"node_type":"Divide","ref_id":"221"},{"children":[{"text":")"}]}],"node_type":"Divide","ref_id":"221"},{"children":[{"text":" / "}]},{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"24 * 30"}],"node_type":"Literal","ref_id":"222"}],"node_type":"Multiply","ref_id":"224"},{"children":[{"text":")"}]}],"node_type":"Multiply","ref_id":"224"}],"ref_id":"225"}],"ref_id":"226"},{"children":[{"text":" /* assuming 30 days in month */\n      "}]},{"children":[{"children":[{"text":"when "}]},{"children":[{"children":[{"text":"'years'"}]}],"ref_id":"227"},{"children":[{"text":" then "}]},{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"24.0 / "}],"node_type":"Literal","ref_id":"228"},{"children":[{"children":[{"children":[{"text":"Frequency"}]}],"ref_id":"229"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"value"}]}],"node_type":"Property","ref_id":"230"}],"node_type":"Property","ref_id":"230"}],"node_type":"Divide","ref_id":"231"},{"children":[{"text":")"}]}],"node_type":"Divide","ref_id":"231"},{"children":[{"text":" / "}]},{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"24 * 365"}],"node_type":"Literal","ref_id":"232"}],"node_type":"Multiply","ref_id":"234"},{"children":[{"text":")"}]}],"node_type":"Multiply","ref_id":"234"}],"ref_id":"235"}],"ref_id":"236"},{"children":[{"text":" /* assuming 365 days in year */\n      else null\n    end"}],"node_type":"Null","ref_id":"237"}],"node_type":"Case","ref_id":"238"}],"node_type":"Case","ref_id":"238"}],"ref_id":"239"}],"define_name":"QuantityToDaily"},{"children":[{"children":[]},{"children":[]},{"children":[]},{"children":[{"children":[{"text":"/*@description: Returns the equivalent daily frequency (as a decimal) of the given code\n@comment: Note that for ranges, the boundary resulting in the highest frequency result is used. E.g. `Every two to four hours` results in `12.0` and `One to two` times a day results in `2.0`.*/define function \"CodeToDaily\"(Frequency "}]},{"children":[{"children":[{"text":"Code"}]}],"ref_id":"240"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"case\n    "}]},{"children":[{"children":[{"text":"when "}]},{"children":[{"children":[{"children":[{"text":"Frequency"}]}],"node_type":"OperandRef","ref_id":"241"},{"children":[{"text":" ~ "}]},{"children":[{"children":[{"text":"\"Once daily (qualifier value)\""}]}],"node_type":"CodeRef","ref_id":"242"}],"ref_id":"243"},{"children":[{"text":" then 1.0"}],"ref_id":"244"}],"ref_id":"245"},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"when "}]},{"children":[{"children":[{"children":[{"text":"Frequency"}]}],"node_type":"OperandRef","ref_id":"246"},{"children":[{"text":" ~ "}]},{"children":[{"children":[{"text":"\"Twice a day (qualifier value)\""}]}],"node_type":"CodeRef","ref_id":"247"}],"ref_id":"248"},{"children":[{"text":" then 2.0"}],"ref_id":"249"}],"ref_id":"250"},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"when "}]},{"children":[{"children":[{"children":[{"text":"Frequency"}]}],"node_type":"OperandRef","ref_id":"251"},{"children":[{"text":" ~ "}]},{"children":[{"children":[{"text":"\"Three times daily (qualifier value)\""}]}],"node_type":"CodeRef","ref_id":"252"}],"ref_id":"253"},{"children":[{"text":" then 3.0"}],"ref_id":"254"}],"ref_id":"255"},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"when "}]},{"children":[{"children":[{"children":[{"text":"Frequency"}]}],"node_type":"OperandRef","ref_id":"256"},{"children":[{"text":" ~ "}]},{"children":[{"children":[{"text":"\"Four times daily (qualifier value)\""}]}],"node_type":"CodeRef","ref_id":"257"}],"ref_id":"258"},{"children":[{"text":" then 4.0"}],"ref_id":"259"}],"ref_id":"260"},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"when "}]},{"children":[{"children":[{"children":[{"text":"Frequency"}]}],"node_type":"OperandRef","ref_id":"261"},{"children":[{"text":" ~ "}]},{"children":[{"children":[{"text":"\"Every twenty four hours (qualifier value)\""}]}],"node_type":"CodeRef","ref_id":"262"}],"ref_id":"263"},{"children":[{"text":" then 1.0"}],"ref_id":"264"}],"ref_id":"265"},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"when "}]},{"children":[{"children":[{"children":[{"text":"Frequency"}]}],"node_type":"OperandRef","ref_id":"266"},{"children":[{"text":" ~ "}]},{"children":[{"children":[{"text":"\"Every twelve hours (qualifier value)\""}]}],"node_type":"CodeRef","ref_id":"267"}],"ref_id":"268"},{"children":[{"text":" then 2.0"}],"ref_id":"269"}],"ref_id":"270"},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"when "}]},{"children":[{"children":[{"children":[{"text":"Frequency"}]}],"node_type":"OperandRef","ref_id":"271"},{"children":[{"text":" ~ "}]},{"children":[{"children":[{"text":"\"Every thirty six hours (qualifier value)\""}]}],"node_type":"CodeRef","ref_id":"272"}],"ref_id":"273"},{"children":[{"text":" then 0.67"}],"ref_id":"274"}],"ref_id":"275"},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"when "}]},{"children":[{"children":[{"children":[{"text":"Frequency"}]}],"node_type":"OperandRef","ref_id":"276"},{"children":[{"text":" ~ "}]},{"children":[{"children":[{"text":"\"Every eight hours (qualifier value)\""}]}],"node_type":"CodeRef","ref_id":"277"}],"ref_id":"278"},{"children":[{"text":" then 3.0"}],"ref_id":"279"}],"ref_id":"280"},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"when "}]},{"children":[{"children":[{"children":[{"text":"Frequency"}]}],"node_type":"OperandRef","ref_id":"281"},{"children":[{"text":" ~ "}]},{"children":[{"children":[{"text":"\"Every four hours (qualifier value)\""}]}],"node_type":"CodeRef","ref_id":"282"}],"ref_id":"283"},{"children":[{"text":" then 6.0"}],"ref_id":"284"}],"ref_id":"285"},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"when "}]},{"children":[{"children":[{"children":[{"text":"Frequency"}]}],"node_type":"OperandRef","ref_id":"286"},{"children":[{"text":" ~ "}]},{"children":[{"children":[{"text":"\"Every six hours (qualifier value)\""}]}],"node_type":"CodeRef","ref_id":"287"}],"ref_id":"288"},{"children":[{"text":" then 4.0"}],"ref_id":"289"}],"ref_id":"290"},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"when "}]},{"children":[{"children":[{"children":[{"text":"Frequency"}]}],"node_type":"OperandRef","ref_id":"291"},{"children":[{"text":" ~ "}]},{"children":[{"children":[{"text":"\"Every seventy two hours (qualifier value)\""}]}],"node_type":"CodeRef","ref_id":"292"}],"ref_id":"293"},{"children":[{"text":" then 0.33"}],"ref_id":"294"}],"ref_id":"295"},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"when "}]},{"children":[{"children":[{"children":[{"text":"Frequency"}]}],"node_type":"OperandRef","ref_id":"296"},{"children":[{"text":" ~ "}]},{"children":[{"children":[{"text":"\"Every forty eight hours (qualifier value)\""}]}],"node_type":"CodeRef","ref_id":"297"}],"ref_id":"298"},{"children":[{"text":" then 0.5"}],"ref_id":"299"}],"ref_id":"300"},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"when "}]},{"children":[{"children":[{"children":[{"text":"Frequency"}]}],"node_type":"OperandRef","ref_id":"301"},{"children":[{"text":" ~ "}]},{"children":[{"children":[{"text":"\"Every eight to twelve hours (qualifier value)\""}]}],"node_type":"CodeRef","ref_id":"302"}],"ref_id":"303"},{"children":[{"text":" then 3.0"}],"ref_id":"304"}],"ref_id":"305"},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"when "}]},{"children":[{"children":[{"children":[{"text":"Frequency"}]}],"node_type":"OperandRef","ref_id":"306"},{"children":[{"text":" ~ "}]},{"children":[{"children":[{"text":"\"Every six to eight hours (qualifier value)\""}]}],"node_type":"CodeRef","ref_id":"307"}],"ref_id":"308"},{"children":[{"text":" then 4.0"}],"ref_id":"309"}],"ref_id":"310"},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"when "}]},{"children":[{"children":[{"children":[{"text":"Frequency"}]}],"node_type":"OperandRef","ref_id":"311"},{"children":[{"text":" ~ "}]},{"children":[{"children":[{"text":"\"Every three to four hours (qualifier value)\""}]}],"node_type":"CodeRef","ref_id":"312"}],"ref_id":"313"},{"children":[{"text":" then 8.0"}],"ref_id":"314"}],"ref_id":"315"},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"when "}]},{"children":[{"children":[{"children":[{"text":"Frequency"}]}],"node_type":"OperandRef","ref_id":"316"},{"children":[{"text":" ~ "}]},{"children":[{"children":[{"text":"\"Every three to six hours (qualifier value)\""}]}],"node_type":"CodeRef","ref_id":"317"}],"ref_id":"318"},{"children":[{"text":" then 8.0"}],"ref_id":"319"}],"ref_id":"320"},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"when "}]},{"children":[{"children":[{"children":[{"text":"Frequency"}]}],"node_type":"OperandRef","ref_id":"321"},{"children":[{"text":" ~ "}]},{"children":[{"children":[{"text":"\"Every two to four hours (qualifier value)\""}]}],"node_type":"CodeRef","ref_id":"322"}],"ref_id":"323"},{"children":[{"text":" then 12.0"}],"ref_id":"324"}],"ref_id":"325"},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"when "}]},{"children":[{"children":[{"children":[{"text":"Frequency"}]}],"node_type":"OperandRef","ref_id":"326"},{"children":[{"text":" ~ "}]},{"children":[{"children":[{"text":"\"One to four times a day (qualifier value)\""}]}],"node_type":"CodeRef","ref_id":"327"}],"ref_id":"328"},{"children":[{"text":" then 4.0"}],"ref_id":"329"}],"ref_id":"330"},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"when "}]},{"children":[{"children":[{"children":[{"text":"Frequency"}]}],"node_type":"OperandRef","ref_id":"331"},{"children":[{"text":" ~ "}]},{"children":[{"children":[{"text":"\"One to three times a day (qualifier value)\""}]}],"node_type":"CodeRef","ref_id":"332"}],"ref_id":"333"},{"children":[{"text":" then 3.0"}],"ref_id":"334"}],"ref_id":"335"},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"when "}]},{"children":[{"children":[{"children":[{"text":"Frequency"}]}],"node_type":"OperandRef","ref_id":"336"},{"children":[{"text":" ~ "}]},{"children":[{"children":[{"text":"\"One to two times a day (qualifier value)\""}]}],"node_type":"CodeRef","ref_id":"337"}],"ref_id":"338"},{"children":[{"text":" then 2.0"}],"ref_id":"339"}],"ref_id":"340"},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"when "}]},{"children":[{"children":[{"children":[{"text":"Frequency"}]}],"node_type":"OperandRef","ref_id":"341"},{"children":[{"text":" ~ "}]},{"children":[{"children":[{"text":"\"Two to four times a day (qualifier value)\""}]}],"node_type":"CodeRef","ref_id":"342"}],"ref_id":"343"},{"children":[{"text":" then 4.0"}],"ref_id":"344"}],"ref_id":"345"},{"children":[{"text":"\n    else null\n  end"}],"node_type":"Null","ref_id":"346"}],"node_type":"Case","ref_id":"347"}],"node_type":"Case","ref_id":"347"}],"ref_id":"348"}],"define_name":"CodeToDaily"},{"children":[{"children":[]},{"children":[]},{"children":[{"children":[{"text":"/*@description: Returns the daily frequency (as a decimal) of the given input*/define function \"ToDaily\"(Frequency "}]},{"children":[{"children":[{"text":"Choice\u003c"}]},{"children":[{"children":[{"text":"Quantity"}]}],"ref_id":"349"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"Code"}]}],"ref_id":"350"},{"children":[{"text":"\u003e"}]}],"ref_id":"351"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"case\n    "}]},{"children":[{"children":[{"text":"when "}]},{"children":[{"children":[{"children":[{"text":"Frequency"}]}],"node_type":"OperandRef","ref_id":"352"},{"children":[{"text":" is "}]},{"children":[{"children":[{"text":"Quantity"}]}],"ref_id":"353"}],"ref_id":"354"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"QuantityToDaily("}]},{"children":[{"children":[{"children":[{"text":"Frequency"}]}],"node_type":"OperandRef","ref_id":"355"},{"children":[{"text":" as "}]},{"children":[{"children":[{"text":"Quantity"}]}],"ref_id":"356"}],"node_type":"As","ref_id":"357"},{"children":[{"text":")"}]}],"ref_id":"358"}],"ref_id":"359"},{"children":[{"text":"\n    else "}]},{"children":[{"children":[{"text":"CodeToDaily("}]},{"children":[{"children":[{"children":[{"text":"Frequency"}]}],"node_type":"OperandRef","ref_id":"360"},{"children":[{"text":" as "}]},{"children":[{"children":[{"text":"Code"}]}],"ref_id":"361"}],"node_type":"As","ref_id":"362"},{"children":[{"text":")"}]}],"ref_id":"363"},{"children":[{"text":"\n  end"}]}],"node_type":"Case","ref_id":"364"}],"node_type":"Case","ref_id":"364"}],"ref_id":"365"}],"define_name":"ToDaily"},{"children":[{"children":[]},{"children":[]},{"children":[]},{"children":[]},{"children":[{"children":[{"text":"/*@description: Calculates the Medication Period for a single Medication, Order\n  @comment: This function calculates the expected period of a medication order using the following approach: If `supply`, `dosage`, and `frequency` elements are present, `daysSupplied` is derived by calculating `(supply / (dosage * frequency)) * (1 + refills)`. If `daysSupplied` element is present, the duration is `daysSupplied * (1 + refills)`. The result is then the interval from `relevantPeriod.low` to `relevantPeriod.low + daysSupplied`, or `authorDatetime` to `authorDatetime + daysSupplied`. Otherwise, the `relevantPeriod` element is used if present and completely specified.\n  Note that the supply and dosage Quantity values on the order are assumed to be in terms of the same unit, typically a tablet or mL.\n  @seealso: [CumulativeMedicationDuration](https://github.com/cqframework/CQL-Formatting-and-Usage-Wiki/blob/master/Source/Libraries)\n  Note that relevantPeriod.low represents the interval's lower boundary and relevantPeriod.high represents the interval's higher boundary.*/define function \"MedicationOrderPeriod\"(MedOrder "}]},{"children":[{"children":[{"text":"\"Medication, Order\""}]}],"ref_id":"366"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"MedOrder"}]}]}],"node_type":"OperandRef","ref_id":"367"},{"children":[{"text":" Order"}]}],"ref_id":"368"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"startDate: "}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"children":[{"children":[{"text":"Order"}]}],"ref_id":"369"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"ref_id":"370"}],"ref_id":"370"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"low"}]}],"node_type":"Property","ref_id":"371"}],"node_type":"Property","ref_id":"371"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"Order"}]}],"ref_id":"372"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"373"}],"node_type":"Property","ref_id":"373"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"374"}],"node_type":"DateFrom","ref_id":"375"}],"ref_id":"376"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"totalDaysSupplied: "}]},{"children":[{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Order"}]}],"ref_id":"377"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"supply"}]}],"ref_id":"378"}],"ref_id":"378"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"value"}]}],"node_type":"Property","ref_id":"379"}],"node_type":"Property","ref_id":"379"},{"children":[{"text":" /"}]},{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Order"}]}],"ref_id":"380"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"dosage"}]}],"ref_id":"381"}],"ref_id":"381"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"value"}]}],"node_type":"Property","ref_id":"382"}],"node_type":"Property","ref_id":"382"},{"children":[{"text":" * "}]},{"children":[{"children":[{"text":"ToDaily("}]},{"children":[{"children":[{"children":[{"text":"Order"}]}],"ref_id":"383"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"frequency"}]}],"node_type":"Property","ref_id":"384"}],"node_type":"Property","ref_id":"384"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"385"}],"node_type":"Multiply","ref_id":"386"},{"children":[{"text":")"}]}],"node_type":"Multiply","ref_id":"386"}],"node_type":"Divide","ref_id":"387"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"Order"}]}],"ref_id":"388"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"daysSupplied"}]}],"node_type":"Property","ref_id":"389"}],"node_type":"Property","ref_id":"389"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"390"},{"children":[{"text":" * "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"1 + "}],"node_type":"Literal","ref_id":"391"},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"children":[{"text":"Order"}]}],"ref_id":"392"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"refills"}]}],"node_type":"Property","ref_id":"393"}],"node_type":"Property","ref_id":"393"},{"children":[{"text":", 0)"}],"node_type":"Literal","ref_id":"394"}],"node_type":"Coalesce","ref_id":"395"}],"node_type":"Add","ref_id":"396"},{"children":[{"text":" )"}]}],"node_type":"Add","ref_id":"396"}],"node_type":"Multiply","ref_id":"397"}],"ref_id":"398"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"startDate"}]}],"node_type":"QueryLetRef","ref_id":"399"},{"children":[{"text":" is null"}]}],"ref_id":"400"},{"children":[{"text":" then null \n      else "}],"node_type":"Null","ref_id":"401"},{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"totalDaysSupplied"}]}],"node_type":"QueryLetRef","ref_id":"402"},{"children":[{"text":" is not null"}]}],"ref_id":"403"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"startDate"}]}],"ref_id":"404"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"startDate"}]}],"node_type":"QueryLetRef","ref_id":"405"},{"children":[{"text":" + "}]},{"children":[{"children":[{"text":"Quantity { "}]},{"children":[{"children":[{"text":"value: "}]},{"children":[{"children":[{"children":[{"text":"totalDaysSupplied"}]}],"node_type":"QueryLetRef","ref_id":"406"},{"children":[{"text":" - 1"}],"node_type":"Literal","ref_id":"407"}],"ref_id":"408"}]},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"unit: "}]},{"children":[{"children":[{"text":"'day'"}]}],"ref_id":"409"}]},{"children":[{"text":" }"}]}],"node_type":"Instance","ref_id":"410"}],"ref_id":"411"},{"children":[{"text":"]"}]}],"ref_id":"412"},{"children":[{"text":"\n      else "}]},{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Order"}]}],"ref_id":"413"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"ref_id":"414"}],"ref_id":"414"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"high"}]}],"node_type":"Property","ref_id":"415"}],"node_type":"Property","ref_id":"415"},{"children":[{"text":" is not null"}]}],"ref_id":"416"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"startDate"}]}],"ref_id":"417"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Order"}]}],"ref_id":"418"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"419"}],"node_type":"Property","ref_id":"419"}],"node_type":"End","ref_id":"420"}],"ref_id":"421"},{"children":[{"text":"]"}]}],"ref_id":"422"},{"children":[{"text":"\n      else null"}],"node_type":"Null","ref_id":"423"}],"ref_id":"424"}],"ref_id":"425"}],"node_type":"If","ref_id":"426"}],"ref_id":"427"}],"node_type":"Query","ref_id":"428"}],"node_type":"Query","ref_id":"428"}],"ref_id":"429"}],"define_name":"MedicationOrderPeriod"},{"children":[{"children":[]},{"children":[]},{"children":[]},{"children":[]},{"children":[{"children":[{"text":"/*@description: Calculates Medication Period for a given Medication, Dispensed\n  @comment: This function calculates the effective duration of a single medication dispensing event using the following approach: If `supply`, `dosage`, and `frequency` elements are present, `daysSupplied` is derived by calculating `(supply / (dosage * frequency))`. If `daysSupplied` element is present, the duration is `daysSupplied`. The result is then the interval from `relevantPeriod.low` to `relevantPeriod.low + daysSupplied`, or `relevantDatetime` to `relevantDatetime + daysSupplied`, or `authorDatetime` to `authorDatetime + daysSupplied`. Otherwise, the `relevantPeriod` element is used if present and completely specified.\n  Note that the supply and dosage Quantity values on the order are assumed to be in terms of the same unit, typically a tablet or mL.\n  @seealso: [CumulativeMedicationDuration](https://github.com/cqframework/CQL-Formatting-and-Usage-Wiki/blob/master/Source/Libraries)\n  Note that relevantPeriod.low represents the interval's lower boundary and relevantPeriod.high represents the interval's higher boundary.*/define function \"MedicationDispensedPeriod\"(MedDispense "}]},{"children":[{"children":[{"text":"\"Medication, Dispensed\""}]}],"ref_id":"430"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"MedDispense"}]}]}],"node_type":"OperandRef","ref_id":"431"},{"children":[{"text":" Dispense"}]}],"ref_id":"432"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"startDate: "}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"children":[{"children":[{"text":"Dispense"}]}],"ref_id":"433"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"ref_id":"434"}],"ref_id":"434"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"low"}]}],"node_type":"Property","ref_id":"435"}],"node_type":"Property","ref_id":"435"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"Dispense"}]}],"ref_id":"436"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"437"}],"node_type":"Property","ref_id":"437"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"Dispense"}]}],"ref_id":"438"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"439"}],"node_type":"Property","ref_id":"439"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"440"}],"node_type":"DateFrom","ref_id":"441"}],"ref_id":"442"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"totalDaysSupplied: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Dispense"}]}],"ref_id":"443"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"supply"}]}],"ref_id":"444"}],"ref_id":"444"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"value"}]}],"node_type":"Property","ref_id":"445"}],"node_type":"Property","ref_id":"445"},{"children":[{"text":" /"}]},{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Dispense"}]}],"ref_id":"446"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"dosage"}]}],"ref_id":"447"}],"ref_id":"447"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"value"}]}],"node_type":"Property","ref_id":"448"}],"node_type":"Property","ref_id":"448"},{"children":[{"text":" * "}]},{"children":[{"children":[{"text":"ToDaily("}]},{"children":[{"children":[{"children":[{"text":"Dispense"}]}],"ref_id":"449"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"frequency"}]}],"node_type":"Property","ref_id":"450"}],"node_type":"Property","ref_id":"450"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"451"}],"node_type":"Multiply","ref_id":"452"},{"children":[{"text":")"}]}],"node_type":"Multiply","ref_id":"452"}],"node_type":"Divide","ref_id":"453"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"Dispense"}]}],"ref_id":"454"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"daysSupplied"}]}],"node_type":"Property","ref_id":"455"}],"node_type":"Property","ref_id":"455"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"456"}],"ref_id":"457"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"startDate"}]}],"node_type":"QueryLetRef","ref_id":"458"},{"children":[{"text":" is null"}]}],"ref_id":"459"},{"children":[{"text":" then null \n      else "}],"node_type":"Null","ref_id":"460"},{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"totalDaysSupplied"}]}],"node_type":"QueryLetRef","ref_id":"461"},{"children":[{"text":" is not null"}]}],"ref_id":"462"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"startDate"}]}],"ref_id":"463"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"startDate"}]}],"node_type":"QueryLetRef","ref_id":"464"},{"children":[{"text":" + "}]},{"children":[{"children":[{"text":"Quantity { "}]},{"children":[{"children":[{"text":"value: "}]},{"children":[{"children":[{"children":[{"text":"totalDaysSupplied"}]}],"node_type":"QueryLetRef","ref_id":"465"},{"children":[{"text":" - 1"}],"node_type":"Literal","ref_id":"466"}],"ref_id":"467"}]},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"unit: "}]},{"children":[{"children":[{"text":"'day'"}]}],"ref_id":"468"}]},{"children":[{"text":" }"}]}],"node_type":"Instance","ref_id":"469"}],"ref_id":"470"},{"children":[{"text":"]"}]}],"ref_id":"471"},{"children":[{"text":"\n      else "}]},{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Dispense"}]}],"ref_id":"472"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"ref_id":"473"}],"ref_id":"473"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"high"}]}],"node_type":"Property","ref_id":"474"}],"node_type":"Property","ref_id":"474"},{"children":[{"text":" is not null"}]}],"ref_id":"475"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"startDate"}]}],"ref_id":"476"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Dispense"}]}],"ref_id":"477"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"478"}],"node_type":"Property","ref_id":"478"}],"node_type":"End","ref_id":"479"}],"ref_id":"480"},{"children":[{"text":"]"}]}],"ref_id":"481"},{"children":[{"text":"\n      else null"}],"node_type":"Null","ref_id":"482"}],"ref_id":"483"}],"ref_id":"484"}],"node_type":"If","ref_id":"485"}],"ref_id":"486"}],"node_type":"Query","ref_id":"487"}],"node_type":"Query","ref_id":"487"}],"ref_id":"488"}],"define_name":"MedicationDispensedPeriod"},{"children":[{"children":[]},{"children":[]},{"children":[]},{"children":[]},{"children":[{"children":[{"text":"/*@description: Returns the established therapeutic duration for a given medication\n  @comment: This is likely measure specific, though could potentially be established for any drug and distributed as a CodeSystem supplement. Defaulting to 14 days here for illustration.\n  @seealso: [CumulativeMedicationDuration](https://github.com/cqframework/CQL-Formatting-and-Usage-Wiki/blob/master/Source/Libraries)\n  Note that this function is still under development and should not be used.*/define function \"TherapeuticDuration\"(medication "}]},{"children":[{"children":[{"text":"Code"}]}],"ref_id":"489"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"14 days"}]}],"node_type":"Quantity","ref_id":"490"}],"node_type":"Quantity","ref_id":"490"}],"ref_id":"491"}],"define_name":"TherapeuticDuration"},{"children":[{"children":[]},{"children":[]},{"children":[]},{"children":[]},{"children":[{"children":[{"text":"/*@description: Calculates Medication Period for a given Medication, Administration\n  @comment: This function calculates the effective duration of a single medication administration event using the following approach: If a TherapeuticDuration is defined for the medication, the result is the interval from the earliest of the `relevantDatetime` and `relevantPeriod` elements, to the end of the therapeutic duration.\n  @seealso: [CumulativeMedicationDuration](https://github.com/cqframework/CQL-Formatting-and-Usage-Wiki/blob/master/Source/Libraries)\n  Note that this function is still under development and should not be used.*/define function \"MedicationAdministrationPeriod\"(MedAdministration "}]},{"children":[{"children":[{"text":"\"Medication, Administered\""}]}],"ref_id":"492"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"MedAdministration"}]}]}],"node_type":"OperandRef","ref_id":"493"},{"children":[{"text":" Administration"}]}],"ref_id":"494"}]},{"children":[{"text":"\n       "}]},{"children":[{"children":[{"text":"let\n         "}]},{"children":[{"children":[{"text":"therapeuticDuration: "}]},{"children":[{"children":[{"text":"TherapeuticDuration("}]},{"children":[{"children":[{"children":[{"text":"Administration"}]}],"ref_id":"495"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"node_type":"Property","ref_id":"496"}],"node_type":"Property","ref_id":"496"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"497"}],"ref_id":"498"},{"children":[{"text":",\n         "}]},{"children":[{"children":[{"text":"startDate: "}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"499"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"EarliestOf("}]},{"children":[{"children":[{"children":[{"text":"Administration"}]}],"ref_id":"500"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"501"}],"node_type":"Property","ref_id":"501"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"Administration"}]}],"ref_id":"502"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"503"}],"node_type":"Property","ref_id":"503"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"504"}],"node_type":"FunctionRef","ref_id":"504"}],"node_type":"DateFrom","ref_id":"505"}],"ref_id":"506"}]},{"children":[{"text":"\n       "}]},{"children":[{"children":[{"text":"return\n         "}]},{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"children":[{"text":"startDate"}]}],"node_type":"QueryLetRef","ref_id":"507"},{"children":[{"text":" is not null"}]}],"node_type":"Not","ref_id":"508"},{"children":[{"text":" and "}]},{"children":[{"children":[{"children":[{"text":"therapeuticDuration"}]}],"node_type":"QueryLetRef","ref_id":"509"},{"children":[{"text":" is not null"}]}],"node_type":"Not","ref_id":"510"}],"ref_id":"511"},{"children":[{"text":" then\n           "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"startDate"}]}],"ref_id":"512"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"children":[{"text":"startDate"}]}],"node_type":"QueryLetRef","ref_id":"513"},{"children":[{"text":" + "}]},{"children":[{"children":[{"text":"therapeuticDuration"}]}],"node_type":"QueryLetRef","ref_id":"514"}],"node_type":"Add","ref_id":"515"},{"children":[{"text":" - 1"}],"node_type":"Literal","ref_id":"516"}],"ref_id":"517"},{"children":[{"text":"]"}]}],"ref_id":"518"},{"children":[{"text":"\n         else\n           null"}],"node_type":"Null","ref_id":"519"}],"node_type":"If","ref_id":"520"}],"ref_id":"521"}],"node_type":"Query","ref_id":"522"}],"node_type":"Query","ref_id":"522"}],"ref_id":"523"}],"define_name":"MedicationAdministrationPeriod"},{"children":[{"children":[]},{"children":[]},{"children":[]},{"children":[]},{"children":[{"children":[{"text":"/*@description: Calculates the Medication Period for a Medication, Discharge\n@comment: This function calculates the effective duration of a single medication discharge event using the following approach: If the `daysSupplied` element is present, the duration is `daysSupplied * (1 + refills)`. Otherwise, the duration is calculated using `(supply / (dosage * frequency)) * (1 + refills)`. The result is then the interval from `authorDatetime` to `authorDatetime + daysSupplied`.\nNote that the supply and dosage Quantity values on the order are assumed to be in terms of the same unit, typically a tablet or mL.\n@seealso: [CumulativeMedicationDuration](https://github.com/cqframework/CQL-Formatting-and-Usage-Wiki/blob/master/Source/Libraries)\nNote that this function has not been tested.*/define function \"MedicationDischargePeriod\"(Medication "}]},{"children":[{"children":[{"text":"\"Medication, Discharge\""}]}],"ref_id":"524"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"(\n    "}]},{"children":[{"children":[{"children":[{"text":"Coalesce(\n      "}]},{"children":[{"children":[{"children":[{"text":"Medication"}]}],"ref_id":"525"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"daysSupplied"}]}],"node_type":"Property","ref_id":"526"}],"node_type":"Property","ref_id":"526"},{"children":[{"text":",\n      "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Medication"}]}],"ref_id":"527"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"supply"}]}],"ref_id":"528"}],"ref_id":"528"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"value"}]}],"node_type":"Property","ref_id":"529"}],"node_type":"Property","ref_id":"529"},{"children":[{"text":" / "}]},{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Medication"}]}],"ref_id":"530"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"dosage"}]}],"ref_id":"531"}],"ref_id":"531"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"value"}]}],"node_type":"Property","ref_id":"532"}],"node_type":"Property","ref_id":"532"},{"children":[{"text":" * "}]},{"children":[{"children":[{"text":"ToDaily("}]},{"children":[{"children":[{"children":[{"text":"Medication"}]}],"ref_id":"533"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"frequency"}]}],"node_type":"Property","ref_id":"534"}],"node_type":"Property","ref_id":"534"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"535"}],"node_type":"Multiply","ref_id":"536"},{"children":[{"text":")"}]}],"node_type":"Multiply","ref_id":"536"}],"node_type":"Divide","ref_id":"537"},{"children":[{"text":"\n    )"}]}],"node_type":"Coalesce","ref_id":"538"},{"children":[{"text":" * "}]},{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"1 + "}],"node_type":"Literal","ref_id":"539"},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"children":[{"text":"Medication"}]}],"ref_id":"540"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"refills"}]}],"node_type":"Property","ref_id":"541"}],"node_type":"Property","ref_id":"541"},{"children":[{"text":", 0)"}],"node_type":"Literal","ref_id":"542"}],"node_type":"Coalesce","ref_id":"543"}],"node_type":"Add","ref_id":"544"},{"children":[{"text":")"}]}],"node_type":"Add","ref_id":"544"}],"node_type":"Multiply","ref_id":"545"},{"children":[{"text":"\n  )"}]}],"node_type":"Multiply","ref_id":"545"},{"children":[{"text":" totalDaysSupplied"}]}],"ref_id":"546"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"startDate: "}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"children":[{"text":"Medication"}]}],"ref_id":"547"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"548"}],"node_type":"Property","ref_id":"548"}],"node_type":"DateFrom","ref_id":"549"}],"ref_id":"550"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return\n      "}]},{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"children":[{"text":"startDate"}]}],"node_type":"QueryLetRef","ref_id":"551"},{"children":[{"text":" is not null"}]}],"node_type":"Not","ref_id":"552"},{"children":[{"text":" and "}]},{"children":[{"children":[{"children":[{"text":"totalDaysSupplied"}]}],"node_type":"AliasRef","ref_id":"553"},{"children":[{"text":" is not null"}]}],"node_type":"Not","ref_id":"554"}],"ref_id":"555"},{"children":[{"text":" then\n        "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"startDate"}]}],"ref_id":"556"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"startDate"}]}],"node_type":"QueryLetRef","ref_id":"557"},{"children":[{"text":" + "}]},{"children":[{"children":[{"text":"Quantity { "}]},{"children":[{"children":[{"text":"value: "}]},{"children":[{"children":[{"children":[{"text":"totalDaysSupplied"}]}],"node_type":"AliasRef","ref_id":"558"},{"children":[{"text":" - 1"}],"node_type":"Literal","ref_id":"559"}],"ref_id":"560"}]},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"unit: "}]},{"children":[{"children":[{"text":"'day'"}]}],"ref_id":"561"}]},{"children":[{"text":" }"}]}],"node_type":"Instance","ref_id":"562"}],"ref_id":"563"},{"children":[{"text":"]"}]}],"ref_id":"564"},{"children":[{"text":"\n      else\n        null"}],"node_type":"Null","ref_id":"565"}],"node_type":"If","ref_id":"566"}],"ref_id":"567"}],"node_type":"Query","ref_id":"568"}],"node_type":"Query","ref_id":"568"}],"ref_id":"569"}],"define_name":"MedicationDischargePeriod"},{"children":[{"children":[]},{"children":[]},{"children":[]},{"children":[{"children":[{"text":"/*@description: Returns the total duration in days covered by the given periods\n  @comment: This function calculates the total duration in days covered by the given periods. If multiple periods in the input include the same day, that day is only counted once in the final result.*/define function \"CumulativeDuration\"(Intervals "}]},{"children":[{"children":[{"text":"List\u003c"}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"Date"}]}],"ref_id":"570"},{"children":[{"text":"\u003e"}]}],"ref_id":"571"},{"children":[{"text":"\u003e"}]}],"ref_id":"572"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"Intervals"}]}],"node_type":"OperandRef","ref_id":"573"},{"children":[{"text":" is not null"}]}],"ref_id":"574"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"Sum("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"collapse "}]},{"children":[{"children":[{"text":"Intervals"}]}],"node_type":"OperandRef","ref_id":"575"},{"children":[{"text":" per day"}]}],"node_type":"Collapse","ref_id":"576"},{"children":[{"text":")"}]}],"node_type":"Collapse","ref_id":"576"},{"children":[{"text":"X"}]}],"ref_id":"577"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"return all"}]},{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"difference in days between "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"X"}]}],"node_type":"AliasRef","ref_id":"578"}],"node_type":"Start","ref_id":"579"},{"children":[{"text":" and \n          "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"X"}]}],"node_type":"AliasRef","ref_id":"580"}],"node_type":"End","ref_id":"581"}],"node_type":"DifferenceBetween","ref_id":"582"},{"children":[{"text":"\n        )"}]}],"node_type":"DifferenceBetween","ref_id":"582"},{"children":[{"text":"+ 1"}],"node_type":"Literal","ref_id":"583"}],"node_type":"Add","ref_id":"584"}],"ref_id":"585"}],"ref_id":"586"},{"children":[{"text":"\n    )"}]}],"ref_id":"587"},{"children":[{"text":"\n  )"}]}],"ref_id":"587"},{"children":[{"text":" \n    else null"}],"node_type":"Null","ref_id":"588"}],"node_type":"If","ref_id":"589"}],"node_type":"If","ref_id":"589"}],"ref_id":"590"}],"define_name":"CumulativeDuration"},{"children":[{"children":[]},{"children":[]},{"children":[]},{"children":[{"children":[{"text":"/*@description: Rolls out periods so that overlapping periods delay the start of subsequent periods\n  @comment: Returns the periods with overlapping periods delayed so that there is no overlap between any two periods in the result.*/define function \"RolloutIntervals\"(intervals "}]},{"children":[{"children":[{"text":"List\u003c"}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"Date"}]}],"ref_id":"591"},{"children":[{"text":"\u003e"}]}],"ref_id":"592"},{"children":[{"text":"\u003e"}]}],"ref_id":"593"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"intervals"}]}]}],"node_type":"OperandRef","ref_id":"594"},{"children":[{"text":" I"}]}],"ref_id":"595"}]},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"aggregate all R "}]},{"children":[{"children":[{"text":"starting ( "}]},{"children":[{"children":[{"text":"null as "}],"node_type":"Null","ref_id":"596"},{"children":[{"children":[{"text":"List\u003c"}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"Date"}]}],"ref_id":"597"},{"children":[{"text":"\u003e"}]}],"ref_id":"598"},{"children":[{"text":"\u003e"}]}],"ref_id":"599"}],"ref_id":"600"},{"children":[{"text":")"}]}],"ref_id":"600"},{"children":[{"text":": "}]},{"children":[{"children":[{"children":[{"text":"R"}]}],"node_type":"QueryLetRef","ref_id":"601"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"{ "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"I"}]}]}],"node_type":"AliasRef","ref_id":"602"},{"children":[{"text":" X"}]}],"ref_id":"603"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"S: "}]},{"children":[{"children":[{"text":"Max("}]},{"children":[{"children":[{"text":"{ \n          "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"text":"R"}]}],"ref_id":"604"},{"children":[{"text":")"}]}],"node_type":"Last","ref_id":"605"}],"node_type":"End","ref_id":"606"},{"children":[{"text":"+ "}]},{"children":[{"children":[{"text":"1 day"}]}],"node_type":"Quantity","ref_id":"607"}],"ref_id":"608"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"X"}]}],"node_type":"AliasRef","ref_id":"609"}],"ref_id":"610"},{"children":[{"text":" }"}]}],"ref_id":"611"},{"children":[{"text":"\n        )"}]}],"node_type":"Max","ref_id":"612"}],"ref_id":"613"},{"children":[{"text":",\n        "}]},{"children":[{"children":[{"text":"E: "}]},{"children":[{"children":[{"children":[{"text":"S"}]}],"node_type":"QueryLetRef","ref_id":"614"},{"children":[{"text":" + "}]},{"children":[{"children":[{"text":"Quantity { "}]},{"children":[{"children":[{"text":"value: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"duration in days of "}]},{"children":[{"children":[{"text":"X"}]}],"node_type":"AliasRef","ref_id":"615"}],"node_type":"DurationBetween","ref_id":"616"},{"children":[{"text":", 0)"}],"node_type":"Literal","ref_id":"617"}],"node_type":"Coalesce","ref_id":"618"}]},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"unit: "}]},{"children":[{"children":[{"text":"'day'"}]}],"ref_id":"619"}]},{"children":[{"text":" }"}]}],"node_type":"Instance","ref_id":"620"}],"node_type":"Add","ref_id":"621"}],"ref_id":"622"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"S"}]}],"ref_id":"623"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"E"}]}],"ref_id":"624"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"625"}],"ref_id":"626"}],"ref_id":"627"},{"children":[{"text":"}"}]}],"node_type":"List","ref_id":"628"},{"children":[{"text":"\n    )"}]}],"node_type":"List","ref_id":"628"}],"node_type":"Union","ref_id":"629"}],"ref_id":"630"}],"node_type":"Query","ref_id":"631"}],"node_type":"Query","ref_id":"631"}],"ref_id":"632"}],"define_name":"RolloutIntervals"},{"children":[{"children":[]},{"children":[]},{"children":[{"children":[{"text":"/*@description: Calculates the effective duration of the given medication event, whether it is an order, dispense, discharge, or administration. Note that this function is still under development and should not be used.*/define function \"MedicationPeriod\"(Medication "}]},{"children":[{"children":[{"text":"Choice\u003c"}]},{"children":[{"children":[{"text":"\"Medication, Order\""}]}],"ref_id":"633"},{"children":[{"text":",\n       "}]},{"children":[{"children":[{"text":"\"Medication, Dispensed\""}]}],"ref_id":"634"},{"children":[{"text":",\n       "}]},{"children":[{"children":[{"text":"\"Medication, Discharge\""}]}],"ref_id":"635"},{"children":[{"text":",\n       "}]},{"children":[{"children":[{"text":"\"Medication, Administered\""}]}],"ref_id":"636"},{"children":[{"text":"\n     \u003e"}]}],"ref_id":"637"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Coalesce(\n       "}]},{"children":[{"children":[{"text":"MedicationOrderPeriod("}]},{"children":[{"children":[{"text":"Medication"}]}],"node_type":"OperandRef","ref_id":"638"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"639"},{"children":[{"text":",\n       "}]},{"children":[{"children":[{"text":"MedicationDispensedPeriod("}]},{"children":[{"children":[{"text":"Medication"}]}],"node_type":"OperandRef","ref_id":"640"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"641"},{"children":[{"text":",\n       "}]},{"children":[{"children":[{"text":"MedicationDischargePeriod("}]},{"children":[{"children":[{"text":"Medication"}]}],"node_type":"OperandRef","ref_id":"642"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"643"},{"children":[{"text":",\n       "}]},{"children":[{"children":[{"text":"MedicationAdministrationPeriod("}]},{"children":[{"children":[{"text":"Medication"}]}],"node_type":"OperandRef","ref_id":"644"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"645"},{"children":[{"text":"\n     )"}]}],"node_type":"Coalesce","ref_id":"646"}],"node_type":"Coalesce","ref_id":"646"}],"ref_id":"647"}],"define_name":"MedicationPeriod"},{"children":[{"children":[]},{"children":[]},{"children":[]},{"children":[{"children":[{"text":"/*@description: Calculates the cumulative medication duration of the given medication events\n  @comment: This function will _roll out_ periods from dispense and administration events, and then collapse across that result and periods from prescriptions. The separation of medications by type should already be done prior to using this function. In addition, calculations that combine dosages from different types of medications (such as Morphine Milligram Equivalent (MME)) require further consideration. Note that this function is still under development and should not be used.*/define function \"CalculateCumulativeMedicationDuration\"(Medications "}]},{"children":[{"children":[{"text":"List\u003c"}]},{"children":[{"children":[{"text":"Choice\u003c"}]},{"children":[{"children":[{"text":"\"Medication, Order\""}]}],"ref_id":"648"},{"children":[{"text":",\n       "}]},{"children":[{"children":[{"text":"\"Medication, Dispensed\""}]}],"ref_id":"649"},{"children":[{"text":",\n       "}]},{"children":[{"children":[{"text":"\"Medication, Discharge\""}]}],"ref_id":"650"},{"children":[{"text":",\n       "}]},{"children":[{"children":[{"text":"\"Medication, Administered\""}]}],"ref_id":"651"},{"children":[{"text":"\n     \u003e"}]}],"ref_id":"652"},{"children":[{"text":"\u003e"}]}],"ref_id":"653"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"CumulativeDuration("}]},{"children":[{"children":[{"children":[{"text":"(\n         "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Medications"}]}]}],"node_type":"OperandRef","ref_id":"654"},{"children":[{"text":" M"}]}],"ref_id":"655"}]},{"children":[{"text":"\n           "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"M"}]}],"node_type":"AliasRef","ref_id":"656"},{"children":[{"text":" is "}]},{"children":[{"children":[{"text":"\"Medication, Order\""}]}],"ref_id":"657"}],"node_type":"Is","ref_id":"658"},{"children":[{"text":" or "}]},{"children":[{"children":[{"children":[{"text":"M"}]}],"node_type":"AliasRef","ref_id":"659"},{"children":[{"text":" is "}]},{"children":[{"children":[{"text":"\"Medication, Discharge\""}]}],"ref_id":"660"}],"node_type":"Is","ref_id":"661"}],"ref_id":"662"}],"ref_id":"662"},{"children":[{"text":"\n           "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"MedicationPeriod("}]},{"children":[{"children":[{"text":"M"}]}],"node_type":"AliasRef","ref_id":"663"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"664"}],"ref_id":"665"}],"node_type":"Query","ref_id":"666"},{"children":[{"text":"\n       )"}]}],"node_type":"Query","ref_id":"666"},{"children":[{"text":"\n         union "}]},{"children":[{"children":[{"text":"(\n           "}]},{"children":[{"children":[{"text":"RolloutIntervals(\n             "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Medications"}]}]}],"node_type":"OperandRef","ref_id":"667"},{"children":[{"text":" M"}]}],"ref_id":"668"}]},{"children":[{"text":"\n               "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"M"}]}],"node_type":"AliasRef","ref_id":"669"},{"children":[{"text":" is "}]},{"children":[{"children":[{"text":"\"Medication, Dispensed\""}]}],"ref_id":"670"}],"node_type":"Is","ref_id":"671"},{"children":[{"text":" or "}]},{"children":[{"children":[{"children":[{"text":"M"}]}],"node_type":"AliasRef","ref_id":"672"},{"children":[{"text":" is "}]},{"children":[{"children":[{"text":"\"Medication, Administered\""}]}],"ref_id":"673"}],"node_type":"Is","ref_id":"674"}],"ref_id":"675"}],"ref_id":"675"},{"children":[{"text":"\n               "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"MedicationPeriod("}]},{"children":[{"children":[{"text":"M"}]}],"node_type":"AliasRef","ref_id":"676"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"677"}],"ref_id":"678"}],"node_type":"Query","ref_id":"679"},{"children":[{"text":"\n           )"}]}],"node_type":"FunctionRef","ref_id":"680"},{"children":[{"text":"\n         )"}]}],"node_type":"FunctionRef","ref_id":"680"}],"node_type":"Union","ref_id":"681"},{"children":[{"text":"\n     )"}]}],"node_type":"FunctionRef","ref_id":"682"}],"node_type":"FunctionRef","ref_id":"682"}],"ref_id":"683"}],"define_name":"CalculateCumulativeMedicationDuration"}],"identifier":{"id":"CumulativeMedicationDuration","version":"2.0.000"}},"is_main_library":false,"is_top_level":true,"library_name":"CumulativeMedicationDuration","library_version":"2.0.000","statement_dependencies":[{"_id":"6892448f0734dfcaf5413675","statement_name":"RolloutIntervals"},{"_id":"6892448f0734dfcaf5413676","statement_name":"MedicationOrderPeriod","statement_references":[{"_id":"689244ad0734dfcaf54144e1","hqmf_id":null,"library_name":"CumulativeMedicationDuration","statement_name":"ToDaily"}]},{"_id":"6892448f0734dfcaf5413677","statement_name":"ToDaily","statement_references":[{"_id":"6892448f0734dfcaf5413673","hqmf_id":null,"library_name":"CumulativeMedicationDuration","statement_name":"QuantityToDaily"},{"_id":"6892448f0734dfcaf5413674","hqmf_id":null,"library_name":"CumulativeMedicationDuration","statement_name":"CodeToDaily"}]},{"_id":"6892448f0734dfcaf5413678","statement_name":"QuantityToDaily"},{"_id":"6892448f0734dfcaf5413679","statement_name":"CodeToDaily"},{"_id":"6892448f0734dfcaf541367a","statement_name":"CumulativeDuration"}]},{"_id":"6892448f0734dfcaf541367f","cql":"library Hospice version '5.0.000'\n\nusing QDM version '5.6'\n\ninclude MATGlobalCommonFunctions version '7.0.000' called Global\n\ncodesystem \"SNOMEDCT\": 'urn:oid:2.16.840.1.113883.6.96' \ncodesystem \"LOINC\": 'urn:oid:2.16.840.1.113883.6.1' \n\nvalueset \"Encounter Inpatient\": 'urn:oid:2.16.840.1.113883.3.666.5.307' \nvalueset \"Hospice Care Ambulatory\": 'urn:oid:2.16.840.1.113883.3.526.3.1584' \nvalueset \"Hospice Diagnosis\": 'urn:oid:2.16.840.1.113883.3.464.1003.1165' \nvalueset \"Hospice Encounter\": 'urn:oid:2.16.840.1.113883.3.464.1003.1003' \n\ncode \"Discharge to healthcare facility for hospice care (procedure)\": '428371000124100' from \"SNOMEDCT\" display 'Discharge to healthcare facility for hospice care (procedure)'\ncode \"Discharge to home for hospice care (procedure)\": '428361000124107' from \"SNOMEDCT\" display 'Discharge to home for hospice care (procedure)'\ncode \"Hospice care [Minimum Data Set]\": '45755-6' from \"LOINC\" display 'Hospice care [Minimum Data Set]'\ncode \"Yes (qualifier value)\": '373066001' from \"SNOMEDCT\" display 'Yes (qualifier value)'\n\nparameter \"Measurement Period\" Interval\u003cDateTime\u003e\n\ncontext Patient\n\ndefine \"Has Hospice Services\":\n  exists ( [\"Encounter, Performed\": \"Encounter Inpatient\"] InpatientEncounter\n      where ( InpatientEncounter.dischargeDisposition ~ \"Discharge to home for hospice care (procedure)\"\n          or InpatientEncounter.dischargeDisposition ~ \"Discharge to healthcare facility for hospice care (procedure)\"\n      )\n        and InpatientEncounter.relevantPeriod ends during day of \"Measurement Period\"\n  )\n    or exists ( [\"Encounter, Performed\": \"Hospice Encounter\"] HospiceEncounter\n        where HospiceEncounter.relevantPeriod overlaps day of \"Measurement Period\"\n    )\n    or exists ( [\"Assessment, Performed\": \"Hospice care [Minimum Data Set]\"] HospiceAssessment\n        where HospiceAssessment.result ~ \"Yes (qualifier value)\"\n          and Global.\"NormalizeInterval\" ( HospiceAssessment.relevantDatetime, HospiceAssessment.relevantPeriod ) overlaps day of \"Measurement Period\"\n    )\n    or exists ( [\"Intervention, Order\": \"Hospice Care Ambulatory\"] HospiceOrder\n        where HospiceOrder.authorDatetime during day of \"Measurement Period\"\n    )\n    or exists ( [\"Intervention, Performed\": \"Hospice Care Ambulatory\"] HospicePerformed\n        where Global.\"NormalizeInterval\" ( HospicePerformed.relevantDatetime, HospicePerformed.relevantPeriod ) overlaps day of \"Measurement Period\"\n    )\n  or exists ( [\"Diagnosis\": \"Hospice Diagnosis\"] HospiceCareDiagnosis\n        where HospiceCareDiagnosis.prevalencePeriod overlaps day of \"Measurement Period\"\n    )\n\n","elm":{"library":{"annotation":[{"translatorOptions":"EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion,DisableMethodInvocation","type":"CqlToElmInfo"},{"type":"Annotation","s":{"r":"96","s":[{"value":["","library Hospice version '5.0.000'"]}]}}],"identifier":{"id":"Hospice","version":"5.0.000"},"schemaIdentifier":{"id":"urn:hl7-org:elm","version":"r1"},"usings":{"def":[{"localIdentifier":"System","uri":"urn:hl7-org:elm-types:r1"},{"localId":"1","locator":"3:1-3:23","localIdentifier":"QDM","uri":"urn:healthit-gov:qdm:v5_6","version":"5.6","annotation":[{"type":"Annotation","s":{"r":"1","s":[{"value":["","using "]},{"s":[{"value":["QDM"]}]},{"value":[" version ","'5.6'"]}]}}]}]},"includes":{"def":[{"localId":"2","locator":"5:1-5:64","localIdentifier":"Global","path":"MATGlobalCommonFunctions","version":"7.0.000","annotation":[{"type":"Annotation","s":{"r":"2","s":[{"value":["","include "]},{"s":[{"value":["MATGlobalCommonFunctions"]}]},{"value":[" version ","'7.0.000'"," called ","Global"]}]}}]}]},"parameters":{"def":[{"localId":"19","locator":"20:1-20:49","name":"Measurement Period","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"19","s":[{"value":["","parameter ","\"Measurement Period\""," "]},{"r":"18","s":[{"value":["Interval\u003c"]},{"r":"17","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}}],"parameterTypeSpecifier":{"localId":"18","locator":"20:32-20:49","type":"IntervalTypeSpecifier","pointType":{"localId":"17","locator":"20:41-20:48","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},"codeSystems":{"def":[{"localId":"3","locator":"7:1-7:55","name":"SNOMEDCT","id":"2.16.840.1.113883.6.96","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"3","s":[{"value":["","codesystem ","\"SNOMEDCT\"",": ","'urn:oid:2.16.840.1.113883.6.96'"]}]}}]},{"localId":"4","locator":"8:1-8:51","name":"LOINC","id":"2.16.840.1.113883.6.1","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"4","s":[{"value":["","codesystem ","\"LOINC\"",": ","'urn:oid:2.16.840.1.113883.6.1'"]}]}}]}]},"valueSets":{"def":[{"localId":"5","locator":"10:1-10:71","name":"Encounter Inpatient","id":"2.16.840.1.113883.3.666.5.307","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"5","s":[{"value":["","valueset ","\"Encounter Inpatient\"",": ","'urn:oid:2.16.840.1.113883.3.666.5.307'"]}]}}]},{"localId":"6","locator":"11:1-11:76","name":"Hospice Care Ambulatory","id":"2.16.840.1.113883.3.526.3.1584","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"6","s":[{"value":["","valueset ","\"Hospice Care Ambulatory\"",": ","'urn:oid:2.16.840.1.113883.3.526.3.1584'"]}]}}]},{"localId":"7","locator":"12:1-12:73","name":"Hospice Diagnosis","id":"2.16.840.1.113883.3.464.1003.1165","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"7","s":[{"value":["","valueset ","\"Hospice Diagnosis\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.1165'"]}]}}]},{"localId":"8","locator":"13:1-13:73","name":"Hospice Encounter","id":"2.16.840.1.113883.3.464.1003.1003","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"8","s":[{"value":["","valueset ","\"Hospice Encounter\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.1003'"]}]}}]}]},"codes":{"def":[{"localId":"10","locator":"15:1-15:175","name":"Discharge to healthcare facility for hospice care (procedure)","id":"428371000124100","display":"Discharge to healthcare facility for hospice care (procedure)","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"10","s":[{"value":["","code ","\"Discharge to healthcare facility for hospice care (procedure)\"",": ","'428371000124100'"," from "]},{"r":"9","s":[{"value":["\"SNOMEDCT\""]}]},{"value":[" display ","'Discharge to healthcare facility for hospice care (procedure)'"]}]}}],"codeSystem":{"localId":"9","locator":"15:94-15:103","name":"SNOMEDCT"}},{"localId":"12","locator":"16:1-16:145","name":"Discharge to home for hospice care (procedure)","id":"428361000124107","display":"Discharge to home for hospice care (procedure)","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"12","s":[{"value":["","code ","\"Discharge to home for hospice care (procedure)\"",": ","'428361000124107'"," from "]},{"r":"11","s":[{"value":["\"SNOMEDCT\""]}]},{"value":[" display ","'Discharge to home for hospice care (procedure)'"]}]}}],"codeSystem":{"localId":"11","locator":"16:79-16:88","name":"SNOMEDCT"}},{"localId":"14","locator":"17:1-17:104","name":"Hospice care [Minimum Data Set]","id":"45755-6","display":"Hospice care [Minimum Data Set]","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"14","s":[{"value":["","code ","\"Hospice care [Minimum Data Set]\"",": ","'45755-6'"," from "]},{"r":"13","s":[{"value":["\"LOINC\""]}]},{"value":[" display ","'Hospice care [Minimum Data Set]'"]}]}}],"codeSystem":{"localId":"13","locator":"17:56-17:62","name":"LOINC"}},{"localId":"16","locator":"18:1-18:89","name":"Yes (qualifier value)","id":"373066001","display":"Yes (qualifier value)","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"16","s":[{"value":["","code ","\"Yes (qualifier value)\"",": ","'373066001'"," from "]},{"r":"15","s":[{"value":["\"SNOMEDCT\""]}]},{"value":[" display ","'Yes (qualifier value)'"]}]}}],"codeSystem":{"localId":"15","locator":"18:48-18:57","name":"SNOMEDCT"}}]},"contexts":{"def":[{"locator":"22:1-22:15","name":"Patient"}]},"statements":{"def":[{"locator":"22:1-22:15","name":"Patient","context":"Patient","expression":{"type":"SingletonFrom","operand":{"locator":"22:1-22:15","dataType":"{urn:healthit-gov:qdm:v5_6}Patient","templateId":"Patient","type":"Retrieve"}}},{"localId":"96","locator":"24:1-46:5","name":"Has Hospice Services","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"96","s":[{"value":["","define ","\"Has Hospice Services\"",":\n  "]},{"r":"95","s":[{"r":"86","s":[{"r":"73","s":[{"r":"64","s":[{"r":"46","s":[{"r":"37","s":[{"value":["exists "]},{"r":"36","s":[{"value":["( "]},{"r":"36","s":[{"s":[{"r":"21","s":[{"r":"20","s":[{"r":"20","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Encounter Inpatient\""]}]},{"value":["]"]}]}]},{"value":[" ","InpatientEncounter"]}]}]},{"value":["\n      "]},{"r":"35","s":[{"value":["where "]},{"r":"35","s":[{"r":"30","s":[{"value":["( "]},{"r":"30","s":[{"r":"25","s":[{"r":"23","s":[{"r":"22","s":[{"value":["InpatientEncounter"]}]},{"value":["."]},{"r":"23","s":[{"value":["dischargeDisposition"]}]}]},{"value":[" ","~"," "]},{"r":"24","s":[{"value":["\"Discharge to home for hospice care (procedure)\""]}]}]},{"value":["\n          or "]},{"r":"29","s":[{"r":"27","s":[{"r":"26","s":[{"value":["InpatientEncounter"]}]},{"value":["."]},{"r":"27","s":[{"value":["dischargeDisposition"]}]}]},{"value":[" ","~"," "]},{"r":"28","s":[{"value":["\"Discharge to healthcare facility for hospice care (procedure)\""]}]}]}]},{"value":["\n      )"]}]},{"value":["\n        and "]},{"r":"34","s":[{"r":"32","s":[{"r":"31","s":[{"value":["InpatientEncounter"]}]},{"value":["."]},{"r":"32","s":[{"value":["relevantPeriod"]}]}]},{"r":"34","value":[" ","ends during day of"," "]},{"r":"33","s":[{"value":["\"Measurement Period\""]}]}]}]}]}]},{"value":["\n  )"]}]}]},{"value":["\n    or "]},{"r":"45","s":[{"value":["exists "]},{"r":"44","s":[{"value":["( "]},{"r":"44","s":[{"s":[{"r":"39","s":[{"r":"38","s":[{"r":"38","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Hospice Encounter\""]}]},{"value":["]"]}]}]},{"value":[" ","HospiceEncounter"]}]}]},{"value":["\n        "]},{"r":"43","s":[{"value":["where "]},{"r":"43","s":[{"r":"41","s":[{"r":"40","s":[{"value":["HospiceEncounter"]}]},{"value":["."]},{"r":"41","s":[{"value":["relevantPeriod"]}]}]},{"r":"43","value":[" ","overlaps day of"," "]},{"r":"42","s":[{"value":["\"Measurement Period\""]}]}]}]}]},{"value":["\n    )"]}]}]}]},{"value":["\n    or "]},{"r":"63","s":[{"value":["exists "]},{"r":"62","s":[{"value":["( "]},{"r":"62","s":[{"s":[{"r":"48","s":[{"r":"47","s":[{"r":"47","s":[{"value":["[","\"Assessment, Performed\"",": "]},{"s":[{"value":["\"Hospice care [Minimum Data Set]\""]}]},{"value":["]"]}]}]},{"value":[" ","HospiceAssessment"]}]}]},{"value":["\n        "]},{"r":"61","s":[{"value":["where "]},{"r":"61","s":[{"r":"52","s":[{"r":"50","s":[{"r":"49","s":[{"value":["HospiceAssessment"]}]},{"value":["."]},{"r":"50","s":[{"value":["result"]}]}]},{"value":[" ","~"," "]},{"r":"51","s":[{"value":["\"Yes (qualifier value)\""]}]}]},{"value":["\n          and "]},{"r":"60","s":[{"r":"58","s":[{"r":"53","s":[{"value":["Global"]}]},{"value":["."]},{"r":"58","s":[{"value":["\"NormalizeInterval\""," ( "]},{"r":"55","s":[{"r":"54","s":[{"value":["HospiceAssessment"]}]},{"value":["."]},{"r":"55","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"57","s":[{"r":"56","s":[{"value":["HospiceAssessment"]}]},{"value":["."]},{"r":"57","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]},{"r":"60","value":[" ","overlaps day of"," "]},{"r":"59","s":[{"value":["\"Measurement Period\""]}]}]}]}]}]},{"value":["\n    )"]}]}]}]},{"value":["\n    or "]},{"r":"72","s":[{"value":["exists "]},{"r":"71","s":[{"value":["( "]},{"r":"71","s":[{"s":[{"r":"66","s":[{"r":"65","s":[{"r":"65","s":[{"value":["[","\"Intervention, Order\"",": "]},{"s":[{"value":["\"Hospice Care Ambulatory\""]}]},{"value":["]"]}]}]},{"value":[" ","HospiceOrder"]}]}]},{"value":["\n        "]},{"r":"70","s":[{"value":["where "]},{"r":"70","s":[{"r":"68","s":[{"r":"67","s":[{"value":["HospiceOrder"]}]},{"value":["."]},{"r":"68","s":[{"value":["authorDatetime"]}]}]},{"r":"70","value":[" ","during day of"," "]},{"r":"69","s":[{"value":["\"Measurement Period\""]}]}]}]}]},{"value":["\n    )"]}]}]}]},{"value":["\n    or "]},{"r":"85","s":[{"value":["exists "]},{"r":"84","s":[{"value":["( "]},{"r":"84","s":[{"s":[{"r":"75","s":[{"r":"74","s":[{"r":"74","s":[{"value":["[","\"Intervention, Performed\"",": "]},{"s":[{"value":["\"Hospice Care Ambulatory\""]}]},{"value":["]"]}]}]},{"value":[" ","HospicePerformed"]}]}]},{"value":["\n        "]},{"r":"83","s":[{"value":["where "]},{"r":"83","s":[{"r":"81","s":[{"r":"76","s":[{"value":["Global"]}]},{"value":["."]},{"r":"81","s":[{"value":["\"NormalizeInterval\""," ( "]},{"r":"78","s":[{"r":"77","s":[{"value":["HospicePerformed"]}]},{"value":["."]},{"r":"78","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"80","s":[{"r":"79","s":[{"value":["HospicePerformed"]}]},{"value":["."]},{"r":"80","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]},{"r":"83","value":[" ","overlaps day of"," "]},{"r":"82","s":[{"value":["\"Measurement Period\""]}]}]}]}]},{"value":["\n    )"]}]}]}]},{"value":["\n  or "]},{"r":"94","s":[{"value":["exists "]},{"r":"93","s":[{"value":["( "]},{"r":"93","s":[{"s":[{"r":"88","s":[{"r":"87","s":[{"r":"87","s":[{"value":["[","\"Diagnosis\"",": "]},{"s":[{"value":["\"Hospice Diagnosis\""]}]},{"value":["]"]}]}]},{"value":[" ","HospiceCareDiagnosis"]}]}]},{"value":["\n        "]},{"r":"92","s":[{"value":["where "]},{"r":"92","s":[{"r":"90","s":[{"r":"89","s":[{"value":["HospiceCareDiagnosis"]}]},{"value":["."]},{"r":"90","s":[{"value":["prevalencePeriod"]}]}]},{"r":"92","value":[" ","overlaps day of"," "]},{"r":"91","s":[{"value":["\"Measurement Period\""]}]}]}]}]},{"value":["\n    )"]}]}]}]}]}}],"expression":{"localId":"95","locator":"25:3-46:5","type":"Or","operand":[{"localId":"86","locator":"25:3-43:5","type":"Or","operand":[{"localId":"73","locator":"25:3-40:5","type":"Or","operand":[{"localId":"64","locator":"25:3-37:5","type":"Or","operand":[{"localId":"46","locator":"25:3-33:5","type":"Or","operand":[{"localId":"37","locator":"25:3-30:3","type":"Exists","operand":{"localId":"36","locator":"25:10-30:3","type":"Query","source":[{"localId":"21","locator":"25:12-25:77","alias":"InpatientEncounter","expression":{"localId":"20","locator":"25:12-25:58","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"25:37-25:57","name":"Encounter Inpatient","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"35","locator":"26:7-29:85","type":"And","operand":[{"localId":"30","locator":"26:13-28:7","type":"Or","operand":[{"localId":"25","locator":"26:15-26:104","type":"Equivalent","operand":[{"localId":"23","locator":"26:15-26:53","path":"dischargeDisposition","scope":"InpatientEncounter","type":"Property"},{"localId":"24","locator":"26:57-26:104","name":"Discharge to home for hospice care (procedure)","type":"CodeRef"}]},{"localId":"29","locator":"27:14-27:118","type":"Equivalent","operand":[{"localId":"27","locator":"27:14-27:52","path":"dischargeDisposition","scope":"InpatientEncounter","type":"Property"},{"localId":"28","locator":"27:56-27:118","name":"Discharge to healthcare facility for hospice care (procedure)","type":"CodeRef"}]}]},{"localId":"34","locator":"29:13-29:85","precision":"Day","type":"In","operand":[{"locator":"29:47-29:50","type":"End","operand":{"localId":"32","locator":"29:13-29:45","path":"relevantPeriod","scope":"InpatientEncounter","type":"Property"}},{"localId":"33","locator":"29:66-29:85","name":"Measurement Period","type":"ParameterRef"}]}]}}},{"localId":"45","locator":"31:8-33:5","type":"Exists","operand":{"localId":"44","locator":"31:15-33:5","type":"Query","source":[{"localId":"39","locator":"31:17-31:78","alias":"HospiceEncounter","expression":{"localId":"38","locator":"31:17-31:61","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"31:42-31:60","name":"Hospice Encounter","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"43","locator":"32:9-32:82","precision":"Day","type":"Overlaps","operand":[{"localId":"41","locator":"32:15-32:45","path":"relevantPeriod","scope":"HospiceEncounter","type":"Property"},{"localId":"42","locator":"32:63-32:82","name":"Measurement Period","type":"ParameterRef"}]}}}]},{"localId":"63","locator":"34:8-37:5","type":"Exists","operand":{"localId":"62","locator":"34:15-37:5","type":"Query","source":[{"localId":"48","locator":"34:17-34:94","alias":"HospiceAssessment","expression":{"localId":"47","locator":"34:17-34:76","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveAssessmentPerformed","templateId":"PositiveAssessmentPerformed","codeProperty":"code","codeComparator":"~","type":"Retrieve","codes":{"type":"ToList","operand":{"locator":"34:43-34:75","name":"Hospice care [Minimum Data Set]","type":"CodeRef"}}}}],"relationship":[],"where":{"localId":"61","locator":"35:9-36:150","type":"And","operand":[{"localId":"52","locator":"35:15-35:64","type":"Equivalent","operand":[{"asType":"{urn:hl7-org:elm-types:r1}Code","type":"As","operand":{"localId":"50","locator":"35:15-35:38","path":"result","scope":"HospiceAssessment","type":"Property"}},{"localId":"51","locator":"35:42-35:64","name":"Yes (qualifier value)","type":"CodeRef"}]},{"localId":"60","locator":"36:15-36:150","precision":"Day","type":"Overlaps","operand":[{"localId":"58","locator":"36:15-36:113","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"55","locator":"36:44-36:77","path":"relevantDatetime","scope":"HospiceAssessment","type":"Property"},{"localId":"57","locator":"36:80-36:111","path":"relevantPeriod","scope":"HospiceAssessment","type":"Property"}]},{"localId":"59","locator":"36:131-36:150","name":"Measurement Period","type":"ParameterRef"}]}]}}}]},{"localId":"72","locator":"38:8-40:5","type":"Exists","operand":{"localId":"71","locator":"38:15-40:5","type":"Query","source":[{"localId":"66","locator":"38:17-38:79","alias":"HospiceOrder","expression":{"localId":"65","locator":"38:17-38:66","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveInterventionOrder","templateId":"PositiveInterventionOrder","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"38:41-38:65","name":"Hospice Care Ambulatory","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"70","locator":"39:9-39:76","precision":"Day","type":"In","operand":[{"localId":"68","locator":"39:15-39:41","path":"authorDatetime","scope":"HospiceOrder","type":"Property"},{"localId":"69","locator":"39:57-39:76","name":"Measurement Period","type":"ParameterRef"}]}}}]},{"localId":"85","locator":"41:8-43:5","type":"Exists","operand":{"localId":"84","locator":"41:15-43:5","type":"Query","source":[{"localId":"75","locator":"41:17-41:87","alias":"HospicePerformed","expression":{"localId":"74","locator":"41:17-41:70","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveInterventionPerformed","templateId":"PositiveInterventionPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"41:45-41:69","name":"Hospice Care Ambulatory","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"83","locator":"42:9-42:148","precision":"Day","type":"Overlaps","operand":[{"localId":"81","locator":"42:15-42:111","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"78","locator":"42:44-42:76","path":"relevantDatetime","scope":"HospicePerformed","type":"Property"},{"localId":"80","locator":"42:79-42:109","path":"relevantPeriod","scope":"HospicePerformed","type":"Property"}]},{"localId":"82","locator":"42:129-42:148","name":"Measurement Period","type":"ParameterRef"}]}}}]},{"localId":"94","locator":"44:6-46:5","type":"Exists","operand":{"localId":"93","locator":"44:13-46:5","type":"Query","source":[{"localId":"88","locator":"44:15-44:69","alias":"HospiceCareDiagnosis","expression":{"localId":"87","locator":"44:15-44:48","dataType":"{urn:healthit-gov:qdm:v5_6}Diagnosis","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"44:29-44:47","name":"Hospice Diagnosis","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"92","locator":"45:9-45:88","precision":"Day","type":"Overlaps","operand":[{"localId":"90","locator":"45:15-45:51","path":"prevalencePeriod","scope":"HospiceCareDiagnosis","type":"Property"},{"localId":"91","locator":"45:69-45:88","name":"Measurement Period","type":"ParameterRef"}]}}}]}}]}}},"elm_annotations":{"statements":[{"children":[{"children":[{"children":[{"text":"define \"Has Hospice Services\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Encounter Inpatient\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"20"}],"node_type":"Retrieve","ref_id":"20"},{"children":[{"text":" InpatientEncounter"}]}],"ref_id":"21"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"InpatientEncounter"}]}],"ref_id":"22"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"dischargeDisposition"}]}],"node_type":"Property","ref_id":"23"}],"node_type":"Property","ref_id":"23"},{"children":[{"text":" ~ "}]},{"children":[{"children":[{"text":"\"Discharge to home for hospice care (procedure)\""}]}],"node_type":"CodeRef","ref_id":"24"}],"node_type":"Equivalent","ref_id":"25"},{"children":[{"text":"\n          or "}]},{"children":[{"children":[{"children":[{"children":[{"text":"InpatientEncounter"}]}],"ref_id":"26"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"dischargeDisposition"}]}],"node_type":"Property","ref_id":"27"}],"node_type":"Property","ref_id":"27"},{"children":[{"text":" ~ "}]},{"children":[{"children":[{"text":"\"Discharge to healthcare facility for hospice care (procedure)\""}]}],"node_type":"CodeRef","ref_id":"28"}],"node_type":"Equivalent","ref_id":"29"}],"node_type":"Or","ref_id":"30"},{"children":[{"text":"\n      )"}]}],"node_type":"Or","ref_id":"30"},{"children":[{"text":"\n        and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"InpatientEncounter"}]}],"ref_id":"31"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"32"}],"node_type":"Property","ref_id":"32"},{"children":[{"text":" ends during day of "}],"node_type":"In","ref_id":"34"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"33"}],"node_type":"In","ref_id":"34"}],"ref_id":"35"}],"ref_id":"35"}],"node_type":"Query","ref_id":"36"},{"children":[{"text":"\n  )"}]}],"node_type":"Query","ref_id":"36"}],"node_type":"Exists","ref_id":"37"},{"children":[{"text":"\n    or "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Hospice Encounter\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"38"}],"node_type":"Retrieve","ref_id":"38"},{"children":[{"text":" HospiceEncounter"}]}],"ref_id":"39"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"HospiceEncounter"}]}],"ref_id":"40"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"41"}],"node_type":"Property","ref_id":"41"},{"children":[{"text":" overlaps day of "}],"ref_id":"43"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"42"}],"ref_id":"43"}],"ref_id":"43"}],"node_type":"Query","ref_id":"44"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"44"}],"node_type":"Exists","ref_id":"45"}],"node_type":"Or","ref_id":"46"},{"children":[{"text":"\n    or "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Assessment, Performed\": "}]},{"children":[{"children":[{"text":"\"Hospice care [Minimum Data Set]\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"47"}],"node_type":"Retrieve","ref_id":"47"},{"children":[{"text":" HospiceAssessment"}]}],"ref_id":"48"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"HospiceAssessment"}]}],"ref_id":"49"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"result"}]}],"node_type":"Property","ref_id":"50"}],"node_type":"Property","ref_id":"50"},{"children":[{"text":" ~ "}]},{"children":[{"children":[{"text":"\"Yes (qualifier value)\""}]}],"node_type":"CodeRef","ref_id":"51"}],"node_type":"Equivalent","ref_id":"52"},{"children":[{"text":"\n          and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"53"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\" ( "}]},{"children":[{"children":[{"children":[{"text":"HospiceAssessment"}]}],"ref_id":"54"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"55"}],"node_type":"Property","ref_id":"55"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"HospiceAssessment"}]}],"ref_id":"56"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"57"}],"node_type":"Property","ref_id":"57"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"58"}],"node_type":"FunctionRef","ref_id":"58"},{"children":[{"text":" overlaps day of "}],"node_type":"Overlaps","ref_id":"60"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"59"}],"node_type":"Overlaps","ref_id":"60"}],"ref_id":"61"}],"ref_id":"61"}],"node_type":"Query","ref_id":"62"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"62"}],"node_type":"Exists","ref_id":"63"}],"node_type":"Or","ref_id":"64"},{"children":[{"text":"\n    or "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Intervention, Order\": "}]},{"children":[{"children":[{"text":"\"Hospice Care Ambulatory\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"65"}],"node_type":"Retrieve","ref_id":"65"},{"children":[{"text":" HospiceOrder"}]}],"ref_id":"66"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"HospiceOrder"}]}],"ref_id":"67"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"68"}],"node_type":"Property","ref_id":"68"},{"children":[{"text":" during day of "}],"ref_id":"70"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"69"}],"ref_id":"70"}],"ref_id":"70"}],"node_type":"Query","ref_id":"71"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"71"}],"node_type":"Exists","ref_id":"72"}],"node_type":"Or","ref_id":"73"},{"children":[{"text":"\n    or "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Intervention, Performed\": "}]},{"children":[{"children":[{"text":"\"Hospice Care Ambulatory\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"74"}],"node_type":"Retrieve","ref_id":"74"},{"children":[{"text":" HospicePerformed"}]}],"ref_id":"75"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"76"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\" ( "}]},{"children":[{"children":[{"children":[{"text":"HospicePerformed"}]}],"ref_id":"77"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"78"}],"node_type":"Property","ref_id":"78"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"HospicePerformed"}]}],"ref_id":"79"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"80"}],"node_type":"Property","ref_id":"80"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"81"}],"node_type":"FunctionRef","ref_id":"81"},{"children":[{"text":" overlaps day of "}],"ref_id":"83"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"82"}],"ref_id":"83"}],"ref_id":"83"}],"node_type":"Query","ref_id":"84"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"84"}],"node_type":"Exists","ref_id":"85"}],"node_type":"Or","ref_id":"86"},{"children":[{"text":"\n  or "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Diagnosis\": "}]},{"children":[{"children":[{"text":"\"Hospice Diagnosis\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"87"}],"node_type":"Retrieve","ref_id":"87"},{"children":[{"text":" HospiceCareDiagnosis"}]}],"ref_id":"88"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"HospiceCareDiagnosis"}]}],"ref_id":"89"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"prevalencePeriod"}]}],"node_type":"Property","ref_id":"90"}],"node_type":"Property","ref_id":"90"},{"children":[{"text":" overlaps day of "}],"ref_id":"92"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"91"}],"ref_id":"92"}],"ref_id":"92"}],"node_type":"Query","ref_id":"93"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"93"}],"node_type":"Exists","ref_id":"94"}],"node_type":"Or","ref_id":"95"}],"ref_id":"96"}],"define_name":"Has Hospice Services"}],"identifier":{"id":"Hospice","version":"5.0.000"}},"is_main_library":false,"is_top_level":true,"library_name":"Hospice","library_version":"5.0.000","statement_dependencies":[{"_id":"689244ad0734dfcaf54144e2","statement_name":"Has Hospice Services","statement_references":[{"_id":"689244ad0734dfcaf54144e3","hqmf_id":null,"library_name":"MATGlobalCommonFunctions","statement_name":"NormalizeInterval"}]}]},{"_id":"6892448f0734dfcaf5413680","cql":"library MATGlobalCommonFunctions version '7.0.000'\n\nusing QDM version '5.6'\n\nvalueset \"Emergency Department Visit\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.292' \nvalueset \"Encounter Inpatient\": 'urn:oid:2.16.840.1.113883.3.666.5.307' \nvalueset \"Intensive Care Unit\": 'urn:oid:2.16.840.1.113762.1.4.1029.206' \nvalueset \"Observation Services\": 'urn:oid:2.16.840.1.113762.1.4.1111.143' \nvalueset \"Outpatient Surgery Service\": 'urn:oid:2.16.840.1.113762.1.4.1110.38' \n\nparameter \"Measurement Period\" Interval\u003cDateTime\u003e\n\ncontext Patient\n\ndefine \"ED Encounter\":\n  [\"Encounter, Performed\": \"Emergency Department Visit\"]\n\ndefine \"Inpatient Encounter\":\n  [\"Encounter, Performed\": \"Encounter Inpatient\"] EncounterInpatient\n    where \"LengthInDays\"(EncounterInpatient.relevantPeriod)\u003c= 120\n      and EncounterInpatient.relevantPeriod ends during day of \"Measurement Period\"\n\n/*@description: Returns an interval of date values extracted from the input interval of date-time values\n@comment: This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability.*/\ndefine function \"ToDateInterval\"(period Interval\u003cDateTime\u003e ):\n  Interval[date from start of period, date from end of period]\n\n/*calculates the difference in calendar days between the start and end of the given interval.*/\ndefine function \"LengthInDays\"(Value Interval\u003cDateTime\u003e ):\n  difference in days between start of Value and end of Value\n\n/*returns list of all locations within an encounter, including locations for immediately prior ED visit.*/\ndefine function \"HospitalizationLocations\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet EDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn if EDVisit is null then Visit.facilityLocations \n  \t\telse flatten { EDVisit.facilityLocations, Visit.facilityLocations }\n\n/*Returns the arrival time in the ED for the encounter.*/\ndefine function \"EmergencyDepartmentArrivalTime\"(Encounter \"Encounter, Performed\" ):\n  start of First((\"HospitalizationLocations\"(Encounter))HospitalLocation\n  \t\twhere HospitalLocation.code in \"Emergency Department Visit\"\n  \t\tsort by start of locationPeriod\n  ).locationPeriod\n\n/*Returns admission time for an encounter or for immediately prior emergency department visit.*/\ndefine function \"HospitalAdmissionTime\"(Encounter \"Encounter, Performed\" ):\n  start of \"Hospitalization\"(Encounter)\n\n/*Returns earliest arrival time for an encounter including any prior ED visit.*/\ndefine function \"HospitalArrivalTime\"(Encounter \"Encounter, Performed\" ):\n  start of First((\"HospitalizationLocations\"(Encounter))HospitalLocation\n  \t\tsort by start of locationPeriod\n  ).locationPeriod\n\n/*Hospitalization returns the total interval for admission to discharge for the given encounter, or for the admission of any immediately prior emergency department visit to the discharge of the given encounter.*/\ndefine function \"Hospitalization\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet EDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn Interval[Coalesce(start of EDVisit.relevantPeriod, start of Visit.relevantPeriod), \n  \tend of Visit.relevantPeriod]\n\n/*Returns the length of stay in days (i.e. the number of days between admission and discharge) for the given encounter, or from the admission of any immediately prior emergency department visit to the discharge of the encounter*/\ndefine function \"HospitalizationLengthofStay\"(Encounter \"Encounter, Performed\" ):\n  LengthInDays(\"Hospitalization\"(Encounter))\n\n/*Returns the latest departure time for encounter including any prior ED visit.*/\ndefine function \"HospitalDepartureTime\"(Encounter \"Encounter, Performed\" ):\n  end of Last((\"HospitalizationLocations\"(Encounter))HospitalLocation\n  \t\tsort by start of locationPeriod\n  ).locationPeriod\n\n/*Hospital Discharge Time returns the discharge time for an encounter*/\ndefine function \"HospitalDischargeTime\"(Encounter \"Encounter, Performed\" ):\n  end of Encounter.relevantPeriod\n\n/*Hospitalization with Observation and Outpatient Surgery Service returns the total interval from the start of any immediately prior emergency department visit, outpatient surgery visit or observation visit to the discharge of the given encounter.*/\ndefine function \"HospitalizationWithObservationAndOutpatientSurgeryService\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet ObsVisit: Last([\"Encounter, Performed\": \"Observation Services\"] LastObs\n  \t\t\twhere LastObs.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t),\n  \tVisitStart: Coalesce(start of ObsVisit.relevantPeriod, start of Visit.relevantPeriod),\n  \tEDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before VisitStart\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t),\n  \tVisitStartWithED: Coalesce(start of EDVisit.relevantPeriod, VisitStart),\n  \tOutpatientSurgeryVisit: Last([\"Encounter, Performed\": \"Outpatient Surgery Service\"] LastSurgeryOP\n  \t\t\twhere LastSurgeryOP.relevantPeriod ends 1 hour or less on or before VisitStartWithED\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn Interval[Coalesce(start of OutpatientSurgeryVisit.relevantPeriod, VisitStartWithED), \n  \tend of Visit.relevantPeriod]\n\n/*Hospitalization with Observation returns the total interval from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\ndefine function \"HospitalizationWithObservation\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet ObsVisit: Last([\"Encounter, Performed\": \"Observation Services\"] LastObs\n  \t\t\twhere LastObs.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t),\n  \tVisitStart: Coalesce(start of ObsVisit.relevantPeriod, start of Visit.relevantPeriod),\n  \tEDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before VisitStart\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn Interval[Coalesce(start of EDVisit.relevantPeriod, VisitStart), \n  \tend of Visit.relevantPeriod]\n\n/*Hospitalization with Observation Length of Stay returns the length in days from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\ndefine function \"HospitalizationWithObservationLengthofStay\"(Encounter \"Encounter, Performed\" ):\n  \"LengthInDays\"(\"HospitalizationWithObservation\"(Encounter))\n\n/*First Inpatient Intensive Care Unit returns the first intensive care unit for the given encounter, without considering any immediately prior emergency department visit.*/\ndefine function \"FirstInpatientIntensiveCareUnit\"(Encounter \"Encounter, Performed\" ):\n  First((Encounter.facilityLocations)HospitalLocation\n      where HospitalLocation.code in \"Intensive Care Unit\"\n        and HospitalLocation.locationPeriod during Encounter.relevantPeriod\n      sort by start of locationPeriod\n  )\n\n/*Given a datetime and a period, returns the period (if a period is provided) or the interval beginning and ending on the datetime (if a datetime is provided)*/\ndefine function \"NormalizeInterval\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  if pointInTime is not null then Interval[pointInTime, pointInTime]\n    else if period is not null then period \n    else null as Interval\u003cDateTime\u003e\n\n/*Given an interval, return true if the interval has a starting boundary specified (i.e. the start of the interval is not null and not the minimum DateTime value)*/\ndefine function \"HasStart\"(period Interval\u003cDateTime\u003e ):\n  not ( start of period is null\n      or start of period = minimum DateTime\n  )\n\n/*Given an interval, return true if the interval has an ending boundary specified (i.e. the end of the interval is not null and not the maximum DateTime value)*/\ndefine function \"HasEnd\"(period Interval\u003cDateTime\u003e ):\n  not ( \n    end of period is null\n      or \n      end of period = maximum DateTime\n  )\n\n/*Given an interval, return the ending point if the interval has an ending boundary specified, otherwise, return the starting point*/\ndefine function \"Latest\"(period Interval\u003cDateTime\u003e ):\n  if ( HasEnd(period)) then \n  end of period \n    else start of period\n\n/*Given an interval, return the starting point if the interval has a starting boundary specified, otherwise, return the ending point*/\ndefine function \"Earliest\"(period Interval\u003cDateTime\u003e ):\n  if ( HasStart(period)) then start of period \n    else \n  end of period\n\n/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the ending point of the period if the period has an ending boundary specified, otherwise returns the starting point of the interval*/\ndefine function \"LatestOf\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  Latest(NormalizeInterval(pointInTime, period))\n\n/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the starting point of the period if the period has a starting boundary specified, otherwise returns the ending point of the period*/\ndefine function \"EarliestOf\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  Earliest(NormalizeInterval(pointInTime, period))\n\n","elm":{"library":{"annotation":[{"translatorOptions":"EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion,DisableMethodInvocation","type":"CqlToElmInfo"},{"type":"Annotation","s":{"r":"404","s":[{"value":["","library MATGlobalCommonFunctions version '7.0.000'"]}]}}],"identifier":{"id":"MATGlobalCommonFunctions","version":"7.0.000"},"schemaIdentifier":{"id":"urn:hl7-org:elm","version":"r1"},"usings":{"def":[{"localIdentifier":"System","uri":"urn:hl7-org:elm-types:r1"},{"localId":"1","locator":"3:1-3:23","localIdentifier":"QDM","uri":"urn:healthit-gov:qdm:v5_6","version":"5.6","annotation":[{"type":"Annotation","s":{"r":"1","s":[{"value":["","using "]},{"s":[{"value":["QDM"]}]},{"value":[" version ","'5.6'"]}]}}]}]},"parameters":{"def":[{"localId":"9","locator":"11:1-11:49","name":"Measurement Period","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"9","s":[{"value":["","parameter ","\"Measurement Period\""," "]},{"r":"8","s":[{"value":["Interval\u003c"]},{"r":"7","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}}],"parameterTypeSpecifier":{"localId":"8","locator":"11:32-11:49","type":"IntervalTypeSpecifier","pointType":{"localId":"7","locator":"11:41-11:48","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},"valueSets":{"def":[{"localId":"2","locator":"5:1-5:82","name":"Emergency Department Visit","id":"2.16.840.1.113883.3.117.1.7.1.292","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"2","s":[{"value":["","valueset ","\"Emergency Department Visit\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.292'"]}]}}]},{"localId":"3","locator":"6:1-6:71","name":"Encounter Inpatient","id":"2.16.840.1.113883.3.666.5.307","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"3","s":[{"value":["","valueset ","\"Encounter Inpatient\"",": ","'urn:oid:2.16.840.1.113883.3.666.5.307'"]}]}}]},{"localId":"4","locator":"7:1-7:72","name":"Intensive Care Unit","id":"2.16.840.1.113762.1.4.1029.206","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"4","s":[{"value":["","valueset ","\"Intensive Care Unit\"",": ","'urn:oid:2.16.840.1.113762.1.4.1029.206'"]}]}}]},{"localId":"5","locator":"8:1-8:73","name":"Observation Services","id":"2.16.840.1.113762.1.4.1111.143","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"5","s":[{"value":["","valueset ","\"Observation Services\"",": ","'urn:oid:2.16.840.1.113762.1.4.1111.143'"]}]}}]},{"localId":"6","locator":"9:1-9:78","name":"Outpatient Surgery Service","id":"2.16.840.1.113762.1.4.1110.38","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"6","s":[{"value":["","valueset ","\"Outpatient Surgery Service\"",": ","'urn:oid:2.16.840.1.113762.1.4.1110.38'"]}]}}]}]},"contexts":{"def":[{"locator":"13:1-13:15","name":"Patient"}]},"statements":{"def":[{"locator":"13:1-13:15","name":"Patient","context":"Patient","expression":{"type":"SingletonFrom","operand":{"locator":"13:1-13:15","dataType":"{urn:healthit-gov:qdm:v5_6}Patient","templateId":"Patient","type":"Retrieve"}}},{"localId":"11","locator":"15:1-16:56","name":"ED Encounter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"11","s":[{"value":["","define ","\"ED Encounter\"",":\n  "]},{"r":"10","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"10","locator":"16:3-16:56","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"16:28-16:55","name":"Emergency Department Visit","type":"ValueSetRef"}}},{"localId":"23","locator":"32:1-33:60","name":"LengthInDays","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"23","s":[{"value":["/*calculates the difference in calendar days between the start and end of the given interval.*/","define function ","\"LengthInDays\"","(","Value"," "]},{"r":"17","s":[{"value":["Interval\u003c"]},{"r":"16","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"22","s":[{"r":"22","s":[{"value":["difference in days between "]},{"r":"19","s":[{"value":["start of "]},{"r":"18","s":[{"value":["Value"]}]}]},{"value":[" and "]},{"r":"21","s":[{"value":["end of "]},{"r":"20","s":[{"value":["Value"]}]}]}]}]}]}}],"expression":{"localId":"22","locator":"33:3-33:60","precision":"Day","type":"DifferenceBetween","operand":[{"localId":"19","locator":"33:30-33:43","type":"Start","operand":{"localId":"18","locator":"33:39-33:43","name":"Value","type":"OperandRef"}},{"localId":"21","locator":"33:49-33:60","type":"End","operand":{"localId":"20","locator":"33:56-33:60","name":"Value","type":"OperandRef"}}]},"operand":[{"name":"Value","operandTypeSpecifier":{"localId":"17","locator":"32:38-32:55","type":"IntervalTypeSpecifier","pointType":{"localId":"16","locator":"32:47-32:54","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"33","locator":"18:1-21:83","name":"Inpatient Encounter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"33","s":[{"value":["","define ","\"Inpatient Encounter\"",":\n  "]},{"r":"32","s":[{"s":[{"r":"13","s":[{"r":"12","s":[{"r":"12","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Encounter Inpatient\""]}]},{"value":["]"]}]}]},{"value":[" ","EncounterInpatient"]}]}]},{"value":["\n    "]},{"r":"31","s":[{"value":["where "]},{"r":"31","s":[{"r":"26","s":[{"r":"24","s":[{"value":["\"LengthInDays\"","("]},{"r":"15","s":[{"r":"14","s":[{"value":["EncounterInpatient"]}]},{"value":["."]},{"r":"15","s":[{"value":["relevantPeriod"]}]}]},{"value":[")"]}]},{"r":"25","value":["\u003c="," ","120"]}]},{"value":["\n      and "]},{"r":"30","s":[{"r":"28","s":[{"r":"27","s":[{"value":["EncounterInpatient"]}]},{"value":["."]},{"r":"28","s":[{"value":["relevantPeriod"]}]}]},{"r":"30","value":[" ","ends during day of"," "]},{"r":"29","s":[{"value":["\"Measurement Period\""]}]}]}]}]}]}]}}],"expression":{"localId":"32","locator":"19:3-21:83","type":"Query","source":[{"localId":"13","locator":"19:3-19:68","alias":"EncounterInpatient","expression":{"localId":"12","locator":"19:3-19:49","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"19:28-19:48","name":"Encounter Inpatient","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"31","locator":"20:5-21:83","type":"And","operand":[{"localId":"26","locator":"20:11-20:65","type":"LessOrEqual","operand":[{"localId":"24","locator":"20:11-20:59","name":"LengthInDays","type":"FunctionRef","operand":[{"localId":"15","locator":"20:26-20:58","path":"relevantPeriod","scope":"EncounterInpatient","type":"Property"}]},{"localId":"25","locator":"20:63-20:65","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"120","type":"Literal"}]},{"localId":"30","locator":"21:11-21:83","precision":"Day","type":"In","operand":[{"locator":"21:45-21:48","type":"End","operand":{"localId":"28","locator":"21:11-21:43","path":"relevantPeriod","scope":"EncounterInpatient","type":"Property"}},{"localId":"29","locator":"21:64-21:83","name":"Measurement Period","type":"ParameterRef"}]}]}}},{"localId":"43","locator":"28:1-29:62","name":"ToDateInterval","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","t":[{"name":"description","value":"Returns an interval of date values extracted from the input interval of date-time values"},{"name":"description","value":"Returns an interval of date values extracted from the input interval of date-time values"},{"name":"comment","value":"This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability."}],"s":{"r":"43","s":[{"value":["/*@description: Returns an interval of date values extracted from the input interval of date-time values\n@comment: This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability.*/","define function ","\"ToDateInterval\"","(","period"," "]},{"r":"35","s":[{"value":["Interval\u003c"]},{"r":"34","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"42","s":[{"r":"42","s":[{"value":["Interval["]},{"r":"38","s":[{"value":["date from "]},{"r":"37","s":[{"value":["start of "]},{"r":"36","s":[{"value":["period"]}]}]}]},{"value":[", "]},{"r":"41","s":[{"value":["date from "]},{"r":"40","s":[{"value":["end of "]},{"r":"39","s":[{"value":["period"]}]}]}]},{"value":["]"]}]}]}]}}],"expression":{"localId":"42","locator":"29:3-29:62","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"38","locator":"29:12-29:36","type":"DateFrom","operand":{"localId":"37","locator":"29:22-29:36","type":"Start","operand":{"localId":"36","locator":"29:31-29:36","name":"period","type":"OperandRef"}}},"high":{"localId":"41","locator":"29:39-29:61","type":"DateFrom","operand":{"localId":"40","locator":"29:49-29:61","type":"End","operand":{"localId":"39","locator":"29:56-29:61","name":"period","type":"OperandRef"}}}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"35","locator":"28:41-28:58","type":"IntervalTypeSpecifier","pointType":{"localId":"34","locator":"28:50-28:57","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"79","locator":"36:1-44:71","name":"HospitalizationLocations","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"79","s":[{"value":["/*returns list of all locations within an encounter, including locations for immediately prior ED visit.*/","define function ","\"HospitalizationLocations\"","(","Encounter"," "]},{"r":"47","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"78","s":[{"r":"78","s":[{"s":[{"r":"49","s":[{"r":"48","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"65","s":[{"value":["EDVisit",": "]},{"r":"64","s":[{"value":["Last","("]},{"r":"63","s":[{"s":[{"r":"51","s":[{"r":"50","s":[{"r":"50","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"58","s":[{"value":["where "]},{"r":"58","s":[{"r":"53","s":[{"r":"52","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"53","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"58","s":[{"value":["ends "]},{"r":"57","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"56","s":[{"value":["start of "]},{"r":"55","s":[{"r":"54","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"55","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"62","s":[{"value":["sort by \n  \t\t\t"]},{"r":"61","s":[{"r":"60","s":[{"value":["end of "]},{"r":"59","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"77","s":[{"value":["return "]},{"r":"76","s":[{"value":["if "]},{"r":"67","s":[{"r":"66","s":[{"value":["EDVisit"]}]},{"value":[" is null"]}]},{"value":[" then "]},{"r":"69","s":[{"r":"68","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"69","s":[{"value":["facilityLocations"]}]}]},{"value":[" \n  \t\telse "]},{"r":"75","s":[{"value":["flatten "]},{"r":"74","s":[{"value":["{ "]},{"r":"71","s":[{"r":"70","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"71","s":[{"value":["facilityLocations"]}]}]},{"value":[", "]},{"r":"73","s":[{"r":"72","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"73","s":[{"value":["facilityLocations"]}]}]},{"value":[" }"]}]}]}]}]}]}]}]}}],"expression":{"localId":"78","locator":"37:3-44:71","type":"Query","source":[{"localId":"49","locator":"37:3-37:17","alias":"Visit","expression":{"localId":"48","locator":"37:3-37:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"65","locator":"38:8-42:4","identifier":"EDVisit","expression":{"localId":"64","locator":"38:17-42:4","type":"Last","source":{"localId":"63","locator":"38:22-41:26","type":"Query","source":[{"localId":"51","locator":"38:22-38:82","alias":"LastED","expression":{"localId":"50","locator":"38:22-38:75","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"38:47-38:74","name":"Emergency Department Visit","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"58","locator":"39:6-39:95","type":"And","operand":[{"locator":"39:39-39:52","type":"In","operand":[{"locator":"39:34-39:37","type":"End","operand":{"localId":"53","locator":"39:12-39:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"39:39-39:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"39:67-39:95","type":"Subtract","operand":[{"localId":"56","locator":"39:67-39:95","type":"Start","operand":{"localId":"55","locator":"39:76-39:95","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"57","locator":"39:39-39:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"56","locator":"39:67-39:95","type":"Start","operand":{"localId":"55","locator":"39:76-39:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"39:39-39:52","type":"Not","operand":{"locator":"39:39-39:52","type":"IsNull","operand":{"localId":"56","locator":"39:67-39:95","type":"Start","operand":{"localId":"55","locator":"39:76-39:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"62","locator":"40:6-41:26","by":[{"localId":"61","locator":"41:6-41:26","direction":"asc","type":"ByExpression","expression":{"localId":"60","locator":"41:6-41:26","type":"End","operand":{"localId":"59","locator":"41:13-41:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"77","locator":"43:4-44:71","expression":{"localId":"76","locator":"43:11-44:71","type":"If","condition":{"localId":"67","locator":"43:14-43:28","type":"IsNull","operand":{"localId":"66","locator":"43:14-43:20","name":"EDVisit","type":"QueryLetRef"}},"then":{"localId":"69","locator":"43:35-43:57","path":"facilityLocations","scope":"Visit","type":"Property"},"else":{"localId":"75","locator":"44:10-44:71","type":"Flatten","operand":{"localId":"74","locator":"44:18-44:71","type":"List","element":[{"localId":"71","locator":"44:20-44:44","path":"facilityLocations","type":"Property","source":{"localId":"70","locator":"44:20-44:26","name":"EDVisit","type":"QueryLetRef"}},{"localId":"73","locator":"44:47-44:69","path":"facilityLocations","scope":"Visit","type":"Property"}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"47","locator":"36:54-36:75","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"96","locator":"47:1-51:18","name":"EmergencyDepartmentArrivalTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"96","s":[{"value":["/*Returns the arrival time in the ED for the encounter.*/","define function ","\"EmergencyDepartmentArrivalTime\"","(","Encounter"," "]},{"r":"80","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"95","s":[{"r":"95","s":[{"value":["start of "]},{"r":"94","s":[{"r":"93","s":[{"value":["First","("]},{"r":"92","s":[{"s":[{"r":"83","s":[{"r":"82","s":[{"value":["("]},{"r":"82","s":[{"value":["\"HospitalizationLocations\"","("]},{"r":"81","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n  \t\t"]},{"r":"87","s":[{"value":["where "]},{"r":"87","s":[{"r":"85","s":[{"r":"84","s":[{"value":["HospitalLocation"]}]},{"value":["."]},{"r":"85","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"86","s":[{"value":["\"Emergency Department Visit\""]}]}]}]},{"value":["\n  \t\t"]},{"r":"91","s":[{"value":["sort by "]},{"r":"90","s":[{"r":"89","s":[{"value":["start of "]},{"r":"88","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"94","s":[{"value":["locationPeriod"]}]}]}]}]}]}}],"expression":{"localId":"95","locator":"48:3-51:18","type":"Start","operand":{"localId":"94","locator":"48:12-51:18","path":"locationPeriod","type":"Property","source":{"localId":"93","locator":"48:12-51:3","type":"First","source":{"localId":"92","locator":"48:18-50:35","type":"Query","source":[{"localId":"83","locator":"48:18-48:72","alias":"HospitalLocation","expression":{"localId":"82","locator":"48:18-48:56","name":"HospitalizationLocations","type":"FunctionRef","operand":[{"localId":"81","locator":"48:46-48:54","name":"Encounter","type":"OperandRef"}]}}],"relationship":[],"where":{"localId":"87","locator":"49:5-49:63","type":"InValueSet","code":{"localId":"85","locator":"49:11-49:31","path":"code","scope":"HospitalLocation","type":"Property"},"valueset":{"localId":"86","locator":"49:36-49:63","name":"Emergency Department Visit","type":"ValueSetRef"}},"sort":{"localId":"91","locator":"50:5-50:35","by":[{"localId":"90","locator":"50:13-50:35","direction":"asc","type":"ByExpression","expression":{"localId":"89","locator":"50:13-50:35","type":"Start","operand":{"localId":"88","locator":"50:22-50:35","name":"locationPeriod","type":"IdentifierRef"}}}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"80","locator":"47:60-47:81","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"131","locator":"64:1-72:31","name":"Hospitalization","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"131","s":[{"value":["/*Hospitalization returns the total interval for admission to discharge for the given encounter, or for the admission of any immediately prior emergency department visit to the discharge of the given encounter.*/","define function ","\"Hospitalization\"","(","Encounter"," "]},{"r":"99","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"130","s":[{"r":"130","s":[{"s":[{"r":"101","s":[{"r":"100","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"117","s":[{"value":["EDVisit",": "]},{"r":"116","s":[{"value":["Last","("]},{"r":"115","s":[{"s":[{"r":"103","s":[{"r":"102","s":[{"r":"102","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"110","s":[{"value":["where "]},{"r":"110","s":[{"r":"105","s":[{"r":"104","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"105","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"110","s":[{"value":["ends "]},{"r":"109","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"108","s":[{"value":["start of "]},{"r":"107","s":[{"r":"106","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"107","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"114","s":[{"value":["sort by \n  \t\t\t"]},{"r":"113","s":[{"r":"112","s":[{"value":["end of "]},{"r":"111","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"129","s":[{"value":["return "]},{"r":"128","s":[{"value":["Interval["]},{"r":"124","s":[{"value":["Coalesce","("]},{"r":"120","s":[{"value":["start of "]},{"r":"119","s":[{"r":"118","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"119","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"123","s":[{"value":["start of "]},{"r":"122","s":[{"r":"121","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"122","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]},{"value":[", \n  \t"]},{"r":"127","s":[{"value":["end of "]},{"r":"126","s":[{"r":"125","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"126","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["]"]}]}]}]}]}]}}],"expression":{"localId":"130","locator":"65:3-72:31","type":"Query","source":[{"localId":"101","locator":"65:3-65:17","alias":"Visit","expression":{"localId":"100","locator":"65:3-65:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"117","locator":"66:8-70:4","identifier":"EDVisit","expression":{"localId":"116","locator":"66:17-70:4","type":"Last","source":{"localId":"115","locator":"66:22-69:26","type":"Query","source":[{"localId":"103","locator":"66:22-66:82","alias":"LastED","expression":{"localId":"102","locator":"66:22-66:75","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"66:47-66:74","name":"Emergency Department Visit","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"110","locator":"67:6-67:95","type":"And","operand":[{"locator":"67:39-67:52","type":"In","operand":[{"locator":"67:34-67:37","type":"End","operand":{"localId":"105","locator":"67:12-67:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"67:39-67:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"67:67-67:95","type":"Subtract","operand":[{"localId":"108","locator":"67:67-67:95","type":"Start","operand":{"localId":"107","locator":"67:76-67:95","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"109","locator":"67:39-67:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"108","locator":"67:67-67:95","type":"Start","operand":{"localId":"107","locator":"67:76-67:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"67:39-67:52","type":"Not","operand":{"locator":"67:39-67:52","type":"IsNull","operand":{"localId":"108","locator":"67:67-67:95","type":"Start","operand":{"localId":"107","locator":"67:76-67:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"114","locator":"68:6-69:26","by":[{"localId":"113","locator":"69:6-69:26","direction":"asc","type":"ByExpression","expression":{"localId":"112","locator":"69:6-69:26","type":"End","operand":{"localId":"111","locator":"69:13-69:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"129","locator":"71:4-72:31","expression":{"localId":"128","locator":"71:11-72:31","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"124","locator":"71:20-71:91","type":"Coalesce","operand":[{"localId":"120","locator":"71:29-71:59","type":"Start","operand":{"localId":"119","locator":"71:38-71:59","path":"relevantPeriod","type":"Property","source":{"localId":"118","locator":"71:38-71:44","name":"EDVisit","type":"QueryLetRef"}}},{"localId":"123","locator":"71:62-71:90","type":"Start","operand":{"localId":"122","locator":"71:71-71:90","path":"relevantPeriod","scope":"Visit","type":"Property"}}]},"high":{"localId":"127","locator":"72:4-72:30","type":"End","operand":{"localId":"126","locator":"72:11-72:30","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"99","locator":"64:45-64:66","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"134","locator":"54:1-55:39","name":"HospitalAdmissionTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"134","s":[{"value":["/*Returns admission time for an encounter or for immediately prior emergency department visit.*/","define function ","\"HospitalAdmissionTime\"","(","Encounter"," "]},{"r":"97","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"133","s":[{"r":"133","s":[{"value":["start of "]},{"r":"132","s":[{"value":["\"Hospitalization\"","("]},{"r":"98","s":[{"value":["Encounter"]}]},{"value":[")"]}]}]}]}]}}],"expression":{"localId":"133","locator":"55:3-55:39","type":"Start","operand":{"localId":"132","locator":"55:12-55:39","name":"Hospitalization","type":"FunctionRef","operand":[{"localId":"98","locator":"55:30-55:38","name":"Encounter","type":"OperandRef"}]}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"97","locator":"54:51-54:72","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"147","locator":"58:1-61:18","name":"HospitalArrivalTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"147","s":[{"value":["/*Returns earliest arrival time for an encounter including any prior ED visit.*/","define function ","\"HospitalArrivalTime\"","(","Encounter"," "]},{"r":"135","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"146","s":[{"r":"146","s":[{"value":["start of "]},{"r":"145","s":[{"r":"144","s":[{"value":["First","("]},{"r":"143","s":[{"s":[{"r":"138","s":[{"r":"137","s":[{"value":["("]},{"r":"137","s":[{"value":["\"HospitalizationLocations\"","("]},{"r":"136","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n  \t\t"]},{"r":"142","s":[{"value":["sort by "]},{"r":"141","s":[{"r":"140","s":[{"value":["start of "]},{"r":"139","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"145","s":[{"value":["locationPeriod"]}]}]}]}]}]}}],"expression":{"localId":"146","locator":"59:3-61:18","type":"Start","operand":{"localId":"145","locator":"59:12-61:18","path":"locationPeriod","type":"Property","source":{"localId":"144","locator":"59:12-61:3","type":"First","source":{"localId":"143","locator":"59:18-60:35","type":"Query","source":[{"localId":"138","locator":"59:18-59:72","alias":"HospitalLocation","expression":{"localId":"137","locator":"59:18-59:56","name":"HospitalizationLocations","type":"FunctionRef","operand":[{"localId":"136","locator":"59:46-59:54","name":"Encounter","type":"OperandRef"}]}}],"relationship":[],"sort":{"localId":"142","locator":"60:5-60:35","by":[{"localId":"141","locator":"60:13-60:35","direction":"asc","type":"ByExpression","expression":{"localId":"140","locator":"60:13-60:35","type":"Start","operand":{"localId":"139","locator":"60:22-60:35","name":"locationPeriod","type":"IdentifierRef"}}}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"135","locator":"58:49-58:70","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"154","locator":"75:1-76:44","name":"HospitalizationLengthofStay","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"154","s":[{"value":["/*Returns the length of stay in days (i.e. the number of days between admission and discharge) for the given encounter, or from the admission of any immediately prior emergency department visit to the discharge of the encounter*/","define function ","\"HospitalizationLengthofStay\"","(","Encounter"," "]},{"r":"150","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"153","s":[{"r":"153","s":[{"value":["LengthInDays","("]},{"r":"152","s":[{"value":["\"Hospitalization\"","("]},{"r":"151","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"153","locator":"76:3-76:44","name":"LengthInDays","type":"FunctionRef","operand":[{"localId":"152","locator":"76:16-76:43","name":"Hospitalization","type":"FunctionRef","operand":[{"localId":"151","locator":"76:34-76:42","name":"Encounter","type":"OperandRef"}]}]},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"150","locator":"75:57-75:78","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"167","locator":"79:1-82:18","name":"HospitalDepartureTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"167","s":[{"value":["/*Returns the latest departure time for encounter including any prior ED visit.*/","define function ","\"HospitalDepartureTime\"","(","Encounter"," "]},{"r":"155","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"166","s":[{"r":"166","s":[{"value":["end of "]},{"r":"165","s":[{"r":"164","s":[{"value":["Last","("]},{"r":"163","s":[{"s":[{"r":"158","s":[{"r":"157","s":[{"value":["("]},{"r":"157","s":[{"value":["\"HospitalizationLocations\"","("]},{"r":"156","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n  \t\t"]},{"r":"162","s":[{"value":["sort by "]},{"r":"161","s":[{"r":"160","s":[{"value":["start of "]},{"r":"159","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"165","s":[{"value":["locationPeriod"]}]}]}]}]}]}}],"expression":{"localId":"166","locator":"80:3-82:18","type":"End","operand":{"localId":"165","locator":"80:10-82:18","path":"locationPeriod","type":"Property","source":{"localId":"164","locator":"80:10-82:3","type":"Last","source":{"localId":"163","locator":"80:15-81:35","type":"Query","source":[{"localId":"158","locator":"80:15-80:69","alias":"HospitalLocation","expression":{"localId":"157","locator":"80:15-80:53","name":"HospitalizationLocations","type":"FunctionRef","operand":[{"localId":"156","locator":"80:43-80:51","name":"Encounter","type":"OperandRef"}]}}],"relationship":[],"sort":{"localId":"162","locator":"81:5-81:35","by":[{"localId":"161","locator":"81:13-81:35","direction":"asc","type":"ByExpression","expression":{"localId":"160","locator":"81:13-81:35","type":"Start","operand":{"localId":"159","locator":"81:22-81:35","name":"locationPeriod","type":"IdentifierRef"}}}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"155","locator":"79:51-79:72","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"172","locator":"85:1-86:33","name":"HospitalDischargeTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"172","s":[{"value":["/*Hospital Discharge Time returns the discharge time for an encounter*/","define function ","\"HospitalDischargeTime\"","(","Encounter"," "]},{"r":"168","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"171","s":[{"r":"171","s":[{"value":["end of "]},{"r":"170","s":[{"r":"169","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"170","s":[{"value":["relevantPeriod"]}]}]}]}]}]}}],"expression":{"localId":"171","locator":"86:3-86:33","type":"End","operand":{"localId":"170","locator":"86:10-86:33","path":"relevantPeriod","type":"Property","source":{"localId":"169","locator":"86:10-86:18","name":"Encounter","type":"OperandRef"}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"168","locator":"85:51-85:72","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"245","locator":"89:1-109:31","name":"HospitalizationWithObservationAndOutpatientSurgeryService","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"245","s":[{"value":["/*Hospitalization with Observation and Outpatient Surgery Service returns the total interval from the start of any immediately prior emergency department visit, outpatient surgery visit or observation visit to the discharge of the given encounter.*/","define function ","\"HospitalizationWithObservationAndOutpatientSurgeryService\"","(","Encounter"," "]},{"r":"173","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"244","s":[{"r":"244","s":[{"s":[{"r":"175","s":[{"r":"174","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"191","s":[{"value":["ObsVisit",": "]},{"r":"190","s":[{"value":["Last","("]},{"r":"189","s":[{"s":[{"r":"177","s":[{"r":"176","s":[{"r":"176","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Observation Services\""]}]},{"value":["]"]}]}]},{"value":[" ","LastObs"]}]}]},{"value":["\n  \t\t\t"]},{"r":"184","s":[{"value":["where "]},{"r":"184","s":[{"r":"179","s":[{"r":"178","s":[{"value":["LastObs"]}]},{"value":["."]},{"r":"179","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"184","s":[{"value":["ends "]},{"r":"183","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"182","s":[{"value":["start of "]},{"r":"181","s":[{"r":"180","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"181","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"188","s":[{"value":["sort by \n  \t\t\t"]},{"r":"187","s":[{"r":"186","s":[{"value":["end of "]},{"r":"185","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]},{"value":[",\n  \t"]},{"r":"199","s":[{"value":["VisitStart",": "]},{"r":"198","s":[{"value":["Coalesce","("]},{"r":"194","s":[{"value":["start of "]},{"r":"193","s":[{"r":"192","s":[{"value":["ObsVisit"]}]},{"value":["."]},{"r":"193","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"197","s":[{"value":["start of "]},{"r":"196","s":[{"r":"195","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"196","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]}]},{"value":[",\n  \t"]},{"r":"213","s":[{"value":["EDVisit",": "]},{"r":"212","s":[{"value":["Last","("]},{"r":"211","s":[{"s":[{"r":"201","s":[{"r":"200","s":[{"r":"200","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"206","s":[{"value":["where "]},{"r":"206","s":[{"r":"203","s":[{"r":"202","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"203","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"206","s":[{"value":["ends "]},{"r":"205","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"204","s":[{"value":["VisitStart"]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"210","s":[{"value":["sort by \n  \t\t\t"]},{"r":"209","s":[{"r":"208","s":[{"value":["end of "]},{"r":"207","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]},{"value":[",\n  \t"]},{"r":"219","s":[{"value":["VisitStartWithED",": "]},{"r":"218","s":[{"value":["Coalesce","("]},{"r":"216","s":[{"value":["start of "]},{"r":"215","s":[{"r":"214","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"215","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"217","s":[{"value":["VisitStart"]}]},{"value":[")"]}]}]},{"value":[",\n  \t"]},{"r":"233","s":[{"value":["OutpatientSurgeryVisit",": "]},{"r":"232","s":[{"value":["Last","("]},{"r":"231","s":[{"s":[{"r":"221","s":[{"r":"220","s":[{"r":"220","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Outpatient Surgery Service\""]}]},{"value":["]"]}]}]},{"value":[" ","LastSurgeryOP"]}]}]},{"value":["\n  \t\t\t"]},{"r":"226","s":[{"value":["where "]},{"r":"226","s":[{"r":"223","s":[{"r":"222","s":[{"value":["LastSurgeryOP"]}]},{"value":["."]},{"r":"223","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"226","s":[{"value":["ends "]},{"r":"225","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"224","s":[{"value":["VisitStartWithED"]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"230","s":[{"value":["sort by \n  \t\t\t"]},{"r":"229","s":[{"r":"228","s":[{"value":["end of "]},{"r":"227","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"243","s":[{"value":["return "]},{"r":"242","s":[{"value":["Interval["]},{"r":"238","s":[{"value":["Coalesce","("]},{"r":"236","s":[{"value":["start of "]},{"r":"235","s":[{"r":"234","s":[{"value":["OutpatientSurgeryVisit"]}]},{"value":["."]},{"r":"235","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"237","s":[{"value":["VisitStartWithED"]}]},{"value":[")"]}]},{"value":[", \n  \t"]},{"r":"241","s":[{"value":["end of "]},{"r":"240","s":[{"r":"239","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"240","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["]"]}]}]}]}]}]}}],"expression":{"localId":"244","locator":"90:3-109:31","type":"Query","source":[{"localId":"175","locator":"90:3-90:17","alias":"Visit","expression":{"localId":"174","locator":"90:3-90:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"191","locator":"91:8-95:4","identifier":"ObsVisit","expression":{"localId":"190","locator":"91:18-95:4","type":"Last","source":{"localId":"189","locator":"91:23-94:26","type":"Query","source":[{"localId":"177","locator":"91:23-91:78","alias":"LastObs","expression":{"localId":"176","locator":"91:23-91:70","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"91:48-91:69","name":"Observation Services","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"184","locator":"92:6-92:96","type":"And","operand":[{"locator":"92:40-92:53","type":"In","operand":[{"locator":"92:35-92:38","type":"End","operand":{"localId":"179","locator":"92:12-92:33","path":"relevantPeriod","scope":"LastObs","type":"Property"}},{"locator":"92:40-92:53","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"92:68-92:96","type":"Subtract","operand":[{"localId":"182","locator":"92:68-92:96","type":"Start","operand":{"localId":"181","locator":"92:77-92:96","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"183","locator":"92:40-92:45","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"182","locator":"92:68-92:96","type":"Start","operand":{"localId":"181","locator":"92:77-92:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"92:40-92:53","type":"Not","operand":{"locator":"92:40-92:53","type":"IsNull","operand":{"localId":"182","locator":"92:68-92:96","type":"Start","operand":{"localId":"181","locator":"92:77-92:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"188","locator":"93:6-94:26","by":[{"localId":"187","locator":"94:6-94:26","direction":"asc","type":"ByExpression","expression":{"localId":"186","locator":"94:6-94:26","type":"End","operand":{"localId":"185","locator":"94:13-94:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}},{"localId":"199","locator":"96:4-96:88","identifier":"VisitStart","expression":{"localId":"198","locator":"96:16-96:88","type":"Coalesce","operand":[{"localId":"194","locator":"96:25-96:56","type":"Start","operand":{"localId":"193","locator":"96:34-96:56","path":"relevantPeriod","type":"Property","source":{"localId":"192","locator":"96:34-96:41","name":"ObsVisit","type":"QueryLetRef"}}},{"localId":"197","locator":"96:59-96:87","type":"Start","operand":{"localId":"196","locator":"96:68-96:87","path":"relevantPeriod","scope":"Visit","type":"Property"}}]}},{"localId":"213","locator":"97:4-101:4","identifier":"EDVisit","expression":{"localId":"212","locator":"97:13-101:4","type":"Last","source":{"localId":"211","locator":"97:18-100:26","type":"Query","source":[{"localId":"201","locator":"97:18-97:78","alias":"LastED","expression":{"localId":"200","locator":"97:18-97:71","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"97:43-97:70","name":"Emergency Department Visit","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"206","locator":"98:6-98:76","type":"And","operand":[{"locator":"98:39-98:52","type":"In","operand":[{"locator":"98:34-98:37","type":"End","operand":{"localId":"203","locator":"98:12-98:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"98:39-98:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"98:67-98:76","type":"Subtract","operand":[{"localId":"204","locator":"98:67-98:76","name":"VisitStart","type":"QueryLetRef"},{"localId":"205","locator":"98:39-98:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"204","locator":"98:67-98:76","name":"VisitStart","type":"QueryLetRef"}}]},{"locator":"98:39-98:52","type":"Not","operand":{"locator":"98:39-98:52","type":"IsNull","operand":{"localId":"204","locator":"98:67-98:76","name":"VisitStart","type":"QueryLetRef"}}}]},"sort":{"localId":"210","locator":"99:6-100:26","by":[{"localId":"209","locator":"100:6-100:26","direction":"asc","type":"ByExpression","expression":{"localId":"208","locator":"100:6-100:26","type":"End","operand":{"localId":"207","locator":"100:13-100:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}},{"localId":"219","locator":"102:4-102:74","identifier":"VisitStartWithED","expression":{"localId":"218","locator":"102:22-102:74","type":"Coalesce","operand":[{"localId":"216","locator":"102:31-102:61","type":"Start","operand":{"localId":"215","locator":"102:40-102:61","path":"relevantPeriod","type":"Property","source":{"localId":"214","locator":"102:40-102:46","name":"EDVisit","type":"QueryLetRef"}}},{"localId":"217","locator":"102:64-102:73","name":"VisitStart","type":"QueryLetRef"}]}},{"localId":"233","locator":"103:4-107:4","identifier":"OutpatientSurgeryVisit","expression":{"localId":"232","locator":"103:28-107:4","type":"Last","source":{"localId":"231","locator":"103:33-106:26","type":"Query","source":[{"localId":"221","locator":"103:33-103:100","alias":"LastSurgeryOP","expression":{"localId":"220","locator":"103:33-103:86","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"103:58-103:85","name":"Outpatient Surgery Service","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"226","locator":"104:6-104:89","type":"And","operand":[{"locator":"104:46-104:59","type":"In","operand":[{"locator":"104:41-104:44","type":"End","operand":{"localId":"223","locator":"104:12-104:39","path":"relevantPeriod","scope":"LastSurgeryOP","type":"Property"}},{"locator":"104:46-104:59","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"104:74-104:89","type":"Subtract","operand":[{"localId":"224","locator":"104:74-104:89","name":"VisitStartWithED","type":"QueryLetRef"},{"localId":"225","locator":"104:46-104:51","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"224","locator":"104:74-104:89","name":"VisitStartWithED","type":"QueryLetRef"}}]},{"locator":"104:46-104:59","type":"Not","operand":{"locator":"104:46-104:59","type":"IsNull","operand":{"localId":"224","locator":"104:74-104:89","name":"VisitStartWithED","type":"QueryLetRef"}}}]},"sort":{"localId":"230","locator":"105:6-106:26","by":[{"localId":"229","locator":"106:6-106:26","direction":"asc","type":"ByExpression","expression":{"localId":"228","locator":"106:6-106:26","type":"End","operand":{"localId":"227","locator":"106:13-106:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"243","locator":"108:4-109:31","expression":{"localId":"242","locator":"108:11-109:31","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"238","locator":"108:20-108:93","type":"Coalesce","operand":[{"localId":"236","locator":"108:29-108:74","type":"Start","operand":{"localId":"235","locator":"108:38-108:74","path":"relevantPeriod","type":"Property","source":{"localId":"234","locator":"108:38-108:59","name":"OutpatientSurgeryVisit","type":"QueryLetRef"}}},{"localId":"237","locator":"108:77-108:92","name":"VisitStartWithED","type":"QueryLetRef"}]},"high":{"localId":"241","locator":"109:4-109:30","type":"End","operand":{"localId":"240","locator":"109:11-109:30","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"173","locator":"89:87-89:108","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"298","locator":"112:1-126:31","name":"HospitalizationWithObservation","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"298","s":[{"value":["/*Hospitalization with Observation returns the total interval from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/","define function ","\"HospitalizationWithObservation\"","(","Encounter"," "]},{"r":"246","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"297","s":[{"r":"297","s":[{"s":[{"r":"248","s":[{"r":"247","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"264","s":[{"value":["ObsVisit",": "]},{"r":"263","s":[{"value":["Last","("]},{"r":"262","s":[{"s":[{"r":"250","s":[{"r":"249","s":[{"r":"249","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Observation Services\""]}]},{"value":["]"]}]}]},{"value":[" ","LastObs"]}]}]},{"value":["\n  \t\t\t"]},{"r":"257","s":[{"value":["where "]},{"r":"257","s":[{"r":"252","s":[{"r":"251","s":[{"value":["LastObs"]}]},{"value":["."]},{"r":"252","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"257","s":[{"value":["ends "]},{"r":"256","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"255","s":[{"value":["start of "]},{"r":"254","s":[{"r":"253","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"254","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"261","s":[{"value":["sort by \n  \t\t\t"]},{"r":"260","s":[{"r":"259","s":[{"value":["end of "]},{"r":"258","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]},{"value":[",\n  \t"]},{"r":"272","s":[{"value":["VisitStart",": "]},{"r":"271","s":[{"value":["Coalesce","("]},{"r":"267","s":[{"value":["start of "]},{"r":"266","s":[{"r":"265","s":[{"value":["ObsVisit"]}]},{"value":["."]},{"r":"266","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"270","s":[{"value":["start of "]},{"r":"269","s":[{"r":"268","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"269","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]}]},{"value":[",\n  \t"]},{"r":"286","s":[{"value":["EDVisit",": "]},{"r":"285","s":[{"value":["Last","("]},{"r":"284","s":[{"s":[{"r":"274","s":[{"r":"273","s":[{"r":"273","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"279","s":[{"value":["where "]},{"r":"279","s":[{"r":"276","s":[{"r":"275","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"276","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"279","s":[{"value":["ends "]},{"r":"278","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"277","s":[{"value":["VisitStart"]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"283","s":[{"value":["sort by \n  \t\t\t"]},{"r":"282","s":[{"r":"281","s":[{"value":["end of "]},{"r":"280","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"296","s":[{"value":["return "]},{"r":"295","s":[{"value":["Interval["]},{"r":"291","s":[{"value":["Coalesce","("]},{"r":"289","s":[{"value":["start of "]},{"r":"288","s":[{"r":"287","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"288","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"290","s":[{"value":["VisitStart"]}]},{"value":[")"]}]},{"value":[", \n  \t"]},{"r":"294","s":[{"value":["end of "]},{"r":"293","s":[{"r":"292","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"293","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["]"]}]}]}]}]}]}}],"expression":{"localId":"297","locator":"113:3-126:31","type":"Query","source":[{"localId":"248","locator":"113:3-113:17","alias":"Visit","expression":{"localId":"247","locator":"113:3-113:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"264","locator":"114:8-118:4","identifier":"ObsVisit","expression":{"localId":"263","locator":"114:18-118:4","type":"Last","source":{"localId":"262","locator":"114:23-117:26","type":"Query","source":[{"localId":"250","locator":"114:23-114:78","alias":"LastObs","expression":{"localId":"249","locator":"114:23-114:70","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"114:48-114:69","name":"Observation Services","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"257","locator":"115:6-115:96","type":"And","operand":[{"locator":"115:40-115:53","type":"In","operand":[{"locator":"115:35-115:38","type":"End","operand":{"localId":"252","locator":"115:12-115:33","path":"relevantPeriod","scope":"LastObs","type":"Property"}},{"locator":"115:40-115:53","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"115:68-115:96","type":"Subtract","operand":[{"localId":"255","locator":"115:68-115:96","type":"Start","operand":{"localId":"254","locator":"115:77-115:96","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"256","locator":"115:40-115:45","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"255","locator":"115:68-115:96","type":"Start","operand":{"localId":"254","locator":"115:77-115:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"115:40-115:53","type":"Not","operand":{"locator":"115:40-115:53","type":"IsNull","operand":{"localId":"255","locator":"115:68-115:96","type":"Start","operand":{"localId":"254","locator":"115:77-115:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"261","locator":"116:6-117:26","by":[{"localId":"260","locator":"117:6-117:26","direction":"asc","type":"ByExpression","expression":{"localId":"259","locator":"117:6-117:26","type":"End","operand":{"localId":"258","locator":"117:13-117:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}},{"localId":"272","locator":"119:4-119:88","identifier":"VisitStart","expression":{"localId":"271","locator":"119:16-119:88","type":"Coalesce","operand":[{"localId":"267","locator":"119:25-119:56","type":"Start","operand":{"localId":"266","locator":"119:34-119:56","path":"relevantPeriod","type":"Property","source":{"localId":"265","locator":"119:34-119:41","name":"ObsVisit","type":"QueryLetRef"}}},{"localId":"270","locator":"119:59-119:87","type":"Start","operand":{"localId":"269","locator":"119:68-119:87","path":"relevantPeriod","scope":"Visit","type":"Property"}}]}},{"localId":"286","locator":"120:4-124:4","identifier":"EDVisit","expression":{"localId":"285","locator":"120:13-124:4","type":"Last","source":{"localId":"284","locator":"120:18-123:26","type":"Query","source":[{"localId":"274","locator":"120:18-120:78","alias":"LastED","expression":{"localId":"273","locator":"120:18-120:71","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"120:43-120:70","name":"Emergency Department Visit","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"279","locator":"121:6-121:76","type":"And","operand":[{"locator":"121:39-121:52","type":"In","operand":[{"locator":"121:34-121:37","type":"End","operand":{"localId":"276","locator":"121:12-121:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"121:39-121:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"121:67-121:76","type":"Subtract","operand":[{"localId":"277","locator":"121:67-121:76","name":"VisitStart","type":"QueryLetRef"},{"localId":"278","locator":"121:39-121:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"277","locator":"121:67-121:76","name":"VisitStart","type":"QueryLetRef"}}]},{"locator":"121:39-121:52","type":"Not","operand":{"locator":"121:39-121:52","type":"IsNull","operand":{"localId":"277","locator":"121:67-121:76","name":"VisitStart","type":"QueryLetRef"}}}]},"sort":{"localId":"283","locator":"122:6-123:26","by":[{"localId":"282","locator":"123:6-123:26","direction":"asc","type":"ByExpression","expression":{"localId":"281","locator":"123:6-123:26","type":"End","operand":{"localId":"280","locator":"123:13-123:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"296","locator":"125:4-126:31","expression":{"localId":"295","locator":"125:11-126:31","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"291","locator":"125:20-125:72","type":"Coalesce","operand":[{"localId":"289","locator":"125:29-125:59","type":"Start","operand":{"localId":"288","locator":"125:38-125:59","path":"relevantPeriod","type":"Property","source":{"localId":"287","locator":"125:38-125:44","name":"EDVisit","type":"QueryLetRef"}}},{"localId":"290","locator":"125:62-125:71","name":"VisitStart","type":"QueryLetRef"}]},"high":{"localId":"294","locator":"126:4-126:30","type":"End","operand":{"localId":"293","locator":"126:11-126:30","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"246","locator":"112:60-112:81","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"303","locator":"129:1-130:61","name":"HospitalizationWithObservationLengthofStay","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"303","s":[{"value":["/*Hospitalization with Observation Length of Stay returns the length in days from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/","define function ","\"HospitalizationWithObservationLengthofStay\"","(","Encounter"," "]},{"r":"299","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"302","s":[{"r":"302","s":[{"value":["\"LengthInDays\"","("]},{"r":"301","s":[{"value":["\"HospitalizationWithObservation\"","("]},{"r":"300","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"302","locator":"130:3-130:61","name":"LengthInDays","type":"FunctionRef","operand":[{"localId":"301","locator":"130:18-130:60","name":"HospitalizationWithObservation","type":"FunctionRef","operand":[{"localId":"300","locator":"130:51-130:59","name":"Encounter","type":"OperandRef"}]}]},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"299","locator":"129:72-129:93","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"324","locator":"133:1-138:3","name":"FirstInpatientIntensiveCareUnit","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"324","s":[{"value":["/*First Inpatient Intensive Care Unit returns the first intensive care unit for the given encounter, without considering any immediately prior emergency department visit.*/","define function ","\"FirstInpatientIntensiveCareUnit\"","(","Encounter"," "]},{"r":"304","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"323","s":[{"r":"323","s":[{"value":["First","("]},{"r":"322","s":[{"s":[{"r":"307","s":[{"r":"306","s":[{"value":["("]},{"r":"306","s":[{"r":"305","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"306","s":[{"value":["facilityLocations"]}]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n      "]},{"r":"317","s":[{"value":["where "]},{"r":"317","s":[{"r":"311","s":[{"r":"309","s":[{"r":"308","s":[{"value":["HospitalLocation"]}]},{"value":["."]},{"r":"309","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"310","s":[{"value":["\"Intensive Care Unit\""]}]}]},{"value":["\n        and "]},{"r":"316","s":[{"r":"313","s":[{"r":"312","s":[{"value":["HospitalLocation"]}]},{"value":["."]},{"r":"313","s":[{"value":["locationPeriod"]}]}]},{"r":"316","value":[" ","during"," "]},{"r":"315","s":[{"r":"314","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"315","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n      "]},{"r":"321","s":[{"value":["sort by "]},{"r":"320","s":[{"r":"319","s":[{"value":["start of "]},{"r":"318","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]}]}]}}],"expression":{"localId":"323","locator":"134:3-138:3","type":"First","source":{"localId":"322","locator":"134:9-137:37","type":"Query","source":[{"localId":"307","locator":"134:9-134:53","alias":"HospitalLocation","expression":{"localId":"306","locator":"134:9-134:37","path":"facilityLocations","type":"Property","source":{"localId":"305","locator":"134:10-134:18","name":"Encounter","type":"OperandRef"}}}],"relationship":[],"where":{"localId":"317","locator":"135:7-136:75","type":"And","operand":[{"localId":"311","locator":"135:13-135:58","type":"InValueSet","code":{"localId":"309","locator":"135:13-135:33","path":"code","scope":"HospitalLocation","type":"Property"},"valueset":{"localId":"310","locator":"135:38-135:58","name":"Intensive Care Unit","type":"ValueSetRef"}},{"localId":"316","locator":"136:13-136:75","type":"IncludedIn","operand":[{"localId":"313","locator":"136:13-136:43","path":"locationPeriod","scope":"HospitalLocation","type":"Property"},{"localId":"315","locator":"136:52-136:75","path":"relevantPeriod","type":"Property","source":{"localId":"314","locator":"136:52-136:60","name":"Encounter","type":"OperandRef"}}]}]},"sort":{"localId":"321","locator":"137:7-137:37","by":[{"localId":"320","locator":"137:15-137:37","direction":"asc","type":"ByExpression","expression":{"localId":"319","locator":"137:15-137:37","type":"Start","operand":{"localId":"318","locator":"137:24-137:37","name":"locationPeriod","type":"IdentifierRef"}}}]}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"304","locator":"133:61-133:82","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"342","locator":"141:1-144:35","name":"NormalizeInterval","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"342","s":[{"value":["/*Given a datetime and a period, returns the period (if a period is provided) or the interval beginning and ending on the datetime (if a datetime is provided)*/","define function ","\"NormalizeInterval\"","(","pointInTime"," "]},{"r":"325","s":[{"value":["DateTime"]}]},{"value":[", ","period"," "]},{"r":"327","s":[{"value":["Interval\u003c"]},{"r":"326","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"341","s":[{"r":"341","s":[{"value":["if "]},{"r":"329","s":[{"r":"328","s":[{"value":["pointInTime"]}]},{"value":[" is not null"]}]},{"value":[" then "]},{"r":"332","s":[{"value":["Interval["]},{"r":"330","s":[{"value":["pointInTime"]}]},{"value":[", "]},{"r":"331","s":[{"value":["pointInTime"]}]},{"value":["]"]}]},{"value":["\n    else "]},{"r":"340","s":[{"value":["if "]},{"r":"334","s":[{"r":"333","s":[{"value":["period"]}]},{"value":[" is not null"]}]},{"value":[" then "]},{"r":"335","s":[{"value":["period"]}]},{"value":[" \n    else "]},{"r":"339","s":[{"r":"336","value":["null"," as "]},{"r":"338","s":[{"value":["Interval\u003c"]},{"r":"337","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}]}]}]}]}}],"expression":{"localId":"341","locator":"142:3-144:35","type":"If","condition":{"localId":"329","locator":"142:6-142:28","type":"Not","operand":{"locator":"142:6-142:28","type":"IsNull","operand":{"localId":"328","locator":"142:6-142:16","name":"pointInTime","type":"OperandRef"}}},"then":{"localId":"332","locator":"142:35-142:68","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"330","locator":"142:44-142:54","name":"pointInTime","type":"OperandRef"},"high":{"localId":"331","locator":"142:57-142:67","name":"pointInTime","type":"OperandRef"}},"else":{"localId":"340","locator":"143:10-144:35","type":"If","condition":{"localId":"334","locator":"143:13-143:30","type":"Not","operand":{"locator":"143:13-143:30","type":"IsNull","operand":{"localId":"333","locator":"143:13-143:18","name":"period","type":"OperandRef"}}},"then":{"localId":"335","locator":"143:37-143:42","name":"period","type":"OperandRef"},"else":{"localId":"339","locator":"144:10-144:35","strict":false,"type":"As","operand":{"localId":"336","locator":"144:10-144:13","type":"Null"},"asTypeSpecifier":{"localId":"338","locator":"144:18-144:35","type":"IntervalTypeSpecifier","pointType":{"localId":"337","locator":"144:27-144:34","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}},"operand":[{"name":"pointInTime","operandTypeSpecifier":{"localId":"325","locator":"141:49-141:56","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"name":"period","operandTypeSpecifier":{"localId":"327","locator":"141:66-141:83","type":"IntervalTypeSpecifier","pointType":{"localId":"326","locator":"141:75-141:82","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"355","locator":"147:1-150:3","name":"HasStart","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"355","s":[{"value":["/*Given an interval, return true if the interval has a starting boundary specified (i.e. the start of the interval is not null and not the minimum DateTime value)*/","define function ","\"HasStart\"","(","period"," "]},{"r":"344","s":[{"value":["Interval\u003c"]},{"r":"343","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"354","s":[{"r":"354","s":[{"value":["not "]},{"r":"353","s":[{"value":["( "]},{"r":"353","s":[{"r":"347","s":[{"r":"346","s":[{"value":["start of "]},{"r":"345","s":[{"value":["period"]}]}]},{"value":[" is null"]}]},{"value":["\n      or "]},{"r":"352","s":[{"r":"349","s":[{"value":["start of "]},{"r":"348","s":[{"value":["period"]}]}]},{"value":[" ","="," "]},{"r":"351","s":[{"value":["minimum"," "]},{"r":"350","s":[{"value":["DateTime"]}]}]}]}]},{"value":["\n  )"]}]}]}]}]}}],"expression":{"localId":"354","locator":"148:3-150:3","type":"Not","operand":{"localId":"353","locator":"148:7-150:3","type":"Or","operand":[{"localId":"347","locator":"148:9-148:31","type":"IsNull","operand":{"localId":"346","locator":"148:9-148:23","type":"Start","operand":{"localId":"345","locator":"148:18-148:23","name":"period","type":"OperandRef"}}},{"localId":"352","locator":"149:10-149:43","type":"Equal","operand":[{"localId":"349","locator":"149:10-149:24","type":"Start","operand":{"localId":"348","locator":"149:19-149:24","name":"period","type":"OperandRef"}},{"localId":"351","locator":"149:28-149:43","valueType":"{urn:hl7-org:elm-types:r1}DateTime","type":"MinValue"}]}]}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"344","locator":"147:35-147:52","type":"IntervalTypeSpecifier","pointType":{"localId":"343","locator":"147:44-147:51","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"368","locator":"153:1-158:3","name":"HasEnd","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"368","s":[{"value":["/*Given an interval, return true if the interval has an ending boundary specified (i.e. the end of the interval is not null and not the maximum DateTime value)*/","define function ","\"HasEnd\"","(","period"," "]},{"r":"357","s":[{"value":["Interval\u003c"]},{"r":"356","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"367","s":[{"r":"367","s":[{"value":["not "]},{"r":"366","s":[{"value":["( \n    "]},{"r":"366","s":[{"r":"360","s":[{"r":"359","s":[{"value":["end of "]},{"r":"358","s":[{"value":["period"]}]}]},{"value":[" is null"]}]},{"value":["\n      or \n      "]},{"r":"365","s":[{"r":"362","s":[{"value":["end of "]},{"r":"361","s":[{"value":["period"]}]}]},{"value":[" ","="," "]},{"r":"364","s":[{"value":["maximum"," "]},{"r":"363","s":[{"value":["DateTime"]}]}]}]}]},{"value":["\n  )"]}]}]}]}]}}],"expression":{"localId":"367","locator":"154:3-158:3","type":"Not","operand":{"localId":"366","locator":"154:7-158:3","type":"Or","operand":[{"localId":"360","locator":"155:5-155:25","type":"IsNull","operand":{"localId":"359","locator":"155:5-155:17","type":"End","operand":{"localId":"358","locator":"155:12-155:17","name":"period","type":"OperandRef"}}},{"localId":"365","locator":"157:7-157:38","type":"Equal","operand":[{"localId":"362","locator":"157:7-157:19","type":"End","operand":{"localId":"361","locator":"157:14-157:19","name":"period","type":"OperandRef"}},{"localId":"364","locator":"157:23-157:38","valueType":"{urn:hl7-org:elm-types:r1}DateTime","type":"MaxValue"}]}]}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"357","locator":"153:33-153:50","type":"IntervalTypeSpecifier","pointType":{"localId":"356","locator":"153:42-153:49","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"378","locator":"161:1-164:24","name":"Latest","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"378","s":[{"value":["/*Given an interval, return the ending point if the interval has an ending boundary specified, otherwise, return the starting point*/","define function ","\"Latest\"","(","period"," "]},{"r":"370","s":[{"value":["Interval\u003c"]},{"r":"369","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"377","s":[{"r":"377","s":[{"value":["if "]},{"r":"372","s":[{"value":["( "]},{"r":"372","s":[{"value":["HasEnd","("]},{"r":"371","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":[" then \n  "]},{"r":"374","s":[{"value":["end of "]},{"r":"373","s":[{"value":["period"]}]}]},{"value":[" \n    else "]},{"r":"376","s":[{"value":["start of "]},{"r":"375","s":[{"value":["period"]}]}]}]}]}]}}],"expression":{"localId":"377","locator":"162:3-164:24","type":"If","condition":{"localId":"372","locator":"162:6-162:22","name":"HasEnd","type":"FunctionRef","operand":[{"localId":"371","locator":"162:15-162:20","name":"period","type":"OperandRef"}]},"then":{"localId":"374","locator":"163:3-163:15","type":"End","operand":{"localId":"373","locator":"163:10-163:15","name":"period","type":"OperandRef"}},"else":{"localId":"376","locator":"164:10-164:24","type":"Start","operand":{"localId":"375","locator":"164:19-164:24","name":"period","type":"OperandRef"}}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"370","locator":"161:33-161:50","type":"IntervalTypeSpecifier","pointType":{"localId":"369","locator":"161:42-161:49","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"388","locator":"167:1-170:15","name":"Earliest","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"388","s":[{"value":["/*Given an interval, return the starting point if the interval has a starting boundary specified, otherwise, return the ending point*/","define function ","\"Earliest\"","(","period"," "]},{"r":"380","s":[{"value":["Interval\u003c"]},{"r":"379","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"387","s":[{"r":"387","s":[{"value":["if "]},{"r":"382","s":[{"value":["( "]},{"r":"382","s":[{"value":["HasStart","("]},{"r":"381","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":[" then "]},{"r":"384","s":[{"value":["start of "]},{"r":"383","s":[{"value":["period"]}]}]},{"value":[" \n    else \n  "]},{"r":"386","s":[{"value":["end of "]},{"r":"385","s":[{"value":["period"]}]}]}]}]}]}}],"expression":{"localId":"387","locator":"168:3-170:15","type":"If","condition":{"localId":"382","locator":"168:6-168:24","name":"HasStart","type":"FunctionRef","operand":[{"localId":"381","locator":"168:17-168:22","name":"period","type":"OperandRef"}]},"then":{"localId":"384","locator":"168:31-168:45","type":"Start","operand":{"localId":"383","locator":"168:40-168:45","name":"period","type":"OperandRef"}},"else":{"localId":"386","locator":"170:3-170:15","type":"End","operand":{"localId":"385","locator":"170:10-170:15","name":"period","type":"OperandRef"}}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"380","locator":"167:35-167:52","type":"IntervalTypeSpecifier","pointType":{"localId":"379","locator":"167:44-167:51","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"396","locator":"173:1-174:48","name":"LatestOf","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"396","s":[{"value":["/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the ending point of the period if the period has an ending boundary specified, otherwise returns the starting point of the interval*/","define function ","\"LatestOf\"","(","pointInTime"," "]},{"r":"389","s":[{"value":["DateTime"]}]},{"value":[", ","period"," "]},{"r":"391","s":[{"value":["Interval\u003c"]},{"r":"390","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"395","s":[{"r":"395","s":[{"value":["Latest","("]},{"r":"394","s":[{"value":["NormalizeInterval","("]},{"r":"392","s":[{"value":["pointInTime"]}]},{"value":[", "]},{"r":"393","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"395","locator":"174:3-174:48","name":"Latest","type":"FunctionRef","operand":[{"localId":"394","locator":"174:10-174:47","name":"NormalizeInterval","type":"FunctionRef","operand":[{"localId":"392","locator":"174:28-174:38","name":"pointInTime","type":"OperandRef"},{"localId":"393","locator":"174:41-174:46","name":"period","type":"OperandRef"}]}]},"operand":[{"name":"pointInTime","operandTypeSpecifier":{"localId":"389","locator":"173:40-173:47","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"name":"period","operandTypeSpecifier":{"localId":"391","locator":"173:57-173:74","type":"IntervalTypeSpecifier","pointType":{"localId":"390","locator":"173:66-173:73","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"404","locator":"177:1-178:50","name":"EarliestOf","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"404","s":[{"value":["/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the starting point of the period if the period has a starting boundary specified, otherwise returns the ending point of the period*/","define function ","\"EarliestOf\"","(","pointInTime"," "]},{"r":"397","s":[{"value":["DateTime"]}]},{"value":[", ","period"," "]},{"r":"399","s":[{"value":["Interval\u003c"]},{"r":"398","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"403","s":[{"r":"403","s":[{"value":["Earliest","("]},{"r":"402","s":[{"value":["NormalizeInterval","("]},{"r":"400","s":[{"value":["pointInTime"]}]},{"value":[", "]},{"r":"401","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"403","locator":"178:3-178:50","name":"Earliest","type":"FunctionRef","operand":[{"localId":"402","locator":"178:12-178:49","name":"NormalizeInterval","type":"FunctionRef","operand":[{"localId":"400","locator":"178:30-178:40","name":"pointInTime","type":"OperandRef"},{"localId":"401","locator":"178:43-178:48","name":"period","type":"OperandRef"}]}]},"operand":[{"name":"pointInTime","operandTypeSpecifier":{"localId":"397","locator":"177:42-177:49","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"name":"period","operandTypeSpecifier":{"localId":"399","locator":"177:59-177:76","type":"IntervalTypeSpecifier","pointType":{"localId":"398","locator":"177:68-177:75","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]}]}}},"elm_annotations":{"statements":[{"children":[{"children":[{"children":[{"text":"define \"ED Encounter\":\n  "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"10"}],"ref_id":"11"}],"define_name":"ED Encounter"},{"children":[{"children":[{"children":[{"text":"/*calculates the difference in calendar days between the start and end of the given interval.*/define function \"LengthInDays\"(Value "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"16"},{"children":[{"text":"\u003e"}]}],"ref_id":"17"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"difference in days between "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"Value"}]}],"node_type":"OperandRef","ref_id":"18"}],"node_type":"Start","ref_id":"19"},{"children":[{"text":" and "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"Value"}]}],"node_type":"OperandRef","ref_id":"20"}],"node_type":"End","ref_id":"21"}],"node_type":"DifferenceBetween","ref_id":"22"}],"node_type":"DifferenceBetween","ref_id":"22"}],"ref_id":"23"}],"define_name":"LengthInDays"},{"children":[{"children":[{"children":[{"text":"define \"Inpatient Encounter\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Encounter Inpatient\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"12"}],"node_type":"Retrieve","ref_id":"12"},{"children":[{"text":" EncounterInpatient"}]}],"ref_id":"13"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"LengthInDays\"("}]},{"children":[{"children":[{"children":[{"text":"EncounterInpatient"}]}],"ref_id":"14"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"15"}],"node_type":"Property","ref_id":"15"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"24"},{"children":[{"text":"\u003c= 120"}],"node_type":"Literal","ref_id":"25"}],"node_type":"LessOrEqual","ref_id":"26"},{"children":[{"text":"\n      and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"EncounterInpatient"}]}],"ref_id":"27"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"28"}],"node_type":"Property","ref_id":"28"},{"children":[{"text":" ends during day of "}],"node_type":"In","ref_id":"30"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"29"}],"node_type":"In","ref_id":"30"}],"ref_id":"31"}],"ref_id":"31"}],"node_type":"Query","ref_id":"32"}],"ref_id":"33"}],"define_name":"Inpatient Encounter"},{"children":[{"children":[]},{"children":[]},{"children":[]},{"children":[{"children":[{"text":"/*@description: Returns an interval of date values extracted from the input interval of date-time values\n@comment: This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability.*/define function \"ToDateInterval\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"34"},{"children":[{"text":"\u003e"}]}],"ref_id":"35"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"36"}],"node_type":"Start","ref_id":"37"}],"ref_id":"38"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"39"}],"node_type":"End","ref_id":"40"}],"ref_id":"41"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"42"}],"node_type":"Interval","ref_id":"42"}],"ref_id":"43"}],"define_name":"ToDateInterval"},{"children":[{"children":[{"children":[{"text":"/*returns list of all locations within an encounter, including locations for immediately prior ED visit.*/define function \"HospitalizationLocations\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"47"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"48"},{"children":[{"text":" Visit"}]}],"ref_id":"49"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"50"}],"node_type":"Retrieve","ref_id":"50"},{"children":[{"text":" LastED"}]}],"ref_id":"51"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"52"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"53"}],"node_type":"Property","ref_id":"53"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"57"},{"children":[{"text":" or less on or before"}]}],"ref_id":"58"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"54"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"55"}],"node_type":"Property","ref_id":"55"}],"node_type":"Start","ref_id":"56"}],"ref_id":"58"}],"ref_id":"58"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"59"}],"node_type":"End","ref_id":"60"}],"ref_id":"61"}],"ref_id":"62"}],"ref_id":"63"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"64"}],"ref_id":"65"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"node_type":"QueryLetRef","ref_id":"66"},{"children":[{"text":" is null"}]}],"ref_id":"67"},{"children":[{"text":" then "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"68"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"ref_id":"69"}],"ref_id":"69"},{"children":[{"text":" \n      else "}]},{"children":[{"children":[{"text":"flatten "}]},{"children":[{"children":[{"text":"{ "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"70"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"ref_id":"71"}],"ref_id":"71"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"72"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"ref_id":"73"}],"ref_id":"73"},{"children":[{"text":" }"}]}],"node_type":"List","ref_id":"74"}],"ref_id":"75"}],"node_type":"If","ref_id":"76"}],"ref_id":"77"}],"node_type":"Query","ref_id":"78"}],"node_type":"Query","ref_id":"78"}],"ref_id":"79"}],"define_name":"HospitalizationLocations"},{"children":[{"children":[{"children":[{"text":"/*Returns the arrival time in the ED for the encounter.*/define function \"EmergencyDepartmentArrivalTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"80"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"\"HospitalizationLocations\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"81"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"82"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"82"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"83"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"HospitalLocation"}]}],"ref_id":"84"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"85"}],"ref_id":"85"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}],"ref_id":"86"}],"ref_id":"87"}],"ref_id":"87"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"88"}],"node_type":"Start","ref_id":"89"}],"ref_id":"90"}],"ref_id":"91"}],"ref_id":"92"},{"children":[{"text":"\n  )"}]}],"ref_id":"93"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"94"}],"node_type":"Property","ref_id":"94"}],"node_type":"Start","ref_id":"95"}],"node_type":"Start","ref_id":"95"}],"ref_id":"96"}],"define_name":"EmergencyDepartmentArrivalTime"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization returns the total interval for admission to discharge for the given encounter, or for the admission of any immediately prior emergency department visit to the discharge of the given encounter.*/define function \"Hospitalization\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"99"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"100"},{"children":[{"text":" Visit"}]}],"ref_id":"101"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"102"}],"node_type":"Retrieve","ref_id":"102"},{"children":[{"text":" LastED"}]}],"ref_id":"103"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"104"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"105"}],"node_type":"Property","ref_id":"105"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"109"},{"children":[{"text":" or less on or before"}]}],"ref_id":"110"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"106"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"107"}],"node_type":"Property","ref_id":"107"}],"node_type":"Start","ref_id":"108"}],"ref_id":"110"}],"ref_id":"110"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"111"}],"node_type":"End","ref_id":"112"}],"ref_id":"113"}],"ref_id":"114"}],"ref_id":"115"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"116"}],"ref_id":"117"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"118"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"119"}],"node_type":"Property","ref_id":"119"}],"node_type":"Start","ref_id":"120"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"121"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"122"}],"node_type":"Property","ref_id":"122"}],"node_type":"Start","ref_id":"123"},{"children":[{"text":")"}]}],"ref_id":"124"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"125"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"126"}],"node_type":"Property","ref_id":"126"}],"ref_id":"127"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"128"}],"ref_id":"129"}],"node_type":"Query","ref_id":"130"}],"node_type":"Query","ref_id":"130"}],"ref_id":"131"}],"define_name":"Hospitalization"},{"children":[{"children":[{"children":[{"text":"/*Returns admission time for an encounter or for immediately prior emergency department visit.*/define function \"HospitalAdmissionTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"97"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"\"Hospitalization\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"98"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"132"}],"node_type":"Start","ref_id":"133"}],"node_type":"Start","ref_id":"133"}],"ref_id":"134"}],"define_name":"HospitalAdmissionTime"},{"children":[{"children":[{"children":[{"text":"/*Returns earliest arrival time for an encounter including any prior ED visit.*/define function \"HospitalArrivalTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"135"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"\"HospitalizationLocations\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"136"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"137"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"137"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"138"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"139"}],"node_type":"Start","ref_id":"140"}],"ref_id":"141"}],"ref_id":"142"}],"ref_id":"143"},{"children":[{"text":"\n  )"}]}],"ref_id":"144"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"145"}],"node_type":"Property","ref_id":"145"}],"node_type":"Start","ref_id":"146"}],"node_type":"Start","ref_id":"146"}],"ref_id":"147"}],"define_name":"HospitalArrivalTime"},{"children":[{"children":[{"children":[{"text":"/*Returns the length of stay in days (i.e. the number of days between admission and discharge) for the given encounter, or from the admission of any immediately prior emergency department visit to the discharge of the encounter*/define function \"HospitalizationLengthofStay\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"150"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"LengthInDays("}]},{"children":[{"children":[{"text":"\"Hospitalization\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"151"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"152"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"153"}],"node_type":"FunctionRef","ref_id":"153"}],"ref_id":"154"}],"define_name":"HospitalizationLengthofStay"},{"children":[{"children":[{"children":[{"text":"/*Returns the latest departure time for encounter including any prior ED visit.*/define function \"HospitalDepartureTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"155"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"\"HospitalizationLocations\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"156"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"157"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"157"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"158"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"159"}],"node_type":"Start","ref_id":"160"}],"ref_id":"161"}],"ref_id":"162"}],"ref_id":"163"},{"children":[{"text":"\n  )"}]}],"ref_id":"164"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"165"}],"node_type":"Property","ref_id":"165"}],"node_type":"End","ref_id":"166"}],"node_type":"End","ref_id":"166"}],"ref_id":"167"}],"define_name":"HospitalDepartureTime"},{"children":[{"children":[{"children":[{"text":"/*Hospital Discharge Time returns the discharge time for an encounter*/define function \"HospitalDischargeTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"168"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"169"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"170"}],"node_type":"Property","ref_id":"170"}],"node_type":"End","ref_id":"171"}],"node_type":"End","ref_id":"171"}],"ref_id":"172"}],"define_name":"HospitalDischargeTime"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization with Observation and Outpatient Surgery Service returns the total interval from the start of any immediately prior emergency department visit, outpatient surgery visit or observation visit to the discharge of the given encounter.*/define function \"HospitalizationWithObservationAndOutpatientSurgeryService\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"173"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"174"},{"children":[{"text":" Visit"}]}],"ref_id":"175"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"ObsVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Observation Services\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"176"}],"node_type":"Retrieve","ref_id":"176"},{"children":[{"text":" LastObs"}]}],"ref_id":"177"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastObs"}]}],"ref_id":"178"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"179"}],"node_type":"Property","ref_id":"179"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"183"},{"children":[{"text":" or less on or before"}]}],"ref_id":"184"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"180"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"181"}],"node_type":"Property","ref_id":"181"}],"node_type":"Start","ref_id":"182"}],"ref_id":"184"}],"ref_id":"184"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"185"}],"node_type":"End","ref_id":"186"}],"ref_id":"187"}],"ref_id":"188"}],"ref_id":"189"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"190"}],"ref_id":"191"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"VisitStart: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"ObsVisit"}]}],"ref_id":"192"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"193"}],"node_type":"Property","ref_id":"193"}],"node_type":"Start","ref_id":"194"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"195"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"196"}],"node_type":"Property","ref_id":"196"}],"node_type":"Start","ref_id":"197"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"198"}],"ref_id":"199"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"200"}],"node_type":"Retrieve","ref_id":"200"},{"children":[{"text":" LastED"}]}],"ref_id":"201"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"202"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"203"}],"node_type":"Property","ref_id":"203"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"205"},{"children":[{"text":" or less on or before"}]}],"ref_id":"206"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"204"}],"ref_id":"206"}],"ref_id":"206"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"207"}],"node_type":"End","ref_id":"208"}],"ref_id":"209"}],"ref_id":"210"}],"ref_id":"211"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"212"}],"ref_id":"213"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"VisitStartWithED: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"214"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"215"}],"node_type":"Property","ref_id":"215"}],"node_type":"Start","ref_id":"216"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"217"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"218"}],"ref_id":"219"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"OutpatientSurgeryVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Outpatient Surgery Service\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"220"}],"node_type":"Retrieve","ref_id":"220"},{"children":[{"text":" LastSurgeryOP"}]}],"ref_id":"221"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastSurgeryOP"}]}],"ref_id":"222"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"223"}],"node_type":"Property","ref_id":"223"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"225"},{"children":[{"text":" or less on or before"}]}],"ref_id":"226"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"VisitStartWithED"}]}],"node_type":"QueryLetRef","ref_id":"224"}],"ref_id":"226"}],"ref_id":"226"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"227"}],"node_type":"End","ref_id":"228"}],"ref_id":"229"}],"ref_id":"230"}],"ref_id":"231"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"232"}],"ref_id":"233"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"OutpatientSurgeryVisit"}]}],"ref_id":"234"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"235"}],"node_type":"Property","ref_id":"235"}],"node_type":"Start","ref_id":"236"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"VisitStartWithED"}]}],"node_type":"QueryLetRef","ref_id":"237"},{"children":[{"text":")"}]}],"ref_id":"238"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"239"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"240"}],"node_type":"Property","ref_id":"240"}],"ref_id":"241"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"242"}],"ref_id":"243"}],"node_type":"Query","ref_id":"244"}],"node_type":"Query","ref_id":"244"}],"ref_id":"245"}],"define_name":"HospitalizationWithObservationAndOutpatientSurgeryService"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization with Observation returns the total interval from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/define function \"HospitalizationWithObservation\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"246"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"247"},{"children":[{"text":" Visit"}]}],"ref_id":"248"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"ObsVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Observation Services\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"249"}],"node_type":"Retrieve","ref_id":"249"},{"children":[{"text":" LastObs"}]}],"ref_id":"250"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastObs"}]}],"ref_id":"251"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"252"}],"node_type":"Property","ref_id":"252"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"256"},{"children":[{"text":" or less on or before"}]}],"ref_id":"257"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"253"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"254"}],"node_type":"Property","ref_id":"254"}],"node_type":"Start","ref_id":"255"}],"ref_id":"257"}],"ref_id":"257"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"258"}],"node_type":"End","ref_id":"259"}],"ref_id":"260"}],"ref_id":"261"}],"ref_id":"262"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"263"}],"ref_id":"264"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"VisitStart: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"ObsVisit"}]}],"ref_id":"265"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"266"}],"node_type":"Property","ref_id":"266"}],"node_type":"Start","ref_id":"267"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"268"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"269"}],"node_type":"Property","ref_id":"269"}],"node_type":"Start","ref_id":"270"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"271"}],"ref_id":"272"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"273"}],"node_type":"Retrieve","ref_id":"273"},{"children":[{"text":" LastED"}]}],"ref_id":"274"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"275"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"276"}],"node_type":"Property","ref_id":"276"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"278"},{"children":[{"text":" or less on or before"}]}],"ref_id":"279"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"277"}],"ref_id":"279"}],"ref_id":"279"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"280"}],"node_type":"End","ref_id":"281"}],"ref_id":"282"}],"ref_id":"283"}],"ref_id":"284"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"285"}],"ref_id":"286"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"287"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"288"}],"node_type":"Property","ref_id":"288"}],"node_type":"Start","ref_id":"289"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"290"},{"children":[{"text":")"}]}],"ref_id":"291"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"292"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"293"}],"node_type":"Property","ref_id":"293"}],"ref_id":"294"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"295"}],"ref_id":"296"}],"node_type":"Query","ref_id":"297"}],"node_type":"Query","ref_id":"297"}],"ref_id":"298"}],"define_name":"HospitalizationWithObservation"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization with Observation Length of Stay returns the length in days from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/define function \"HospitalizationWithObservationLengthofStay\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"299"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"\"LengthInDays\"("}]},{"children":[{"children":[{"text":"\"HospitalizationWithObservation\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"300"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"301"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"302"}],"node_type":"FunctionRef","ref_id":"302"}],"ref_id":"303"}],"define_name":"HospitalizationWithObservationLengthofStay"},{"children":[{"children":[{"children":[{"text":"/*First Inpatient Intensive Care Unit returns the first intensive care unit for the given encounter, without considering any immediately prior emergency department visit.*/define function \"FirstInpatientIntensiveCareUnit\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"304"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"305"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"node_type":"Property","ref_id":"306"}],"node_type":"Property","ref_id":"306"},{"children":[{"text":")"}]}],"node_type":"Property","ref_id":"306"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"307"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"HospitalLocation"}]}],"ref_id":"308"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"309"}],"ref_id":"309"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Intensive Care Unit\""}]}],"ref_id":"310"}],"node_type":"InValueSet","ref_id":"311"},{"children":[{"text":"\n        and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"HospitalLocation"}]}],"ref_id":"312"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"313"}],"node_type":"Property","ref_id":"313"},{"children":[{"text":" during "}],"node_type":"IncludedIn","ref_id":"316"},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"314"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"315"}],"node_type":"Property","ref_id":"315"}],"node_type":"IncludedIn","ref_id":"316"}],"ref_id":"317"}],"ref_id":"317"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"318"}],"node_type":"Start","ref_id":"319"}],"ref_id":"320"}],"ref_id":"321"}],"ref_id":"322"},{"children":[{"text":"\n  )"}]}],"node_type":"First","ref_id":"323"}],"node_type":"First","ref_id":"323"}],"ref_id":"324"}],"define_name":"FirstInpatientIntensiveCareUnit"},{"children":[{"children":[{"children":[{"text":"/*Given a datetime and a period, returns the period (if a period is provided) or the interval beginning and ending on the datetime (if a datetime is provided)*/define function \"NormalizeInterval\"(pointInTime "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"325"},{"children":[{"text":", period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"326"},{"children":[{"text":"\u003e"}]}],"ref_id":"327"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"pointInTime"}]}],"node_type":"OperandRef","ref_id":"328"},{"children":[{"text":" is not null"}]}],"ref_id":"329"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"pointInTime"}]}],"ref_id":"330"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"pointInTime"}]}],"ref_id":"331"},{"children":[{"text":"]"}]}],"ref_id":"332"},{"children":[{"text":"\n    else "}]},{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"333"},{"children":[{"text":" is not null"}]}],"ref_id":"334"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"period"}]}],"ref_id":"335"},{"children":[{"text":" \n    else "}]},{"children":[{"children":[{"text":"null as "}],"node_type":"Null","ref_id":"336"},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"337"},{"children":[{"text":"\u003e"}]}],"ref_id":"338"}],"ref_id":"339"}],"ref_id":"340"}],"node_type":"If","ref_id":"341"}],"node_type":"If","ref_id":"341"}],"ref_id":"342"}],"define_name":"NormalizeInterval"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return true if the interval has a starting boundary specified (i.e. the start of the interval is not null and not the minimum DateTime value)*/define function \"HasStart\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"343"},{"children":[{"text":"\u003e"}]}],"ref_id":"344"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"not "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"345"}],"node_type":"Start","ref_id":"346"},{"children":[{"text":" is null"}]}],"node_type":"IsNull","ref_id":"347"},{"children":[{"text":"\n      or "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"348"}],"node_type":"Start","ref_id":"349"},{"children":[{"text":" = "}]},{"children":[{"children":[{"text":"minimum "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"350"}],"node_type":"MinValue","ref_id":"351"}],"node_type":"Equal","ref_id":"352"}],"node_type":"Or","ref_id":"353"},{"children":[{"text":"\n  )"}]}],"node_type":"Or","ref_id":"353"}],"node_type":"Not","ref_id":"354"}],"node_type":"Not","ref_id":"354"}],"ref_id":"355"}],"define_name":"HasStart"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return true if the interval has an ending boundary specified (i.e. the end of the interval is not null and not the maximum DateTime value)*/define function \"HasEnd\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"356"},{"children":[{"text":"\u003e"}]}],"ref_id":"357"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"not "}]},{"children":[{"children":[{"text":"( \n    "}]},{"children":[{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"358"}],"node_type":"End","ref_id":"359"},{"children":[{"text":" is null"}]}],"node_type":"IsNull","ref_id":"360"},{"children":[{"text":"\n      or \n      "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"361"}],"node_type":"End","ref_id":"362"},{"children":[{"text":" = "}]},{"children":[{"children":[{"text":"maximum "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"363"}],"node_type":"MaxValue","ref_id":"364"}],"node_type":"Equal","ref_id":"365"}],"node_type":"Or","ref_id":"366"},{"children":[{"text":"\n  )"}]}],"node_type":"Or","ref_id":"366"}],"node_type":"Not","ref_id":"367"}],"node_type":"Not","ref_id":"367"}],"ref_id":"368"}],"define_name":"HasEnd"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return the ending point if the interval has an ending boundary specified, otherwise, return the starting point*/define function \"Latest\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"369"},{"children":[{"text":"\u003e"}]}],"ref_id":"370"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"HasEnd("}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"371"},{"children":[{"text":")"}]}],"ref_id":"372"},{"children":[{"text":")"}]}],"ref_id":"372"},{"children":[{"text":" then \n  "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"373"}],"ref_id":"374"},{"children":[{"text":" \n    else "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"375"}],"ref_id":"376"}],"node_type":"If","ref_id":"377"}],"node_type":"If","ref_id":"377"}],"ref_id":"378"}],"define_name":"Latest"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return the starting point if the interval has a starting boundary specified, otherwise, return the ending point*/define function \"Earliest\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"379"},{"children":[{"text":"\u003e"}]}],"ref_id":"380"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"HasStart("}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"381"},{"children":[{"text":")"}]}],"ref_id":"382"},{"children":[{"text":")"}]}],"ref_id":"382"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"383"}],"ref_id":"384"},{"children":[{"text":" \n    else \n  "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"385"}],"ref_id":"386"}],"node_type":"If","ref_id":"387"}],"node_type":"If","ref_id":"387"}],"ref_id":"388"}],"define_name":"Earliest"},{"children":[{"children":[{"children":[{"text":"/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the ending point of the period if the period has an ending boundary specified, otherwise returns the starting point of the interval*/define function \"LatestOf\"(pointInTime "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"389"},{"children":[{"text":", period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"390"},{"children":[{"text":"\u003e"}]}],"ref_id":"391"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Latest("}]},{"children":[{"children":[{"text":"NormalizeInterval("}]},{"children":[{"children":[{"text":"pointInTime"}]}],"node_type":"OperandRef","ref_id":"392"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"393"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"394"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"395"}],"node_type":"FunctionRef","ref_id":"395"}],"ref_id":"396"}],"define_name":"LatestOf"},{"children":[{"children":[{"children":[{"text":"/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the starting point of the period if the period has a starting boundary specified, otherwise returns the ending point of the period*/define function \"EarliestOf\"(pointInTime "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"397"},{"children":[{"text":", period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"398"},{"children":[{"text":"\u003e"}]}],"ref_id":"399"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Earliest("}]},{"children":[{"children":[{"text":"NormalizeInterval("}]},{"children":[{"children":[{"text":"pointInTime"}]}],"node_type":"OperandRef","ref_id":"400"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"401"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"402"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"403"}],"node_type":"FunctionRef","ref_id":"403"}],"ref_id":"404"}],"define_name":"EarliestOf"}],"identifier":{"id":"MATGlobalCommonFunctions","version":"7.0.000"}},"is_main_library":false,"is_top_level":true,"library_name":"MATGlobalCommonFunctions","library_version":"7.0.000","statement_dependencies":[{"_id":"6892448f0734dfcaf541367b","statement_name":"ToDateInterval"},{"_id":"6892448f0734dfcaf541367c","statement_name":"NormalizeInterval"}]}],"created_at":null,"description":"Percentage of children 6-12 years of age and newly prescribed a medication for attention-deficit/hyperactivity disorder (ADHD) who had appropriate follow-up care. Two rates are reported.  \na. Percentage of children who had one follow-up visit with a practitioner with prescribing authority during the 30-Day Initiation Phase.\nb. Percentage of children who remained on ADHD medication for at least 210 treatment days and who, in addition to the visit in the Initiation Phase, had at least two additional follow-up visits with a practitioner within 270 days (9 months) after the Initiation Phase ended.","hqmf_id":"2C928084-8211-3ECE-0182-1DE98C500310","hqmf_set_id":"703CC49B-B653-4885-80E8-245A057F5AE9","hqmf_version_number":"13.0.000","main_cql_library":"FollowUpCareforChildrenPrescribedADHDMedicationADD","measure_attributes":[{"code":"OTH","value":"136","name":"eCQM Identifier (Measure Authoring Tool)","code_obj":{"type":"CD","null_flavor":"OTH","original_text":"eCQM Identifier (Measure Authoring Tool)"},"value_obj":{"type":"ED","value":"136","media_type":"text/plain"}},{"code":"OTH","value":"Not Applicable","name":"NQF Number","code_obj":{"type":"CD","null_flavor":"OTH","original_text":"NQF Number"},"value_obj":{"type":"ED","value":"Not Applicable","media_type":"text/plain"}},{"code":"COPY","value":"This Physician Performance Measure (Measure) and related data specifications are owned and were developed by the National Committee for Quality Assurance (NCQA). NCQA is not responsible for any use of the Measure. NCQA makes no representations, warranties, or endorsement about the quality of any organization or physician that uses or reports performance measures and NCQA has no liability to anyone who relies on such measures or specifications. NCQA holds a copyright in the Measure. The Measure can be reproduced and distributed, without modification, for noncommercial purposes (e.g., use by healthcare providers in connection with their practices) without obtaining approval from NCQA. Commercial use is defined as the sale, licensing, or distribution of the Measure for commercial gain, or incorporation of the Measure into a product or service that is sold, licensed or distributed for commercial gain. All commercial uses or requests for modification must be approved by NCQA and are subject to a license at the discretion of NCQA. (C) 2012-2022 National Committee for Quality Assurance. All Rights Reserved.\n\nLimited proprietary coding is contained in the Measure specifications for user convenience. Users of proprietary code sets should obtain all necessary licenses from the owners of the code sets. NCQA disclaims all liability for use or accuracy of any third-party codes contained in the specifications.\n\nCPT(R) codes, descriptions and other data are copyright 2022. American Medical Association. All rights reserved. CPT is a trademark of the American Medical Association. No fee schedules, basic units, relative values or related listings are included in CPT. The AMA assumes no liability for the data contained herein. Applicable FARS/DFARS restrictions apply to government use.\n\nLOINC(R) copyright 2004-2022 Regenstrief Institute, Inc. \n\nThis material contains SNOMED Clinical Terms(R) (SNOMED CT[R]) copyright 2004-2022 International Health Terminology Standards Development Organisation. \n\nICD-10 copyright 2022 World Health Organization. All Rights Reserved.","name":"Copyright","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"COPY","title":"Copyright"},"value_obj":{"type":"ED","value":"This Physician Performance Measure (Measure) and related data specifications are owned and were developed by the National Committee for Quality Assurance (NCQA). NCQA is not responsible for any use of the Measure. NCQA makes no representations, warranties, or endorsement about the quality of any organization or physician that uses or reports performance measures and NCQA has no liability to anyone who relies on such measures or specifications. NCQA holds a copyright in the Measure. The Measure can be reproduced and distributed, without modification, for noncommercial purposes (e.g., use by healthcare providers in connection with their practices) without obtaining approval from NCQA. Commercial use is defined as the sale, licensing, or distribution of the Measure for commercial gain, or incorporation of the Measure into a product or service that is sold, licensed or distributed for commercial gain. All commercial uses or requests for modification must be approved by NCQA and are subject to a license at the discretion of NCQA. (C) 2012-2022 National Committee for Quality Assurance. All Rights Reserved.\n\nLimited proprietary coding is contained in the Measure specifications for user convenience. Users of proprietary code sets should obtain all necessary licenses from the owners of the code sets. NCQA disclaims all liability for use or accuracy of any third-party codes contained in the specifications.\n\nCPT(R) codes, descriptions and other data are copyright 2022. American Medical Association. All rights reserved. CPT is a trademark of the American Medical Association. No fee schedules, basic units, relative values or related listings are included in CPT. The AMA assumes no liability for the data contained herein. Applicable FARS/DFARS restrictions apply to government use.\n\nLOINC(R) copyright 2004-2022 Regenstrief Institute, Inc. \n\nThis material contains SNOMED Clinical Terms(R) (SNOMED CT[R]) copyright 2004-2022 International Health Terminology Standards Development Organisation. \n\nICD-10 copyright 2022 World Health Organization. All Rights Reserved.","media_type":"text/plain"}},{"code":"DISC","value":"The performance Measure is not a clinical guideline and does not establish a standard of medical care, and has not been tested for all potential applications. THE MEASURE AND SPECIFICATIONS ARE PROVIDED \"AS IS\" WITHOUT WARRANTY OF ANY KIND.\n \nDue to technical limitations, registered trademarks are indicated by (R) or [R] and unregistered trademarks are indicated by (TM) or [TM].","name":"Disclaimer","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DISC","title":"Disclaimer"},"value_obj":{"type":"ED","value":"The performance Measure is not a clinical guideline and does not establish a standard of medical care, and has not been tested for all potential applications. THE MEASURE AND SPECIFICATIONS ARE PROVIDED \"AS IS\" WITHOUT WARRANTY OF ANY KIND.\n \nDue to technical limitations, registered trademarks are indicated by (R) or [R] and unregistered trademarks are indicated by (TM) or [TM].","media_type":"text/plain"}},{"code":"MSRSCORE","name":"Measure Scoring","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRSCORE","title":"Measure Scoring"},"value_obj":{"type":"CD","system":"2.16.840.1.113883.5.1063","code":"PROPOR","title":"Proportion"}},{"code":"MSRTYPE","name":"Measure Type","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRTYPE","title":"Measure Type"},"value_obj":{"type":"CD","system":"2.16.840.1.113883.5.1063","code":"PROCESS","title":"PROCESS"}},{"code":"STRAT","value":"None","name":"Stratification","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"STRAT","title":"Stratification"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"MSRADJ","value":"None","name":"Risk Adjustment","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRADJ","title":"Risk Adjustment"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"MSRAGG","value":"None","name":"Rate Aggregation","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRAGG","title":"Rate Aggregation"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"RAT","value":"ADHD is one of the more common chronic conditions of childhood. Children with ADHD may experience significant functional problems, such as school difficulties; academic underachievement; troublesome relationships with family members and peers; and behavioral problems (AAP, 2000). Given the high prevalence of ADHD among school-aged children (4%–12%), primary care clinicians will regularly encounter children with ADHD and should have a strategy for diagnosing and long-term management of this condition (AAP, 2001). \n\nPractitioners can convey the efficacy of pharmacotherapy to their patients. American Academy of Pediatrics (AAP) guidelines recommend that once a child is stable, an office visit every three to six months allows assessment of learning and behavior (AAP, 2001). Follow-up appointments should be made at least monthly until the child’s symptoms have been stabilized (AACAP, 2007).\n\nProviders have an opportunity to track medication use in patients and provide the appropriate follow-up care to monitor clinical symptoms and potential adverse events.","name":"Rationale","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"RAT","title":"Rationale"},"value_obj":{"type":"ED","value":"ADHD is one of the more common chronic conditions of childhood. Children with ADHD may experience significant functional problems, such as school difficulties; academic underachievement; troublesome relationships with family members and peers; and behavioral problems (AAP, 2000). Given the high prevalence of ADHD among school-aged children (4%–12%), primary care clinicians will regularly encounter children with ADHD and should have a strategy for diagnosing and long-term management of this condition (AAP, 2001). \n\nPractitioners can convey the efficacy of pharmacotherapy to their patients. American Academy of Pediatrics (AAP) guidelines recommend that once a child is stable, an office visit every three to six months allows assessment of learning and behavior (AAP, 2001). Follow-up appointments should be made at least monthly until the child’s symptoms have been stabilized (AACAP, 2007).\n\nProviders have an opportunity to track medication use in patients and provide the appropriate follow-up care to monitor clinical symptoms and potential adverse events.","media_type":"text/plain"}},{"code":"CRS","value":"American Academy of Pediatrics Clinical Practice Guideline for the Diagnosis, Evaluation and Treatment of ADHD in Children and Adolescents (2019)\n- Key Action Statement (KAS) 1: The pediatrician or other primary care clinicians (PCC) should initiate an evaluation for ADHD for any child or adolescent age 4 years to the 18th birthday who presents with academic or behavioral problems and symptoms of inattention, hyperactivity, or impulsivity. Grade B: Strong Recommendation\n- KAS 4: ADHD is a chronic condition; therefore, the PCC should manage children and adolescents with ADHD in the same manner that they would children and youth with special health care needs, following the principles of the chronic care model and the medical home. Grade B: Strong Recommendation\n- KAS 5b: For elementary and middle school-aged children (age 6 years to the 12th birthday) with ADHD, the PCC should prescribe FDA-approved medications for ADHD, along with parent training in behavior management (PTBM) and/or behavioral classroom intervention (preferably both PTBM and behavioral classroom interventions). Educational interventions and individualized instructional supports, including school environment, class placement, instructional placement, and behavioral supports, are a necessary part of any treatment plan and often include an IEP or a rehabilitation plan (504 plan). Grade A: Strong Recommendation\n- KAS 6. “The PCC should titrate doses of medication for ADHD to achieve maximum benefit with tolerable side effects”. Grade B, strong recommendation\n\nAmerican Academy of Child and Adolescent Psychiatry (AACAP) Practice Parameter for the Assessment and Treatment of Children and Adolescents with ADHD (2007)\n- Overall Guideline: The key to effective long-term management of the patient with ADHD is continuity of care with a clinician experienced in the treatment of ADHD. The frequency and duration of follow-up sessions should be individualized for each family and patient, depending on the severity of ADHD symptoms; the degree of comorbidity of other psychiatric illness; the response to treatment; and the degree of impairment in home, school, work, or peer-related activities. The clinician should establish an effective mechanism for receiving feedback from the family and other important informants in the patient's environment to be sure symptoms are well controlled and side effects are minimal. Although this parameter does not seek to set a formula for the method of follow-up, significant contact with the clinician should typically occur two to four times per year in cases of uncomplicated ADHD and up to weekly sessions at times of severe dysfunction or complications of treatment.\n- Recommendation 6: A Well-Thought-Out and Comprehensive Treatment Plan Should Be Developed for the Patient With ADHD. The treatment plan should be reviewed regularly and modified if the patient's symptoms do not respond. Minimal Standard [MS]\n- Recommendation 9. During a Psychopharmacological Intervention for ADHD, the Patient Should Be Monitored for Treatment-Emergent Side Effects. Minimal Standard [MS]\n- Recommendation 12. Patients Should Be Assessed Periodically to Determine Whether There Is Continued Need for Treatment or If Symptoms Have Remitted. Treatment of ADHD Should Continue as Long as Symptoms Remain Present and Cause Impairment. Minimal Standard [MS]","name":"Clinical Recommendation Statement","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"CRS","title":"Clinical Recommendation Statement"},"value_obj":{"type":"ED","value":"American Academy of Pediatrics Clinical Practice Guideline for the Diagnosis, Evaluation and Treatment of ADHD in Children and Adolescents (2019)\n- Key Action Statement (KAS) 1: The pediatrician or other primary care clinicians (PCC) should initiate an evaluation for ADHD for any child or adolescent age 4 years to the 18th birthday who presents with academic or behavioral problems and symptoms of inattention, hyperactivity, or impulsivity. Grade B: Strong Recommendation\n- KAS 4: ADHD is a chronic condition; therefore, the PCC should manage children and adolescents with ADHD in the same manner that they would children and youth with special health care needs, following the principles of the chronic care model and the medical home. Grade B: Strong Recommendation\n- KAS 5b: For elementary and middle school-aged children (age 6 years to the 12th birthday) with ADHD, the PCC should prescribe FDA-approved medications for ADHD, along with parent training in behavior management (PTBM) and/or behavioral classroom intervention (preferably both PTBM and behavioral classroom interventions). Educational interventions and individualized instructional supports, including school environment, class placement, instructional placement, and behavioral supports, are a necessary part of any treatment plan and often include an IEP or a rehabilitation plan (504 plan). Grade A: Strong Recommendation\n- KAS 6. “The PCC should titrate doses of medication for ADHD to achieve maximum benefit with tolerable side effects”. Grade B, strong recommendation\n\nAmerican Academy of Child and Adolescent Psychiatry (AACAP) Practice Parameter for the Assessment and Treatment of Children and Adolescents with ADHD (2007)\n- Overall Guideline: The key to effective long-term management of the patient with ADHD is continuity of care with a clinician experienced in the treatment of ADHD. The frequency and duration of follow-up sessions should be individualized for each family and patient, depending on the severity of ADHD symptoms; the degree of comorbidity of other psychiatric illness; the response to treatment; and the degree of impairment in home, school, work, or peer-related activities. The clinician should establish an effective mechanism for receiving feedback from the family and other important informants in the patient's environment to be sure symptoms are well controlled and side effects are minimal. Although this parameter does not seek to set a formula for the method of follow-up, significant contact with the clinician should typically occur two to four times per year in cases of uncomplicated ADHD and up to weekly sessions at times of severe dysfunction or complications of treatment.\n- Recommendation 6: A Well-Thought-Out and Comprehensive Treatment Plan Should Be Developed for the Patient With ADHD. The treatment plan should be reviewed regularly and modified if the patient's symptoms do not respond. Minimal Standard [MS]\n- Recommendation 9. During a Psychopharmacological Intervention for ADHD, the Patient Should Be Monitored for Treatment-Emergent Side Effects. Minimal Standard [MS]\n- Recommendation 12. Patients Should Be Assessed Periodically to Determine Whether There Is Continued Need for Treatment or If Symptoms Have Remitted. Treatment of ADHD Should Continue as Long as Symptoms Remain Present and Cause Impairment. Minimal Standard [MS]","media_type":"text/plain"}},{"code":"IDUR","value":"Higher score indicates better quality","name":"Improvement Notation","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"IDUR","title":"Improvement Notation"},"value_obj":{"type":"ED","value":"Higher score indicates better quality","media_type":"text/plain"}},{"code":"REF","value":"CITATIONAmerican Academy of Pediatrics. (2019). Clinical Practice Guideline for the Diagnosis, Evaluation, and Treatment of Attention-Deficit/Hyperactivity Disorder in Children and Adolescents. Pediatrics, 144(4), 1-25.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONAmerican Academy of Pediatrics. (2019). Clinical Practice Guideline for the Diagnosis, Evaluation, and Treatment of Attention-Deficit/Hyperactivity Disorder in Children and Adolescents. Pediatrics, 144(4), 1-25.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONAmerican Academy of Pediatrics. (2001). Clinical practice guideline: treatment of the school-aged child with attention-deficit/hyperactivity disorder. Pediatrics, 108(4), 1033–44.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONAmerican Academy of Pediatrics. (2001). Clinical practice guideline: treatment of the school-aged child with attention-deficit/hyperactivity disorder. Pediatrics, 108(4), 1033–44.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONAmerican Academy of Pediatrics. (2000). Clinical practice guideline: diagnosis and evaluation of the child with attention-deficit/hyperactivity disorder. Pediatrics, 105(5), 1158-1170.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONAmerican Academy of Pediatrics. (2000). Clinical practice guideline: diagnosis and evaluation of the child with attention-deficit/hyperactivity disorder. Pediatrics, 105(5), 1158-1170.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONPliszka, S., \u0026 AACAP Work Group on Quality Issues. (2007). Practice parameter for the assessment and treatment of children and adolescents with attention-deficit/hyperactivity disorder. Journal of the American Academy of Child and Adolescent Psychiatry (AACAP), 46(7), 894-921.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONPliszka, S., \u0026 AACAP Work Group on Quality Issues. (2007). Practice parameter for the assessment and treatment of children and adolescents with attention-deficit/hyperactivity disorder. Journal of the American Academy of Child and Adolescent Psychiatry (AACAP), 46(7), 894-921.","media_type":"text/plain"}},{"code":"DEF","value":"Intake Period: The twelve-month period starting March 1 of the year prior to the measurement period and ending the last calendar day of February of the measurement period.\n\nIndex Prescription Start Date (IPSD): The earliest prescription date for an ADHD medication where the date is in the Intake Period and the patient is not actively on ADHD medication during the 120 days prior. \n\nInitiation Phase: The 30 days following the IPSD. \n\nContinuation and Maintenance Phase: The 300 days following the IPSD.\n\nTreatment days (covered days): The actual number of calendar days covered with prescriptions during the 301-day period. \nUse the following steps to identify and calculate covered days. \nStep 1: For same medications that are prescribed on the same day or on different days with overlapping days supply, the days supply is summed. The start and end dates are then identified. The start date is the date of service of the earliest prescription event and the first covered day. The end date is the calendar day when the days supply runs out. The start date through the end date are considered covered days. This rule assumes that the patient will take one prescription at a time (and start taking the next prescription after exhausting the previous prescription). For example: \n- If there are three 7-days supply prescription events for the same medication on January 1, the start date is January 1 and the end date is January 21. Covered days include January 1–21.  \n- If there are two 7-days supply prescription events for the same medication on January 1 and January 5, the start date is January 1 and the end date is January 14. Covered days include January 1–14. \n- If there are three 7-days supply prescription events for the same medication on January 1, a 7-days supply prescription event on January 20 and a 7-days supply prescription event on January 28, the start date is January 1 and the end date is February 4. Covered days include January 1–February 4.  \nStep 2: For all other events (multiple prescriptions for the same medication on different days without overlap, multiple prescriptions for different medications on the same or different days, with or without overlap), the covered days are identified by the start and end dates for each prescription event individually. The start date through the end date are considered covered days. This rule assumes the member will take the different medications concurrently. \nStep 3: Each calendar day covered by one or more medications is considered one covered day.","name":"Definition","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DEF","title":"Definition"},"value_obj":{"type":"ED","value":"Intake Period: The twelve-month period starting March 1 of the year prior to the measurement period and ending the last calendar day of February of the measurement period.\n\nIndex Prescription Start Date (IPSD): The earliest prescription date for an ADHD medication where the date is in the Intake Period and the patient is not actively on ADHD medication during the 120 days prior. \n\nInitiation Phase: The 30 days following the IPSD. \n\nContinuation and Maintenance Phase: The 300 days following the IPSD.\n\nTreatment days (covered days): The actual number of calendar days covered with prescriptions during the 301-day period. \nUse the following steps to identify and calculate covered days. \nStep 1: For same medications that are prescribed on the same day or on different days with overlapping days supply, the days supply is summed. The start and end dates are then identified. The start date is the date of service of the earliest prescription event and the first covered day. The end date is the calendar day when the days supply runs out. The start date through the end date are considered covered days. This rule assumes that the patient will take one prescription at a time (and start taking the next prescription after exhausting the previous prescription). For example: \n- If there are three 7-days supply prescription events for the same medication on January 1, the start date is January 1 and the end date is January 21. Covered days include January 1–21.  \n- If there are two 7-days supply prescription events for the same medication on January 1 and January 5, the start date is January 1 and the end date is January 14. Covered days include January 1–14. \n- If there are three 7-days supply prescription events for the same medication on January 1, a 7-days supply prescription event on January 20 and a 7-days supply prescription event on January 28, the start date is January 1 and the end date is February 4. Covered days include January 1–February 4.  \nStep 2: For all other events (multiple prescriptions for the same medication on different days without overlap, multiple prescriptions for different medications on the same or different days, with or without overlap), the covered days are identified by the start and end dates for each prescription event individually. The start date through the end date are considered covered days. This rule assumes the member will take the different medications concurrently. \nStep 3: Each calendar day covered by one or more medications is considered one covered day.","media_type":"text/plain"}},{"code":"GUIDE","value":"This eCQM is a patient-based measure.\n \nThis version of the eCQM uses QDM version 5.6. Please refer to the eCQI resource center (https://ecqi.healthit.gov/qdm) for more information on the QDM.","name":"Guidance","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"GUIDE","title":"Guidance"},"value_obj":{"type":"ED","value":"This eCQM is a patient-based measure.\n \nThis version of the eCQM uses QDM version 5.6. Please refer to the eCQI resource center (https://ecqi.healthit.gov/qdm) for more information on the QDM.","media_type":"text/plain"}},{"code":"TRANF","value":"TBD","name":"Transmission Format","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"TRANF","title":"Transmission Format"},"value_obj":{"type":"ED","value":"TBD","media_type":"text/plain"}},{"code":"IPOP","value":"Initial Population 1: Children 6-12 years of age as of the Intake Period who had an IPSD and who had a visit within 6 months prior to the IPSD including the IPSD. Children are removed if they had an acute inpatient stay with a principal diagnosis of mental, behavioral or neurodevelopmental disorder during the Initiation Phase.  \n\nInitial Population 2: Children 6-12 years of age as of the Intake Period who had an IPSD and remained on the medication for at least 210 treatment days during the 301-day period, beginning on the IPSD through 300 days after the IPSD, and who had a visit within 6 months prior to the IPSD including the IPSD. Children are removed if they had an acute inpatient stay with a principal diagnosis of mental, behavioral or neurodevelopmental disorder during the Continuation and Maintenance Phase.","name":"Initial Population","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"IPOP","title":"Initial Population"},"value_obj":{"type":"ED","value":"Initial Population 1: Children 6-12 years of age as of the Intake Period who had an IPSD and who had a visit within 6 months prior to the IPSD including the IPSD. Children are removed if they had an acute inpatient stay with a principal diagnosis of mental, behavioral or neurodevelopmental disorder during the Initiation Phase.  \n\nInitial Population 2: Children 6-12 years of age as of the Intake Period who had an IPSD and remained on the medication for at least 210 treatment days during the 301-day period, beginning on the IPSD through 300 days after the IPSD, and who had a visit within 6 months prior to the IPSD including the IPSD. Children are removed if they had an acute inpatient stay with a principal diagnosis of mental, behavioral or neurodevelopmental disorder during the Continuation and Maintenance Phase.","media_type":"text/plain"}},{"code":"DENOM","value":"Equals Initial Population","name":"Denominator","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DENOM","title":"Denominator"},"value_obj":{"type":"ED","value":"Equals Initial Population","media_type":"text/plain"}},{"code":"DENEX","value":"Exclude patients diagnosed with narcolepsy at any point in their history or during the measurement period.\n\nExclude patients who are in hospice care for any part of the measurement period.","name":"Denominator Exclusions","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DENEX","title":"Denominator Exclusions"},"value_obj":{"type":"ED","value":"Exclude patients diagnosed with narcolepsy at any point in their history or during the measurement period.\n\nExclude patients who are in hospice care for any part of the measurement period.","media_type":"text/plain"}},{"code":"NUMER","value":"Numerator 1: Patients who had at least one visit with a practitioner with prescribing authority during the Initiation Phase.\n \nNumerator 2: Patients who had at least one visit with a practitioner with prescribing authority during the Initiation Phase, and at least two follow-up visits on different dates of service during the 31-300 days after the IPSD.","name":"Numerator","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"NUMER","title":"Numerator"},"value_obj":{"type":"ED","value":"Numerator 1: Patients who had at least one visit with a practitioner with prescribing authority during the Initiation Phase.\n \nNumerator 2: Patients who had at least one visit with a practitioner with prescribing authority during the Initiation Phase, and at least two follow-up visits on different dates of service during the 31-300 days after the IPSD.","media_type":"text/plain"}},{"code":"NUMEX","value":"Not Applicable","name":"Numerator Exclusions","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"NUMEX","title":"Numerator Exclusions"},"value_obj":{"type":"ED","value":"Not Applicable","media_type":"text/plain"}},{"code":"DENEXCEP","value":"None","name":"Denominator Exceptions","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DENEXCEP","title":"Denominator Exceptions"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"SDE","value":"For every patient evaluated by this measure also identify payer, race, ethnicity and sex","name":"Supplemental Data Elements","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"SDE","title":"Supplemental Data Elements"},"value_obj":{"type":"ED","value":"For every patient evaluated by this measure also identify payer, race, ethnicity and sex","media_type":"text/plain"}}],"measure_period":{"type":"IVL_TS","low":{"type":"TS","value":"201201010000","inclusive?":true,"derived?":false},"high":{"type":"TS","value":"201212312359","inclusive?":true,"derived?":false},"width":{"type":"PQ","unit":"a","value":"1","inclusive?":true,"derived?":false}},"measure_scoring":"PROPORTION","population_criteria":{"IPP":{"conjunction?":true,"type":"IPP","hqmf_id":"9B70E808-0E6B-44FB-AC46-0548A1E409DE","preconditions":[{"id":2,"preconditions":[{"id":1,"reference":"FollowUpCareforChildrenPrescribedADHDMedicationADD__Initial_Population_1__2A8CBC03_2518_4095_9FDB_A34BA9F54DD2"}],"conjunction_code":"allTrue"}]},"DENOM":{"conjunction?":true,"type":"DENOM","hqmf_id":"886B4ABD-BEB6-43DC-90AE-C529F5E07B47","preconditions":[{"id":4,"preconditions":[{"id":3,"reference":"FollowUpCareforChildrenPrescribedADHDMedicationADD__Denominator_1__2A8CBC03_2518_4095_9FDB_A34BA9F54DD2"}],"conjunction_code":"allTrue"}]},"NUMER":{"conjunction?":true,"type":"NUMER","hqmf_id":"FD0D1365-F405-4A66-9B7A-2ABE64033E8A","preconditions":[{"id":6,"preconditions":[{"id":5,"reference":"FollowUpCareforChildrenPrescribedADHDMedicationADD__Numerator_1__2A8CBC03_2518_4095_9FDB_A34BA9F54DD2"}],"conjunction_code":"allTrue"}]},"DENEX":{"conjunction?":true,"type":"DENEX","hqmf_id":"00B7D640-5DD7-41D1-BF47-B95A2C19B6D7","preconditions":[{"id":8,"preconditions":[{"id":7,"reference":"FollowUpCareforChildrenPrescribedADHDMedicationADD__Denominator_Exclusions__2A8CBC03_2518_4095_9FDB_A34BA9F54DD2"}],"conjunction_code":"atLeastOneTrue"}]},"IPP_1":{"conjunction?":true,"type":"IPP","hqmf_id":"72606B57-2F1C-40B4-9655-F691A594A611","preconditions":[{"id":10,"preconditions":[{"id":9,"reference":"FollowUpCareforChildrenPrescribedADHDMedicationADD__Initial_Population_2__2A8CBC03_2518_4095_9FDB_A34BA9F54DD2"}],"conjunction_code":"allTrue"}]},"DENOM_1":{"conjunction?":true,"type":"DENOM","hqmf_id":"F6EA0497-C79C-4722-838F-528A8635F1BE","preconditions":[{"id":12,"preconditions":[{"id":11,"reference":"FollowUpCareforChildrenPrescribedADHDMedicationADD__Denominator_2__2A8CBC03_2518_4095_9FDB_A34BA9F54DD2"}],"conjunction_code":"allTrue"}]},"NUMER_1":{"conjunction?":true,"type":"NUMER","hqmf_id":"0DFDC593-66E3-4532-9F27-6C5C6C947EE5","preconditions":[{"id":14,"preconditions":[{"id":13,"reference":"FollowUpCareforChildrenPrescribedADHDMedicationADD__Numerator_2__2A8CBC03_2518_4095_9FDB_A34BA9F54DD2"}],"conjunction_code":"allTrue"}]},"DENEX_1":{"conjunction?":true,"type":"DENEX","hqmf_id":"CD78A07D-8D5B-4E22-B05E-9A569B2FC375","preconditions":[{"id":16,"preconditions":[{"id":15,"reference":"FollowUpCareforChildrenPrescribedADHDMedicationADD__Denominator_Exclusions__2A8CBC03_2518_4095_9FDB_A34BA9F54DD2"}],"conjunction_code":"atLeastOneTrue"}]}},"population_sets":[{"_id":"6892448e0734dfcaf5413627","population_set_id":"PopulationSet_1","populations":{"DENEX":{"_id":"689244ad0734dfcaf54144e4","hqmf_id":"00B7D640-5DD7-41D1-BF47-B95A2C19B6D7","library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"Denominator Exclusions"},"DENOM":{"_id":"689244ad0734dfcaf54144e5","hqmf_id":"886B4ABD-BEB6-43DC-90AE-C529F5E07B47","library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"Denominator 1"},"IPP":{"_id":"689244ad0734dfcaf54144e6","hqmf_id":"9B70E808-0E6B-44FB-AC46-0548A1E409DE","library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"Initial Population 1"},"NUMER":{"_id":"689244ad0734dfcaf54144e7","hqmf_id":"FD0D1365-F405-4A66-9B7A-2ABE64033E8A","library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"Numerator 1"},"_id":"689244ad0734dfcaf54144e8","_type":"CQM::ProportionPopulationMap"},"supplemental_data_elements":[{"_id":"6892448e0734dfcaf541361f","hqmf_id":"EFFB71A8-4318-4C24-9468-93A25098AC06","library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"SDE Ethnicity"},{"_id":"6892448e0734dfcaf5413620","hqmf_id":"4BA21E94-D33A-428A-A718-5357DD093E5C","library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"SDE Payer"},{"_id":"6892448e0734dfcaf5413621","hqmf_id":"FE86CB16-398F-4C25-8F64-30C94027FA62","library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"SDE Race"},{"_id":"6892448e0734dfcaf5413622","hqmf_id":"9C701CEC-AB91-4472-AAB3-520212584300","library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"SDE Sex"}],"title":"Population Criteria Section"},{"_id":"6892448e0734dfcaf5413628","population_set_id":"PopulationSet_2","populations":{"DENEX":{"_id":"689244ad0734dfcaf54144e9","hqmf_id":"CD78A07D-8D5B-4E22-B05E-9A569B2FC375","library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"Denominator Exclusions"},"DENOM":{"_id":"689244ad0734dfcaf54144ea","hqmf_id":"F6EA0497-C79C-4722-838F-528A8635F1BE","library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"Denominator 2"},"IPP":{"_id":"689244ad0734dfcaf54144eb","hqmf_id":"72606B57-2F1C-40B4-9655-F691A594A611","library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"Initial Population 2"},"NUMER":{"_id":"689244ad0734dfcaf54144ec","hqmf_id":"0DFDC593-66E3-4532-9F27-6C5C6C947EE5","library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"Numerator 2"},"_id":"689244ad0734dfcaf54144ed","_type":"CQM::ProportionPopulationMap"},"supplemental_data_elements":[{"_id":"6892448e0734dfcaf5413623","hqmf_id":"F5984CF4-C81B-4893-9A96-167F5A3B270A","library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"SDE Ethnicity"},{"_id":"6892448e0734dfcaf5413624","hqmf_id":"5A175010-AF53-4C0D-A566-23CC8BB06714","library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"SDE Payer"},{"_id":"6892448e0734dfcaf5413625","hqmf_id":"5797A5D9-1689-4499-859A-899C36C3D38C","library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"SDE Race"},{"_id":"6892448e0734dfcaf5413626","hqmf_id":"F9DB73C0-29EC-44B3-AD4C-21F489F75A63","library_name":"FollowUpCareforChildrenPrescribedADHDMedicationADD","statement_name":"SDE Sex"}],"title":"Population Criteria Section"}],"source_data_criteria":[{"_id":"689244ad0734dfcaf54144ee","_type":"QDM::PatientCharacteristicSex","codeListId":"2.16.840.1.113762.1.4.1","dataElementCodes":[],"description":"Patient Characteristic Sex: ONCAdministrativeSex","hqmfOid":"2.16.840.1.113883.10.20.28.4.55","id":"689244ad0734dfcaf54144ee","qdmCategory":"patient_characteristic","qdmStatus":"gender","qdmTitle":"Patient Characteristic Sex","qdmVersion":"5.6"},{"_id":"6892448f0734dfcaf5413681","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.464.1003.101.12.1008","dataElementCodes":[],"description":"Encounter, Performed: OutpatientConsultation","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"6892448f0734dfcaf5413681","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"6892448f0734dfcaf5413682","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.666.5.307","dataElementCodes":[],"description":"Encounter, Performed: EncounterInpatient","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"6892448f0734dfcaf5413682","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"6892448f0734dfcaf5413683","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.464.1003.101.12.1080","dataElementCodes":[],"description":"Encounter, Performed: TelephoneVisits","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"6892448f0734dfcaf5413683","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"6892448f0734dfcaf5413684","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.464.1003.101.12.1027","dataElementCodes":[],"description":"Encounter, Performed: PreventiveCareServicesGroupCounseling","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"6892448f0734dfcaf5413684","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"6892448f0734dfcaf5413685","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.526.3.1496","dataElementCodes":[],"description":"Encounter, Performed: PsychVisitPsychotherapy","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"6892448f0734dfcaf5413685","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"6892448f0734dfcaf5413686","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.464.1003.101.12.1016","dataElementCodes":[],"description":"Encounter, Performed: HomeHealthcareServices","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"6892448f0734dfcaf5413686","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"689244ad0734dfcaf54144ef","_type":"QDM::PatientCharacteristicRace","codeListId":"2.16.840.1.114222.4.11.836","dataElementCodes":[],"description":"Patient Characteristic Race: Race","hqmfOid":"2.16.840.1.113883.10.20.28.4.59","id":"689244ad0734dfcaf54144ef","qdmCategory":"patient_characteristic","qdmStatus":"race","qdmTitle":"Patient Characteristic Race","qdmVersion":"5.6"},{"_id":"6892448f0734dfcaf5413687","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.464.1003.1003","dataElementCodes":[],"description":"Encounter, Performed: HospiceEncounter","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"6892448f0734dfcaf5413687","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"6892448f0734dfcaf5413688","_type":"QDM::MedicationOrder","authorDatetime":null,"codeListId":"2.16.840.1.113883.3.464.1003.1171","dataElementCodes":[],"daysSupplied":null,"description":"Medication, Order: Clonidine","dosage":null,"frequency":null,"hqmfOid":"2.16.840.1.113883.10.20.28.4.51","id":"6892448f0734dfcaf5413688","negationRationale":null,"qdmCategory":"medication","qdmStatus":"order","qdmTitle":"Medication, Order","qdmVersion":"5.6","reason":null,"refills":null,"relatedTo":null,"relevantPeriod":null,"route":null,"setting":null,"supply":null},{"_id":"6892448f0734dfcaf541368a","_type":"QDM::MedicationActive","codeListId":"2.16.840.1.113883.3.464.1003.1171","dataElementCodes":[],"description":"Medication, Active: Clonidine","dosage":null,"frequency":null,"hqmfOid":"2.16.840.1.113883.10.20.28.4.44","id":"6892448f0734dfcaf541368a","qdmCategory":"medication","qdmStatus":"active","qdmTitle":"Medication, Active","qdmVersion":"5.6","relevantDatetime":null,"relevantPeriod":null,"route":null},{"_id":"6892448f0734dfcaf541368e","_type":"QDM::Diagnosis","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"2.16.840.1.113883.3.464.1003.114.12.1011","dataElementCodes":[],"description":"Diagnosis: Narcolepsy","hqmfOid":"2.16.840.1.113883.10.20.28.4.110","id":"6892448f0734dfcaf541368e","prevalencePeriod":null,"qdmCategory":"condition","qdmTitle":"Diagnosis","qdmVersion":"5.6","qrdaOid":"2.16.840.1.113883.10.20.24.3.135","severity":null},{"_id":"6892448f0734dfcaf5413689","_type":"QDM::MedicationOrder","authorDatetime":null,"codeListId":"2.16.840.1.113883.3.464.1003.1172","dataElementCodes":[],"daysSupplied":null,"description":"Medication, Order: Dexmethylphenidate","dosage":null,"frequency":null,"hqmfOid":"2.16.840.1.113883.10.20.28.4.51","id":"6892448f0734dfcaf5413689","negationRationale":null,"qdmCategory":"medication","qdmStatus":"order","qdmTitle":"Medication, Order","qdmVersion":"5.6","reason":null,"refills":null,"relatedTo":null,"relevantPeriod":null,"route":null,"setting":null,"supply":null},{"_id":"6892448f0734dfcaf541368b","_type":"QDM::MedicationActive","codeListId":"2.16.840.1.113883.3.464.1003.1172","dataElementCodes":[],"description":"Medication, Active: Dexmethylphenidate","dosage":null,"frequency":null,"hqmfOid":"2.16.840.1.113883.10.20.28.4.44","id":"6892448f0734dfcaf541368b","qdmCategory":"medication","qdmStatus":"active","qdmTitle":"Medication, Active","qdmVersion":"5.6","relevantDatetime":null,"relevantPeriod":null,"route":null},{"_id":"6892448f0734dfcaf541368c","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.464.1003.101.12.1089","dataElementCodes":[],"description":"Encounter, Performed: OnlineAssessments","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"6892448f0734dfcaf541368c","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"6892448f0734dfcaf541368d","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.464.1003.101.12.1001","dataElementCodes":[],"description":"Encounter, Performed: OfficeVisit","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"6892448f0734dfcaf541368d","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"6892448f0734dfcaf541368f","_type":"QDM::Diagnosis","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"2.16.840.1.113883.3.464.1003.1165","dataElementCodes":[],"description":"Diagnosis: HospiceDiagnosis","hqmfOid":"2.16.840.1.113883.10.20.28.4.110","id":"6892448f0734dfcaf541368f","prevalencePeriod":null,"qdmCategory":"condition","qdmTitle":"Diagnosis","qdmVersion":"5.6","qrdaOid":"2.16.840.1.113883.10.20.24.3.135","severity":null},{"_id":"689244ad0734dfcaf54144f0","_type":"QDM::PatientCharacteristicPayer","codeListId":"2.16.840.1.114222.4.11.3591","dataElementCodes":[],"description":"Patient Characteristic Payer: Payer","hqmfOid":"2.16.840.1.113883.10.20.28.4.58","id":"689244ad0734dfcaf54144f0","qdmCategory":"patient_characteristic","qdmStatus":"payer","qdmTitle":"Patient Characteristic Payer","qdmVersion":"5.6","relevantPeriod":null},{"_id":"6892448f0734dfcaf5413690","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.464.1003.101.12.1054","dataElementCodes":[],"description":"Encounter, Performed: BehavioralHealthFollowupVisit","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"6892448f0734dfcaf5413690","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"6892448f0734dfcaf5413691","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.464.1003.101.12.1022","dataElementCodes":[],"description":"Encounter, Performed: PreventiveCareServicesInitialOfficeVisit0to17","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"6892448f0734dfcaf5413691","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"6892448f0734dfcaf5413692","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.464.1003.101.12.1024","dataElementCodes":[],"description":"Encounter, Performed: PreventiveCareEstablishedOfficeVisit0to17","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"6892448f0734dfcaf5413692","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"6892448f0734dfcaf5413693","_type":"QDM::MedicationOrder","authorDatetime":null,"codeListId":"2.16.840.1.113883.3.464.1003.1173","dataElementCodes":[],"daysSupplied":null,"description":"Medication, Order: Dextroamphetamine","dosage":null,"frequency":null,"hqmfOid":"2.16.840.1.113883.10.20.28.4.51","id":"6892448f0734dfcaf5413693","negationRationale":null,"qdmCategory":"medication","qdmStatus":"order","qdmTitle":"Medication, Order","qdmVersion":"5.6","reason":null,"refills":null,"relatedTo":null,"relevantPeriod":null,"route":null,"setting":null,"supply":null},{"_id":"6892448f0734dfcaf5413694","_type":"QDM::MedicationActive","codeListId":"2.16.840.1.113883.3.464.1003.1173","dataElementCodes":[],"description":"Medication, Active: Dextroamphetamine","dosage":null,"frequency":null,"hqmfOid":"2.16.840.1.113883.10.20.28.4.44","id":"6892448f0734dfcaf5413694","qdmCategory":"medication","qdmStatus":"active","qdmTitle":"Medication, Active","qdmVersion":"5.6","relevantDatetime":null,"relevantPeriod":null,"route":null},{"_id":"6892448f0734dfcaf5413695","_type":"QDM::MedicationOrder","authorDatetime":null,"codeListId":"2.16.840.1.113883.3.464.1003.1174","dataElementCodes":[],"daysSupplied":null,"description":"Medication, Order: Lisdexamfetamine","dosage":null,"frequency":null,"hqmfOid":"2.16.840.1.113883.10.20.28.4.51","id":"6892448f0734dfcaf5413695","negationRationale":null,"qdmCategory":"medication","qdmStatus":"order","qdmTitle":"Medication, Order","qdmVersion":"5.6","reason":null,"refills":null,"relatedTo":null,"relevantPeriod":null,"route":null,"setting":null,"supply":null},{"_id":"6892448f0734dfcaf5413696","_type":"QDM::MedicationActive","codeListId":"2.16.840.1.113883.3.464.1003.1174","dataElementCodes":[],"description":"Medication, Active: Lisdexamfetamine","dosage":null,"frequency":null,"hqmfOid":"2.16.840.1.113883.10.20.28.4.44","id":"6892448f0734dfcaf5413696","qdmCategory":"medication","qdmStatus":"active","qdmTitle":"Medication, Active","qdmVersion":"5.6","relevantDatetime":null,"relevantPeriod":null,"route":null},{"_id":"6892448f0734dfcaf5413697","_type":"QDM::MedicationOrder","authorDatetime":null,"codeListId":"2.16.840.1.113883.3.464.1003.196.11.1252","dataElementCodes":[],"daysSupplied":null,"description":"Medication, Order: Guanfacine","dosage":null,"frequency":null,"hqmfOid":"2.16.840.1.113883.10.20.28.4.51","id":"6892448f0734dfcaf5413697","negationRationale":null,"qdmCategory":"medication","qdmStatus":"order","qdmTitle":"Medication, Order","qdmVersion":"5.6","reason":null,"refills":null,"relatedTo":null,"relevantPeriod":null,"route":null,"setting":null,"supply":null},{"_id":"6892448f0734dfcaf5413698","_type":"QDM::MedicationActive","codeListId":"2.16.840.1.113883.3.464.1003.196.11.1252","dataElementCodes":[],"description":"Medication, Active: Guanfacine","dosage":null,"frequency":null,"hqmfOid":"2.16.840.1.113883.10.20.28.4.44","id":"6892448f0734dfcaf5413698","qdmCategory":"medication","qdmStatus":"active","qdmTitle":"Medication, Active","qdmVersion":"5.6","relevantDatetime":null,"relevantPeriod":null,"route":null},{"_id":"6892448f0734dfcaf5413699","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.464.1003.101.12.1026","dataElementCodes":[],"description":"Encounter, Performed: PreventiveCareServicesIndividualCounseling","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"6892448f0734dfcaf5413699","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"689244ad0734dfcaf54144f1","_type":"QDM::InterventionOrder","authorDatetime":null,"codeListId":"2.16.840.1.113883.3.526.3.1584","dataElementCodes":[],"description":"Intervention, Order: HospiceCareAmbulatory","hqmfOid":"2.16.840.1.113883.10.20.28.4.35","id":"689244ad0734dfcaf54144f1","negationRationale":null,"qdmCategory":"intervention","qdmStatus":"order","qdmTitle":"Intervention, Order","qdmVersion":"5.6","reason":null},{"_id":"689244ad0734dfcaf54144f2","_type":"QDM::InterventionPerformed","authorDatetime":null,"codeListId":"2.16.840.1.113883.3.526.3.1584","dataElementCodes":[],"description":"Intervention, Performed: HospiceCareAmbulatory","hqmfOid":"2.16.840.1.113883.10.20.28.4.36","id":"689244ad0734dfcaf54144f2","negationRationale":null,"qdmCategory":"intervention","qdmStatus":"performed","qdmTitle":"Intervention, Performed","qdmVersion":"5.6","reason":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null,"status":null},{"_id":"6892448f0734dfcaf541369a","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.526.3.1492","dataElementCodes":[],"description":"Encounter, Performed: PsychVisitDiagnosticEvaluation","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"6892448f0734dfcaf541369a","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"689244ad0734dfcaf54144f3","_type":"QDM::PatientCharacteristicEthnicity","codeListId":"2.16.840.1.114222.4.11.837","dataElementCodes":[],"description":"Patient Characteristic Ethnicity: Ethnicity","hqmfOid":"2.16.840.1.113883.10.20.28.4.56","id":"689244ad0734dfcaf54144f3","qdmCategory":"patient_characteristic","qdmStatus":"ethnicity","qdmTitle":"Patient Characteristic Ethnicity","qdmVersion":"5.6"},{"_id":"6892448f0734dfcaf541369b","_type":"QDM::MedicationOrder","authorDatetime":null,"codeListId":"2.16.840.1.113883.3.464.1003.1170","dataElementCodes":[],"daysSupplied":null,"description":"Medication, Order: Atomoxetine","dosage":null,"frequency":null,"hqmfOid":"2.16.840.1.113883.10.20.28.4.51","id":"6892448f0734dfcaf541369b","negationRationale":null,"qdmCategory":"medication","qdmStatus":"order","qdmTitle":"Medication, Order","qdmVersion":"5.6","reason":null,"refills":null,"relatedTo":null,"relevantPeriod":null,"route":null,"setting":null,"supply":null},{"_id":"6892448f0734dfcaf541369c","_type":"QDM::MedicationActive","codeListId":"2.16.840.1.113883.3.464.1003.1170","dataElementCodes":[],"description":"Medication, Active: Atomoxetine","dosage":null,"frequency":null,"hqmfOid":"2.16.840.1.113883.10.20.28.4.44","id":"6892448f0734dfcaf541369c","qdmCategory":"medication","qdmStatus":"active","qdmTitle":"Medication, Active","qdmVersion":"5.6","relevantDatetime":null,"relevantPeriod":null,"route":null},{"_id":"6892448f0734dfcaf541369d","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.464.1003.101.12.1002","dataElementCodes":[],"description":"Encounter, Performed: InitialHospitalObservationCare","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"6892448f0734dfcaf541369d","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"6892448f0734dfcaf541369e","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.464.1003.101.12.1055","dataElementCodes":[],"description":"Encounter, Performed: PsychotherapyandPharmacologicManagement","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"6892448f0734dfcaf541369e","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"6892448f0734dfcaf541369f","_type":"QDM::MedicationOrder","authorDatetime":null,"codeListId":"2.16.840.1.113883.3.464.1003.1176","dataElementCodes":[],"daysSupplied":null,"description":"Medication, Order: Methylphenidate","dosage":null,"frequency":null,"hqmfOid":"2.16.840.1.113883.10.20.28.4.51","id":"6892448f0734dfcaf541369f","negationRationale":null,"qdmCategory":"medication","qdmStatus":"order","qdmTitle":"Medication, Order","qdmVersion":"5.6","reason":null,"refills":null,"relatedTo":null,"relevantPeriod":null,"route":null,"setting":null,"supply":null},{"_id":"6892448f0734dfcaf54136a0","_type":"QDM::MedicationActive","codeListId":"2.16.840.1.113883.3.464.1003.1176","dataElementCodes":[],"description":"Medication, Active: Methylphenidate","dosage":null,"frequency":null,"hqmfOid":"2.16.840.1.113883.10.20.28.4.44","id":"6892448f0734dfcaf54136a0","qdmCategory":"medication","qdmStatus":"active","qdmTitle":"Medication, Active","qdmVersion":"5.6","relevantDatetime":null,"relevantPeriod":null,"route":null},{"_id":"6892448f0734dfcaf54136a1","_type":"QDM::MedicationOrder","authorDatetime":null,"codeListId":"drc-3d4e19d311bf8a5de299d348b1ce0063a4522f0cb1145e4d62efd3fdd1c2c22a","dataElementCodes":[],"daysSupplied":null,"description":"Medication, Order: methamphetamine hydrochloride 5 MG Oral Tablet","dosage":null,"frequency":null,"hqmfOid":"2.16.840.1.113883.10.20.28.4.51","id":"6892448f0734dfcaf54136a1","negationRationale":null,"qdmCategory":"medication","qdmStatus":"order","qdmTitle":"Medication, Order","qdmVersion":"5.6","reason":null,"refills":null,"relatedTo":null,"relevantPeriod":null,"route":null,"setting":null,"supply":null},{"_id":"6892448f0734dfcaf54136a2","_type":"QDM::MedicationActive","codeListId":"drc-3d4e19d311bf8a5de299d348b1ce0063a4522f0cb1145e4d62efd3fdd1c2c22a","dataElementCodes":[],"description":"Medication, Active: methamphetamine hydrochloride 5 MG Oral Tablet","dosage":null,"frequency":null,"hqmfOid":"2.16.840.1.113883.10.20.28.4.44","id":"6892448f0734dfcaf54136a2","qdmCategory":"medication","qdmStatus":"active","qdmTitle":"Medication, Active","qdmVersion":"5.6","relevantDatetime":null,"relevantPeriod":null,"route":null},{"_id":"689244ad0734dfcaf54144f4","_type":"QDM::AssessmentPerformed","authorDatetime":null,"codeListId":"drc-fba6a4e5f5a529f9af0e0ac4cc9930b15eed11995ff69f544d676472e0b4ea9f","components":null,"dataElementCodes":[],"description":"Assessment, Performed: Hospice care [Minimum Data Set]","hqmfOid":"2.16.840.1.113883.10.20.28.4.117","id":"689244ad0734dfcaf54144f4","interpretation":null,"method":null,"negationRationale":null,"qdmCategory":"assessment","qdmStatus":"performed","qdmTitle":"Assessment, Performed","qdmVersion":"5.6","reason":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null}],"title":"Follow-Up Care for Children Prescribed ADHD Medication (ADD)","updated_at":null,"value_set_ids":["6892448f0734dfcaf54136a3","6892448f0734dfcaf54136a4","6892448f0734dfcaf54136a5","6892448f0734dfcaf54136a6","6892448f0734dfcaf54136a7","6892448f0734dfcaf54136a8","6892448f0734dfcaf54136a9","6892448f0734dfcaf54136aa","6892448f0734dfcaf54136ab","6892448f0734dfcaf54136ac","6892448f0734dfcaf54136ad","6892448f0734dfcaf54136ae","6892448f0734dfcaf54136af","6892448f0734dfcaf54136b0","6892448f0734dfcaf54136b1","6892448f0734dfcaf54136b2","6892448f0734dfcaf54136b3","6892448f0734dfcaf54136b4","6892448f0734dfcaf54136b5","6892448f0734dfcaf54136b6","6892448f0734dfcaf54136b7","6892448f0734dfcaf54136b8","6892448f0734dfcaf54136b9","6892448f0734dfcaf54136ba","6892448f0734dfcaf54136bb","6892448f0734dfcaf54136bc","6892448f0734dfcaf54136bd","689244ad0734dfcaf5414497","689244ad0734dfcaf5414498","689244ad0734dfcaf5414499","689244ad0734dfcaf541449a","689244ad0734dfcaf541449b","689244ad0734dfcaf541449c","689244ad0734dfcaf541449d","689244ad0734dfcaf541449e","689244ad0734dfcaf541449f","689244ad0734dfcaf54144a0","689244ad0734dfcaf54144a1","689244ad0734dfcaf54144a2","689244ad0734dfcaf54144a3","689244ad0734dfcaf54144a4","689244ad0734dfcaf54144a5","689244ad0734dfcaf54144a6","689244ad0734dfcaf54144a7","689244ad0734dfcaf54144a8","689244ad0734dfcaf54144a9","689244ad0734dfcaf54144aa","689244ad0734dfcaf54144ab","689244ad0734dfcaf54144ac","689244ad0734dfcaf54144ad","689244ad0734dfcaf54144ae","689244ad0734dfcaf54144af","689244ad0734dfcaf54144b0","689244ad0734dfcaf54144b1","689244ad0734dfcaf54144b2","689244ad0734dfcaf54144b3","689244ad0734dfcaf54144b4","689244ad0734dfcaf54144b5","689244ad0734dfcaf54144b6","689244ad0734dfcaf54144b7","689244ad0734dfcaf54144b8","689244ad0734dfcaf54144b9","689244ad0734dfcaf54144ba"]}