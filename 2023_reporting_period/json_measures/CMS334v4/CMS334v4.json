{"_id":"689267bae8da6d1c0d510607","calculate_sdes":null,"calculation_method":"PATIENT","cms_id":"CMS334v4","component":false,"component_hqmf_set_ids":[],"composite":false,"composite_hqmf_set_id":null,"cql_libraries":[{"_id":"689267b3e8da6d1c0d510331","cql":"library CesareanBirth version '4.0.000'\r\n\r\nusing QDM version '5.6'\r\n\r\ninclude MATGlobalCommonFunctions version '7.0.000' called Global\r\ninclude PCMaternal version '2.21.000' called PCMaternal\r\n\r\ncodesystem \"LOINC\": 'urn:oid:2.16.840.1.113883.6.1'\r\n\r\nvalueset \"Abnormal Presentation\": 'urn:oid:2.16.840.1.113762.1.4.1045.105'\r\nvalueset \"Cesarean Birth\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.282'\r\nvalueset \"Delivery of Singleton\": 'urn:oid:2.16.840.1.113762.1.4.1045.99'\r\nvalueset \"Ethnicity\": 'urn:oid:2.16.840.1.114222.4.11.837'\r\nvalueset \"ONC Administrative Sex\": 'urn:oid:2.16.840.1.113762.1.4.1'\r\nvalueset \"Payer\": 'urn:oid:2.16.840.1.114222.4.11.3591'\r\nvalueset \"Placenta Previa\": 'urn:oid:2.16.840.1.113762.1.4.1110.37'\r\nvalueset \"Race\": 'urn:oid:2.16.840.1.114222.4.11.836'\r\n\r\ncode \"[#] Births.preterm\": '11637-6' from \"LOINC\" display '[#] Births.preterm'\r\ncode \"[#] Births.term\": '11639-2' from \"LOINC\" display '[#] Births.term'\r\ncode \"[#] Parity\": '11977-6' from \"LOINC\" display '[#] Parity'\r\ncode \"[#] Pregnancies\": '11996-6' from \"LOINC\" display '[#] Pregnancies'\r\n\r\ncontext Patient\r\n\r\ndefine \"Delivery Encounter with Abnormal Presentation or Placenta Previa\":\r\n  \"Encounter with Abnormal Presentation\"\r\n    union \"Encounter with Placenta Previa\"\r\n\r\ndefine \"Delivery Encounter with Calculated Gestational Age Greater than or Equal to 37 Weeks\":\r\n  PCMaternal.\"Delivery Encounter with Age Range\" DeliveryEncounter\r\n    where PCMaternal.\"CalculatedGestationalAge\" ( DeliveryEncounter ) \u003e= 37\r\n\r\ndefine \"Delivery Encounter with Cesarean Birth\":\r\n  \"Singleton Delivery Encounters at 37 Plus Weeks Gravida 1 Parity 0, No Previous Births\" QualifyingEncounter\r\n    with [\"Procedure, Performed\": \"Cesarean Birth\"] CSection\r\n      such that Global.\"NormalizeInterval\" ( CSection.relevantDatetime, CSection.relevantPeriod ) during PCMaternal.\"HospitalizationWithEDOBTriageObservation\" ( QualifyingEncounter )\r\n\r\ndefine \"Delivery Encounter with Estimated Gestational Age Greater than or Equal to 37 Weeks\":\r\n  PCMaternal.\"Delivery Encounter with Age Range\" DeliveryEncounter\r\n    where PCMaternal.\"CalculatedGestationalAge\" ( DeliveryEncounter ) is null\r\n      and PCMaternal.\"LastEstimatedGestationalAge\" ( DeliveryEncounter ) \u003e= 37 weeks\r\n\r\ndefine \"Delivery Encounter with Gestational Age Greater than or Equal to 37 Weeks\":\r\n  \"Delivery Encounter with Calculated Gestational Age Greater than or Equal to 37 Weeks\"\r\n    union \"Delivery Encounter with Estimated Gestational Age Greater than or Equal to 37 Weeks\"\r\n\r\ndefine \"Denominator\":\r\n  \"Singleton Delivery Encounters at 37 Plus Weeks Gravida 1 Parity 0, No Previous Births\"\r\n\r\ndefine \"Denominator Exclusions\":\r\n  \"Delivery Encounter with Abnormal Presentation or Placenta Previa\"\r\n\r\ndefine \"Encounter with Abnormal Presentation\":\r\n  \"Singleton Delivery Encounters at 37 Plus Weeks Gravida 1 Parity 0, No Previous Births\" QualifyingEncounter\r\n    let LastAbnormalPresentation: Last([\"Assessment, Performed\": \"Abnormal Presentation\"] AbnormalPresentation\r\n        where Global.\"EarliestOf\"(AbnormalPresentation.relevantDatetime, AbnormalPresentation.relevantPeriod)before or on PCMaternal.\"LastTimeOfDelivery\"(QualifyingEncounter)\r\n        sort by Global.\"EarliestOf\"(relevantDatetime, relevantPeriod)\r\n    )\r\n    where exists ( QualifyingEncounter.diagnoses EncounterDiagnosis\r\n        where EncounterDiagnosis.code in \"Abnormal Presentation\"\r\n    )\r\n      or Global.\"EarliestOf\" ( LastAbnormalPresentation.relevantDatetime, LastAbnormalPresentation.relevantPeriod ) during QualifyingEncounter.relevantPeriod\r\n\r\ndefine \"Encounter with Placenta Previa\":\r\n  \"Singleton Delivery Encounters at 37 Plus Weeks Gravida 1 Parity 0, No Previous Births\" QualifyingEncounter\r\n    where exists QualifyingEncounter.diagnoses EncounterDiagnosis\r\n      where EncounterDiagnosis.code in \"Placenta Previa\"\r\n\r\ndefine \"Encounter with Singleton Delivery\":\r\n  PCMaternal.\"Delivery Encounter with Age Range\" DeliveryEncounter\r\n    where exists ( DeliveryEncounter.diagnoses EncounterDiagnoses\r\n        where EncounterDiagnoses.code in \"Delivery of Singleton\"\r\n    )\r\n\r\ndefine \"Initial Population\":\r\n  PCMaternal.\"Delivery Encounter with Age Range\"\r\n\r\ndefine \"Numerator\":\r\n  \"Delivery Encounter with Cesarean Birth\"\r\n\r\ndefine \"SDE Ethnicity\":\r\n  [\"Patient Characteristic Ethnicity\": \"Ethnicity\"]\r\n\r\ndefine \"SDE Payer\":\r\n  [\"Patient Characteristic Payer\": \"Payer\"]\r\n\r\ndefine \"SDE Race\":\r\n  [\"Patient Characteristic Race\": \"Race\"]\r\n\r\ndefine \"SDE Sex\":\r\n  [\"Patient Characteristic Sex\": \"ONC Administrative Sex\"]\r\n\r\ndefine \"Singleton Delivery Encounters at 37 Plus Weeks Gravida 1 Parity 0, No Previous Births\":\r\n  ( \"Delivery Encounter with Gestational Age Greater than or Equal to 37 Weeks\"\r\n    intersect \"Encounter with Singleton Delivery\" ) SingletonEncounterGE37Weeks\r\n    where ( ( \"LastGravida\"(SingletonEncounterGE37Weeks)= 1 )\r\n        or ( \"LastParity\"(SingletonEncounterGE37Weeks)= 0 )\r\n        or ( ( \"LastHistoryPretermBirth\"(SingletonEncounterGE37Weeks)= 0 )\r\n            and ( \"LastHistoryTermBirth\"(SingletonEncounterGE37Weeks)= 0 )\r\n        )\r\n    )\r\n\r\ndefine \"Variable Calculated Gestational Age\":\r\n  PCMaternal.\"Variable Calculated Gestational Age\"\r\n\r\ndefine function \"LastGravida\"(Encounter \"Encounter, Performed\"):\r\n  Last([\"Assessment, Performed\": \"[#] Pregnancies\"] Gravida\r\n      where Gravida.relevantDatetime 42 weeks or less before PCMaternal.\"LastTimeOfDelivery\"(Encounter)\r\n        and Gravida.result is not null\r\n      sort by relevantDatetime\r\n  ).result as Integer\r\n\r\ndefine function \"LastHistoryPretermBirth\"(Encounter \"Encounter, Performed\"):\r\n  Last([\"Assessment, Performed\": \"[#] Births.preterm\"] PretermBirth\r\n      where PretermBirth.relevantDatetime 42 weeks or less before PCMaternal.\"LastTimeOfDelivery\"(Encounter)\r\n        and PretermBirth.result is not null\r\n      sort by relevantDatetime\r\n  ).result as Integer\r\n\r\ndefine function \"LastHistoryTermBirth\"(Encounter \"Encounter, Performed\"):\r\n  Last([\"Assessment, Performed\": \"[#] Births.term\"] TermBirth\r\n      where TermBirth.relevantDatetime 42 weeks or less before PCMaternal.\"LastTimeOfDelivery\"(Encounter)\r\n        and TermBirth.result is not null\r\n      sort by relevantDatetime\r\n  ).result as Integer\r\n\r\ndefine function \"LastParity\"(Encounter \"Encounter, Performed\"):\r\n  Last([\"Assessment, Performed\": \"[#] Parity\"] Parity\r\n      where Parity.relevantDatetime 42 weeks or less before PCMaternal.\"LastTimeOfDelivery\"(Encounter)\r\n        and Parity.result is not null\r\n      sort by relevantDatetime\r\n  ).result as Integer","elm":{"library":{"annotation":[{"translatorOptions":"EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion,DisableMethodInvocation","type":"CqlToElmInfo"},{"type":"Annotation","s":{"r":"280","s":[{"value":["","library CesareanBirth version '4.0.000'"]}]}}],"identifier":{"id":"CesareanBirth","version":"4.0.000"},"schemaIdentifier":{"id":"urn:hl7-org:elm","version":"r1"},"usings":{"def":[{"localIdentifier":"System","uri":"urn:hl7-org:elm-types:r1"},{"localId":"1","locator":"3:1-3:23","localIdentifier":"QDM","uri":"urn:healthit-gov:qdm:v5_6","version":"5.6","annotation":[{"type":"Annotation","s":{"r":"1","s":[{"value":["","using "]},{"s":[{"value":["QDM"]}]},{"value":[" version ","'5.6'"]}]}}]}]},"includes":{"def":[{"localId":"2","locator":"5:1-5:64","localIdentifier":"Global","path":"MATGlobalCommonFunctions","version":"7.0.000","annotation":[{"type":"Annotation","s":{"r":"2","s":[{"value":["","include "]},{"s":[{"value":["MATGlobalCommonFunctions"]}]},{"value":[" version ","'7.0.000'"," called ","Global"]}]}}]},{"localId":"3","locator":"6:1-6:55","localIdentifier":"PCMaternal","path":"PCMaternal","version":"2.21.000","annotation":[{"type":"Annotation","s":{"r":"3","s":[{"value":["","include "]},{"s":[{"value":["PCMaternal"]}]},{"value":[" version ","'2.21.000'"," called ","PCMaternal"]}]}}]}]},"codeSystems":{"def":[{"localId":"4","locator":"8:1-8:51","name":"LOINC","id":"2.16.840.1.113883.6.1","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"4","s":[{"value":["","codesystem ","\"LOINC\"",": ","'urn:oid:2.16.840.1.113883.6.1'"]}]}}]}]},"valueSets":{"def":[{"localId":"5","locator":"10:1-10:74","name":"Abnormal Presentation","id":"2.16.840.1.113762.1.4.1045.105","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"5","s":[{"value":["","valueset ","\"Abnormal Presentation\"",": ","'urn:oid:2.16.840.1.113762.1.4.1045.105'"]}]}}]},{"localId":"6","locator":"11:1-11:70","name":"Cesarean Birth","id":"2.16.840.1.113883.3.117.1.7.1.282","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"6","s":[{"value":["","valueset ","\"Cesarean Birth\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.282'"]}]}}]},{"localId":"7","locator":"12:1-12:73","name":"Delivery of Singleton","id":"2.16.840.1.113762.1.4.1045.99","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"7","s":[{"value":["","valueset ","\"Delivery of Singleton\"",": ","'urn:oid:2.16.840.1.113762.1.4.1045.99'"]}]}}]},{"localId":"8","locator":"13:1-13:58","name":"Ethnicity","id":"2.16.840.1.114222.4.11.837","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"8","s":[{"value":["","valueset ","\"Ethnicity\"",": ","'urn:oid:2.16.840.1.114222.4.11.837'"]}]}}]},{"localId":"9","locator":"14:1-14:68","name":"ONC Administrative Sex","id":"2.16.840.1.113762.1.4.1","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"9","s":[{"value":["","valueset ","\"ONC Administrative Sex\"",": ","'urn:oid:2.16.840.1.113762.1.4.1'"]}]}}]},{"localId":"10","locator":"15:1-15:55","name":"Payer","id":"2.16.840.1.114222.4.11.3591","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"10","s":[{"value":["","valueset ","\"Payer\"",": ","'urn:oid:2.16.840.1.114222.4.11.3591'"]}]}}]},{"localId":"11","locator":"16:1-16:67","name":"Placenta Previa","id":"2.16.840.1.113762.1.4.1110.37","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"11","s":[{"value":["","valueset ","\"Placenta Previa\"",": ","'urn:oid:2.16.840.1.113762.1.4.1110.37'"]}]}}]},{"localId":"12","locator":"17:1-17:53","name":"Race","id":"2.16.840.1.114222.4.11.836","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"12","s":[{"value":["","valueset ","\"Race\"",": ","'urn:oid:2.16.840.1.114222.4.11.836'"]}]}}]}]},"codes":{"def":[{"localId":"14","locator":"19:1-19:78","name":"[#] Births.preterm","id":"11637-6","display":"[#] Births.preterm","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"14","s":[{"value":["","code ","\"[#] Births.preterm\"",": ","'11637-6'"," from "]},{"r":"13","s":[{"value":["\"LOINC\""]}]},{"value":[" display ","'[#] Births.preterm'"]}]}}],"codeSystem":{"localId":"13","locator":"19:43-19:49","name":"LOINC"}},{"localId":"16","locator":"20:1-20:72","name":"[#] Births.term","id":"11639-2","display":"[#] Births.term","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"16","s":[{"value":["","code ","\"[#] Births.term\"",": ","'11639-2'"," from "]},{"r":"15","s":[{"value":["\"LOINC\""]}]},{"value":[" display ","'[#] Births.term'"]}]}}],"codeSystem":{"localId":"15","locator":"20:40-20:46","name":"LOINC"}},{"localId":"18","locator":"21:1-21:62","name":"[#] Parity","id":"11977-6","display":"[#] Parity","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"18","s":[{"value":["","code ","\"[#] Parity\"",": ","'11977-6'"," from "]},{"r":"17","s":[{"value":["\"LOINC\""]}]},{"value":[" display ","'[#] Parity'"]}]}}],"codeSystem":{"localId":"17","locator":"21:35-21:41","name":"LOINC"}},{"localId":"20","locator":"22:1-22:72","name":"[#] Pregnancies","id":"11996-6","display":"[#] Pregnancies","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"20","s":[{"value":["","code ","\"[#] Pregnancies\"",": ","'11996-6'"," from "]},{"r":"19","s":[{"value":["\"LOINC\""]}]},{"value":[" display ","'[#] Pregnancies'"]}]}}],"codeSystem":{"localId":"19","locator":"22:40-22:46","name":"LOINC"}}]},"contexts":{"def":[{"locator":"24:1-24:15","name":"Patient"}]},"statements":{"def":[{"locator":"24:1-24:15","name":"Patient","context":"Patient","expression":{"type":"SingletonFrom","operand":{"locator":"24:1-24:15","dataType":"{urn:healthit-gov:qdm:v5_6}Patient","templateId":"Patient","type":"Retrieve"}}},{"localId":"29","locator":"30:1-32:75","name":"Delivery Encounter with Calculated Gestational Age Greater than or Equal to 37 Weeks","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"29","s":[{"value":["","define ","\"Delivery Encounter with Calculated Gestational Age Greater than or Equal to 37 Weeks\"",":\n  "]},{"r":"28","s":[{"s":[{"r":"22","s":[{"r":"21","s":[{"s":[{"value":["PCMaternal",".","\"Delivery Encounter with Age Range\""]}]}]},{"value":[" ","DeliveryEncounter"]}]}]},{"value":["\n    "]},{"r":"27","s":[{"value":["where "]},{"r":"27","s":[{"r":"25","s":[{"r":"23","s":[{"value":["PCMaternal"]}]},{"value":["."]},{"r":"25","s":[{"value":["\"CalculatedGestationalAge\""," ( "]},{"r":"24","s":[{"value":["DeliveryEncounter"]}]},{"value":[" )"]}]}]},{"r":"26","value":[" ","\u003e="," ","37"]}]}]}]}]}}],"expression":{"localId":"28","locator":"31:3-32:75","type":"Query","source":[{"localId":"22","locator":"31:3-31:66","alias":"DeliveryEncounter","expression":{"localId":"21","locator":"31:3-31:48","name":"Delivery Encounter with Age Range","libraryName":"PCMaternal","type":"ExpressionRef"}}],"relationship":[],"where":{"localId":"27","locator":"32:5-32:75","type":"GreaterOrEqual","operand":[{"localId":"25","locator":"32:11-32:69","name":"CalculatedGestationalAge","libraryName":"PCMaternal","type":"FunctionRef","operand":[{"localId":"24","locator":"32:51-32:67","name":"DeliveryEncounter","type":"AliasRef"}]},{"localId":"26","locator":"32:74-32:75","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"37","type":"Literal"}]}}},{"localId":"44","locator":"39:1-42:84","name":"Delivery Encounter with Estimated Gestational Age Greater than or Equal to 37 Weeks","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"44","s":[{"value":["","define ","\"Delivery Encounter with Estimated Gestational Age Greater than or Equal to 37 Weeks\"",":\n  "]},{"r":"43","s":[{"s":[{"r":"32","s":[{"r":"31","s":[{"s":[{"value":["PCMaternal",".","\"Delivery Encounter with Age Range\""]}]}]},{"value":[" ","DeliveryEncounter"]}]}]},{"value":["\n    "]},{"r":"42","s":[{"value":["where "]},{"r":"42","s":[{"r":"36","s":[{"r":"35","s":[{"r":"33","s":[{"value":["PCMaternal"]}]},{"value":["."]},{"r":"35","s":[{"value":["\"CalculatedGestationalAge\""," ( "]},{"r":"34","s":[{"value":["DeliveryEncounter"]}]},{"value":[" )"]}]}]},{"value":[" is null"]}]},{"value":["\n      and "]},{"r":"41","s":[{"r":"39","s":[{"r":"37","s":[{"value":["PCMaternal"]}]},{"value":["."]},{"r":"39","s":[{"value":["\"LastEstimatedGestationalAge\""," ( "]},{"r":"38","s":[{"value":["DeliveryEncounter"]}]},{"value":[" )"]}]}]},{"value":[" ","\u003e="," "]},{"r":"40","s":[{"value":["37 ","weeks"]}]}]}]}]}]}]}}],"expression":{"localId":"43","locator":"40:3-42:84","type":"Query","source":[{"localId":"32","locator":"40:3-40:66","alias":"DeliveryEncounter","expression":{"localId":"31","locator":"40:3-40:48","name":"Delivery Encounter with Age Range","libraryName":"PCMaternal","type":"ExpressionRef"}}],"relationship":[],"where":{"localId":"42","locator":"41:5-42:84","type":"And","operand":[{"localId":"36","locator":"41:11-41:77","type":"IsNull","operand":{"localId":"35","locator":"41:11-41:69","name":"CalculatedGestationalAge","libraryName":"PCMaternal","type":"FunctionRef","operand":[{"localId":"34","locator":"41:51-41:67","name":"DeliveryEncounter","type":"AliasRef"}]}},{"localId":"41","locator":"42:11-42:84","type":"GreaterOrEqual","operand":[{"localId":"39","locator":"42:11-42:72","name":"LastEstimatedGestationalAge","libraryName":"PCMaternal","type":"FunctionRef","operand":[{"localId":"38","locator":"42:54-42:70","name":"DeliveryEncounter","type":"AliasRef"}]},{"localId":"40","locator":"42:77-42:84","value":37,"unit":"weeks","type":"Quantity"}]}]}}},{"localId":"47","locator":"44:1-46:95","name":"Delivery Encounter with Gestational Age Greater than or Equal to 37 Weeks","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"47","s":[{"value":["","define ","\"Delivery Encounter with Gestational Age Greater than or Equal to 37 Weeks\"",":\n  "]},{"r":"46","s":[{"r":"30","s":[{"value":["\"Delivery Encounter with Calculated Gestational Age Greater than or Equal to 37 Weeks\""]}]},{"value":["\n    union "]},{"r":"45","s":[{"value":["\"Delivery Encounter with Estimated Gestational Age Greater than or Equal to 37 Weeks\""]}]}]}]}}],"expression":{"localId":"46","locator":"45:3-46:95","type":"Union","operand":[{"localId":"30","locator":"45:3-45:88","name":"Delivery Encounter with Calculated Gestational Age Greater than or Equal to 37 Weeks","type":"ExpressionRef"},{"localId":"45","locator":"46:11-46:95","name":"Delivery Encounter with Estimated Gestational Age Greater than or Equal to 37 Weeks","type":"ExpressionRef"}]}},{"localId":"60","locator":"70:1-74:5","name":"Encounter with Singleton Delivery","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"60","s":[{"value":["","define ","\"Encounter with Singleton Delivery\"",":\n  "]},{"r":"59","s":[{"s":[{"r":"50","s":[{"r":"49","s":[{"s":[{"value":["PCMaternal",".","\"Delivery Encounter with Age Range\""]}]}]},{"value":[" ","DeliveryEncounter"]}]}]},{"value":["\n    "]},{"r":"58","s":[{"value":["where "]},{"r":"58","s":[{"value":["exists "]},{"r":"57","s":[{"value":["( "]},{"r":"57","s":[{"s":[{"r":"52","s":[{"r":"51","s":[{"s":[{"value":["DeliveryEncounter",".","diagnoses"]}]}]},{"value":[" ","EncounterDiagnoses"]}]}]},{"value":["\n        "]},{"r":"56","s":[{"value":["where "]},{"r":"56","s":[{"r":"54","s":[{"r":"53","s":[{"value":["EncounterDiagnoses"]}]},{"value":["."]},{"r":"54","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"55","s":[{"value":["\"Delivery of Singleton\""]}]}]}]}]},{"value":["\n    )"]}]}]}]}]}]}}],"expression":{"localId":"59","locator":"71:3-74:5","type":"Query","source":[{"localId":"50","locator":"71:3-71:66","alias":"DeliveryEncounter","expression":{"localId":"49","locator":"71:3-71:48","name":"Delivery Encounter with Age Range","libraryName":"PCMaternal","type":"ExpressionRef"}}],"relationship":[],"where":{"localId":"58","locator":"72:5-74:5","type":"Exists","operand":{"localId":"57","locator":"72:18-74:5","type":"Query","source":[{"localId":"52","locator":"72:20-72:65","alias":"EncounterDiagnoses","expression":{"localId":"51","locator":"72:20-72:46","path":"diagnoses","scope":"DeliveryEncounter","type":"Property"}}],"relationship":[],"where":{"localId":"56","locator":"73:9-73:64","type":"InValueSet","code":{"localId":"54","locator":"73:15-73:37","path":"code","scope":"EncounterDiagnoses","type":"Property"},"valueset":{"localId":"55","locator":"73:42-73:64","name":"Delivery of Singleton","type":"ValueSetRef"}}}}}},{"localId":"87","locator":"107:1-112:21","name":"LastGravida","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"87","s":[{"value":["","define function ","\"LastGravida\"","(","Encounter"," "]},{"r":"65","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"86","s":[{"r":"86","s":[{"r":"84","s":[{"r":"83","s":[{"value":["Last","("]},{"r":"82","s":[{"s":[{"r":"67","s":[{"r":"66","s":[{"r":"66","s":[{"value":["[","\"Assessment, Performed\"",": "]},{"s":[{"value":["\"[#] Pregnancies\""]}]},{"value":["]"]}]}]},{"value":[" ","Gravida"]}]}]},{"value":["\n      "]},{"r":"78","s":[{"value":["where "]},{"r":"78","s":[{"r":"74","s":[{"r":"69","s":[{"r":"68","s":[{"value":["Gravida"]}]},{"value":["."]},{"r":"69","s":[{"value":["relevantDatetime"]}]}]},{"value":[" "]},{"r":"74","s":[{"r":"73","s":[{"value":["42 ","weeks"]}]},{"value":[" or less before"]}]},{"value":[" "]},{"r":"72","s":[{"r":"70","s":[{"value":["PCMaternal"]}]},{"value":["."]},{"r":"72","s":[{"value":["\"LastTimeOfDelivery\"","("]},{"r":"71","s":[{"value":["Encounter"]}]},{"value":[")"]}]}]}]},{"value":["\n        and "]},{"r":"77","s":[{"r":"76","s":[{"r":"75","s":[{"value":["Gravida"]}]},{"value":["."]},{"r":"76","s":[{"value":["result"]}]}]},{"value":[" is not null"]}]}]}]},{"value":["\n      "]},{"r":"81","s":[{"value":["sort by "]},{"r":"80","s":[{"r":"79","s":[{"value":["relevantDatetime"]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"84","s":[{"value":["result"]}]}]},{"value":[" as "]},{"r":"85","s":[{"value":["Integer"]}]}]}]}]}}],"expression":{"localId":"86","locator":"108:3-112:21","strict":false,"type":"As","operand":{"localId":"84","locator":"108:3-112:10","path":"result","type":"Property","source":{"localId":"83","locator":"108:3-112:3","type":"Last","source":{"localId":"82","locator":"108:8-111:30","type":"Query","source":[{"localId":"67","locator":"108:8-108:59","alias":"Gravida","expression":{"localId":"66","locator":"108:8-108:51","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveAssessmentPerformed","templateId":"PositiveAssessmentPerformed","codeProperty":"code","codeComparator":"~","type":"Retrieve","codes":{"type":"ToList","operand":{"locator":"108:34-108:50","name":"[#] Pregnancies","type":"CodeRef"}}}}],"relationship":[],"where":{"localId":"78","locator":"109:7-110:38","type":"And","operand":[{"localId":"74","locator":"109:13-109:103","type":"And","operand":[{"locator":"109:38-109:53","type":"In","operand":[{"localId":"69","locator":"109:13-109:36","path":"relevantDatetime","scope":"Gravida","type":"Property"},{"locator":"109:38-109:53","lowClosed":true,"highClosed":false,"type":"Interval","low":{"locator":"109:73-109:103","type":"Subtract","operand":[{"localId":"72","locator":"109:62-109:103","name":"LastTimeOfDelivery","libraryName":"PCMaternal","type":"FunctionRef","operand":[{"localId":"71","locator":"109:94-109:102","name":"Encounter","type":"OperandRef"}]},{"localId":"73","locator":"109:38-109:45","value":42,"unit":"weeks","type":"Quantity"}]},"high":{"localId":"72","locator":"109:62-109:103","name":"LastTimeOfDelivery","libraryName":"PCMaternal","type":"FunctionRef","operand":[{"localId":"71","locator":"109:94-109:102","name":"Encounter","type":"OperandRef"}]}}]},{"locator":"109:38-109:53","type":"Not","operand":{"locator":"109:38-109:53","type":"IsNull","operand":{"localId":"72","locator":"109:62-109:103","name":"LastTimeOfDelivery","libraryName":"PCMaternal","type":"FunctionRef","operand":[{"localId":"71","locator":"109:94-109:102","name":"Encounter","type":"OperandRef"}]}}}]},{"localId":"77","locator":"110:13-110:38","type":"Not","operand":{"locator":"110:13-110:38","type":"IsNull","operand":{"localId":"76","locator":"110:13-110:26","path":"result","scope":"Gravida","type":"Property"}}}]},"sort":{"localId":"81","locator":"111:7-111:30","by":[{"localId":"80","locator":"111:15-111:30","direction":"asc","path":"relevantDatetime","type":"ByColumn"}]}}}},"asTypeSpecifier":{"localId":"85","locator":"112:15-112:21","name":"{urn:hl7-org:elm-types:r1}Integer","type":"NamedTypeSpecifier"}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"65","locator":"107:41-107:62","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"114","locator":"128:1-133:21","name":"LastParity","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"114","s":[{"value":["","define function ","\"LastParity\"","(","Encounter"," "]},{"r":"92","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"113","s":[{"r":"113","s":[{"r":"111","s":[{"r":"110","s":[{"value":["Last","("]},{"r":"109","s":[{"s":[{"r":"94","s":[{"r":"93","s":[{"r":"93","s":[{"value":["[","\"Assessment, Performed\"",": "]},{"s":[{"value":["\"[#] Parity\""]}]},{"value":["]"]}]}]},{"value":[" ","Parity"]}]}]},{"value":["\n      "]},{"r":"105","s":[{"value":["where "]},{"r":"105","s":[{"r":"101","s":[{"r":"96","s":[{"r":"95","s":[{"value":["Parity"]}]},{"value":["."]},{"r":"96","s":[{"value":["relevantDatetime"]}]}]},{"value":[" "]},{"r":"101","s":[{"r":"100","s":[{"value":["42 ","weeks"]}]},{"value":[" or less before"]}]},{"value":[" "]},{"r":"99","s":[{"r":"97","s":[{"value":["PCMaternal"]}]},{"value":["."]},{"r":"99","s":[{"value":["\"LastTimeOfDelivery\"","("]},{"r":"98","s":[{"value":["Encounter"]}]},{"value":[")"]}]}]}]},{"value":["\n        and "]},{"r":"104","s":[{"r":"103","s":[{"r":"102","s":[{"value":["Parity"]}]},{"value":["."]},{"r":"103","s":[{"value":["result"]}]}]},{"value":[" is not null"]}]}]}]},{"value":["\n      "]},{"r":"108","s":[{"value":["sort by "]},{"r":"107","s":[{"r":"106","s":[{"value":["relevantDatetime"]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"111","s":[{"value":["result"]}]}]},{"value":[" as "]},{"r":"112","s":[{"value":["Integer"]}]}]}]}]}}],"expression":{"localId":"113","locator":"129:3-133:21","strict":false,"type":"As","operand":{"localId":"111","locator":"129:3-133:10","path":"result","type":"Property","source":{"localId":"110","locator":"129:3-133:3","type":"Last","source":{"localId":"109","locator":"129:8-132:30","type":"Query","source":[{"localId":"94","locator":"129:8-129:53","alias":"Parity","expression":{"localId":"93","locator":"129:8-129:46","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveAssessmentPerformed","templateId":"PositiveAssessmentPerformed","codeProperty":"code","codeComparator":"~","type":"Retrieve","codes":{"type":"ToList","operand":{"locator":"129:34-129:45","name":"[#] Parity","type":"CodeRef"}}}}],"relationship":[],"where":{"localId":"105","locator":"130:7-131:37","type":"And","operand":[{"localId":"101","locator":"130:13-130:102","type":"And","operand":[{"locator":"130:37-130:52","type":"In","operand":[{"localId":"96","locator":"130:13-130:35","path":"relevantDatetime","scope":"Parity","type":"Property"},{"locator":"130:37-130:52","lowClosed":true,"highClosed":false,"type":"Interval","low":{"locator":"130:72-130:102","type":"Subtract","operand":[{"localId":"99","locator":"130:61-130:102","name":"LastTimeOfDelivery","libraryName":"PCMaternal","type":"FunctionRef","operand":[{"localId":"98","locator":"130:93-130:101","name":"Encounter","type":"OperandRef"}]},{"localId":"100","locator":"130:37-130:44","value":42,"unit":"weeks","type":"Quantity"}]},"high":{"localId":"99","locator":"130:61-130:102","name":"LastTimeOfDelivery","libraryName":"PCMaternal","type":"FunctionRef","operand":[{"localId":"98","locator":"130:93-130:101","name":"Encounter","type":"OperandRef"}]}}]},{"locator":"130:37-130:52","type":"Not","operand":{"locator":"130:37-130:52","type":"IsNull","operand":{"localId":"99","locator":"130:61-130:102","name":"LastTimeOfDelivery","libraryName":"PCMaternal","type":"FunctionRef","operand":[{"localId":"98","locator":"130:93-130:101","name":"Encounter","type":"OperandRef"}]}}}]},{"localId":"104","locator":"131:13-131:37","type":"Not","operand":{"locator":"131:13-131:37","type":"IsNull","operand":{"localId":"103","locator":"131:13-131:25","path":"result","scope":"Parity","type":"Property"}}}]},"sort":{"localId":"108","locator":"132:7-132:30","by":[{"localId":"107","locator":"132:15-132:30","direction":"asc","path":"relevantDatetime","type":"ByColumn"}]}}}},"asTypeSpecifier":{"localId":"112","locator":"133:15-133:21","name":"{urn:hl7-org:elm-types:r1}Integer","type":"NamedTypeSpecifier"}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"92","locator":"128:40-128:61","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"142","locator":"114:1-119:21","name":"LastHistoryPretermBirth","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"142","s":[{"value":["","define function ","\"LastHistoryPretermBirth\"","(","Encounter"," "]},{"r":"120","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"141","s":[{"r":"141","s":[{"r":"139","s":[{"r":"138","s":[{"value":["Last","("]},{"r":"137","s":[{"s":[{"r":"122","s":[{"r":"121","s":[{"r":"121","s":[{"value":["[","\"Assessment, Performed\"",": "]},{"s":[{"value":["\"[#] Births.preterm\""]}]},{"value":["]"]}]}]},{"value":[" ","PretermBirth"]}]}]},{"value":["\n      "]},{"r":"133","s":[{"value":["where "]},{"r":"133","s":[{"r":"129","s":[{"r":"124","s":[{"r":"123","s":[{"value":["PretermBirth"]}]},{"value":["."]},{"r":"124","s":[{"value":["relevantDatetime"]}]}]},{"value":[" "]},{"r":"129","s":[{"r":"128","s":[{"value":["42 ","weeks"]}]},{"value":[" or less before"]}]},{"value":[" "]},{"r":"127","s":[{"r":"125","s":[{"value":["PCMaternal"]}]},{"value":["."]},{"r":"127","s":[{"value":["\"LastTimeOfDelivery\"","("]},{"r":"126","s":[{"value":["Encounter"]}]},{"value":[")"]}]}]}]},{"value":["\n        and "]},{"r":"132","s":[{"r":"131","s":[{"r":"130","s":[{"value":["PretermBirth"]}]},{"value":["."]},{"r":"131","s":[{"value":["result"]}]}]},{"value":[" is not null"]}]}]}]},{"value":["\n      "]},{"r":"136","s":[{"value":["sort by "]},{"r":"135","s":[{"r":"134","s":[{"value":["relevantDatetime"]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"139","s":[{"value":["result"]}]}]},{"value":[" as "]},{"r":"140","s":[{"value":["Integer"]}]}]}]}]}}],"expression":{"localId":"141","locator":"115:3-119:21","strict":false,"type":"As","operand":{"localId":"139","locator":"115:3-119:10","path":"result","type":"Property","source":{"localId":"138","locator":"115:3-119:3","type":"Last","source":{"localId":"137","locator":"115:8-118:30","type":"Query","source":[{"localId":"122","locator":"115:8-115:67","alias":"PretermBirth","expression":{"localId":"121","locator":"115:8-115:54","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveAssessmentPerformed","templateId":"PositiveAssessmentPerformed","codeProperty":"code","codeComparator":"~","type":"Retrieve","codes":{"type":"ToList","operand":{"locator":"115:34-115:53","name":"[#] Births.preterm","type":"CodeRef"}}}}],"relationship":[],"where":{"localId":"133","locator":"116:7-117:43","type":"And","operand":[{"localId":"129","locator":"116:13-116:108","type":"And","operand":[{"locator":"116:43-116:58","type":"In","operand":[{"localId":"124","locator":"116:13-116:41","path":"relevantDatetime","scope":"PretermBirth","type":"Property"},{"locator":"116:43-116:58","lowClosed":true,"highClosed":false,"type":"Interval","low":{"locator":"116:78-116:108","type":"Subtract","operand":[{"localId":"127","locator":"116:67-116:108","name":"LastTimeOfDelivery","libraryName":"PCMaternal","type":"FunctionRef","operand":[{"localId":"126","locator":"116:99-116:107","name":"Encounter","type":"OperandRef"}]},{"localId":"128","locator":"116:43-116:50","value":42,"unit":"weeks","type":"Quantity"}]},"high":{"localId":"127","locator":"116:67-116:108","name":"LastTimeOfDelivery","libraryName":"PCMaternal","type":"FunctionRef","operand":[{"localId":"126","locator":"116:99-116:107","name":"Encounter","type":"OperandRef"}]}}]},{"locator":"116:43-116:58","type":"Not","operand":{"locator":"116:43-116:58","type":"IsNull","operand":{"localId":"127","locator":"116:67-116:108","name":"LastTimeOfDelivery","libraryName":"PCMaternal","type":"FunctionRef","operand":[{"localId":"126","locator":"116:99-116:107","name":"Encounter","type":"OperandRef"}]}}}]},{"localId":"132","locator":"117:13-117:43","type":"Not","operand":{"locator":"117:13-117:43","type":"IsNull","operand":{"localId":"131","locator":"117:13-117:31","path":"result","scope":"PretermBirth","type":"Property"}}}]},"sort":{"localId":"136","locator":"118:7-118:30","by":[{"localId":"135","locator":"118:15-118:30","direction":"asc","path":"relevantDatetime","type":"ByColumn"}]}}}},"asTypeSpecifier":{"localId":"140","locator":"119:15-119:21","name":"{urn:hl7-org:elm-types:r1}Integer","type":"NamedTypeSpecifier"}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"120","locator":"114:53-114:74","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"169","locator":"121:1-126:21","name":"LastHistoryTermBirth","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"169","s":[{"value":["","define function ","\"LastHistoryTermBirth\"","(","Encounter"," "]},{"r":"147","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"168","s":[{"r":"168","s":[{"r":"166","s":[{"r":"165","s":[{"value":["Last","("]},{"r":"164","s":[{"s":[{"r":"149","s":[{"r":"148","s":[{"r":"148","s":[{"value":["[","\"Assessment, Performed\"",": "]},{"s":[{"value":["\"[#] Births.term\""]}]},{"value":["]"]}]}]},{"value":[" ","TermBirth"]}]}]},{"value":["\n      "]},{"r":"160","s":[{"value":["where "]},{"r":"160","s":[{"r":"156","s":[{"r":"151","s":[{"r":"150","s":[{"value":["TermBirth"]}]},{"value":["."]},{"r":"151","s":[{"value":["relevantDatetime"]}]}]},{"value":[" "]},{"r":"156","s":[{"r":"155","s":[{"value":["42 ","weeks"]}]},{"value":[" or less before"]}]},{"value":[" "]},{"r":"154","s":[{"r":"152","s":[{"value":["PCMaternal"]}]},{"value":["."]},{"r":"154","s":[{"value":["\"LastTimeOfDelivery\"","("]},{"r":"153","s":[{"value":["Encounter"]}]},{"value":[")"]}]}]}]},{"value":["\n        and "]},{"r":"159","s":[{"r":"158","s":[{"r":"157","s":[{"value":["TermBirth"]}]},{"value":["."]},{"r":"158","s":[{"value":["result"]}]}]},{"value":[" is not null"]}]}]}]},{"value":["\n      "]},{"r":"163","s":[{"value":["sort by "]},{"r":"162","s":[{"r":"161","s":[{"value":["relevantDatetime"]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"166","s":[{"value":["result"]}]}]},{"value":[" as "]},{"r":"167","s":[{"value":["Integer"]}]}]}]}]}}],"expression":{"localId":"168","locator":"122:3-126:21","strict":false,"type":"As","operand":{"localId":"166","locator":"122:3-126:10","path":"result","type":"Property","source":{"localId":"165","locator":"122:3-126:3","type":"Last","source":{"localId":"164","locator":"122:8-125:30","type":"Query","source":[{"localId":"149","locator":"122:8-122:61","alias":"TermBirth","expression":{"localId":"148","locator":"122:8-122:51","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveAssessmentPerformed","templateId":"PositiveAssessmentPerformed","codeProperty":"code","codeComparator":"~","type":"Retrieve","codes":{"type":"ToList","operand":{"locator":"122:34-122:50","name":"[#] Births.term","type":"CodeRef"}}}}],"relationship":[],"where":{"localId":"160","locator":"123:7-124:40","type":"And","operand":[{"localId":"156","locator":"123:13-123:105","type":"And","operand":[{"locator":"123:40-123:55","type":"In","operand":[{"localId":"151","locator":"123:13-123:38","path":"relevantDatetime","scope":"TermBirth","type":"Property"},{"locator":"123:40-123:55","lowClosed":true,"highClosed":false,"type":"Interval","low":{"locator":"123:75-123:105","type":"Subtract","operand":[{"localId":"154","locator":"123:64-123:105","name":"LastTimeOfDelivery","libraryName":"PCMaternal","type":"FunctionRef","operand":[{"localId":"153","locator":"123:96-123:104","name":"Encounter","type":"OperandRef"}]},{"localId":"155","locator":"123:40-123:47","value":42,"unit":"weeks","type":"Quantity"}]},"high":{"localId":"154","locator":"123:64-123:105","name":"LastTimeOfDelivery","libraryName":"PCMaternal","type":"FunctionRef","operand":[{"localId":"153","locator":"123:96-123:104","name":"Encounter","type":"OperandRef"}]}}]},{"locator":"123:40-123:55","type":"Not","operand":{"locator":"123:40-123:55","type":"IsNull","operand":{"localId":"154","locator":"123:64-123:105","name":"LastTimeOfDelivery","libraryName":"PCMaternal","type":"FunctionRef","operand":[{"localId":"153","locator":"123:96-123:104","name":"Encounter","type":"OperandRef"}]}}}]},{"localId":"159","locator":"124:13-124:40","type":"Not","operand":{"locator":"124:13-124:40","type":"IsNull","operand":{"localId":"158","locator":"124:13-124:28","path":"result","scope":"TermBirth","type":"Property"}}}]},"sort":{"localId":"163","locator":"125:7-125:30","by":[{"localId":"162","locator":"125:15-125:30","direction":"asc","path":"relevantDatetime","type":"ByColumn"}]}}}},"asTypeSpecifier":{"localId":"167","locator":"126:15-126:21","name":"{urn:hl7-org:elm-types:r1}Integer","type":"NamedTypeSpecifier"}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"147","locator":"121:50-121:71","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"176","locator":"94:1-102:5","name":"Singleton Delivery Encounters at 37 Plus Weeks Gravida 1 Parity 0, No Previous Births","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"176","s":[{"value":["","define ","\"Singleton Delivery Encounters at 37 Plus Weeks Gravida 1 Parity 0, No Previous Births\"",":\n  "]},{"r":"175","s":[{"s":[{"r":"63","s":[{"r":"62","s":[{"value":["( "]},{"r":"62","s":[{"r":"48","s":[{"value":["\"Delivery Encounter with Gestational Age Greater than or Equal to 37 Weeks\""]}]},{"value":["\n    intersect "]},{"r":"61","s":[{"value":["\"Encounter with Singleton Delivery\""]}]}]},{"value":[" )"]}]},{"value":[" ","SingletonEncounterGE37Weeks"]}]}]},{"value":["\n    "]},{"r":"174","s":[{"value":["where "]},{"r":"174","s":[{"value":["( "]},{"r":"174","s":[{"r":"118","s":[{"r":"90","s":[{"value":["( "]},{"r":"90","s":[{"r":"88","s":[{"value":["\"LastGravida\"","("]},{"r":"64","s":[{"value":["SingletonEncounterGE37Weeks"]}]},{"value":[")"]}]},{"r":"89","value":["="," ","1"]}]},{"value":[" )"]}]},{"value":["\n        or "]},{"r":"117","s":[{"value":["( "]},{"r":"117","s":[{"r":"115","s":[{"value":["\"LastParity\"","("]},{"r":"91","s":[{"value":["SingletonEncounterGE37Weeks"]}]},{"value":[")"]}]},{"r":"116","value":["="," ","0"]}]},{"value":[" )"]}]}]},{"value":["\n        or "]},{"r":"173","s":[{"value":["( "]},{"r":"173","s":[{"r":"145","s":[{"value":["( "]},{"r":"145","s":[{"r":"143","s":[{"value":["\"LastHistoryPretermBirth\"","("]},{"r":"119","s":[{"value":["SingletonEncounterGE37Weeks"]}]},{"value":[")"]}]},{"r":"144","value":["="," ","0"]}]},{"value":[" )"]}]},{"value":["\n            and "]},{"r":"172","s":[{"value":["( "]},{"r":"172","s":[{"r":"170","s":[{"value":["\"LastHistoryTermBirth\"","("]},{"r":"146","s":[{"value":["SingletonEncounterGE37Weeks"]}]},{"value":[")"]}]},{"r":"171","value":["="," ","0"]}]},{"value":[" )"]}]}]},{"value":["\n        )"]}]}]},{"value":["\n    )"]}]}]}]}]}}],"expression":{"localId":"175","locator":"95:3-102:5","type":"Query","source":[{"localId":"63","locator":"95:3-96:79","alias":"SingletonEncounterGE37Weeks","expression":{"localId":"62","locator":"95:3-96:51","type":"Intersect","operand":[{"localId":"48","locator":"95:5-95:79","name":"Delivery Encounter with Gestational Age Greater than or Equal to 37 Weeks","type":"ExpressionRef"},{"localId":"61","locator":"96:15-96:49","name":"Encounter with Singleton Delivery","type":"ExpressionRef"}]}}],"relationship":[],"where":{"localId":"174","locator":"97:5-102:5","type":"Or","operand":[{"localId":"118","locator":"97:13-98:59","type":"Or","operand":[{"localId":"90","locator":"97:13-97:61","type":"Equal","operand":[{"localId":"88","locator":"97:15-97:56","name":"LastGravida","type":"FunctionRef","operand":[{"localId":"64","locator":"97:29-97:55","name":"SingletonEncounterGE37Weeks","type":"AliasRef"}]},{"localId":"89","locator":"97:59","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"1","type":"Literal"}]},{"localId":"117","locator":"98:12-98:59","type":"Equal","operand":[{"localId":"115","locator":"98:14-98:54","name":"LastParity","type":"FunctionRef","operand":[{"localId":"91","locator":"98:27-98:53","name":"SingletonEncounterGE37Weeks","type":"AliasRef"}]},{"localId":"116","locator":"98:57","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"0","type":"Literal"}]}]},{"localId":"173","locator":"99:12-101:9","type":"And","operand":[{"localId":"145","locator":"99:14-99:74","type":"Equal","operand":[{"localId":"143","locator":"99:16-99:69","name":"LastHistoryPretermBirth","type":"FunctionRef","operand":[{"localId":"119","locator":"99:42-99:68","name":"SingletonEncounterGE37Weeks","type":"AliasRef"}]},{"localId":"144","locator":"99:72","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"0","type":"Literal"}]},{"localId":"172","locator":"100:17-100:74","type":"Equal","operand":[{"localId":"170","locator":"100:19-100:69","name":"LastHistoryTermBirth","type":"FunctionRef","operand":[{"localId":"146","locator":"100:42-100:68","name":"SingletonEncounterGE37Weeks","type":"AliasRef"}]},{"localId":"171","locator":"100:72","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"0","type":"Literal"}]}]}]}}},{"localId":"219","locator":"54:1-63:157","name":"Encounter with Abnormal Presentation","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"219","s":[{"value":["","define ","\"Encounter with Abnormal Presentation\"",":\n  "]},{"r":"218","s":[{"s":[{"r":"178","s":[{"r":"177","s":[{"s":[{"value":["\"Singleton Delivery Encounters at 37 Plus Weeks Gravida 1 Parity 0, No Previous Births\""]}]}]},{"value":[" ","QualifyingEncounter"]}]}]},{"value":["\n    "]},{"s":[{"value":["let "]},{"r":"199","s":[{"value":["LastAbnormalPresentation",": "]},{"r":"198","s":[{"value":["Last","("]},{"r":"197","s":[{"s":[{"r":"180","s":[{"r":"179","s":[{"r":"179","s":[{"value":["[","\"Assessment, Performed\"",": "]},{"s":[{"value":["\"Abnormal Presentation\""]}]},{"value":["]"]}]}]},{"value":[" ","AbnormalPresentation"]}]}]},{"value":["\n        "]},{"r":"190","s":[{"value":["where "]},{"r":"190","s":[{"r":"186","s":[{"r":"181","s":[{"value":["Global"]}]},{"value":["."]},{"r":"186","s":[{"value":["\"EarliestOf\"","("]},{"r":"183","s":[{"r":"182","s":[{"value":["AbnormalPresentation"]}]},{"value":["."]},{"r":"183","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"185","s":[{"r":"184","s":[{"value":["AbnormalPresentation"]}]},{"value":["."]},{"r":"185","s":[{"value":["relevantPeriod"]}]}]},{"value":[")"]}]}]},{"r":"190","value":["before or on"," "]},{"r":"189","s":[{"r":"187","s":[{"value":["PCMaternal"]}]},{"value":["."]},{"r":"189","s":[{"value":["\"LastTimeOfDelivery\"","("]},{"r":"188","s":[{"value":["QualifyingEncounter"]}]},{"value":[")"]}]}]}]}]},{"value":["\n        "]},{"r":"196","s":[{"value":["sort by "]},{"r":"195","s":[{"r":"194","s":[{"r":"191","s":[{"value":["Global"]}]},{"value":["."]},{"r":"194","s":[{"value":["\"EarliestOf\"","("]},{"r":"192","s":[{"value":["relevantDatetime"]}]},{"value":[", "]},{"r":"193","s":[{"value":["relevantPeriod"]}]},{"value":[")"]}]}]}]}]}]},{"value":["\n    )"]}]}]}]},{"value":["\n    "]},{"r":"217","s":[{"value":["where "]},{"r":"217","s":[{"r":"207","s":[{"value":["exists "]},{"r":"206","s":[{"value":["( "]},{"r":"206","s":[{"s":[{"r":"201","s":[{"r":"200","s":[{"s":[{"value":["QualifyingEncounter",".","diagnoses"]}]}]},{"value":[" ","EncounterDiagnosis"]}]}]},{"value":["\n        "]},{"r":"205","s":[{"value":["where "]},{"r":"205","s":[{"r":"203","s":[{"r":"202","s":[{"value":["EncounterDiagnosis"]}]},{"value":["."]},{"r":"203","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"204","s":[{"value":["\"Abnormal Presentation\""]}]}]}]}]},{"value":["\n    )"]}]}]},{"value":["\n      or "]},{"r":"216","s":[{"r":"213","s":[{"r":"208","s":[{"value":["Global"]}]},{"value":["."]},{"r":"213","s":[{"value":["\"EarliestOf\""," ( "]},{"r":"210","s":[{"r":"209","s":[{"value":["LastAbnormalPresentation"]}]},{"value":["."]},{"r":"210","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"212","s":[{"r":"211","s":[{"value":["LastAbnormalPresentation"]}]},{"value":["."]},{"r":"212","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]},{"r":"216","value":[" ","during"," "]},{"r":"215","s":[{"r":"214","s":[{"value":["QualifyingEncounter"]}]},{"value":["."]},{"r":"215","s":[{"value":["relevantPeriod"]}]}]}]}]}]}]}]}}],"expression":{"localId":"218","locator":"55:3-63:157","type":"Query","source":[{"localId":"178","locator":"55:3-55:109","alias":"QualifyingEncounter","expression":{"localId":"177","locator":"55:3-55:89","name":"Singleton Delivery Encounters at 37 Plus Weeks Gravida 1 Parity 0, No Previous Births","type":"ExpressionRef"}}],"let":[{"localId":"199","locator":"56:9-59:5","identifier":"LastAbnormalPresentation","expression":{"localId":"198","locator":"56:35-59:5","type":"Last","source":{"localId":"197","locator":"56:40-58:69","type":"Query","source":[{"localId":"180","locator":"56:40-56:110","alias":"AbnormalPresentation","expression":{"localId":"179","locator":"56:40-56:89","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveAssessmentPerformed","templateId":"PositiveAssessmentPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"56:66-56:88","name":"Abnormal Presentation","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"190","locator":"57:9-57:174","type":"SameOrBefore","operand":[{"localId":"186","locator":"57:15-57:109","name":"EarliestOf","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"183","locator":"57:35-57:71","path":"relevantDatetime","scope":"AbnormalPresentation","type":"Property"},{"localId":"185","locator":"57:74-57:108","path":"relevantPeriod","scope":"AbnormalPresentation","type":"Property"}]},{"localId":"189","locator":"57:123-57:174","name":"LastTimeOfDelivery","libraryName":"PCMaternal","type":"FunctionRef","operand":[{"localId":"188","locator":"57:155-57:173","name":"QualifyingEncounter","type":"AliasRef"}]}]},"sort":{"localId":"196","locator":"58:9-58:69","by":[{"localId":"195","locator":"58:17-58:69","direction":"asc","type":"ByExpression","expression":{"localId":"194","locator":"58:17-58:69","name":"EarliestOf","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"192","locator":"58:37-58:52","name":"relevantDatetime","type":"IdentifierRef"},{"localId":"193","locator":"58:55-58:68","name":"relevantPeriod","type":"IdentifierRef"}]}}]}}}}],"relationship":[],"where":{"localId":"217","locator":"60:5-63:157","type":"Or","operand":[{"localId":"207","locator":"60:11-62:5","type":"Exists","operand":{"localId":"206","locator":"60:18-62:5","type":"Query","source":[{"localId":"201","locator":"60:20-60:67","alias":"EncounterDiagnosis","expression":{"localId":"200","locator":"60:20-60:48","path":"diagnoses","scope":"QualifyingEncounter","type":"Property"}}],"relationship":[],"where":{"localId":"205","locator":"61:9-61:64","type":"InValueSet","code":{"localId":"203","locator":"61:15-61:37","path":"code","scope":"EncounterDiagnosis","type":"Property"},"valueset":{"localId":"204","locator":"61:42-61:64","name":"Abnormal Presentation","type":"ValueSetRef"}}}},{"localId":"216","locator":"63:10-63:157","type":"In","operand":[{"localId":"213","locator":"63:10-63:115","name":"EarliestOf","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"210","locator":"63:32-63:72","path":"relevantDatetime","type":"Property","source":{"localId":"209","locator":"63:32-63:55","name":"LastAbnormalPresentation","type":"QueryLetRef"}},{"localId":"212","locator":"63:75-63:113","path":"relevantPeriod","type":"Property","source":{"localId":"211","locator":"63:75-63:98","name":"LastAbnormalPresentation","type":"QueryLetRef"}}]},{"localId":"215","locator":"63:124-63:157","path":"relevantPeriod","scope":"QualifyingEncounter","type":"Property"}]}]}}},{"localId":"232","locator":"65:1-68:56","name":"Encounter with Placenta Previa","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"232","s":[{"value":["","define ","\"Encounter with Placenta Previa\"",":\n  "]},{"r":"231","s":[{"s":[{"r":"222","s":[{"r":"221","s":[{"s":[{"value":["\"Singleton Delivery Encounters at 37 Plus Weeks Gravida 1 Parity 0, No Previous Births\""]}]}]},{"value":[" ","QualifyingEncounter"]}]}]},{"value":["\n    "]},{"r":"230","s":[{"value":["where "]},{"r":"230","s":[{"value":["exists "]},{"r":"229","s":[{"s":[{"r":"224","s":[{"r":"223","s":[{"s":[{"value":["QualifyingEncounter",".","diagnoses"]}]}]},{"value":[" ","EncounterDiagnosis"]}]}]},{"value":["\n      "]},{"r":"228","s":[{"value":["where "]},{"r":"228","s":[{"r":"226","s":[{"r":"225","s":[{"value":["EncounterDiagnosis"]}]},{"value":["."]},{"r":"226","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"227","s":[{"value":["\"Placenta Previa\""]}]}]}]}]}]}]}]}]}}],"expression":{"localId":"231","locator":"66:3-68:56","type":"Query","source":[{"localId":"222","locator":"66:3-66:109","alias":"QualifyingEncounter","expression":{"localId":"221","locator":"66:3-66:89","name":"Singleton Delivery Encounters at 37 Plus Weeks Gravida 1 Parity 0, No Previous Births","type":"ExpressionRef"}}],"relationship":[],"where":{"localId":"230","locator":"67:5-68:56","type":"Exists","operand":{"localId":"229","locator":"67:18-68:56","type":"Query","source":[{"localId":"224","locator":"67:18-67:65","alias":"EncounterDiagnosis","expression":{"localId":"223","locator":"67:18-67:46","path":"diagnoses","scope":"QualifyingEncounter","type":"Property"}}],"relationship":[],"where":{"localId":"228","locator":"68:7-68:56","type":"InValueSet","code":{"localId":"226","locator":"68:13-68:35","path":"code","scope":"EncounterDiagnosis","type":"Property"},"valueset":{"localId":"227","locator":"68:40-68:56","name":"Placenta Previa","type":"ValueSetRef"}}}}}},{"localId":"235","locator":"26:1-28:42","name":"Delivery Encounter with Abnormal Presentation or Placenta Previa","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"235","s":[{"value":["","define ","\"Delivery Encounter with Abnormal Presentation or Placenta Previa\"",":\n  "]},{"r":"234","s":[{"r":"220","s":[{"value":["\"Encounter with Abnormal Presentation\""]}]},{"value":["\n    union "]},{"r":"233","s":[{"value":["\"Encounter with Placenta Previa\""]}]}]}]}}],"expression":{"localId":"234","locator":"27:3-28:42","type":"Union","operand":[{"localId":"220","locator":"27:3-27:40","name":"Encounter with Abnormal Presentation","type":"ExpressionRef"},{"localId":"233","locator":"28:11-28:42","name":"Encounter with Placenta Previa","type":"ExpressionRef"}]}},{"localId":"252","locator":"34:1-37:182","name":"Delivery Encounter with Cesarean Birth","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"252","s":[{"value":["","define ","\"Delivery Encounter with Cesarean Birth\"",":\n  "]},{"r":"251","s":[{"s":[{"r":"237","s":[{"r":"236","s":[{"s":[{"value":["\"Singleton Delivery Encounters at 37 Plus Weeks Gravida 1 Parity 0, No Previous Births\""]}]}]},{"value":[" ","QualifyingEncounter"]}]}]},{"value":["\n    "]},{"r":"250","s":[{"value":["with "]},{"r":"239","s":[{"r":"238","s":[{"r":"238","s":[{"value":["[","\"Procedure, Performed\"",": "]},{"s":[{"value":["\"Cesarean Birth\""]}]},{"value":["]"]}]}]},{"value":[" ","CSection"]}]},{"value":["\n      such that "]},{"r":"249","s":[{"r":"245","s":[{"r":"240","s":[{"value":["Global"]}]},{"value":["."]},{"r":"245","s":[{"value":["\"NormalizeInterval\""," ( "]},{"r":"242","s":[{"r":"241","s":[{"value":["CSection"]}]},{"value":["."]},{"r":"242","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"244","s":[{"r":"243","s":[{"value":["CSection"]}]},{"value":["."]},{"r":"244","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]},{"r":"249","value":[" ","during"," "]},{"r":"248","s":[{"r":"246","s":[{"value":["PCMaternal"]}]},{"value":["."]},{"r":"248","s":[{"value":["\"HospitalizationWithEDOBTriageObservation\""," ( "]},{"r":"247","s":[{"value":["QualifyingEncounter"]}]},{"value":[" )"]}]}]}]}]}]}]}}],"expression":{"localId":"251","locator":"35:3-37:182","type":"Query","source":[{"localId":"237","locator":"35:3-35:109","alias":"QualifyingEncounter","expression":{"localId":"236","locator":"35:3-35:89","name":"Singleton Delivery Encounters at 37 Plus Weeks Gravida 1 Parity 0, No Previous Births","type":"ExpressionRef"}}],"relationship":[{"localId":"250","locator":"36:5-37:182","alias":"CSection","type":"With","expression":{"localId":"238","locator":"36:10-36:51","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveProcedurePerformed","templateId":"PositiveProcedurePerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"36:35-36:50","name":"Cesarean Birth","type":"ValueSetRef"}},"suchThat":{"localId":"249","locator":"37:17-37:182","type":"IncludedIn","operand":[{"localId":"245","locator":"37:17-37:97","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"242","locator":"37:46-37:70","path":"relevantDatetime","scope":"CSection","type":"Property"},{"localId":"244","locator":"37:73-37:95","path":"relevantPeriod","scope":"CSection","type":"Property"}]},{"localId":"248","locator":"37:106-37:182","name":"HospitalizationWithEDOBTriageObservation","libraryName":"PCMaternal","type":"FunctionRef","operand":[{"localId":"247","locator":"37:162-37:180","name":"QualifyingEncounter","type":"AliasRef"}]}]}}]}},{"localId":"254","locator":"48:1-49:89","name":"Denominator","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"254","s":[{"value":["","define ","\"Denominator\"",":\n  "]},{"r":"253","s":[{"value":["\"Singleton Delivery Encounters at 37 Plus Weeks Gravida 1 Parity 0, No Previous Births\""]}]}]}}],"expression":{"localId":"253","locator":"49:3-49:89","name":"Singleton Delivery Encounters at 37 Plus Weeks Gravida 1 Parity 0, No Previous Births","type":"ExpressionRef"}},{"localId":"256","locator":"51:1-52:68","name":"Denominator Exclusions","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"256","s":[{"value":["","define ","\"Denominator Exclusions\"",":\n  "]},{"r":"255","s":[{"value":["\"Delivery Encounter with Abnormal Presentation or Placenta Previa\""]}]}]}}],"expression":{"localId":"255","locator":"52:3-52:68","name":"Delivery Encounter with Abnormal Presentation or Placenta Previa","type":"ExpressionRef"}},{"localId":"259","locator":"76:1-77:48","name":"Initial Population","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"259","s":[{"value":["","define ","\"Initial Population\"",":\n  "]},{"r":"258","s":[{"r":"257","s":[{"value":["PCMaternal"]}]},{"value":["."]},{"r":"258","s":[{"value":["\"Delivery Encounter with Age Range\""]}]}]}]}}],"expression":{"localId":"258","locator":"77:3-77:48","name":"Delivery Encounter with Age Range","libraryName":"PCMaternal","type":"ExpressionRef"}},{"localId":"261","locator":"79:1-80:42","name":"Numerator","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"261","s":[{"value":["","define ","\"Numerator\"",":\n  "]},{"r":"260","s":[{"value":["\"Delivery Encounter with Cesarean Birth\""]}]}]}}],"expression":{"localId":"260","locator":"80:3-80:42","name":"Delivery Encounter with Cesarean Birth","type":"ExpressionRef"}},{"localId":"263","locator":"82:1-83:51","name":"SDE Ethnicity","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"263","s":[{"value":["","define ","\"SDE Ethnicity\"",":\n  "]},{"r":"262","s":[{"value":["[","\"Patient Characteristic Ethnicity\"",": "]},{"s":[{"value":["\"Ethnicity\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"262","locator":"83:3-83:51","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicEthnicity","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"83:40-83:50","name":"Ethnicity","type":"ValueSetRef"}}},{"localId":"265","locator":"85:1-86:43","name":"SDE Payer","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"265","s":[{"value":["","define ","\"SDE Payer\"",":\n  "]},{"r":"264","s":[{"value":["[","\"Patient Characteristic Payer\"",": "]},{"s":[{"value":["\"Payer\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"264","locator":"86:3-86:43","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicPayer","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"86:36-86:42","name":"Payer","type":"ValueSetRef"}}},{"localId":"267","locator":"88:1-89:41","name":"SDE Race","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"267","s":[{"value":["","define ","\"SDE Race\"",":\n  "]},{"r":"266","s":[{"value":["[","\"Patient Characteristic Race\"",": "]},{"s":[{"value":["\"Race\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"266","locator":"89:3-89:41","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicRace","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"89:35-89:40","name":"Race","type":"ValueSetRef"}}},{"localId":"269","locator":"91:1-92:58","name":"SDE Sex","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"269","s":[{"value":["","define ","\"SDE Sex\"",":\n  "]},{"r":"268","s":[{"value":["[","\"Patient Characteristic Sex\"",": "]},{"s":[{"value":["\"ONC Administrative Sex\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"268","locator":"92:3-92:58","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicSex","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"92:34-92:57","name":"ONC Administrative Sex","type":"ValueSetRef"}}},{"localId":"272","locator":"104:1-105:50","name":"Variable Calculated Gestational Age","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"272","s":[{"value":["","define ","\"Variable Calculated Gestational Age\"",":\n  "]},{"r":"271","s":[{"r":"270","s":[{"value":["PCMaternal"]}]},{"value":["."]},{"r":"271","s":[{"value":["\"Variable Calculated Gestational Age\""]}]}]}]}}],"expression":{"localId":"271","locator":"105:3-105:50","name":"Variable Calculated Gestational Age","libraryName":"PCMaternal","type":"ExpressionRef"}}]}}},"elm_annotations":{"statements":[{"children":[{"children":[{"children":[{"text":"define \"Delivery Encounter with Calculated Gestational Age Greater than or Equal to 37 Weeks\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"PCMaternal.\"Delivery Encounter with Age Range\""}]}]}],"node_type":"ExpressionRef","ref_id":"21"},{"children":[{"text":" DeliveryEncounter"}]}],"ref_id":"22"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"PCMaternal"}]}],"ref_id":"23"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"CalculatedGestationalAge\" ( "}]},{"children":[{"children":[{"text":"DeliveryEncounter"}]}],"node_type":"AliasRef","ref_id":"24"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"25"}],"node_type":"FunctionRef","ref_id":"25"},{"children":[{"text":" \u003e= 37"}],"node_type":"Literal","ref_id":"26"}],"ref_id":"27"}],"ref_id":"27"}],"node_type":"Query","ref_id":"28"}],"ref_id":"29"}],"define_name":"Delivery Encounter with Calculated Gestational Age Greater than or Equal to 37 Weeks"},{"children":[{"children":[{"children":[{"text":"define \"Delivery Encounter with Estimated Gestational Age Greater than or Equal to 37 Weeks\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"PCMaternal.\"Delivery Encounter with Age Range\""}]}]}],"node_type":"ExpressionRef","ref_id":"31"},{"children":[{"text":" DeliveryEncounter"}]}],"ref_id":"32"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"PCMaternal"}]}],"ref_id":"33"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"CalculatedGestationalAge\" ( "}]},{"children":[{"children":[{"text":"DeliveryEncounter"}]}],"node_type":"AliasRef","ref_id":"34"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"35"}],"node_type":"FunctionRef","ref_id":"35"},{"children":[{"text":" is null"}]}],"node_type":"IsNull","ref_id":"36"},{"children":[{"text":"\n      and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"PCMaternal"}]}],"ref_id":"37"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"LastEstimatedGestationalAge\" ( "}]},{"children":[{"children":[{"text":"DeliveryEncounter"}]}],"node_type":"AliasRef","ref_id":"38"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"39"}],"node_type":"FunctionRef","ref_id":"39"},{"children":[{"text":" \u003e= "}]},{"children":[{"children":[{"text":"37 weeks"}]}],"node_type":"Quantity","ref_id":"40"}],"node_type":"GreaterOrEqual","ref_id":"41"}],"ref_id":"42"}],"ref_id":"42"}],"node_type":"Query","ref_id":"43"}],"ref_id":"44"}],"define_name":"Delivery Encounter with Estimated Gestational Age Greater than or Equal to 37 Weeks"},{"children":[{"children":[{"children":[{"text":"define \"Delivery Encounter with Gestational Age Greater than or Equal to 37 Weeks\":\n  "}]},{"children":[{"children":[{"children":[{"text":"\"Delivery Encounter with Calculated Gestational Age Greater than or Equal to 37 Weeks\""}]}],"node_type":"ExpressionRef","ref_id":"30"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"\"Delivery Encounter with Estimated Gestational Age Greater than or Equal to 37 Weeks\""}]}],"node_type":"ExpressionRef","ref_id":"45"}],"node_type":"Union","ref_id":"46"}],"ref_id":"47"}],"define_name":"Delivery Encounter with Gestational Age Greater than or Equal to 37 Weeks"},{"children":[{"children":[{"children":[{"text":"define \"Encounter with Singleton Delivery\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"PCMaternal.\"Delivery Encounter with Age Range\""}]}]}],"node_type":"ExpressionRef","ref_id":"49"},{"children":[{"text":" DeliveryEncounter"}]}],"ref_id":"50"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"DeliveryEncounter.diagnoses"}]}]}],"node_type":"Property","ref_id":"51"},{"children":[{"text":" EncounterDiagnoses"}]}],"ref_id":"52"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"EncounterDiagnoses"}]}],"ref_id":"53"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"54"}],"ref_id":"54"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Delivery of Singleton\""}]}],"ref_id":"55"}],"ref_id":"56"}],"ref_id":"56"}],"node_type":"Query","ref_id":"57"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"57"}],"ref_id":"58"}],"ref_id":"58"}],"node_type":"Query","ref_id":"59"}],"ref_id":"60"}],"define_name":"Encounter with Singleton Delivery"},{"children":[{"children":[{"children":[{"text":"define function \"LastGravida\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"65"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Assessment, Performed\": "}]},{"children":[{"children":[{"text":"\"[#] Pregnancies\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"66"}],"node_type":"Retrieve","ref_id":"66"},{"children":[{"text":" Gravida"}]}],"ref_id":"67"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Gravida"}]}],"ref_id":"68"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"69"}],"node_type":"Property","ref_id":"69"},{"children":[{"text":" "}]},{"children":[{"children":[{"children":[{"text":"42 weeks"}]}],"node_type":"Quantity","ref_id":"73"},{"children":[{"text":" or less before"}]}],"node_type":"And","ref_id":"74"},{"children":[{"text":" "}]},{"children":[{"children":[{"children":[{"text":"PCMaternal"}]}],"ref_id":"70"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"LastTimeOfDelivery\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"71"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"72"}],"node_type":"FunctionRef","ref_id":"72"}],"node_type":"And","ref_id":"74"},{"children":[{"text":"\n        and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Gravida"}]}],"ref_id":"75"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"result"}]}],"node_type":"Property","ref_id":"76"}],"node_type":"Property","ref_id":"76"},{"children":[{"text":" is not null"}]}],"node_type":"Not","ref_id":"77"}],"ref_id":"78"}],"ref_id":"78"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"relevantDatetime"}]}],"ref_id":"79"}],"ref_id":"80"}],"ref_id":"81"}],"ref_id":"82"},{"children":[{"text":"\n  )"}]}],"ref_id":"83"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"result"}]}],"node_type":"Property","ref_id":"84"}],"node_type":"Property","ref_id":"84"},{"children":[{"text":" as "}]},{"children":[{"children":[{"text":"Integer"}]}],"ref_id":"85"}],"node_type":"As","ref_id":"86"}],"node_type":"As","ref_id":"86"}],"ref_id":"87"}],"define_name":"LastGravida"},{"children":[{"children":[{"children":[{"text":"define function \"LastParity\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"92"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Assessment, Performed\": "}]},{"children":[{"children":[{"text":"\"[#] Parity\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"93"}],"node_type":"Retrieve","ref_id":"93"},{"children":[{"text":" Parity"}]}],"ref_id":"94"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Parity"}]}],"ref_id":"95"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"96"}],"node_type":"Property","ref_id":"96"},{"children":[{"text":" "}]},{"children":[{"children":[{"children":[{"text":"42 weeks"}]}],"node_type":"Quantity","ref_id":"100"},{"children":[{"text":" or less before"}]}],"node_type":"And","ref_id":"101"},{"children":[{"text":" "}]},{"children":[{"children":[{"children":[{"text":"PCMaternal"}]}],"ref_id":"97"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"LastTimeOfDelivery\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"98"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"99"}],"node_type":"FunctionRef","ref_id":"99"}],"node_type":"And","ref_id":"101"},{"children":[{"text":"\n        and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Parity"}]}],"ref_id":"102"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"result"}]}],"node_type":"Property","ref_id":"103"}],"node_type":"Property","ref_id":"103"},{"children":[{"text":" is not null"}]}],"node_type":"Not","ref_id":"104"}],"ref_id":"105"}],"ref_id":"105"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"relevantDatetime"}]}],"ref_id":"106"}],"ref_id":"107"}],"ref_id":"108"}],"ref_id":"109"},{"children":[{"text":"\n  )"}]}],"ref_id":"110"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"result"}]}],"node_type":"Property","ref_id":"111"}],"node_type":"Property","ref_id":"111"},{"children":[{"text":" as "}]},{"children":[{"children":[{"text":"Integer"}]}],"ref_id":"112"}],"node_type":"As","ref_id":"113"}],"node_type":"As","ref_id":"113"}],"ref_id":"114"}],"define_name":"LastParity"},{"children":[{"children":[{"children":[{"text":"define function \"LastHistoryPretermBirth\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"120"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Assessment, Performed\": "}]},{"children":[{"children":[{"text":"\"[#] Births.preterm\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"121"}],"node_type":"Retrieve","ref_id":"121"},{"children":[{"text":" PretermBirth"}]}],"ref_id":"122"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"PretermBirth"}]}],"ref_id":"123"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"124"}],"node_type":"Property","ref_id":"124"},{"children":[{"text":" "}]},{"children":[{"children":[{"children":[{"text":"42 weeks"}]}],"node_type":"Quantity","ref_id":"128"},{"children":[{"text":" or less before"}]}],"node_type":"And","ref_id":"129"},{"children":[{"text":" "}]},{"children":[{"children":[{"children":[{"text":"PCMaternal"}]}],"ref_id":"125"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"LastTimeOfDelivery\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"126"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"127"}],"node_type":"FunctionRef","ref_id":"127"}],"node_type":"And","ref_id":"129"},{"children":[{"text":"\n        and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"PretermBirth"}]}],"ref_id":"130"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"result"}]}],"node_type":"Property","ref_id":"131"}],"node_type":"Property","ref_id":"131"},{"children":[{"text":" is not null"}]}],"node_type":"Not","ref_id":"132"}],"ref_id":"133"}],"ref_id":"133"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"relevantDatetime"}]}],"ref_id":"134"}],"ref_id":"135"}],"ref_id":"136"}],"ref_id":"137"},{"children":[{"text":"\n  )"}]}],"ref_id":"138"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"result"}]}],"node_type":"Property","ref_id":"139"}],"node_type":"Property","ref_id":"139"},{"children":[{"text":" as "}]},{"children":[{"children":[{"text":"Integer"}]}],"ref_id":"140"}],"node_type":"As","ref_id":"141"}],"node_type":"As","ref_id":"141"}],"ref_id":"142"}],"define_name":"LastHistoryPretermBirth"},{"children":[{"children":[{"children":[{"text":"define function \"LastHistoryTermBirth\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"147"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Assessment, Performed\": "}]},{"children":[{"children":[{"text":"\"[#] Births.term\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"148"}],"node_type":"Retrieve","ref_id":"148"},{"children":[{"text":" TermBirth"}]}],"ref_id":"149"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"TermBirth"}]}],"ref_id":"150"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"151"}],"node_type":"Property","ref_id":"151"},{"children":[{"text":" "}]},{"children":[{"children":[{"children":[{"text":"42 weeks"}]}],"node_type":"Quantity","ref_id":"155"},{"children":[{"text":" or less before"}]}],"node_type":"And","ref_id":"156"},{"children":[{"text":" "}]},{"children":[{"children":[{"children":[{"text":"PCMaternal"}]}],"ref_id":"152"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"LastTimeOfDelivery\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"153"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"154"}],"node_type":"FunctionRef","ref_id":"154"}],"node_type":"And","ref_id":"156"},{"children":[{"text":"\n        and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"TermBirth"}]}],"ref_id":"157"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"result"}]}],"node_type":"Property","ref_id":"158"}],"node_type":"Property","ref_id":"158"},{"children":[{"text":" is not null"}]}],"node_type":"Not","ref_id":"159"}],"ref_id":"160"}],"ref_id":"160"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"relevantDatetime"}]}],"ref_id":"161"}],"ref_id":"162"}],"ref_id":"163"}],"ref_id":"164"},{"children":[{"text":"\n  )"}]}],"ref_id":"165"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"result"}]}],"node_type":"Property","ref_id":"166"}],"node_type":"Property","ref_id":"166"},{"children":[{"text":" as "}]},{"children":[{"children":[{"text":"Integer"}]}],"ref_id":"167"}],"node_type":"As","ref_id":"168"}],"node_type":"As","ref_id":"168"}],"ref_id":"169"}],"define_name":"LastHistoryTermBirth"},{"children":[{"children":[{"children":[{"text":"define \"Singleton Delivery Encounters at 37 Plus Weeks Gravida 1 Parity 0, No Previous Births\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"text":"\"Delivery Encounter with Gestational Age Greater than or Equal to 37 Weeks\""}]}],"node_type":"ExpressionRef","ref_id":"48"},{"children":[{"text":"\n    intersect "}]},{"children":[{"children":[{"text":"\"Encounter with Singleton Delivery\""}]}],"node_type":"ExpressionRef","ref_id":"61"}],"node_type":"Intersect","ref_id":"62"},{"children":[{"text":" )"}]}],"node_type":"Intersect","ref_id":"62"},{"children":[{"text":" SingletonEncounterGE37Weeks"}]}],"ref_id":"63"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"text":"\"LastGravida\"("}]},{"children":[{"children":[{"text":"SingletonEncounterGE37Weeks"}]}],"node_type":"AliasRef","ref_id":"64"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"88"},{"children":[{"text":"= 1"}],"node_type":"Literal","ref_id":"89"}],"node_type":"Equal","ref_id":"90"},{"children":[{"text":" )"}]}],"node_type":"Equal","ref_id":"90"},{"children":[{"text":"\n        or "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"text":"\"LastParity\"("}]},{"children":[{"children":[{"text":"SingletonEncounterGE37Weeks"}]}],"node_type":"AliasRef","ref_id":"91"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"115"},{"children":[{"text":"= 0"}],"node_type":"Literal","ref_id":"116"}],"node_type":"Equal","ref_id":"117"},{"children":[{"text":" )"}]}],"node_type":"Equal","ref_id":"117"}],"node_type":"Or","ref_id":"118"},{"children":[{"text":"\n        or "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"text":"\"LastHistoryPretermBirth\"("}]},{"children":[{"children":[{"text":"SingletonEncounterGE37Weeks"}]}],"node_type":"AliasRef","ref_id":"119"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"143"},{"children":[{"text":"= 0"}],"node_type":"Literal","ref_id":"144"}],"node_type":"Equal","ref_id":"145"},{"children":[{"text":" )"}]}],"node_type":"Equal","ref_id":"145"},{"children":[{"text":"\n            and "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"text":"\"LastHistoryTermBirth\"("}]},{"children":[{"children":[{"text":"SingletonEncounterGE37Weeks"}]}],"node_type":"AliasRef","ref_id":"146"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"170"},{"children":[{"text":"= 0"}],"node_type":"Literal","ref_id":"171"}],"node_type":"Equal","ref_id":"172"},{"children":[{"text":" )"}]}],"node_type":"Equal","ref_id":"172"}],"node_type":"And","ref_id":"173"},{"children":[{"text":"\n        )"}]}],"node_type":"And","ref_id":"173"}],"ref_id":"174"},{"children":[{"text":"\n    )"}]}],"ref_id":"174"}],"ref_id":"174"}],"node_type":"Query","ref_id":"175"}],"ref_id":"176"}],"define_name":"Singleton Delivery Encounters at 37 Plus Weeks Gravida 1 Parity 0, No Previous Births"},{"children":[{"children":[{"children":[{"text":"define \"Encounter with Abnormal Presentation\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Singleton Delivery Encounters at 37 Plus Weeks Gravida 1 Parity 0, No Previous Births\""}]}]}],"node_type":"ExpressionRef","ref_id":"177"},{"children":[{"text":" QualifyingEncounter"}]}],"ref_id":"178"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"LastAbnormalPresentation: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Assessment, Performed\": "}]},{"children":[{"children":[{"text":"\"Abnormal Presentation\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"179"}],"node_type":"Retrieve","ref_id":"179"},{"children":[{"text":" AbnormalPresentation"}]}],"ref_id":"180"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"181"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"EarliestOf\"("}]},{"children":[{"children":[{"children":[{"text":"AbnormalPresentation"}]}],"ref_id":"182"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"183"}],"node_type":"Property","ref_id":"183"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"AbnormalPresentation"}]}],"ref_id":"184"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"185"}],"node_type":"Property","ref_id":"185"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"186"}],"node_type":"FunctionRef","ref_id":"186"},{"children":[{"text":"before or on "}],"ref_id":"190"},{"children":[{"children":[{"children":[{"text":"PCMaternal"}]}],"ref_id":"187"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"LastTimeOfDelivery\"("}]},{"children":[{"children":[{"text":"QualifyingEncounter"}]}],"node_type":"AliasRef","ref_id":"188"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"189"}],"node_type":"FunctionRef","ref_id":"189"}],"ref_id":"190"}],"ref_id":"190"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"191"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"EarliestOf\"("}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"IdentifierRef","ref_id":"192"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"193"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"194"}],"node_type":"FunctionRef","ref_id":"194"}],"ref_id":"195"}],"ref_id":"196"}],"ref_id":"197"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"198"}],"ref_id":"199"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"QualifyingEncounter.diagnoses"}]}]}],"node_type":"Property","ref_id":"200"},{"children":[{"text":" EncounterDiagnosis"}]}],"ref_id":"201"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"EncounterDiagnosis"}]}],"ref_id":"202"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"203"}],"ref_id":"203"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Abnormal Presentation\""}]}],"ref_id":"204"}],"ref_id":"205"}],"ref_id":"205"}],"node_type":"Query","ref_id":"206"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"206"}],"node_type":"Exists","ref_id":"207"},{"children":[{"text":"\n      or "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"208"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"EarliestOf\" ( "}]},{"children":[{"children":[{"children":[{"text":"LastAbnormalPresentation"}]}],"ref_id":"209"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"210"}],"node_type":"Property","ref_id":"210"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"LastAbnormalPresentation"}]}],"ref_id":"211"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"212"}],"node_type":"Property","ref_id":"212"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"213"}],"node_type":"FunctionRef","ref_id":"213"},{"children":[{"text":" during "}],"node_type":"In","ref_id":"216"},{"children":[{"children":[{"children":[{"text":"QualifyingEncounter"}]}],"ref_id":"214"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"215"}],"node_type":"Property","ref_id":"215"}],"node_type":"In","ref_id":"216"}],"ref_id":"217"}],"ref_id":"217"}],"node_type":"Query","ref_id":"218"}],"ref_id":"219"}],"define_name":"Encounter with Abnormal Presentation"},{"children":[{"children":[{"children":[{"text":"define \"Encounter with Placenta Previa\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Singleton Delivery Encounters at 37 Plus Weeks Gravida 1 Parity 0, No Previous Births\""}]}]}],"node_type":"ExpressionRef","ref_id":"221"},{"children":[{"text":" QualifyingEncounter"}]}],"ref_id":"222"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"QualifyingEncounter.diagnoses"}]}]}],"node_type":"Property","ref_id":"223"},{"children":[{"text":" EncounterDiagnosis"}]}],"ref_id":"224"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"EncounterDiagnosis"}]}],"ref_id":"225"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"226"}],"ref_id":"226"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Placenta Previa\""}]}],"ref_id":"227"}],"ref_id":"228"}],"ref_id":"228"}],"node_type":"Query","ref_id":"229"}],"ref_id":"230"}],"ref_id":"230"}],"node_type":"Query","ref_id":"231"}],"ref_id":"232"}],"define_name":"Encounter with Placenta Previa"},{"children":[{"children":[{"children":[{"text":"define \"Delivery Encounter with Abnormal Presentation or Placenta Previa\":\n  "}]},{"children":[{"children":[{"children":[{"text":"\"Encounter with Abnormal Presentation\""}]}],"node_type":"ExpressionRef","ref_id":"220"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"\"Encounter with Placenta Previa\""}]}],"node_type":"ExpressionRef","ref_id":"233"}],"node_type":"Union","ref_id":"234"}],"ref_id":"235"}],"define_name":"Delivery Encounter with Abnormal Presentation or Placenta Previa"},{"children":[{"children":[{"children":[{"text":"define \"Delivery Encounter with Cesarean Birth\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Singleton Delivery Encounters at 37 Plus Weeks Gravida 1 Parity 0, No Previous Births\""}]}]}],"node_type":"ExpressionRef","ref_id":"236"},{"children":[{"text":" QualifyingEncounter"}]}],"ref_id":"237"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"[\"Procedure, Performed\": "}]},{"children":[{"children":[{"text":"\"Cesarean Birth\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"238"}],"node_type":"Retrieve","ref_id":"238"},{"children":[{"text":" CSection"}]}],"ref_id":"239"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"240"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\" ( "}]},{"children":[{"children":[{"children":[{"text":"CSection"}]}],"ref_id":"241"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"242"}],"node_type":"Property","ref_id":"242"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"CSection"}]}],"ref_id":"243"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"244"}],"node_type":"Property","ref_id":"244"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"245"}],"node_type":"FunctionRef","ref_id":"245"},{"children":[{"text":" during "}],"node_type":"IncludedIn","ref_id":"249"},{"children":[{"children":[{"children":[{"text":"PCMaternal"}]}],"ref_id":"246"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"HospitalizationWithEDOBTriageObservation\" ( "}]},{"children":[{"children":[{"text":"QualifyingEncounter"}]}],"node_type":"AliasRef","ref_id":"247"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"248"}],"node_type":"FunctionRef","ref_id":"248"}],"node_type":"IncludedIn","ref_id":"249"}],"ref_id":"250"}],"node_type":"Query","ref_id":"251"}],"ref_id":"252"}],"define_name":"Delivery Encounter with Cesarean Birth"},{"children":[{"children":[{"children":[{"text":"define \"Denominator\":\n  "}]},{"children":[{"children":[{"text":"\"Singleton Delivery Encounters at 37 Plus Weeks Gravida 1 Parity 0, No Previous Births\""}]}],"node_type":"ExpressionRef","ref_id":"253"}],"ref_id":"254"}],"define_name":"Denominator"},{"children":[{"children":[{"children":[{"text":"define \"Denominator Exclusions\":\n  "}]},{"children":[{"children":[{"text":"\"Delivery Encounter with Abnormal Presentation or Placenta Previa\""}]}],"node_type":"ExpressionRef","ref_id":"255"}],"ref_id":"256"}],"define_name":"Denominator Exclusions"},{"children":[{"children":[{"children":[{"text":"define \"Initial Population\":\n  "}]},{"children":[{"children":[{"children":[{"text":"PCMaternal"}]}],"ref_id":"257"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"Delivery Encounter with Age Range\""}]}],"node_type":"ExpressionRef","ref_id":"258"}],"node_type":"ExpressionRef","ref_id":"258"}],"ref_id":"259"}],"define_name":"Initial Population"},{"children":[{"children":[{"children":[{"text":"define \"Numerator\":\n  "}]},{"children":[{"children":[{"text":"\"Delivery Encounter with Cesarean Birth\""}]}],"node_type":"ExpressionRef","ref_id":"260"}],"ref_id":"261"}],"define_name":"Numerator"},{"children":[{"children":[{"children":[{"text":"define \"SDE Ethnicity\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Ethnicity\": "}]},{"children":[{"children":[{"text":"\"Ethnicity\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"262"}],"ref_id":"263"}],"define_name":"SDE Ethnicity"},{"children":[{"children":[{"children":[{"text":"define \"SDE Payer\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Payer\": "}]},{"children":[{"children":[{"text":"\"Payer\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"264"}],"ref_id":"265"}],"define_name":"SDE Payer"},{"children":[{"children":[{"children":[{"text":"define \"SDE Race\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Race\": "}]},{"children":[{"children":[{"text":"\"Race\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"266"}],"ref_id":"267"}],"define_name":"SDE Race"},{"children":[{"children":[{"children":[{"text":"define \"SDE Sex\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Sex\": "}]},{"children":[{"children":[{"text":"\"ONC Administrative Sex\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"268"}],"ref_id":"269"}],"define_name":"SDE Sex"},{"children":[{"children":[{"children":[{"text":"define \"Variable Calculated Gestational Age\":\n  "}]},{"children":[{"children":[{"children":[{"text":"PCMaternal"}]}],"ref_id":"270"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"Variable Calculated Gestational Age\""}]}],"node_type":"ExpressionRef","ref_id":"271"}],"node_type":"ExpressionRef","ref_id":"271"}],"ref_id":"272"}],"define_name":"Variable Calculated Gestational Age"}],"identifier":{"id":"CesareanBirth","version":"4.0.000"}},"is_main_library":true,"is_top_level":true,"library_name":"CesareanBirth","library_version":"4.0.000","statement_dependencies":[{"_id":"689267b3e8da6d1c0d5102fb","statement_name":"Patient"},{"_id":"689267b3e8da6d1c0d5102fc","statement_name":"Delivery Encounter with Calculated Gestational Age Greater than or Equal to 37 Weeks","statement_references":[{"_id":"689267b3e8da6d1c0d5102e6","hqmf_id":null,"library_name":"PCMaternal","statement_name":"Delivery Encounter with Age Range"},{"_id":"689267b3e8da6d1c0d5102e7","hqmf_id":null,"library_name":"PCMaternal","statement_name":"CalculatedGestationalAge"}]},{"_id":"689267b3e8da6d1c0d5102fd","statement_name":"Delivery Encounter with Estimated Gestational Age Greater than or Equal to 37 Weeks","statement_references":[{"_id":"689267b3e8da6d1c0d5102e8","hqmf_id":null,"library_name":"PCMaternal","statement_name":"Delivery Encounter with Age Range"},{"_id":"689267b3e8da6d1c0d5102e9","hqmf_id":null,"library_name":"PCMaternal","statement_name":"CalculatedGestationalAge"},{"_id":"689267b3e8da6d1c0d5102ea","hqmf_id":null,"library_name":"PCMaternal","statement_name":"LastEstimatedGestationalAge"}]},{"_id":"689267b3e8da6d1c0d5102fe","statement_name":"Delivery Encounter with Gestational Age Greater than or Equal to 37 Weeks","statement_references":[{"_id":"689267b3e8da6d1c0d5102eb","hqmf_id":null,"library_name":"CesareanBirth","statement_name":"Delivery Encounter with Calculated Gestational Age Greater than or Equal to 37 Weeks"},{"_id":"689267b3e8da6d1c0d5102ec","hqmf_id":null,"library_name":"CesareanBirth","statement_name":"Delivery Encounter with Estimated Gestational Age Greater than or Equal to 37 Weeks"}]},{"_id":"689267b3e8da6d1c0d5102ff","statement_name":"Encounter with Singleton Delivery","statement_references":[{"_id":"689267bae8da6d1c0d510614","hqmf_id":null,"library_name":"PCMaternal","statement_name":"Delivery Encounter with Age Range"}]},{"_id":"689267b3e8da6d1c0d510300","statement_name":"LastGravida","statement_references":[{"_id":"689267bae8da6d1c0d510615","hqmf_id":null,"library_name":"PCMaternal","statement_name":"LastTimeOfDelivery"}]},{"_id":"689267b3e8da6d1c0d510301","statement_name":"LastParity","statement_references":[{"_id":"689267bae8da6d1c0d510616","hqmf_id":null,"library_name":"PCMaternal","statement_name":"LastTimeOfDelivery"}]},{"_id":"689267b3e8da6d1c0d510302","statement_name":"LastHistoryPretermBirth","statement_references":[{"_id":"689267bae8da6d1c0d510617","hqmf_id":null,"library_name":"PCMaternal","statement_name":"LastTimeOfDelivery"}]},{"_id":"689267b3e8da6d1c0d510303","statement_name":"LastHistoryTermBirth","statement_references":[{"_id":"689267bae8da6d1c0d510618","hqmf_id":null,"library_name":"PCMaternal","statement_name":"LastTimeOfDelivery"}]},{"_id":"689267b3e8da6d1c0d510304","statement_name":"Singleton Delivery Encounters at 37 Plus Weeks Gravida 1 Parity 0, No Previous Births","statement_references":[{"_id":"689267b3e8da6d1c0d5102ed","hqmf_id":null,"library_name":"CesareanBirth","statement_name":"Delivery Encounter with Gestational Age Greater than or Equal to 37 Weeks"},{"_id":"689267b3e8da6d1c0d5102ee","hqmf_id":null,"library_name":"CesareanBirth","statement_name":"Encounter with Singleton Delivery"},{"_id":"689267b3e8da6d1c0d5102ef","hqmf_id":null,"library_name":"CesareanBirth","statement_name":"LastGravida"},{"_id":"689267b3e8da6d1c0d5102f0","hqmf_id":null,"library_name":"CesareanBirth","statement_name":"LastParity"},{"_id":"689267b3e8da6d1c0d5102f1","hqmf_id":null,"library_name":"CesareanBirth","statement_name":"LastHistoryPretermBirth"},{"_id":"689267b3e8da6d1c0d5102f2","hqmf_id":null,"library_name":"CesareanBirth","statement_name":"LastHistoryTermBirth"}]},{"_id":"689267b3e8da6d1c0d510305","statement_name":"Encounter with Abnormal Presentation","statement_references":[{"_id":"689267b3e8da6d1c0d5102f3","hqmf_id":null,"library_name":"CesareanBirth","statement_name":"Singleton Delivery Encounters at 37 Plus Weeks Gravida 1 Parity 0, No Previous Births"},{"_id":"689267b3e8da6d1c0d5102f4","hqmf_id":null,"library_name":"MATGlobalCommonFunctions","statement_name":"EarliestOf"},{"_id":"689267b3e8da6d1c0d5102f5","hqmf_id":null,"library_name":"PCMaternal","statement_name":"LastTimeOfDelivery"}]},{"_id":"689267b3e8da6d1c0d510306","statement_name":"Encounter with Placenta Previa","statement_references":[{"_id":"689267bae8da6d1c0d510619","hqmf_id":null,"library_name":"CesareanBirth","statement_name":"Singleton Delivery Encounters at 37 Plus Weeks Gravida 1 Parity 0, No Previous Births"}]},{"_id":"689267b3e8da6d1c0d510307","statement_name":"Delivery Encounter with Abnormal Presentation or Placenta Previa","statement_references":[{"_id":"689267b3e8da6d1c0d5102f6","hqmf_id":null,"library_name":"CesareanBirth","statement_name":"Encounter with Abnormal Presentation"},{"_id":"689267b3e8da6d1c0d5102f7","hqmf_id":null,"library_name":"CesareanBirth","statement_name":"Encounter with Placenta Previa"}]},{"_id":"689267b3e8da6d1c0d510308","statement_name":"Delivery Encounter with Cesarean Birth","statement_references":[{"_id":"689267b3e8da6d1c0d5102f8","hqmf_id":null,"library_name":"CesareanBirth","statement_name":"Singleton Delivery Encounters at 37 Plus Weeks Gravida 1 Parity 0, No Previous Births"},{"_id":"689267b3e8da6d1c0d5102f9","hqmf_id":null,"library_name":"MATGlobalCommonFunctions","statement_name":"NormalizeInterval"},{"_id":"689267b3e8da6d1c0d5102fa","hqmf_id":null,"library_name":"PCMaternal","statement_name":"HospitalizationWithEDOBTriageObservation"}]},{"_id":"689267b3e8da6d1c0d510309","statement_name":"Denominator","statement_references":[{"_id":"689267bae8da6d1c0d51061a","hqmf_id":null,"library_name":"CesareanBirth","statement_name":"Singleton Delivery Encounters at 37 Plus Weeks Gravida 1 Parity 0, No Previous Births"}]},{"_id":"689267b3e8da6d1c0d51030a","statement_name":"Denominator Exclusions","statement_references":[{"_id":"689267bae8da6d1c0d51061b","hqmf_id":null,"library_name":"CesareanBirth","statement_name":"Delivery Encounter with Abnormal Presentation or Placenta Previa"}]},{"_id":"689267b3e8da6d1c0d51030b","statement_name":"Initial Population","statement_references":[{"_id":"689267bae8da6d1c0d51061c","hqmf_id":null,"library_name":"PCMaternal","statement_name":"Delivery Encounter with Age Range"}]},{"_id":"689267b3e8da6d1c0d51030c","statement_name":"Numerator","statement_references":[{"_id":"689267bae8da6d1c0d51061d","hqmf_id":null,"library_name":"CesareanBirth","statement_name":"Delivery Encounter with Cesarean Birth"}]},{"_id":"689267b3e8da6d1c0d51030d","statement_name":"SDE Ethnicity"},{"_id":"689267b3e8da6d1c0d51030e","statement_name":"SDE Payer"},{"_id":"689267b3e8da6d1c0d51030f","statement_name":"SDE Race"},{"_id":"689267b3e8da6d1c0d510310","statement_name":"SDE Sex"},{"_id":"689267b3e8da6d1c0d510311","statement_name":"Variable Calculated Gestational Age","statement_references":[{"_id":"689267bae8da6d1c0d51061e","hqmf_id":null,"library_name":"PCMaternal","statement_name":"Variable Calculated Gestational Age"}]}]},{"_id":"689267b3e8da6d1c0d510332","cql":"library MATGlobalCommonFunctions version '7.0.000'\n\nusing QDM version '5.6'\n\nvalueset \"Emergency Department Visit\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.292' \nvalueset \"Encounter Inpatient\": 'urn:oid:2.16.840.1.113883.3.666.5.307' \nvalueset \"Intensive Care Unit\": 'urn:oid:2.16.840.1.113762.1.4.1029.206' \nvalueset \"Observation Services\": 'urn:oid:2.16.840.1.113762.1.4.1111.143' \nvalueset \"Outpatient Surgery Service\": 'urn:oid:2.16.840.1.113762.1.4.1110.38' \n\nparameter \"Measurement Period\" Interval\u003cDateTime\u003e\n\ncontext Patient\n\ndefine \"ED Encounter\":\n  [\"Encounter, Performed\": \"Emergency Department Visit\"]\n\ndefine \"Inpatient Encounter\":\n  [\"Encounter, Performed\": \"Encounter Inpatient\"] EncounterInpatient\n    where \"LengthInDays\"(EncounterInpatient.relevantPeriod)\u003c= 120\n      and EncounterInpatient.relevantPeriod ends during day of \"Measurement Period\"\n\n/*@description: Returns an interval of date values extracted from the input interval of date-time values\n@comment: This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability.*/\ndefine function \"ToDateInterval\"(period Interval\u003cDateTime\u003e ):\n  Interval[date from start of period, date from end of period]\n\n/*calculates the difference in calendar days between the start and end of the given interval.*/\ndefine function \"LengthInDays\"(Value Interval\u003cDateTime\u003e ):\n  difference in days between start of Value and end of Value\n\n/*returns list of all locations within an encounter, including locations for immediately prior ED visit.*/\ndefine function \"HospitalizationLocations\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet EDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn if EDVisit is null then Visit.facilityLocations \n  \t\telse flatten { EDVisit.facilityLocations, Visit.facilityLocations }\n\n/*Returns the arrival time in the ED for the encounter.*/\ndefine function \"EmergencyDepartmentArrivalTime\"(Encounter \"Encounter, Performed\" ):\n  start of First((\"HospitalizationLocations\"(Encounter))HospitalLocation\n  \t\twhere HospitalLocation.code in \"Emergency Department Visit\"\n  \t\tsort by start of locationPeriod\n  ).locationPeriod\n\n/*Returns admission time for an encounter or for immediately prior emergency department visit.*/\ndefine function \"HospitalAdmissionTime\"(Encounter \"Encounter, Performed\" ):\n  start of \"Hospitalization\"(Encounter)\n\n/*Returns earliest arrival time for an encounter including any prior ED visit.*/\ndefine function \"HospitalArrivalTime\"(Encounter \"Encounter, Performed\" ):\n  start of First((\"HospitalizationLocations\"(Encounter))HospitalLocation\n  \t\tsort by start of locationPeriod\n  ).locationPeriod\n\n/*Hospitalization returns the total interval for admission to discharge for the given encounter, or for the admission of any immediately prior emergency department visit to the discharge of the given encounter.*/\ndefine function \"Hospitalization\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet EDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn Interval[Coalesce(start of EDVisit.relevantPeriod, start of Visit.relevantPeriod), \n  \tend of Visit.relevantPeriod]\n\n/*Returns the length of stay in days (i.e. the number of days between admission and discharge) for the given encounter, or from the admission of any immediately prior emergency department visit to the discharge of the encounter*/\ndefine function \"HospitalizationLengthofStay\"(Encounter \"Encounter, Performed\" ):\n  LengthInDays(\"Hospitalization\"(Encounter))\n\n/*Returns the latest departure time for encounter including any prior ED visit.*/\ndefine function \"HospitalDepartureTime\"(Encounter \"Encounter, Performed\" ):\n  end of Last((\"HospitalizationLocations\"(Encounter))HospitalLocation\n  \t\tsort by start of locationPeriod\n  ).locationPeriod\n\n/*Hospital Discharge Time returns the discharge time for an encounter*/\ndefine function \"HospitalDischargeTime\"(Encounter \"Encounter, Performed\" ):\n  end of Encounter.relevantPeriod\n\n/*Hospitalization with Observation and Outpatient Surgery Service returns the total interval from the start of any immediately prior emergency department visit, outpatient surgery visit or observation visit to the discharge of the given encounter.*/\ndefine function \"HospitalizationWithObservationAndOutpatientSurgeryService\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet ObsVisit: Last([\"Encounter, Performed\": \"Observation Services\"] LastObs\n  \t\t\twhere LastObs.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t),\n  \tVisitStart: Coalesce(start of ObsVisit.relevantPeriod, start of Visit.relevantPeriod),\n  \tEDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before VisitStart\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t),\n  \tVisitStartWithED: Coalesce(start of EDVisit.relevantPeriod, VisitStart),\n  \tOutpatientSurgeryVisit: Last([\"Encounter, Performed\": \"Outpatient Surgery Service\"] LastSurgeryOP\n  \t\t\twhere LastSurgeryOP.relevantPeriod ends 1 hour or less on or before VisitStartWithED\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn Interval[Coalesce(start of OutpatientSurgeryVisit.relevantPeriod, VisitStartWithED), \n  \tend of Visit.relevantPeriod]\n\n/*Hospitalization with Observation returns the total interval from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\ndefine function \"HospitalizationWithObservation\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet ObsVisit: Last([\"Encounter, Performed\": \"Observation Services\"] LastObs\n  \t\t\twhere LastObs.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t),\n  \tVisitStart: Coalesce(start of ObsVisit.relevantPeriod, start of Visit.relevantPeriod),\n  \tEDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before VisitStart\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn Interval[Coalesce(start of EDVisit.relevantPeriod, VisitStart), \n  \tend of Visit.relevantPeriod]\n\n/*Hospitalization with Observation Length of Stay returns the length in days from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\ndefine function \"HospitalizationWithObservationLengthofStay\"(Encounter \"Encounter, Performed\" ):\n  \"LengthInDays\"(\"HospitalizationWithObservation\"(Encounter))\n\n/*First Inpatient Intensive Care Unit returns the first intensive care unit for the given encounter, without considering any immediately prior emergency department visit.*/\ndefine function \"FirstInpatientIntensiveCareUnit\"(Encounter \"Encounter, Performed\" ):\n  First((Encounter.facilityLocations)HospitalLocation\n      where HospitalLocation.code in \"Intensive Care Unit\"\n        and HospitalLocation.locationPeriod during Encounter.relevantPeriod\n      sort by start of locationPeriod\n  )\n\n/*Given a datetime and a period, returns the period (if a period is provided) or the interval beginning and ending on the datetime (if a datetime is provided)*/\ndefine function \"NormalizeInterval\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  if pointInTime is not null then Interval[pointInTime, pointInTime]\n    else if period is not null then period \n    else null as Interval\u003cDateTime\u003e\n\n/*Given an interval, return true if the interval has a starting boundary specified (i.e. the start of the interval is not null and not the minimum DateTime value)*/\ndefine function \"HasStart\"(period Interval\u003cDateTime\u003e ):\n  not ( start of period is null\n      or start of period = minimum DateTime\n  )\n\n/*Given an interval, return true if the interval has an ending boundary specified (i.e. the end of the interval is not null and not the maximum DateTime value)*/\ndefine function \"HasEnd\"(period Interval\u003cDateTime\u003e ):\n  not ( \n    end of period is null\n      or \n      end of period = maximum DateTime\n  )\n\n/*Given an interval, return the ending point if the interval has an ending boundary specified, otherwise, return the starting point*/\ndefine function \"Latest\"(period Interval\u003cDateTime\u003e ):\n  if ( HasEnd(period)) then \n  end of period \n    else start of period\n\n/*Given an interval, return the starting point if the interval has a starting boundary specified, otherwise, return the ending point*/\ndefine function \"Earliest\"(period Interval\u003cDateTime\u003e ):\n  if ( HasStart(period)) then start of period \n    else \n  end of period\n\n/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the ending point of the period if the period has an ending boundary specified, otherwise returns the starting point of the interval*/\ndefine function \"LatestOf\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  Latest(NormalizeInterval(pointInTime, period))\n\n/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the starting point of the period if the period has a starting boundary specified, otherwise returns the ending point of the period*/\ndefine function \"EarliestOf\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  Earliest(NormalizeInterval(pointInTime, period))\n\n","elm":{"library":{"annotation":[{"translatorOptions":"EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion,DisableMethodInvocation","type":"CqlToElmInfo"},{"type":"Annotation","s":{"r":"404","s":[{"value":["","library MATGlobalCommonFunctions version '7.0.000'"]}]}}],"identifier":{"id":"MATGlobalCommonFunctions","version":"7.0.000"},"schemaIdentifier":{"id":"urn:hl7-org:elm","version":"r1"},"usings":{"def":[{"localIdentifier":"System","uri":"urn:hl7-org:elm-types:r1"},{"localId":"1","locator":"3:1-3:23","localIdentifier":"QDM","uri":"urn:healthit-gov:qdm:v5_6","version":"5.6","annotation":[{"type":"Annotation","s":{"r":"1","s":[{"value":["","using "]},{"s":[{"value":["QDM"]}]},{"value":[" version ","'5.6'"]}]}}]}]},"parameters":{"def":[{"localId":"9","locator":"11:1-11:49","name":"Measurement Period","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"9","s":[{"value":["","parameter ","\"Measurement Period\""," "]},{"r":"8","s":[{"value":["Interval\u003c"]},{"r":"7","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}}],"parameterTypeSpecifier":{"localId":"8","locator":"11:32-11:49","type":"IntervalTypeSpecifier","pointType":{"localId":"7","locator":"11:41-11:48","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},"valueSets":{"def":[{"localId":"2","locator":"5:1-5:82","name":"Emergency Department Visit","id":"2.16.840.1.113883.3.117.1.7.1.292","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"2","s":[{"value":["","valueset ","\"Emergency Department Visit\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.292'"]}]}}]},{"localId":"3","locator":"6:1-6:71","name":"Encounter Inpatient","id":"2.16.840.1.113883.3.666.5.307","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"3","s":[{"value":["","valueset ","\"Encounter Inpatient\"",": ","'urn:oid:2.16.840.1.113883.3.666.5.307'"]}]}}]},{"localId":"4","locator":"7:1-7:72","name":"Intensive Care Unit","id":"2.16.840.1.113762.1.4.1029.206","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"4","s":[{"value":["","valueset ","\"Intensive Care Unit\"",": ","'urn:oid:2.16.840.1.113762.1.4.1029.206'"]}]}}]},{"localId":"5","locator":"8:1-8:73","name":"Observation Services","id":"2.16.840.1.113762.1.4.1111.143","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"5","s":[{"value":["","valueset ","\"Observation Services\"",": ","'urn:oid:2.16.840.1.113762.1.4.1111.143'"]}]}}]},{"localId":"6","locator":"9:1-9:78","name":"Outpatient Surgery Service","id":"2.16.840.1.113762.1.4.1110.38","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"6","s":[{"value":["","valueset ","\"Outpatient Surgery Service\"",": ","'urn:oid:2.16.840.1.113762.1.4.1110.38'"]}]}}]}]},"contexts":{"def":[{"locator":"13:1-13:15","name":"Patient"}]},"statements":{"def":[{"locator":"13:1-13:15","name":"Patient","context":"Patient","expression":{"type":"SingletonFrom","operand":{"locator":"13:1-13:15","dataType":"{urn:healthit-gov:qdm:v5_6}Patient","templateId":"Patient","type":"Retrieve"}}},{"localId":"11","locator":"15:1-16:56","name":"ED Encounter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"11","s":[{"value":["","define ","\"ED Encounter\"",":\n  "]},{"r":"10","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"10","locator":"16:3-16:56","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"16:28-16:55","name":"Emergency Department Visit","type":"ValueSetRef"}}},{"localId":"23","locator":"32:1-33:60","name":"LengthInDays","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"23","s":[{"value":["/*calculates the difference in calendar days between the start and end of the given interval.*/","define function ","\"LengthInDays\"","(","Value"," "]},{"r":"17","s":[{"value":["Interval\u003c"]},{"r":"16","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"22","s":[{"r":"22","s":[{"value":["difference in days between "]},{"r":"19","s":[{"value":["start of "]},{"r":"18","s":[{"value":["Value"]}]}]},{"value":[" and "]},{"r":"21","s":[{"value":["end of "]},{"r":"20","s":[{"value":["Value"]}]}]}]}]}]}}],"expression":{"localId":"22","locator":"33:3-33:60","precision":"Day","type":"DifferenceBetween","operand":[{"localId":"19","locator":"33:30-33:43","type":"Start","operand":{"localId":"18","locator":"33:39-33:43","name":"Value","type":"OperandRef"}},{"localId":"21","locator":"33:49-33:60","type":"End","operand":{"localId":"20","locator":"33:56-33:60","name":"Value","type":"OperandRef"}}]},"operand":[{"name":"Value","operandTypeSpecifier":{"localId":"17","locator":"32:38-32:55","type":"IntervalTypeSpecifier","pointType":{"localId":"16","locator":"32:47-32:54","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"33","locator":"18:1-21:83","name":"Inpatient Encounter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"33","s":[{"value":["","define ","\"Inpatient Encounter\"",":\n  "]},{"r":"32","s":[{"s":[{"r":"13","s":[{"r":"12","s":[{"r":"12","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Encounter Inpatient\""]}]},{"value":["]"]}]}]},{"value":[" ","EncounterInpatient"]}]}]},{"value":["\n    "]},{"r":"31","s":[{"value":["where "]},{"r":"31","s":[{"r":"26","s":[{"r":"24","s":[{"value":["\"LengthInDays\"","("]},{"r":"15","s":[{"r":"14","s":[{"value":["EncounterInpatient"]}]},{"value":["."]},{"r":"15","s":[{"value":["relevantPeriod"]}]}]},{"value":[")"]}]},{"r":"25","value":["\u003c="," ","120"]}]},{"value":["\n      and "]},{"r":"30","s":[{"r":"28","s":[{"r":"27","s":[{"value":["EncounterInpatient"]}]},{"value":["."]},{"r":"28","s":[{"value":["relevantPeriod"]}]}]},{"r":"30","value":[" ","ends during day of"," "]},{"r":"29","s":[{"value":["\"Measurement Period\""]}]}]}]}]}]}]}}],"expression":{"localId":"32","locator":"19:3-21:83","type":"Query","source":[{"localId":"13","locator":"19:3-19:68","alias":"EncounterInpatient","expression":{"localId":"12","locator":"19:3-19:49","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"19:28-19:48","name":"Encounter Inpatient","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"31","locator":"20:5-21:83","type":"And","operand":[{"localId":"26","locator":"20:11-20:65","type":"LessOrEqual","operand":[{"localId":"24","locator":"20:11-20:59","name":"LengthInDays","type":"FunctionRef","operand":[{"localId":"15","locator":"20:26-20:58","path":"relevantPeriod","scope":"EncounterInpatient","type":"Property"}]},{"localId":"25","locator":"20:63-20:65","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"120","type":"Literal"}]},{"localId":"30","locator":"21:11-21:83","precision":"Day","type":"In","operand":[{"locator":"21:45-21:48","type":"End","operand":{"localId":"28","locator":"21:11-21:43","path":"relevantPeriod","scope":"EncounterInpatient","type":"Property"}},{"localId":"29","locator":"21:64-21:83","name":"Measurement Period","type":"ParameterRef"}]}]}}},{"localId":"43","locator":"28:1-29:62","name":"ToDateInterval","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","t":[{"name":"description","value":"Returns an interval of date values extracted from the input interval of date-time values"},{"name":"description","value":"Returns an interval of date values extracted from the input interval of date-time values"},{"name":"comment","value":"This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability."}],"s":{"r":"43","s":[{"value":["/*@description: Returns an interval of date values extracted from the input interval of date-time values\n@comment: This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability.*/","define function ","\"ToDateInterval\"","(","period"," "]},{"r":"35","s":[{"value":["Interval\u003c"]},{"r":"34","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"42","s":[{"r":"42","s":[{"value":["Interval["]},{"r":"38","s":[{"value":["date from "]},{"r":"37","s":[{"value":["start of "]},{"r":"36","s":[{"value":["period"]}]}]}]},{"value":[", "]},{"r":"41","s":[{"value":["date from "]},{"r":"40","s":[{"value":["end of "]},{"r":"39","s":[{"value":["period"]}]}]}]},{"value":["]"]}]}]}]}}],"expression":{"localId":"42","locator":"29:3-29:62","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"38","locator":"29:12-29:36","type":"DateFrom","operand":{"localId":"37","locator":"29:22-29:36","type":"Start","operand":{"localId":"36","locator":"29:31-29:36","name":"period","type":"OperandRef"}}},"high":{"localId":"41","locator":"29:39-29:61","type":"DateFrom","operand":{"localId":"40","locator":"29:49-29:61","type":"End","operand":{"localId":"39","locator":"29:56-29:61","name":"period","type":"OperandRef"}}}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"35","locator":"28:41-28:58","type":"IntervalTypeSpecifier","pointType":{"localId":"34","locator":"28:50-28:57","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"79","locator":"36:1-44:71","name":"HospitalizationLocations","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"79","s":[{"value":["/*returns list of all locations within an encounter, including locations for immediately prior ED visit.*/","define function ","\"HospitalizationLocations\"","(","Encounter"," "]},{"r":"47","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"78","s":[{"r":"78","s":[{"s":[{"r":"49","s":[{"r":"48","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"65","s":[{"value":["EDVisit",": "]},{"r":"64","s":[{"value":["Last","("]},{"r":"63","s":[{"s":[{"r":"51","s":[{"r":"50","s":[{"r":"50","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"58","s":[{"value":["where "]},{"r":"58","s":[{"r":"53","s":[{"r":"52","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"53","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"58","s":[{"value":["ends "]},{"r":"57","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"56","s":[{"value":["start of "]},{"r":"55","s":[{"r":"54","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"55","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"62","s":[{"value":["sort by \n  \t\t\t"]},{"r":"61","s":[{"r":"60","s":[{"value":["end of "]},{"r":"59","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"77","s":[{"value":["return "]},{"r":"76","s":[{"value":["if "]},{"r":"67","s":[{"r":"66","s":[{"value":["EDVisit"]}]},{"value":[" is null"]}]},{"value":[" then "]},{"r":"69","s":[{"r":"68","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"69","s":[{"value":["facilityLocations"]}]}]},{"value":[" \n  \t\telse "]},{"r":"75","s":[{"value":["flatten "]},{"r":"74","s":[{"value":["{ "]},{"r":"71","s":[{"r":"70","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"71","s":[{"value":["facilityLocations"]}]}]},{"value":[", "]},{"r":"73","s":[{"r":"72","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"73","s":[{"value":["facilityLocations"]}]}]},{"value":[" }"]}]}]}]}]}]}]}]}}],"expression":{"localId":"78","locator":"37:3-44:71","type":"Query","source":[{"localId":"49","locator":"37:3-37:17","alias":"Visit","expression":{"localId":"48","locator":"37:3-37:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"65","locator":"38:8-42:4","identifier":"EDVisit","expression":{"localId":"64","locator":"38:17-42:4","type":"Last","source":{"localId":"63","locator":"38:22-41:26","type":"Query","source":[{"localId":"51","locator":"38:22-38:82","alias":"LastED","expression":{"localId":"50","locator":"38:22-38:75","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"38:47-38:74","name":"Emergency Department Visit","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"58","locator":"39:6-39:95","type":"And","operand":[{"locator":"39:39-39:52","type":"In","operand":[{"locator":"39:34-39:37","type":"End","operand":{"localId":"53","locator":"39:12-39:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"39:39-39:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"39:67-39:95","type":"Subtract","operand":[{"localId":"56","locator":"39:67-39:95","type":"Start","operand":{"localId":"55","locator":"39:76-39:95","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"57","locator":"39:39-39:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"56","locator":"39:67-39:95","type":"Start","operand":{"localId":"55","locator":"39:76-39:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"39:39-39:52","type":"Not","operand":{"locator":"39:39-39:52","type":"IsNull","operand":{"localId":"56","locator":"39:67-39:95","type":"Start","operand":{"localId":"55","locator":"39:76-39:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"62","locator":"40:6-41:26","by":[{"localId":"61","locator":"41:6-41:26","direction":"asc","type":"ByExpression","expression":{"localId":"60","locator":"41:6-41:26","type":"End","operand":{"localId":"59","locator":"41:13-41:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"77","locator":"43:4-44:71","expression":{"localId":"76","locator":"43:11-44:71","type":"If","condition":{"localId":"67","locator":"43:14-43:28","type":"IsNull","operand":{"localId":"66","locator":"43:14-43:20","name":"EDVisit","type":"QueryLetRef"}},"then":{"localId":"69","locator":"43:35-43:57","path":"facilityLocations","scope":"Visit","type":"Property"},"else":{"localId":"75","locator":"44:10-44:71","type":"Flatten","operand":{"localId":"74","locator":"44:18-44:71","type":"List","element":[{"localId":"71","locator":"44:20-44:44","path":"facilityLocations","type":"Property","source":{"localId":"70","locator":"44:20-44:26","name":"EDVisit","type":"QueryLetRef"}},{"localId":"73","locator":"44:47-44:69","path":"facilityLocations","scope":"Visit","type":"Property"}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"47","locator":"36:54-36:75","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"96","locator":"47:1-51:18","name":"EmergencyDepartmentArrivalTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"96","s":[{"value":["/*Returns the arrival time in the ED for the encounter.*/","define function ","\"EmergencyDepartmentArrivalTime\"","(","Encounter"," "]},{"r":"80","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"95","s":[{"r":"95","s":[{"value":["start of "]},{"r":"94","s":[{"r":"93","s":[{"value":["First","("]},{"r":"92","s":[{"s":[{"r":"83","s":[{"r":"82","s":[{"value":["("]},{"r":"82","s":[{"value":["\"HospitalizationLocations\"","("]},{"r":"81","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n  \t\t"]},{"r":"87","s":[{"value":["where "]},{"r":"87","s":[{"r":"85","s":[{"r":"84","s":[{"value":["HospitalLocation"]}]},{"value":["."]},{"r":"85","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"86","s":[{"value":["\"Emergency Department Visit\""]}]}]}]},{"value":["\n  \t\t"]},{"r":"91","s":[{"value":["sort by "]},{"r":"90","s":[{"r":"89","s":[{"value":["start of "]},{"r":"88","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"94","s":[{"value":["locationPeriod"]}]}]}]}]}]}}],"expression":{"localId":"95","locator":"48:3-51:18","type":"Start","operand":{"localId":"94","locator":"48:12-51:18","path":"locationPeriod","type":"Property","source":{"localId":"93","locator":"48:12-51:3","type":"First","source":{"localId":"92","locator":"48:18-50:35","type":"Query","source":[{"localId":"83","locator":"48:18-48:72","alias":"HospitalLocation","expression":{"localId":"82","locator":"48:18-48:56","name":"HospitalizationLocations","type":"FunctionRef","operand":[{"localId":"81","locator":"48:46-48:54","name":"Encounter","type":"OperandRef"}]}}],"relationship":[],"where":{"localId":"87","locator":"49:5-49:63","type":"InValueSet","code":{"localId":"85","locator":"49:11-49:31","path":"code","scope":"HospitalLocation","type":"Property"},"valueset":{"localId":"86","locator":"49:36-49:63","name":"Emergency Department Visit","type":"ValueSetRef"}},"sort":{"localId":"91","locator":"50:5-50:35","by":[{"localId":"90","locator":"50:13-50:35","direction":"asc","type":"ByExpression","expression":{"localId":"89","locator":"50:13-50:35","type":"Start","operand":{"localId":"88","locator":"50:22-50:35","name":"locationPeriod","type":"IdentifierRef"}}}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"80","locator":"47:60-47:81","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"131","locator":"64:1-72:31","name":"Hospitalization","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"131","s":[{"value":["/*Hospitalization returns the total interval for admission to discharge for the given encounter, or for the admission of any immediately prior emergency department visit to the discharge of the given encounter.*/","define function ","\"Hospitalization\"","(","Encounter"," "]},{"r":"99","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"130","s":[{"r":"130","s":[{"s":[{"r":"101","s":[{"r":"100","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"117","s":[{"value":["EDVisit",": "]},{"r":"116","s":[{"value":["Last","("]},{"r":"115","s":[{"s":[{"r":"103","s":[{"r":"102","s":[{"r":"102","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"110","s":[{"value":["where "]},{"r":"110","s":[{"r":"105","s":[{"r":"104","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"105","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"110","s":[{"value":["ends "]},{"r":"109","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"108","s":[{"value":["start of "]},{"r":"107","s":[{"r":"106","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"107","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"114","s":[{"value":["sort by \n  \t\t\t"]},{"r":"113","s":[{"r":"112","s":[{"value":["end of "]},{"r":"111","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"129","s":[{"value":["return "]},{"r":"128","s":[{"value":["Interval["]},{"r":"124","s":[{"value":["Coalesce","("]},{"r":"120","s":[{"value":["start of "]},{"r":"119","s":[{"r":"118","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"119","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"123","s":[{"value":["start of "]},{"r":"122","s":[{"r":"121","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"122","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]},{"value":[", \n  \t"]},{"r":"127","s":[{"value":["end of "]},{"r":"126","s":[{"r":"125","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"126","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["]"]}]}]}]}]}]}}],"expression":{"localId":"130","locator":"65:3-72:31","type":"Query","source":[{"localId":"101","locator":"65:3-65:17","alias":"Visit","expression":{"localId":"100","locator":"65:3-65:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"117","locator":"66:8-70:4","identifier":"EDVisit","expression":{"localId":"116","locator":"66:17-70:4","type":"Last","source":{"localId":"115","locator":"66:22-69:26","type":"Query","source":[{"localId":"103","locator":"66:22-66:82","alias":"LastED","expression":{"localId":"102","locator":"66:22-66:75","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"66:47-66:74","name":"Emergency Department Visit","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"110","locator":"67:6-67:95","type":"And","operand":[{"locator":"67:39-67:52","type":"In","operand":[{"locator":"67:34-67:37","type":"End","operand":{"localId":"105","locator":"67:12-67:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"67:39-67:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"67:67-67:95","type":"Subtract","operand":[{"localId":"108","locator":"67:67-67:95","type":"Start","operand":{"localId":"107","locator":"67:76-67:95","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"109","locator":"67:39-67:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"108","locator":"67:67-67:95","type":"Start","operand":{"localId":"107","locator":"67:76-67:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"67:39-67:52","type":"Not","operand":{"locator":"67:39-67:52","type":"IsNull","operand":{"localId":"108","locator":"67:67-67:95","type":"Start","operand":{"localId":"107","locator":"67:76-67:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"114","locator":"68:6-69:26","by":[{"localId":"113","locator":"69:6-69:26","direction":"asc","type":"ByExpression","expression":{"localId":"112","locator":"69:6-69:26","type":"End","operand":{"localId":"111","locator":"69:13-69:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"129","locator":"71:4-72:31","expression":{"localId":"128","locator":"71:11-72:31","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"124","locator":"71:20-71:91","type":"Coalesce","operand":[{"localId":"120","locator":"71:29-71:59","type":"Start","operand":{"localId":"119","locator":"71:38-71:59","path":"relevantPeriod","type":"Property","source":{"localId":"118","locator":"71:38-71:44","name":"EDVisit","type":"QueryLetRef"}}},{"localId":"123","locator":"71:62-71:90","type":"Start","operand":{"localId":"122","locator":"71:71-71:90","path":"relevantPeriod","scope":"Visit","type":"Property"}}]},"high":{"localId":"127","locator":"72:4-72:30","type":"End","operand":{"localId":"126","locator":"72:11-72:30","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"99","locator":"64:45-64:66","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"134","locator":"54:1-55:39","name":"HospitalAdmissionTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"134","s":[{"value":["/*Returns admission time for an encounter or for immediately prior emergency department visit.*/","define function ","\"HospitalAdmissionTime\"","(","Encounter"," "]},{"r":"97","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"133","s":[{"r":"133","s":[{"value":["start of "]},{"r":"132","s":[{"value":["\"Hospitalization\"","("]},{"r":"98","s":[{"value":["Encounter"]}]},{"value":[")"]}]}]}]}]}}],"expression":{"localId":"133","locator":"55:3-55:39","type":"Start","operand":{"localId":"132","locator":"55:12-55:39","name":"Hospitalization","type":"FunctionRef","operand":[{"localId":"98","locator":"55:30-55:38","name":"Encounter","type":"OperandRef"}]}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"97","locator":"54:51-54:72","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"147","locator":"58:1-61:18","name":"HospitalArrivalTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"147","s":[{"value":["/*Returns earliest arrival time for an encounter including any prior ED visit.*/","define function ","\"HospitalArrivalTime\"","(","Encounter"," "]},{"r":"135","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"146","s":[{"r":"146","s":[{"value":["start of "]},{"r":"145","s":[{"r":"144","s":[{"value":["First","("]},{"r":"143","s":[{"s":[{"r":"138","s":[{"r":"137","s":[{"value":["("]},{"r":"137","s":[{"value":["\"HospitalizationLocations\"","("]},{"r":"136","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n  \t\t"]},{"r":"142","s":[{"value":["sort by "]},{"r":"141","s":[{"r":"140","s":[{"value":["start of "]},{"r":"139","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"145","s":[{"value":["locationPeriod"]}]}]}]}]}]}}],"expression":{"localId":"146","locator":"59:3-61:18","type":"Start","operand":{"localId":"145","locator":"59:12-61:18","path":"locationPeriod","type":"Property","source":{"localId":"144","locator":"59:12-61:3","type":"First","source":{"localId":"143","locator":"59:18-60:35","type":"Query","source":[{"localId":"138","locator":"59:18-59:72","alias":"HospitalLocation","expression":{"localId":"137","locator":"59:18-59:56","name":"HospitalizationLocations","type":"FunctionRef","operand":[{"localId":"136","locator":"59:46-59:54","name":"Encounter","type":"OperandRef"}]}}],"relationship":[],"sort":{"localId":"142","locator":"60:5-60:35","by":[{"localId":"141","locator":"60:13-60:35","direction":"asc","type":"ByExpression","expression":{"localId":"140","locator":"60:13-60:35","type":"Start","operand":{"localId":"139","locator":"60:22-60:35","name":"locationPeriod","type":"IdentifierRef"}}}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"135","locator":"58:49-58:70","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"154","locator":"75:1-76:44","name":"HospitalizationLengthofStay","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"154","s":[{"value":["/*Returns the length of stay in days (i.e. the number of days between admission and discharge) for the given encounter, or from the admission of any immediately prior emergency department visit to the discharge of the encounter*/","define function ","\"HospitalizationLengthofStay\"","(","Encounter"," "]},{"r":"150","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"153","s":[{"r":"153","s":[{"value":["LengthInDays","("]},{"r":"152","s":[{"value":["\"Hospitalization\"","("]},{"r":"151","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"153","locator":"76:3-76:44","name":"LengthInDays","type":"FunctionRef","operand":[{"localId":"152","locator":"76:16-76:43","name":"Hospitalization","type":"FunctionRef","operand":[{"localId":"151","locator":"76:34-76:42","name":"Encounter","type":"OperandRef"}]}]},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"150","locator":"75:57-75:78","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"167","locator":"79:1-82:18","name":"HospitalDepartureTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"167","s":[{"value":["/*Returns the latest departure time for encounter including any prior ED visit.*/","define function ","\"HospitalDepartureTime\"","(","Encounter"," "]},{"r":"155","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"166","s":[{"r":"166","s":[{"value":["end of "]},{"r":"165","s":[{"r":"164","s":[{"value":["Last","("]},{"r":"163","s":[{"s":[{"r":"158","s":[{"r":"157","s":[{"value":["("]},{"r":"157","s":[{"value":["\"HospitalizationLocations\"","("]},{"r":"156","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n  \t\t"]},{"r":"162","s":[{"value":["sort by "]},{"r":"161","s":[{"r":"160","s":[{"value":["start of "]},{"r":"159","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"165","s":[{"value":["locationPeriod"]}]}]}]}]}]}}],"expression":{"localId":"166","locator":"80:3-82:18","type":"End","operand":{"localId":"165","locator":"80:10-82:18","path":"locationPeriod","type":"Property","source":{"localId":"164","locator":"80:10-82:3","type":"Last","source":{"localId":"163","locator":"80:15-81:35","type":"Query","source":[{"localId":"158","locator":"80:15-80:69","alias":"HospitalLocation","expression":{"localId":"157","locator":"80:15-80:53","name":"HospitalizationLocations","type":"FunctionRef","operand":[{"localId":"156","locator":"80:43-80:51","name":"Encounter","type":"OperandRef"}]}}],"relationship":[],"sort":{"localId":"162","locator":"81:5-81:35","by":[{"localId":"161","locator":"81:13-81:35","direction":"asc","type":"ByExpression","expression":{"localId":"160","locator":"81:13-81:35","type":"Start","operand":{"localId":"159","locator":"81:22-81:35","name":"locationPeriod","type":"IdentifierRef"}}}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"155","locator":"79:51-79:72","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"172","locator":"85:1-86:33","name":"HospitalDischargeTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"172","s":[{"value":["/*Hospital Discharge Time returns the discharge time for an encounter*/","define function ","\"HospitalDischargeTime\"","(","Encounter"," "]},{"r":"168","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"171","s":[{"r":"171","s":[{"value":["end of "]},{"r":"170","s":[{"r":"169","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"170","s":[{"value":["relevantPeriod"]}]}]}]}]}]}}],"expression":{"localId":"171","locator":"86:3-86:33","type":"End","operand":{"localId":"170","locator":"86:10-86:33","path":"relevantPeriod","type":"Property","source":{"localId":"169","locator":"86:10-86:18","name":"Encounter","type":"OperandRef"}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"168","locator":"85:51-85:72","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"245","locator":"89:1-109:31","name":"HospitalizationWithObservationAndOutpatientSurgeryService","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"245","s":[{"value":["/*Hospitalization with Observation and Outpatient Surgery Service returns the total interval from the start of any immediately prior emergency department visit, outpatient surgery visit or observation visit to the discharge of the given encounter.*/","define function ","\"HospitalizationWithObservationAndOutpatientSurgeryService\"","(","Encounter"," "]},{"r":"173","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"244","s":[{"r":"244","s":[{"s":[{"r":"175","s":[{"r":"174","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"191","s":[{"value":["ObsVisit",": "]},{"r":"190","s":[{"value":["Last","("]},{"r":"189","s":[{"s":[{"r":"177","s":[{"r":"176","s":[{"r":"176","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Observation Services\""]}]},{"value":["]"]}]}]},{"value":[" ","LastObs"]}]}]},{"value":["\n  \t\t\t"]},{"r":"184","s":[{"value":["where "]},{"r":"184","s":[{"r":"179","s":[{"r":"178","s":[{"value":["LastObs"]}]},{"value":["."]},{"r":"179","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"184","s":[{"value":["ends "]},{"r":"183","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"182","s":[{"value":["start of "]},{"r":"181","s":[{"r":"180","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"181","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"188","s":[{"value":["sort by \n  \t\t\t"]},{"r":"187","s":[{"r":"186","s":[{"value":["end of "]},{"r":"185","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]},{"value":[",\n  \t"]},{"r":"199","s":[{"value":["VisitStart",": "]},{"r":"198","s":[{"value":["Coalesce","("]},{"r":"194","s":[{"value":["start of "]},{"r":"193","s":[{"r":"192","s":[{"value":["ObsVisit"]}]},{"value":["."]},{"r":"193","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"197","s":[{"value":["start of "]},{"r":"196","s":[{"r":"195","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"196","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]}]},{"value":[",\n  \t"]},{"r":"213","s":[{"value":["EDVisit",": "]},{"r":"212","s":[{"value":["Last","("]},{"r":"211","s":[{"s":[{"r":"201","s":[{"r":"200","s":[{"r":"200","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"206","s":[{"value":["where "]},{"r":"206","s":[{"r":"203","s":[{"r":"202","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"203","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"206","s":[{"value":["ends "]},{"r":"205","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"204","s":[{"value":["VisitStart"]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"210","s":[{"value":["sort by \n  \t\t\t"]},{"r":"209","s":[{"r":"208","s":[{"value":["end of "]},{"r":"207","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]},{"value":[",\n  \t"]},{"r":"219","s":[{"value":["VisitStartWithED",": "]},{"r":"218","s":[{"value":["Coalesce","("]},{"r":"216","s":[{"value":["start of "]},{"r":"215","s":[{"r":"214","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"215","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"217","s":[{"value":["VisitStart"]}]},{"value":[")"]}]}]},{"value":[",\n  \t"]},{"r":"233","s":[{"value":["OutpatientSurgeryVisit",": "]},{"r":"232","s":[{"value":["Last","("]},{"r":"231","s":[{"s":[{"r":"221","s":[{"r":"220","s":[{"r":"220","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Outpatient Surgery Service\""]}]},{"value":["]"]}]}]},{"value":[" ","LastSurgeryOP"]}]}]},{"value":["\n  \t\t\t"]},{"r":"226","s":[{"value":["where "]},{"r":"226","s":[{"r":"223","s":[{"r":"222","s":[{"value":["LastSurgeryOP"]}]},{"value":["."]},{"r":"223","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"226","s":[{"value":["ends "]},{"r":"225","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"224","s":[{"value":["VisitStartWithED"]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"230","s":[{"value":["sort by \n  \t\t\t"]},{"r":"229","s":[{"r":"228","s":[{"value":["end of "]},{"r":"227","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"243","s":[{"value":["return "]},{"r":"242","s":[{"value":["Interval["]},{"r":"238","s":[{"value":["Coalesce","("]},{"r":"236","s":[{"value":["start of "]},{"r":"235","s":[{"r":"234","s":[{"value":["OutpatientSurgeryVisit"]}]},{"value":["."]},{"r":"235","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"237","s":[{"value":["VisitStartWithED"]}]},{"value":[")"]}]},{"value":[", \n  \t"]},{"r":"241","s":[{"value":["end of "]},{"r":"240","s":[{"r":"239","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"240","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["]"]}]}]}]}]}]}}],"expression":{"localId":"244","locator":"90:3-109:31","type":"Query","source":[{"localId":"175","locator":"90:3-90:17","alias":"Visit","expression":{"localId":"174","locator":"90:3-90:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"191","locator":"91:8-95:4","identifier":"ObsVisit","expression":{"localId":"190","locator":"91:18-95:4","type":"Last","source":{"localId":"189","locator":"91:23-94:26","type":"Query","source":[{"localId":"177","locator":"91:23-91:78","alias":"LastObs","expression":{"localId":"176","locator":"91:23-91:70","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"91:48-91:69","name":"Observation Services","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"184","locator":"92:6-92:96","type":"And","operand":[{"locator":"92:40-92:53","type":"In","operand":[{"locator":"92:35-92:38","type":"End","operand":{"localId":"179","locator":"92:12-92:33","path":"relevantPeriod","scope":"LastObs","type":"Property"}},{"locator":"92:40-92:53","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"92:68-92:96","type":"Subtract","operand":[{"localId":"182","locator":"92:68-92:96","type":"Start","operand":{"localId":"181","locator":"92:77-92:96","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"183","locator":"92:40-92:45","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"182","locator":"92:68-92:96","type":"Start","operand":{"localId":"181","locator":"92:77-92:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"92:40-92:53","type":"Not","operand":{"locator":"92:40-92:53","type":"IsNull","operand":{"localId":"182","locator":"92:68-92:96","type":"Start","operand":{"localId":"181","locator":"92:77-92:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"188","locator":"93:6-94:26","by":[{"localId":"187","locator":"94:6-94:26","direction":"asc","type":"ByExpression","expression":{"localId":"186","locator":"94:6-94:26","type":"End","operand":{"localId":"185","locator":"94:13-94:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}},{"localId":"199","locator":"96:4-96:88","identifier":"VisitStart","expression":{"localId":"198","locator":"96:16-96:88","type":"Coalesce","operand":[{"localId":"194","locator":"96:25-96:56","type":"Start","operand":{"localId":"193","locator":"96:34-96:56","path":"relevantPeriod","type":"Property","source":{"localId":"192","locator":"96:34-96:41","name":"ObsVisit","type":"QueryLetRef"}}},{"localId":"197","locator":"96:59-96:87","type":"Start","operand":{"localId":"196","locator":"96:68-96:87","path":"relevantPeriod","scope":"Visit","type":"Property"}}]}},{"localId":"213","locator":"97:4-101:4","identifier":"EDVisit","expression":{"localId":"212","locator":"97:13-101:4","type":"Last","source":{"localId":"211","locator":"97:18-100:26","type":"Query","source":[{"localId":"201","locator":"97:18-97:78","alias":"LastED","expression":{"localId":"200","locator":"97:18-97:71","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"97:43-97:70","name":"Emergency Department Visit","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"206","locator":"98:6-98:76","type":"And","operand":[{"locator":"98:39-98:52","type":"In","operand":[{"locator":"98:34-98:37","type":"End","operand":{"localId":"203","locator":"98:12-98:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"98:39-98:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"98:67-98:76","type":"Subtract","operand":[{"localId":"204","locator":"98:67-98:76","name":"VisitStart","type":"QueryLetRef"},{"localId":"205","locator":"98:39-98:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"204","locator":"98:67-98:76","name":"VisitStart","type":"QueryLetRef"}}]},{"locator":"98:39-98:52","type":"Not","operand":{"locator":"98:39-98:52","type":"IsNull","operand":{"localId":"204","locator":"98:67-98:76","name":"VisitStart","type":"QueryLetRef"}}}]},"sort":{"localId":"210","locator":"99:6-100:26","by":[{"localId":"209","locator":"100:6-100:26","direction":"asc","type":"ByExpression","expression":{"localId":"208","locator":"100:6-100:26","type":"End","operand":{"localId":"207","locator":"100:13-100:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}},{"localId":"219","locator":"102:4-102:74","identifier":"VisitStartWithED","expression":{"localId":"218","locator":"102:22-102:74","type":"Coalesce","operand":[{"localId":"216","locator":"102:31-102:61","type":"Start","operand":{"localId":"215","locator":"102:40-102:61","path":"relevantPeriod","type":"Property","source":{"localId":"214","locator":"102:40-102:46","name":"EDVisit","type":"QueryLetRef"}}},{"localId":"217","locator":"102:64-102:73","name":"VisitStart","type":"QueryLetRef"}]}},{"localId":"233","locator":"103:4-107:4","identifier":"OutpatientSurgeryVisit","expression":{"localId":"232","locator":"103:28-107:4","type":"Last","source":{"localId":"231","locator":"103:33-106:26","type":"Query","source":[{"localId":"221","locator":"103:33-103:100","alias":"LastSurgeryOP","expression":{"localId":"220","locator":"103:33-103:86","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"103:58-103:85","name":"Outpatient Surgery Service","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"226","locator":"104:6-104:89","type":"And","operand":[{"locator":"104:46-104:59","type":"In","operand":[{"locator":"104:41-104:44","type":"End","operand":{"localId":"223","locator":"104:12-104:39","path":"relevantPeriod","scope":"LastSurgeryOP","type":"Property"}},{"locator":"104:46-104:59","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"104:74-104:89","type":"Subtract","operand":[{"localId":"224","locator":"104:74-104:89","name":"VisitStartWithED","type":"QueryLetRef"},{"localId":"225","locator":"104:46-104:51","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"224","locator":"104:74-104:89","name":"VisitStartWithED","type":"QueryLetRef"}}]},{"locator":"104:46-104:59","type":"Not","operand":{"locator":"104:46-104:59","type":"IsNull","operand":{"localId":"224","locator":"104:74-104:89","name":"VisitStartWithED","type":"QueryLetRef"}}}]},"sort":{"localId":"230","locator":"105:6-106:26","by":[{"localId":"229","locator":"106:6-106:26","direction":"asc","type":"ByExpression","expression":{"localId":"228","locator":"106:6-106:26","type":"End","operand":{"localId":"227","locator":"106:13-106:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"243","locator":"108:4-109:31","expression":{"localId":"242","locator":"108:11-109:31","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"238","locator":"108:20-108:93","type":"Coalesce","operand":[{"localId":"236","locator":"108:29-108:74","type":"Start","operand":{"localId":"235","locator":"108:38-108:74","path":"relevantPeriod","type":"Property","source":{"localId":"234","locator":"108:38-108:59","name":"OutpatientSurgeryVisit","type":"QueryLetRef"}}},{"localId":"237","locator":"108:77-108:92","name":"VisitStartWithED","type":"QueryLetRef"}]},"high":{"localId":"241","locator":"109:4-109:30","type":"End","operand":{"localId":"240","locator":"109:11-109:30","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"173","locator":"89:87-89:108","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"298","locator":"112:1-126:31","name":"HospitalizationWithObservation","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"298","s":[{"value":["/*Hospitalization with Observation returns the total interval from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/","define function ","\"HospitalizationWithObservation\"","(","Encounter"," "]},{"r":"246","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"297","s":[{"r":"297","s":[{"s":[{"r":"248","s":[{"r":"247","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"264","s":[{"value":["ObsVisit",": "]},{"r":"263","s":[{"value":["Last","("]},{"r":"262","s":[{"s":[{"r":"250","s":[{"r":"249","s":[{"r":"249","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Observation Services\""]}]},{"value":["]"]}]}]},{"value":[" ","LastObs"]}]}]},{"value":["\n  \t\t\t"]},{"r":"257","s":[{"value":["where "]},{"r":"257","s":[{"r":"252","s":[{"r":"251","s":[{"value":["LastObs"]}]},{"value":["."]},{"r":"252","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"257","s":[{"value":["ends "]},{"r":"256","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"255","s":[{"value":["start of "]},{"r":"254","s":[{"r":"253","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"254","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"261","s":[{"value":["sort by \n  \t\t\t"]},{"r":"260","s":[{"r":"259","s":[{"value":["end of "]},{"r":"258","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]},{"value":[",\n  \t"]},{"r":"272","s":[{"value":["VisitStart",": "]},{"r":"271","s":[{"value":["Coalesce","("]},{"r":"267","s":[{"value":["start of "]},{"r":"266","s":[{"r":"265","s":[{"value":["ObsVisit"]}]},{"value":["."]},{"r":"266","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"270","s":[{"value":["start of "]},{"r":"269","s":[{"r":"268","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"269","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]}]},{"value":[",\n  \t"]},{"r":"286","s":[{"value":["EDVisit",": "]},{"r":"285","s":[{"value":["Last","("]},{"r":"284","s":[{"s":[{"r":"274","s":[{"r":"273","s":[{"r":"273","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"279","s":[{"value":["where "]},{"r":"279","s":[{"r":"276","s":[{"r":"275","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"276","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"279","s":[{"value":["ends "]},{"r":"278","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"277","s":[{"value":["VisitStart"]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"283","s":[{"value":["sort by \n  \t\t\t"]},{"r":"282","s":[{"r":"281","s":[{"value":["end of "]},{"r":"280","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"296","s":[{"value":["return "]},{"r":"295","s":[{"value":["Interval["]},{"r":"291","s":[{"value":["Coalesce","("]},{"r":"289","s":[{"value":["start of "]},{"r":"288","s":[{"r":"287","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"288","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"290","s":[{"value":["VisitStart"]}]},{"value":[")"]}]},{"value":[", \n  \t"]},{"r":"294","s":[{"value":["end of "]},{"r":"293","s":[{"r":"292","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"293","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["]"]}]}]}]}]}]}}],"expression":{"localId":"297","locator":"113:3-126:31","type":"Query","source":[{"localId":"248","locator":"113:3-113:17","alias":"Visit","expression":{"localId":"247","locator":"113:3-113:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"264","locator":"114:8-118:4","identifier":"ObsVisit","expression":{"localId":"263","locator":"114:18-118:4","type":"Last","source":{"localId":"262","locator":"114:23-117:26","type":"Query","source":[{"localId":"250","locator":"114:23-114:78","alias":"LastObs","expression":{"localId":"249","locator":"114:23-114:70","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"114:48-114:69","name":"Observation Services","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"257","locator":"115:6-115:96","type":"And","operand":[{"locator":"115:40-115:53","type":"In","operand":[{"locator":"115:35-115:38","type":"End","operand":{"localId":"252","locator":"115:12-115:33","path":"relevantPeriod","scope":"LastObs","type":"Property"}},{"locator":"115:40-115:53","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"115:68-115:96","type":"Subtract","operand":[{"localId":"255","locator":"115:68-115:96","type":"Start","operand":{"localId":"254","locator":"115:77-115:96","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"256","locator":"115:40-115:45","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"255","locator":"115:68-115:96","type":"Start","operand":{"localId":"254","locator":"115:77-115:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"115:40-115:53","type":"Not","operand":{"locator":"115:40-115:53","type":"IsNull","operand":{"localId":"255","locator":"115:68-115:96","type":"Start","operand":{"localId":"254","locator":"115:77-115:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"261","locator":"116:6-117:26","by":[{"localId":"260","locator":"117:6-117:26","direction":"asc","type":"ByExpression","expression":{"localId":"259","locator":"117:6-117:26","type":"End","operand":{"localId":"258","locator":"117:13-117:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}},{"localId":"272","locator":"119:4-119:88","identifier":"VisitStart","expression":{"localId":"271","locator":"119:16-119:88","type":"Coalesce","operand":[{"localId":"267","locator":"119:25-119:56","type":"Start","operand":{"localId":"266","locator":"119:34-119:56","path":"relevantPeriod","type":"Property","source":{"localId":"265","locator":"119:34-119:41","name":"ObsVisit","type":"QueryLetRef"}}},{"localId":"270","locator":"119:59-119:87","type":"Start","operand":{"localId":"269","locator":"119:68-119:87","path":"relevantPeriod","scope":"Visit","type":"Property"}}]}},{"localId":"286","locator":"120:4-124:4","identifier":"EDVisit","expression":{"localId":"285","locator":"120:13-124:4","type":"Last","source":{"localId":"284","locator":"120:18-123:26","type":"Query","source":[{"localId":"274","locator":"120:18-120:78","alias":"LastED","expression":{"localId":"273","locator":"120:18-120:71","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"120:43-120:70","name":"Emergency Department Visit","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"279","locator":"121:6-121:76","type":"And","operand":[{"locator":"121:39-121:52","type":"In","operand":[{"locator":"121:34-121:37","type":"End","operand":{"localId":"276","locator":"121:12-121:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"121:39-121:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"121:67-121:76","type":"Subtract","operand":[{"localId":"277","locator":"121:67-121:76","name":"VisitStart","type":"QueryLetRef"},{"localId":"278","locator":"121:39-121:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"277","locator":"121:67-121:76","name":"VisitStart","type":"QueryLetRef"}}]},{"locator":"121:39-121:52","type":"Not","operand":{"locator":"121:39-121:52","type":"IsNull","operand":{"localId":"277","locator":"121:67-121:76","name":"VisitStart","type":"QueryLetRef"}}}]},"sort":{"localId":"283","locator":"122:6-123:26","by":[{"localId":"282","locator":"123:6-123:26","direction":"asc","type":"ByExpression","expression":{"localId":"281","locator":"123:6-123:26","type":"End","operand":{"localId":"280","locator":"123:13-123:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"296","locator":"125:4-126:31","expression":{"localId":"295","locator":"125:11-126:31","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"291","locator":"125:20-125:72","type":"Coalesce","operand":[{"localId":"289","locator":"125:29-125:59","type":"Start","operand":{"localId":"288","locator":"125:38-125:59","path":"relevantPeriod","type":"Property","source":{"localId":"287","locator":"125:38-125:44","name":"EDVisit","type":"QueryLetRef"}}},{"localId":"290","locator":"125:62-125:71","name":"VisitStart","type":"QueryLetRef"}]},"high":{"localId":"294","locator":"126:4-126:30","type":"End","operand":{"localId":"293","locator":"126:11-126:30","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"246","locator":"112:60-112:81","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"303","locator":"129:1-130:61","name":"HospitalizationWithObservationLengthofStay","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"303","s":[{"value":["/*Hospitalization with Observation Length of Stay returns the length in days from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/","define function ","\"HospitalizationWithObservationLengthofStay\"","(","Encounter"," "]},{"r":"299","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"302","s":[{"r":"302","s":[{"value":["\"LengthInDays\"","("]},{"r":"301","s":[{"value":["\"HospitalizationWithObservation\"","("]},{"r":"300","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"302","locator":"130:3-130:61","name":"LengthInDays","type":"FunctionRef","operand":[{"localId":"301","locator":"130:18-130:60","name":"HospitalizationWithObservation","type":"FunctionRef","operand":[{"localId":"300","locator":"130:51-130:59","name":"Encounter","type":"OperandRef"}]}]},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"299","locator":"129:72-129:93","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"324","locator":"133:1-138:3","name":"FirstInpatientIntensiveCareUnit","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"324","s":[{"value":["/*First Inpatient Intensive Care Unit returns the first intensive care unit for the given encounter, without considering any immediately prior emergency department visit.*/","define function ","\"FirstInpatientIntensiveCareUnit\"","(","Encounter"," "]},{"r":"304","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"323","s":[{"r":"323","s":[{"value":["First","("]},{"r":"322","s":[{"s":[{"r":"307","s":[{"r":"306","s":[{"value":["("]},{"r":"306","s":[{"r":"305","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"306","s":[{"value":["facilityLocations"]}]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n      "]},{"r":"317","s":[{"value":["where "]},{"r":"317","s":[{"r":"311","s":[{"r":"309","s":[{"r":"308","s":[{"value":["HospitalLocation"]}]},{"value":["."]},{"r":"309","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"310","s":[{"value":["\"Intensive Care Unit\""]}]}]},{"value":["\n        and "]},{"r":"316","s":[{"r":"313","s":[{"r":"312","s":[{"value":["HospitalLocation"]}]},{"value":["."]},{"r":"313","s":[{"value":["locationPeriod"]}]}]},{"r":"316","value":[" ","during"," "]},{"r":"315","s":[{"r":"314","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"315","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n      "]},{"r":"321","s":[{"value":["sort by "]},{"r":"320","s":[{"r":"319","s":[{"value":["start of "]},{"r":"318","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]}]}]}}],"expression":{"localId":"323","locator":"134:3-138:3","type":"First","source":{"localId":"322","locator":"134:9-137:37","type":"Query","source":[{"localId":"307","locator":"134:9-134:53","alias":"HospitalLocation","expression":{"localId":"306","locator":"134:9-134:37","path":"facilityLocations","type":"Property","source":{"localId":"305","locator":"134:10-134:18","name":"Encounter","type":"OperandRef"}}}],"relationship":[],"where":{"localId":"317","locator":"135:7-136:75","type":"And","operand":[{"localId":"311","locator":"135:13-135:58","type":"InValueSet","code":{"localId":"309","locator":"135:13-135:33","path":"code","scope":"HospitalLocation","type":"Property"},"valueset":{"localId":"310","locator":"135:38-135:58","name":"Intensive Care Unit","type":"ValueSetRef"}},{"localId":"316","locator":"136:13-136:75","type":"IncludedIn","operand":[{"localId":"313","locator":"136:13-136:43","path":"locationPeriod","scope":"HospitalLocation","type":"Property"},{"localId":"315","locator":"136:52-136:75","path":"relevantPeriod","type":"Property","source":{"localId":"314","locator":"136:52-136:60","name":"Encounter","type":"OperandRef"}}]}]},"sort":{"localId":"321","locator":"137:7-137:37","by":[{"localId":"320","locator":"137:15-137:37","direction":"asc","type":"ByExpression","expression":{"localId":"319","locator":"137:15-137:37","type":"Start","operand":{"localId":"318","locator":"137:24-137:37","name":"locationPeriod","type":"IdentifierRef"}}}]}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"304","locator":"133:61-133:82","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"342","locator":"141:1-144:35","name":"NormalizeInterval","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"342","s":[{"value":["/*Given a datetime and a period, returns the period (if a period is provided) or the interval beginning and ending on the datetime (if a datetime is provided)*/","define function ","\"NormalizeInterval\"","(","pointInTime"," "]},{"r":"325","s":[{"value":["DateTime"]}]},{"value":[", ","period"," "]},{"r":"327","s":[{"value":["Interval\u003c"]},{"r":"326","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"341","s":[{"r":"341","s":[{"value":["if "]},{"r":"329","s":[{"r":"328","s":[{"value":["pointInTime"]}]},{"value":[" is not null"]}]},{"value":[" then "]},{"r":"332","s":[{"value":["Interval["]},{"r":"330","s":[{"value":["pointInTime"]}]},{"value":[", "]},{"r":"331","s":[{"value":["pointInTime"]}]},{"value":["]"]}]},{"value":["\n    else "]},{"r":"340","s":[{"value":["if "]},{"r":"334","s":[{"r":"333","s":[{"value":["period"]}]},{"value":[" is not null"]}]},{"value":[" then "]},{"r":"335","s":[{"value":["period"]}]},{"value":[" \n    else "]},{"r":"339","s":[{"r":"336","value":["null"," as "]},{"r":"338","s":[{"value":["Interval\u003c"]},{"r":"337","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}]}]}]}]}}],"expression":{"localId":"341","locator":"142:3-144:35","type":"If","condition":{"localId":"329","locator":"142:6-142:28","type":"Not","operand":{"locator":"142:6-142:28","type":"IsNull","operand":{"localId":"328","locator":"142:6-142:16","name":"pointInTime","type":"OperandRef"}}},"then":{"localId":"332","locator":"142:35-142:68","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"330","locator":"142:44-142:54","name":"pointInTime","type":"OperandRef"},"high":{"localId":"331","locator":"142:57-142:67","name":"pointInTime","type":"OperandRef"}},"else":{"localId":"340","locator":"143:10-144:35","type":"If","condition":{"localId":"334","locator":"143:13-143:30","type":"Not","operand":{"locator":"143:13-143:30","type":"IsNull","operand":{"localId":"333","locator":"143:13-143:18","name":"period","type":"OperandRef"}}},"then":{"localId":"335","locator":"143:37-143:42","name":"period","type":"OperandRef"},"else":{"localId":"339","locator":"144:10-144:35","strict":false,"type":"As","operand":{"localId":"336","locator":"144:10-144:13","type":"Null"},"asTypeSpecifier":{"localId":"338","locator":"144:18-144:35","type":"IntervalTypeSpecifier","pointType":{"localId":"337","locator":"144:27-144:34","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}},"operand":[{"name":"pointInTime","operandTypeSpecifier":{"localId":"325","locator":"141:49-141:56","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"name":"period","operandTypeSpecifier":{"localId":"327","locator":"141:66-141:83","type":"IntervalTypeSpecifier","pointType":{"localId":"326","locator":"141:75-141:82","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"355","locator":"147:1-150:3","name":"HasStart","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"355","s":[{"value":["/*Given an interval, return true if the interval has a starting boundary specified (i.e. the start of the interval is not null and not the minimum DateTime value)*/","define function ","\"HasStart\"","(","period"," "]},{"r":"344","s":[{"value":["Interval\u003c"]},{"r":"343","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"354","s":[{"r":"354","s":[{"value":["not "]},{"r":"353","s":[{"value":["( "]},{"r":"353","s":[{"r":"347","s":[{"r":"346","s":[{"value":["start of "]},{"r":"345","s":[{"value":["period"]}]}]},{"value":[" is null"]}]},{"value":["\n      or "]},{"r":"352","s":[{"r":"349","s":[{"value":["start of "]},{"r":"348","s":[{"value":["period"]}]}]},{"value":[" ","="," "]},{"r":"351","s":[{"value":["minimum"," "]},{"r":"350","s":[{"value":["DateTime"]}]}]}]}]},{"value":["\n  )"]}]}]}]}]}}],"expression":{"localId":"354","locator":"148:3-150:3","type":"Not","operand":{"localId":"353","locator":"148:7-150:3","type":"Or","operand":[{"localId":"347","locator":"148:9-148:31","type":"IsNull","operand":{"localId":"346","locator":"148:9-148:23","type":"Start","operand":{"localId":"345","locator":"148:18-148:23","name":"period","type":"OperandRef"}}},{"localId":"352","locator":"149:10-149:43","type":"Equal","operand":[{"localId":"349","locator":"149:10-149:24","type":"Start","operand":{"localId":"348","locator":"149:19-149:24","name":"period","type":"OperandRef"}},{"localId":"351","locator":"149:28-149:43","valueType":"{urn:hl7-org:elm-types:r1}DateTime","type":"MinValue"}]}]}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"344","locator":"147:35-147:52","type":"IntervalTypeSpecifier","pointType":{"localId":"343","locator":"147:44-147:51","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"368","locator":"153:1-158:3","name":"HasEnd","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"368","s":[{"value":["/*Given an interval, return true if the interval has an ending boundary specified (i.e. the end of the interval is not null and not the maximum DateTime value)*/","define function ","\"HasEnd\"","(","period"," "]},{"r":"357","s":[{"value":["Interval\u003c"]},{"r":"356","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"367","s":[{"r":"367","s":[{"value":["not "]},{"r":"366","s":[{"value":["( \n    "]},{"r":"366","s":[{"r":"360","s":[{"r":"359","s":[{"value":["end of "]},{"r":"358","s":[{"value":["period"]}]}]},{"value":[" is null"]}]},{"value":["\n      or \n      "]},{"r":"365","s":[{"r":"362","s":[{"value":["end of "]},{"r":"361","s":[{"value":["period"]}]}]},{"value":[" ","="," "]},{"r":"364","s":[{"value":["maximum"," "]},{"r":"363","s":[{"value":["DateTime"]}]}]}]}]},{"value":["\n  )"]}]}]}]}]}}],"expression":{"localId":"367","locator":"154:3-158:3","type":"Not","operand":{"localId":"366","locator":"154:7-158:3","type":"Or","operand":[{"localId":"360","locator":"155:5-155:25","type":"IsNull","operand":{"localId":"359","locator":"155:5-155:17","type":"End","operand":{"localId":"358","locator":"155:12-155:17","name":"period","type":"OperandRef"}}},{"localId":"365","locator":"157:7-157:38","type":"Equal","operand":[{"localId":"362","locator":"157:7-157:19","type":"End","operand":{"localId":"361","locator":"157:14-157:19","name":"period","type":"OperandRef"}},{"localId":"364","locator":"157:23-157:38","valueType":"{urn:hl7-org:elm-types:r1}DateTime","type":"MaxValue"}]}]}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"357","locator":"153:33-153:50","type":"IntervalTypeSpecifier","pointType":{"localId":"356","locator":"153:42-153:49","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"378","locator":"161:1-164:24","name":"Latest","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"378","s":[{"value":["/*Given an interval, return the ending point if the interval has an ending boundary specified, otherwise, return the starting point*/","define function ","\"Latest\"","(","period"," "]},{"r":"370","s":[{"value":["Interval\u003c"]},{"r":"369","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"377","s":[{"r":"377","s":[{"value":["if "]},{"r":"372","s":[{"value":["( "]},{"r":"372","s":[{"value":["HasEnd","("]},{"r":"371","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":[" then \n  "]},{"r":"374","s":[{"value":["end of "]},{"r":"373","s":[{"value":["period"]}]}]},{"value":[" \n    else "]},{"r":"376","s":[{"value":["start of "]},{"r":"375","s":[{"value":["period"]}]}]}]}]}]}}],"expression":{"localId":"377","locator":"162:3-164:24","type":"If","condition":{"localId":"372","locator":"162:6-162:22","name":"HasEnd","type":"FunctionRef","operand":[{"localId":"371","locator":"162:15-162:20","name":"period","type":"OperandRef"}]},"then":{"localId":"374","locator":"163:3-163:15","type":"End","operand":{"localId":"373","locator":"163:10-163:15","name":"period","type":"OperandRef"}},"else":{"localId":"376","locator":"164:10-164:24","type":"Start","operand":{"localId":"375","locator":"164:19-164:24","name":"period","type":"OperandRef"}}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"370","locator":"161:33-161:50","type":"IntervalTypeSpecifier","pointType":{"localId":"369","locator":"161:42-161:49","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"388","locator":"167:1-170:15","name":"Earliest","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"388","s":[{"value":["/*Given an interval, return the starting point if the interval has a starting boundary specified, otherwise, return the ending point*/","define function ","\"Earliest\"","(","period"," "]},{"r":"380","s":[{"value":["Interval\u003c"]},{"r":"379","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"387","s":[{"r":"387","s":[{"value":["if "]},{"r":"382","s":[{"value":["( "]},{"r":"382","s":[{"value":["HasStart","("]},{"r":"381","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":[" then "]},{"r":"384","s":[{"value":["start of "]},{"r":"383","s":[{"value":["period"]}]}]},{"value":[" \n    else \n  "]},{"r":"386","s":[{"value":["end of "]},{"r":"385","s":[{"value":["period"]}]}]}]}]}]}}],"expression":{"localId":"387","locator":"168:3-170:15","type":"If","condition":{"localId":"382","locator":"168:6-168:24","name":"HasStart","type":"FunctionRef","operand":[{"localId":"381","locator":"168:17-168:22","name":"period","type":"OperandRef"}]},"then":{"localId":"384","locator":"168:31-168:45","type":"Start","operand":{"localId":"383","locator":"168:40-168:45","name":"period","type":"OperandRef"}},"else":{"localId":"386","locator":"170:3-170:15","type":"End","operand":{"localId":"385","locator":"170:10-170:15","name":"period","type":"OperandRef"}}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"380","locator":"167:35-167:52","type":"IntervalTypeSpecifier","pointType":{"localId":"379","locator":"167:44-167:51","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"396","locator":"173:1-174:48","name":"LatestOf","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"396","s":[{"value":["/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the ending point of the period if the period has an ending boundary specified, otherwise returns the starting point of the interval*/","define function ","\"LatestOf\"","(","pointInTime"," "]},{"r":"389","s":[{"value":["DateTime"]}]},{"value":[", ","period"," "]},{"r":"391","s":[{"value":["Interval\u003c"]},{"r":"390","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"395","s":[{"r":"395","s":[{"value":["Latest","("]},{"r":"394","s":[{"value":["NormalizeInterval","("]},{"r":"392","s":[{"value":["pointInTime"]}]},{"value":[", "]},{"r":"393","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"395","locator":"174:3-174:48","name":"Latest","type":"FunctionRef","operand":[{"localId":"394","locator":"174:10-174:47","name":"NormalizeInterval","type":"FunctionRef","operand":[{"localId":"392","locator":"174:28-174:38","name":"pointInTime","type":"OperandRef"},{"localId":"393","locator":"174:41-174:46","name":"period","type":"OperandRef"}]}]},"operand":[{"name":"pointInTime","operandTypeSpecifier":{"localId":"389","locator":"173:40-173:47","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"name":"period","operandTypeSpecifier":{"localId":"391","locator":"173:57-173:74","type":"IntervalTypeSpecifier","pointType":{"localId":"390","locator":"173:66-173:73","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"404","locator":"177:1-178:50","name":"EarliestOf","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"404","s":[{"value":["/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the starting point of the period if the period has a starting boundary specified, otherwise returns the ending point of the period*/","define function ","\"EarliestOf\"","(","pointInTime"," "]},{"r":"397","s":[{"value":["DateTime"]}]},{"value":[", ","period"," "]},{"r":"399","s":[{"value":["Interval\u003c"]},{"r":"398","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"403","s":[{"r":"403","s":[{"value":["Earliest","("]},{"r":"402","s":[{"value":["NormalizeInterval","("]},{"r":"400","s":[{"value":["pointInTime"]}]},{"value":[", "]},{"r":"401","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"403","locator":"178:3-178:50","name":"Earliest","type":"FunctionRef","operand":[{"localId":"402","locator":"178:12-178:49","name":"NormalizeInterval","type":"FunctionRef","operand":[{"localId":"400","locator":"178:30-178:40","name":"pointInTime","type":"OperandRef"},{"localId":"401","locator":"178:43-178:48","name":"period","type":"OperandRef"}]}]},"operand":[{"name":"pointInTime","operandTypeSpecifier":{"localId":"397","locator":"177:42-177:49","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"name":"period","operandTypeSpecifier":{"localId":"399","locator":"177:59-177:76","type":"IntervalTypeSpecifier","pointType":{"localId":"398","locator":"177:68-177:75","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]}]}}},"elm_annotations":{"statements":[{"children":[{"children":[{"children":[{"text":"define \"ED Encounter\":\n  "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"10"}],"ref_id":"11"}],"define_name":"ED Encounter"},{"children":[{"children":[{"children":[{"text":"/*calculates the difference in calendar days between the start and end of the given interval.*/define function \"LengthInDays\"(Value "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"16"},{"children":[{"text":"\u003e"}]}],"ref_id":"17"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"difference in days between "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"Value"}]}],"node_type":"OperandRef","ref_id":"18"}],"node_type":"Start","ref_id":"19"},{"children":[{"text":" and "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"Value"}]}],"node_type":"OperandRef","ref_id":"20"}],"node_type":"End","ref_id":"21"}],"node_type":"DifferenceBetween","ref_id":"22"}],"node_type":"DifferenceBetween","ref_id":"22"}],"ref_id":"23"}],"define_name":"LengthInDays"},{"children":[{"children":[{"children":[{"text":"define \"Inpatient Encounter\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Encounter Inpatient\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"12"}],"node_type":"Retrieve","ref_id":"12"},{"children":[{"text":" EncounterInpatient"}]}],"ref_id":"13"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"LengthInDays\"("}]},{"children":[{"children":[{"children":[{"text":"EncounterInpatient"}]}],"ref_id":"14"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"15"}],"node_type":"Property","ref_id":"15"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"24"},{"children":[{"text":"\u003c= 120"}],"node_type":"Literal","ref_id":"25"}],"node_type":"LessOrEqual","ref_id":"26"},{"children":[{"text":"\n      and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"EncounterInpatient"}]}],"ref_id":"27"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"28"}],"node_type":"Property","ref_id":"28"},{"children":[{"text":" ends during day of "}],"node_type":"In","ref_id":"30"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"29"}],"node_type":"In","ref_id":"30"}],"ref_id":"31"}],"ref_id":"31"}],"node_type":"Query","ref_id":"32"}],"ref_id":"33"}],"define_name":"Inpatient Encounter"},{"children":[{"children":[]},{"children":[]},{"children":[]},{"children":[{"children":[{"text":"/*@description: Returns an interval of date values extracted from the input interval of date-time values\n@comment: This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability.*/define function \"ToDateInterval\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"34"},{"children":[{"text":"\u003e"}]}],"ref_id":"35"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"36"}],"node_type":"Start","ref_id":"37"}],"ref_id":"38"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"39"}],"node_type":"End","ref_id":"40"}],"ref_id":"41"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"42"}],"node_type":"Interval","ref_id":"42"}],"ref_id":"43"}],"define_name":"ToDateInterval"},{"children":[{"children":[{"children":[{"text":"/*returns list of all locations within an encounter, including locations for immediately prior ED visit.*/define function \"HospitalizationLocations\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"47"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"48"},{"children":[{"text":" Visit"}]}],"ref_id":"49"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"50"}],"node_type":"Retrieve","ref_id":"50"},{"children":[{"text":" LastED"}]}],"ref_id":"51"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"52"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"53"}],"node_type":"Property","ref_id":"53"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"57"},{"children":[{"text":" or less on or before"}]}],"ref_id":"58"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"54"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"55"}],"node_type":"Property","ref_id":"55"}],"node_type":"Start","ref_id":"56"}],"ref_id":"58"}],"ref_id":"58"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"59"}],"node_type":"End","ref_id":"60"}],"ref_id":"61"}],"ref_id":"62"}],"ref_id":"63"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"64"}],"ref_id":"65"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"node_type":"QueryLetRef","ref_id":"66"},{"children":[{"text":" is null"}]}],"ref_id":"67"},{"children":[{"text":" then "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"68"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"ref_id":"69"}],"ref_id":"69"},{"children":[{"text":" \n      else "}]},{"children":[{"children":[{"text":"flatten "}]},{"children":[{"children":[{"text":"{ "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"70"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"ref_id":"71"}],"ref_id":"71"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"72"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"ref_id":"73"}],"ref_id":"73"},{"children":[{"text":" }"}]}],"node_type":"List","ref_id":"74"}],"ref_id":"75"}],"node_type":"If","ref_id":"76"}],"ref_id":"77"}],"node_type":"Query","ref_id":"78"}],"node_type":"Query","ref_id":"78"}],"ref_id":"79"}],"define_name":"HospitalizationLocations"},{"children":[{"children":[{"children":[{"text":"/*Returns the arrival time in the ED for the encounter.*/define function \"EmergencyDepartmentArrivalTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"80"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"\"HospitalizationLocations\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"81"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"82"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"82"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"83"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"HospitalLocation"}]}],"ref_id":"84"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"85"}],"ref_id":"85"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}],"ref_id":"86"}],"ref_id":"87"}],"ref_id":"87"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"88"}],"node_type":"Start","ref_id":"89"}],"ref_id":"90"}],"ref_id":"91"}],"ref_id":"92"},{"children":[{"text":"\n  )"}]}],"ref_id":"93"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"94"}],"node_type":"Property","ref_id":"94"}],"node_type":"Start","ref_id":"95"}],"node_type":"Start","ref_id":"95"}],"ref_id":"96"}],"define_name":"EmergencyDepartmentArrivalTime"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization returns the total interval for admission to discharge for the given encounter, or for the admission of any immediately prior emergency department visit to the discharge of the given encounter.*/define function \"Hospitalization\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"99"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"100"},{"children":[{"text":" Visit"}]}],"ref_id":"101"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"102"}],"node_type":"Retrieve","ref_id":"102"},{"children":[{"text":" LastED"}]}],"ref_id":"103"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"104"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"105"}],"node_type":"Property","ref_id":"105"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"109"},{"children":[{"text":" or less on or before"}]}],"ref_id":"110"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"106"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"107"}],"node_type":"Property","ref_id":"107"}],"node_type":"Start","ref_id":"108"}],"ref_id":"110"}],"ref_id":"110"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"111"}],"node_type":"End","ref_id":"112"}],"ref_id":"113"}],"ref_id":"114"}],"ref_id":"115"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"116"}],"ref_id":"117"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"118"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"119"}],"node_type":"Property","ref_id":"119"}],"node_type":"Start","ref_id":"120"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"121"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"122"}],"node_type":"Property","ref_id":"122"}],"node_type":"Start","ref_id":"123"},{"children":[{"text":")"}]}],"ref_id":"124"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"125"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"126"}],"node_type":"Property","ref_id":"126"}],"ref_id":"127"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"128"}],"ref_id":"129"}],"node_type":"Query","ref_id":"130"}],"node_type":"Query","ref_id":"130"}],"ref_id":"131"}],"define_name":"Hospitalization"},{"children":[{"children":[{"children":[{"text":"/*Returns admission time for an encounter or for immediately prior emergency department visit.*/define function \"HospitalAdmissionTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"97"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"\"Hospitalization\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"98"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"132"}],"node_type":"Start","ref_id":"133"}],"node_type":"Start","ref_id":"133"}],"ref_id":"134"}],"define_name":"HospitalAdmissionTime"},{"children":[{"children":[{"children":[{"text":"/*Returns earliest arrival time for an encounter including any prior ED visit.*/define function \"HospitalArrivalTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"135"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"\"HospitalizationLocations\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"136"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"137"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"137"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"138"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"139"}],"node_type":"Start","ref_id":"140"}],"ref_id":"141"}],"ref_id":"142"}],"ref_id":"143"},{"children":[{"text":"\n  )"}]}],"ref_id":"144"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"145"}],"node_type":"Property","ref_id":"145"}],"node_type":"Start","ref_id":"146"}],"node_type":"Start","ref_id":"146"}],"ref_id":"147"}],"define_name":"HospitalArrivalTime"},{"children":[{"children":[{"children":[{"text":"/*Returns the length of stay in days (i.e. the number of days between admission and discharge) for the given encounter, or from the admission of any immediately prior emergency department visit to the discharge of the encounter*/define function \"HospitalizationLengthofStay\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"150"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"LengthInDays("}]},{"children":[{"children":[{"text":"\"Hospitalization\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"151"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"152"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"153"}],"node_type":"FunctionRef","ref_id":"153"}],"ref_id":"154"}],"define_name":"HospitalizationLengthofStay"},{"children":[{"children":[{"children":[{"text":"/*Returns the latest departure time for encounter including any prior ED visit.*/define function \"HospitalDepartureTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"155"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"\"HospitalizationLocations\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"156"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"157"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"157"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"158"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"159"}],"node_type":"Start","ref_id":"160"}],"ref_id":"161"}],"ref_id":"162"}],"ref_id":"163"},{"children":[{"text":"\n  )"}]}],"ref_id":"164"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"165"}],"node_type":"Property","ref_id":"165"}],"node_type":"End","ref_id":"166"}],"node_type":"End","ref_id":"166"}],"ref_id":"167"}],"define_name":"HospitalDepartureTime"},{"children":[{"children":[{"children":[{"text":"/*Hospital Discharge Time returns the discharge time for an encounter*/define function \"HospitalDischargeTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"168"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"169"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"170"}],"node_type":"Property","ref_id":"170"}],"node_type":"End","ref_id":"171"}],"node_type":"End","ref_id":"171"}],"ref_id":"172"}],"define_name":"HospitalDischargeTime"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization with Observation and Outpatient Surgery Service returns the total interval from the start of any immediately prior emergency department visit, outpatient surgery visit or observation visit to the discharge of the given encounter.*/define function \"HospitalizationWithObservationAndOutpatientSurgeryService\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"173"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"174"},{"children":[{"text":" Visit"}]}],"ref_id":"175"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"ObsVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Observation Services\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"176"}],"node_type":"Retrieve","ref_id":"176"},{"children":[{"text":" LastObs"}]}],"ref_id":"177"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastObs"}]}],"ref_id":"178"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"179"}],"node_type":"Property","ref_id":"179"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"183"},{"children":[{"text":" or less on or before"}]}],"ref_id":"184"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"180"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"181"}],"node_type":"Property","ref_id":"181"}],"node_type":"Start","ref_id":"182"}],"ref_id":"184"}],"ref_id":"184"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"185"}],"node_type":"End","ref_id":"186"}],"ref_id":"187"}],"ref_id":"188"}],"ref_id":"189"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"190"}],"ref_id":"191"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"VisitStart: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"ObsVisit"}]}],"ref_id":"192"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"193"}],"node_type":"Property","ref_id":"193"}],"node_type":"Start","ref_id":"194"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"195"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"196"}],"node_type":"Property","ref_id":"196"}],"node_type":"Start","ref_id":"197"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"198"}],"ref_id":"199"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"200"}],"node_type":"Retrieve","ref_id":"200"},{"children":[{"text":" LastED"}]}],"ref_id":"201"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"202"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"203"}],"node_type":"Property","ref_id":"203"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"205"},{"children":[{"text":" or less on or before"}]}],"ref_id":"206"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"204"}],"ref_id":"206"}],"ref_id":"206"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"207"}],"node_type":"End","ref_id":"208"}],"ref_id":"209"}],"ref_id":"210"}],"ref_id":"211"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"212"}],"ref_id":"213"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"VisitStartWithED: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"214"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"215"}],"node_type":"Property","ref_id":"215"}],"node_type":"Start","ref_id":"216"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"217"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"218"}],"ref_id":"219"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"OutpatientSurgeryVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Outpatient Surgery Service\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"220"}],"node_type":"Retrieve","ref_id":"220"},{"children":[{"text":" LastSurgeryOP"}]}],"ref_id":"221"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastSurgeryOP"}]}],"ref_id":"222"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"223"}],"node_type":"Property","ref_id":"223"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"225"},{"children":[{"text":" or less on or before"}]}],"ref_id":"226"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"VisitStartWithED"}]}],"node_type":"QueryLetRef","ref_id":"224"}],"ref_id":"226"}],"ref_id":"226"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"227"}],"node_type":"End","ref_id":"228"}],"ref_id":"229"}],"ref_id":"230"}],"ref_id":"231"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"232"}],"ref_id":"233"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"OutpatientSurgeryVisit"}]}],"ref_id":"234"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"235"}],"node_type":"Property","ref_id":"235"}],"node_type":"Start","ref_id":"236"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"VisitStartWithED"}]}],"node_type":"QueryLetRef","ref_id":"237"},{"children":[{"text":")"}]}],"ref_id":"238"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"239"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"240"}],"node_type":"Property","ref_id":"240"}],"ref_id":"241"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"242"}],"ref_id":"243"}],"node_type":"Query","ref_id":"244"}],"node_type":"Query","ref_id":"244"}],"ref_id":"245"}],"define_name":"HospitalizationWithObservationAndOutpatientSurgeryService"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization with Observation returns the total interval from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/define function \"HospitalizationWithObservation\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"246"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"247"},{"children":[{"text":" Visit"}]}],"ref_id":"248"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"ObsVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Observation Services\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"249"}],"node_type":"Retrieve","ref_id":"249"},{"children":[{"text":" LastObs"}]}],"ref_id":"250"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastObs"}]}],"ref_id":"251"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"252"}],"node_type":"Property","ref_id":"252"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"256"},{"children":[{"text":" or less on or before"}]}],"ref_id":"257"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"253"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"254"}],"node_type":"Property","ref_id":"254"}],"node_type":"Start","ref_id":"255"}],"ref_id":"257"}],"ref_id":"257"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"258"}],"node_type":"End","ref_id":"259"}],"ref_id":"260"}],"ref_id":"261"}],"ref_id":"262"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"263"}],"ref_id":"264"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"VisitStart: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"ObsVisit"}]}],"ref_id":"265"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"266"}],"node_type":"Property","ref_id":"266"}],"node_type":"Start","ref_id":"267"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"268"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"269"}],"node_type":"Property","ref_id":"269"}],"node_type":"Start","ref_id":"270"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"271"}],"ref_id":"272"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"273"}],"node_type":"Retrieve","ref_id":"273"},{"children":[{"text":" LastED"}]}],"ref_id":"274"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"275"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"276"}],"node_type":"Property","ref_id":"276"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"278"},{"children":[{"text":" or less on or before"}]}],"ref_id":"279"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"277"}],"ref_id":"279"}],"ref_id":"279"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"280"}],"node_type":"End","ref_id":"281"}],"ref_id":"282"}],"ref_id":"283"}],"ref_id":"284"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"285"}],"ref_id":"286"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"287"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"288"}],"node_type":"Property","ref_id":"288"}],"node_type":"Start","ref_id":"289"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"290"},{"children":[{"text":")"}]}],"ref_id":"291"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"292"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"293"}],"node_type":"Property","ref_id":"293"}],"ref_id":"294"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"295"}],"ref_id":"296"}],"node_type":"Query","ref_id":"297"}],"node_type":"Query","ref_id":"297"}],"ref_id":"298"}],"define_name":"HospitalizationWithObservation"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization with Observation Length of Stay returns the length in days from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/define function \"HospitalizationWithObservationLengthofStay\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"299"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"\"LengthInDays\"("}]},{"children":[{"children":[{"text":"\"HospitalizationWithObservation\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"300"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"301"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"302"}],"node_type":"FunctionRef","ref_id":"302"}],"ref_id":"303"}],"define_name":"HospitalizationWithObservationLengthofStay"},{"children":[{"children":[{"children":[{"text":"/*First Inpatient Intensive Care Unit returns the first intensive care unit for the given encounter, without considering any immediately prior emergency department visit.*/define function \"FirstInpatientIntensiveCareUnit\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"304"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"305"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"node_type":"Property","ref_id":"306"}],"node_type":"Property","ref_id":"306"},{"children":[{"text":")"}]}],"node_type":"Property","ref_id":"306"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"307"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"HospitalLocation"}]}],"ref_id":"308"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"309"}],"ref_id":"309"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Intensive Care Unit\""}]}],"ref_id":"310"}],"node_type":"InValueSet","ref_id":"311"},{"children":[{"text":"\n        and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"HospitalLocation"}]}],"ref_id":"312"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"313"}],"node_type":"Property","ref_id":"313"},{"children":[{"text":" during "}],"node_type":"IncludedIn","ref_id":"316"},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"314"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"315"}],"node_type":"Property","ref_id":"315"}],"node_type":"IncludedIn","ref_id":"316"}],"ref_id":"317"}],"ref_id":"317"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"318"}],"node_type":"Start","ref_id":"319"}],"ref_id":"320"}],"ref_id":"321"}],"ref_id":"322"},{"children":[{"text":"\n  )"}]}],"node_type":"First","ref_id":"323"}],"node_type":"First","ref_id":"323"}],"ref_id":"324"}],"define_name":"FirstInpatientIntensiveCareUnit"},{"children":[{"children":[{"children":[{"text":"/*Given a datetime and a period, returns the period (if a period is provided) or the interval beginning and ending on the datetime (if a datetime is provided)*/define function \"NormalizeInterval\"(pointInTime "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"325"},{"children":[{"text":", period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"326"},{"children":[{"text":"\u003e"}]}],"ref_id":"327"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"pointInTime"}]}],"node_type":"OperandRef","ref_id":"328"},{"children":[{"text":" is not null"}]}],"ref_id":"329"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"pointInTime"}]}],"ref_id":"330"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"pointInTime"}]}],"ref_id":"331"},{"children":[{"text":"]"}]}],"ref_id":"332"},{"children":[{"text":"\n    else "}]},{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"333"},{"children":[{"text":" is not null"}]}],"ref_id":"334"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"period"}]}],"ref_id":"335"},{"children":[{"text":" \n    else "}]},{"children":[{"children":[{"text":"null as "}],"node_type":"Null","ref_id":"336"},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"337"},{"children":[{"text":"\u003e"}]}],"ref_id":"338"}],"ref_id":"339"}],"ref_id":"340"}],"node_type":"If","ref_id":"341"}],"node_type":"If","ref_id":"341"}],"ref_id":"342"}],"define_name":"NormalizeInterval"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return true if the interval has a starting boundary specified (i.e. the start of the interval is not null and not the minimum DateTime value)*/define function \"HasStart\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"343"},{"children":[{"text":"\u003e"}]}],"ref_id":"344"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"not "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"345"}],"node_type":"Start","ref_id":"346"},{"children":[{"text":" is null"}]}],"node_type":"IsNull","ref_id":"347"},{"children":[{"text":"\n      or "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"348"}],"node_type":"Start","ref_id":"349"},{"children":[{"text":" = "}]},{"children":[{"children":[{"text":"minimum "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"350"}],"node_type":"MinValue","ref_id":"351"}],"node_type":"Equal","ref_id":"352"}],"node_type":"Or","ref_id":"353"},{"children":[{"text":"\n  )"}]}],"node_type":"Or","ref_id":"353"}],"node_type":"Not","ref_id":"354"}],"node_type":"Not","ref_id":"354"}],"ref_id":"355"}],"define_name":"HasStart"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return true if the interval has an ending boundary specified (i.e. the end of the interval is not null and not the maximum DateTime value)*/define function \"HasEnd\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"356"},{"children":[{"text":"\u003e"}]}],"ref_id":"357"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"not "}]},{"children":[{"children":[{"text":"( \n    "}]},{"children":[{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"358"}],"node_type":"End","ref_id":"359"},{"children":[{"text":" is null"}]}],"node_type":"IsNull","ref_id":"360"},{"children":[{"text":"\n      or \n      "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"361"}],"node_type":"End","ref_id":"362"},{"children":[{"text":" = "}]},{"children":[{"children":[{"text":"maximum "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"363"}],"node_type":"MaxValue","ref_id":"364"}],"node_type":"Equal","ref_id":"365"}],"node_type":"Or","ref_id":"366"},{"children":[{"text":"\n  )"}]}],"node_type":"Or","ref_id":"366"}],"node_type":"Not","ref_id":"367"}],"node_type":"Not","ref_id":"367"}],"ref_id":"368"}],"define_name":"HasEnd"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return the ending point if the interval has an ending boundary specified, otherwise, return the starting point*/define function \"Latest\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"369"},{"children":[{"text":"\u003e"}]}],"ref_id":"370"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"HasEnd("}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"371"},{"children":[{"text":")"}]}],"ref_id":"372"},{"children":[{"text":")"}]}],"ref_id":"372"},{"children":[{"text":" then \n  "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"373"}],"ref_id":"374"},{"children":[{"text":" \n    else "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"375"}],"ref_id":"376"}],"node_type":"If","ref_id":"377"}],"node_type":"If","ref_id":"377"}],"ref_id":"378"}],"define_name":"Latest"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return the starting point if the interval has a starting boundary specified, otherwise, return the ending point*/define function \"Earliest\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"379"},{"children":[{"text":"\u003e"}]}],"ref_id":"380"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"HasStart("}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"381"},{"children":[{"text":")"}]}],"ref_id":"382"},{"children":[{"text":")"}]}],"ref_id":"382"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"383"}],"ref_id":"384"},{"children":[{"text":" \n    else \n  "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"385"}],"ref_id":"386"}],"node_type":"If","ref_id":"387"}],"node_type":"If","ref_id":"387"}],"ref_id":"388"}],"define_name":"Earliest"},{"children":[{"children":[{"children":[{"text":"/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the ending point of the period if the period has an ending boundary specified, otherwise returns the starting point of the interval*/define function \"LatestOf\"(pointInTime "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"389"},{"children":[{"text":", period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"390"},{"children":[{"text":"\u003e"}]}],"ref_id":"391"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Latest("}]},{"children":[{"children":[{"text":"NormalizeInterval("}]},{"children":[{"children":[{"text":"pointInTime"}]}],"node_type":"OperandRef","ref_id":"392"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"393"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"394"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"395"}],"node_type":"FunctionRef","ref_id":"395"}],"ref_id":"396"}],"define_name":"LatestOf"},{"children":[{"children":[{"children":[{"text":"/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the starting point of the period if the period has a starting boundary specified, otherwise returns the ending point of the period*/define function \"EarliestOf\"(pointInTime "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"397"},{"children":[{"text":", period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"398"},{"children":[{"text":"\u003e"}]}],"ref_id":"399"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Earliest("}]},{"children":[{"children":[{"text":"NormalizeInterval("}]},{"children":[{"children":[{"text":"pointInTime"}]}],"node_type":"OperandRef","ref_id":"400"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"401"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"402"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"403"}],"node_type":"FunctionRef","ref_id":"403"}],"ref_id":"404"}],"define_name":"EarliestOf"}],"identifier":{"id":"MATGlobalCommonFunctions","version":"7.0.000"}},"is_main_library":false,"is_top_level":true,"library_name":"MATGlobalCommonFunctions","library_version":"7.0.000","statement_dependencies":[{"_id":"689267b3e8da6d1c0d510314","statement_name":"NormalizeInterval"},{"_id":"689267b3e8da6d1c0d510315","statement_name":"EarliestOf","statement_references":[{"_id":"689267b3e8da6d1c0d510312","hqmf_id":null,"library_name":"MATGlobalCommonFunctions","statement_name":"Earliest"},{"_id":"689267b3e8da6d1c0d510313","hqmf_id":null,"library_name":"MATGlobalCommonFunctions","statement_name":"NormalizeInterval"}]},{"_id":"689267b3e8da6d1c0d510316","statement_name":"Earliest","statement_references":[{"_id":"689267bae8da6d1c0d51061f","hqmf_id":null,"library_name":"MATGlobalCommonFunctions","statement_name":"HasStart"}]},{"_id":"689267b3e8da6d1c0d510317","statement_name":"HasStart"}]},{"_id":"689267b3e8da6d1c0d510333","cql":"library PCMaternal version '2.21.000'\n\nusing QDM version '5.6'\n\ninclude MATGlobalCommonFunctions version '7.0.000' called Global\ninclude TJCOverall version '6.0.000' called TJC\n\ncodesystem \"LOINC\": 'urn:oid:2.16.840.1.113883.6.1' \n\nvalueset \"Delivery Procedures\": 'urn:oid:2.16.840.1.113762.1.4.1045.59' \nvalueset \"ED Visit and OB Triage\": 'urn:oid:2.16.840.1.113762.1.4.1029.369' \nvalueset \"Encounter Inpatient\": 'urn:oid:2.16.840.1.113883.3.666.5.307' \nvalueset \"Estimated Gestational Age at Delivery\": 'urn:oid:2.16.840.1.113762.1.4.1045.26' \nvalueset \"Observation Services\": 'urn:oid:2.16.840.1.113762.1.4.1111.143' \n\ncode \"Date and time of obstetric delivery\": '93857-1' from \"LOINC\" display 'Date and time of obstetric delivery'\ncode \"Delivery date Estimated\": '11778-8' from \"LOINC\" display 'Delivery date Estimated'\n\nparameter \"Measurement Period\" Interval\u003cDateTime\u003e\n\ncontext Patient\n\ndefine \"Delivery Encounter with Age Range\":\n  \"Encounter with Age Range\" EncounterWithAge\n    with [\"Procedure, Performed\": \"Delivery Procedures\"] DeliveryProcedure\n      such that Global.\"NormalizeInterval\" ( DeliveryProcedure.relevantDatetime, DeliveryProcedure.relevantPeriod ) starts during day of \"HospitalizationWithEDOBTriageObservation\"(EncounterWithAge)\n\ndefine \"Encounter with Age Range\":\n  [\"Encounter, Performed\": \"Encounter Inpatient\"] EncounterInpatient\n    where AgeInYearsAt(date from start of EncounterInpatient.relevantPeriod)\u003e= 8\n      and AgeInYearsAt(date from start of EncounterInpatient.relevantPeriod)\u003c 65\n      and EncounterInpatient.relevantPeriod ends during day of \"Measurement Period\"\n\ndefine \"Variable Calculated Gestational Age\":\n  //This definition establishes a variable of CGA (Calculated Gestational Age).  CGA is a supplemental data element to store the calculated gestational age result from the \"CalculatedGestationalAge\" function.  The data element enables the capturing and saving of the CGA for data analysis post data receipt. Hospitals do not need to submit any additional data to comply with this definition.  \n  \"Delivery Encounter with Age Range\" QualifyingEncounter\n    let CGA: \"CalculatedGestationalAge\"(QualifyingEncounter)\n    return { QualifyingEncounter, CGA }\n\ndefine function \"LastTimeOfDelivery\"(Encounter \"Encounter, Performed\" ):\n  Last([\"Assessment, Performed\": \"Date and time of obstetric delivery\"] TimeOfDelivery\n      where Global.\"EarliestOf\"(TimeOfDelivery.relevantDatetime, TimeOfDelivery.relevantPeriod)during \"HospitalizationWithEDOBTriageObservation\"(Encounter)\n        and TimeOfDelivery.result as DateTime during \"HospitalizationWithEDOBTriageObservation\"(Encounter)\n      sort by Global.\"EarliestOf\"(relevantDatetime, relevantPeriod)\n  ).result as DateTime\n\ndefine function \"LastEstimatedGestationalAge\"(Encounter \"Encounter, Performed\" ):\n  Last([\"Assessment, Performed\": \"Estimated Gestational Age at Delivery\"] EstimatedGestationalAge\n      where Global.\"EarliestOf\"(EstimatedGestationalAge.relevantDatetime, EstimatedGestationalAge.relevantPeriod)24 hours or less before or on \"LastTimeOfDelivery\"(Encounter)\n        and EstimatedGestationalAge.result is not null\n      sort by Global.\"EarliestOf\"(relevantDatetime, relevantPeriod)\n  ).result as Quantity\n\ndefine function \"HospitalizationWithEDOBTriageObservation\"(Encounter \"Encounter, Performed\" ):\n  //HospitalizationWithEDOBTriageObservation returns the total interval from the start of any immediately prior emergency department visit or OB Triage visit through the observation visit to the discharge of the given encounter.\n  Encounter Visit\n    let ObsVisit: Last([\"Encounter, Performed\": \"Observation Services\"] LastObs\n        where LastObs.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n        sort by \n        end of relevantPeriod\n    ),\n    VisitStart: Coalesce(start of ObsVisit.relevantPeriod, start of Visit.relevantPeriod),\n    EDOBTriageVisit: Last([\"Encounter, Performed\": \"ED Visit and OB Triage\"] LastEDOBTriage\n        where LastEDOBTriage.relevantPeriod ends 1 hour or less on or before VisitStart\n        sort by \n        end of relevantPeriod\n    )\n    return Interval[Coalesce(start of EDOBTriageVisit.relevantPeriod, VisitStart), \n    end of Visit.relevantPeriod]\n\ndefine function \"FormattedLastEstimatedDeliveryDate\"(Encounter \"Encounter, Performed\" ):\n  //While clinically, the Estimated Delivery Date (EDD) is reported as date only, the Quality Data Model does not support \"Date\" only at this time. Therefore, the \"TruncateTime\" function is used to convert date only to date and time.  Time is populated as 0000.\n  if \"LastEstimatedDeliveryDate\"(Encounter)is not null then TJC.\"TruncateTime\" ( \"LastEstimatedDeliveryDate\"(Encounter)) \n    else null\n\ndefine function \"LastEstimatedDeliveryDate\"(Encounter \"Encounter, Performed\" ):\n  //This function identifies the last time the Estimated Delivery Date was assessed 42 weeks or less prior to or on delivery and stores the result of that assessment.  \n  Last([\"Assessment, Performed\": \"Delivery date Estimated\"] EstimatedDateOfDelivery\n      where Global.\"EarliestOf\"(EstimatedDateOfDelivery.relevantDatetime, EstimatedDateOfDelivery.relevantPeriod)42 weeks or less before or on \"LastTimeOfDelivery\"(Encounter)\n        and EstimatedDateOfDelivery.result is not null\n      sort by Global.\"EarliestOf\"(relevantDatetime, relevantPeriod)\n  ).result\n\ndefine function \"CalculatedGestationalAge\"(Encounter \"Encounter, Performed\" ):\n  // Age = (280-(Estimated Delivery Date minus Reference Date/Delivery Date))/7\n  ( 280 - ( difference in days between \"LastTimeOfDelivery\"(Encounter)and \"FormattedLastEstimatedDeliveryDate\"(Encounter)) ) div 7\n\n","elm":{"library":{"annotation":[{"translatorOptions":"EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion,DisableMethodInvocation","type":"CqlToElmInfo"},{"type":"Annotation","s":{"r":"240","s":[{"value":["","library PCMaternal version '2.21.000'"]}]}}],"identifier":{"id":"PCMaternal","version":"2.21.000"},"schemaIdentifier":{"id":"urn:hl7-org:elm","version":"r1"},"usings":{"def":[{"localIdentifier":"System","uri":"urn:hl7-org:elm-types:r1"},{"localId":"1","locator":"3:1-3:23","localIdentifier":"QDM","uri":"urn:healthit-gov:qdm:v5_6","version":"5.6","annotation":[{"type":"Annotation","s":{"r":"1","s":[{"value":["","using "]},{"s":[{"value":["QDM"]}]},{"value":[" version ","'5.6'"]}]}}]}]},"includes":{"def":[{"localId":"2","locator":"5:1-5:64","localIdentifier":"Global","path":"MATGlobalCommonFunctions","version":"7.0.000","annotation":[{"type":"Annotation","s":{"r":"2","s":[{"value":["","include "]},{"s":[{"value":["MATGlobalCommonFunctions"]}]},{"value":[" version ","'7.0.000'"," called ","Global"]}]}}]},{"localId":"3","locator":"6:1-6:47","localIdentifier":"TJC","path":"TJCOverall","version":"6.0.000","annotation":[{"type":"Annotation","s":{"r":"3","s":[{"value":["","include "]},{"s":[{"value":["TJCOverall"]}]},{"value":[" version ","'6.0.000'"," called ","TJC"]}]}}]}]},"parameters":{"def":[{"localId":"16","locator":"19:1-19:49","name":"Measurement Period","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"16","s":[{"value":["","parameter ","\"Measurement Period\""," "]},{"r":"15","s":[{"value":["Interval\u003c"]},{"r":"14","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}}],"parameterTypeSpecifier":{"localId":"15","locator":"19:32-19:49","type":"IntervalTypeSpecifier","pointType":{"localId":"14","locator":"19:41-19:48","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},"codeSystems":{"def":[{"localId":"4","locator":"8:1-8:51","name":"LOINC","id":"2.16.840.1.113883.6.1","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"4","s":[{"value":["","codesystem ","\"LOINC\"",": ","'urn:oid:2.16.840.1.113883.6.1'"]}]}}]}]},"valueSets":{"def":[{"localId":"5","locator":"10:1-10:71","name":"Delivery Procedures","id":"2.16.840.1.113762.1.4.1045.59","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"5","s":[{"value":["","valueset ","\"Delivery Procedures\"",": ","'urn:oid:2.16.840.1.113762.1.4.1045.59'"]}]}}]},{"localId":"6","locator":"11:1-11:75","name":"ED Visit and OB Triage","id":"2.16.840.1.113762.1.4.1029.369","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"6","s":[{"value":["","valueset ","\"ED Visit and OB Triage\"",": ","'urn:oid:2.16.840.1.113762.1.4.1029.369'"]}]}}]},{"localId":"7","locator":"12:1-12:71","name":"Encounter Inpatient","id":"2.16.840.1.113883.3.666.5.307","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"7","s":[{"value":["","valueset ","\"Encounter Inpatient\"",": ","'urn:oid:2.16.840.1.113883.3.666.5.307'"]}]}}]},{"localId":"8","locator":"13:1-13:89","name":"Estimated Gestational Age at Delivery","id":"2.16.840.1.113762.1.4.1045.26","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"8","s":[{"value":["","valueset ","\"Estimated Gestational Age at Delivery\"",": ","'urn:oid:2.16.840.1.113762.1.4.1045.26'"]}]}}]},{"localId":"9","locator":"14:1-14:73","name":"Observation Services","id":"2.16.840.1.113762.1.4.1111.143","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"9","s":[{"value":["","valueset ","\"Observation Services\"",": ","'urn:oid:2.16.840.1.113762.1.4.1111.143'"]}]}}]}]},"codes":{"def":[{"localId":"11","locator":"16:1-16:112","name":"Date and time of obstetric delivery","id":"93857-1","display":"Date and time of obstetric delivery","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"11","s":[{"value":["","code ","\"Date and time of obstetric delivery\"",": ","'93857-1'"," from "]},{"r":"10","s":[{"value":["\"LOINC\""]}]},{"value":[" display ","'Date and time of obstetric delivery'"]}]}}],"codeSystem":{"localId":"10","locator":"16:60-16:66","name":"LOINC"}},{"localId":"13","locator":"17:1-17:88","name":"Delivery date Estimated","id":"11778-8","display":"Delivery date Estimated","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"13","s":[{"value":["","code ","\"Delivery date Estimated\"",": ","'11778-8'"," from "]},{"r":"12","s":[{"value":["\"LOINC\""]}]},{"value":[" display ","'Delivery date Estimated'"]}]}}],"codeSystem":{"localId":"12","locator":"17:48-17:54","name":"LOINC"}}]},"contexts":{"def":[{"locator":"21:1-21:15","name":"Patient"}]},"statements":{"def":[{"locator":"21:1-21:15","name":"Patient","context":"Patient","expression":{"type":"SingletonFrom","operand":{"locator":"21:1-21:15","dataType":"{urn:healthit-gov:qdm:v5_6}Patient","templateId":"Patient","type":"Retrieve"}}},{"localId":"40","locator":"28:1-32:83","name":"Encounter with Age Range","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"40","s":[{"value":["","define ","\"Encounter with Age Range\"",":\n  "]},{"r":"39","s":[{"s":[{"r":"18","s":[{"r":"17","s":[{"r":"17","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Encounter Inpatient\""]}]},{"value":["]"]}]}]},{"value":[" ","EncounterInpatient"]}]}]},{"value":["\n    "]},{"r":"38","s":[{"value":["where "]},{"r":"38","s":[{"r":"33","s":[{"r":"25","s":[{"r":"23","s":[{"value":["AgeInYearsAt","("]},{"r":"22","s":[{"value":["date from "]},{"r":"21","s":[{"value":["start of "]},{"r":"20","s":[{"r":"19","s":[{"value":["EncounterInpatient"]}]},{"value":["."]},{"r":"20","s":[{"value":["relevantPeriod"]}]}]}]}]},{"value":[")"]}]},{"r":"24","value":["\u003e="," ","8"]}]},{"value":["\n      and "]},{"r":"32","s":[{"r":"30","s":[{"value":["AgeInYearsAt","("]},{"r":"29","s":[{"value":["date from "]},{"r":"28","s":[{"value":["start of "]},{"r":"27","s":[{"r":"26","s":[{"value":["EncounterInpatient"]}]},{"value":["."]},{"r":"27","s":[{"value":["relevantPeriod"]}]}]}]}]},{"value":[")"]}]},{"r":"31","value":["\u003c"," ","65"]}]}]},{"value":["\n      and "]},{"r":"37","s":[{"r":"35","s":[{"r":"34","s":[{"value":["EncounterInpatient"]}]},{"value":["."]},{"r":"35","s":[{"value":["relevantPeriod"]}]}]},{"r":"37","value":[" ","ends during day of"," "]},{"r":"36","s":[{"value":["\"Measurement Period\""]}]}]}]}]}]}]}}],"expression":{"localId":"39","locator":"29:3-32:83","type":"Query","source":[{"localId":"18","locator":"29:3-29:68","alias":"EncounterInpatient","expression":{"localId":"17","locator":"29:3-29:49","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"29:28-29:48","name":"Encounter Inpatient","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"38","locator":"30:5-32:83","type":"And","operand":[{"localId":"33","locator":"30:11-31:80","type":"And","operand":[{"localId":"25","locator":"30:11-30:80","type":"GreaterOrEqual","operand":[{"localId":"23","locator":"30:11-30:76","precision":"Year","type":"CalculateAgeAt","operand":[{"type":"ToDate","operand":{"path":"birthDatetime","type":"Property","source":{"name":"Patient","type":"ExpressionRef"}}},{"localId":"22","locator":"30:24-30:75","type":"DateFrom","operand":{"localId":"21","locator":"30:34-30:75","type":"Start","operand":{"localId":"20","locator":"30:43-30:75","path":"relevantPeriod","scope":"EncounterInpatient","type":"Property"}}}]},{"localId":"24","locator":"30:80","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"8","type":"Literal"}]},{"localId":"32","locator":"31:11-31:80","type":"Less","operand":[{"localId":"30","locator":"31:11-31:76","precision":"Year","type":"CalculateAgeAt","operand":[{"type":"ToDate","operand":{"path":"birthDatetime","type":"Property","source":{"name":"Patient","type":"ExpressionRef"}}},{"localId":"29","locator":"31:24-31:75","type":"DateFrom","operand":{"localId":"28","locator":"31:34-31:75","type":"Start","operand":{"localId":"27","locator":"31:43-31:75","path":"relevantPeriod","scope":"EncounterInpatient","type":"Property"}}}]},{"localId":"31","locator":"31:79-31:80","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"65","type":"Literal"}]}]},{"localId":"37","locator":"32:11-32:83","precision":"Day","type":"In","operand":[{"locator":"32:45-32:48","type":"End","operand":{"localId":"35","locator":"32:11-32:43","path":"relevantPeriod","scope":"EncounterInpatient","type":"Property"}},{"localId":"36","locator":"32:64-32:83","name":"Measurement Period","type":"ParameterRef"}]}]}}},{"localId":"104","locator":"54:1-69:32","name":"HospitalizationWithEDOBTriageObservation","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"104","s":[{"value":["","define function ","\"HospitalizationWithEDOBTriageObservation\"","(","Encounter"," "]},{"r":"52","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  //HospitalizationWithEDOBTriageObservation returns the total interval from the start of any immediately prior emergency department visit or OB Triage visit through the observation visit to the discharge of the given encounter.\n  "]},{"r":"103","s":[{"r":"103","s":[{"s":[{"r":"54","s":[{"r":"53","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n    "]},{"s":[{"value":["let "]},{"r":"70","s":[{"value":["ObsVisit",": "]},{"r":"69","s":[{"value":["Last","("]},{"r":"68","s":[{"s":[{"r":"56","s":[{"r":"55","s":[{"r":"55","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Observation Services\""]}]},{"value":["]"]}]}]},{"value":[" ","LastObs"]}]}]},{"value":["\n        "]},{"r":"63","s":[{"value":["where "]},{"r":"63","s":[{"r":"58","s":[{"r":"57","s":[{"value":["LastObs"]}]},{"value":["."]},{"r":"58","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"63","s":[{"value":["ends "]},{"r":"62","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"61","s":[{"value":["start of "]},{"r":"60","s":[{"r":"59","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"60","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n        "]},{"r":"67","s":[{"value":["sort by \n        "]},{"r":"66","s":[{"r":"65","s":[{"value":["end of "]},{"r":"64","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n    )"]}]}]},{"value":[",\n    "]},{"r":"78","s":[{"value":["VisitStart",": "]},{"r":"77","s":[{"value":["Coalesce","("]},{"r":"73","s":[{"value":["start of "]},{"r":"72","s":[{"r":"71","s":[{"value":["ObsVisit"]}]},{"value":["."]},{"r":"72","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"76","s":[{"value":["start of "]},{"r":"75","s":[{"r":"74","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"75","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]}]},{"value":[",\n    "]},{"r":"92","s":[{"value":["EDOBTriageVisit",": "]},{"r":"91","s":[{"value":["Last","("]},{"r":"90","s":[{"s":[{"r":"80","s":[{"r":"79","s":[{"r":"79","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"ED Visit and OB Triage\""]}]},{"value":["]"]}]}]},{"value":[" ","LastEDOBTriage"]}]}]},{"value":["\n        "]},{"r":"85","s":[{"value":["where "]},{"r":"85","s":[{"r":"82","s":[{"r":"81","s":[{"value":["LastEDOBTriage"]}]},{"value":["."]},{"r":"82","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"85","s":[{"value":["ends "]},{"r":"84","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"83","s":[{"value":["VisitStart"]}]}]}]},{"value":["\n        "]},{"r":"89","s":[{"value":["sort by \n        "]},{"r":"88","s":[{"r":"87","s":[{"value":["end of "]},{"r":"86","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n    )"]}]}]}]},{"value":["\n    "]},{"r":"102","s":[{"value":["return "]},{"r":"101","s":[{"value":["Interval["]},{"r":"97","s":[{"value":["Coalesce","("]},{"r":"95","s":[{"value":["start of "]},{"r":"94","s":[{"r":"93","s":[{"value":["EDOBTriageVisit"]}]},{"value":["."]},{"r":"94","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"96","s":[{"value":["VisitStart"]}]},{"value":[")"]}]},{"value":[", \n    "]},{"r":"100","s":[{"value":["end of "]},{"r":"99","s":[{"r":"98","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"99","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["]"]}]}]}]}]}]}}],"expression":{"localId":"103","locator":"56:3-69:32","type":"Query","source":[{"localId":"54","locator":"56:3-56:17","alias":"Visit","expression":{"localId":"53","locator":"56:3-56:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"70","locator":"57:9-61:5","identifier":"ObsVisit","expression":{"localId":"69","locator":"57:19-61:5","type":"Last","source":{"localId":"68","locator":"57:24-60:29","type":"Query","source":[{"localId":"56","locator":"57:24-57:79","alias":"LastObs","expression":{"localId":"55","locator":"57:24-57:71","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"57:49-57:70","name":"Observation Services","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"63","locator":"58:9-58:99","type":"And","operand":[{"locator":"58:43-58:56","type":"In","operand":[{"locator":"58:38-58:41","type":"End","operand":{"localId":"58","locator":"58:15-58:36","path":"relevantPeriod","scope":"LastObs","type":"Property"}},{"locator":"58:43-58:56","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"58:71-58:99","type":"Subtract","operand":[{"localId":"61","locator":"58:71-58:99","type":"Start","operand":{"localId":"60","locator":"58:80-58:99","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"62","locator":"58:43-58:48","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"61","locator":"58:71-58:99","type":"Start","operand":{"localId":"60","locator":"58:80-58:99","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"58:43-58:56","type":"Not","operand":{"locator":"58:43-58:56","type":"IsNull","operand":{"localId":"61","locator":"58:71-58:99","type":"Start","operand":{"localId":"60","locator":"58:80-58:99","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"67","locator":"59:9-60:29","by":[{"localId":"66","locator":"60:9-60:29","direction":"asc","type":"ByExpression","expression":{"localId":"65","locator":"60:9-60:29","type":"End","operand":{"localId":"64","locator":"60:16-60:29","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}},{"localId":"78","locator":"62:5-62:89","identifier":"VisitStart","expression":{"localId":"77","locator":"62:17-62:89","type":"Coalesce","operand":[{"localId":"73","locator":"62:26-62:57","type":"Start","operand":{"localId":"72","locator":"62:35-62:57","path":"relevantPeriod","type":"Property","source":{"localId":"71","locator":"62:35-62:42","name":"ObsVisit","type":"QueryLetRef"}}},{"localId":"76","locator":"62:60-62:88","type":"Start","operand":{"localId":"75","locator":"62:69-62:88","path":"relevantPeriod","scope":"Visit","type":"Property"}}]}},{"localId":"92","locator":"63:5-67:5","identifier":"EDOBTriageVisit","expression":{"localId":"91","locator":"63:22-67:5","type":"Last","source":{"localId":"90","locator":"63:27-66:29","type":"Query","source":[{"localId":"80","locator":"63:27-63:91","alias":"LastEDOBTriage","expression":{"localId":"79","locator":"63:27-63:76","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"63:52-63:75","name":"ED Visit and OB Triage","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"85","locator":"64:9-64:87","type":"And","operand":[{"locator":"64:50-64:63","type":"In","operand":[{"locator":"64:45-64:48","type":"End","operand":{"localId":"82","locator":"64:15-64:43","path":"relevantPeriod","scope":"LastEDOBTriage","type":"Property"}},{"locator":"64:50-64:63","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"64:78-64:87","type":"Subtract","operand":[{"localId":"83","locator":"64:78-64:87","name":"VisitStart","type":"QueryLetRef"},{"localId":"84","locator":"64:50-64:55","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"83","locator":"64:78-64:87","name":"VisitStart","type":"QueryLetRef"}}]},{"locator":"64:50-64:63","type":"Not","operand":{"locator":"64:50-64:63","type":"IsNull","operand":{"localId":"83","locator":"64:78-64:87","name":"VisitStart","type":"QueryLetRef"}}}]},"sort":{"localId":"89","locator":"65:9-66:29","by":[{"localId":"88","locator":"66:9-66:29","direction":"asc","type":"ByExpression","expression":{"localId":"87","locator":"66:9-66:29","type":"End","operand":{"localId":"86","locator":"66:16-66:29","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"102","locator":"68:5-69:32","expression":{"localId":"101","locator":"68:12-69:32","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"97","locator":"68:21-68:81","type":"Coalesce","operand":[{"localId":"95","locator":"68:30-68:68","type":"Start","operand":{"localId":"94","locator":"68:39-68:68","path":"relevantPeriod","type":"Property","source":{"localId":"93","locator":"68:39-68:53","name":"EDOBTriageVisit","type":"QueryLetRef"}}},{"localId":"96","locator":"68:71-68:80","name":"VisitStart","type":"QueryLetRef"}]},"high":{"localId":"100","locator":"69:5-69:31","type":"End","operand":{"localId":"99","locator":"69:12-69:31","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"52","locator":"54:70-54:91","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"109","locator":"23:1-26:197","name":"Delivery Encounter with Age Range","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"109","s":[{"value":["","define ","\"Delivery Encounter with Age Range\"",":\n  "]},{"r":"108","s":[{"s":[{"r":"42","s":[{"r":"41","s":[{"s":[{"value":["\"Encounter with Age Range\""]}]}]},{"value":[" ","EncounterWithAge"]}]}]},{"value":["\n    "]},{"r":"107","s":[{"value":["with "]},{"r":"44","s":[{"r":"43","s":[{"r":"43","s":[{"value":["[","\"Procedure, Performed\"",": "]},{"s":[{"value":["\"Delivery Procedures\""]}]},{"value":["]"]}]}]},{"value":[" ","DeliveryProcedure"]}]},{"value":["\n      such that "]},{"r":"106","s":[{"r":"50","s":[{"r":"45","s":[{"value":["Global"]}]},{"value":["."]},{"r":"50","s":[{"value":["\"NormalizeInterval\""," ( "]},{"r":"47","s":[{"r":"46","s":[{"value":["DeliveryProcedure"]}]},{"value":["."]},{"r":"47","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"49","s":[{"r":"48","s":[{"value":["DeliveryProcedure"]}]},{"value":["."]},{"r":"49","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]},{"r":"106","value":[" ","starts during day of"," "]},{"r":"105","s":[{"value":["\"HospitalizationWithEDOBTriageObservation\"","("]},{"r":"51","s":[{"value":["EncounterWithAge"]}]},{"value":[")"]}]}]}]}]}]}}],"expression":{"localId":"108","locator":"24:3-26:197","type":"Query","source":[{"localId":"42","locator":"24:3-24:45","alias":"EncounterWithAge","expression":{"localId":"41","locator":"24:3-24:28","name":"Encounter with Age Range","type":"ExpressionRef"}}],"relationship":[{"localId":"107","locator":"25:5-26:197","alias":"DeliveryProcedure","type":"With","expression":{"localId":"43","locator":"25:10-25:56","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveProcedurePerformed","templateId":"PositiveProcedurePerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"25:35-25:55","name":"Delivery Procedures","type":"ValueSetRef"}},"suchThat":{"localId":"106","locator":"26:17-26:197","precision":"Day","type":"In","operand":[{"locator":"26:117-26:122","type":"Start","operand":{"localId":"50","locator":"26:17-26:115","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"47","locator":"26:46-26:79","path":"relevantDatetime","scope":"DeliveryProcedure","type":"Property"},{"localId":"49","locator":"26:82-26:113","path":"relevantPeriod","scope":"DeliveryProcedure","type":"Property"}]}},{"localId":"105","locator":"26:138-26:197","name":"HospitalizationWithEDOBTriageObservation","type":"FunctionRef","operand":[{"localId":"51","locator":"26:181-26:196","name":"EncounterWithAge","type":"AliasRef"}]}]}}]}},{"localId":"147","locator":"40:1-45:22","name":"LastTimeOfDelivery","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"147","s":[{"value":["","define function ","\"LastTimeOfDelivery\"","(","Encounter"," "]},{"r":"116","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"146","s":[{"r":"146","s":[{"r":"144","s":[{"r":"143","s":[{"value":["Last","("]},{"r":"142","s":[{"s":[{"r":"118","s":[{"r":"117","s":[{"r":"117","s":[{"value":["[","\"Assessment, Performed\"",": "]},{"s":[{"value":["\"Date and time of obstetric delivery\""]}]},{"value":["]"]}]}]},{"value":[" ","TimeOfDelivery"]}]}]},{"value":["\n      "]},{"r":"135","s":[{"value":["where "]},{"r":"135","s":[{"r":"127","s":[{"r":"124","s":[{"r":"119","s":[{"value":["Global"]}]},{"value":["."]},{"r":"124","s":[{"value":["\"EarliestOf\"","("]},{"r":"121","s":[{"r":"120","s":[{"value":["TimeOfDelivery"]}]},{"value":["."]},{"r":"121","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"123","s":[{"r":"122","s":[{"value":["TimeOfDelivery"]}]},{"value":["."]},{"r":"123","s":[{"value":["relevantPeriod"]}]}]},{"value":[")"]}]}]},{"r":"127","value":["during"," "]},{"r":"126","s":[{"value":["\"HospitalizationWithEDOBTriageObservation\"","("]},{"r":"125","s":[{"value":["Encounter"]}]},{"value":[")"]}]}]},{"value":["\n        and "]},{"r":"134","s":[{"r":"131","s":[{"r":"129","s":[{"r":"128","s":[{"value":["TimeOfDelivery"]}]},{"value":["."]},{"r":"129","s":[{"value":["result"]}]}]},{"value":[" as "]},{"r":"130","s":[{"value":["DateTime"]}]}]},{"r":"134","value":[" ","during"," "]},{"r":"133","s":[{"value":["\"HospitalizationWithEDOBTriageObservation\"","("]},{"r":"132","s":[{"value":["Encounter"]}]},{"value":[")"]}]}]}]}]},{"value":["\n      "]},{"r":"141","s":[{"value":["sort by "]},{"r":"140","s":[{"r":"139","s":[{"r":"136","s":[{"value":["Global"]}]},{"value":["."]},{"r":"139","s":[{"value":["\"EarliestOf\"","("]},{"r":"137","s":[{"value":["relevantDatetime"]}]},{"value":[", "]},{"r":"138","s":[{"value":["relevantPeriod"]}]},{"value":[")"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"144","s":[{"value":["result"]}]}]},{"value":[" as "]},{"r":"145","s":[{"value":["DateTime"]}]}]}]}]}}],"expression":{"localId":"146","locator":"41:3-45:22","strict":false,"type":"As","operand":{"localId":"144","locator":"41:3-45:10","path":"result","type":"Property","source":{"localId":"143","locator":"41:3-45:3","type":"Last","source":{"localId":"142","locator":"41:8-44:67","type":"Query","source":[{"localId":"118","locator":"41:8-41:86","alias":"TimeOfDelivery","expression":{"localId":"117","locator":"41:8-41:71","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveAssessmentPerformed","templateId":"PositiveAssessmentPerformed","codeProperty":"code","codeComparator":"~","type":"Retrieve","codes":{"type":"ToList","operand":{"locator":"41:34-41:70","name":"Date and time of obstetric delivery","type":"CodeRef"}}}}],"relationship":[],"where":{"localId":"135","locator":"42:7-43:106","type":"And","operand":[{"localId":"127","locator":"42:13-42:155","type":"In","operand":[{"localId":"124","locator":"42:13-42:95","name":"EarliestOf","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"121","locator":"42:33-42:63","path":"relevantDatetime","scope":"TimeOfDelivery","type":"Property"},{"localId":"123","locator":"42:66-42:94","path":"relevantPeriod","scope":"TimeOfDelivery","type":"Property"}]},{"localId":"126","locator":"42:103-42:155","name":"HospitalizationWithEDOBTriageObservation","type":"FunctionRef","operand":[{"localId":"125","locator":"42:146-42:154","name":"Encounter","type":"OperandRef"}]}]},{"localId":"134","locator":"43:13-43:106","type":"In","operand":[{"localId":"131","locator":"43:13-43:45","strict":false,"type":"As","operand":{"localId":"129","locator":"43:13-43:33","path":"result","scope":"TimeOfDelivery","type":"Property"},"asTypeSpecifier":{"localId":"130","locator":"43:38-43:45","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"localId":"133","locator":"43:54-43:106","name":"HospitalizationWithEDOBTriageObservation","type":"FunctionRef","operand":[{"localId":"132","locator":"43:97-43:105","name":"Encounter","type":"OperandRef"}]}]}]},"sort":{"localId":"141","locator":"44:7-44:67","by":[{"localId":"140","locator":"44:15-44:67","direction":"asc","type":"ByExpression","expression":{"localId":"139","locator":"44:15-44:67","name":"EarliestOf","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"137","locator":"44:35-44:50","name":"relevantDatetime","type":"IdentifierRef"},{"localId":"138","locator":"44:53-44:66","name":"relevantPeriod","type":"IdentifierRef"}]}}]}}}},"asTypeSpecifier":{"localId":"145","locator":"45:15-45:22","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"116","locator":"40:48-40:69","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"178","locator":"76:1-82:10","name":"LastEstimatedDeliveryDate","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"178","s":[{"value":["","define function ","\"LastEstimatedDeliveryDate\"","(","Encounter"," "]},{"r":"152","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  //This function identifies the last time the Estimated Delivery Date was assessed 42 weeks or less prior to or on delivery and stores the result of that assessment.  \n  "]},{"r":"177","s":[{"r":"177","s":[{"r":"176","s":[{"value":["Last","("]},{"r":"175","s":[{"s":[{"r":"154","s":[{"r":"153","s":[{"r":"153","s":[{"value":["[","\"Assessment, Performed\"",": "]},{"s":[{"value":["\"Delivery date Estimated\""]}]},{"value":["]"]}]}]},{"value":[" ","EstimatedDateOfDelivery"]}]}]},{"value":["\n      "]},{"r":"168","s":[{"value":["where "]},{"r":"168","s":[{"r":"164","s":[{"r":"160","s":[{"r":"155","s":[{"value":["Global"]}]},{"value":["."]},{"r":"160","s":[{"value":["\"EarliestOf\"","("]},{"r":"157","s":[{"r":"156","s":[{"value":["EstimatedDateOfDelivery"]}]},{"value":["."]},{"r":"157","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"159","s":[{"r":"158","s":[{"value":["EstimatedDateOfDelivery"]}]},{"value":["."]},{"r":"159","s":[{"value":["relevantPeriod"]}]}]},{"value":[")"]}]}]},{"r":"164","s":[{"r":"163","s":[{"value":["42 ","weeks"]}]},{"value":[" or less before or on"]}]},{"value":[" "]},{"r":"162","s":[{"value":["\"LastTimeOfDelivery\"","("]},{"r":"161","s":[{"value":["Encounter"]}]},{"value":[")"]}]}]},{"value":["\n        and "]},{"r":"167","s":[{"r":"166","s":[{"r":"165","s":[{"value":["EstimatedDateOfDelivery"]}]},{"value":["."]},{"r":"166","s":[{"value":["result"]}]}]},{"value":[" is not null"]}]}]}]},{"value":["\n      "]},{"r":"174","s":[{"value":["sort by "]},{"r":"173","s":[{"r":"172","s":[{"r":"169","s":[{"value":["Global"]}]},{"value":["."]},{"r":"172","s":[{"value":["\"EarliestOf\"","("]},{"r":"170","s":[{"value":["relevantDatetime"]}]},{"value":[", "]},{"r":"171","s":[{"value":["relevantPeriod"]}]},{"value":[")"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"177","s":[{"value":["result"]}]}]}]}]}}],"expression":{"localId":"177","locator":"78:3-82:10","path":"result","type":"Property","source":{"localId":"176","locator":"78:3-82:3","type":"Last","source":{"localId":"175","locator":"78:8-81:67","type":"Query","source":[{"localId":"154","locator":"78:8-78:83","alias":"EstimatedDateOfDelivery","expression":{"localId":"153","locator":"78:8-78:59","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveAssessmentPerformed","templateId":"PositiveAssessmentPerformed","codeProperty":"code","codeComparator":"~","type":"Retrieve","codes":{"type":"ToList","operand":{"locator":"78:34-78:58","name":"Delivery date Estimated","type":"CodeRef"}}}}],"relationship":[],"where":{"localId":"168","locator":"79:7-80:54","type":"And","operand":[{"localId":"164","locator":"79:13-79:174","type":"And","operand":[{"locator":"79:114-79:129","type":"In","operand":[{"localId":"160","locator":"79:13-79:113","name":"EarliestOf","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"157","locator":"79:33-79:72","path":"relevantDatetime","scope":"EstimatedDateOfDelivery","type":"Property"},{"localId":"159","locator":"79:75-79:112","path":"relevantPeriod","scope":"EstimatedDateOfDelivery","type":"Property"}]},{"locator":"79:114-79:129","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"79:144-79:174","type":"Subtract","operand":[{"localId":"162","locator":"79:144-79:174","name":"LastTimeOfDelivery","type":"FunctionRef","operand":[{"localId":"161","locator":"79:165-79:173","name":"Encounter","type":"OperandRef"}]},{"localId":"163","locator":"79:114-79:121","value":42,"unit":"weeks","type":"Quantity"}]},"high":{"localId":"162","locator":"79:144-79:174","name":"LastTimeOfDelivery","type":"FunctionRef","operand":[{"localId":"161","locator":"79:165-79:173","name":"Encounter","type":"OperandRef"}]}}]},{"locator":"79:114-79:129","type":"Not","operand":{"locator":"79:114-79:129","type":"IsNull","operand":{"localId":"162","locator":"79:144-79:174","name":"LastTimeOfDelivery","type":"FunctionRef","operand":[{"localId":"161","locator":"79:165-79:173","name":"Encounter","type":"OperandRef"}]}}}]},{"localId":"167","locator":"80:13-80:54","type":"Not","operand":{"locator":"80:13-80:54","type":"IsNull","operand":{"localId":"166","locator":"80:13-80:42","path":"result","scope":"EstimatedDateOfDelivery","type":"Property"}}}]},"sort":{"localId":"174","locator":"81:7-81:67","by":[{"localId":"173","locator":"81:15-81:67","direction":"asc","type":"ByExpression","expression":{"localId":"172","locator":"81:15-81:67","name":"EarliestOf","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"170","locator":"81:35-81:50","name":"relevantDatetime","type":"IdentifierRef"},{"localId":"171","locator":"81:53-81:66","name":"relevantPeriod","type":"IdentifierRef"}]}}]}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"152","locator":"76:55-76:76","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"187","locator":"71:1-74:13","name":"FormattedLastEstimatedDeliveryDate","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"187","s":[{"value":["","define function ","\"FormattedLastEstimatedDeliveryDate\"","(","Encounter"," "]},{"r":"150","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  //While clinically, the Estimated Delivery Date (EDD) is reported as date only, the Quality Data Model does not support \"Date\" only at this time. Therefore, the \"TruncateTime\" function is used to convert date only to date and time.  Time is populated as 0000.\n  "]},{"r":"186","s":[{"r":"186","s":[{"value":["if "]},{"r":"180","s":[{"r":"179","s":[{"value":["\"LastEstimatedDeliveryDate\"","("]},{"r":"151","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":["is not null"]}]},{"value":[" then "]},{"r":"184","s":[{"r":"181","s":[{"value":["TJC"]}]},{"value":["."]},{"r":"184","s":[{"value":["\"TruncateTime\""," ( "]},{"r":"183","s":[{"value":["\"LastEstimatedDeliveryDate\"","("]},{"r":"182","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]}]},{"r":"185","value":[" \n    else ","null"]}]}]}]}}],"expression":{"localId":"186","locator":"73:3-74:13","type":"If","condition":{"localId":"180","locator":"73:6-73:54","type":"Not","operand":{"locator":"73:6-73:54","type":"IsNull","operand":{"localId":"179","locator":"73:6-73:43","name":"LastEstimatedDeliveryDate","type":"FunctionRef","operand":[{"localId":"151","locator":"73:34-73:42","name":"Encounter","type":"OperandRef"}]}}},"then":{"localId":"184","locator":"73:61-73:120","name":"TruncateTime","libraryName":"TJC","type":"FunctionRef","operand":[{"asType":"{urn:hl7-org:elm-types:r1}DateTime","type":"As","operand":{"localId":"183","locator":"73:82-73:119","name":"LastEstimatedDeliveryDate","type":"FunctionRef","operand":[{"localId":"182","locator":"73:110-73:118","name":"Encounter","type":"OperandRef"}]}}]},"else":{"asType":"{urn:hl7-org:elm-types:r1}DateTime","type":"As","operand":{"localId":"185","locator":"74:10-74:13","type":"Null"}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"150","locator":"71:64-71:85","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"193","locator":"84:1-86:130","name":"CalculatedGestationalAge","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"193","s":[{"value":["","define function ","\"CalculatedGestationalAge\"","(","Encounter"," "]},{"r":"113","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  // Age = (280-(Estimated Delivery Date minus Reference Date/Delivery Date))/7\n  "]},{"r":"192","s":[{"r":"192","s":[{"r":"190","s":[{"value":["( "]},{"r":"190","s":[{"r":"114","value":["280"," - "]},{"r":"189","s":[{"value":["( "]},{"r":"189","s":[{"value":["difference in days between "]},{"r":"148","s":[{"value":["\"LastTimeOfDelivery\"","("]},{"r":"115","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":["and "]},{"r":"188","s":[{"value":["\"FormattedLastEstimatedDeliveryDate\"","("]},{"r":"149","s":[{"value":["Encounter"]}]},{"value":[")"]}]}]},{"value":[")"]}]}]},{"value":[" )"]}]},{"r":"191","value":[" div ","7"]}]}]}]}}],"expression":{"localId":"192","locator":"86:3-86:130","type":"TruncatedDivide","operand":[{"localId":"190","locator":"86:3-86:124","type":"Subtract","operand":[{"localId":"114","locator":"86:5-86:7","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"280","type":"Literal"},{"localId":"189","locator":"86:11-86:122","precision":"Day","type":"DifferenceBetween","operand":[{"localId":"148","locator":"86:40-86:70","name":"LastTimeOfDelivery","type":"FunctionRef","operand":[{"localId":"115","locator":"86:61-86:69","name":"Encounter","type":"OperandRef"}]},{"localId":"188","locator":"86:75-86:121","name":"FormattedLastEstimatedDeliveryDate","type":"FunctionRef","operand":[{"localId":"149","locator":"86:112-86:120","name":"Encounter","type":"OperandRef"}]}]}]},{"localId":"191","locator":"86:130","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"7","type":"Literal"}]},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"113","locator":"84:54-84:75","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"201","locator":"34:1-38:39","name":"Variable Calculated Gestational Age","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"201","s":[{"value":["","define ","\"Variable Calculated Gestational Age\"",":\n  //This definition establishes a variable of CGA (Calculated Gestational Age).  CGA is a supplemental data element to store the calculated gestational age result from the \"CalculatedGestationalAge\" function.  The data element enables the capturing and saving of the CGA for data analysis post data receipt. Hospitals do not need to submit any additional data to comply with this definition.  \n  "]},{"r":"200","s":[{"s":[{"r":"111","s":[{"r":"110","s":[{"s":[{"value":["\"Delivery Encounter with Age Range\""]}]}]},{"value":[" ","QualifyingEncounter"]}]}]},{"value":["\n    "]},{"s":[{"value":["let "]},{"r":"195","s":[{"value":["CGA",": "]},{"r":"194","s":[{"value":["\"CalculatedGestationalAge\"","("]},{"r":"112","s":[{"value":["QualifyingEncounter"]}]},{"value":[")"]}]}]}]},{"value":["\n    "]},{"r":"199","s":[{"value":["return "]},{"r":"198","s":[{"value":["{ "]},{"r":"196","s":[{"value":["QualifyingEncounter"]}]},{"value":[", "]},{"r":"197","s":[{"value":["CGA"]}]},{"value":[" }"]}]}]}]}]}}],"expression":{"localId":"200","locator":"36:3-38:39","type":"Query","source":[{"localId":"111","locator":"36:3-36:57","alias":"QualifyingEncounter","expression":{"localId":"110","locator":"36:3-36:37","name":"Delivery Encounter with Age Range","type":"ExpressionRef"}}],"let":[{"localId":"195","locator":"37:9-37:60","identifier":"CGA","expression":{"localId":"194","locator":"37:14-37:60","name":"CalculatedGestationalAge","type":"FunctionRef","operand":[{"localId":"112","locator":"37:41-37:59","name":"QualifyingEncounter","type":"AliasRef"}]}}],"relationship":[],"return":{"localId":"199","locator":"38:5-38:39","expression":{"localId":"198","locator":"38:12-38:39","type":"List","element":[{"localId":"196","locator":"38:14-38:32","name":"QualifyingEncounter","type":"AliasRef"},{"localId":"197","locator":"38:35-38:37","name":"CGA","type":"QueryLetRef"}]}}}},{"localId":"232","locator":"47:1-52:22","name":"LastEstimatedGestationalAge","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"232","s":[{"value":["","define function ","\"LastEstimatedGestationalAge\"","(","Encounter"," "]},{"r":"204","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"231","s":[{"r":"231","s":[{"r":"229","s":[{"r":"228","s":[{"value":["Last","("]},{"r":"227","s":[{"s":[{"r":"206","s":[{"r":"205","s":[{"r":"205","s":[{"value":["[","\"Assessment, Performed\"",": "]},{"s":[{"value":["\"Estimated Gestational Age at Delivery\""]}]},{"value":["]"]}]}]},{"value":[" ","EstimatedGestationalAge"]}]}]},{"value":["\n      "]},{"r":"220","s":[{"value":["where "]},{"r":"220","s":[{"r":"216","s":[{"r":"212","s":[{"r":"207","s":[{"value":["Global"]}]},{"value":["."]},{"r":"212","s":[{"value":["\"EarliestOf\"","("]},{"r":"209","s":[{"r":"208","s":[{"value":["EstimatedGestationalAge"]}]},{"value":["."]},{"r":"209","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"211","s":[{"r":"210","s":[{"value":["EstimatedGestationalAge"]}]},{"value":["."]},{"r":"211","s":[{"value":["relevantPeriod"]}]}]},{"value":[")"]}]}]},{"r":"216","s":[{"r":"215","s":[{"value":["24 ","hours"]}]},{"value":[" or less before or on"]}]},{"value":[" "]},{"r":"214","s":[{"value":["\"LastTimeOfDelivery\"","("]},{"r":"213","s":[{"value":["Encounter"]}]},{"value":[")"]}]}]},{"value":["\n        and "]},{"r":"219","s":[{"r":"218","s":[{"r":"217","s":[{"value":["EstimatedGestationalAge"]}]},{"value":["."]},{"r":"218","s":[{"value":["result"]}]}]},{"value":[" is not null"]}]}]}]},{"value":["\n      "]},{"r":"226","s":[{"value":["sort by "]},{"r":"225","s":[{"r":"224","s":[{"r":"221","s":[{"value":["Global"]}]},{"value":["."]},{"r":"224","s":[{"value":["\"EarliestOf\"","("]},{"r":"222","s":[{"value":["relevantDatetime"]}]},{"value":[", "]},{"r":"223","s":[{"value":["relevantPeriod"]}]},{"value":[")"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"229","s":[{"value":["result"]}]}]},{"value":[" as "]},{"r":"230","s":[{"value":["Quantity"]}]}]}]}]}}],"expression":{"localId":"231","locator":"48:3-52:22","strict":false,"type":"As","operand":{"localId":"229","locator":"48:3-52:10","path":"result","type":"Property","source":{"localId":"228","locator":"48:3-52:3","type":"Last","source":{"localId":"227","locator":"48:8-51:67","type":"Query","source":[{"localId":"206","locator":"48:8-48:97","alias":"EstimatedGestationalAge","expression":{"localId":"205","locator":"48:8-48:73","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveAssessmentPerformed","templateId":"PositiveAssessmentPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"48:34-48:72","name":"Estimated Gestational Age at Delivery","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"220","locator":"49:7-50:54","type":"And","operand":[{"localId":"216","locator":"49:13-49:174","type":"And","operand":[{"locator":"49:114-49:129","type":"In","operand":[{"localId":"212","locator":"49:13-49:113","name":"EarliestOf","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"209","locator":"49:33-49:72","path":"relevantDatetime","scope":"EstimatedGestationalAge","type":"Property"},{"localId":"211","locator":"49:75-49:112","path":"relevantPeriod","scope":"EstimatedGestationalAge","type":"Property"}]},{"locator":"49:114-49:129","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"49:144-49:174","type":"Subtract","operand":[{"localId":"214","locator":"49:144-49:174","name":"LastTimeOfDelivery","type":"FunctionRef","operand":[{"localId":"213","locator":"49:165-49:173","name":"Encounter","type":"OperandRef"}]},{"localId":"215","locator":"49:114-49:121","value":24,"unit":"hours","type":"Quantity"}]},"high":{"localId":"214","locator":"49:144-49:174","name":"LastTimeOfDelivery","type":"FunctionRef","operand":[{"localId":"213","locator":"49:165-49:173","name":"Encounter","type":"OperandRef"}]}}]},{"locator":"49:114-49:129","type":"Not","operand":{"locator":"49:114-49:129","type":"IsNull","operand":{"localId":"214","locator":"49:144-49:174","name":"LastTimeOfDelivery","type":"FunctionRef","operand":[{"localId":"213","locator":"49:165-49:173","name":"Encounter","type":"OperandRef"}]}}}]},{"localId":"219","locator":"50:13-50:54","type":"Not","operand":{"locator":"50:13-50:54","type":"IsNull","operand":{"localId":"218","locator":"50:13-50:42","path":"result","scope":"EstimatedGestationalAge","type":"Property"}}}]},"sort":{"localId":"226","locator":"51:7-51:67","by":[{"localId":"225","locator":"51:15-51:67","direction":"asc","type":"ByExpression","expression":{"localId":"224","locator":"51:15-51:67","name":"EarliestOf","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"222","locator":"51:35-51:50","name":"relevantDatetime","type":"IdentifierRef"},{"localId":"223","locator":"51:53-51:66","name":"relevantPeriod","type":"IdentifierRef"}]}}]}}}},"asTypeSpecifier":{"localId":"230","locator":"52:15-52:22","name":"{urn:hl7-org:elm-types:r1}Quantity","type":"NamedTypeSpecifier"}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"204","locator":"47:57-47:78","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]}]}}},"elm_annotations":{"statements":[{"children":[{"children":[{"children":[{"text":"define \"Encounter with Age Range\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Encounter Inpatient\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"17"}],"node_type":"Retrieve","ref_id":"17"},{"children":[{"text":" EncounterInpatient"}]}],"ref_id":"18"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"AgeInYearsAt("}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EncounterInpatient"}]}],"ref_id":"19"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"20"}],"node_type":"Property","ref_id":"20"}],"node_type":"Start","ref_id":"21"}],"node_type":"DateFrom","ref_id":"22"},{"children":[{"text":")"}]}],"node_type":"CalculateAgeAt","ref_id":"23"},{"children":[{"text":"\u003e= 8"}],"node_type":"Literal","ref_id":"24"}],"node_type":"GreaterOrEqual","ref_id":"25"},{"children":[{"text":"\n      and "}]},{"children":[{"children":[{"children":[{"text":"AgeInYearsAt("}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EncounterInpatient"}]}],"ref_id":"26"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"27"}],"node_type":"Property","ref_id":"27"}],"node_type":"Start","ref_id":"28"}],"node_type":"DateFrom","ref_id":"29"},{"children":[{"text":")"}]}],"node_type":"CalculateAgeAt","ref_id":"30"},{"children":[{"text":"\u003c 65"}],"node_type":"Literal","ref_id":"31"}],"node_type":"Less","ref_id":"32"}],"node_type":"And","ref_id":"33"},{"children":[{"text":"\n      and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"EncounterInpatient"}]}],"ref_id":"34"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"35"}],"node_type":"Property","ref_id":"35"},{"children":[{"text":" ends during day of "}],"node_type":"In","ref_id":"37"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"36"}],"node_type":"In","ref_id":"37"}],"ref_id":"38"}],"ref_id":"38"}],"node_type":"Query","ref_id":"39"}],"ref_id":"40"}],"define_name":"Encounter with Age Range"},{"children":[{"children":[{"children":[{"text":"define function \"HospitalizationWithEDOBTriageObservation\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"52"},{"children":[{"text":" ):\n  //HospitalizationWithEDOBTriageObservation returns the total interval from the start of any immediately prior emergency department visit or OB Triage visit through the observation visit to the discharge of the given encounter.\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"53"},{"children":[{"text":" Visit"}]}],"ref_id":"54"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"ObsVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Observation Services\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"55"}],"node_type":"Retrieve","ref_id":"55"},{"children":[{"text":" LastObs"}]}],"ref_id":"56"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastObs"}]}],"ref_id":"57"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"58"}],"node_type":"Property","ref_id":"58"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"62"},{"children":[{"text":" or less on or before"}]}],"ref_id":"63"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"59"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"60"}],"node_type":"Property","ref_id":"60"}],"node_type":"Start","ref_id":"61"}],"ref_id":"63"}],"ref_id":"63"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"64"}],"node_type":"End","ref_id":"65"}],"ref_id":"66"}],"ref_id":"67"}],"ref_id":"68"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"69"}],"ref_id":"70"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"VisitStart: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"ObsVisit"}]}],"ref_id":"71"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"72"}],"node_type":"Property","ref_id":"72"}],"node_type":"Start","ref_id":"73"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"74"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"75"}],"node_type":"Property","ref_id":"75"}],"node_type":"Start","ref_id":"76"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"77"}],"ref_id":"78"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"EDOBTriageVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"ED Visit and OB Triage\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"79"}],"node_type":"Retrieve","ref_id":"79"},{"children":[{"text":" LastEDOBTriage"}]}],"ref_id":"80"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastEDOBTriage"}]}],"ref_id":"81"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"82"}],"node_type":"Property","ref_id":"82"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"84"},{"children":[{"text":" or less on or before"}]}],"ref_id":"85"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"83"}],"ref_id":"85"}],"ref_id":"85"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"86"}],"node_type":"End","ref_id":"87"}],"ref_id":"88"}],"ref_id":"89"}],"ref_id":"90"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"91"}],"ref_id":"92"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EDOBTriageVisit"}]}],"ref_id":"93"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"94"}],"node_type":"Property","ref_id":"94"}],"node_type":"Start","ref_id":"95"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"96"},{"children":[{"text":")"}]}],"ref_id":"97"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"98"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"99"}],"node_type":"Property","ref_id":"99"}],"ref_id":"100"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"101"}],"ref_id":"102"}],"node_type":"Query","ref_id":"103"}],"node_type":"Query","ref_id":"103"}],"ref_id":"104"}],"define_name":"HospitalizationWithEDOBTriageObservation"},{"children":[{"children":[{"children":[{"text":"define \"Delivery Encounter with Age Range\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Encounter with Age Range\""}]}]}],"node_type":"ExpressionRef","ref_id":"41"},{"children":[{"text":" EncounterWithAge"}]}],"ref_id":"42"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"[\"Procedure, Performed\": "}]},{"children":[{"children":[{"text":"\"Delivery Procedures\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"43"}],"node_type":"Retrieve","ref_id":"43"},{"children":[{"text":" DeliveryProcedure"}]}],"ref_id":"44"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"45"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\" ( "}]},{"children":[{"children":[{"children":[{"text":"DeliveryProcedure"}]}],"ref_id":"46"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"47"}],"node_type":"Property","ref_id":"47"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"DeliveryProcedure"}]}],"ref_id":"48"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"49"}],"node_type":"Property","ref_id":"49"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"50"}],"node_type":"FunctionRef","ref_id":"50"},{"children":[{"text":" starts during day of "}],"node_type":"In","ref_id":"106"},{"children":[{"children":[{"text":"\"HospitalizationWithEDOBTriageObservation\"("}]},{"children":[{"children":[{"text":"EncounterWithAge"}]}],"node_type":"AliasRef","ref_id":"51"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"105"}],"node_type":"In","ref_id":"106"}],"ref_id":"107"}],"node_type":"Query","ref_id":"108"}],"ref_id":"109"}],"define_name":"Delivery Encounter with Age Range"},{"children":[{"children":[{"children":[{"text":"define function \"LastTimeOfDelivery\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"116"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Assessment, Performed\": "}]},{"children":[{"children":[{"text":"\"Date and time of obstetric delivery\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"117"}],"node_type":"Retrieve","ref_id":"117"},{"children":[{"text":" TimeOfDelivery"}]}],"ref_id":"118"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"119"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"EarliestOf\"("}]},{"children":[{"children":[{"children":[{"text":"TimeOfDelivery"}]}],"ref_id":"120"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"121"}],"node_type":"Property","ref_id":"121"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"TimeOfDelivery"}]}],"ref_id":"122"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"123"}],"node_type":"Property","ref_id":"123"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"124"}],"node_type":"FunctionRef","ref_id":"124"},{"children":[{"text":"during "}],"node_type":"In","ref_id":"127"},{"children":[{"children":[{"text":"\"HospitalizationWithEDOBTriageObservation\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"125"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"126"}],"node_type":"In","ref_id":"127"},{"children":[{"text":"\n        and "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"TimeOfDelivery"}]}],"ref_id":"128"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"result"}]}],"node_type":"Property","ref_id":"129"}],"node_type":"Property","ref_id":"129"},{"children":[{"text":" as "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"130"}],"node_type":"As","ref_id":"131"},{"children":[{"text":" during "}],"node_type":"In","ref_id":"134"},{"children":[{"children":[{"text":"\"HospitalizationWithEDOBTriageObservation\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"132"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"133"}],"node_type":"In","ref_id":"134"}],"ref_id":"135"}],"ref_id":"135"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"136"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"EarliestOf\"("}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"IdentifierRef","ref_id":"137"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"138"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"139"}],"node_type":"FunctionRef","ref_id":"139"}],"ref_id":"140"}],"ref_id":"141"}],"ref_id":"142"},{"children":[{"text":"\n  )"}]}],"ref_id":"143"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"result"}]}],"node_type":"Property","ref_id":"144"}],"node_type":"Property","ref_id":"144"},{"children":[{"text":" as "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"145"}],"node_type":"As","ref_id":"146"}],"node_type":"As","ref_id":"146"}],"ref_id":"147"}],"define_name":"LastTimeOfDelivery"},{"children":[{"children":[{"children":[{"text":"define function \"LastEstimatedDeliveryDate\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"152"},{"children":[{"text":" ):\n  //This function identifies the last time the Estimated Delivery Date was assessed 42 weeks or less prior to or on delivery and stores the result of that assessment.  \n  "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Assessment, Performed\": "}]},{"children":[{"children":[{"text":"\"Delivery date Estimated\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"153"}],"node_type":"Retrieve","ref_id":"153"},{"children":[{"text":" EstimatedDateOfDelivery"}]}],"ref_id":"154"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"155"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"EarliestOf\"("}]},{"children":[{"children":[{"children":[{"text":"EstimatedDateOfDelivery"}]}],"ref_id":"156"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"157"}],"node_type":"Property","ref_id":"157"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"EstimatedDateOfDelivery"}]}],"ref_id":"158"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"159"}],"node_type":"Property","ref_id":"159"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"160"}],"node_type":"FunctionRef","ref_id":"160"},{"children":[{"children":[{"children":[{"text":"42 weeks"}]}],"node_type":"Quantity","ref_id":"163"},{"children":[{"text":" or less before or on"}]}],"node_type":"And","ref_id":"164"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"\"LastTimeOfDelivery\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"161"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"162"}],"node_type":"And","ref_id":"164"},{"children":[{"text":"\n        and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"EstimatedDateOfDelivery"}]}],"ref_id":"165"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"result"}]}],"node_type":"Property","ref_id":"166"}],"node_type":"Property","ref_id":"166"},{"children":[{"text":" is not null"}]}],"node_type":"Not","ref_id":"167"}],"ref_id":"168"}],"ref_id":"168"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"169"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"EarliestOf\"("}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"IdentifierRef","ref_id":"170"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"171"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"172"}],"node_type":"FunctionRef","ref_id":"172"}],"ref_id":"173"}],"ref_id":"174"}],"ref_id":"175"},{"children":[{"text":"\n  )"}]}],"ref_id":"176"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"result"}]}],"node_type":"Property","ref_id":"177"}],"node_type":"Property","ref_id":"177"}],"node_type":"Property","ref_id":"177"}],"ref_id":"178"}],"define_name":"LastEstimatedDeliveryDate"},{"children":[{"children":[{"children":[{"text":"define function \"FormattedLastEstimatedDeliveryDate\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"150"},{"children":[{"text":" ):\n  //While clinically, the Estimated Delivery Date (EDD) is reported as date only, the Quality Data Model does not support \"Date\" only at this time. Therefore, the \"TruncateTime\" function is used to convert date only to date and time.  Time is populated as 0000.\n  "}]},{"children":[{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"\"LastEstimatedDeliveryDate\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"151"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"179"},{"children":[{"text":"is not null"}]}],"ref_id":"180"},{"children":[{"text":" then "}]},{"children":[{"children":[{"children":[{"text":"TJC"}]}],"ref_id":"181"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"TruncateTime\" ( "}]},{"children":[{"children":[{"text":"\"LastEstimatedDeliveryDate\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"182"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"183"},{"children":[{"text":")"}]}],"ref_id":"184"}],"ref_id":"184"},{"children":[{"text":" \n    else null"}],"node_type":"Null","ref_id":"185"}],"node_type":"If","ref_id":"186"}],"node_type":"If","ref_id":"186"}],"ref_id":"187"}],"define_name":"FormattedLastEstimatedDeliveryDate"},{"children":[{"children":[{"children":[{"text":"define function \"CalculatedGestationalAge\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"113"},{"children":[{"text":" ):\n  // Age = (280-(Estimated Delivery Date minus Reference Date/Delivery Date))/7\n  "}]},{"children":[{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"280 - "}],"node_type":"Literal","ref_id":"114"},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"difference in days between "}]},{"children":[{"children":[{"text":"\"LastTimeOfDelivery\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"115"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"148"},{"children":[{"text":"and "}]},{"children":[{"children":[{"text":"\"FormattedLastEstimatedDeliveryDate\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"149"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"188"}],"node_type":"DifferenceBetween","ref_id":"189"},{"children":[{"text":")"}]}],"node_type":"DifferenceBetween","ref_id":"189"}],"node_type":"Subtract","ref_id":"190"},{"children":[{"text":" )"}]}],"node_type":"Subtract","ref_id":"190"},{"children":[{"text":" div 7"}],"node_type":"Literal","ref_id":"191"}],"node_type":"TruncatedDivide","ref_id":"192"}],"node_type":"TruncatedDivide","ref_id":"192"}],"ref_id":"193"}],"define_name":"CalculatedGestationalAge"},{"children":[{"children":[{"children":[{"text":"define \"Variable Calculated Gestational Age\":\n  //This definition establishes a variable of CGA (Calculated Gestational Age).  CGA is a supplemental data element to store the calculated gestational age result from the \"CalculatedGestationalAge\" function.  The data element enables the capturing and saving of the CGA for data analysis post data receipt. Hospitals do not need to submit any additional data to comply with this definition.  \n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Delivery Encounter with Age Range\""}]}]}],"node_type":"ExpressionRef","ref_id":"110"},{"children":[{"text":" QualifyingEncounter"}]}],"ref_id":"111"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"CGA: "}]},{"children":[{"children":[{"text":"\"CalculatedGestationalAge\"("}]},{"children":[{"children":[{"text":"QualifyingEncounter"}]}],"node_type":"AliasRef","ref_id":"112"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"194"}],"ref_id":"195"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"{ "}]},{"children":[{"children":[{"text":"QualifyingEncounter"}]}],"ref_id":"196"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"CGA"}]}],"ref_id":"197"},{"children":[{"text":" }"}]}],"node_type":"List","ref_id":"198"}],"ref_id":"199"}],"node_type":"Query","ref_id":"200"}],"ref_id":"201"}],"define_name":"Variable Calculated Gestational Age"},{"children":[{"children":[{"children":[{"text":"define function \"LastEstimatedGestationalAge\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"204"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Assessment, Performed\": "}]},{"children":[{"children":[{"text":"\"Estimated Gestational Age at Delivery\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"205"}],"node_type":"Retrieve","ref_id":"205"},{"children":[{"text":" EstimatedGestationalAge"}]}],"ref_id":"206"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"207"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"EarliestOf\"("}]},{"children":[{"children":[{"children":[{"text":"EstimatedGestationalAge"}]}],"ref_id":"208"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"209"}],"node_type":"Property","ref_id":"209"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"EstimatedGestationalAge"}]}],"ref_id":"210"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"211"}],"node_type":"Property","ref_id":"211"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"212"}],"node_type":"FunctionRef","ref_id":"212"},{"children":[{"children":[{"children":[{"text":"24 hours"}]}],"node_type":"Quantity","ref_id":"215"},{"children":[{"text":" or less before or on"}]}],"node_type":"And","ref_id":"216"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"\"LastTimeOfDelivery\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"213"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"214"}],"node_type":"And","ref_id":"216"},{"children":[{"text":"\n        and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"EstimatedGestationalAge"}]}],"ref_id":"217"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"result"}]}],"node_type":"Property","ref_id":"218"}],"node_type":"Property","ref_id":"218"},{"children":[{"text":" is not null"}]}],"node_type":"Not","ref_id":"219"}],"ref_id":"220"}],"ref_id":"220"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"221"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"EarliestOf\"("}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"IdentifierRef","ref_id":"222"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"223"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"224"}],"node_type":"FunctionRef","ref_id":"224"}],"ref_id":"225"}],"ref_id":"226"}],"ref_id":"227"},{"children":[{"text":"\n  )"}]}],"ref_id":"228"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"result"}]}],"node_type":"Property","ref_id":"229"}],"node_type":"Property","ref_id":"229"},{"children":[{"text":" as "}]},{"children":[{"children":[{"text":"Quantity"}]}],"ref_id":"230"}],"node_type":"As","ref_id":"231"}],"node_type":"As","ref_id":"231"}],"ref_id":"232"}],"define_name":"LastEstimatedGestationalAge"}],"identifier":{"id":"PCMaternal","version":"2.21.000"}},"is_main_library":false,"is_top_level":true,"library_name":"PCMaternal","library_version":"2.21.000","statement_dependencies":[{"_id":"689267b3e8da6d1c0d510327","statement_name":"Delivery Encounter with Age Range","statement_references":[{"_id":"689267b3e8da6d1c0d510318","hqmf_id":null,"library_name":"PCMaternal","statement_name":"Encounter with Age Range"},{"_id":"689267b3e8da6d1c0d510319","hqmf_id":null,"library_name":"MATGlobalCommonFunctions","statement_name":"NormalizeInterval"},{"_id":"689267b3e8da6d1c0d51031a","hqmf_id":null,"library_name":"PCMaternal","statement_name":"HospitalizationWithEDOBTriageObservation"}]},{"_id":"689267b3e8da6d1c0d510328","statement_name":"Encounter with Age Range","statement_references":[{"_id":"689267bae8da6d1c0d510620","hqmf_id":null,"library_name":"PCMaternal","statement_name":"Patient"}]},{"_id":"689267b3e8da6d1c0d510329","statement_name":"Patient"},{"_id":"689267b3e8da6d1c0d51032a","statement_name":"HospitalizationWithEDOBTriageObservation"},{"_id":"689267b3e8da6d1c0d51032b","statement_name":"CalculatedGestationalAge","statement_references":[{"_id":"689267b3e8da6d1c0d51031b","hqmf_id":null,"library_name":"PCMaternal","statement_name":"LastTimeOfDelivery"},{"_id":"689267b3e8da6d1c0d51031c","hqmf_id":null,"library_name":"PCMaternal","statement_name":"FormattedLastEstimatedDeliveryDate"}]},{"_id":"689267b3e8da6d1c0d51032c","statement_name":"LastTimeOfDelivery","statement_references":[{"_id":"689267b3e8da6d1c0d51031d","hqmf_id":null,"library_name":"MATGlobalCommonFunctions","statement_name":"EarliestOf"},{"_id":"689267b3e8da6d1c0d51031e","hqmf_id":null,"library_name":"PCMaternal","statement_name":"HospitalizationWithEDOBTriageObservation"}]},{"_id":"689267b3e8da6d1c0d51032d","statement_name":"FormattedLastEstimatedDeliveryDate","statement_references":[{"_id":"689267b3e8da6d1c0d51031f","hqmf_id":null,"library_name":"PCMaternal","statement_name":"LastEstimatedDeliveryDate"},{"_id":"689267b3e8da6d1c0d510320","hqmf_id":null,"library_name":"TJCOverall","statement_name":"TruncateTime"}]},{"_id":"689267b3e8da6d1c0d51032e","statement_name":"LastEstimatedDeliveryDate","statement_references":[{"_id":"689267b3e8da6d1c0d510321","hqmf_id":null,"library_name":"MATGlobalCommonFunctions","statement_name":"EarliestOf"},{"_id":"689267b3e8da6d1c0d510322","hqmf_id":null,"library_name":"PCMaternal","statement_name":"LastTimeOfDelivery"}]},{"_id":"689267b3e8da6d1c0d51032f","statement_name":"LastEstimatedGestationalAge","statement_references":[{"_id":"689267b3e8da6d1c0d510323","hqmf_id":null,"library_name":"MATGlobalCommonFunctions","statement_name":"EarliestOf"},{"_id":"689267b3e8da6d1c0d510324","hqmf_id":null,"library_name":"PCMaternal","statement_name":"LastTimeOfDelivery"}]},{"_id":"689267b3e8da6d1c0d510330","statement_name":"Variable Calculated Gestational Age","statement_references":[{"_id":"689267b3e8da6d1c0d510325","hqmf_id":null,"library_name":"PCMaternal","statement_name":"Delivery Encounter with Age Range"},{"_id":"689267b3e8da6d1c0d510326","hqmf_id":null,"library_name":"PCMaternal","statement_name":"CalculatedGestationalAge"}]}]},{"_id":"689267b3e8da6d1c0d510334","cql":"library TJCOverall version '6.0.000'\n\nusing QDM version '5.6'\n\ninclude MATGlobalCommonFunctions version '7.0.000' called Global\n\nvalueset \"Comfort Measures\": 'urn:oid:1.3.6.1.4.1.33895.1.3.0.45' \nvalueset \"Discharge To Acute Care Facility\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.87' \nvalueset \"Discharged to Health Care Facility for Hospice Care\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.207' \nvalueset \"Discharged to Home for Hospice Care\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.209' \nvalueset \"Emergency Department Visit\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.292' \nvalueset \"Hemorrhagic Stroke\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.212' \nvalueset \"Ischemic Stroke\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.247' \nvalueset \"Left Against Medical Advice\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.308' \nvalueset \"Non-Elective Inpatient Encounter\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.424' \nvalueset \"Observation Services\": 'urn:oid:2.16.840.1.113762.1.4.1111.143' \nvalueset \"Patient Expired\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.309' \n\nparameter \"Measurement Period\" Interval\u003cDateTime\u003e\n\ncontext Patient\n\ndefine \"Intervention Comfort Measures\":\n  [\"Intervention, Order\": \"Comfort Measures\"]\n    union [\"Intervention, Performed\": \"Comfort Measures\"]\n\ndefine \"Ischemic Stroke Encounters with Discharge Disposition\":\n  ( ( \"Ischemic Stroke Encounter\" IschemicStrokeEncounter\n        where IschemicStrokeEncounter.dischargeDisposition in \"Discharge To Acute Care Facility\"\n          or IschemicStrokeEncounter.dischargeDisposition in \"Left Against Medical Advice\"\n          or IschemicStrokeEncounter.dischargeDisposition in \"Patient Expired\"\n          or IschemicStrokeEncounter.dischargeDisposition in \"Discharged to Home for Hospice Care\"\n          or IschemicStrokeEncounter.dischargeDisposition in \"Discharged to Health Care Facility for Hospice Care\"\n    )\n  )\n\ndefine \"Ischemic Stroke Encounter\":\n  \"Encounter with Principal Diagnosis and Age\" EncounterWithAge\n    where exists ( EncounterWithAge.diagnoses Diagnosis\n        where Diagnosis.code in \"Ischemic Stroke\"\n          and Diagnosis.rank = 1\n    )\n\ndefine \"All Stroke Encounter\":\n  \"Non Elective Inpatient Encounter\" NonElectiveEncounter\n    where exists ( NonElectiveEncounter.diagnoses Diagnosis\n        where Diagnosis.rank = 1\n          and ( Diagnosis.code in \"Hemorrhagic Stroke\"\n              or Diagnosis.code in \"Ischemic Stroke\"\n          )\n    )\n\ndefine \"Encounter with Comfort Measures during Hospitalization\":\n  \"Ischemic Stroke Encounter\" IschemicStrokeEncounter\n    with \"Intervention Comfort Measures\" ComfortMeasure\n      such that Coalesce(start of Global.\"NormalizeInterval\"(ComfortMeasure.relevantDatetime, ComfortMeasure.relevantPeriod), ComfortMeasure.authorDatetime)during Global.\"HospitalizationWithObservation\" ( IschemicStrokeEncounter )\n\ndefine \"Non Elective Inpatient Encounter\":\n  [\"Encounter, Performed\": \"Non-Elective Inpatient Encounter\"] NonElectiveEncounter\n    where Global.\"LengthInDays\" ( NonElectiveEncounter.relevantPeriod ) \u003c= 120\n      and NonElectiveEncounter.relevantPeriod ends during day of \"Measurement Period\"\n\ndefine \"Encounter with Principal Diagnosis and Age\":\n  \"All Stroke Encounter\" AllStrokeEncounter\n    where AgeInYearsAt(date from(start of AllStrokeEncounter.relevantPeriod))\u003e= 18\n\ndefine function \"TruncateTime\"(Value DateTime ):\n  DateTime(year from Value, month from Value, day from Value, 0, 0, 0, 0, timezoneoffset from Value)\n\ndefine function \"CalendarDayOfOrDayAfter\"(StartValue DateTime ):\n  Interval[\"TruncateTime\"(StartValue), \"TruncateTime\"(StartValue + 2 days))\n\ndefine function \"HospitalizationWithObservationLengthofStay\"(Encounter \"Encounter, Performed\" ):\n  Global.\"LengthInDays\" ( Global.\"HospitalizationWithObservation\" ( Encounter ) )\n\n","elm":{"library":{"annotation":[{"translatorOptions":"EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion,DisableMethodInvocation","type":"CqlToElmInfo"},{"type":"Annotation","s":{"r":"165","s":[{"value":["","library TJCOverall version '6.0.000'"]}]}}],"identifier":{"id":"TJCOverall","version":"6.0.000"},"schemaIdentifier":{"id":"urn:hl7-org:elm","version":"r1"},"usings":{"def":[{"localIdentifier":"System","uri":"urn:hl7-org:elm-types:r1"},{"localId":"1","locator":"3:1-3:23","localIdentifier":"QDM","uri":"urn:healthit-gov:qdm:v5_6","version":"5.6","annotation":[{"type":"Annotation","s":{"r":"1","s":[{"value":["","using "]},{"s":[{"value":["QDM"]}]},{"value":[" version ","'5.6'"]}]}}]}]},"includes":{"def":[{"localId":"2","locator":"5:1-5:64","localIdentifier":"Global","path":"MATGlobalCommonFunctions","version":"7.0.000","annotation":[{"type":"Annotation","s":{"r":"2","s":[{"value":["","include "]},{"s":[{"value":["MATGlobalCommonFunctions"]}]},{"value":[" version ","'7.0.000'"," called ","Global"]}]}}]}]},"parameters":{"def":[{"localId":"16","locator":"19:1-19:49","name":"Measurement Period","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"16","s":[{"value":["","parameter ","\"Measurement Period\""," "]},{"r":"15","s":[{"value":["Interval\u003c"]},{"r":"14","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}}],"parameterTypeSpecifier":{"localId":"15","locator":"19:32-19:49","type":"IntervalTypeSpecifier","pointType":{"localId":"14","locator":"19:41-19:48","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},"valueSets":{"def":[{"localId":"3","locator":"7:1-7:65","name":"Comfort Measures","id":"1.3.6.1.4.1.33895.1.3.0.45","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"3","s":[{"value":["","valueset ","\"Comfort Measures\"",": ","'urn:oid:1.3.6.1.4.1.33895.1.3.0.45'"]}]}}]},{"localId":"4","locator":"8:1-8:87","name":"Discharge To Acute Care Facility","id":"2.16.840.1.113883.3.117.1.7.1.87","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"4","s":[{"value":["","valueset ","\"Discharge To Acute Care Facility\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.87'"]}]}}]},{"localId":"5","locator":"9:1-9:107","name":"Discharged to Health Care Facility for Hospice Care","id":"2.16.840.1.113883.3.117.1.7.1.207","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"5","s":[{"value":["","valueset ","\"Discharged to Health Care Facility for Hospice Care\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.207'"]}]}}]},{"localId":"6","locator":"10:1-10:91","name":"Discharged to Home for Hospice Care","id":"2.16.840.1.113883.3.117.1.7.1.209","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"6","s":[{"value":["","valueset ","\"Discharged to Home for Hospice Care\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.209'"]}]}}]},{"localId":"7","locator":"11:1-11:82","name":"Emergency Department Visit","id":"2.16.840.1.113883.3.117.1.7.1.292","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"7","s":[{"value":["","valueset ","\"Emergency Department Visit\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.292'"]}]}}]},{"localId":"8","locator":"12:1-12:74","name":"Hemorrhagic Stroke","id":"2.16.840.1.113883.3.117.1.7.1.212","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"8","s":[{"value":["","valueset ","\"Hemorrhagic Stroke\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.212'"]}]}}]},{"localId":"9","locator":"13:1-13:71","name":"Ischemic Stroke","id":"2.16.840.1.113883.3.117.1.7.1.247","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"9","s":[{"value":["","valueset ","\"Ischemic Stroke\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.247'"]}]}}]},{"localId":"10","locator":"14:1-14:83","name":"Left Against Medical Advice","id":"2.16.840.1.113883.3.117.1.7.1.308","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"10","s":[{"value":["","valueset ","\"Left Against Medical Advice\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.308'"]}]}}]},{"localId":"11","locator":"15:1-15:88","name":"Non-Elective Inpatient Encounter","id":"2.16.840.1.113883.3.117.1.7.1.424","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"11","s":[{"value":["","valueset ","\"Non-Elective Inpatient Encounter\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.424'"]}]}}]},{"localId":"12","locator":"16:1-16:73","name":"Observation Services","id":"2.16.840.1.113762.1.4.1111.143","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"12","s":[{"value":["","valueset ","\"Observation Services\"",": ","'urn:oid:2.16.840.1.113762.1.4.1111.143'"]}]}}]},{"localId":"13","locator":"17:1-17:71","name":"Patient Expired","id":"2.16.840.1.113883.3.117.1.7.1.309","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"13","s":[{"value":["","valueset ","\"Patient Expired\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.309'"]}]}}]}]},"contexts":{"def":[{"locator":"21:1-21:15","name":"Patient"}]},"statements":{"def":[{"locator":"21:1-21:15","name":"Patient","context":"Patient","expression":{"type":"SingletonFrom","operand":{"locator":"21:1-21:15","dataType":"{urn:healthit-gov:qdm:v5_6}Patient","templateId":"Patient","type":"Retrieve"}}},{"localId":"20","locator":"23:1-25:57","name":"Intervention Comfort Measures","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"20","s":[{"value":["","define ","\"Intervention Comfort Measures\"",":\n  "]},{"r":"19","s":[{"r":"17","s":[{"value":["[","\"Intervention, Order\"",": "]},{"s":[{"value":["\"Comfort Measures\""]}]},{"value":["]"]}]},{"value":["\n    union "]},{"r":"18","s":[{"value":["[","\"Intervention, Performed\"",": "]},{"s":[{"value":["\"Comfort Measures\""]}]},{"value":["]"]}]}]}]}}],"expression":{"localId":"19","locator":"24:3-25:57","type":"Union","operand":[{"type":"As","operand":{"localId":"17","locator":"24:3-24:45","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveInterventionOrder","templateId":"PositiveInterventionOrder","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"24:27-24:44","name":"Comfort Measures","type":"ValueSetRef"}},"asTypeSpecifier":{"type":"ListTypeSpecifier","elementType":{"type":"ChoiceTypeSpecifier","choice":[{"name":"{urn:healthit-gov:qdm:v5_6}PositiveInterventionPerformed","type":"NamedTypeSpecifier"},{"name":"{urn:healthit-gov:qdm:v5_6}PositiveInterventionOrder","type":"NamedTypeSpecifier"}]}}},{"type":"As","operand":{"localId":"18","locator":"25:11-25:57","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveInterventionPerformed","templateId":"PositiveInterventionPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"25:39-25:56","name":"Comfort Measures","type":"ValueSetRef"}},"asTypeSpecifier":{"type":"ListTypeSpecifier","elementType":{"type":"ChoiceTypeSpecifier","choice":[{"name":"{urn:healthit-gov:qdm:v5_6}PositiveInterventionPerformed","type":"NamedTypeSpecifier"},{"name":"{urn:healthit-gov:qdm:v5_6}PositiveInterventionOrder","type":"NamedTypeSpecifier"}]}}}]}},{"localId":"35","locator":"58:1-61:85","name":"Non Elective Inpatient Encounter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"35","s":[{"value":["","define ","\"Non Elective Inpatient Encounter\"",":\n  "]},{"r":"34","s":[{"s":[{"r":"22","s":[{"r":"21","s":[{"r":"21","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Non-Elective Inpatient Encounter\""]}]},{"value":["]"]}]}]},{"value":[" ","NonElectiveEncounter"]}]}]},{"value":["\n    "]},{"r":"33","s":[{"value":["where "]},{"r":"33","s":[{"r":"28","s":[{"r":"26","s":[{"r":"23","s":[{"value":["Global"]}]},{"value":["."]},{"r":"26","s":[{"value":["\"LengthInDays\""," ( "]},{"r":"25","s":[{"r":"24","s":[{"value":["NonElectiveEncounter"]}]},{"value":["."]},{"r":"25","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]},{"r":"27","value":[" ","\u003c="," ","120"]}]},{"value":["\n      and "]},{"r":"32","s":[{"r":"30","s":[{"r":"29","s":[{"value":["NonElectiveEncounter"]}]},{"value":["."]},{"r":"30","s":[{"value":["relevantPeriod"]}]}]},{"r":"32","value":[" ","ends during day of"," "]},{"r":"31","s":[{"value":["\"Measurement Period\""]}]}]}]}]}]}]}}],"expression":{"localId":"34","locator":"59:3-61:85","type":"Query","source":[{"localId":"22","locator":"59:3-59:83","alias":"NonElectiveEncounter","expression":{"localId":"21","locator":"59:3-59:62","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"59:28-59:61","name":"Non-Elective Inpatient Encounter","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"33","locator":"60:5-61:85","type":"And","operand":[{"localId":"28","locator":"60:11-60:78","type":"LessOrEqual","operand":[{"localId":"26","locator":"60:11-60:71","name":"LengthInDays","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"25","locator":"60:35-60:69","path":"relevantPeriod","scope":"NonElectiveEncounter","type":"Property"}]},{"localId":"27","locator":"60:76-60:78","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"120","type":"Literal"}]},{"localId":"32","locator":"61:11-61:85","precision":"Day","type":"In","operand":[{"locator":"61:47-61:50","type":"End","operand":{"localId":"30","locator":"61:11-61:45","path":"relevantPeriod","scope":"NonElectiveEncounter","type":"Property"}},{"localId":"31","locator":"61:66-61:85","name":"Measurement Period","type":"ParameterRef"}]}]}}},{"localId":"57","locator":"44:1-51:5","name":"All Stroke Encounter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"57","s":[{"value":["","define ","\"All Stroke Encounter\"",":\n  "]},{"r":"56","s":[{"s":[{"r":"37","s":[{"r":"36","s":[{"s":[{"value":["\"Non Elective Inpatient Encounter\""]}]}]},{"value":[" ","NonElectiveEncounter"]}]}]},{"value":["\n    "]},{"r":"55","s":[{"value":["where "]},{"r":"55","s":[{"value":["exists "]},{"r":"54","s":[{"value":["( "]},{"r":"54","s":[{"s":[{"r":"39","s":[{"r":"38","s":[{"s":[{"value":["NonElectiveEncounter",".","diagnoses"]}]}]},{"value":[" ","Diagnosis"]}]}]},{"value":["\n        "]},{"r":"53","s":[{"value":["where "]},{"r":"53","s":[{"r":"43","s":[{"r":"41","s":[{"r":"40","s":[{"value":["Diagnosis"]}]},{"value":["."]},{"r":"41","s":[{"value":["rank"]}]}]},{"r":"42","value":[" ","="," ","1"]}]},{"value":["\n          and "]},{"r":"52","s":[{"value":["( "]},{"r":"52","s":[{"r":"47","s":[{"r":"45","s":[{"r":"44","s":[{"value":["Diagnosis"]}]},{"value":["."]},{"r":"45","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"46","s":[{"value":["\"Hemorrhagic Stroke\""]}]}]},{"value":["\n              or "]},{"r":"51","s":[{"r":"49","s":[{"r":"48","s":[{"value":["Diagnosis"]}]},{"value":["."]},{"r":"49","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"50","s":[{"value":["\"Ischemic Stroke\""]}]}]}]},{"value":["\n          )"]}]}]}]}]},{"value":["\n    )"]}]}]}]}]}]}}],"expression":{"localId":"56","locator":"45:3-51:5","type":"Query","source":[{"localId":"37","locator":"45:3-45:57","alias":"NonElectiveEncounter","expression":{"localId":"36","locator":"45:3-45:36","name":"Non Elective Inpatient Encounter","type":"ExpressionRef"}}],"relationship":[],"where":{"localId":"55","locator":"46:5-51:5","type":"Exists","operand":{"localId":"54","locator":"46:18-51:5","type":"Query","source":[{"localId":"39","locator":"46:20-46:59","alias":"Diagnosis","expression":{"localId":"38","locator":"46:20-46:49","path":"diagnoses","scope":"NonElectiveEncounter","type":"Property"}}],"relationship":[],"where":{"localId":"53","locator":"47:9-50:11","type":"And","operand":[{"localId":"43","locator":"47:15-47:32","type":"Equal","operand":[{"localId":"41","locator":"47:15-47:28","path":"rank","scope":"Diagnosis","type":"Property"},{"localId":"42","locator":"47:32","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"1","type":"Literal"}]},{"localId":"52","locator":"48:15-50:11","type":"Or","operand":[{"localId":"47","locator":"48:17-48:54","type":"InValueSet","code":{"localId":"45","locator":"48:17-48:30","path":"code","scope":"Diagnosis","type":"Property"},"valueset":{"localId":"46","locator":"48:35-48:54","name":"Hemorrhagic Stroke","type":"ValueSetRef"}},{"localId":"51","locator":"49:18-49:52","type":"InValueSet","code":{"localId":"49","locator":"49:18-49:31","path":"code","scope":"Diagnosis","type":"Property"},"valueset":{"localId":"50","locator":"49:36-49:52","name":"Ischemic Stroke","type":"ValueSetRef"}}]}]}}}}},{"localId":"68","locator":"63:1-65:82","name":"Encounter with Principal Diagnosis and Age","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"68","s":[{"value":["","define ","\"Encounter with Principal Diagnosis and Age\"",":\n  "]},{"r":"67","s":[{"s":[{"r":"59","s":[{"r":"58","s":[{"s":[{"value":["\"All Stroke Encounter\""]}]}]},{"value":[" ","AllStrokeEncounter"]}]}]},{"value":["\n    "]},{"r":"66","s":[{"value":["where "]},{"r":"66","s":[{"r":"64","s":[{"value":["AgeInYearsAt","("]},{"r":"63","s":[{"value":["date from"]},{"r":"62","s":[{"value":["("]},{"r":"62","s":[{"value":["start of "]},{"r":"61","s":[{"r":"60","s":[{"value":["AllStrokeEncounter"]}]},{"value":["."]},{"r":"61","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]}]},{"value":[")"]}]},{"r":"65","value":["\u003e="," ","18"]}]}]}]}]}}],"expression":{"localId":"67","locator":"64:3-65:82","type":"Query","source":[{"localId":"59","locator":"64:3-64:43","alias":"AllStrokeEncounter","expression":{"localId":"58","locator":"64:3-64:24","name":"All Stroke Encounter","type":"ExpressionRef"}}],"relationship":[],"where":{"localId":"66","locator":"65:5-65:82","type":"GreaterOrEqual","operand":[{"localId":"64","locator":"65:11-65:77","precision":"Year","type":"CalculateAgeAt","operand":[{"type":"ToDate","operand":{"path":"birthDatetime","type":"Property","source":{"name":"Patient","type":"ExpressionRef"}}},{"localId":"63","locator":"65:24-65:76","type":"DateFrom","operand":{"localId":"62","locator":"65:33-65:76","type":"Start","operand":{"localId":"61","locator":"65:43-65:75","path":"relevantPeriod","scope":"AllStrokeEncounter","type":"Property"}}}]},{"localId":"65","locator":"65:81-65:82","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"18","type":"Literal"}]}}},{"localId":"85","locator":"37:1-42:5","name":"Ischemic Stroke Encounter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"85","s":[{"value":["","define ","\"Ischemic Stroke Encounter\"",":\n  "]},{"r":"84","s":[{"s":[{"r":"70","s":[{"r":"69","s":[{"s":[{"value":["\"Encounter with Principal Diagnosis and Age\""]}]}]},{"value":[" ","EncounterWithAge"]}]}]},{"value":["\n    "]},{"r":"83","s":[{"value":["where "]},{"r":"83","s":[{"value":["exists "]},{"r":"82","s":[{"value":["( "]},{"r":"82","s":[{"s":[{"r":"72","s":[{"r":"71","s":[{"s":[{"value":["EncounterWithAge",".","diagnoses"]}]}]},{"value":[" ","Diagnosis"]}]}]},{"value":["\n        "]},{"r":"81","s":[{"value":["where "]},{"r":"81","s":[{"r":"76","s":[{"r":"74","s":[{"r":"73","s":[{"value":["Diagnosis"]}]},{"value":["."]},{"r":"74","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"75","s":[{"value":["\"Ischemic Stroke\""]}]}]},{"value":["\n          and "]},{"r":"80","s":[{"r":"78","s":[{"r":"77","s":[{"value":["Diagnosis"]}]},{"value":["."]},{"r":"78","s":[{"value":["rank"]}]}]},{"r":"79","value":[" ","="," ","1"]}]}]}]}]},{"value":["\n    )"]}]}]}]}]}]}}],"expression":{"localId":"84","locator":"38:3-42:5","type":"Query","source":[{"localId":"70","locator":"38:3-38:63","alias":"EncounterWithAge","expression":{"localId":"69","locator":"38:3-38:46","name":"Encounter with Principal Diagnosis and Age","type":"ExpressionRef"}}],"relationship":[],"where":{"localId":"83","locator":"39:5-42:5","type":"Exists","operand":{"localId":"82","locator":"39:18-42:5","type":"Query","source":[{"localId":"72","locator":"39:20-39:55","alias":"Diagnosis","expression":{"localId":"71","locator":"39:20-39:45","path":"diagnoses","scope":"EncounterWithAge","type":"Property"}}],"relationship":[],"where":{"localId":"81","locator":"40:9-41:32","type":"And","operand":[{"localId":"76","locator":"40:15-40:49","type":"InValueSet","code":{"localId":"74","locator":"40:15-40:28","path":"code","scope":"Diagnosis","type":"Property"},"valueset":{"localId":"75","locator":"40:33-40:49","name":"Ischemic Stroke","type":"ValueSetRef"}},{"localId":"80","locator":"41:15-41:32","type":"Equal","operand":[{"localId":"78","locator":"41:15-41:28","path":"rank","scope":"Diagnosis","type":"Property"},{"localId":"79","locator":"41:32","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"1","type":"Literal"}]}]}}}}},{"localId":"113","locator":"27:1-35:3","name":"Ischemic Stroke Encounters with Discharge Disposition","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"113","s":[{"value":["","define ","\"Ischemic Stroke Encounters with Discharge Disposition\"",":\n  "]},{"r":"112","s":[{"value":["( "]},{"r":"112","s":[{"value":["( "]},{"r":"112","s":[{"s":[{"r":"87","s":[{"r":"86","s":[{"s":[{"value":["\"Ischemic Stroke Encounter\""]}]}]},{"value":[" ","IschemicStrokeEncounter"]}]}]},{"value":["\n        "]},{"r":"111","s":[{"value":["where "]},{"r":"111","s":[{"r":"106","s":[{"r":"101","s":[{"r":"96","s":[{"r":"91","s":[{"r":"89","s":[{"r":"88","s":[{"value":["IschemicStrokeEncounter"]}]},{"value":["."]},{"r":"89","s":[{"value":["dischargeDisposition"]}]}]},{"value":[" in "]},{"r":"90","s":[{"value":["\"Discharge To Acute Care Facility\""]}]}]},{"value":["\n          or "]},{"r":"95","s":[{"r":"93","s":[{"r":"92","s":[{"value":["IschemicStrokeEncounter"]}]},{"value":["."]},{"r":"93","s":[{"value":["dischargeDisposition"]}]}]},{"value":[" in "]},{"r":"94","s":[{"value":["\"Left Against Medical Advice\""]}]}]}]},{"value":["\n          or "]},{"r":"100","s":[{"r":"98","s":[{"r":"97","s":[{"value":["IschemicStrokeEncounter"]}]},{"value":["."]},{"r":"98","s":[{"value":["dischargeDisposition"]}]}]},{"value":[" in "]},{"r":"99","s":[{"value":["\"Patient Expired\""]}]}]}]},{"value":["\n          or "]},{"r":"105","s":[{"r":"103","s":[{"r":"102","s":[{"value":["IschemicStrokeEncounter"]}]},{"value":["."]},{"r":"103","s":[{"value":["dischargeDisposition"]}]}]},{"value":[" in "]},{"r":"104","s":[{"value":["\"Discharged to Home for Hospice Care\""]}]}]}]},{"value":["\n          or "]},{"r":"110","s":[{"r":"108","s":[{"r":"107","s":[{"value":["IschemicStrokeEncounter"]}]},{"value":["."]},{"r":"108","s":[{"value":["dischargeDisposition"]}]}]},{"value":[" in "]},{"r":"109","s":[{"value":["\"Discharged to Health Care Facility for Hospice Care\""]}]}]}]}]}]},{"value":["\n    )"]}]},{"value":["\n  )"]}]}]}}],"expression":{"localId":"112","locator":"28:3-35:3","type":"Query","source":[{"localId":"87","locator":"28:7-28:57","alias":"IschemicStrokeEncounter","expression":{"localId":"86","locator":"28:7-28:33","name":"Ischemic Stroke Encounter","type":"ExpressionRef"}}],"relationship":[],"where":{"localId":"111","locator":"29:9-33:114","type":"Or","operand":[{"localId":"106","locator":"29:15-32:98","type":"Or","operand":[{"localId":"101","locator":"29:15-31:78","type":"Or","operand":[{"localId":"96","locator":"29:15-30:90","type":"Or","operand":[{"localId":"91","locator":"29:15-29:96","type":"InValueSet","code":{"localId":"89","locator":"29:15-29:58","path":"dischargeDisposition","scope":"IschemicStrokeEncounter","type":"Property"},"valueset":{"localId":"90","locator":"29:63-29:96","name":"Discharge To Acute Care Facility","type":"ValueSetRef"}},{"localId":"95","locator":"30:14-30:90","type":"InValueSet","code":{"localId":"93","locator":"30:14-30:57","path":"dischargeDisposition","scope":"IschemicStrokeEncounter","type":"Property"},"valueset":{"localId":"94","locator":"30:62-30:90","name":"Left Against Medical Advice","type":"ValueSetRef"}}]},{"localId":"100","locator":"31:14-31:78","type":"InValueSet","code":{"localId":"98","locator":"31:14-31:57","path":"dischargeDisposition","scope":"IschemicStrokeEncounter","type":"Property"},"valueset":{"localId":"99","locator":"31:62-31:78","name":"Patient Expired","type":"ValueSetRef"}}]},{"localId":"105","locator":"32:14-32:98","type":"InValueSet","code":{"localId":"103","locator":"32:14-32:57","path":"dischargeDisposition","scope":"IschemicStrokeEncounter","type":"Property"},"valueset":{"localId":"104","locator":"32:62-32:98","name":"Discharged to Home for Hospice Care","type":"ValueSetRef"}}]},{"localId":"110","locator":"33:14-33:114","type":"InValueSet","code":{"localId":"108","locator":"33:14-33:57","path":"dischargeDisposition","scope":"IschemicStrokeEncounter","type":"Property"},"valueset":{"localId":"109","locator":"33:62-33:114","name":"Discharged to Health Care Facility for Hospice Care","type":"ValueSetRef"}}]}}},{"localId":"134","locator":"53:1-56:230","name":"Encounter with Comfort Measures during Hospitalization","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"134","s":[{"value":["","define ","\"Encounter with Comfort Measures during Hospitalization\"",":\n  "]},{"r":"133","s":[{"s":[{"r":"115","s":[{"r":"114","s":[{"s":[{"value":["\"Ischemic Stroke Encounter\""]}]}]},{"value":[" ","IschemicStrokeEncounter"]}]}]},{"value":["\n    "]},{"r":"132","s":[{"value":["with "]},{"r":"117","s":[{"r":"116","s":[{"s":[{"value":["\"Intervention Comfort Measures\""]}]}]},{"value":[" ","ComfortMeasure"]}]},{"value":["\n      such that "]},{"r":"131","s":[{"r":"127","s":[{"value":["Coalesce","("]},{"r":"124","s":[{"value":["start of "]},{"r":"123","s":[{"r":"118","s":[{"value":["Global"]}]},{"value":["."]},{"r":"123","s":[{"value":["\"NormalizeInterval\"","("]},{"r":"120","s":[{"r":"119","s":[{"value":["ComfortMeasure"]}]},{"value":["."]},{"r":"120","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"122","s":[{"r":"121","s":[{"value":["ComfortMeasure"]}]},{"value":["."]},{"r":"122","s":[{"value":["relevantPeriod"]}]}]},{"value":[")"]}]}]}]},{"value":[", "]},{"r":"126","s":[{"r":"125","s":[{"value":["ComfortMeasure"]}]},{"value":["."]},{"r":"126","s":[{"value":["authorDatetime"]}]}]},{"value":[")"]}]},{"r":"131","value":["during"," "]},{"r":"130","s":[{"r":"128","s":[{"value":["Global"]}]},{"value":["."]},{"r":"130","s":[{"value":["\"HospitalizationWithObservation\""," ( "]},{"r":"129","s":[{"value":["IschemicStrokeEncounter"]}]},{"value":[" )"]}]}]}]}]}]}]}}],"expression":{"localId":"133","locator":"54:3-56:230","type":"Query","source":[{"localId":"115","locator":"54:3-54:53","alias":"IschemicStrokeEncounter","expression":{"localId":"114","locator":"54:3-54:29","name":"Ischemic Stroke Encounter","type":"ExpressionRef"}}],"relationship":[{"localId":"132","locator":"55:5-56:230","alias":"ComfortMeasure","type":"With","expression":{"localId":"116","locator":"55:10-55:40","name":"Intervention Comfort Measures","type":"ExpressionRef"},"suchThat":{"localId":"131","locator":"56:17-56:230","type":"In","operand":[{"localId":"127","locator":"56:17-56:156","type":"Coalesce","operand":[{"localId":"124","locator":"56:26-56:124","type":"Start","operand":{"localId":"123","locator":"56:35-56:124","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"120","locator":"56:62-56:92","path":"relevantDatetime","scope":"ComfortMeasure","type":"Property"},{"localId":"122","locator":"56:95-56:123","path":"relevantPeriod","scope":"ComfortMeasure","type":"Property"}]}},{"localId":"126","locator":"56:127-56:155","path":"authorDatetime","scope":"ComfortMeasure","type":"Property"}]},{"localId":"130","locator":"56:164-56:230","name":"HospitalizationWithObservation","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"129","locator":"56:206-56:228","name":"IschemicStrokeEncounter","type":"AliasRef"}]}]}}]}},{"localId":"149","locator":"67:1-68:100","name":"TruncateTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"149","s":[{"value":["","define function ","\"TruncateTime\"","(","Value"," "]},{"r":"135","s":[{"value":["DateTime"]}]},{"value":[" ):\n  "]},{"r":"148","s":[{"r":"148","s":[{"value":["DateTime","("]},{"r":"137","s":[{"value":["year from "]},{"r":"136","s":[{"value":["Value"]}]}]},{"value":[", "]},{"r":"139","s":[{"value":["month from "]},{"r":"138","s":[{"value":["Value"]}]}]},{"value":[", "]},{"r":"141","s":[{"value":["day from "]},{"r":"140","s":[{"value":["Value"]}]}]},{"r":"142","value":[", ","0",", ","0",", ","0",", ","0",", "]},{"r":"147","s":[{"value":["timezoneoffset from "]},{"r":"146","s":[{"value":["Value"]}]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"148","locator":"68:3-68:100","type":"DateTime","year":{"localId":"137","locator":"68:12-68:26","precision":"Year","type":"DateTimeComponentFrom","operand":{"localId":"136","locator":"68:22-68:26","name":"Value","type":"OperandRef"}},"month":{"localId":"139","locator":"68:29-68:44","precision":"Month","type":"DateTimeComponentFrom","operand":{"localId":"138","locator":"68:40-68:44","name":"Value","type":"OperandRef"}},"day":{"localId":"141","locator":"68:47-68:60","precision":"Day","type":"DateTimeComponentFrom","operand":{"localId":"140","locator":"68:56-68:60","name":"Value","type":"OperandRef"}},"hour":{"localId":"142","locator":"68:63","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"0","type":"Literal"},"minute":{"localId":"143","locator":"68:66","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"0","type":"Literal"},"second":{"localId":"144","locator":"68:69","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"0","type":"Literal"},"millisecond":{"localId":"145","locator":"68:72","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"0","type":"Literal"},"timezoneOffset":{"localId":"147","locator":"68:75-68:99","type":"TimezoneOffsetFrom","operand":{"localId":"146","locator":"68:95-68:99","name":"Value","type":"OperandRef"}}},"operand":[{"name":"Value","operandTypeSpecifier":{"localId":"135","locator":"67:38-67:45","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}]},{"localId":"158","locator":"70:1-71:75","name":"CalendarDayOfOrDayAfter","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"158","s":[{"value":["","define function ","\"CalendarDayOfOrDayAfter\"","(","StartValue"," "]},{"r":"150","s":[{"value":["DateTime"]}]},{"value":[" ):\n  "]},{"r":"157","s":[{"r":"157","s":[{"value":["Interval["]},{"r":"152","s":[{"value":["\"TruncateTime\"","("]},{"r":"151","s":[{"value":["StartValue"]}]},{"value":[")"]}]},{"value":[", "]},{"r":"156","s":[{"value":["\"TruncateTime\"","("]},{"r":"155","s":[{"r":"153","s":[{"value":["StartValue"]}]},{"value":[" + "]},{"r":"154","s":[{"value":["2 ","days"]}]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"157","locator":"71:3-71:75","lowClosed":true,"highClosed":false,"type":"Interval","low":{"localId":"152","locator":"71:12-71:37","name":"TruncateTime","type":"FunctionRef","operand":[{"localId":"151","locator":"71:27-71:36","name":"StartValue","type":"OperandRef"}]},"high":{"localId":"156","locator":"71:40-71:74","name":"TruncateTime","type":"FunctionRef","operand":[{"localId":"155","locator":"71:55-71:73","type":"Add","operand":[{"localId":"153","locator":"71:55-71:64","name":"StartValue","type":"OperandRef"},{"localId":"154","locator":"71:68-71:73","value":2,"unit":"days","type":"Quantity"}]}]}},"operand":[{"name":"StartValue","operandTypeSpecifier":{"localId":"150","locator":"70:54-70:61","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}]},{"localId":"165","locator":"73:1-74:81","name":"HospitalizationWithObservationLengthofStay","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"165","s":[{"value":["","define function ","\"HospitalizationWithObservationLengthofStay\"","(","Encounter"," "]},{"r":"159","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"164","s":[{"r":"164","s":[{"r":"160","s":[{"value":["Global"]}]},{"value":["."]},{"r":"164","s":[{"value":["\"LengthInDays\""," ( "]},{"r":"163","s":[{"r":"161","s":[{"value":["Global"]}]},{"value":["."]},{"r":"163","s":[{"value":["\"HospitalizationWithObservation\""," ( "]},{"r":"162","s":[{"value":["Encounter"]}]},{"value":[" )"]}]}]},{"value":[" )"]}]}]}]}]}}],"expression":{"localId":"164","locator":"74:3-74:81","name":"LengthInDays","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"163","locator":"74:27-74:79","name":"HospitalizationWithObservation","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"162","locator":"74:69-74:77","name":"Encounter","type":"OperandRef"}]}]},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"159","locator":"73:72-73:93","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]}]}}},"elm_annotations":{"statements":[{"children":[{"children":[{"children":[{"text":"define \"Intervention Comfort Measures\":\n  "}]},{"children":[{"children":[{"children":[{"text":"[\"Intervention, Order\": "}]},{"children":[{"children":[{"text":"\"Comfort Measures\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"17"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"[\"Intervention, Performed\": "}]},{"children":[{"children":[{"text":"\"Comfort Measures\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"18"}],"node_type":"Union","ref_id":"19"}],"ref_id":"20"}],"define_name":"Intervention Comfort Measures"},{"children":[{"children":[{"children":[{"text":"define \"Non Elective Inpatient Encounter\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Non-Elective Inpatient Encounter\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"21"}],"node_type":"Retrieve","ref_id":"21"},{"children":[{"text":" NonElectiveEncounter"}]}],"ref_id":"22"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"23"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"LengthInDays\" ( "}]},{"children":[{"children":[{"children":[{"text":"NonElectiveEncounter"}]}],"ref_id":"24"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"25"}],"node_type":"Property","ref_id":"25"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"26"}],"node_type":"FunctionRef","ref_id":"26"},{"children":[{"text":" \u003c= 120"}],"node_type":"Literal","ref_id":"27"}],"node_type":"LessOrEqual","ref_id":"28"},{"children":[{"text":"\n      and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"NonElectiveEncounter"}]}],"ref_id":"29"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"30"}],"node_type":"Property","ref_id":"30"},{"children":[{"text":" ends during day of "}],"node_type":"In","ref_id":"32"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"31"}],"node_type":"In","ref_id":"32"}],"ref_id":"33"}],"ref_id":"33"}],"node_type":"Query","ref_id":"34"}],"ref_id":"35"}],"define_name":"Non Elective Inpatient Encounter"},{"children":[{"children":[{"children":[{"text":"define \"All Stroke Encounter\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Non Elective Inpatient Encounter\""}]}]}],"node_type":"ExpressionRef","ref_id":"36"},{"children":[{"text":" NonElectiveEncounter"}]}],"ref_id":"37"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"NonElectiveEncounter.diagnoses"}]}]}],"node_type":"Property","ref_id":"38"},{"children":[{"text":" Diagnosis"}]}],"ref_id":"39"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Diagnosis"}]}],"ref_id":"40"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"rank"}]}],"node_type":"Property","ref_id":"41"}],"node_type":"Property","ref_id":"41"},{"children":[{"text":" = 1"}],"node_type":"Literal","ref_id":"42"}],"node_type":"Equal","ref_id":"43"},{"children":[{"text":"\n          and "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Diagnosis"}]}],"ref_id":"44"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"45"}],"ref_id":"45"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Hemorrhagic Stroke\""}]}],"ref_id":"46"}],"node_type":"InValueSet","ref_id":"47"},{"children":[{"text":"\n              or "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Diagnosis"}]}],"ref_id":"48"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"49"}],"ref_id":"49"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Ischemic Stroke\""}]}],"ref_id":"50"}],"node_type":"InValueSet","ref_id":"51"}],"node_type":"Or","ref_id":"52"},{"children":[{"text":"\n          )"}]}],"node_type":"Or","ref_id":"52"}],"ref_id":"53"}],"ref_id":"53"}],"node_type":"Query","ref_id":"54"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"54"}],"ref_id":"55"}],"ref_id":"55"}],"node_type":"Query","ref_id":"56"}],"ref_id":"57"}],"define_name":"All Stroke Encounter"},{"children":[{"children":[{"children":[{"text":"define \"Encounter with Principal Diagnosis and Age\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"All Stroke Encounter\""}]}]}],"node_type":"ExpressionRef","ref_id":"58"},{"children":[{"text":" AllStrokeEncounter"}]}],"ref_id":"59"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"text":"AgeInYearsAt("}]},{"children":[{"children":[{"text":"date from"}]},{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"AllStrokeEncounter"}]}],"ref_id":"60"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"61"}],"node_type":"Property","ref_id":"61"}],"node_type":"Start","ref_id":"62"},{"children":[{"text":")"}]}],"node_type":"Start","ref_id":"62"}],"node_type":"DateFrom","ref_id":"63"},{"children":[{"text":")"}]}],"node_type":"CalculateAgeAt","ref_id":"64"},{"children":[{"text":"\u003e= 18"}],"node_type":"Literal","ref_id":"65"}],"ref_id":"66"}],"ref_id":"66"}],"node_type":"Query","ref_id":"67"}],"ref_id":"68"}],"define_name":"Encounter with Principal Diagnosis and Age"},{"children":[{"children":[{"children":[{"text":"define \"Ischemic Stroke Encounter\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Encounter with Principal Diagnosis and Age\""}]}]}],"node_type":"ExpressionRef","ref_id":"69"},{"children":[{"text":" EncounterWithAge"}]}],"ref_id":"70"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"EncounterWithAge.diagnoses"}]}]}],"node_type":"Property","ref_id":"71"},{"children":[{"text":" Diagnosis"}]}],"ref_id":"72"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Diagnosis"}]}],"ref_id":"73"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"74"}],"ref_id":"74"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Ischemic Stroke\""}]}],"ref_id":"75"}],"node_type":"InValueSet","ref_id":"76"},{"children":[{"text":"\n          and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Diagnosis"}]}],"ref_id":"77"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"rank"}]}],"node_type":"Property","ref_id":"78"}],"node_type":"Property","ref_id":"78"},{"children":[{"text":" = 1"}],"node_type":"Literal","ref_id":"79"}],"node_type":"Equal","ref_id":"80"}],"ref_id":"81"}],"ref_id":"81"}],"node_type":"Query","ref_id":"82"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"82"}],"ref_id":"83"}],"ref_id":"83"}],"node_type":"Query","ref_id":"84"}],"ref_id":"85"}],"define_name":"Ischemic Stroke Encounter"},{"children":[{"children":[{"children":[{"text":"define \"Ischemic Stroke Encounters with Discharge Disposition\":\n  "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Ischemic Stroke Encounter\""}]}]}],"node_type":"ExpressionRef","ref_id":"86"},{"children":[{"text":" IschemicStrokeEncounter"}]}],"ref_id":"87"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"IschemicStrokeEncounter"}]}],"ref_id":"88"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"dischargeDisposition"}]}],"ref_id":"89"}],"ref_id":"89"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Discharge To Acute Care Facility\""}]}],"ref_id":"90"}],"node_type":"InValueSet","ref_id":"91"},{"children":[{"text":"\n          or "}]},{"children":[{"children":[{"children":[{"children":[{"text":"IschemicStrokeEncounter"}]}],"ref_id":"92"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"dischargeDisposition"}]}],"ref_id":"93"}],"ref_id":"93"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Left Against Medical Advice\""}]}],"ref_id":"94"}],"node_type":"InValueSet","ref_id":"95"}],"node_type":"Or","ref_id":"96"},{"children":[{"text":"\n          or "}]},{"children":[{"children":[{"children":[{"children":[{"text":"IschemicStrokeEncounter"}]}],"ref_id":"97"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"dischargeDisposition"}]}],"ref_id":"98"}],"ref_id":"98"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Patient Expired\""}]}],"ref_id":"99"}],"node_type":"InValueSet","ref_id":"100"}],"node_type":"Or","ref_id":"101"},{"children":[{"text":"\n          or "}]},{"children":[{"children":[{"children":[{"children":[{"text":"IschemicStrokeEncounter"}]}],"ref_id":"102"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"dischargeDisposition"}]}],"ref_id":"103"}],"ref_id":"103"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Discharged to Home for Hospice Care\""}]}],"ref_id":"104"}],"node_type":"InValueSet","ref_id":"105"}],"node_type":"Or","ref_id":"106"},{"children":[{"text":"\n          or "}]},{"children":[{"children":[{"children":[{"children":[{"text":"IschemicStrokeEncounter"}]}],"ref_id":"107"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"dischargeDisposition"}]}],"ref_id":"108"}],"ref_id":"108"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Discharged to Health Care Facility for Hospice Care\""}]}],"ref_id":"109"}],"node_type":"InValueSet","ref_id":"110"}],"ref_id":"111"}],"ref_id":"111"}],"node_type":"Query","ref_id":"112"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"112"},{"children":[{"text":"\n  )"}]}],"node_type":"Query","ref_id":"112"}],"ref_id":"113"}],"define_name":"Ischemic Stroke Encounters with Discharge Disposition"},{"children":[{"children":[{"children":[{"text":"define \"Encounter with Comfort Measures during Hospitalization\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Ischemic Stroke Encounter\""}]}]}],"node_type":"ExpressionRef","ref_id":"114"},{"children":[{"text":" IschemicStrokeEncounter"}]}],"ref_id":"115"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"Intervention Comfort Measures\""}]}]}],"node_type":"ExpressionRef","ref_id":"116"},{"children":[{"text":" ComfortMeasure"}]}],"ref_id":"117"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"118"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\"("}]},{"children":[{"children":[{"children":[{"text":"ComfortMeasure"}]}],"ref_id":"119"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"120"}],"node_type":"Property","ref_id":"120"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"ComfortMeasure"}]}],"ref_id":"121"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"122"}],"node_type":"Property","ref_id":"122"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"123"}],"node_type":"FunctionRef","ref_id":"123"}],"node_type":"Start","ref_id":"124"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"ComfortMeasure"}]}],"ref_id":"125"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"126"}],"node_type":"Property","ref_id":"126"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"127"},{"children":[{"text":"during "}],"node_type":"In","ref_id":"131"},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"128"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"HospitalizationWithObservation\" ( "}]},{"children":[{"children":[{"text":"IschemicStrokeEncounter"}]}],"node_type":"AliasRef","ref_id":"129"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"130"}],"node_type":"FunctionRef","ref_id":"130"}],"node_type":"In","ref_id":"131"}],"ref_id":"132"}],"node_type":"Query","ref_id":"133"}],"ref_id":"134"}],"define_name":"Encounter with Comfort Measures during Hospitalization"},{"children":[{"children":[{"children":[{"text":"define function \"TruncateTime\"(Value "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"135"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"DateTime("}]},{"children":[{"children":[{"text":"year from "}]},{"children":[{"children":[{"text":"Value"}]}],"node_type":"OperandRef","ref_id":"136"}],"ref_id":"137"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"month from "}]},{"children":[{"children":[{"text":"Value"}]}],"node_type":"OperandRef","ref_id":"138"}],"ref_id":"139"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"day from "}]},{"children":[{"children":[{"text":"Value"}]}],"node_type":"OperandRef","ref_id":"140"}],"ref_id":"141"},{"children":[{"text":", 0, 0, 0, 0, "}],"ref_id":"142"},{"children":[{"children":[{"text":"timezoneoffset from "}]},{"children":[{"children":[{"text":"Value"}]}],"node_type":"OperandRef","ref_id":"146"}],"ref_id":"147"},{"children":[{"text":")"}]}],"node_type":"DateTime","ref_id":"148"}],"node_type":"DateTime","ref_id":"148"}],"ref_id":"149"}],"define_name":"TruncateTime"},{"children":[{"children":[{"children":[{"text":"define function \"CalendarDayOfOrDayAfter\"(StartValue "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"150"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"\"TruncateTime\"("}]},{"children":[{"children":[{"text":"StartValue"}]}],"node_type":"OperandRef","ref_id":"151"},{"children":[{"text":")"}]}],"ref_id":"152"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"\"TruncateTime\"("}]},{"children":[{"children":[{"children":[{"text":"StartValue"}]}],"node_type":"OperandRef","ref_id":"153"},{"children":[{"text":" + "}]},{"children":[{"children":[{"text":"2 days"}]}],"node_type":"Quantity","ref_id":"154"}],"node_type":"Add","ref_id":"155"},{"children":[{"text":")"}]}],"ref_id":"156"},{"children":[{"text":")"}]}],"node_type":"Interval","ref_id":"157"}],"node_type":"Interval","ref_id":"157"}],"ref_id":"158"}],"define_name":"CalendarDayOfOrDayAfter"},{"children":[{"children":[{"children":[{"text":"define function \"HospitalizationWithObservationLengthofStay\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"159"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"160"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"LengthInDays\" ( "}]},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"161"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"HospitalizationWithObservation\" ( "}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"162"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"163"}],"node_type":"FunctionRef","ref_id":"163"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"164"}],"node_type":"FunctionRef","ref_id":"164"}],"node_type":"FunctionRef","ref_id":"164"}],"ref_id":"165"}],"define_name":"HospitalizationWithObservationLengthofStay"}],"identifier":{"id":"TJCOverall","version":"6.0.000"}},"is_main_library":false,"is_top_level":true,"library_name":"TJCOverall","library_version":"6.0.000","statement_dependencies":[{"_id":"689267bae8da6d1c0d510621","statement_name":"TruncateTime"}]}],"created_at":null,"description":"Nulliparous women with a term, singleton baby in a vertex position delivered by cesarean birth","hqmf_id":"2C928083-7ACE-2267-017A-CF7FF4A8021B","hqmf_set_id":"FC52D0DE-B53D-4CCF-816E-1E527748D2D9","hqmf_version_number":"4.0.000","main_cql_library":"CesareanBirth","measure_attributes":[{"code":"OTH","value":"334","name":"eCQM Identifier (Measure Authoring Tool)","code_obj":{"type":"CD","null_flavor":"OTH","original_text":"eCQM Identifier (Measure Authoring Tool)"},"value_obj":{"type":"ED","value":"334","media_type":"text/plain"}},{"code":"OTH","value":"Not Applicable","name":"NQF Number","code_obj":{"type":"CD","null_flavor":"OTH","original_text":"NQF Number"},"value_obj":{"type":"ED","value":"Not Applicable","media_type":"text/plain"}},{"code":"COPY","value":"Measure specifications are in the Public Domain.\n\nLOINC(R) copyright 2004-2021 Regenstrief Institute, Inc. This material contains SNOMED Clinical Terms(R) (SNOMED CT[R]) copyright 2004-2021 International Health Terminology Standards Development Organisation. ICD-10 copyright 2021 World Health Organization. All Rights Reserved.","name":"Copyright","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"COPY","title":"Copyright"},"value_obj":{"type":"ED","value":"Measure specifications are in the Public Domain.\n\nLOINC(R) copyright 2004-2021 Regenstrief Institute, Inc. This material contains SNOMED Clinical Terms(R) (SNOMED CT[R]) copyright 2004-2021 International Health Terminology Standards Development Organisation. ICD-10 copyright 2021 World Health Organization. All Rights Reserved.","media_type":"text/plain"}},{"code":"DISC","value":"These performance measures are not clinical guidelines and do not establish a standard of medical care and have not been tested for all potential applications. The measures and specifications are provided without warranty.","name":"Disclaimer","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DISC","title":"Disclaimer"},"value_obj":{"type":"ED","value":"These performance measures are not clinical guidelines and do not establish a standard of medical care and have not been tested for all potential applications. The measures and specifications are provided without warranty.","media_type":"text/plain"}},{"code":"MSRSCORE","name":"Measure Scoring","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRSCORE","title":"Measure Scoring"},"value_obj":{"type":"CD","system":"2.16.840.1.113883.5.1063","code":"PROPOR","title":"Proportion"}},{"code":"MSRTYPE","name":"Measure Type","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRTYPE","title":"Measure Type"},"value_obj":{"type":"CD","system":"2.16.840.1.113883.5.1063","code":"OUTCOME","title":"OUTCOME"}},{"code":"STRAT","value":"None","name":"Stratification","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"STRAT","title":"Stratification"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"MSRADJ","value":"None","name":"Risk Adjustment","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRADJ","title":"Risk Adjustment"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"MSRAGG","value":"None","name":"Rate Aggregation","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRAGG","title":"Rate Aggregation"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"RAT","value":"The removal of any pressure to not perform a cesarean birth has led to a skyrocketing of hospital, state and national cesarean birth (CB) rates. Some hospitals CB rates were over 50%. Hospitals with CB rates at 15-20% have infant outcomes that are just as good and better maternal outcomes (Symum et al., 2021). There is no data that higher rates improve any outcomes, yet the CB rates continue to rise. This measure seeks to focus attention on the most variable portion of the CB epidemic, the term labor CB in nulliparous women. This population segment accounts for the large majority of the variable portion of the CB rate and is the area most affected by subjectivity.\n\nAs compared to other CB measures, what is different about NTSV CB rate (Primary CB in first births with term singleton pregnancies in head down position) is that there are clear cut quality improvement activities that can be done to address the differences. Main et al. (2012) found that over 60% of the variation among hospitals can be attributed to first birth labor induction rates and first birth early labor admission rates. The results showed if labor was forced when the cervix was not ready the outcomes were poorer. Rosenstein et al. (2021) also showed that labor and delivery guidelines can make a difference in labor outcomes. Many authors have shown that physician factors, rather than patient characteristics or obstetric diagnoses are the major driver for the difference in rates within a hospital (Berkowitz, et al.,1989; Goyert et al., 1989; Luthy et al., 2003, Symum et al., 2021). The dramatic variation in cesarean rates seen in all populations studied is striking. (Cesarean rates varied tenfold in US hospitals nationwide across hospitals, from 7.1 % to 69.9 % and there was a 15-fold variation among low-risk women, from 2.4% to 36.5% (Kozhimannil et al., 2013).\n\nA reduction in the number of nulliparous patients with live term singleton newborns in vertex position (NTSV) delivering by cesarean birth will result in increased patient safety, a substantial decrease in maternal and neonatal morbidity and substantial savings in health care costs. Successful quality improvement efforts incorporate audit and feedback strategies combined with provider and nurse education, guidelines and peer review.\n\nThe measure will assist health care organizations (HCOs) to track nulliparous patients with live term singleton newborns in vertex position delivering by cesarean birth to reduce the occurrence. Nulliparous women have 4-6 times the cesarean birth rate than multiparous women thus the NTSV population is the largest driver of primary cesarean birth rate (Sakala et al. 2020). NTSV has a large variation among facilities, thus identifying an important population on which to focus quality improvement efforts.\nIn addition, a reduction in primary cesarean births will reduce the number of women having repeat cesarean births (almost 90% of mothers who have a primary cesarean birth will have subsequent cesarean birth (CDC, 2020)). Thus, improvement in the rates of cesarean birth for the first birth will reduce the morbidity of all future births and avoid all the controversies with trial of labor after cesarean/elective repeat cesareans.","name":"Rationale","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"RAT","title":"Rationale"},"value_obj":{"type":"ED","value":"The removal of any pressure to not perform a cesarean birth has led to a skyrocketing of hospital, state and national cesarean birth (CB) rates. Some hospitals CB rates were over 50%. Hospitals with CB rates at 15-20% have infant outcomes that are just as good and better maternal outcomes (Symum et al., 2021). There is no data that higher rates improve any outcomes, yet the CB rates continue to rise. This measure seeks to focus attention on the most variable portion of the CB epidemic, the term labor CB in nulliparous women. This population segment accounts for the large majority of the variable portion of the CB rate and is the area most affected by subjectivity.\n\nAs compared to other CB measures, what is different about NTSV CB rate (Primary CB in first births with term singleton pregnancies in head down position) is that there are clear cut quality improvement activities that can be done to address the differences. Main et al. (2012) found that over 60% of the variation among hospitals can be attributed to first birth labor induction rates and first birth early labor admission rates. The results showed if labor was forced when the cervix was not ready the outcomes were poorer. Rosenstein et al. (2021) also showed that labor and delivery guidelines can make a difference in labor outcomes. Many authors have shown that physician factors, rather than patient characteristics or obstetric diagnoses are the major driver for the difference in rates within a hospital (Berkowitz, et al.,1989; Goyert et al., 1989; Luthy et al., 2003, Symum et al., 2021). The dramatic variation in cesarean rates seen in all populations studied is striking. (Cesarean rates varied tenfold in US hospitals nationwide across hospitals, from 7.1 % to 69.9 % and there was a 15-fold variation among low-risk women, from 2.4% to 36.5% (Kozhimannil et al., 2013).\n\nA reduction in the number of nulliparous patients with live term singleton newborns in vertex position (NTSV) delivering by cesarean birth will result in increased patient safety, a substantial decrease in maternal and neonatal morbidity and substantial savings in health care costs. Successful quality improvement efforts incorporate audit and feedback strategies combined with provider and nurse education, guidelines and peer review.\n\nThe measure will assist health care organizations (HCOs) to track nulliparous patients with live term singleton newborns in vertex position delivering by cesarean birth to reduce the occurrence. Nulliparous women have 4-6 times the cesarean birth rate than multiparous women thus the NTSV population is the largest driver of primary cesarean birth rate (Sakala et al. 2020). NTSV has a large variation among facilities, thus identifying an important population on which to focus quality improvement efforts.\nIn addition, a reduction in primary cesarean births will reduce the number of women having repeat cesarean births (almost 90% of mothers who have a primary cesarean birth will have subsequent cesarean birth (CDC, 2020)). Thus, improvement in the rates of cesarean birth for the first birth will reduce the morbidity of all future births and avoid all the controversies with trial of labor after cesarean/elective repeat cesareans.","media_type":"text/plain"}},{"code":"CRS","value":"The American College of Obstetrics and Gynecology (ACOG) report, Evaluation of Cesarean Delivery, recognizes the importance of the Nulliparous, Term Singleton Vertex (NTSV) population as the optimal focus for measurement and quality improvement action. A reduction in the number of nulliparous patients with live term singleton newborns in vertex position delivering by cesarean birth will result in increased patient safety, a substantial decrease in maternal and neonatal morbidity and substantial savings in health care costs.","name":"Clinical Recommendation Statement","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"CRS","title":"Clinical Recommendation Statement"},"value_obj":{"type":"ED","value":"The American College of Obstetrics and Gynecology (ACOG) report, Evaluation of Cesarean Delivery, recognizes the importance of the Nulliparous, Term Singleton Vertex (NTSV) population as the optimal focus for measurement and quality improvement action. A reduction in the number of nulliparous patients with live term singleton newborns in vertex position delivering by cesarean birth will result in increased patient safety, a substantial decrease in maternal and neonatal morbidity and substantial savings in health care costs.","media_type":"text/plain"}},{"code":"IDUR","value":"Within Optimal Range.   The Joint Commission does not want to encourage inappropriately low Cesarean rates that may be unsafe to patients. Acceptable PC-02 rates are 30% or lower, however there is not an established threshold for what rate may be too low. PC-06 serves as a balancing measure for PC-02 to guard against any unanticipated or unintended consequences and to identify unforeseen complications that might arise as a result of quality improvement activities and efforts for this measure. In order to identify areas for improvement, hospitals may want to review results based on specific ICD-10 codes or patient populations. Data could then be analyzed further determine specific patterns or trends to help reduce cesarean births.","name":"Improvement Notation","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"IDUR","title":"Improvement Notation"},"value_obj":{"type":"ED","value":"Within Optimal Range.   The Joint Commission does not want to encourage inappropriately low Cesarean rates that may be unsafe to patients. Acceptable PC-02 rates are 30% or lower, however there is not an established threshold for what rate may be too low. PC-06 serves as a balancing measure for PC-02 to guard against any unanticipated or unintended consequences and to identify unforeseen complications that might arise as a result of quality improvement activities and efforts for this measure. In order to identify areas for improvement, hospitals may want to review results based on specific ICD-10 codes or patient populations. Data could then be analyzed further determine specific patterns or trends to help reduce cesarean births.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONAgency for Healthcare Research and Quality. (2002). AHRQ Quality Indicators Guide to Inpatient Quality Indicators: Quality of Care in Hospitals Volume, Mortality, and Utilization. Revision 4 (December 22, 2004). AHRQ Pub. No. 02-RO204.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONAgency for Healthcare Research and Quality. (2002). AHRQ Quality Indicators Guide to Inpatient Quality Indicators: Quality of Care in Hospitals Volume, Mortality, and Utilization. Revision 4 (December 22, 2004). AHRQ Pub. No. 02-RO204.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONAmerican College of Obstetricians and Gynecologists. (2000). Task Force on Cesarean Delivery Rates. Evaluation of Cesarean Delivery. (Developed under the direction of the Task Force on Cesarean Delivery Rates, Roger K. Freeman, MD, Chair, Arnold W. Cohen, MD, Richard Depp III, MD, Fredric D. Frigoletto Jr, MD, Gary D.V. Hankins, MD, Ellice Lieberman, MD, DrPH, M. Kathryn Menard, MD, David A. Nagey, MD, Carol W. Saffold, MD, Lisa Sams, RNC, MSN and ACOG Staff: Stanley Zinberg, MD, MS, Debra A. Hawks, MPH, and Elizabeth Steele)","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONAmerican College of Obstetricians and Gynecologists. (2000). Task Force on Cesarean Delivery Rates. Evaluation of Cesarean Delivery. (Developed under the direction of the Task Force on Cesarean Delivery Rates, Roger K. Freeman, MD, Chair, Arnold W. Cohen, MD, Richard Depp III, MD, Fredric D. Frigoletto Jr, MD, Gary D.V. Hankins, MD, Ellice Lieberman, MD, DrPH, M. Kathryn Menard, MD, David A. Nagey, MD, Carol W. Saffold, MD, Lisa Sams, RNC, MSN and ACOG Staff: Stanley Zinberg, MD, MS, Debra A. Hawks, MPH, and Elizabeth Steele)","media_type":"text/plain"}},{"code":"REF","value":"CITATIONBailit, J.L., Garrett, J.M., Miller, W.C., McMahon, M.J., \u0026 Cefalo, R.C. (2002). Hospital primary cesarean delivery rates and the risk of poor neonatal outcomes. Am J Obstet Gynecol. 187(3):721-7.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONBailit, J.L., Garrett, J.M., Miller, W.C., McMahon, M.J., \u0026 Cefalo, R.C. (2002). Hospital primary cesarean delivery rates and the risk of poor neonatal outcomes. Am J Obstet Gynecol. 187(3):721-7.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONBailit, J. \u0026 Garrett, J. (2003). Comparison of risk-adjustment methodologies. Am J Obstet Gynecol.102:45-51.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONBailit, J. \u0026 Garrett, J. (2003). Comparison of risk-adjustment methodologies. Am J Obstet Gynecol.102:45-51.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONBailit, J.L., Love, T.E., \u0026 Dawson, N.V. (2006). Quality of obstetric care and risk-adjusted primary cesarean delivery rates. Am J Obstet Gynecol.194:402.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONBailit, J.L., Love, T.E., \u0026 Dawson, N.V. (2006). Quality of obstetric care and risk-adjusted primary cesarean delivery rates. Am J Obstet Gynecol.194:402.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONBailit, J.L. (2007). Measuring the quality of inpatient obstetrical care. Ob Gyn Sur. 62:207-213.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONBailit, J.L. (2007). Measuring the quality of inpatient obstetrical care. Ob Gyn Sur. 62:207-213.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONBerkowitz, G.S., Fiarman, G.S., Mojica, M.A., et al. (1989). Effect of physician characteristics on the cesarean birth rate. Am J Obstet Gynecol. 161:146-9.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONBerkowitz, G.S., Fiarman, G.S., Mojica, M.A., et al. (1989). Effect of physician characteristics on the cesarean birth rate. Am J Obstet Gynecol. 161:146-9.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONCenter for Disease Control (2020) Recent trends in vaginal birth after cesarean delivery: United States, 2016-2018. Retrieved from National Center for Health Statistics: https://www.cdc.gov/nchs/products/databriefs/db359.htm","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONCenter for Disease Control (2020) Recent trends in vaginal birth after cesarean delivery: United States, 2016-2018. Retrieved from National Center for Health Statistics: https://www.cdc.gov/nchs/products/databriefs/db359.htm","media_type":"text/plain"}},{"code":"REF","value":"CITATIONCleary, R., Beard, R.W., Chapple, J., Coles, J., Griffin, M., \u0026 Joffe, M. (1996). The standard primipara as a basis for inter-unit comparisons of maternity care. Br J Obstet Gynecol. 103:223-9.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONCleary, R., Beard, R.W., Chapple, J., Coles, J., Griffin, M., \u0026 Joffe, M. (1996). The standard primipara as a basis for inter-unit comparisons of maternity care. Br J Obstet Gynecol. 103:223-9.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONDiGiuseppe, D.L., Aron, D.C., Payne, S.M., Snow, R.J., Dieker, L., \u0026 Rosenthal, G.E. (2001). Risk adjusting cesarean delivery rates: a comparison of hospital profiles based on medical record and birth certificate data. Health Serv Res.36:959-77.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONDiGiuseppe, D.L., Aron, D.C., Payne, S.M., Snow, R.J., Dieker, L., \u0026 Rosenthal, G.E. (2001). Risk adjusting cesarean delivery rates: a comparison of hospital profiles based on medical record and birth certificate data. Health Serv Res.36:959-77.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONGoyert, G.L., Bottoms, F.S., Treadwell, M.C., et al. (1989). The physician factor in cesarean birth rates. N Engl J Med.320:706-9.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONGoyert, G.L., Bottoms, F.S., Treadwell, M.C., et al. (1989). The physician factor in cesarean birth rates. N Engl J Med.320:706-9.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONKozhimannil, K. B., Law, M. R., \u0026 Virnig, B. A. (2013). Cesarean delivery rates vary tenfold among US hospitals; reducing variation may address quality and cost issues. Health affairs (Project Hope), 32(3), 527535. https://doi.org/10.1377/hlthaff.2012.1030","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONKozhimannil, K. B., Law, M. R., \u0026 Virnig, B. A. (2013). Cesarean delivery rates vary tenfold among US hospitals; reducing variation may address quality and cost issues. Health affairs (Project Hope), 32(3), 527535. https://doi.org/10.1377/hlthaff.2012.1030","media_type":"text/plain"}},{"code":"REF","value":"CITATIONLe Ray, C., Carayol, M., Zeitlin, J., Berat, G., \u0026 Goffinet, F. (2006). Level of perinatal care of the maternity unit and rate of cesarean in low-risk nulliparas. Am J Obstet Gynecol. 107:1269-77.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONLe Ray, C., Carayol, M., Zeitlin, J., Berat, G., \u0026 Goffinet, F. (2006). Level of perinatal care of the maternity unit and rate of cesarean in low-risk nulliparas. Am J Obstet Gynecol. 107:1269-77.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONLuthy, D.A., Malmgren, J.A., Zingheim, R.W., \u0026 Leininger, C.J. (2003). Physician contribution to a cesarean delivery risk model. Am J Obstet Gynecol.188:1579-85.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONLuthy, D.A., Malmgren, J.A., Zingheim, R.W., \u0026 Leininger, C.J. (2003). Physician contribution to a cesarean delivery risk model. Am J Obstet Gynecol.188:1579-85.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONMain E.K., Bloomfield, L., \u0026 Hunt, G. (2004). Development of a large-scale obstetric quality-improvement program that focused on the nulliparous patient at term. Am J Obstet Gynecol.190:1747-58.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONMain E.K., Bloomfield, L., \u0026 Hunt, G. (2004). Development of a large-scale obstetric quality-improvement program that focused on the nulliparous patient at term. Am J Obstet Gynecol.190:1747-58.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONMain, E. K., Chang, S. C., Cape, V., Sakowski, C., Smith, H., \u0026 Vasher, J. (2019). Safety Assessment of a Large-Scale Improvement Collaborative to Reduce Nulliparous Cesarean Delivery Rates. Obstetrics and gynecology, 133(4), 613623. https://doi.org/10.1097/AOG.0000000000003109","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONMain, E. K., Chang, S. C., Cape, V., Sakowski, C., Smith, H., \u0026 Vasher, J. (2019). Safety Assessment of a Large-Scale Improvement Collaborative to Reduce Nulliparous Cesarean Delivery Rates. Obstetrics and gynecology, 133(4), 613623. https://doi.org/10.1097/AOG.0000000000003109","media_type":"text/plain"}},{"code":"REF","value":"CITATIONMain, E.K., Moore, D., Farrell, B., Schimmel, L.D., Altman, R.J., Abrahams, C., et al., (2006). Is there a useful cesarean birth measure? Assessment of the nulliparous term singleton vertex cesarean birth rate as a tool for obstetric quality improvement. Am J Obstet Gynecol. 194:1644-51.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONMain, E.K., Moore, D., Farrell, B., Schimmel, L.D., Altman, R.J., Abrahams, C., et al., (2006). Is there a useful cesarean birth measure? Assessment of the nulliparous term singleton vertex cesarean birth rate as a tool for obstetric quality improvement. Am J Obstet Gynecol. 194:1644-51.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONMain, E. K., Morton, C. H., Melsop, K., Hopkins, D., Giuliani, G., \u0026 Gould, J. B. (2012). Creating a public agenda for maternity safety and quality in cesarean delivery. Obstetrics and gynecology, 120(5), 11941198. https://doi.org/10.1097/aog.0b013e31826fc13d","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONMain, E. K., Morton, C. H., Melsop, K., Hopkins, D., Giuliani, G., \u0026 Gould, J. B. (2012). Creating a public agenda for maternity safety and quality in cesarean delivery. Obstetrics and gynecology, 120(5), 11941198. https://doi.org/10.1097/aog.0b013e31826fc13d","media_type":"text/plain"}},{"code":"REF","value":"CITATIONRomano, P.S., Yasmeen, S., Schembri, M.E., Keyzer, J.M., \u0026 Gilbert, W.M. (2005). Coding of perineal lacerations and other complications of obstetric care in hospital discharge data. Am J Obstet Gynecol.106:717-25.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONRomano, P.S., Yasmeen, S., Schembri, M.E., Keyzer, J.M., \u0026 Gilbert, W.M. (2005). Coding of perineal lacerations and other complications of obstetric care in hospital discharge data. Am J Obstet Gynecol.106:717-25.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONRosenstein, M. G., Chang, S. C., Sakowski, C., Markow, C., Teleki, S., Lang, L., Logan, J., Cape, V., \u0026 Main, E. K. (2021). Hospital Quality Improvement Interventions, Statewide Policy Initiatives, and Rates of Cesarean Delivery for Nulliparous, Term, Singleton, Vertex Births in California. JAMA, 325(16), 16311639. https://doi.org/10.1001/jama.2021.3816","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONRosenstein, M. G., Chang, S. C., Sakowski, C., Markow, C., Teleki, S., Lang, L., Logan, J., Cape, V., \u0026 Main, E. K. (2021). Hospital Quality Improvement Interventions, Statewide Policy Initiatives, and Rates of Cesarean Delivery for Nulliparous, Term, Singleton, Vertex Births in California. JAMA, 325(16), 16311639. https://doi.org/10.1001/jama.2021.3816","media_type":"text/plain"}},{"code":"REF","value":"CITATIONSakala, C., Belanoff, C., \u0026 Declercq, E. R. (2020). Factors Associated with Unplanned Primary Cesarean Birth: Secondary Analysis of the Listening to Mothers in California Survey. BMC pregnancy and childbirth, 20(1), 462. https://doi.org/10.1186/s12884-020-03095-4","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONSakala, C., Belanoff, C., \u0026 Declercq, E. R. (2020). Factors Associated with Unplanned Primary Cesarean Birth: Secondary Analysis of the Listening to Mothers in California Survey. BMC pregnancy and childbirth, 20(1), 462. https://doi.org/10.1186/s12884-020-03095-4","media_type":"text/plain"}},{"code":"REF","value":"CITATIONSymum, H., \u0026 Zayas-Castro, J. L. (2021). A Multistate Decomposition Analysis of Cesarean Rate Variations, Associated Health Outcomes, and Financial Implications in the United States. American journal of perinatology, 10.1055/s-0041-1736538. Advance online publication. https://doi.org/10.1055/s-0041-1736538","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONSymum, H., \u0026 Zayas-Castro, J. L. (2021). A Multistate Decomposition Analysis of Cesarean Rate Variations, Associated Health Outcomes, and Financial Implications in the United States. American journal of perinatology, 10.1055/s-0041-1736538. Advance online publication. https://doi.org/10.1055/s-0041-1736538","media_type":"text/plain"}},{"code":"REF","value":"CITATIONU.S. Department of Health and Human Services. (n.d.). Reduce cesarean births among low-risk women with no prior births-MICH-06. Retrieved from Healthy People 2030: https://health.gov/healthypeople/objectives-and-data/browse-objectives/pregnancy-and-childbirth/reduce-cesarean-births-among-low-risk-women-no-prior-births-mich-06","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONU.S. Department of Health and Human Services. (n.d.). Reduce cesarean births among low-risk women with no prior births-MICH-06. Retrieved from Healthy People 2030: https://health.gov/healthypeople/objectives-and-data/browse-objectives/pregnancy-and-childbirth/reduce-cesarean-births-among-low-risk-women-no-prior-births-mich-06","media_type":"text/plain"}},{"code":"REF","value":"CITATIONYasmeen, S., Romano, P.S., Schembri, M.E., Keyzer, J.M., \u0026 Gilbert, W.M. (2006). Accuracy of obstetric diagnoses and procedures in hospital discharge data. Am J Obstet Gynecol. 194:992-1001.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONYasmeen, S., Romano, P.S., Schembri, M.E., Keyzer, J.M., \u0026 Gilbert, W.M. (2006). Accuracy of obstetric diagnoses and procedures in hospital discharge data. Am J Obstet Gynecol. 194:992-1001.","media_type":"text/plain"}},{"code":"DEF","value":"Parity:  The number of pregnancies reaching 20 weeks gestation regardless of the number of fetuses or outcomes\nGravidity:  The number of pregnancies, current and past, regardless of the pregnancy outcome  \nPreterm Birth: The number of births  \u003e= 20 weeks and \u003c 37 weeks gestation, regardless of outcome \nTerm Birth:  The number of births \u003e= 37 weeks gestation, regardless of outcome","name":"Definition","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DEF","title":"Definition"},"value_obj":{"type":"ED","value":"Parity:  The number of pregnancies reaching 20 weeks gestation regardless of the number of fetuses or outcomes\nGravidity:  The number of pregnancies, current and past, regardless of the pregnancy outcome  \nPreterm Birth: The number of births  \u003e= 20 weeks and \u003c 37 weeks gestation, regardless of outcome \nTerm Birth:  The number of births \u003e= 37 weeks gestation, regardless of outcome","media_type":"text/plain"}},{"code":"GUIDE","value":"Vertex position is modeled implicitly, as the measure excludes deliveries with abnormal presentations.\n\nPatients who do not receive prenatal care and have no documented gestational age or estimated due date are implicitly excluded from the measure, as gestational age is required to meet denominator criteria. \n\nThis measure allows for 2 approaches to determine estimated gestational age (EGA) in the following order of precedence:\n\n1.  The EGA is calculated using the American College of Obstetricians and Gynecologists ReVITALize guidelines.*\n2.  The EGA is obtained from a discrete field in the electronic health record.  This option is only used when the calculated EGA is not available.\n\nWherever gestational age is mentioned, relative to the delivery, the intent is to capture the last estimated gestational age prior to or at the time of delivery.  \n \n*ACOG ReVITALize Guidelines for Calculating Gestational Age:      \n     \n                                Gestational Age = (280-(EDD minus Reference Date))/7\n\n--Estimated Due Date (EDD):  The best obstetrical Estimated Due Date is determined by last menstrual period if confirmed by early ultrasound or no ultrasound performed, or early ultrasound if no known lastmenstrual period or the ultrasound is not consistent with last menstrual period, or known date of fertilization (eg, assisted reproductive technology) \n--Reference Date is the date on which you are trying to determine gestational age. For purposes of this eCQM, Reference Date would be the Date of Delivery.   \n\nNote however the calculation may yield a non-whole number and gestational age should be rounded off to the nearest completed week. For example, an infant born on the 5th day of the 36th week (35 weeks and 5/7 days) is at a gestational age of 35 weeks, not 36 weeks.\n\nThe timing relationship of relevantDatetime 42 weeks or less before TimeOfDelivery is applied to the data elements of parity, gravida, preterm/term live births for which prenatal records may include relevant information. \n\nThe denominator includes logic to determine if the patient is nulliparous. The patient is considered nulliparous when one of the following is true: \n\n     Parity equals zero\n     Gravida equals one\n     Preterm and Term births both equal zero \n\nParity, preterm and term live births may be updated by the electronic health record software or by clinicians during a delivery encounter. To capture the pre-delivery value, organizations may need to create a rule or calculation to capture the number prior to the delivery start time.\n\nThis eCQM is an episode-based measure.  An episode is defined as each inpatient hospitalization or encounter that ends during the measurement period.\n\nThis version of the eCQM uses QDM version 5.6. Please refer to the eCQI resource center (https://ecqi.healthit.gov/qdm) for more information on the QDM","name":"Guidance","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"GUIDE","title":"Guidance"},"value_obj":{"type":"ED","value":"Vertex position is modeled implicitly, as the measure excludes deliveries with abnormal presentations.\n\nPatients who do not receive prenatal care and have no documented gestational age or estimated due date are implicitly excluded from the measure, as gestational age is required to meet denominator criteria. \n\nThis measure allows for 2 approaches to determine estimated gestational age (EGA) in the following order of precedence:\n\n1.  The EGA is calculated using the American College of Obstetricians and Gynecologists ReVITALize guidelines.*\n2.  The EGA is obtained from a discrete field in the electronic health record.  This option is only used when the calculated EGA is not available.\n\nWherever gestational age is mentioned, relative to the delivery, the intent is to capture the last estimated gestational age prior to or at the time of delivery.  \n \n*ACOG ReVITALize Guidelines for Calculating Gestational Age:      \n     \n                                Gestational Age = (280-(EDD minus Reference Date))/7\n\n--Estimated Due Date (EDD):  The best obstetrical Estimated Due Date is determined by last menstrual period if confirmed by early ultrasound or no ultrasound performed, or early ultrasound if no known lastmenstrual period or the ultrasound is not consistent with last menstrual period, or known date of fertilization (eg, assisted reproductive technology) \n--Reference Date is the date on which you are trying to determine gestational age. For purposes of this eCQM, Reference Date would be the Date of Delivery.   \n\nNote however the calculation may yield a non-whole number and gestational age should be rounded off to the nearest completed week. For example, an infant born on the 5th day of the 36th week (35 weeks and 5/7 days) is at a gestational age of 35 weeks, not 36 weeks.\n\nThe timing relationship of relevantDatetime 42 weeks or less before TimeOfDelivery is applied to the data elements of parity, gravida, preterm/term live births for which prenatal records may include relevant information. \n\nThe denominator includes logic to determine if the patient is nulliparous. The patient is considered nulliparous when one of the following is true: \n\n     Parity equals zero\n     Gravida equals one\n     Preterm and Term births both equal zero \n\nParity, preterm and term live births may be updated by the electronic health record software or by clinicians during a delivery encounter. To capture the pre-delivery value, organizations may need to create a rule or calculation to capture the number prior to the delivery start time.\n\nThis eCQM is an episode-based measure.  An episode is defined as each inpatient hospitalization or encounter that ends during the measurement period.\n\nThis version of the eCQM uses QDM version 5.6. Please refer to the eCQI resource center (https://ecqi.healthit.gov/qdm) for more information on the QDM","media_type":"text/plain"}},{"code":"TRANF","value":"None","name":"Transmission Format","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"TRANF","title":"Transmission Format"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"IPOP","value":"Inpatient hospitalizations for patients age \u003e= 8 years and \u003c 65 admitted to the hospital for inpatient acute care who undergo a delivery procedure that ends during the measurement period","name":"Initial Population","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"IPOP","title":"Initial Population"},"value_obj":{"type":"ED","value":"Inpatient hospitalizations for patients age \u003e= 8 years and \u003c 65 admitted to the hospital for inpatient acute care who undergo a delivery procedure that ends during the measurement period","media_type":"text/plain"}},{"code":"DENOM","value":"Inpatient hospitalizations for nulliparous patients delivered of a live term singleton newborn \u003e= 37 weeks' gestation\n\nNote:  The eCQM and chart-based measure slightly digress in the denominator logic.  \n\neCQM:\nThe measure description states \"Nulliparous women with a term, singleton baby in a vertex position delivered by cesarean birth\".  ACOG defines nulliparous as a woman with a parity of zero.  The eCQM logic concludes that a patient is nulliparous when ONE of the following is true:\n\n1.      Parity equals zero\n2.      Gravidity equals one\n3.      Preterm and Term births both equal zero. \n\nSee Definition Section for more details.\n\nChart Based:\nThe chart based measure evaluates the data element \"Previous Live Births\".  If the answer is \"yes\" the patient will be excluded from the denominator.  If a patient had a previous stillbirth or fetal demise, the abstractor is instructed to answer \"no\" and the patient will remain in the denominator.","name":"Denominator","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DENOM","title":"Denominator"},"value_obj":{"type":"ED","value":"Inpatient hospitalizations for nulliparous patients delivered of a live term singleton newborn \u003e= 37 weeks' gestation\n\nNote:  The eCQM and chart-based measure slightly digress in the denominator logic.  \n\neCQM:\nThe measure description states \"Nulliparous women with a term, singleton baby in a vertex position delivered by cesarean birth\".  ACOG defines nulliparous as a woman with a parity of zero.  The eCQM logic concludes that a patient is nulliparous when ONE of the following is true:\n\n1.      Parity equals zero\n2.      Gravidity equals one\n3.      Preterm and Term births both equal zero. \n\nSee Definition Section for more details.\n\nChart Based:\nThe chart based measure evaluates the data element \"Previous Live Births\".  If the answer is \"yes\" the patient will be excluded from the denominator.  If a patient had a previous stillbirth or fetal demise, the abstractor is instructed to answer \"no\" and the patient will remain in the denominator.","media_type":"text/plain"}},{"code":"DENEX","value":"Inpatient hospitalizations for patients with abnormal presentation or placenta previa during the encounter.  \n\nNote that the chart-based measure excludes single stillbirth and patients with multiple gestations from the denominator.  These concepts are mutually exclusive of the denominator requirement of live singleton newborn and therefore the logic does not address single stillbirth nor multiple gestation.","name":"Denominator Exclusions","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DENEX","title":"Denominator Exclusions"},"value_obj":{"type":"ED","value":"Inpatient hospitalizations for patients with abnormal presentation or placenta previa during the encounter.  \n\nNote that the chart-based measure excludes single stillbirth and patients with multiple gestations from the denominator.  These concepts are mutually exclusive of the denominator requirement of live singleton newborn and therefore the logic does not address single stillbirth nor multiple gestation.","media_type":"text/plain"}},{"code":"NUMER","value":"Inpatient hospitalizations for patients who deliver by cesarean section.","name":"Numerator","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"NUMER","title":"Numerator"},"value_obj":{"type":"ED","value":"Inpatient hospitalizations for patients who deliver by cesarean section.","media_type":"text/plain"}},{"code":"NUMEX","value":"None","name":"Numerator Exclusions","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"NUMEX","title":"Numerator Exclusions"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"DENEXCEP","value":"None","name":"Denominator Exceptions","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DENEXCEP","title":"Denominator Exceptions"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"SDE","value":"For every patient evaluated by this measure also identify payer, race, ethnicity, sex and calculated gestational age.","name":"Supplemental Data Elements","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"SDE","title":"Supplemental Data Elements"},"value_obj":{"type":"ED","value":"For every patient evaluated by this measure also identify payer, race, ethnicity, sex and calculated gestational age.","media_type":"text/plain"}}],"measure_period":{"type":"IVL_TS","low":{"type":"TS","value":"201201010000","inclusive?":true,"derived?":false},"high":{"type":"TS","value":"201212312359","inclusive?":true,"derived?":false},"width":{"type":"PQ","unit":"a","value":"1","inclusive?":true,"derived?":false}},"measure_scoring":"PROPORTION","population_criteria":{"IPP":{"conjunction?":true,"type":"IPP","hqmf_id":"E6B3041D-400C-4CBF-B4BA-DB101AEC8828","preconditions":[{"id":2,"preconditions":[{"id":1,"reference":"CesareanBirth__Initial_Population__08C6D74C_8508_4750_9574_3CF9274870D9"}],"conjunction_code":"allTrue"}]},"DENOM":{"conjunction?":true,"type":"DENOM","hqmf_id":"4FBB4BFE-D6B5-47F3-9AAF-7F60E863154E","preconditions":[{"id":4,"preconditions":[{"id":3,"reference":"CesareanBirth__Denominator__08C6D74C_8508_4750_9574_3CF9274870D9"}],"conjunction_code":"allTrue"}]},"NUMER":{"conjunction?":true,"type":"NUMER","hqmf_id":"28DF3F13-B2EE-4282-83C0-2AC52AAFA0D4","preconditions":[{"id":6,"preconditions":[{"id":5,"reference":"CesareanBirth__Numerator__08C6D74C_8508_4750_9574_3CF9274870D9"}],"conjunction_code":"allTrue"}]},"DENEX":{"conjunction?":true,"type":"DENEX","hqmf_id":"26231D26-D836-4F17-B559-5980F8E4E9C8","preconditions":[{"id":8,"preconditions":[{"id":7,"reference":"CesareanBirth__Denominator_Exclusions__08C6D74C_8508_4750_9574_3CF9274870D9"}],"conjunction_code":"atLeastOneTrue"}]}},"population_sets":[{"_id":"689267bae8da6d1c0d510622","population_set_id":"PopulationSet_1","populations":{"DENEX":{"_id":"689267bae8da6d1c0d510623","hqmf_id":"26231D26-D836-4F17-B559-5980F8E4E9C8","library_name":"CesareanBirth","statement_name":"Denominator Exclusions"},"DENOM":{"_id":"689267bae8da6d1c0d510624","hqmf_id":"4FBB4BFE-D6B5-47F3-9AAF-7F60E863154E","library_name":"CesareanBirth","statement_name":"Denominator"},"IPP":{"_id":"689267bae8da6d1c0d510625","hqmf_id":"E6B3041D-400C-4CBF-B4BA-DB101AEC8828","library_name":"CesareanBirth","statement_name":"Initial Population"},"NUMER":{"_id":"689267bae8da6d1c0d510626","hqmf_id":"28DF3F13-B2EE-4282-83C0-2AC52AAFA0D4","library_name":"CesareanBirth","statement_name":"Numerator"},"_id":"689267bae8da6d1c0d510627","_type":"CQM::ProportionPopulationMap"},"supplemental_data_elements":[{"_id":"689267b3e8da6d1c0d5102e1","hqmf_id":"BE7B14D3-00B0-43E2-A1CE-39D91FA558FE","library_name":"CesareanBirth","statement_name":"SDE Ethnicity"},{"_id":"689267b3e8da6d1c0d5102e2","hqmf_id":"61CA952D-F5AD-452F-9F94-9847830AD20A","library_name":"CesareanBirth","statement_name":"SDE Payer"},{"_id":"689267b3e8da6d1c0d5102e3","hqmf_id":"72D714DD-D519-42DD-ACB5-7993D3AB8B0A","library_name":"CesareanBirth","statement_name":"SDE Race"},{"_id":"689267b3e8da6d1c0d5102e4","hqmf_id":"89AC71F3-D5FB-4690-86DD-55F13D0539B7","library_name":"CesareanBirth","statement_name":"SDE Sex"},{"_id":"689267b3e8da6d1c0d5102e5","hqmf_id":"014D3B8C-4D4E-4F5F-8BF6-6E492D509A72","library_name":"CesareanBirth","statement_name":"Variable Calculated Gestational Age"}],"title":"Population Criteria Section"}],"source_data_criteria":[{"_id":"689267bae8da6d1c0d510628","_type":"QDM::PatientCharacteristicPayer","codeListId":"2.16.840.1.114222.4.11.3591","dataElementCodes":[],"description":"Patient Characteristic Payer: Payer","hqmfOid":"2.16.840.1.113883.10.20.28.4.58","id":"689267bae8da6d1c0d510628","qdmCategory":"patient_characteristic","qdmStatus":"payer","qdmTitle":"Patient Characteristic Payer","qdmVersion":"5.6","relevantPeriod":null},{"_id":"689267bae8da6d1c0d510629","_type":"QDM::PatientCharacteristicSex","codeListId":"2.16.840.1.113762.1.4.1","dataElementCodes":[],"description":"Patient Characteristic Sex: ONCAdministrativeSex","hqmfOid":"2.16.840.1.113883.10.20.28.4.55","id":"689267bae8da6d1c0d510629","qdmCategory":"patient_characteristic","qdmStatus":"gender","qdmTitle":"Patient Characteristic Sex","qdmVersion":"5.6"},{"_id":"689267bae8da6d1c0d51062a","_type":"QDM::PatientCharacteristicEthnicity","codeListId":"2.16.840.1.114222.4.11.837","dataElementCodes":[],"description":"Patient Characteristic Ethnicity: Ethnicity","hqmfOid":"2.16.840.1.113883.10.20.28.4.56","id":"689267bae8da6d1c0d51062a","qdmCategory":"patient_characteristic","qdmStatus":"ethnicity","qdmTitle":"Patient Characteristic Ethnicity","qdmVersion":"5.6"},{"_id":"689267b3e8da6d1c0d510335","_type":"QDM::ProcedurePerformed","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"2.16.840.1.113762.1.4.1045.59","components":null,"dataElementCodes":[],"description":"Procedure, Performed: DeliveryProcedures","hqmfOid":"2.16.840.1.113883.10.20.28.4.67","id":"689267b3e8da6d1c0d510335","incisionDatetime":null,"method":null,"negationRationale":null,"qdmCategory":"procedure","qdmStatus":"performed","qdmTitle":"Procedure, Performed","qdmVersion":"5.6","rank":null,"reason":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null,"status":null},{"_id":"689267bae8da6d1c0d51062b","_type":"QDM::PatientCharacteristicRace","codeListId":"2.16.840.1.114222.4.11.836","dataElementCodes":[],"description":"Patient Characteristic Race: Race","hqmfOid":"2.16.840.1.113883.10.20.28.4.59","id":"689267bae8da6d1c0d51062b","qdmCategory":"patient_characteristic","qdmStatus":"race","qdmTitle":"Patient Characteristic Race","qdmVersion":"5.6"},{"_id":"689267b3e8da6d1c0d510337","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113762.1.4.1111.143","dataElementCodes":[],"description":"Encounter, Performed: ObservationServices","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"689267b3e8da6d1c0d510337","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"689267b3e8da6d1c0d510336","_type":"QDM::ProcedurePerformed","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"2.16.840.1.113883.3.117.1.7.1.282","components":null,"dataElementCodes":[],"description":"Procedure, Performed: CesareanBirth","hqmfOid":"2.16.840.1.113883.10.20.28.4.67","id":"689267b3e8da6d1c0d510336","incisionDatetime":null,"method":null,"negationRationale":null,"qdmCategory":"procedure","qdmStatus":"performed","qdmTitle":"Procedure, Performed","qdmVersion":"5.6","rank":null,"reason":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null,"status":null},{"_id":"689267b3e8da6d1c0d510338","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113762.1.4.1029.369","dataElementCodes":[],"description":"Encounter, Performed: EDVisitandOBTriage","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"689267b3e8da6d1c0d510338","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"689267b3e8da6d1c0d51033a","_type":"QDM::AssessmentPerformed","authorDatetime":null,"codeListId":"2.16.840.1.113762.1.4.1045.26","components":null,"dataElementCodes":[],"description":"Assessment, Performed: EstimatedGestationalAgeatDelivery","hqmfOid":"2.16.840.1.113883.10.20.28.4.117","id":"689267b3e8da6d1c0d51033a","interpretation":null,"method":null,"negationRationale":null,"qdmCategory":"assessment","qdmStatus":"performed","qdmTitle":"Assessment, Performed","qdmVersion":"5.6","reason":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null},{"_id":"689267b3e8da6d1c0d510339","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.666.5.307","dataElementCodes":[],"description":"Encounter, Performed: EncounterInpatient","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"689267b3e8da6d1c0d510339","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"689267b3e8da6d1c0d51033b","_type":"QDM::AssessmentPerformed","authorDatetime":null,"codeListId":"2.16.840.1.113762.1.4.1045.105","components":null,"dataElementCodes":[],"description":"Assessment, Performed: AbnormalPresentation","hqmfOid":"2.16.840.1.113883.10.20.28.4.117","id":"689267b3e8da6d1c0d51033b","interpretation":null,"method":null,"negationRationale":null,"qdmCategory":"assessment","qdmStatus":"performed","qdmTitle":"Assessment, Performed","qdmVersion":"5.6","reason":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null},{"_id":"689267b3e8da6d1c0d51033c","_type":"QDM::AssessmentPerformed","authorDatetime":null,"codeListId":"drc-8df2bc282d295fbf16354ed7166c5d223040c70dc4662c5b41261f2ea62a907c","components":null,"dataElementCodes":[],"description":"Assessment, Performed: Date and time of obstetric delivery","hqmfOid":"2.16.840.1.113883.10.20.28.4.117","id":"689267b3e8da6d1c0d51033c","interpretation":null,"method":null,"negationRationale":null,"qdmCategory":"assessment","qdmStatus":"performed","qdmTitle":"Assessment, Performed","qdmVersion":"5.6","reason":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null},{"_id":"689267b3e8da6d1c0d51033d","_type":"QDM::AssessmentPerformed","authorDatetime":null,"codeListId":"drc-1df797108d11f91daf4f63c7425b43dadc661ce941ef3ae3660309bb5f20c9fe","components":null,"dataElementCodes":[],"description":"Assessment, Performed: [#] Births.term","hqmfOid":"2.16.840.1.113883.10.20.28.4.117","id":"689267b3e8da6d1c0d51033d","interpretation":null,"method":null,"negationRationale":null,"qdmCategory":"assessment","qdmStatus":"performed","qdmTitle":"Assessment, Performed","qdmVersion":"5.6","reason":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null},{"_id":"689267b3e8da6d1c0d51033e","_type":"QDM::AssessmentPerformed","authorDatetime":null,"codeListId":"drc-da42ff6ab07eb61cb1fbef112c248c914dac65ea6e9e63af77b47c506a9683b4","components":null,"dataElementCodes":[],"description":"Assessment, Performed: [#] Parity","hqmfOid":"2.16.840.1.113883.10.20.28.4.117","id":"689267b3e8da6d1c0d51033e","interpretation":null,"method":null,"negationRationale":null,"qdmCategory":"assessment","qdmStatus":"performed","qdmTitle":"Assessment, Performed","qdmVersion":"5.6","reason":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null},{"_id":"689267b3e8da6d1c0d51033f","_type":"QDM::AssessmentPerformed","authorDatetime":null,"codeListId":"drc-5d675ef561723071efd724aaf1b2a31d80f41201306dec8d64e6114b8c3f7e06","components":null,"dataElementCodes":[],"description":"Assessment, Performed: Delivery date Estimated","hqmfOid":"2.16.840.1.113883.10.20.28.4.117","id":"689267b3e8da6d1c0d51033f","interpretation":null,"method":null,"negationRationale":null,"qdmCategory":"assessment","qdmStatus":"performed","qdmTitle":"Assessment, Performed","qdmVersion":"5.6","reason":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null},{"_id":"689267b3e8da6d1c0d510340","_type":"QDM::AssessmentPerformed","authorDatetime":null,"codeListId":"drc-330789823cbca1c3c129091cf96c9035e23e878ddc26195cb1148c67a7d5f75c","components":null,"dataElementCodes":[],"description":"Assessment, Performed: [#] Pregnancies","hqmfOid":"2.16.840.1.113883.10.20.28.4.117","id":"689267b3e8da6d1c0d510340","interpretation":null,"method":null,"negationRationale":null,"qdmCategory":"assessment","qdmStatus":"performed","qdmTitle":"Assessment, Performed","qdmVersion":"5.6","reason":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null},{"_id":"689267b3e8da6d1c0d510341","_type":"QDM::AssessmentPerformed","authorDatetime":null,"codeListId":"drc-f32065ce97f4266f39e2f6d9b63bb6a59ff5d1277a6bb48aaca6506b4e7aa302","components":null,"dataElementCodes":[],"description":"Assessment, Performed: [#] Births.preterm","hqmfOid":"2.16.840.1.113883.10.20.28.4.117","id":"689267b3e8da6d1c0d510341","interpretation":null,"method":null,"negationRationale":null,"qdmCategory":"assessment","qdmStatus":"performed","qdmTitle":"Assessment, Performed","qdmVersion":"5.6","reason":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null}],"title":"Cesarean Birth","updated_at":null,"value_set_ids":["689267b3e8da6d1c0d510342","689267b3e8da6d1c0d510343","689267b3e8da6d1c0d510344","689267b3e8da6d1c0d510345","689267b3e8da6d1c0d510346","689267b3e8da6d1c0d510347","689267bae8da6d1c0d5105ed","689267bae8da6d1c0d5105ee","689267bae8da6d1c0d5105ef","689267bae8da6d1c0d5105f0","689267bae8da6d1c0d5105f1","689267bae8da6d1c0d5105f2","689267bae8da6d1c0d5105f3","689267bae8da6d1c0d5105f4","689267bae8da6d1c0d5105f5","689267bae8da6d1c0d5105f6","689267bae8da6d1c0d5105f7","689267bae8da6d1c0d5105f8","689267bae8da6d1c0d5105f9","689267bae8da6d1c0d5105fa","689267bae8da6d1c0d5105fb","689267bae8da6d1c0d5105fc","689267bae8da6d1c0d5105fd","689267bae8da6d1c0d5105fe","689267bae8da6d1c0d5105ff","689267bae8da6d1c0d510600","689267bae8da6d1c0d510601","689267bae8da6d1c0d510602","689267bae8da6d1c0d510603","689267bae8da6d1c0d510604","689267bae8da6d1c0d510605"]}