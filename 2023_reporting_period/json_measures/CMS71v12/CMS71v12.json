{"_id":"689268dfe8da6d1c0d51781f","calculate_sdes":null,"calculation_method":"PATIENT","cms_id":"CMS71v12","component":false,"component_hqmf_set_ids":[],"composite":false,"composite_hqmf_set_id":null,"cql_libraries":[{"_id":"689268d7e8da6d1c0d517604","cql":"library AnticoagulationTherapyforAtrialFibrillationFlutter version '12.0.000'\r\n\r\nusing QDM version '5.6'\r\n\r\ninclude MATGlobalCommonFunctions version '7.0.000' called Global\r\ninclude TJCOverall version '6.0.000' called TJC\r\n\r\nvalueset \"Anticoagulant Therapy\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.200'\r\nvalueset \"Atrial Ablation\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.203'\r\nvalueset \"Atrial Fibrillation/Flutter\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.202'\r\nvalueset \"Discharge To Acute Care Facility\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.87'\r\nvalueset \"Discharged to Health Care Facility for Hospice Care\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.207'\r\nvalueset \"Discharged to Home for Hospice Care\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.209'\r\nvalueset \"Ethnicity\": 'urn:oid:2.16.840.1.114222.4.11.837'\r\nvalueset \"Left Against Medical Advice\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.308'\r\nvalueset \"Medical Reason\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.473'\r\nvalueset \"ONC Administrative Sex\": 'urn:oid:2.16.840.1.113762.1.4.1'\r\nvalueset \"Patient Expired\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.309'\r\nvalueset \"Patient Refusal\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.93'\r\nvalueset \"Payer\": 'urn:oid:2.16.840.1.114222.4.11.3591'\r\nvalueset \"Race\": 'urn:oid:2.16.840.1.114222.4.11.836'\r\n\r\ncontext Patient\r\n\r\ndefine \"SDE Ethnicity\":\r\n  [\"Patient Characteristic Ethnicity\": \"Ethnicity\"]\r\n\r\ndefine \"SDE Payer\":\r\n  [\"Patient Characteristic Payer\": \"Payer\"]\r\n\r\ndefine \"SDE Race\":\r\n  [\"Patient Characteristic Race\": \"Race\"]\r\n\r\ndefine \"SDE Sex\":\r\n  [\"Patient Characteristic Sex\": \"ONC Administrative Sex\"]\r\n\r\ndefine \"Reason for Not Giving Anticoagulant at Discharge\":\r\n  [\"Medication, Not Discharged\": \"Anticoagulant Therapy\"] NoAnticoagulant\r\n    where NoAnticoagulant.negationRationale in \"Medical Reason\"\r\n      or NoAnticoagulant.negationRationale in \"Patient Refusal\"\r\n\r\ndefine \"Anticoagulant Therapy at Discharge\":\r\n  [\"Medication, Discharge\": \"Anticoagulant Therapy\"]\r\n\r\ndefine \"Initial Population\":\r\n  TJC.\"Encounter with Principal Diagnosis and Age\"\r\n\r\ndefine \"Numerator\":\r\n  \"Denominator\" Encounter\r\n    with \"Anticoagulant Therapy at Discharge\" DischargeAnticoagulant\r\n      such that DischargeAnticoagulant.authorDatetime during Encounter.relevantPeriod\r\n\r\ndefine \"Denominator Exceptions\":\r\n  \"Denominator\" Encounter\r\n    with \"Reason for Not Giving Anticoagulant at Discharge\" NoDischargeAnticoagulant\r\n      such that NoDischargeAnticoagulant.authorDatetime during Encounter.relevantPeriod\r\n\r\ndefine \"Encounter with a History of Atrial Fibrillation or Flutter\":\r\n  TJC.\"Ischemic Stroke Encounter\" IschemicStrokeEncounter\r\n    with [\"Diagnosis\": \"Atrial Fibrillation/Flutter\"] AtrialFibrillationFlutter\r\n      such that AtrialFibrillationFlutter.prevalencePeriod starts on or before \r\n      end of IschemicStrokeEncounter.relevantPeriod\r\n\r\ndefine \"Encounter with Current Diagnosis Code of Atrial Fibrillation or Flutter\":\r\n  TJC.\"Ischemic Stroke Encounter\" IschemicStrokeEncounter\r\n    where exists ( IschemicStrokeEncounter.diagnoses Diagnosis\r\n        where ( Diagnosis.code in \"Atrial Fibrillation/Flutter\" )\r\n    )\r\n\r\ndefine \"Denominator\":\r\n  \"Encounter with Atrial Ablation Procedure\"\r\n    union \"Encounter with a History of Atrial Fibrillation or Flutter\"\r\n    union \"Encounter with Current Diagnosis Code of Atrial Fibrillation or Flutter\"\r\n\r\ndefine \"Denominator Exclusions\":\r\n  ( \"Denominator\" Encounter\r\n      where Encounter.dischargeDisposition in \"Discharge To Acute Care Facility\"\r\n        or Encounter.dischargeDisposition in \"Left Against Medical Advice\"\r\n        or Encounter.dischargeDisposition in \"Patient Expired\"\r\n        or Encounter.dischargeDisposition in \"Discharged to Home for Hospice Care\"\r\n        or Encounter.dischargeDisposition in \"Discharged to Health Care Facility for Hospice Care\"\r\n  )\r\n    union \"Encounter with Comfort Measures during Hospitalization for Patients with Documented Atrial Fibrillation or Flutter\"\r\n\r\ndefine \"Encounter with Atrial Ablation Procedure\":\r\n  TJC.\"Ischemic Stroke Encounter\" IschemicStrokeEncounter\r\n    with [\"Procedure, Performed\": \"Atrial Ablation\"] AtrialAblation\r\n      such that Global.\"NormalizeInterval\" ( AtrialAblation.relevantDatetime, AtrialAblation.relevantPeriod ) starts before start of IschemicStrokeEncounter.relevantPeriod\r\n\r\ndefine \"Encounter with Comfort Measures during Hospitalization for Patients with Documented Atrial Fibrillation or Flutter\":\r\n  \"Denominator\" Encounter\r\n    with TJC.\"Intervention Comfort Measures\" ComfortMeasure\r\n      such that Coalesce(start of Global.\"NormalizeInterval\"(ComfortMeasure.relevantDatetime, ComfortMeasure.relevantPeriod), ComfortMeasure.authorDatetime)during Global.\"HospitalizationWithObservation\" ( Encounter )","elm":{"library":{"annotation":[{"translatorOptions":"EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion,DisableMethodInvocation","type":"CqlToElmInfo"},{"type":"Annotation","s":{"r":"163","s":[{"value":["","library AnticoagulationTherapyforAtrialFibrillationFlutter version '12.0.000'"]}]}}],"identifier":{"id":"AnticoagulationTherapyforAtrialFibrillationFlutter","version":"12.0.000"},"schemaIdentifier":{"id":"urn:hl7-org:elm","version":"r1"},"usings":{"def":[{"localIdentifier":"System","uri":"urn:hl7-org:elm-types:r1"},{"localId":"1","locator":"3:1-3:23","localIdentifier":"QDM","uri":"urn:healthit-gov:qdm:v5_6","version":"5.6","annotation":[{"type":"Annotation","s":{"r":"1","s":[{"value":["","using "]},{"s":[{"value":["QDM"]}]},{"value":[" version ","'5.6'"]}]}}]}]},"includes":{"def":[{"localId":"2","locator":"5:1-5:64","localIdentifier":"Global","path":"MATGlobalCommonFunctions","version":"7.0.000","annotation":[{"type":"Annotation","s":{"r":"2","s":[{"value":["","include "]},{"s":[{"value":["MATGlobalCommonFunctions"]}]},{"value":[" version ","'7.0.000'"," called ","Global"]}]}}]},{"localId":"3","locator":"6:1-6:47","localIdentifier":"TJC","path":"TJCOverall","version":"6.0.000","annotation":[{"type":"Annotation","s":{"r":"3","s":[{"value":["","include "]},{"s":[{"value":["TJCOverall"]}]},{"value":[" version ","'6.0.000'"," called ","TJC"]}]}}]}]},"valueSets":{"def":[{"localId":"4","locator":"8:1-8:77","name":"Anticoagulant Therapy","id":"2.16.840.1.113883.3.117.1.7.1.200","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"4","s":[{"value":["","valueset ","\"Anticoagulant Therapy\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.200'"]}]}}]},{"localId":"5","locator":"9:1-9:71","name":"Atrial Ablation","id":"2.16.840.1.113883.3.117.1.7.1.203","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"5","s":[{"value":["","valueset ","\"Atrial Ablation\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.203'"]}]}}]},{"localId":"6","locator":"10:1-10:83","name":"Atrial Fibrillation/Flutter","id":"2.16.840.1.113883.3.117.1.7.1.202","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"6","s":[{"value":["","valueset ","\"Atrial Fibrillation/Flutter\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.202'"]}]}}]},{"localId":"7","locator":"11:1-11:87","name":"Discharge To Acute Care Facility","id":"2.16.840.1.113883.3.117.1.7.1.87","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"7","s":[{"value":["","valueset ","\"Discharge To Acute Care Facility\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.87'"]}]}}]},{"localId":"8","locator":"12:1-12:107","name":"Discharged to Health Care Facility for Hospice Care","id":"2.16.840.1.113883.3.117.1.7.1.207","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"8","s":[{"value":["","valueset ","\"Discharged to Health Care Facility for Hospice Care\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.207'"]}]}}]},{"localId":"9","locator":"13:1-13:91","name":"Discharged to Home for Hospice Care","id":"2.16.840.1.113883.3.117.1.7.1.209","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"9","s":[{"value":["","valueset ","\"Discharged to Home for Hospice Care\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.209'"]}]}}]},{"localId":"10","locator":"14:1-14:58","name":"Ethnicity","id":"2.16.840.1.114222.4.11.837","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"10","s":[{"value":["","valueset ","\"Ethnicity\"",": ","'urn:oid:2.16.840.1.114222.4.11.837'"]}]}}]},{"localId":"11","locator":"15:1-15:83","name":"Left Against Medical Advice","id":"2.16.840.1.113883.3.117.1.7.1.308","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"11","s":[{"value":["","valueset ","\"Left Against Medical Advice\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.308'"]}]}}]},{"localId":"12","locator":"16:1-16:70","name":"Medical Reason","id":"2.16.840.1.113883.3.117.1.7.1.473","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"12","s":[{"value":["","valueset ","\"Medical Reason\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.473'"]}]}}]},{"localId":"13","locator":"17:1-17:68","name":"ONC Administrative Sex","id":"2.16.840.1.113762.1.4.1","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"13","s":[{"value":["","valueset ","\"ONC Administrative Sex\"",": ","'urn:oid:2.16.840.1.113762.1.4.1'"]}]}}]},{"localId":"14","locator":"18:1-18:71","name":"Patient Expired","id":"2.16.840.1.113883.3.117.1.7.1.309","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"14","s":[{"value":["","valueset ","\"Patient Expired\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.309'"]}]}}]},{"localId":"15","locator":"19:1-19:70","name":"Patient Refusal","id":"2.16.840.1.113883.3.117.1.7.1.93","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"15","s":[{"value":["","valueset ","\"Patient Refusal\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.93'"]}]}}]},{"localId":"16","locator":"20:1-20:55","name":"Payer","id":"2.16.840.1.114222.4.11.3591","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"16","s":[{"value":["","valueset ","\"Payer\"",": ","'urn:oid:2.16.840.1.114222.4.11.3591'"]}]}}]},{"localId":"17","locator":"21:1-21:53","name":"Race","id":"2.16.840.1.114222.4.11.836","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"17","s":[{"value":["","valueset ","\"Race\"",": ","'urn:oid:2.16.840.1.114222.4.11.836'"]}]}}]}]},"contexts":{"def":[{"locator":"23:1-23:15","name":"Patient"}]},"statements":{"def":[{"locator":"23:1-23:15","name":"Patient","context":"Patient","expression":{"type":"SingletonFrom","operand":{"locator":"23:1-23:15","dataType":"{urn:healthit-gov:qdm:v5_6}Patient","templateId":"Patient","type":"Retrieve"}}},{"localId":"19","locator":"25:1-26:51","name":"SDE Ethnicity","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"19","s":[{"value":["","define ","\"SDE Ethnicity\"",":\n  "]},{"r":"18","s":[{"value":["[","\"Patient Characteristic Ethnicity\"",": "]},{"s":[{"value":["\"Ethnicity\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"18","locator":"26:3-26:51","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicEthnicity","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"26:40-26:50","name":"Ethnicity","type":"ValueSetRef"}}},{"localId":"21","locator":"28:1-29:43","name":"SDE Payer","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"21","s":[{"value":["","define ","\"SDE Payer\"",":\n  "]},{"r":"20","s":[{"value":["[","\"Patient Characteristic Payer\"",": "]},{"s":[{"value":["\"Payer\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"20","locator":"29:3-29:43","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicPayer","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"29:36-29:42","name":"Payer","type":"ValueSetRef"}}},{"localId":"23","locator":"31:1-32:41","name":"SDE Race","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"23","s":[{"value":["","define ","\"SDE Race\"",":\n  "]},{"r":"22","s":[{"value":["[","\"Patient Characteristic Race\"",": "]},{"s":[{"value":["\"Race\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"22","locator":"32:3-32:41","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicRace","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"32:35-32:40","name":"Race","type":"ValueSetRef"}}},{"localId":"25","locator":"34:1-35:58","name":"SDE Sex","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"25","s":[{"value":["","define ","\"SDE Sex\"",":\n  "]},{"r":"24","s":[{"value":["[","\"Patient Characteristic Sex\"",": "]},{"s":[{"value":["\"ONC Administrative Sex\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"24","locator":"35:3-35:58","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicSex","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"35:34-35:57","name":"ONC Administrative Sex","type":"ValueSetRef"}}},{"localId":"38","locator":"37:1-40:63","name":"Reason for Not Giving Anticoagulant at Discharge","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"38","s":[{"value":["","define ","\"Reason for Not Giving Anticoagulant at Discharge\"",":\n  "]},{"r":"37","s":[{"s":[{"r":"27","s":[{"r":"26","s":[{"r":"26","s":[{"value":["[","\"Medication, Not Discharged\"",": "]},{"s":[{"value":["\"Anticoagulant Therapy\""]}]},{"value":["]"]}]}]},{"value":[" ","NoAnticoagulant"]}]}]},{"value":["\n    "]},{"r":"36","s":[{"value":["where "]},{"r":"36","s":[{"r":"31","s":[{"r":"29","s":[{"r":"28","s":[{"value":["NoAnticoagulant"]}]},{"value":["."]},{"r":"29","s":[{"value":["negationRationale"]}]}]},{"value":[" in "]},{"r":"30","s":[{"value":["\"Medical Reason\""]}]}]},{"value":["\n      or "]},{"r":"35","s":[{"r":"33","s":[{"r":"32","s":[{"value":["NoAnticoagulant"]}]},{"value":["."]},{"r":"33","s":[{"value":["negationRationale"]}]}]},{"value":[" in "]},{"r":"34","s":[{"value":["\"Patient Refusal\""]}]}]}]}]}]}]}}],"expression":{"localId":"37","locator":"38:3-40:63","type":"Query","source":[{"localId":"27","locator":"38:3-38:73","alias":"NoAnticoagulant","expression":{"localId":"26","locator":"38:3-38:57","dataType":"{urn:healthit-gov:qdm:v5_6}NegativeMedicationDischarge","templateId":"NegativeMedicationDischarge","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"38:34-38:56","name":"Anticoagulant Therapy","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"36","locator":"39:5-40:63","type":"Or","operand":[{"localId":"31","locator":"39:11-39:63","type":"InValueSet","code":{"localId":"29","locator":"39:11-39:43","path":"negationRationale","scope":"NoAnticoagulant","type":"Property"},"valueset":{"localId":"30","locator":"39:48-39:63","name":"Medical Reason","type":"ValueSetRef"}},{"localId":"35","locator":"40:10-40:63","type":"InValueSet","code":{"localId":"33","locator":"40:10-40:42","path":"negationRationale","scope":"NoAnticoagulant","type":"Property"},"valueset":{"localId":"34","locator":"40:47-40:63","name":"Patient Refusal","type":"ValueSetRef"}}]}}},{"localId":"40","locator":"42:1-43:52","name":"Anticoagulant Therapy at Discharge","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"40","s":[{"value":["","define ","\"Anticoagulant Therapy at Discharge\"",":\n  "]},{"r":"39","s":[{"value":["[","\"Medication, Discharge\"",": "]},{"s":[{"value":["\"Anticoagulant Therapy\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"39","locator":"43:3-43:52","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationDischarge","templateId":"PositiveMedicationDischarge","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"43:29-43:51","name":"Anticoagulant Therapy","type":"ValueSetRef"}}},{"localId":"43","locator":"45:1-46:50","name":"Initial Population","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"43","s":[{"value":["","define ","\"Initial Population\"",":\n  "]},{"r":"42","s":[{"r":"41","s":[{"value":["TJC"]}]},{"value":["."]},{"r":"42","s":[{"value":["\"Encounter with Principal Diagnosis and Age\""]}]}]}]}}],"expression":{"localId":"42","locator":"46:3-46:50","name":"Encounter with Principal Diagnosis and Age","libraryName":"TJC","type":"ExpressionRef"}},{"localId":"60","locator":"85:1-88:171","name":"Encounter with Atrial Ablation Procedure","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"60","s":[{"value":["","define ","\"Encounter with Atrial Ablation Procedure\"",":\n  "]},{"r":"59","s":[{"s":[{"r":"45","s":[{"r":"44","s":[{"s":[{"value":["TJC",".","\"Ischemic Stroke Encounter\""]}]}]},{"value":[" ","IschemicStrokeEncounter"]}]}]},{"value":["\n    "]},{"r":"58","s":[{"value":["with "]},{"r":"47","s":[{"r":"46","s":[{"r":"46","s":[{"value":["[","\"Procedure, Performed\"",": "]},{"s":[{"value":["\"Atrial Ablation\""]}]},{"value":["]"]}]}]},{"value":[" ","AtrialAblation"]}]},{"value":["\n      such that "]},{"r":"57","s":[{"r":"53","s":[{"r":"48","s":[{"value":["Global"]}]},{"value":["."]},{"r":"53","s":[{"value":["\"NormalizeInterval\""," ( "]},{"r":"50","s":[{"r":"49","s":[{"value":["AtrialAblation"]}]},{"value":["."]},{"r":"50","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"52","s":[{"r":"51","s":[{"value":["AtrialAblation"]}]},{"value":["."]},{"r":"52","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]},{"r":"57","value":[" ","starts before"," "]},{"r":"56","s":[{"value":["start of "]},{"r":"55","s":[{"r":"54","s":[{"value":["IschemicStrokeEncounter"]}]},{"value":["."]},{"r":"55","s":[{"value":["relevantPeriod"]}]}]}]}]}]}]}]}}],"expression":{"localId":"59","locator":"86:3-88:171","type":"Query","source":[{"localId":"45","locator":"86:3-86:57","alias":"IschemicStrokeEncounter","expression":{"localId":"44","locator":"86:3-86:33","name":"Ischemic Stroke Encounter","libraryName":"TJC","type":"ExpressionRef"}}],"relationship":[{"localId":"58","locator":"87:5-88:171","alias":"AtrialAblation","type":"With","expression":{"localId":"46","locator":"87:10-87:52","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveProcedurePerformed","templateId":"PositiveProcedurePerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"87:35-87:51","name":"Atrial Ablation","type":"ValueSetRef"}},"suchThat":{"localId":"57","locator":"88:17-88:171","type":"Before","operand":[{"locator":"88:111-88:116","type":"Start","operand":{"localId":"53","locator":"88:17-88:109","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"50","locator":"88:46-88:76","path":"relevantDatetime","scope":"AtrialAblation","type":"Property"},{"localId":"52","locator":"88:79-88:107","path":"relevantPeriod","scope":"AtrialAblation","type":"Property"}]}},{"localId":"56","locator":"88:125-88:171","type":"Start","operand":{"localId":"55","locator":"88:134-88:171","path":"relevantPeriod","scope":"IschemicStrokeEncounter","type":"Property"}}]}}]}},{"localId":"74","locator":"58:1-62:51","name":"Encounter with a History of Atrial Fibrillation or Flutter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"74","s":[{"value":["","define ","\"Encounter with a History of Atrial Fibrillation or Flutter\"",":\n  "]},{"r":"73","s":[{"s":[{"r":"63","s":[{"r":"62","s":[{"s":[{"value":["TJC",".","\"Ischemic Stroke Encounter\""]}]}]},{"value":[" ","IschemicStrokeEncounter"]}]}]},{"value":["\n    "]},{"r":"72","s":[{"value":["with "]},{"r":"65","s":[{"r":"64","s":[{"r":"64","s":[{"value":["[","\"Diagnosis\"",": "]},{"s":[{"value":["\"Atrial Fibrillation/Flutter\""]}]},{"value":["]"]}]}]},{"value":[" ","AtrialFibrillationFlutter"]}]},{"value":["\n      such that "]},{"r":"71","s":[{"r":"67","s":[{"r":"66","s":[{"value":["AtrialFibrillationFlutter"]}]},{"value":["."]},{"r":"67","s":[{"value":["prevalencePeriod"]}]}]},{"r":"71","value":[" ","starts on or before"," \n      "]},{"r":"70","s":[{"value":["end of "]},{"r":"69","s":[{"r":"68","s":[{"value":["IschemicStrokeEncounter"]}]},{"value":["."]},{"r":"69","s":[{"value":["relevantPeriod"]}]}]}]}]}]}]}]}}],"expression":{"localId":"73","locator":"59:3-62:51","type":"Query","source":[{"localId":"63","locator":"59:3-59:57","alias":"IschemicStrokeEncounter","expression":{"localId":"62","locator":"59:3-59:33","name":"Ischemic Stroke Encounter","libraryName":"TJC","type":"ExpressionRef"}}],"relationship":[{"localId":"72","locator":"60:5-62:51","alias":"AtrialFibrillationFlutter","type":"With","expression":{"localId":"64","locator":"60:10-60:53","dataType":"{urn:healthit-gov:qdm:v5_6}Diagnosis","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"60:24-60:52","name":"Atrial Fibrillation/Flutter","type":"ValueSetRef"}},"suchThat":{"localId":"71","locator":"61:17-62:51","type":"SameOrBefore","operand":[{"locator":"61:60-61:65","type":"Start","operand":{"localId":"67","locator":"61:17-61:58","path":"prevalencePeriod","scope":"AtrialFibrillationFlutter","type":"Property"}},{"localId":"70","locator":"62:7-62:51","type":"End","operand":{"localId":"69","locator":"62:14-62:51","path":"relevantPeriod","scope":"IschemicStrokeEncounter","type":"Property"}}]}}]}},{"localId":"88","locator":"64:1-68:5","name":"Encounter with Current Diagnosis Code of Atrial Fibrillation or Flutter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"88","s":[{"value":["","define ","\"Encounter with Current Diagnosis Code of Atrial Fibrillation or Flutter\"",":\n  "]},{"r":"87","s":[{"s":[{"r":"78","s":[{"r":"77","s":[{"s":[{"value":["TJC",".","\"Ischemic Stroke Encounter\""]}]}]},{"value":[" ","IschemicStrokeEncounter"]}]}]},{"value":["\n    "]},{"r":"86","s":[{"value":["where "]},{"r":"86","s":[{"value":["exists "]},{"r":"85","s":[{"value":["( "]},{"r":"85","s":[{"s":[{"r":"80","s":[{"r":"79","s":[{"s":[{"value":["IschemicStrokeEncounter",".","diagnoses"]}]}]},{"value":[" ","Diagnosis"]}]}]},{"value":["\n        "]},{"r":"84","s":[{"value":["where "]},{"r":"84","s":[{"value":["( "]},{"r":"84","s":[{"r":"82","s":[{"r":"81","s":[{"value":["Diagnosis"]}]},{"value":["."]},{"r":"82","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"83","s":[{"value":["\"Atrial Fibrillation/Flutter\""]}]}]},{"value":[" )"]}]}]}]},{"value":["\n    )"]}]}]}]}]}]}}],"expression":{"localId":"87","locator":"65:3-68:5","type":"Query","source":[{"localId":"78","locator":"65:3-65:57","alias":"IschemicStrokeEncounter","expression":{"localId":"77","locator":"65:3-65:33","name":"Ischemic Stroke Encounter","libraryName":"TJC","type":"ExpressionRef"}}],"relationship":[],"where":{"localId":"86","locator":"66:5-68:5","type":"Exists","operand":{"localId":"85","locator":"66:18-68:5","type":"Query","source":[{"localId":"80","locator":"66:20-66:62","alias":"Diagnosis","expression":{"localId":"79","locator":"66:20-66:52","path":"diagnoses","scope":"IschemicStrokeEncounter","type":"Property"}}],"relationship":[],"where":{"localId":"84","locator":"67:9-67:65","type":"InValueSet","code":{"localId":"82","locator":"67:17-67:30","path":"code","scope":"Diagnosis","type":"Property"},"valueset":{"localId":"83","locator":"67:35-67:63","name":"Atrial Fibrillation/Flutter","type":"ValueSetRef"}}}}}},{"localId":"91","locator":"70:1-73:83","name":"Denominator","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"91","s":[{"value":["","define ","\"Denominator\"",":\n  "]},{"r":"90","s":[{"r":"76","s":[{"r":"61","s":[{"value":["\"Encounter with Atrial Ablation Procedure\""]}]},{"value":["\n    union "]},{"r":"75","s":[{"value":["\"Encounter with a History of Atrial Fibrillation or Flutter\""]}]}]},{"value":["\n    union "]},{"r":"89","s":[{"value":["\"Encounter with Current Diagnosis Code of Atrial Fibrillation or Flutter\""]}]}]}]}}],"expression":{"localId":"90","locator":"71:3-73:83","type":"Union","operand":[{"localId":"76","locator":"71:3-72:70","type":"Union","operand":[{"localId":"61","locator":"71:3-71:44","name":"Encounter with Atrial Ablation Procedure","type":"ExpressionRef"},{"localId":"75","locator":"72:11-72:70","name":"Encounter with a History of Atrial Fibrillation or Flutter","type":"ExpressionRef"}]},{"localId":"89","locator":"73:11-73:83","name":"Encounter with Current Diagnosis Code of Atrial Fibrillation or Flutter","type":"ExpressionRef"}]}},{"localId":"103","locator":"48:1-51:85","name":"Numerator","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"103","s":[{"value":["","define ","\"Numerator\"",":\n  "]},{"r":"102","s":[{"s":[{"r":"93","s":[{"r":"92","s":[{"s":[{"value":["\"Denominator\""]}]}]},{"value":[" ","Encounter"]}]}]},{"value":["\n    "]},{"r":"101","s":[{"value":["with "]},{"r":"95","s":[{"r":"94","s":[{"s":[{"value":["\"Anticoagulant Therapy at Discharge\""]}]}]},{"value":[" ","DischargeAnticoagulant"]}]},{"value":["\n      such that "]},{"r":"100","s":[{"r":"97","s":[{"r":"96","s":[{"value":["DischargeAnticoagulant"]}]},{"value":["."]},{"r":"97","s":[{"value":["authorDatetime"]}]}]},{"r":"100","value":[" ","during"," "]},{"r":"99","s":[{"r":"98","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"99","s":[{"value":["relevantPeriod"]}]}]}]}]}]}]}}],"expression":{"localId":"102","locator":"49:3-51:85","type":"Query","source":[{"localId":"93","locator":"49:3-49:25","alias":"Encounter","expression":{"localId":"92","locator":"49:3-49:15","name":"Denominator","type":"ExpressionRef"}}],"relationship":[{"localId":"101","locator":"50:5-51:85","alias":"DischargeAnticoagulant","type":"With","expression":{"localId":"94","locator":"50:10-50:45","name":"Anticoagulant Therapy at Discharge","type":"ExpressionRef"},"suchThat":{"localId":"100","locator":"51:17-51:85","type":"In","operand":[{"localId":"97","locator":"51:17-51:53","path":"authorDatetime","scope":"DischargeAnticoagulant","type":"Property"},{"localId":"99","locator":"51:62-51:85","path":"relevantPeriod","scope":"Encounter","type":"Property"}]}}]}},{"localId":"115","locator":"53:1-56:87","name":"Denominator Exceptions","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"115","s":[{"value":["","define ","\"Denominator Exceptions\"",":\n  "]},{"r":"114","s":[{"s":[{"r":"105","s":[{"r":"104","s":[{"s":[{"value":["\"Denominator\""]}]}]},{"value":[" ","Encounter"]}]}]},{"value":["\n    "]},{"r":"113","s":[{"value":["with "]},{"r":"107","s":[{"r":"106","s":[{"s":[{"value":["\"Reason for Not Giving Anticoagulant at Discharge\""]}]}]},{"value":[" ","NoDischargeAnticoagulant"]}]},{"value":["\n      such that "]},{"r":"112","s":[{"r":"109","s":[{"r":"108","s":[{"value":["NoDischargeAnticoagulant"]}]},{"value":["."]},{"r":"109","s":[{"value":["authorDatetime"]}]}]},{"r":"112","value":[" ","during"," "]},{"r":"111","s":[{"r":"110","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"111","s":[{"value":["relevantPeriod"]}]}]}]}]}]}]}}],"expression":{"localId":"114","locator":"54:3-56:87","type":"Query","source":[{"localId":"105","locator":"54:3-54:25","alias":"Encounter","expression":{"localId":"104","locator":"54:3-54:15","name":"Denominator","type":"ExpressionRef"}}],"relationship":[{"localId":"113","locator":"55:5-56:87","alias":"NoDischargeAnticoagulant","type":"With","expression":{"localId":"106","locator":"55:10-55:59","name":"Reason for Not Giving Anticoagulant at Discharge","type":"ExpressionRef"},"suchThat":{"localId":"112","locator":"56:17-56:87","type":"In","operand":[{"localId":"109","locator":"56:17-56:55","path":"authorDatetime","scope":"NoDischargeAnticoagulant","type":"Property"},{"localId":"111","locator":"56:64-56:87","path":"relevantPeriod","scope":"Encounter","type":"Property"}]}}]}},{"localId":"163","locator":"90:1-93:216","name":"Encounter with Comfort Measures during Hospitalization for Patients with Documented Atrial Fibrillation or Flutter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"163","s":[{"value":["","define ","\"Encounter with Comfort Measures during Hospitalization for Patients with Documented Atrial Fibrillation or Flutter\"",":\n  "]},{"r":"162","s":[{"s":[{"r":"144","s":[{"r":"143","s":[{"s":[{"value":["\"Denominator\""]}]}]},{"value":[" ","Encounter"]}]}]},{"value":["\n    "]},{"r":"161","s":[{"value":["with "]},{"r":"146","s":[{"r":"145","s":[{"s":[{"value":["TJC",".","\"Intervention Comfort Measures\""]}]}]},{"value":[" ","ComfortMeasure"]}]},{"value":["\n      such that "]},{"r":"160","s":[{"r":"156","s":[{"value":["Coalesce","("]},{"r":"153","s":[{"value":["start of "]},{"r":"152","s":[{"r":"147","s":[{"value":["Global"]}]},{"value":["."]},{"r":"152","s":[{"value":["\"NormalizeInterval\"","("]},{"r":"149","s":[{"r":"148","s":[{"value":["ComfortMeasure"]}]},{"value":["."]},{"r":"149","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"151","s":[{"r":"150","s":[{"value":["ComfortMeasure"]}]},{"value":["."]},{"r":"151","s":[{"value":["relevantPeriod"]}]}]},{"value":[")"]}]}]}]},{"value":[", "]},{"r":"155","s":[{"r":"154","s":[{"value":["ComfortMeasure"]}]},{"value":["."]},{"r":"155","s":[{"value":["authorDatetime"]}]}]},{"value":[")"]}]},{"r":"160","value":["during"," "]},{"r":"159","s":[{"r":"157","s":[{"value":["Global"]}]},{"value":["."]},{"r":"159","s":[{"value":["\"HospitalizationWithObservation\""," ( "]},{"r":"158","s":[{"value":["Encounter"]}]},{"value":[" )"]}]}]}]}]}]}]}}],"expression":{"localId":"162","locator":"91:3-93:216","type":"Query","source":[{"localId":"144","locator":"91:3-91:25","alias":"Encounter","expression":{"localId":"143","locator":"91:3-91:15","name":"Denominator","type":"ExpressionRef"}}],"relationship":[{"localId":"161","locator":"92:5-93:216","alias":"ComfortMeasure","type":"With","expression":{"localId":"145","locator":"92:10-92:44","name":"Intervention Comfort Measures","libraryName":"TJC","type":"ExpressionRef"},"suchThat":{"localId":"160","locator":"93:17-93:216","type":"In","operand":[{"localId":"156","locator":"93:17-93:156","type":"Coalesce","operand":[{"localId":"153","locator":"93:26-93:124","type":"Start","operand":{"localId":"152","locator":"93:35-93:124","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"149","locator":"93:62-93:92","path":"relevantDatetime","scope":"ComfortMeasure","type":"Property"},{"localId":"151","locator":"93:95-93:123","path":"relevantPeriod","scope":"ComfortMeasure","type":"Property"}]}},{"localId":"155","locator":"93:127-93:155","path":"authorDatetime","scope":"ComfortMeasure","type":"Property"}]},{"localId":"159","locator":"93:164-93:216","name":"HospitalizationWithObservation","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"158","locator":"93:206-93:214","name":"Encounter","type":"AliasRef"}]}]}}]}},{"localId":"166","locator":"75:1-83:126","name":"Denominator Exclusions","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"166","s":[{"value":["","define ","\"Denominator Exclusions\"",":\n  "]},{"r":"165","s":[{"r":"142","s":[{"value":["( "]},{"r":"142","s":[{"s":[{"r":"117","s":[{"r":"116","s":[{"s":[{"value":["\"Denominator\""]}]}]},{"value":[" ","Encounter"]}]}]},{"value":["\n      "]},{"r":"141","s":[{"value":["where "]},{"r":"141","s":[{"r":"136","s":[{"r":"131","s":[{"r":"126","s":[{"r":"121","s":[{"r":"119","s":[{"r":"118","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"119","s":[{"value":["dischargeDisposition"]}]}]},{"value":[" in "]},{"r":"120","s":[{"value":["\"Discharge To Acute Care Facility\""]}]}]},{"value":["\n        or "]},{"r":"125","s":[{"r":"123","s":[{"r":"122","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"123","s":[{"value":["dischargeDisposition"]}]}]},{"value":[" in "]},{"r":"124","s":[{"value":["\"Left Against Medical Advice\""]}]}]}]},{"value":["\n        or "]},{"r":"130","s":[{"r":"128","s":[{"r":"127","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"128","s":[{"value":["dischargeDisposition"]}]}]},{"value":[" in "]},{"r":"129","s":[{"value":["\"Patient Expired\""]}]}]}]},{"value":["\n        or "]},{"r":"135","s":[{"r":"133","s":[{"r":"132","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"133","s":[{"value":["dischargeDisposition"]}]}]},{"value":[" in "]},{"r":"134","s":[{"value":["\"Discharged to Home for Hospice Care\""]}]}]}]},{"value":["\n        or "]},{"r":"140","s":[{"r":"138","s":[{"r":"137","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"138","s":[{"value":["dischargeDisposition"]}]}]},{"value":[" in "]},{"r":"139","s":[{"value":["\"Discharged to Health Care Facility for Hospice Care\""]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["\n    union "]},{"r":"164","s":[{"value":["\"Encounter with Comfort Measures during Hospitalization for Patients with Documented Atrial Fibrillation or Flutter\""]}]}]}]}}],"expression":{"localId":"165","locator":"76:3-83:126","type":"Union","operand":[{"localId":"142","locator":"76:3-82:3","type":"Query","source":[{"localId":"117","locator":"76:5-76:27","alias":"Encounter","expression":{"localId":"116","locator":"76:5-76:17","name":"Denominator","type":"ExpressionRef"}}],"relationship":[],"where":{"localId":"141","locator":"77:7-81:98","type":"Or","operand":[{"localId":"136","locator":"77:13-80:82","type":"Or","operand":[{"localId":"131","locator":"77:13-79:62","type":"Or","operand":[{"localId":"126","locator":"77:13-78:74","type":"Or","operand":[{"localId":"121","locator":"77:13-77:80","type":"InValueSet","code":{"localId":"119","locator":"77:13-77:42","path":"dischargeDisposition","scope":"Encounter","type":"Property"},"valueset":{"localId":"120","locator":"77:47-77:80","name":"Discharge To Acute Care Facility","type":"ValueSetRef"}},{"localId":"125","locator":"78:12-78:74","type":"InValueSet","code":{"localId":"123","locator":"78:12-78:41","path":"dischargeDisposition","scope":"Encounter","type":"Property"},"valueset":{"localId":"124","locator":"78:46-78:74","name":"Left Against Medical Advice","type":"ValueSetRef"}}]},{"localId":"130","locator":"79:12-79:62","type":"InValueSet","code":{"localId":"128","locator":"79:12-79:41","path":"dischargeDisposition","scope":"Encounter","type":"Property"},"valueset":{"localId":"129","locator":"79:46-79:62","name":"Patient Expired","type":"ValueSetRef"}}]},{"localId":"135","locator":"80:12-80:82","type":"InValueSet","code":{"localId":"133","locator":"80:12-80:41","path":"dischargeDisposition","scope":"Encounter","type":"Property"},"valueset":{"localId":"134","locator":"80:46-80:82","name":"Discharged to Home for Hospice Care","type":"ValueSetRef"}}]},{"localId":"140","locator":"81:12-81:98","type":"InValueSet","code":{"localId":"138","locator":"81:12-81:41","path":"dischargeDisposition","scope":"Encounter","type":"Property"},"valueset":{"localId":"139","locator":"81:46-81:98","name":"Discharged to Health Care Facility for Hospice Care","type":"ValueSetRef"}}]}},{"localId":"164","locator":"83:11-83:126","name":"Encounter with Comfort Measures during Hospitalization for Patients with Documented Atrial Fibrillation or Flutter","type":"ExpressionRef"}]}}]}}},"elm_annotations":{"statements":[{"children":[{"children":[{"children":[{"text":"define \"SDE Ethnicity\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Ethnicity\": "}]},{"children":[{"children":[{"text":"\"Ethnicity\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"18"}],"ref_id":"19"}],"define_name":"SDE Ethnicity"},{"children":[{"children":[{"children":[{"text":"define \"SDE Payer\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Payer\": "}]},{"children":[{"children":[{"text":"\"Payer\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"20"}],"ref_id":"21"}],"define_name":"SDE Payer"},{"children":[{"children":[{"children":[{"text":"define \"SDE Race\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Race\": "}]},{"children":[{"children":[{"text":"\"Race\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"22"}],"ref_id":"23"}],"define_name":"SDE Race"},{"children":[{"children":[{"children":[{"text":"define \"SDE Sex\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Sex\": "}]},{"children":[{"children":[{"text":"\"ONC Administrative Sex\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"24"}],"ref_id":"25"}],"define_name":"SDE Sex"},{"children":[{"children":[{"children":[{"text":"define \"Reason for Not Giving Anticoagulant at Discharge\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Medication, Not Discharged\": "}]},{"children":[{"children":[{"text":"\"Anticoagulant Therapy\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"26"}],"node_type":"Retrieve","ref_id":"26"},{"children":[{"text":" NoAnticoagulant"}]}],"ref_id":"27"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"NoAnticoagulant"}]}],"ref_id":"28"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"negationRationale"}]}],"ref_id":"29"}],"ref_id":"29"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Medical Reason\""}]}],"ref_id":"30"}],"node_type":"InValueSet","ref_id":"31"},{"children":[{"text":"\n      or "}]},{"children":[{"children":[{"children":[{"children":[{"text":"NoAnticoagulant"}]}],"ref_id":"32"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"negationRationale"}]}],"ref_id":"33"}],"ref_id":"33"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Patient Refusal\""}]}],"ref_id":"34"}],"node_type":"InValueSet","ref_id":"35"}],"ref_id":"36"}],"ref_id":"36"}],"node_type":"Query","ref_id":"37"}],"ref_id":"38"}],"define_name":"Reason for Not Giving Anticoagulant at Discharge"},{"children":[{"children":[{"children":[{"text":"define \"Anticoagulant Therapy at Discharge\":\n  "}]},{"children":[{"children":[{"text":"[\"Medication, Discharge\": "}]},{"children":[{"children":[{"text":"\"Anticoagulant Therapy\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"39"}],"ref_id":"40"}],"define_name":"Anticoagulant Therapy at Discharge"},{"children":[{"children":[{"children":[{"text":"define \"Initial Population\":\n  "}]},{"children":[{"children":[{"children":[{"text":"TJC"}]}],"ref_id":"41"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"Encounter with Principal Diagnosis and Age\""}]}],"node_type":"ExpressionRef","ref_id":"42"}],"node_type":"ExpressionRef","ref_id":"42"}],"ref_id":"43"}],"define_name":"Initial Population"},{"children":[{"children":[{"children":[{"text":"define \"Encounter with Atrial Ablation Procedure\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"TJC.\"Ischemic Stroke Encounter\""}]}]}],"node_type":"ExpressionRef","ref_id":"44"},{"children":[{"text":" IschemicStrokeEncounter"}]}],"ref_id":"45"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"[\"Procedure, Performed\": "}]},{"children":[{"children":[{"text":"\"Atrial Ablation\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"46"}],"node_type":"Retrieve","ref_id":"46"},{"children":[{"text":" AtrialAblation"}]}],"ref_id":"47"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"48"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\" ( "}]},{"children":[{"children":[{"children":[{"text":"AtrialAblation"}]}],"ref_id":"49"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"50"}],"node_type":"Property","ref_id":"50"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"AtrialAblation"}]}],"ref_id":"51"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"52"}],"node_type":"Property","ref_id":"52"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"53"}],"node_type":"FunctionRef","ref_id":"53"},{"children":[{"text":" starts before "}],"node_type":"Before","ref_id":"57"},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"IschemicStrokeEncounter"}]}],"ref_id":"54"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"55"}],"node_type":"Property","ref_id":"55"}],"node_type":"Start","ref_id":"56"}],"node_type":"Before","ref_id":"57"}],"ref_id":"58"}],"node_type":"Query","ref_id":"59"}],"ref_id":"60"}],"define_name":"Encounter with Atrial Ablation Procedure"},{"children":[{"children":[{"children":[{"text":"define \"Encounter with a History of Atrial Fibrillation or Flutter\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"TJC.\"Ischemic Stroke Encounter\""}]}]}],"node_type":"ExpressionRef","ref_id":"62"},{"children":[{"text":" IschemicStrokeEncounter"}]}],"ref_id":"63"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"[\"Diagnosis\": "}]},{"children":[{"children":[{"text":"\"Atrial Fibrillation/Flutter\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"64"}],"node_type":"Retrieve","ref_id":"64"},{"children":[{"text":" AtrialFibrillationFlutter"}]}],"ref_id":"65"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"AtrialFibrillationFlutter"}]}],"ref_id":"66"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"prevalencePeriod"}]}],"node_type":"Property","ref_id":"67"}],"node_type":"Property","ref_id":"67"},{"children":[{"text":" starts on or before \n      "}],"node_type":"SameOrBefore","ref_id":"71"},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"IschemicStrokeEncounter"}]}],"ref_id":"68"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"69"}],"node_type":"Property","ref_id":"69"}],"node_type":"End","ref_id":"70"}],"node_type":"SameOrBefore","ref_id":"71"}],"ref_id":"72"}],"node_type":"Query","ref_id":"73"}],"ref_id":"74"}],"define_name":"Encounter with a History of Atrial Fibrillation or Flutter"},{"children":[{"children":[{"children":[{"text":"define \"Encounter with Current Diagnosis Code of Atrial Fibrillation or Flutter\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"TJC.\"Ischemic Stroke Encounter\""}]}]}],"node_type":"ExpressionRef","ref_id":"77"},{"children":[{"text":" IschemicStrokeEncounter"}]}],"ref_id":"78"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"IschemicStrokeEncounter.diagnoses"}]}]}],"node_type":"Property","ref_id":"79"},{"children":[{"text":" Diagnosis"}]}],"ref_id":"80"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Diagnosis"}]}],"ref_id":"81"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"82"}],"ref_id":"82"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Atrial Fibrillation/Flutter\""}]}],"ref_id":"83"}],"ref_id":"84"},{"children":[{"text":" )"}]}],"ref_id":"84"}],"ref_id":"84"}],"node_type":"Query","ref_id":"85"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"85"}],"ref_id":"86"}],"ref_id":"86"}],"node_type":"Query","ref_id":"87"}],"ref_id":"88"}],"define_name":"Encounter with Current Diagnosis Code of Atrial Fibrillation or Flutter"},{"children":[{"children":[{"children":[{"text":"define \"Denominator\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"Encounter with Atrial Ablation Procedure\""}]}],"node_type":"ExpressionRef","ref_id":"61"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"\"Encounter with a History of Atrial Fibrillation or Flutter\""}]}],"node_type":"ExpressionRef","ref_id":"75"}],"node_type":"Union","ref_id":"76"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"\"Encounter with Current Diagnosis Code of Atrial Fibrillation or Flutter\""}]}],"node_type":"ExpressionRef","ref_id":"89"}],"node_type":"Union","ref_id":"90"}],"ref_id":"91"}],"define_name":"Denominator"},{"children":[{"children":[{"children":[{"text":"define \"Numerator\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Denominator\""}]}]}],"node_type":"ExpressionRef","ref_id":"92"},{"children":[{"text":" Encounter"}]}],"ref_id":"93"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"Anticoagulant Therapy at Discharge\""}]}]}],"node_type":"ExpressionRef","ref_id":"94"},{"children":[{"text":" DischargeAnticoagulant"}]}],"ref_id":"95"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"DischargeAnticoagulant"}]}],"ref_id":"96"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"97"}],"node_type":"Property","ref_id":"97"},{"children":[{"text":" during "}],"node_type":"In","ref_id":"100"},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"98"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"99"}],"node_type":"Property","ref_id":"99"}],"node_type":"In","ref_id":"100"}],"ref_id":"101"}],"node_type":"Query","ref_id":"102"}],"ref_id":"103"}],"define_name":"Numerator"},{"children":[{"children":[{"children":[{"text":"define \"Denominator Exceptions\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Denominator\""}]}]}],"node_type":"ExpressionRef","ref_id":"104"},{"children":[{"text":" Encounter"}]}],"ref_id":"105"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"Reason for Not Giving Anticoagulant at Discharge\""}]}]}],"node_type":"ExpressionRef","ref_id":"106"},{"children":[{"text":" NoDischargeAnticoagulant"}]}],"ref_id":"107"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"NoDischargeAnticoagulant"}]}],"ref_id":"108"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"109"}],"node_type":"Property","ref_id":"109"},{"children":[{"text":" during "}],"node_type":"In","ref_id":"112"},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"110"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"111"}],"node_type":"Property","ref_id":"111"}],"node_type":"In","ref_id":"112"}],"ref_id":"113"}],"node_type":"Query","ref_id":"114"}],"ref_id":"115"}],"define_name":"Denominator Exceptions"},{"children":[{"children":[{"children":[{"text":"define \"Encounter with Comfort Measures during Hospitalization for Patients with Documented Atrial Fibrillation or Flutter\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Denominator\""}]}]}],"node_type":"ExpressionRef","ref_id":"143"},{"children":[{"text":" Encounter"}]}],"ref_id":"144"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"TJC.\"Intervention Comfort Measures\""}]}]}],"node_type":"ExpressionRef","ref_id":"145"},{"children":[{"text":" ComfortMeasure"}]}],"ref_id":"146"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"147"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\"("}]},{"children":[{"children":[{"children":[{"text":"ComfortMeasure"}]}],"ref_id":"148"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"149"}],"node_type":"Property","ref_id":"149"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"ComfortMeasure"}]}],"ref_id":"150"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"151"}],"node_type":"Property","ref_id":"151"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"152"}],"node_type":"FunctionRef","ref_id":"152"}],"node_type":"Start","ref_id":"153"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"ComfortMeasure"}]}],"ref_id":"154"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"155"}],"node_type":"Property","ref_id":"155"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"156"},{"children":[{"text":"during "}],"node_type":"In","ref_id":"160"},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"157"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"HospitalizationWithObservation\" ( "}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"AliasRef","ref_id":"158"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"159"}],"node_type":"FunctionRef","ref_id":"159"}],"node_type":"In","ref_id":"160"}],"ref_id":"161"}],"node_type":"Query","ref_id":"162"}],"ref_id":"163"}],"define_name":"Encounter with Comfort Measures during Hospitalization for Patients with Documented Atrial Fibrillation or Flutter"},{"children":[{"children":[{"children":[{"text":"define \"Denominator Exclusions\":\n  "}]},{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Denominator\""}]}]}],"node_type":"ExpressionRef","ref_id":"116"},{"children":[{"text":" Encounter"}]}],"ref_id":"117"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"118"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"dischargeDisposition"}]}],"ref_id":"119"}],"ref_id":"119"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Discharge To Acute Care Facility\""}]}],"ref_id":"120"}],"node_type":"InValueSet","ref_id":"121"},{"children":[{"text":"\n        or "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"122"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"dischargeDisposition"}]}],"ref_id":"123"}],"ref_id":"123"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Left Against Medical Advice\""}]}],"ref_id":"124"}],"node_type":"InValueSet","ref_id":"125"}],"node_type":"Or","ref_id":"126"},{"children":[{"text":"\n        or "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"127"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"dischargeDisposition"}]}],"ref_id":"128"}],"ref_id":"128"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Patient Expired\""}]}],"ref_id":"129"}],"node_type":"InValueSet","ref_id":"130"}],"node_type":"Or","ref_id":"131"},{"children":[{"text":"\n        or "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"132"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"dischargeDisposition"}]}],"ref_id":"133"}],"ref_id":"133"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Discharged to Home for Hospice Care\""}]}],"ref_id":"134"}],"node_type":"InValueSet","ref_id":"135"}],"node_type":"Or","ref_id":"136"},{"children":[{"text":"\n        or "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"137"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"dischargeDisposition"}]}],"ref_id":"138"}],"ref_id":"138"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Discharged to Health Care Facility for Hospice Care\""}]}],"ref_id":"139"}],"node_type":"InValueSet","ref_id":"140"}],"ref_id":"141"}],"ref_id":"141"}],"node_type":"Query","ref_id":"142"},{"children":[{"text":"\n  )"}]}],"node_type":"Query","ref_id":"142"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"\"Encounter with Comfort Measures during Hospitalization for Patients with Documented Atrial Fibrillation or Flutter\""}]}],"node_type":"ExpressionRef","ref_id":"164"}],"node_type":"Union","ref_id":"165"}],"ref_id":"166"}],"define_name":"Denominator Exclusions"}],"identifier":{"id":"AnticoagulationTherapyforAtrialFibrillationFlutter","version":"12.0.000"}},"is_main_library":true,"is_top_level":true,"library_name":"AnticoagulationTherapyforAtrialFibrillationFlutter","library_version":"12.0.000","statement_dependencies":[{"_id":"689268d7e8da6d1c0d5175e9","statement_name":"Patient"},{"_id":"689268d7e8da6d1c0d5175ea","statement_name":"SDE Ethnicity"},{"_id":"689268d7e8da6d1c0d5175eb","statement_name":"SDE Payer"},{"_id":"689268d7e8da6d1c0d5175ec","statement_name":"SDE Race"},{"_id":"689268d7e8da6d1c0d5175ed","statement_name":"SDE Sex"},{"_id":"689268d7e8da6d1c0d5175ee","statement_name":"Reason for Not Giving Anticoagulant at Discharge"},{"_id":"689268d7e8da6d1c0d5175ef","statement_name":"Anticoagulant Therapy at Discharge"},{"_id":"689268d7e8da6d1c0d5175f0","statement_name":"Initial Population","statement_references":[{"_id":"689268dfe8da6d1c0d517826","hqmf_id":null,"library_name":"TJCOverall","statement_name":"Encounter with Principal Diagnosis and Age"}]},{"_id":"689268d7e8da6d1c0d5175f1","statement_name":"Encounter with Atrial Ablation Procedure","statement_references":[{"_id":"689268d7e8da6d1c0d5175da","hqmf_id":null,"library_name":"TJCOverall","statement_name":"Ischemic Stroke Encounter"},{"_id":"689268d7e8da6d1c0d5175db","hqmf_id":null,"library_name":"MATGlobalCommonFunctions","statement_name":"NormalizeInterval"}]},{"_id":"689268d7e8da6d1c0d5175f2","statement_name":"Encounter with a History of Atrial Fibrillation or Flutter","statement_references":[{"_id":"689268dfe8da6d1c0d517827","hqmf_id":null,"library_name":"TJCOverall","statement_name":"Ischemic Stroke Encounter"}]},{"_id":"689268d7e8da6d1c0d5175f3","statement_name":"Encounter with Current Diagnosis Code of Atrial Fibrillation or Flutter","statement_references":[{"_id":"689268dfe8da6d1c0d517828","hqmf_id":null,"library_name":"TJCOverall","statement_name":"Ischemic Stroke Encounter"}]},{"_id":"689268d7e8da6d1c0d5175f4","statement_name":"Denominator","statement_references":[{"_id":"689268d7e8da6d1c0d5175dc","hqmf_id":null,"library_name":"AnticoagulationTherapyforAtrialFibrillationFlutter","statement_name":"Encounter with Atrial Ablation Procedure"},{"_id":"689268d7e8da6d1c0d5175dd","hqmf_id":null,"library_name":"AnticoagulationTherapyforAtrialFibrillationFlutter","statement_name":"Encounter with a History of Atrial Fibrillation or Flutter"},{"_id":"689268d7e8da6d1c0d5175de","hqmf_id":null,"library_name":"AnticoagulationTherapyforAtrialFibrillationFlutter","statement_name":"Encounter with Current Diagnosis Code of Atrial Fibrillation or Flutter"}]},{"_id":"689268d7e8da6d1c0d5175f5","statement_name":"Numerator","statement_references":[{"_id":"689268d7e8da6d1c0d5175df","hqmf_id":null,"library_name":"AnticoagulationTherapyforAtrialFibrillationFlutter","statement_name":"Denominator"},{"_id":"689268d7e8da6d1c0d5175e0","hqmf_id":null,"library_name":"AnticoagulationTherapyforAtrialFibrillationFlutter","statement_name":"Anticoagulant Therapy at Discharge"}]},{"_id":"689268d7e8da6d1c0d5175f6","statement_name":"Denominator Exceptions","statement_references":[{"_id":"689268d7e8da6d1c0d5175e1","hqmf_id":null,"library_name":"AnticoagulationTherapyforAtrialFibrillationFlutter","statement_name":"Denominator"},{"_id":"689268d7e8da6d1c0d5175e2","hqmf_id":null,"library_name":"AnticoagulationTherapyforAtrialFibrillationFlutter","statement_name":"Reason for Not Giving Anticoagulant at Discharge"}]},{"_id":"689268d7e8da6d1c0d5175f7","statement_name":"Encounter with Comfort Measures during Hospitalization for Patients with Documented Atrial Fibrillation or Flutter","statement_references":[{"_id":"689268d7e8da6d1c0d5175e3","hqmf_id":null,"library_name":"AnticoagulationTherapyforAtrialFibrillationFlutter","statement_name":"Denominator"},{"_id":"689268d7e8da6d1c0d5175e4","hqmf_id":null,"library_name":"TJCOverall","statement_name":"Intervention Comfort Measures"},{"_id":"689268d7e8da6d1c0d5175e5","hqmf_id":null,"library_name":"MATGlobalCommonFunctions","statement_name":"NormalizeInterval"},{"_id":"689268d7e8da6d1c0d5175e6","hqmf_id":null,"library_name":"MATGlobalCommonFunctions","statement_name":"HospitalizationWithObservation"}]},{"_id":"689268d7e8da6d1c0d5175f8","statement_name":"Denominator Exclusions","statement_references":[{"_id":"689268d7e8da6d1c0d5175e7","hqmf_id":null,"library_name":"AnticoagulationTherapyforAtrialFibrillationFlutter","statement_name":"Denominator"},{"_id":"689268d7e8da6d1c0d5175e8","hqmf_id":null,"library_name":"AnticoagulationTherapyforAtrialFibrillationFlutter","statement_name":"Encounter with Comfort Measures during Hospitalization for Patients with Documented Atrial Fibrillation or Flutter"}]}]},{"_id":"689268d7e8da6d1c0d517605","cql":"library MATGlobalCommonFunctions version '7.0.000'\n\nusing QDM version '5.6'\n\nvalueset \"Emergency Department Visit\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.292' \nvalueset \"Encounter Inpatient\": 'urn:oid:2.16.840.1.113883.3.666.5.307' \nvalueset \"Intensive Care Unit\": 'urn:oid:2.16.840.1.113762.1.4.1029.206' \nvalueset \"Observation Services\": 'urn:oid:2.16.840.1.113762.1.4.1111.143' \nvalueset \"Outpatient Surgery Service\": 'urn:oid:2.16.840.1.113762.1.4.1110.38' \n\nparameter \"Measurement Period\" Interval\u003cDateTime\u003e\n\ncontext Patient\n\ndefine \"ED Encounter\":\n  [\"Encounter, Performed\": \"Emergency Department Visit\"]\n\ndefine \"Inpatient Encounter\":\n  [\"Encounter, Performed\": \"Encounter Inpatient\"] EncounterInpatient\n    where \"LengthInDays\"(EncounterInpatient.relevantPeriod)\u003c= 120\n      and EncounterInpatient.relevantPeriod ends during day of \"Measurement Period\"\n\n/*@description: Returns an interval of date values extracted from the input interval of date-time values\n@comment: This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability.*/\ndefine function \"ToDateInterval\"(period Interval\u003cDateTime\u003e ):\n  Interval[date from start of period, date from end of period]\n\n/*calculates the difference in calendar days between the start and end of the given interval.*/\ndefine function \"LengthInDays\"(Value Interval\u003cDateTime\u003e ):\n  difference in days between start of Value and end of Value\n\n/*returns list of all locations within an encounter, including locations for immediately prior ED visit.*/\ndefine function \"HospitalizationLocations\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet EDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn if EDVisit is null then Visit.facilityLocations \n  \t\telse flatten { EDVisit.facilityLocations, Visit.facilityLocations }\n\n/*Returns the arrival time in the ED for the encounter.*/\ndefine function \"EmergencyDepartmentArrivalTime\"(Encounter \"Encounter, Performed\" ):\n  start of First((\"HospitalizationLocations\"(Encounter))HospitalLocation\n  \t\twhere HospitalLocation.code in \"Emergency Department Visit\"\n  \t\tsort by start of locationPeriod\n  ).locationPeriod\n\n/*Returns admission time for an encounter or for immediately prior emergency department visit.*/\ndefine function \"HospitalAdmissionTime\"(Encounter \"Encounter, Performed\" ):\n  start of \"Hospitalization\"(Encounter)\n\n/*Returns earliest arrival time for an encounter including any prior ED visit.*/\ndefine function \"HospitalArrivalTime\"(Encounter \"Encounter, Performed\" ):\n  start of First((\"HospitalizationLocations\"(Encounter))HospitalLocation\n  \t\tsort by start of locationPeriod\n  ).locationPeriod\n\n/*Hospitalization returns the total interval for admission to discharge for the given encounter, or for the admission of any immediately prior emergency department visit to the discharge of the given encounter.*/\ndefine function \"Hospitalization\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet EDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn Interval[Coalesce(start of EDVisit.relevantPeriod, start of Visit.relevantPeriod), \n  \tend of Visit.relevantPeriod]\n\n/*Returns the length of stay in days (i.e. the number of days between admission and discharge) for the given encounter, or from the admission of any immediately prior emergency department visit to the discharge of the encounter*/\ndefine function \"HospitalizationLengthofStay\"(Encounter \"Encounter, Performed\" ):\n  LengthInDays(\"Hospitalization\"(Encounter))\n\n/*Returns the latest departure time for encounter including any prior ED visit.*/\ndefine function \"HospitalDepartureTime\"(Encounter \"Encounter, Performed\" ):\n  end of Last((\"HospitalizationLocations\"(Encounter))HospitalLocation\n  \t\tsort by start of locationPeriod\n  ).locationPeriod\n\n/*Hospital Discharge Time returns the discharge time for an encounter*/\ndefine function \"HospitalDischargeTime\"(Encounter \"Encounter, Performed\" ):\n  end of Encounter.relevantPeriod\n\n/*Hospitalization with Observation and Outpatient Surgery Service returns the total interval from the start of any immediately prior emergency department visit, outpatient surgery visit or observation visit to the discharge of the given encounter.*/\ndefine function \"HospitalizationWithObservationAndOutpatientSurgeryService\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet ObsVisit: Last([\"Encounter, Performed\": \"Observation Services\"] LastObs\n  \t\t\twhere LastObs.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t),\n  \tVisitStart: Coalesce(start of ObsVisit.relevantPeriod, start of Visit.relevantPeriod),\n  \tEDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before VisitStart\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t),\n  \tVisitStartWithED: Coalesce(start of EDVisit.relevantPeriod, VisitStart),\n  \tOutpatientSurgeryVisit: Last([\"Encounter, Performed\": \"Outpatient Surgery Service\"] LastSurgeryOP\n  \t\t\twhere LastSurgeryOP.relevantPeriod ends 1 hour or less on or before VisitStartWithED\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn Interval[Coalesce(start of OutpatientSurgeryVisit.relevantPeriod, VisitStartWithED), \n  \tend of Visit.relevantPeriod]\n\n/*Hospitalization with Observation returns the total interval from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\ndefine function \"HospitalizationWithObservation\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet ObsVisit: Last([\"Encounter, Performed\": \"Observation Services\"] LastObs\n  \t\t\twhere LastObs.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t),\n  \tVisitStart: Coalesce(start of ObsVisit.relevantPeriod, start of Visit.relevantPeriod),\n  \tEDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before VisitStart\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn Interval[Coalesce(start of EDVisit.relevantPeriod, VisitStart), \n  \tend of Visit.relevantPeriod]\n\n/*Hospitalization with Observation Length of Stay returns the length in days from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\ndefine function \"HospitalizationWithObservationLengthofStay\"(Encounter \"Encounter, Performed\" ):\n  \"LengthInDays\"(\"HospitalizationWithObservation\"(Encounter))\n\n/*First Inpatient Intensive Care Unit returns the first intensive care unit for the given encounter, without considering any immediately prior emergency department visit.*/\ndefine function \"FirstInpatientIntensiveCareUnit\"(Encounter \"Encounter, Performed\" ):\n  First((Encounter.facilityLocations)HospitalLocation\n      where HospitalLocation.code in \"Intensive Care Unit\"\n        and HospitalLocation.locationPeriod during Encounter.relevantPeriod\n      sort by start of locationPeriod\n  )\n\n/*Given a datetime and a period, returns the period (if a period is provided) or the interval beginning and ending on the datetime (if a datetime is provided)*/\ndefine function \"NormalizeInterval\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  if pointInTime is not null then Interval[pointInTime, pointInTime]\n    else if period is not null then period \n    else null as Interval\u003cDateTime\u003e\n\n/*Given an interval, return true if the interval has a starting boundary specified (i.e. the start of the interval is not null and not the minimum DateTime value)*/\ndefine function \"HasStart\"(period Interval\u003cDateTime\u003e ):\n  not ( start of period is null\n      or start of period = minimum DateTime\n  )\n\n/*Given an interval, return true if the interval has an ending boundary specified (i.e. the end of the interval is not null and not the maximum DateTime value)*/\ndefine function \"HasEnd\"(period Interval\u003cDateTime\u003e ):\n  not ( \n    end of period is null\n      or \n      end of period = maximum DateTime\n  )\n\n/*Given an interval, return the ending point if the interval has an ending boundary specified, otherwise, return the starting point*/\ndefine function \"Latest\"(period Interval\u003cDateTime\u003e ):\n  if ( HasEnd(period)) then \n  end of period \n    else start of period\n\n/*Given an interval, return the starting point if the interval has a starting boundary specified, otherwise, return the ending point*/\ndefine function \"Earliest\"(period Interval\u003cDateTime\u003e ):\n  if ( HasStart(period)) then start of period \n    else \n  end of period\n\n/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the ending point of the period if the period has an ending boundary specified, otherwise returns the starting point of the interval*/\ndefine function \"LatestOf\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  Latest(NormalizeInterval(pointInTime, period))\n\n/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the starting point of the period if the period has a starting boundary specified, otherwise returns the ending point of the period*/\ndefine function \"EarliestOf\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  Earliest(NormalizeInterval(pointInTime, period))\n\n","elm":{"library":{"annotation":[{"translatorOptions":"EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion,DisableMethodInvocation","type":"CqlToElmInfo"},{"type":"Annotation","s":{"r":"404","s":[{"value":["","library MATGlobalCommonFunctions version '7.0.000'"]}]}}],"identifier":{"id":"MATGlobalCommonFunctions","version":"7.0.000"},"schemaIdentifier":{"id":"urn:hl7-org:elm","version":"r1"},"usings":{"def":[{"localIdentifier":"System","uri":"urn:hl7-org:elm-types:r1"},{"localId":"1","locator":"3:1-3:23","localIdentifier":"QDM","uri":"urn:healthit-gov:qdm:v5_6","version":"5.6","annotation":[{"type":"Annotation","s":{"r":"1","s":[{"value":["","using "]},{"s":[{"value":["QDM"]}]},{"value":[" version ","'5.6'"]}]}}]}]},"parameters":{"def":[{"localId":"9","locator":"11:1-11:49","name":"Measurement Period","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"9","s":[{"value":["","parameter ","\"Measurement Period\""," "]},{"r":"8","s":[{"value":["Interval\u003c"]},{"r":"7","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}}],"parameterTypeSpecifier":{"localId":"8","locator":"11:32-11:49","type":"IntervalTypeSpecifier","pointType":{"localId":"7","locator":"11:41-11:48","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},"valueSets":{"def":[{"localId":"2","locator":"5:1-5:82","name":"Emergency Department Visit","id":"2.16.840.1.113883.3.117.1.7.1.292","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"2","s":[{"value":["","valueset ","\"Emergency Department Visit\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.292'"]}]}}]},{"localId":"3","locator":"6:1-6:71","name":"Encounter Inpatient","id":"2.16.840.1.113883.3.666.5.307","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"3","s":[{"value":["","valueset ","\"Encounter Inpatient\"",": ","'urn:oid:2.16.840.1.113883.3.666.5.307'"]}]}}]},{"localId":"4","locator":"7:1-7:72","name":"Intensive Care Unit","id":"2.16.840.1.113762.1.4.1029.206","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"4","s":[{"value":["","valueset ","\"Intensive Care Unit\"",": ","'urn:oid:2.16.840.1.113762.1.4.1029.206'"]}]}}]},{"localId":"5","locator":"8:1-8:73","name":"Observation Services","id":"2.16.840.1.113762.1.4.1111.143","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"5","s":[{"value":["","valueset ","\"Observation Services\"",": ","'urn:oid:2.16.840.1.113762.1.4.1111.143'"]}]}}]},{"localId":"6","locator":"9:1-9:78","name":"Outpatient Surgery Service","id":"2.16.840.1.113762.1.4.1110.38","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"6","s":[{"value":["","valueset ","\"Outpatient Surgery Service\"",": ","'urn:oid:2.16.840.1.113762.1.4.1110.38'"]}]}}]}]},"contexts":{"def":[{"locator":"13:1-13:15","name":"Patient"}]},"statements":{"def":[{"locator":"13:1-13:15","name":"Patient","context":"Patient","expression":{"type":"SingletonFrom","operand":{"locator":"13:1-13:15","dataType":"{urn:healthit-gov:qdm:v5_6}Patient","templateId":"Patient","type":"Retrieve"}}},{"localId":"11","locator":"15:1-16:56","name":"ED Encounter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"11","s":[{"value":["","define ","\"ED Encounter\"",":\n  "]},{"r":"10","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"10","locator":"16:3-16:56","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"16:28-16:55","name":"Emergency Department Visit","type":"ValueSetRef"}}},{"localId":"23","locator":"32:1-33:60","name":"LengthInDays","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"23","s":[{"value":["/*calculates the difference in calendar days between the start and end of the given interval.*/","define function ","\"LengthInDays\"","(","Value"," "]},{"r":"17","s":[{"value":["Interval\u003c"]},{"r":"16","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"22","s":[{"r":"22","s":[{"value":["difference in days between "]},{"r":"19","s":[{"value":["start of "]},{"r":"18","s":[{"value":["Value"]}]}]},{"value":[" and "]},{"r":"21","s":[{"value":["end of "]},{"r":"20","s":[{"value":["Value"]}]}]}]}]}]}}],"expression":{"localId":"22","locator":"33:3-33:60","precision":"Day","type":"DifferenceBetween","operand":[{"localId":"19","locator":"33:30-33:43","type":"Start","operand":{"localId":"18","locator":"33:39-33:43","name":"Value","type":"OperandRef"}},{"localId":"21","locator":"33:49-33:60","type":"End","operand":{"localId":"20","locator":"33:56-33:60","name":"Value","type":"OperandRef"}}]},"operand":[{"name":"Value","operandTypeSpecifier":{"localId":"17","locator":"32:38-32:55","type":"IntervalTypeSpecifier","pointType":{"localId":"16","locator":"32:47-32:54","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"33","locator":"18:1-21:83","name":"Inpatient Encounter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"33","s":[{"value":["","define ","\"Inpatient Encounter\"",":\n  "]},{"r":"32","s":[{"s":[{"r":"13","s":[{"r":"12","s":[{"r":"12","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Encounter Inpatient\""]}]},{"value":["]"]}]}]},{"value":[" ","EncounterInpatient"]}]}]},{"value":["\n    "]},{"r":"31","s":[{"value":["where "]},{"r":"31","s":[{"r":"26","s":[{"r":"24","s":[{"value":["\"LengthInDays\"","("]},{"r":"15","s":[{"r":"14","s":[{"value":["EncounterInpatient"]}]},{"value":["."]},{"r":"15","s":[{"value":["relevantPeriod"]}]}]},{"value":[")"]}]},{"r":"25","value":["\u003c="," ","120"]}]},{"value":["\n      and "]},{"r":"30","s":[{"r":"28","s":[{"r":"27","s":[{"value":["EncounterInpatient"]}]},{"value":["."]},{"r":"28","s":[{"value":["relevantPeriod"]}]}]},{"r":"30","value":[" ","ends during day of"," "]},{"r":"29","s":[{"value":["\"Measurement Period\""]}]}]}]}]}]}]}}],"expression":{"localId":"32","locator":"19:3-21:83","type":"Query","source":[{"localId":"13","locator":"19:3-19:68","alias":"EncounterInpatient","expression":{"localId":"12","locator":"19:3-19:49","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"19:28-19:48","name":"Encounter Inpatient","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"31","locator":"20:5-21:83","type":"And","operand":[{"localId":"26","locator":"20:11-20:65","type":"LessOrEqual","operand":[{"localId":"24","locator":"20:11-20:59","name":"LengthInDays","type":"FunctionRef","operand":[{"localId":"15","locator":"20:26-20:58","path":"relevantPeriod","scope":"EncounterInpatient","type":"Property"}]},{"localId":"25","locator":"20:63-20:65","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"120","type":"Literal"}]},{"localId":"30","locator":"21:11-21:83","precision":"Day","type":"In","operand":[{"locator":"21:45-21:48","type":"End","operand":{"localId":"28","locator":"21:11-21:43","path":"relevantPeriod","scope":"EncounterInpatient","type":"Property"}},{"localId":"29","locator":"21:64-21:83","name":"Measurement Period","type":"ParameterRef"}]}]}}},{"localId":"43","locator":"28:1-29:62","name":"ToDateInterval","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","t":[{"name":"description","value":"Returns an interval of date values extracted from the input interval of date-time values"},{"name":"description","value":"Returns an interval of date values extracted from the input interval of date-time values"},{"name":"comment","value":"This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability."}],"s":{"r":"43","s":[{"value":["/*@description: Returns an interval of date values extracted from the input interval of date-time values\n@comment: This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability.*/","define function ","\"ToDateInterval\"","(","period"," "]},{"r":"35","s":[{"value":["Interval\u003c"]},{"r":"34","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"42","s":[{"r":"42","s":[{"value":["Interval["]},{"r":"38","s":[{"value":["date from "]},{"r":"37","s":[{"value":["start of "]},{"r":"36","s":[{"value":["period"]}]}]}]},{"value":[", "]},{"r":"41","s":[{"value":["date from "]},{"r":"40","s":[{"value":["end of "]},{"r":"39","s":[{"value":["period"]}]}]}]},{"value":["]"]}]}]}]}}],"expression":{"localId":"42","locator":"29:3-29:62","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"38","locator":"29:12-29:36","type":"DateFrom","operand":{"localId":"37","locator":"29:22-29:36","type":"Start","operand":{"localId":"36","locator":"29:31-29:36","name":"period","type":"OperandRef"}}},"high":{"localId":"41","locator":"29:39-29:61","type":"DateFrom","operand":{"localId":"40","locator":"29:49-29:61","type":"End","operand":{"localId":"39","locator":"29:56-29:61","name":"period","type":"OperandRef"}}}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"35","locator":"28:41-28:58","type":"IntervalTypeSpecifier","pointType":{"localId":"34","locator":"28:50-28:57","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"79","locator":"36:1-44:71","name":"HospitalizationLocations","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"79","s":[{"value":["/*returns list of all locations within an encounter, including locations for immediately prior ED visit.*/","define function ","\"HospitalizationLocations\"","(","Encounter"," "]},{"r":"47","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"78","s":[{"r":"78","s":[{"s":[{"r":"49","s":[{"r":"48","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"65","s":[{"value":["EDVisit",": "]},{"r":"64","s":[{"value":["Last","("]},{"r":"63","s":[{"s":[{"r":"51","s":[{"r":"50","s":[{"r":"50","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"58","s":[{"value":["where "]},{"r":"58","s":[{"r":"53","s":[{"r":"52","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"53","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"58","s":[{"value":["ends "]},{"r":"57","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"56","s":[{"value":["start of "]},{"r":"55","s":[{"r":"54","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"55","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"62","s":[{"value":["sort by \n  \t\t\t"]},{"r":"61","s":[{"r":"60","s":[{"value":["end of "]},{"r":"59","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"77","s":[{"value":["return "]},{"r":"76","s":[{"value":["if "]},{"r":"67","s":[{"r":"66","s":[{"value":["EDVisit"]}]},{"value":[" is null"]}]},{"value":[" then "]},{"r":"69","s":[{"r":"68","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"69","s":[{"value":["facilityLocations"]}]}]},{"value":[" \n  \t\telse "]},{"r":"75","s":[{"value":["flatten "]},{"r":"74","s":[{"value":["{ "]},{"r":"71","s":[{"r":"70","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"71","s":[{"value":["facilityLocations"]}]}]},{"value":[", "]},{"r":"73","s":[{"r":"72","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"73","s":[{"value":["facilityLocations"]}]}]},{"value":[" }"]}]}]}]}]}]}]}]}}],"expression":{"localId":"78","locator":"37:3-44:71","type":"Query","source":[{"localId":"49","locator":"37:3-37:17","alias":"Visit","expression":{"localId":"48","locator":"37:3-37:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"65","locator":"38:8-42:4","identifier":"EDVisit","expression":{"localId":"64","locator":"38:17-42:4","type":"Last","source":{"localId":"63","locator":"38:22-41:26","type":"Query","source":[{"localId":"51","locator":"38:22-38:82","alias":"LastED","expression":{"localId":"50","locator":"38:22-38:75","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"38:47-38:74","name":"Emergency Department Visit","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"58","locator":"39:6-39:95","type":"And","operand":[{"locator":"39:39-39:52","type":"In","operand":[{"locator":"39:34-39:37","type":"End","operand":{"localId":"53","locator":"39:12-39:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"39:39-39:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"39:67-39:95","type":"Subtract","operand":[{"localId":"56","locator":"39:67-39:95","type":"Start","operand":{"localId":"55","locator":"39:76-39:95","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"57","locator":"39:39-39:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"56","locator":"39:67-39:95","type":"Start","operand":{"localId":"55","locator":"39:76-39:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"39:39-39:52","type":"Not","operand":{"locator":"39:39-39:52","type":"IsNull","operand":{"localId":"56","locator":"39:67-39:95","type":"Start","operand":{"localId":"55","locator":"39:76-39:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"62","locator":"40:6-41:26","by":[{"localId":"61","locator":"41:6-41:26","direction":"asc","type":"ByExpression","expression":{"localId":"60","locator":"41:6-41:26","type":"End","operand":{"localId":"59","locator":"41:13-41:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"77","locator":"43:4-44:71","expression":{"localId":"76","locator":"43:11-44:71","type":"If","condition":{"localId":"67","locator":"43:14-43:28","type":"IsNull","operand":{"localId":"66","locator":"43:14-43:20","name":"EDVisit","type":"QueryLetRef"}},"then":{"localId":"69","locator":"43:35-43:57","path":"facilityLocations","scope":"Visit","type":"Property"},"else":{"localId":"75","locator":"44:10-44:71","type":"Flatten","operand":{"localId":"74","locator":"44:18-44:71","type":"List","element":[{"localId":"71","locator":"44:20-44:44","path":"facilityLocations","type":"Property","source":{"localId":"70","locator":"44:20-44:26","name":"EDVisit","type":"QueryLetRef"}},{"localId":"73","locator":"44:47-44:69","path":"facilityLocations","scope":"Visit","type":"Property"}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"47","locator":"36:54-36:75","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"96","locator":"47:1-51:18","name":"EmergencyDepartmentArrivalTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"96","s":[{"value":["/*Returns the arrival time in the ED for the encounter.*/","define function ","\"EmergencyDepartmentArrivalTime\"","(","Encounter"," "]},{"r":"80","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"95","s":[{"r":"95","s":[{"value":["start of "]},{"r":"94","s":[{"r":"93","s":[{"value":["First","("]},{"r":"92","s":[{"s":[{"r":"83","s":[{"r":"82","s":[{"value":["("]},{"r":"82","s":[{"value":["\"HospitalizationLocations\"","("]},{"r":"81","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n  \t\t"]},{"r":"87","s":[{"value":["where "]},{"r":"87","s":[{"r":"85","s":[{"r":"84","s":[{"value":["HospitalLocation"]}]},{"value":["."]},{"r":"85","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"86","s":[{"value":["\"Emergency Department Visit\""]}]}]}]},{"value":["\n  \t\t"]},{"r":"91","s":[{"value":["sort by "]},{"r":"90","s":[{"r":"89","s":[{"value":["start of "]},{"r":"88","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"94","s":[{"value":["locationPeriod"]}]}]}]}]}]}}],"expression":{"localId":"95","locator":"48:3-51:18","type":"Start","operand":{"localId":"94","locator":"48:12-51:18","path":"locationPeriod","type":"Property","source":{"localId":"93","locator":"48:12-51:3","type":"First","source":{"localId":"92","locator":"48:18-50:35","type":"Query","source":[{"localId":"83","locator":"48:18-48:72","alias":"HospitalLocation","expression":{"localId":"82","locator":"48:18-48:56","name":"HospitalizationLocations","type":"FunctionRef","operand":[{"localId":"81","locator":"48:46-48:54","name":"Encounter","type":"OperandRef"}]}}],"relationship":[],"where":{"localId":"87","locator":"49:5-49:63","type":"InValueSet","code":{"localId":"85","locator":"49:11-49:31","path":"code","scope":"HospitalLocation","type":"Property"},"valueset":{"localId":"86","locator":"49:36-49:63","name":"Emergency Department Visit","type":"ValueSetRef"}},"sort":{"localId":"91","locator":"50:5-50:35","by":[{"localId":"90","locator":"50:13-50:35","direction":"asc","type":"ByExpression","expression":{"localId":"89","locator":"50:13-50:35","type":"Start","operand":{"localId":"88","locator":"50:22-50:35","name":"locationPeriod","type":"IdentifierRef"}}}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"80","locator":"47:60-47:81","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"131","locator":"64:1-72:31","name":"Hospitalization","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"131","s":[{"value":["/*Hospitalization returns the total interval for admission to discharge for the given encounter, or for the admission of any immediately prior emergency department visit to the discharge of the given encounter.*/","define function ","\"Hospitalization\"","(","Encounter"," "]},{"r":"99","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"130","s":[{"r":"130","s":[{"s":[{"r":"101","s":[{"r":"100","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"117","s":[{"value":["EDVisit",": "]},{"r":"116","s":[{"value":["Last","("]},{"r":"115","s":[{"s":[{"r":"103","s":[{"r":"102","s":[{"r":"102","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"110","s":[{"value":["where "]},{"r":"110","s":[{"r":"105","s":[{"r":"104","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"105","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"110","s":[{"value":["ends "]},{"r":"109","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"108","s":[{"value":["start of "]},{"r":"107","s":[{"r":"106","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"107","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"114","s":[{"value":["sort by \n  \t\t\t"]},{"r":"113","s":[{"r":"112","s":[{"value":["end of "]},{"r":"111","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"129","s":[{"value":["return "]},{"r":"128","s":[{"value":["Interval["]},{"r":"124","s":[{"value":["Coalesce","("]},{"r":"120","s":[{"value":["start of "]},{"r":"119","s":[{"r":"118","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"119","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"123","s":[{"value":["start of "]},{"r":"122","s":[{"r":"121","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"122","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]},{"value":[", \n  \t"]},{"r":"127","s":[{"value":["end of "]},{"r":"126","s":[{"r":"125","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"126","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["]"]}]}]}]}]}]}}],"expression":{"localId":"130","locator":"65:3-72:31","type":"Query","source":[{"localId":"101","locator":"65:3-65:17","alias":"Visit","expression":{"localId":"100","locator":"65:3-65:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"117","locator":"66:8-70:4","identifier":"EDVisit","expression":{"localId":"116","locator":"66:17-70:4","type":"Last","source":{"localId":"115","locator":"66:22-69:26","type":"Query","source":[{"localId":"103","locator":"66:22-66:82","alias":"LastED","expression":{"localId":"102","locator":"66:22-66:75","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"66:47-66:74","name":"Emergency Department Visit","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"110","locator":"67:6-67:95","type":"And","operand":[{"locator":"67:39-67:52","type":"In","operand":[{"locator":"67:34-67:37","type":"End","operand":{"localId":"105","locator":"67:12-67:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"67:39-67:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"67:67-67:95","type":"Subtract","operand":[{"localId":"108","locator":"67:67-67:95","type":"Start","operand":{"localId":"107","locator":"67:76-67:95","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"109","locator":"67:39-67:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"108","locator":"67:67-67:95","type":"Start","operand":{"localId":"107","locator":"67:76-67:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"67:39-67:52","type":"Not","operand":{"locator":"67:39-67:52","type":"IsNull","operand":{"localId":"108","locator":"67:67-67:95","type":"Start","operand":{"localId":"107","locator":"67:76-67:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"114","locator":"68:6-69:26","by":[{"localId":"113","locator":"69:6-69:26","direction":"asc","type":"ByExpression","expression":{"localId":"112","locator":"69:6-69:26","type":"End","operand":{"localId":"111","locator":"69:13-69:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"129","locator":"71:4-72:31","expression":{"localId":"128","locator":"71:11-72:31","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"124","locator":"71:20-71:91","type":"Coalesce","operand":[{"localId":"120","locator":"71:29-71:59","type":"Start","operand":{"localId":"119","locator":"71:38-71:59","path":"relevantPeriod","type":"Property","source":{"localId":"118","locator":"71:38-71:44","name":"EDVisit","type":"QueryLetRef"}}},{"localId":"123","locator":"71:62-71:90","type":"Start","operand":{"localId":"122","locator":"71:71-71:90","path":"relevantPeriod","scope":"Visit","type":"Property"}}]},"high":{"localId":"127","locator":"72:4-72:30","type":"End","operand":{"localId":"126","locator":"72:11-72:30","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"99","locator":"64:45-64:66","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"134","locator":"54:1-55:39","name":"HospitalAdmissionTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"134","s":[{"value":["/*Returns admission time for an encounter or for immediately prior emergency department visit.*/","define function ","\"HospitalAdmissionTime\"","(","Encounter"," "]},{"r":"97","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"133","s":[{"r":"133","s":[{"value":["start of "]},{"r":"132","s":[{"value":["\"Hospitalization\"","("]},{"r":"98","s":[{"value":["Encounter"]}]},{"value":[")"]}]}]}]}]}}],"expression":{"localId":"133","locator":"55:3-55:39","type":"Start","operand":{"localId":"132","locator":"55:12-55:39","name":"Hospitalization","type":"FunctionRef","operand":[{"localId":"98","locator":"55:30-55:38","name":"Encounter","type":"OperandRef"}]}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"97","locator":"54:51-54:72","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"147","locator":"58:1-61:18","name":"HospitalArrivalTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"147","s":[{"value":["/*Returns earliest arrival time for an encounter including any prior ED visit.*/","define function ","\"HospitalArrivalTime\"","(","Encounter"," "]},{"r":"135","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"146","s":[{"r":"146","s":[{"value":["start of "]},{"r":"145","s":[{"r":"144","s":[{"value":["First","("]},{"r":"143","s":[{"s":[{"r":"138","s":[{"r":"137","s":[{"value":["("]},{"r":"137","s":[{"value":["\"HospitalizationLocations\"","("]},{"r":"136","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n  \t\t"]},{"r":"142","s":[{"value":["sort by "]},{"r":"141","s":[{"r":"140","s":[{"value":["start of "]},{"r":"139","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"145","s":[{"value":["locationPeriod"]}]}]}]}]}]}}],"expression":{"localId":"146","locator":"59:3-61:18","type":"Start","operand":{"localId":"145","locator":"59:12-61:18","path":"locationPeriod","type":"Property","source":{"localId":"144","locator":"59:12-61:3","type":"First","source":{"localId":"143","locator":"59:18-60:35","type":"Query","source":[{"localId":"138","locator":"59:18-59:72","alias":"HospitalLocation","expression":{"localId":"137","locator":"59:18-59:56","name":"HospitalizationLocations","type":"FunctionRef","operand":[{"localId":"136","locator":"59:46-59:54","name":"Encounter","type":"OperandRef"}]}}],"relationship":[],"sort":{"localId":"142","locator":"60:5-60:35","by":[{"localId":"141","locator":"60:13-60:35","direction":"asc","type":"ByExpression","expression":{"localId":"140","locator":"60:13-60:35","type":"Start","operand":{"localId":"139","locator":"60:22-60:35","name":"locationPeriod","type":"IdentifierRef"}}}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"135","locator":"58:49-58:70","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"154","locator":"75:1-76:44","name":"HospitalizationLengthofStay","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"154","s":[{"value":["/*Returns the length of stay in days (i.e. the number of days between admission and discharge) for the given encounter, or from the admission of any immediately prior emergency department visit to the discharge of the encounter*/","define function ","\"HospitalizationLengthofStay\"","(","Encounter"," "]},{"r":"150","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"153","s":[{"r":"153","s":[{"value":["LengthInDays","("]},{"r":"152","s":[{"value":["\"Hospitalization\"","("]},{"r":"151","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"153","locator":"76:3-76:44","name":"LengthInDays","type":"FunctionRef","operand":[{"localId":"152","locator":"76:16-76:43","name":"Hospitalization","type":"FunctionRef","operand":[{"localId":"151","locator":"76:34-76:42","name":"Encounter","type":"OperandRef"}]}]},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"150","locator":"75:57-75:78","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"167","locator":"79:1-82:18","name":"HospitalDepartureTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"167","s":[{"value":["/*Returns the latest departure time for encounter including any prior ED visit.*/","define function ","\"HospitalDepartureTime\"","(","Encounter"," "]},{"r":"155","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"166","s":[{"r":"166","s":[{"value":["end of "]},{"r":"165","s":[{"r":"164","s":[{"value":["Last","("]},{"r":"163","s":[{"s":[{"r":"158","s":[{"r":"157","s":[{"value":["("]},{"r":"157","s":[{"value":["\"HospitalizationLocations\"","("]},{"r":"156","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n  \t\t"]},{"r":"162","s":[{"value":["sort by "]},{"r":"161","s":[{"r":"160","s":[{"value":["start of "]},{"r":"159","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"165","s":[{"value":["locationPeriod"]}]}]}]}]}]}}],"expression":{"localId":"166","locator":"80:3-82:18","type":"End","operand":{"localId":"165","locator":"80:10-82:18","path":"locationPeriod","type":"Property","source":{"localId":"164","locator":"80:10-82:3","type":"Last","source":{"localId":"163","locator":"80:15-81:35","type":"Query","source":[{"localId":"158","locator":"80:15-80:69","alias":"HospitalLocation","expression":{"localId":"157","locator":"80:15-80:53","name":"HospitalizationLocations","type":"FunctionRef","operand":[{"localId":"156","locator":"80:43-80:51","name":"Encounter","type":"OperandRef"}]}}],"relationship":[],"sort":{"localId":"162","locator":"81:5-81:35","by":[{"localId":"161","locator":"81:13-81:35","direction":"asc","type":"ByExpression","expression":{"localId":"160","locator":"81:13-81:35","type":"Start","operand":{"localId":"159","locator":"81:22-81:35","name":"locationPeriod","type":"IdentifierRef"}}}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"155","locator":"79:51-79:72","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"172","locator":"85:1-86:33","name":"HospitalDischargeTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"172","s":[{"value":["/*Hospital Discharge Time returns the discharge time for an encounter*/","define function ","\"HospitalDischargeTime\"","(","Encounter"," "]},{"r":"168","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"171","s":[{"r":"171","s":[{"value":["end of "]},{"r":"170","s":[{"r":"169","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"170","s":[{"value":["relevantPeriod"]}]}]}]}]}]}}],"expression":{"localId":"171","locator":"86:3-86:33","type":"End","operand":{"localId":"170","locator":"86:10-86:33","path":"relevantPeriod","type":"Property","source":{"localId":"169","locator":"86:10-86:18","name":"Encounter","type":"OperandRef"}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"168","locator":"85:51-85:72","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"245","locator":"89:1-109:31","name":"HospitalizationWithObservationAndOutpatientSurgeryService","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"245","s":[{"value":["/*Hospitalization with Observation and Outpatient Surgery Service returns the total interval from the start of any immediately prior emergency department visit, outpatient surgery visit or observation visit to the discharge of the given encounter.*/","define function ","\"HospitalizationWithObservationAndOutpatientSurgeryService\"","(","Encounter"," "]},{"r":"173","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"244","s":[{"r":"244","s":[{"s":[{"r":"175","s":[{"r":"174","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"191","s":[{"value":["ObsVisit",": "]},{"r":"190","s":[{"value":["Last","("]},{"r":"189","s":[{"s":[{"r":"177","s":[{"r":"176","s":[{"r":"176","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Observation Services\""]}]},{"value":["]"]}]}]},{"value":[" ","LastObs"]}]}]},{"value":["\n  \t\t\t"]},{"r":"184","s":[{"value":["where "]},{"r":"184","s":[{"r":"179","s":[{"r":"178","s":[{"value":["LastObs"]}]},{"value":["."]},{"r":"179","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"184","s":[{"value":["ends "]},{"r":"183","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"182","s":[{"value":["start of "]},{"r":"181","s":[{"r":"180","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"181","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"188","s":[{"value":["sort by \n  \t\t\t"]},{"r":"187","s":[{"r":"186","s":[{"value":["end of "]},{"r":"185","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]},{"value":[",\n  \t"]},{"r":"199","s":[{"value":["VisitStart",": "]},{"r":"198","s":[{"value":["Coalesce","("]},{"r":"194","s":[{"value":["start of "]},{"r":"193","s":[{"r":"192","s":[{"value":["ObsVisit"]}]},{"value":["."]},{"r":"193","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"197","s":[{"value":["start of "]},{"r":"196","s":[{"r":"195","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"196","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]}]},{"value":[",\n  \t"]},{"r":"213","s":[{"value":["EDVisit",": "]},{"r":"212","s":[{"value":["Last","("]},{"r":"211","s":[{"s":[{"r":"201","s":[{"r":"200","s":[{"r":"200","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"206","s":[{"value":["where "]},{"r":"206","s":[{"r":"203","s":[{"r":"202","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"203","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"206","s":[{"value":["ends "]},{"r":"205","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"204","s":[{"value":["VisitStart"]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"210","s":[{"value":["sort by \n  \t\t\t"]},{"r":"209","s":[{"r":"208","s":[{"value":["end of "]},{"r":"207","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]},{"value":[",\n  \t"]},{"r":"219","s":[{"value":["VisitStartWithED",": "]},{"r":"218","s":[{"value":["Coalesce","("]},{"r":"216","s":[{"value":["start of "]},{"r":"215","s":[{"r":"214","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"215","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"217","s":[{"value":["VisitStart"]}]},{"value":[")"]}]}]},{"value":[",\n  \t"]},{"r":"233","s":[{"value":["OutpatientSurgeryVisit",": "]},{"r":"232","s":[{"value":["Last","("]},{"r":"231","s":[{"s":[{"r":"221","s":[{"r":"220","s":[{"r":"220","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Outpatient Surgery Service\""]}]},{"value":["]"]}]}]},{"value":[" ","LastSurgeryOP"]}]}]},{"value":["\n  \t\t\t"]},{"r":"226","s":[{"value":["where "]},{"r":"226","s":[{"r":"223","s":[{"r":"222","s":[{"value":["LastSurgeryOP"]}]},{"value":["."]},{"r":"223","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"226","s":[{"value":["ends "]},{"r":"225","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"224","s":[{"value":["VisitStartWithED"]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"230","s":[{"value":["sort by \n  \t\t\t"]},{"r":"229","s":[{"r":"228","s":[{"value":["end of "]},{"r":"227","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"243","s":[{"value":["return "]},{"r":"242","s":[{"value":["Interval["]},{"r":"238","s":[{"value":["Coalesce","("]},{"r":"236","s":[{"value":["start of "]},{"r":"235","s":[{"r":"234","s":[{"value":["OutpatientSurgeryVisit"]}]},{"value":["."]},{"r":"235","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"237","s":[{"value":["VisitStartWithED"]}]},{"value":[")"]}]},{"value":[", \n  \t"]},{"r":"241","s":[{"value":["end of "]},{"r":"240","s":[{"r":"239","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"240","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["]"]}]}]}]}]}]}}],"expression":{"localId":"244","locator":"90:3-109:31","type":"Query","source":[{"localId":"175","locator":"90:3-90:17","alias":"Visit","expression":{"localId":"174","locator":"90:3-90:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"191","locator":"91:8-95:4","identifier":"ObsVisit","expression":{"localId":"190","locator":"91:18-95:4","type":"Last","source":{"localId":"189","locator":"91:23-94:26","type":"Query","source":[{"localId":"177","locator":"91:23-91:78","alias":"LastObs","expression":{"localId":"176","locator":"91:23-91:70","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"91:48-91:69","name":"Observation Services","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"184","locator":"92:6-92:96","type":"And","operand":[{"locator":"92:40-92:53","type":"In","operand":[{"locator":"92:35-92:38","type":"End","operand":{"localId":"179","locator":"92:12-92:33","path":"relevantPeriod","scope":"LastObs","type":"Property"}},{"locator":"92:40-92:53","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"92:68-92:96","type":"Subtract","operand":[{"localId":"182","locator":"92:68-92:96","type":"Start","operand":{"localId":"181","locator":"92:77-92:96","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"183","locator":"92:40-92:45","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"182","locator":"92:68-92:96","type":"Start","operand":{"localId":"181","locator":"92:77-92:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"92:40-92:53","type":"Not","operand":{"locator":"92:40-92:53","type":"IsNull","operand":{"localId":"182","locator":"92:68-92:96","type":"Start","operand":{"localId":"181","locator":"92:77-92:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"188","locator":"93:6-94:26","by":[{"localId":"187","locator":"94:6-94:26","direction":"asc","type":"ByExpression","expression":{"localId":"186","locator":"94:6-94:26","type":"End","operand":{"localId":"185","locator":"94:13-94:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}},{"localId":"199","locator":"96:4-96:88","identifier":"VisitStart","expression":{"localId":"198","locator":"96:16-96:88","type":"Coalesce","operand":[{"localId":"194","locator":"96:25-96:56","type":"Start","operand":{"localId":"193","locator":"96:34-96:56","path":"relevantPeriod","type":"Property","source":{"localId":"192","locator":"96:34-96:41","name":"ObsVisit","type":"QueryLetRef"}}},{"localId":"197","locator":"96:59-96:87","type":"Start","operand":{"localId":"196","locator":"96:68-96:87","path":"relevantPeriod","scope":"Visit","type":"Property"}}]}},{"localId":"213","locator":"97:4-101:4","identifier":"EDVisit","expression":{"localId":"212","locator":"97:13-101:4","type":"Last","source":{"localId":"211","locator":"97:18-100:26","type":"Query","source":[{"localId":"201","locator":"97:18-97:78","alias":"LastED","expression":{"localId":"200","locator":"97:18-97:71","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"97:43-97:70","name":"Emergency Department Visit","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"206","locator":"98:6-98:76","type":"And","operand":[{"locator":"98:39-98:52","type":"In","operand":[{"locator":"98:34-98:37","type":"End","operand":{"localId":"203","locator":"98:12-98:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"98:39-98:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"98:67-98:76","type":"Subtract","operand":[{"localId":"204","locator":"98:67-98:76","name":"VisitStart","type":"QueryLetRef"},{"localId":"205","locator":"98:39-98:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"204","locator":"98:67-98:76","name":"VisitStart","type":"QueryLetRef"}}]},{"locator":"98:39-98:52","type":"Not","operand":{"locator":"98:39-98:52","type":"IsNull","operand":{"localId":"204","locator":"98:67-98:76","name":"VisitStart","type":"QueryLetRef"}}}]},"sort":{"localId":"210","locator":"99:6-100:26","by":[{"localId":"209","locator":"100:6-100:26","direction":"asc","type":"ByExpression","expression":{"localId":"208","locator":"100:6-100:26","type":"End","operand":{"localId":"207","locator":"100:13-100:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}},{"localId":"219","locator":"102:4-102:74","identifier":"VisitStartWithED","expression":{"localId":"218","locator":"102:22-102:74","type":"Coalesce","operand":[{"localId":"216","locator":"102:31-102:61","type":"Start","operand":{"localId":"215","locator":"102:40-102:61","path":"relevantPeriod","type":"Property","source":{"localId":"214","locator":"102:40-102:46","name":"EDVisit","type":"QueryLetRef"}}},{"localId":"217","locator":"102:64-102:73","name":"VisitStart","type":"QueryLetRef"}]}},{"localId":"233","locator":"103:4-107:4","identifier":"OutpatientSurgeryVisit","expression":{"localId":"232","locator":"103:28-107:4","type":"Last","source":{"localId":"231","locator":"103:33-106:26","type":"Query","source":[{"localId":"221","locator":"103:33-103:100","alias":"LastSurgeryOP","expression":{"localId":"220","locator":"103:33-103:86","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"103:58-103:85","name":"Outpatient Surgery Service","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"226","locator":"104:6-104:89","type":"And","operand":[{"locator":"104:46-104:59","type":"In","operand":[{"locator":"104:41-104:44","type":"End","operand":{"localId":"223","locator":"104:12-104:39","path":"relevantPeriod","scope":"LastSurgeryOP","type":"Property"}},{"locator":"104:46-104:59","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"104:74-104:89","type":"Subtract","operand":[{"localId":"224","locator":"104:74-104:89","name":"VisitStartWithED","type":"QueryLetRef"},{"localId":"225","locator":"104:46-104:51","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"224","locator":"104:74-104:89","name":"VisitStartWithED","type":"QueryLetRef"}}]},{"locator":"104:46-104:59","type":"Not","operand":{"locator":"104:46-104:59","type":"IsNull","operand":{"localId":"224","locator":"104:74-104:89","name":"VisitStartWithED","type":"QueryLetRef"}}}]},"sort":{"localId":"230","locator":"105:6-106:26","by":[{"localId":"229","locator":"106:6-106:26","direction":"asc","type":"ByExpression","expression":{"localId":"228","locator":"106:6-106:26","type":"End","operand":{"localId":"227","locator":"106:13-106:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"243","locator":"108:4-109:31","expression":{"localId":"242","locator":"108:11-109:31","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"238","locator":"108:20-108:93","type":"Coalesce","operand":[{"localId":"236","locator":"108:29-108:74","type":"Start","operand":{"localId":"235","locator":"108:38-108:74","path":"relevantPeriod","type":"Property","source":{"localId":"234","locator":"108:38-108:59","name":"OutpatientSurgeryVisit","type":"QueryLetRef"}}},{"localId":"237","locator":"108:77-108:92","name":"VisitStartWithED","type":"QueryLetRef"}]},"high":{"localId":"241","locator":"109:4-109:30","type":"End","operand":{"localId":"240","locator":"109:11-109:30","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"173","locator":"89:87-89:108","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"298","locator":"112:1-126:31","name":"HospitalizationWithObservation","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"298","s":[{"value":["/*Hospitalization with Observation returns the total interval from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/","define function ","\"HospitalizationWithObservation\"","(","Encounter"," "]},{"r":"246","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"297","s":[{"r":"297","s":[{"s":[{"r":"248","s":[{"r":"247","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"264","s":[{"value":["ObsVisit",": "]},{"r":"263","s":[{"value":["Last","("]},{"r":"262","s":[{"s":[{"r":"250","s":[{"r":"249","s":[{"r":"249","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Observation Services\""]}]},{"value":["]"]}]}]},{"value":[" ","LastObs"]}]}]},{"value":["\n  \t\t\t"]},{"r":"257","s":[{"value":["where "]},{"r":"257","s":[{"r":"252","s":[{"r":"251","s":[{"value":["LastObs"]}]},{"value":["."]},{"r":"252","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"257","s":[{"value":["ends "]},{"r":"256","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"255","s":[{"value":["start of "]},{"r":"254","s":[{"r":"253","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"254","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"261","s":[{"value":["sort by \n  \t\t\t"]},{"r":"260","s":[{"r":"259","s":[{"value":["end of "]},{"r":"258","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]},{"value":[",\n  \t"]},{"r":"272","s":[{"value":["VisitStart",": "]},{"r":"271","s":[{"value":["Coalesce","("]},{"r":"267","s":[{"value":["start of "]},{"r":"266","s":[{"r":"265","s":[{"value":["ObsVisit"]}]},{"value":["."]},{"r":"266","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"270","s":[{"value":["start of "]},{"r":"269","s":[{"r":"268","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"269","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]}]},{"value":[",\n  \t"]},{"r":"286","s":[{"value":["EDVisit",": "]},{"r":"285","s":[{"value":["Last","("]},{"r":"284","s":[{"s":[{"r":"274","s":[{"r":"273","s":[{"r":"273","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"279","s":[{"value":["where "]},{"r":"279","s":[{"r":"276","s":[{"r":"275","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"276","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"279","s":[{"value":["ends "]},{"r":"278","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"277","s":[{"value":["VisitStart"]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"283","s":[{"value":["sort by \n  \t\t\t"]},{"r":"282","s":[{"r":"281","s":[{"value":["end of "]},{"r":"280","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"296","s":[{"value":["return "]},{"r":"295","s":[{"value":["Interval["]},{"r":"291","s":[{"value":["Coalesce","("]},{"r":"289","s":[{"value":["start of "]},{"r":"288","s":[{"r":"287","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"288","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"290","s":[{"value":["VisitStart"]}]},{"value":[")"]}]},{"value":[", \n  \t"]},{"r":"294","s":[{"value":["end of "]},{"r":"293","s":[{"r":"292","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"293","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["]"]}]}]}]}]}]}}],"expression":{"localId":"297","locator":"113:3-126:31","type":"Query","source":[{"localId":"248","locator":"113:3-113:17","alias":"Visit","expression":{"localId":"247","locator":"113:3-113:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"264","locator":"114:8-118:4","identifier":"ObsVisit","expression":{"localId":"263","locator":"114:18-118:4","type":"Last","source":{"localId":"262","locator":"114:23-117:26","type":"Query","source":[{"localId":"250","locator":"114:23-114:78","alias":"LastObs","expression":{"localId":"249","locator":"114:23-114:70","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"114:48-114:69","name":"Observation Services","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"257","locator":"115:6-115:96","type":"And","operand":[{"locator":"115:40-115:53","type":"In","operand":[{"locator":"115:35-115:38","type":"End","operand":{"localId":"252","locator":"115:12-115:33","path":"relevantPeriod","scope":"LastObs","type":"Property"}},{"locator":"115:40-115:53","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"115:68-115:96","type":"Subtract","operand":[{"localId":"255","locator":"115:68-115:96","type":"Start","operand":{"localId":"254","locator":"115:77-115:96","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"256","locator":"115:40-115:45","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"255","locator":"115:68-115:96","type":"Start","operand":{"localId":"254","locator":"115:77-115:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"115:40-115:53","type":"Not","operand":{"locator":"115:40-115:53","type":"IsNull","operand":{"localId":"255","locator":"115:68-115:96","type":"Start","operand":{"localId":"254","locator":"115:77-115:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"261","locator":"116:6-117:26","by":[{"localId":"260","locator":"117:6-117:26","direction":"asc","type":"ByExpression","expression":{"localId":"259","locator":"117:6-117:26","type":"End","operand":{"localId":"258","locator":"117:13-117:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}},{"localId":"272","locator":"119:4-119:88","identifier":"VisitStart","expression":{"localId":"271","locator":"119:16-119:88","type":"Coalesce","operand":[{"localId":"267","locator":"119:25-119:56","type":"Start","operand":{"localId":"266","locator":"119:34-119:56","path":"relevantPeriod","type":"Property","source":{"localId":"265","locator":"119:34-119:41","name":"ObsVisit","type":"QueryLetRef"}}},{"localId":"270","locator":"119:59-119:87","type":"Start","operand":{"localId":"269","locator":"119:68-119:87","path":"relevantPeriod","scope":"Visit","type":"Property"}}]}},{"localId":"286","locator":"120:4-124:4","identifier":"EDVisit","expression":{"localId":"285","locator":"120:13-124:4","type":"Last","source":{"localId":"284","locator":"120:18-123:26","type":"Query","source":[{"localId":"274","locator":"120:18-120:78","alias":"LastED","expression":{"localId":"273","locator":"120:18-120:71","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"120:43-120:70","name":"Emergency Department Visit","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"279","locator":"121:6-121:76","type":"And","operand":[{"locator":"121:39-121:52","type":"In","operand":[{"locator":"121:34-121:37","type":"End","operand":{"localId":"276","locator":"121:12-121:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"121:39-121:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"121:67-121:76","type":"Subtract","operand":[{"localId":"277","locator":"121:67-121:76","name":"VisitStart","type":"QueryLetRef"},{"localId":"278","locator":"121:39-121:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"277","locator":"121:67-121:76","name":"VisitStart","type":"QueryLetRef"}}]},{"locator":"121:39-121:52","type":"Not","operand":{"locator":"121:39-121:52","type":"IsNull","operand":{"localId":"277","locator":"121:67-121:76","name":"VisitStart","type":"QueryLetRef"}}}]},"sort":{"localId":"283","locator":"122:6-123:26","by":[{"localId":"282","locator":"123:6-123:26","direction":"asc","type":"ByExpression","expression":{"localId":"281","locator":"123:6-123:26","type":"End","operand":{"localId":"280","locator":"123:13-123:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"296","locator":"125:4-126:31","expression":{"localId":"295","locator":"125:11-126:31","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"291","locator":"125:20-125:72","type":"Coalesce","operand":[{"localId":"289","locator":"125:29-125:59","type":"Start","operand":{"localId":"288","locator":"125:38-125:59","path":"relevantPeriod","type":"Property","source":{"localId":"287","locator":"125:38-125:44","name":"EDVisit","type":"QueryLetRef"}}},{"localId":"290","locator":"125:62-125:71","name":"VisitStart","type":"QueryLetRef"}]},"high":{"localId":"294","locator":"126:4-126:30","type":"End","operand":{"localId":"293","locator":"126:11-126:30","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"246","locator":"112:60-112:81","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"303","locator":"129:1-130:61","name":"HospitalizationWithObservationLengthofStay","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"303","s":[{"value":["/*Hospitalization with Observation Length of Stay returns the length in days from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/","define function ","\"HospitalizationWithObservationLengthofStay\"","(","Encounter"," "]},{"r":"299","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"302","s":[{"r":"302","s":[{"value":["\"LengthInDays\"","("]},{"r":"301","s":[{"value":["\"HospitalizationWithObservation\"","("]},{"r":"300","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"302","locator":"130:3-130:61","name":"LengthInDays","type":"FunctionRef","operand":[{"localId":"301","locator":"130:18-130:60","name":"HospitalizationWithObservation","type":"FunctionRef","operand":[{"localId":"300","locator":"130:51-130:59","name":"Encounter","type":"OperandRef"}]}]},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"299","locator":"129:72-129:93","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"324","locator":"133:1-138:3","name":"FirstInpatientIntensiveCareUnit","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"324","s":[{"value":["/*First Inpatient Intensive Care Unit returns the first intensive care unit for the given encounter, without considering any immediately prior emergency department visit.*/","define function ","\"FirstInpatientIntensiveCareUnit\"","(","Encounter"," "]},{"r":"304","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"323","s":[{"r":"323","s":[{"value":["First","("]},{"r":"322","s":[{"s":[{"r":"307","s":[{"r":"306","s":[{"value":["("]},{"r":"306","s":[{"r":"305","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"306","s":[{"value":["facilityLocations"]}]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n      "]},{"r":"317","s":[{"value":["where "]},{"r":"317","s":[{"r":"311","s":[{"r":"309","s":[{"r":"308","s":[{"value":["HospitalLocation"]}]},{"value":["."]},{"r":"309","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"310","s":[{"value":["\"Intensive Care Unit\""]}]}]},{"value":["\n        and "]},{"r":"316","s":[{"r":"313","s":[{"r":"312","s":[{"value":["HospitalLocation"]}]},{"value":["."]},{"r":"313","s":[{"value":["locationPeriod"]}]}]},{"r":"316","value":[" ","during"," "]},{"r":"315","s":[{"r":"314","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"315","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n      "]},{"r":"321","s":[{"value":["sort by "]},{"r":"320","s":[{"r":"319","s":[{"value":["start of "]},{"r":"318","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]}]}]}}],"expression":{"localId":"323","locator":"134:3-138:3","type":"First","source":{"localId":"322","locator":"134:9-137:37","type":"Query","source":[{"localId":"307","locator":"134:9-134:53","alias":"HospitalLocation","expression":{"localId":"306","locator":"134:9-134:37","path":"facilityLocations","type":"Property","source":{"localId":"305","locator":"134:10-134:18","name":"Encounter","type":"OperandRef"}}}],"relationship":[],"where":{"localId":"317","locator":"135:7-136:75","type":"And","operand":[{"localId":"311","locator":"135:13-135:58","type":"InValueSet","code":{"localId":"309","locator":"135:13-135:33","path":"code","scope":"HospitalLocation","type":"Property"},"valueset":{"localId":"310","locator":"135:38-135:58","name":"Intensive Care Unit","type":"ValueSetRef"}},{"localId":"316","locator":"136:13-136:75","type":"IncludedIn","operand":[{"localId":"313","locator":"136:13-136:43","path":"locationPeriod","scope":"HospitalLocation","type":"Property"},{"localId":"315","locator":"136:52-136:75","path":"relevantPeriod","type":"Property","source":{"localId":"314","locator":"136:52-136:60","name":"Encounter","type":"OperandRef"}}]}]},"sort":{"localId":"321","locator":"137:7-137:37","by":[{"localId":"320","locator":"137:15-137:37","direction":"asc","type":"ByExpression","expression":{"localId":"319","locator":"137:15-137:37","type":"Start","operand":{"localId":"318","locator":"137:24-137:37","name":"locationPeriod","type":"IdentifierRef"}}}]}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"304","locator":"133:61-133:82","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"342","locator":"141:1-144:35","name":"NormalizeInterval","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"342","s":[{"value":["/*Given a datetime and a period, returns the period (if a period is provided) or the interval beginning and ending on the datetime (if a datetime is provided)*/","define function ","\"NormalizeInterval\"","(","pointInTime"," "]},{"r":"325","s":[{"value":["DateTime"]}]},{"value":[", ","period"," "]},{"r":"327","s":[{"value":["Interval\u003c"]},{"r":"326","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"341","s":[{"r":"341","s":[{"value":["if "]},{"r":"329","s":[{"r":"328","s":[{"value":["pointInTime"]}]},{"value":[" is not null"]}]},{"value":[" then "]},{"r":"332","s":[{"value":["Interval["]},{"r":"330","s":[{"value":["pointInTime"]}]},{"value":[", "]},{"r":"331","s":[{"value":["pointInTime"]}]},{"value":["]"]}]},{"value":["\n    else "]},{"r":"340","s":[{"value":["if "]},{"r":"334","s":[{"r":"333","s":[{"value":["period"]}]},{"value":[" is not null"]}]},{"value":[" then "]},{"r":"335","s":[{"value":["period"]}]},{"value":[" \n    else "]},{"r":"339","s":[{"r":"336","value":["null"," as "]},{"r":"338","s":[{"value":["Interval\u003c"]},{"r":"337","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}]}]}]}]}}],"expression":{"localId":"341","locator":"142:3-144:35","type":"If","condition":{"localId":"329","locator":"142:6-142:28","type":"Not","operand":{"locator":"142:6-142:28","type":"IsNull","operand":{"localId":"328","locator":"142:6-142:16","name":"pointInTime","type":"OperandRef"}}},"then":{"localId":"332","locator":"142:35-142:68","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"330","locator":"142:44-142:54","name":"pointInTime","type":"OperandRef"},"high":{"localId":"331","locator":"142:57-142:67","name":"pointInTime","type":"OperandRef"}},"else":{"localId":"340","locator":"143:10-144:35","type":"If","condition":{"localId":"334","locator":"143:13-143:30","type":"Not","operand":{"locator":"143:13-143:30","type":"IsNull","operand":{"localId":"333","locator":"143:13-143:18","name":"period","type":"OperandRef"}}},"then":{"localId":"335","locator":"143:37-143:42","name":"period","type":"OperandRef"},"else":{"localId":"339","locator":"144:10-144:35","strict":false,"type":"As","operand":{"localId":"336","locator":"144:10-144:13","type":"Null"},"asTypeSpecifier":{"localId":"338","locator":"144:18-144:35","type":"IntervalTypeSpecifier","pointType":{"localId":"337","locator":"144:27-144:34","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}},"operand":[{"name":"pointInTime","operandTypeSpecifier":{"localId":"325","locator":"141:49-141:56","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"name":"period","operandTypeSpecifier":{"localId":"327","locator":"141:66-141:83","type":"IntervalTypeSpecifier","pointType":{"localId":"326","locator":"141:75-141:82","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"355","locator":"147:1-150:3","name":"HasStart","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"355","s":[{"value":["/*Given an interval, return true if the interval has a starting boundary specified (i.e. the start of the interval is not null and not the minimum DateTime value)*/","define function ","\"HasStart\"","(","period"," "]},{"r":"344","s":[{"value":["Interval\u003c"]},{"r":"343","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"354","s":[{"r":"354","s":[{"value":["not "]},{"r":"353","s":[{"value":["( "]},{"r":"353","s":[{"r":"347","s":[{"r":"346","s":[{"value":["start of "]},{"r":"345","s":[{"value":["period"]}]}]},{"value":[" is null"]}]},{"value":["\n      or "]},{"r":"352","s":[{"r":"349","s":[{"value":["start of "]},{"r":"348","s":[{"value":["period"]}]}]},{"value":[" ","="," "]},{"r":"351","s":[{"value":["minimum"," "]},{"r":"350","s":[{"value":["DateTime"]}]}]}]}]},{"value":["\n  )"]}]}]}]}]}}],"expression":{"localId":"354","locator":"148:3-150:3","type":"Not","operand":{"localId":"353","locator":"148:7-150:3","type":"Or","operand":[{"localId":"347","locator":"148:9-148:31","type":"IsNull","operand":{"localId":"346","locator":"148:9-148:23","type":"Start","operand":{"localId":"345","locator":"148:18-148:23","name":"period","type":"OperandRef"}}},{"localId":"352","locator":"149:10-149:43","type":"Equal","operand":[{"localId":"349","locator":"149:10-149:24","type":"Start","operand":{"localId":"348","locator":"149:19-149:24","name":"period","type":"OperandRef"}},{"localId":"351","locator":"149:28-149:43","valueType":"{urn:hl7-org:elm-types:r1}DateTime","type":"MinValue"}]}]}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"344","locator":"147:35-147:52","type":"IntervalTypeSpecifier","pointType":{"localId":"343","locator":"147:44-147:51","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"368","locator":"153:1-158:3","name":"HasEnd","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"368","s":[{"value":["/*Given an interval, return true if the interval has an ending boundary specified (i.e. the end of the interval is not null and not the maximum DateTime value)*/","define function ","\"HasEnd\"","(","period"," "]},{"r":"357","s":[{"value":["Interval\u003c"]},{"r":"356","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"367","s":[{"r":"367","s":[{"value":["not "]},{"r":"366","s":[{"value":["( \n    "]},{"r":"366","s":[{"r":"360","s":[{"r":"359","s":[{"value":["end of "]},{"r":"358","s":[{"value":["period"]}]}]},{"value":[" is null"]}]},{"value":["\n      or \n      "]},{"r":"365","s":[{"r":"362","s":[{"value":["end of "]},{"r":"361","s":[{"value":["period"]}]}]},{"value":[" ","="," "]},{"r":"364","s":[{"value":["maximum"," "]},{"r":"363","s":[{"value":["DateTime"]}]}]}]}]},{"value":["\n  )"]}]}]}]}]}}],"expression":{"localId":"367","locator":"154:3-158:3","type":"Not","operand":{"localId":"366","locator":"154:7-158:3","type":"Or","operand":[{"localId":"360","locator":"155:5-155:25","type":"IsNull","operand":{"localId":"359","locator":"155:5-155:17","type":"End","operand":{"localId":"358","locator":"155:12-155:17","name":"period","type":"OperandRef"}}},{"localId":"365","locator":"157:7-157:38","type":"Equal","operand":[{"localId":"362","locator":"157:7-157:19","type":"End","operand":{"localId":"361","locator":"157:14-157:19","name":"period","type":"OperandRef"}},{"localId":"364","locator":"157:23-157:38","valueType":"{urn:hl7-org:elm-types:r1}DateTime","type":"MaxValue"}]}]}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"357","locator":"153:33-153:50","type":"IntervalTypeSpecifier","pointType":{"localId":"356","locator":"153:42-153:49","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"378","locator":"161:1-164:24","name":"Latest","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"378","s":[{"value":["/*Given an interval, return the ending point if the interval has an ending boundary specified, otherwise, return the starting point*/","define function ","\"Latest\"","(","period"," "]},{"r":"370","s":[{"value":["Interval\u003c"]},{"r":"369","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"377","s":[{"r":"377","s":[{"value":["if "]},{"r":"372","s":[{"value":["( "]},{"r":"372","s":[{"value":["HasEnd","("]},{"r":"371","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":[" then \n  "]},{"r":"374","s":[{"value":["end of "]},{"r":"373","s":[{"value":["period"]}]}]},{"value":[" \n    else "]},{"r":"376","s":[{"value":["start of "]},{"r":"375","s":[{"value":["period"]}]}]}]}]}]}}],"expression":{"localId":"377","locator":"162:3-164:24","type":"If","condition":{"localId":"372","locator":"162:6-162:22","name":"HasEnd","type":"FunctionRef","operand":[{"localId":"371","locator":"162:15-162:20","name":"period","type":"OperandRef"}]},"then":{"localId":"374","locator":"163:3-163:15","type":"End","operand":{"localId":"373","locator":"163:10-163:15","name":"period","type":"OperandRef"}},"else":{"localId":"376","locator":"164:10-164:24","type":"Start","operand":{"localId":"375","locator":"164:19-164:24","name":"period","type":"OperandRef"}}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"370","locator":"161:33-161:50","type":"IntervalTypeSpecifier","pointType":{"localId":"369","locator":"161:42-161:49","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"388","locator":"167:1-170:15","name":"Earliest","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"388","s":[{"value":["/*Given an interval, return the starting point if the interval has a starting boundary specified, otherwise, return the ending point*/","define function ","\"Earliest\"","(","period"," "]},{"r":"380","s":[{"value":["Interval\u003c"]},{"r":"379","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"387","s":[{"r":"387","s":[{"value":["if "]},{"r":"382","s":[{"value":["( "]},{"r":"382","s":[{"value":["HasStart","("]},{"r":"381","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":[" then "]},{"r":"384","s":[{"value":["start of "]},{"r":"383","s":[{"value":["period"]}]}]},{"value":[" \n    else \n  "]},{"r":"386","s":[{"value":["end of "]},{"r":"385","s":[{"value":["period"]}]}]}]}]}]}}],"expression":{"localId":"387","locator":"168:3-170:15","type":"If","condition":{"localId":"382","locator":"168:6-168:24","name":"HasStart","type":"FunctionRef","operand":[{"localId":"381","locator":"168:17-168:22","name":"period","type":"OperandRef"}]},"then":{"localId":"384","locator":"168:31-168:45","type":"Start","operand":{"localId":"383","locator":"168:40-168:45","name":"period","type":"OperandRef"}},"else":{"localId":"386","locator":"170:3-170:15","type":"End","operand":{"localId":"385","locator":"170:10-170:15","name":"period","type":"OperandRef"}}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"380","locator":"167:35-167:52","type":"IntervalTypeSpecifier","pointType":{"localId":"379","locator":"167:44-167:51","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"396","locator":"173:1-174:48","name":"LatestOf","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"396","s":[{"value":["/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the ending point of the period if the period has an ending boundary specified, otherwise returns the starting point of the interval*/","define function ","\"LatestOf\"","(","pointInTime"," "]},{"r":"389","s":[{"value":["DateTime"]}]},{"value":[", ","period"," "]},{"r":"391","s":[{"value":["Interval\u003c"]},{"r":"390","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"395","s":[{"r":"395","s":[{"value":["Latest","("]},{"r":"394","s":[{"value":["NormalizeInterval","("]},{"r":"392","s":[{"value":["pointInTime"]}]},{"value":[", "]},{"r":"393","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"395","locator":"174:3-174:48","name":"Latest","type":"FunctionRef","operand":[{"localId":"394","locator":"174:10-174:47","name":"NormalizeInterval","type":"FunctionRef","operand":[{"localId":"392","locator":"174:28-174:38","name":"pointInTime","type":"OperandRef"},{"localId":"393","locator":"174:41-174:46","name":"period","type":"OperandRef"}]}]},"operand":[{"name":"pointInTime","operandTypeSpecifier":{"localId":"389","locator":"173:40-173:47","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"name":"period","operandTypeSpecifier":{"localId":"391","locator":"173:57-173:74","type":"IntervalTypeSpecifier","pointType":{"localId":"390","locator":"173:66-173:73","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"404","locator":"177:1-178:50","name":"EarliestOf","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"404","s":[{"value":["/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the starting point of the period if the period has a starting boundary specified, otherwise returns the ending point of the period*/","define function ","\"EarliestOf\"","(","pointInTime"," "]},{"r":"397","s":[{"value":["DateTime"]}]},{"value":[", ","period"," "]},{"r":"399","s":[{"value":["Interval\u003c"]},{"r":"398","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"403","s":[{"r":"403","s":[{"value":["Earliest","("]},{"r":"402","s":[{"value":["NormalizeInterval","("]},{"r":"400","s":[{"value":["pointInTime"]}]},{"value":[", "]},{"r":"401","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"403","locator":"178:3-178:50","name":"Earliest","type":"FunctionRef","operand":[{"localId":"402","locator":"178:12-178:49","name":"NormalizeInterval","type":"FunctionRef","operand":[{"localId":"400","locator":"178:30-178:40","name":"pointInTime","type":"OperandRef"},{"localId":"401","locator":"178:43-178:48","name":"period","type":"OperandRef"}]}]},"operand":[{"name":"pointInTime","operandTypeSpecifier":{"localId":"397","locator":"177:42-177:49","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"name":"period","operandTypeSpecifier":{"localId":"399","locator":"177:59-177:76","type":"IntervalTypeSpecifier","pointType":{"localId":"398","locator":"177:68-177:75","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]}]}}},"elm_annotations":{"statements":[{"children":[{"children":[{"children":[{"text":"define \"ED Encounter\":\n  "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"10"}],"ref_id":"11"}],"define_name":"ED Encounter"},{"children":[{"children":[{"children":[{"text":"/*calculates the difference in calendar days between the start and end of the given interval.*/define function \"LengthInDays\"(Value "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"16"},{"children":[{"text":"\u003e"}]}],"ref_id":"17"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"difference in days between "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"Value"}]}],"node_type":"OperandRef","ref_id":"18"}],"node_type":"Start","ref_id":"19"},{"children":[{"text":" and "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"Value"}]}],"node_type":"OperandRef","ref_id":"20"}],"node_type":"End","ref_id":"21"}],"node_type":"DifferenceBetween","ref_id":"22"}],"node_type":"DifferenceBetween","ref_id":"22"}],"ref_id":"23"}],"define_name":"LengthInDays"},{"children":[{"children":[{"children":[{"text":"define \"Inpatient Encounter\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Encounter Inpatient\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"12"}],"node_type":"Retrieve","ref_id":"12"},{"children":[{"text":" EncounterInpatient"}]}],"ref_id":"13"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"LengthInDays\"("}]},{"children":[{"children":[{"children":[{"text":"EncounterInpatient"}]}],"ref_id":"14"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"15"}],"node_type":"Property","ref_id":"15"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"24"},{"children":[{"text":"\u003c= 120"}],"node_type":"Literal","ref_id":"25"}],"node_type":"LessOrEqual","ref_id":"26"},{"children":[{"text":"\n      and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"EncounterInpatient"}]}],"ref_id":"27"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"28"}],"node_type":"Property","ref_id":"28"},{"children":[{"text":" ends during day of "}],"node_type":"In","ref_id":"30"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"29"}],"node_type":"In","ref_id":"30"}],"ref_id":"31"}],"ref_id":"31"}],"node_type":"Query","ref_id":"32"}],"ref_id":"33"}],"define_name":"Inpatient Encounter"},{"children":[{"children":[]},{"children":[]},{"children":[]},{"children":[{"children":[{"text":"/*@description: Returns an interval of date values extracted from the input interval of date-time values\n@comment: This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability.*/define function \"ToDateInterval\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"34"},{"children":[{"text":"\u003e"}]}],"ref_id":"35"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"36"}],"node_type":"Start","ref_id":"37"}],"ref_id":"38"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"39"}],"node_type":"End","ref_id":"40"}],"ref_id":"41"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"42"}],"node_type":"Interval","ref_id":"42"}],"ref_id":"43"}],"define_name":"ToDateInterval"},{"children":[{"children":[{"children":[{"text":"/*returns list of all locations within an encounter, including locations for immediately prior ED visit.*/define function \"HospitalizationLocations\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"47"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"48"},{"children":[{"text":" Visit"}]}],"ref_id":"49"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"50"}],"node_type":"Retrieve","ref_id":"50"},{"children":[{"text":" LastED"}]}],"ref_id":"51"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"52"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"53"}],"node_type":"Property","ref_id":"53"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"57"},{"children":[{"text":" or less on or before"}]}],"ref_id":"58"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"54"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"55"}],"node_type":"Property","ref_id":"55"}],"node_type":"Start","ref_id":"56"}],"ref_id":"58"}],"ref_id":"58"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"59"}],"node_type":"End","ref_id":"60"}],"ref_id":"61"}],"ref_id":"62"}],"ref_id":"63"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"64"}],"ref_id":"65"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"node_type":"QueryLetRef","ref_id":"66"},{"children":[{"text":" is null"}]}],"ref_id":"67"},{"children":[{"text":" then "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"68"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"ref_id":"69"}],"ref_id":"69"},{"children":[{"text":" \n      else "}]},{"children":[{"children":[{"text":"flatten "}]},{"children":[{"children":[{"text":"{ "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"70"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"ref_id":"71"}],"ref_id":"71"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"72"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"ref_id":"73"}],"ref_id":"73"},{"children":[{"text":" }"}]}],"node_type":"List","ref_id":"74"}],"ref_id":"75"}],"node_type":"If","ref_id":"76"}],"ref_id":"77"}],"node_type":"Query","ref_id":"78"}],"node_type":"Query","ref_id":"78"}],"ref_id":"79"}],"define_name":"HospitalizationLocations"},{"children":[{"children":[{"children":[{"text":"/*Returns the arrival time in the ED for the encounter.*/define function \"EmergencyDepartmentArrivalTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"80"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"\"HospitalizationLocations\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"81"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"82"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"82"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"83"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"HospitalLocation"}]}],"ref_id":"84"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"85"}],"ref_id":"85"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}],"ref_id":"86"}],"ref_id":"87"}],"ref_id":"87"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"88"}],"node_type":"Start","ref_id":"89"}],"ref_id":"90"}],"ref_id":"91"}],"ref_id":"92"},{"children":[{"text":"\n  )"}]}],"ref_id":"93"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"94"}],"node_type":"Property","ref_id":"94"}],"node_type":"Start","ref_id":"95"}],"node_type":"Start","ref_id":"95"}],"ref_id":"96"}],"define_name":"EmergencyDepartmentArrivalTime"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization returns the total interval for admission to discharge for the given encounter, or for the admission of any immediately prior emergency department visit to the discharge of the given encounter.*/define function \"Hospitalization\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"99"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"100"},{"children":[{"text":" Visit"}]}],"ref_id":"101"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"102"}],"node_type":"Retrieve","ref_id":"102"},{"children":[{"text":" LastED"}]}],"ref_id":"103"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"104"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"105"}],"node_type":"Property","ref_id":"105"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"109"},{"children":[{"text":" or less on or before"}]}],"ref_id":"110"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"106"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"107"}],"node_type":"Property","ref_id":"107"}],"node_type":"Start","ref_id":"108"}],"ref_id":"110"}],"ref_id":"110"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"111"}],"node_type":"End","ref_id":"112"}],"ref_id":"113"}],"ref_id":"114"}],"ref_id":"115"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"116"}],"ref_id":"117"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"118"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"119"}],"node_type":"Property","ref_id":"119"}],"node_type":"Start","ref_id":"120"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"121"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"122"}],"node_type":"Property","ref_id":"122"}],"node_type":"Start","ref_id":"123"},{"children":[{"text":")"}]}],"ref_id":"124"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"125"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"126"}],"node_type":"Property","ref_id":"126"}],"ref_id":"127"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"128"}],"ref_id":"129"}],"node_type":"Query","ref_id":"130"}],"node_type":"Query","ref_id":"130"}],"ref_id":"131"}],"define_name":"Hospitalization"},{"children":[{"children":[{"children":[{"text":"/*Returns admission time for an encounter or for immediately prior emergency department visit.*/define function \"HospitalAdmissionTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"97"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"\"Hospitalization\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"98"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"132"}],"node_type":"Start","ref_id":"133"}],"node_type":"Start","ref_id":"133"}],"ref_id":"134"}],"define_name":"HospitalAdmissionTime"},{"children":[{"children":[{"children":[{"text":"/*Returns earliest arrival time for an encounter including any prior ED visit.*/define function \"HospitalArrivalTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"135"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"\"HospitalizationLocations\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"136"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"137"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"137"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"138"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"139"}],"node_type":"Start","ref_id":"140"}],"ref_id":"141"}],"ref_id":"142"}],"ref_id":"143"},{"children":[{"text":"\n  )"}]}],"ref_id":"144"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"145"}],"node_type":"Property","ref_id":"145"}],"node_type":"Start","ref_id":"146"}],"node_type":"Start","ref_id":"146"}],"ref_id":"147"}],"define_name":"HospitalArrivalTime"},{"children":[{"children":[{"children":[{"text":"/*Returns the length of stay in days (i.e. the number of days between admission and discharge) for the given encounter, or from the admission of any immediately prior emergency department visit to the discharge of the encounter*/define function \"HospitalizationLengthofStay\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"150"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"LengthInDays("}]},{"children":[{"children":[{"text":"\"Hospitalization\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"151"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"152"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"153"}],"node_type":"FunctionRef","ref_id":"153"}],"ref_id":"154"}],"define_name":"HospitalizationLengthofStay"},{"children":[{"children":[{"children":[{"text":"/*Returns the latest departure time for encounter including any prior ED visit.*/define function \"HospitalDepartureTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"155"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"\"HospitalizationLocations\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"156"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"157"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"157"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"158"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"159"}],"node_type":"Start","ref_id":"160"}],"ref_id":"161"}],"ref_id":"162"}],"ref_id":"163"},{"children":[{"text":"\n  )"}]}],"ref_id":"164"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"165"}],"node_type":"Property","ref_id":"165"}],"node_type":"End","ref_id":"166"}],"node_type":"End","ref_id":"166"}],"ref_id":"167"}],"define_name":"HospitalDepartureTime"},{"children":[{"children":[{"children":[{"text":"/*Hospital Discharge Time returns the discharge time for an encounter*/define function \"HospitalDischargeTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"168"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"169"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"170"}],"node_type":"Property","ref_id":"170"}],"node_type":"End","ref_id":"171"}],"node_type":"End","ref_id":"171"}],"ref_id":"172"}],"define_name":"HospitalDischargeTime"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization with Observation and Outpatient Surgery Service returns the total interval from the start of any immediately prior emergency department visit, outpatient surgery visit or observation visit to the discharge of the given encounter.*/define function \"HospitalizationWithObservationAndOutpatientSurgeryService\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"173"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"174"},{"children":[{"text":" Visit"}]}],"ref_id":"175"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"ObsVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Observation Services\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"176"}],"node_type":"Retrieve","ref_id":"176"},{"children":[{"text":" LastObs"}]}],"ref_id":"177"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastObs"}]}],"ref_id":"178"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"179"}],"node_type":"Property","ref_id":"179"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"183"},{"children":[{"text":" or less on or before"}]}],"ref_id":"184"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"180"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"181"}],"node_type":"Property","ref_id":"181"}],"node_type":"Start","ref_id":"182"}],"ref_id":"184"}],"ref_id":"184"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"185"}],"node_type":"End","ref_id":"186"}],"ref_id":"187"}],"ref_id":"188"}],"ref_id":"189"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"190"}],"ref_id":"191"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"VisitStart: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"ObsVisit"}]}],"ref_id":"192"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"193"}],"node_type":"Property","ref_id":"193"}],"node_type":"Start","ref_id":"194"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"195"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"196"}],"node_type":"Property","ref_id":"196"}],"node_type":"Start","ref_id":"197"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"198"}],"ref_id":"199"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"200"}],"node_type":"Retrieve","ref_id":"200"},{"children":[{"text":" LastED"}]}],"ref_id":"201"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"202"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"203"}],"node_type":"Property","ref_id":"203"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"205"},{"children":[{"text":" or less on or before"}]}],"ref_id":"206"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"204"}],"ref_id":"206"}],"ref_id":"206"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"207"}],"node_type":"End","ref_id":"208"}],"ref_id":"209"}],"ref_id":"210"}],"ref_id":"211"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"212"}],"ref_id":"213"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"VisitStartWithED: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"214"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"215"}],"node_type":"Property","ref_id":"215"}],"node_type":"Start","ref_id":"216"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"217"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"218"}],"ref_id":"219"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"OutpatientSurgeryVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Outpatient Surgery Service\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"220"}],"node_type":"Retrieve","ref_id":"220"},{"children":[{"text":" LastSurgeryOP"}]}],"ref_id":"221"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastSurgeryOP"}]}],"ref_id":"222"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"223"}],"node_type":"Property","ref_id":"223"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"225"},{"children":[{"text":" or less on or before"}]}],"ref_id":"226"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"VisitStartWithED"}]}],"node_type":"QueryLetRef","ref_id":"224"}],"ref_id":"226"}],"ref_id":"226"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"227"}],"node_type":"End","ref_id":"228"}],"ref_id":"229"}],"ref_id":"230"}],"ref_id":"231"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"232"}],"ref_id":"233"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"OutpatientSurgeryVisit"}]}],"ref_id":"234"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"235"}],"node_type":"Property","ref_id":"235"}],"node_type":"Start","ref_id":"236"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"VisitStartWithED"}]}],"node_type":"QueryLetRef","ref_id":"237"},{"children":[{"text":")"}]}],"ref_id":"238"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"239"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"240"}],"node_type":"Property","ref_id":"240"}],"ref_id":"241"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"242"}],"ref_id":"243"}],"node_type":"Query","ref_id":"244"}],"node_type":"Query","ref_id":"244"}],"ref_id":"245"}],"define_name":"HospitalizationWithObservationAndOutpatientSurgeryService"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization with Observation returns the total interval from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/define function \"HospitalizationWithObservation\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"246"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"247"},{"children":[{"text":" Visit"}]}],"ref_id":"248"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"ObsVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Observation Services\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"249"}],"node_type":"Retrieve","ref_id":"249"},{"children":[{"text":" LastObs"}]}],"ref_id":"250"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastObs"}]}],"ref_id":"251"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"252"}],"node_type":"Property","ref_id":"252"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"256"},{"children":[{"text":" or less on or before"}]}],"ref_id":"257"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"253"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"254"}],"node_type":"Property","ref_id":"254"}],"node_type":"Start","ref_id":"255"}],"ref_id":"257"}],"ref_id":"257"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"258"}],"node_type":"End","ref_id":"259"}],"ref_id":"260"}],"ref_id":"261"}],"ref_id":"262"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"263"}],"ref_id":"264"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"VisitStart: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"ObsVisit"}]}],"ref_id":"265"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"266"}],"node_type":"Property","ref_id":"266"}],"node_type":"Start","ref_id":"267"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"268"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"269"}],"node_type":"Property","ref_id":"269"}],"node_type":"Start","ref_id":"270"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"271"}],"ref_id":"272"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"273"}],"node_type":"Retrieve","ref_id":"273"},{"children":[{"text":" LastED"}]}],"ref_id":"274"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"275"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"276"}],"node_type":"Property","ref_id":"276"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"278"},{"children":[{"text":" or less on or before"}]}],"ref_id":"279"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"277"}],"ref_id":"279"}],"ref_id":"279"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"280"}],"node_type":"End","ref_id":"281"}],"ref_id":"282"}],"ref_id":"283"}],"ref_id":"284"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"285"}],"ref_id":"286"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"287"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"288"}],"node_type":"Property","ref_id":"288"}],"node_type":"Start","ref_id":"289"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"290"},{"children":[{"text":")"}]}],"ref_id":"291"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"292"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"293"}],"node_type":"Property","ref_id":"293"}],"ref_id":"294"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"295"}],"ref_id":"296"}],"node_type":"Query","ref_id":"297"}],"node_type":"Query","ref_id":"297"}],"ref_id":"298"}],"define_name":"HospitalizationWithObservation"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization with Observation Length of Stay returns the length in days from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/define function \"HospitalizationWithObservationLengthofStay\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"299"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"\"LengthInDays\"("}]},{"children":[{"children":[{"text":"\"HospitalizationWithObservation\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"300"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"301"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"302"}],"node_type":"FunctionRef","ref_id":"302"}],"ref_id":"303"}],"define_name":"HospitalizationWithObservationLengthofStay"},{"children":[{"children":[{"children":[{"text":"/*First Inpatient Intensive Care Unit returns the first intensive care unit for the given encounter, without considering any immediately prior emergency department visit.*/define function \"FirstInpatientIntensiveCareUnit\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"304"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"305"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"node_type":"Property","ref_id":"306"}],"node_type":"Property","ref_id":"306"},{"children":[{"text":")"}]}],"node_type":"Property","ref_id":"306"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"307"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"HospitalLocation"}]}],"ref_id":"308"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"309"}],"ref_id":"309"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Intensive Care Unit\""}]}],"ref_id":"310"}],"node_type":"InValueSet","ref_id":"311"},{"children":[{"text":"\n        and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"HospitalLocation"}]}],"ref_id":"312"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"313"}],"node_type":"Property","ref_id":"313"},{"children":[{"text":" during "}],"node_type":"IncludedIn","ref_id":"316"},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"314"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"315"}],"node_type":"Property","ref_id":"315"}],"node_type":"IncludedIn","ref_id":"316"}],"ref_id":"317"}],"ref_id":"317"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"318"}],"node_type":"Start","ref_id":"319"}],"ref_id":"320"}],"ref_id":"321"}],"ref_id":"322"},{"children":[{"text":"\n  )"}]}],"node_type":"First","ref_id":"323"}],"node_type":"First","ref_id":"323"}],"ref_id":"324"}],"define_name":"FirstInpatientIntensiveCareUnit"},{"children":[{"children":[{"children":[{"text":"/*Given a datetime and a period, returns the period (if a period is provided) or the interval beginning and ending on the datetime (if a datetime is provided)*/define function \"NormalizeInterval\"(pointInTime "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"325"},{"children":[{"text":", period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"326"},{"children":[{"text":"\u003e"}]}],"ref_id":"327"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"pointInTime"}]}],"node_type":"OperandRef","ref_id":"328"},{"children":[{"text":" is not null"}]}],"ref_id":"329"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"pointInTime"}]}],"ref_id":"330"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"pointInTime"}]}],"ref_id":"331"},{"children":[{"text":"]"}]}],"ref_id":"332"},{"children":[{"text":"\n    else "}]},{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"333"},{"children":[{"text":" is not null"}]}],"ref_id":"334"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"period"}]}],"ref_id":"335"},{"children":[{"text":" \n    else "}]},{"children":[{"children":[{"text":"null as "}],"node_type":"Null","ref_id":"336"},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"337"},{"children":[{"text":"\u003e"}]}],"ref_id":"338"}],"ref_id":"339"}],"ref_id":"340"}],"node_type":"If","ref_id":"341"}],"node_type":"If","ref_id":"341"}],"ref_id":"342"}],"define_name":"NormalizeInterval"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return true if the interval has a starting boundary specified (i.e. the start of the interval is not null and not the minimum DateTime value)*/define function \"HasStart\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"343"},{"children":[{"text":"\u003e"}]}],"ref_id":"344"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"not "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"345"}],"node_type":"Start","ref_id":"346"},{"children":[{"text":" is null"}]}],"node_type":"IsNull","ref_id":"347"},{"children":[{"text":"\n      or "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"348"}],"node_type":"Start","ref_id":"349"},{"children":[{"text":" = "}]},{"children":[{"children":[{"text":"minimum "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"350"}],"node_type":"MinValue","ref_id":"351"}],"node_type":"Equal","ref_id":"352"}],"node_type":"Or","ref_id":"353"},{"children":[{"text":"\n  )"}]}],"node_type":"Or","ref_id":"353"}],"node_type":"Not","ref_id":"354"}],"node_type":"Not","ref_id":"354"}],"ref_id":"355"}],"define_name":"HasStart"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return true if the interval has an ending boundary specified (i.e. the end of the interval is not null and not the maximum DateTime value)*/define function \"HasEnd\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"356"},{"children":[{"text":"\u003e"}]}],"ref_id":"357"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"not "}]},{"children":[{"children":[{"text":"( \n    "}]},{"children":[{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"358"}],"node_type":"End","ref_id":"359"},{"children":[{"text":" is null"}]}],"node_type":"IsNull","ref_id":"360"},{"children":[{"text":"\n      or \n      "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"361"}],"node_type":"End","ref_id":"362"},{"children":[{"text":" = "}]},{"children":[{"children":[{"text":"maximum "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"363"}],"node_type":"MaxValue","ref_id":"364"}],"node_type":"Equal","ref_id":"365"}],"node_type":"Or","ref_id":"366"},{"children":[{"text":"\n  )"}]}],"node_type":"Or","ref_id":"366"}],"node_type":"Not","ref_id":"367"}],"node_type":"Not","ref_id":"367"}],"ref_id":"368"}],"define_name":"HasEnd"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return the ending point if the interval has an ending boundary specified, otherwise, return the starting point*/define function \"Latest\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"369"},{"children":[{"text":"\u003e"}]}],"ref_id":"370"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"HasEnd("}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"371"},{"children":[{"text":")"}]}],"ref_id":"372"},{"children":[{"text":")"}]}],"ref_id":"372"},{"children":[{"text":" then \n  "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"373"}],"ref_id":"374"},{"children":[{"text":" \n    else "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"375"}],"ref_id":"376"}],"node_type":"If","ref_id":"377"}],"node_type":"If","ref_id":"377"}],"ref_id":"378"}],"define_name":"Latest"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return the starting point if the interval has a starting boundary specified, otherwise, return the ending point*/define function \"Earliest\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"379"},{"children":[{"text":"\u003e"}]}],"ref_id":"380"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"HasStart("}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"381"},{"children":[{"text":")"}]}],"ref_id":"382"},{"children":[{"text":")"}]}],"ref_id":"382"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"383"}],"ref_id":"384"},{"children":[{"text":" \n    else \n  "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"385"}],"ref_id":"386"}],"node_type":"If","ref_id":"387"}],"node_type":"If","ref_id":"387"}],"ref_id":"388"}],"define_name":"Earliest"},{"children":[{"children":[{"children":[{"text":"/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the ending point of the period if the period has an ending boundary specified, otherwise returns the starting point of the interval*/define function \"LatestOf\"(pointInTime "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"389"},{"children":[{"text":", period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"390"},{"children":[{"text":"\u003e"}]}],"ref_id":"391"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Latest("}]},{"children":[{"children":[{"text":"NormalizeInterval("}]},{"children":[{"children":[{"text":"pointInTime"}]}],"node_type":"OperandRef","ref_id":"392"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"393"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"394"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"395"}],"node_type":"FunctionRef","ref_id":"395"}],"ref_id":"396"}],"define_name":"LatestOf"},{"children":[{"children":[{"children":[{"text":"/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the starting point of the period if the period has a starting boundary specified, otherwise returns the ending point of the period*/define function \"EarliestOf\"(pointInTime "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"397"},{"children":[{"text":", period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"398"},{"children":[{"text":"\u003e"}]}],"ref_id":"399"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Earliest("}]},{"children":[{"children":[{"text":"NormalizeInterval("}]},{"children":[{"children":[{"text":"pointInTime"}]}],"node_type":"OperandRef","ref_id":"400"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"401"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"402"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"403"}],"node_type":"FunctionRef","ref_id":"403"}],"ref_id":"404"}],"define_name":"EarliestOf"}],"identifier":{"id":"MATGlobalCommonFunctions","version":"7.0.000"}},"is_main_library":false,"is_top_level":true,"library_name":"MATGlobalCommonFunctions","library_version":"7.0.000","statement_dependencies":[{"_id":"689268d7e8da6d1c0d5175f9","statement_name":"LengthInDays"},{"_id":"689268d7e8da6d1c0d5175fa","statement_name":"NormalizeInterval"},{"_id":"689268d7e8da6d1c0d5175fb","statement_name":"HospitalizationWithObservation"}]},{"_id":"689268d7e8da6d1c0d517606","cql":"library TJCOverall version '6.0.000'\n\nusing QDM version '5.6'\n\ninclude MATGlobalCommonFunctions version '7.0.000' called Global\n\nvalueset \"Comfort Measures\": 'urn:oid:1.3.6.1.4.1.33895.1.3.0.45' \nvalueset \"Discharge To Acute Care Facility\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.87' \nvalueset \"Discharged to Health Care Facility for Hospice Care\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.207' \nvalueset \"Discharged to Home for Hospice Care\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.209' \nvalueset \"Emergency Department Visit\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.292' \nvalueset \"Hemorrhagic Stroke\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.212' \nvalueset \"Ischemic Stroke\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.247' \nvalueset \"Left Against Medical Advice\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.308' \nvalueset \"Non-Elective Inpatient Encounter\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.424' \nvalueset \"Observation Services\": 'urn:oid:2.16.840.1.113762.1.4.1111.143' \nvalueset \"Patient Expired\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.309' \n\nparameter \"Measurement Period\" Interval\u003cDateTime\u003e\n\ncontext Patient\n\ndefine \"Intervention Comfort Measures\":\n  [\"Intervention, Order\": \"Comfort Measures\"]\n    union [\"Intervention, Performed\": \"Comfort Measures\"]\n\ndefine \"Ischemic Stroke Encounters with Discharge Disposition\":\n  ( ( \"Ischemic Stroke Encounter\" IschemicStrokeEncounter\n        where IschemicStrokeEncounter.dischargeDisposition in \"Discharge To Acute Care Facility\"\n          or IschemicStrokeEncounter.dischargeDisposition in \"Left Against Medical Advice\"\n          or IschemicStrokeEncounter.dischargeDisposition in \"Patient Expired\"\n          or IschemicStrokeEncounter.dischargeDisposition in \"Discharged to Home for Hospice Care\"\n          or IschemicStrokeEncounter.dischargeDisposition in \"Discharged to Health Care Facility for Hospice Care\"\n    )\n  )\n\ndefine \"Ischemic Stroke Encounter\":\n  \"Encounter with Principal Diagnosis and Age\" EncounterWithAge\n    where exists ( EncounterWithAge.diagnoses Diagnosis\n        where Diagnosis.code in \"Ischemic Stroke\"\n          and Diagnosis.rank = 1\n    )\n\ndefine \"All Stroke Encounter\":\n  \"Non Elective Inpatient Encounter\" NonElectiveEncounter\n    where exists ( NonElectiveEncounter.diagnoses Diagnosis\n        where Diagnosis.rank = 1\n          and ( Diagnosis.code in \"Hemorrhagic Stroke\"\n              or Diagnosis.code in \"Ischemic Stroke\"\n          )\n    )\n\ndefine \"Encounter with Comfort Measures during Hospitalization\":\n  \"Ischemic Stroke Encounter\" IschemicStrokeEncounter\n    with \"Intervention Comfort Measures\" ComfortMeasure\n      such that Coalesce(start of Global.\"NormalizeInterval\"(ComfortMeasure.relevantDatetime, ComfortMeasure.relevantPeriod), ComfortMeasure.authorDatetime)during Global.\"HospitalizationWithObservation\" ( IschemicStrokeEncounter )\n\ndefine \"Non Elective Inpatient Encounter\":\n  [\"Encounter, Performed\": \"Non-Elective Inpatient Encounter\"] NonElectiveEncounter\n    where Global.\"LengthInDays\" ( NonElectiveEncounter.relevantPeriod ) \u003c= 120\n      and NonElectiveEncounter.relevantPeriod ends during day of \"Measurement Period\"\n\ndefine \"Encounter with Principal Diagnosis and Age\":\n  \"All Stroke Encounter\" AllStrokeEncounter\n    where AgeInYearsAt(date from(start of AllStrokeEncounter.relevantPeriod))\u003e= 18\n\ndefine function \"TruncateTime\"(Value DateTime ):\n  DateTime(year from Value, month from Value, day from Value, 0, 0, 0, 0, timezoneoffset from Value)\n\ndefine function \"CalendarDayOfOrDayAfter\"(StartValue DateTime ):\n  Interval[\"TruncateTime\"(StartValue), \"TruncateTime\"(StartValue + 2 days))\n\ndefine function \"HospitalizationWithObservationLengthofStay\"(Encounter \"Encounter, Performed\" ):\n  Global.\"LengthInDays\" ( Global.\"HospitalizationWithObservation\" ( Encounter ) )\n\n","elm":{"library":{"annotation":[{"translatorOptions":"EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion,DisableMethodInvocation","type":"CqlToElmInfo"},{"type":"Annotation","s":{"r":"165","s":[{"value":["","library TJCOverall version '6.0.000'"]}]}}],"identifier":{"id":"TJCOverall","version":"6.0.000"},"schemaIdentifier":{"id":"urn:hl7-org:elm","version":"r1"},"usings":{"def":[{"localIdentifier":"System","uri":"urn:hl7-org:elm-types:r1"},{"localId":"1","locator":"3:1-3:23","localIdentifier":"QDM","uri":"urn:healthit-gov:qdm:v5_6","version":"5.6","annotation":[{"type":"Annotation","s":{"r":"1","s":[{"value":["","using "]},{"s":[{"value":["QDM"]}]},{"value":[" version ","'5.6'"]}]}}]}]},"includes":{"def":[{"localId":"2","locator":"5:1-5:64","localIdentifier":"Global","path":"MATGlobalCommonFunctions","version":"7.0.000","annotation":[{"type":"Annotation","s":{"r":"2","s":[{"value":["","include "]},{"s":[{"value":["MATGlobalCommonFunctions"]}]},{"value":[" version ","'7.0.000'"," called ","Global"]}]}}]}]},"parameters":{"def":[{"localId":"16","locator":"19:1-19:49","name":"Measurement Period","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"16","s":[{"value":["","parameter ","\"Measurement Period\""," "]},{"r":"15","s":[{"value":["Interval\u003c"]},{"r":"14","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}}],"parameterTypeSpecifier":{"localId":"15","locator":"19:32-19:49","type":"IntervalTypeSpecifier","pointType":{"localId":"14","locator":"19:41-19:48","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},"valueSets":{"def":[{"localId":"3","locator":"7:1-7:65","name":"Comfort Measures","id":"1.3.6.1.4.1.33895.1.3.0.45","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"3","s":[{"value":["","valueset ","\"Comfort Measures\"",": ","'urn:oid:1.3.6.1.4.1.33895.1.3.0.45'"]}]}}]},{"localId":"4","locator":"8:1-8:87","name":"Discharge To Acute Care Facility","id":"2.16.840.1.113883.3.117.1.7.1.87","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"4","s":[{"value":["","valueset ","\"Discharge To Acute Care Facility\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.87'"]}]}}]},{"localId":"5","locator":"9:1-9:107","name":"Discharged to Health Care Facility for Hospice Care","id":"2.16.840.1.113883.3.117.1.7.1.207","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"5","s":[{"value":["","valueset ","\"Discharged to Health Care Facility for Hospice Care\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.207'"]}]}}]},{"localId":"6","locator":"10:1-10:91","name":"Discharged to Home for Hospice Care","id":"2.16.840.1.113883.3.117.1.7.1.209","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"6","s":[{"value":["","valueset ","\"Discharged to Home for Hospice Care\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.209'"]}]}}]},{"localId":"7","locator":"11:1-11:82","name":"Emergency Department Visit","id":"2.16.840.1.113883.3.117.1.7.1.292","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"7","s":[{"value":["","valueset ","\"Emergency Department Visit\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.292'"]}]}}]},{"localId":"8","locator":"12:1-12:74","name":"Hemorrhagic Stroke","id":"2.16.840.1.113883.3.117.1.7.1.212","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"8","s":[{"value":["","valueset ","\"Hemorrhagic Stroke\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.212'"]}]}}]},{"localId":"9","locator":"13:1-13:71","name":"Ischemic Stroke","id":"2.16.840.1.113883.3.117.1.7.1.247","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"9","s":[{"value":["","valueset ","\"Ischemic Stroke\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.247'"]}]}}]},{"localId":"10","locator":"14:1-14:83","name":"Left Against Medical Advice","id":"2.16.840.1.113883.3.117.1.7.1.308","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"10","s":[{"value":["","valueset ","\"Left Against Medical Advice\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.308'"]}]}}]},{"localId":"11","locator":"15:1-15:88","name":"Non-Elective Inpatient Encounter","id":"2.16.840.1.113883.3.117.1.7.1.424","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"11","s":[{"value":["","valueset ","\"Non-Elective Inpatient Encounter\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.424'"]}]}}]},{"localId":"12","locator":"16:1-16:73","name":"Observation Services","id":"2.16.840.1.113762.1.4.1111.143","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"12","s":[{"value":["","valueset ","\"Observation Services\"",": ","'urn:oid:2.16.840.1.113762.1.4.1111.143'"]}]}}]},{"localId":"13","locator":"17:1-17:71","name":"Patient Expired","id":"2.16.840.1.113883.3.117.1.7.1.309","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"13","s":[{"value":["","valueset ","\"Patient Expired\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.309'"]}]}}]}]},"contexts":{"def":[{"locator":"21:1-21:15","name":"Patient"}]},"statements":{"def":[{"locator":"21:1-21:15","name":"Patient","context":"Patient","expression":{"type":"SingletonFrom","operand":{"locator":"21:1-21:15","dataType":"{urn:healthit-gov:qdm:v5_6}Patient","templateId":"Patient","type":"Retrieve"}}},{"localId":"20","locator":"23:1-25:57","name":"Intervention Comfort Measures","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"20","s":[{"value":["","define ","\"Intervention Comfort Measures\"",":\n  "]},{"r":"19","s":[{"r":"17","s":[{"value":["[","\"Intervention, Order\"",": "]},{"s":[{"value":["\"Comfort Measures\""]}]},{"value":["]"]}]},{"value":["\n    union "]},{"r":"18","s":[{"value":["[","\"Intervention, Performed\"",": "]},{"s":[{"value":["\"Comfort Measures\""]}]},{"value":["]"]}]}]}]}}],"expression":{"localId":"19","locator":"24:3-25:57","type":"Union","operand":[{"type":"As","operand":{"localId":"17","locator":"24:3-24:45","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveInterventionOrder","templateId":"PositiveInterventionOrder","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"24:27-24:44","name":"Comfort Measures","type":"ValueSetRef"}},"asTypeSpecifier":{"type":"ListTypeSpecifier","elementType":{"type":"ChoiceTypeSpecifier","choice":[{"name":"{urn:healthit-gov:qdm:v5_6}PositiveInterventionPerformed","type":"NamedTypeSpecifier"},{"name":"{urn:healthit-gov:qdm:v5_6}PositiveInterventionOrder","type":"NamedTypeSpecifier"}]}}},{"type":"As","operand":{"localId":"18","locator":"25:11-25:57","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveInterventionPerformed","templateId":"PositiveInterventionPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"25:39-25:56","name":"Comfort Measures","type":"ValueSetRef"}},"asTypeSpecifier":{"type":"ListTypeSpecifier","elementType":{"type":"ChoiceTypeSpecifier","choice":[{"name":"{urn:healthit-gov:qdm:v5_6}PositiveInterventionPerformed","type":"NamedTypeSpecifier"},{"name":"{urn:healthit-gov:qdm:v5_6}PositiveInterventionOrder","type":"NamedTypeSpecifier"}]}}}]}},{"localId":"35","locator":"58:1-61:85","name":"Non Elective Inpatient Encounter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"35","s":[{"value":["","define ","\"Non Elective Inpatient Encounter\"",":\n  "]},{"r":"34","s":[{"s":[{"r":"22","s":[{"r":"21","s":[{"r":"21","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Non-Elective Inpatient Encounter\""]}]},{"value":["]"]}]}]},{"value":[" ","NonElectiveEncounter"]}]}]},{"value":["\n    "]},{"r":"33","s":[{"value":["where "]},{"r":"33","s":[{"r":"28","s":[{"r":"26","s":[{"r":"23","s":[{"value":["Global"]}]},{"value":["."]},{"r":"26","s":[{"value":["\"LengthInDays\""," ( "]},{"r":"25","s":[{"r":"24","s":[{"value":["NonElectiveEncounter"]}]},{"value":["."]},{"r":"25","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]},{"r":"27","value":[" ","\u003c="," ","120"]}]},{"value":["\n      and "]},{"r":"32","s":[{"r":"30","s":[{"r":"29","s":[{"value":["NonElectiveEncounter"]}]},{"value":["."]},{"r":"30","s":[{"value":["relevantPeriod"]}]}]},{"r":"32","value":[" ","ends during day of"," "]},{"r":"31","s":[{"value":["\"Measurement Period\""]}]}]}]}]}]}]}}],"expression":{"localId":"34","locator":"59:3-61:85","type":"Query","source":[{"localId":"22","locator":"59:3-59:83","alias":"NonElectiveEncounter","expression":{"localId":"21","locator":"59:3-59:62","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"59:28-59:61","name":"Non-Elective Inpatient Encounter","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"33","locator":"60:5-61:85","type":"And","operand":[{"localId":"28","locator":"60:11-60:78","type":"LessOrEqual","operand":[{"localId":"26","locator":"60:11-60:71","name":"LengthInDays","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"25","locator":"60:35-60:69","path":"relevantPeriod","scope":"NonElectiveEncounter","type":"Property"}]},{"localId":"27","locator":"60:76-60:78","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"120","type":"Literal"}]},{"localId":"32","locator":"61:11-61:85","precision":"Day","type":"In","operand":[{"locator":"61:47-61:50","type":"End","operand":{"localId":"30","locator":"61:11-61:45","path":"relevantPeriod","scope":"NonElectiveEncounter","type":"Property"}},{"localId":"31","locator":"61:66-61:85","name":"Measurement Period","type":"ParameterRef"}]}]}}},{"localId":"57","locator":"44:1-51:5","name":"All Stroke Encounter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"57","s":[{"value":["","define ","\"All Stroke Encounter\"",":\n  "]},{"r":"56","s":[{"s":[{"r":"37","s":[{"r":"36","s":[{"s":[{"value":["\"Non Elective Inpatient Encounter\""]}]}]},{"value":[" ","NonElectiveEncounter"]}]}]},{"value":["\n    "]},{"r":"55","s":[{"value":["where "]},{"r":"55","s":[{"value":["exists "]},{"r":"54","s":[{"value":["( "]},{"r":"54","s":[{"s":[{"r":"39","s":[{"r":"38","s":[{"s":[{"value":["NonElectiveEncounter",".","diagnoses"]}]}]},{"value":[" ","Diagnosis"]}]}]},{"value":["\n        "]},{"r":"53","s":[{"value":["where "]},{"r":"53","s":[{"r":"43","s":[{"r":"41","s":[{"r":"40","s":[{"value":["Diagnosis"]}]},{"value":["."]},{"r":"41","s":[{"value":["rank"]}]}]},{"r":"42","value":[" ","="," ","1"]}]},{"value":["\n          and "]},{"r":"52","s":[{"value":["( "]},{"r":"52","s":[{"r":"47","s":[{"r":"45","s":[{"r":"44","s":[{"value":["Diagnosis"]}]},{"value":["."]},{"r":"45","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"46","s":[{"value":["\"Hemorrhagic Stroke\""]}]}]},{"value":["\n              or "]},{"r":"51","s":[{"r":"49","s":[{"r":"48","s":[{"value":["Diagnosis"]}]},{"value":["."]},{"r":"49","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"50","s":[{"value":["\"Ischemic Stroke\""]}]}]}]},{"value":["\n          )"]}]}]}]}]},{"value":["\n    )"]}]}]}]}]}]}}],"expression":{"localId":"56","locator":"45:3-51:5","type":"Query","source":[{"localId":"37","locator":"45:3-45:57","alias":"NonElectiveEncounter","expression":{"localId":"36","locator":"45:3-45:36","name":"Non Elective Inpatient Encounter","type":"ExpressionRef"}}],"relationship":[],"where":{"localId":"55","locator":"46:5-51:5","type":"Exists","operand":{"localId":"54","locator":"46:18-51:5","type":"Query","source":[{"localId":"39","locator":"46:20-46:59","alias":"Diagnosis","expression":{"localId":"38","locator":"46:20-46:49","path":"diagnoses","scope":"NonElectiveEncounter","type":"Property"}}],"relationship":[],"where":{"localId":"53","locator":"47:9-50:11","type":"And","operand":[{"localId":"43","locator":"47:15-47:32","type":"Equal","operand":[{"localId":"41","locator":"47:15-47:28","path":"rank","scope":"Diagnosis","type":"Property"},{"localId":"42","locator":"47:32","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"1","type":"Literal"}]},{"localId":"52","locator":"48:15-50:11","type":"Or","operand":[{"localId":"47","locator":"48:17-48:54","type":"InValueSet","code":{"localId":"45","locator":"48:17-48:30","path":"code","scope":"Diagnosis","type":"Property"},"valueset":{"localId":"46","locator":"48:35-48:54","name":"Hemorrhagic Stroke","type":"ValueSetRef"}},{"localId":"51","locator":"49:18-49:52","type":"InValueSet","code":{"localId":"49","locator":"49:18-49:31","path":"code","scope":"Diagnosis","type":"Property"},"valueset":{"localId":"50","locator":"49:36-49:52","name":"Ischemic Stroke","type":"ValueSetRef"}}]}]}}}}},{"localId":"68","locator":"63:1-65:82","name":"Encounter with Principal Diagnosis and Age","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"68","s":[{"value":["","define ","\"Encounter with Principal Diagnosis and Age\"",":\n  "]},{"r":"67","s":[{"s":[{"r":"59","s":[{"r":"58","s":[{"s":[{"value":["\"All Stroke Encounter\""]}]}]},{"value":[" ","AllStrokeEncounter"]}]}]},{"value":["\n    "]},{"r":"66","s":[{"value":["where "]},{"r":"66","s":[{"r":"64","s":[{"value":["AgeInYearsAt","("]},{"r":"63","s":[{"value":["date from"]},{"r":"62","s":[{"value":["("]},{"r":"62","s":[{"value":["start of "]},{"r":"61","s":[{"r":"60","s":[{"value":["AllStrokeEncounter"]}]},{"value":["."]},{"r":"61","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]}]},{"value":[")"]}]},{"r":"65","value":["\u003e="," ","18"]}]}]}]}]}}],"expression":{"localId":"67","locator":"64:3-65:82","type":"Query","source":[{"localId":"59","locator":"64:3-64:43","alias":"AllStrokeEncounter","expression":{"localId":"58","locator":"64:3-64:24","name":"All Stroke Encounter","type":"ExpressionRef"}}],"relationship":[],"where":{"localId":"66","locator":"65:5-65:82","type":"GreaterOrEqual","operand":[{"localId":"64","locator":"65:11-65:77","precision":"Year","type":"CalculateAgeAt","operand":[{"type":"ToDate","operand":{"path":"birthDatetime","type":"Property","source":{"name":"Patient","type":"ExpressionRef"}}},{"localId":"63","locator":"65:24-65:76","type":"DateFrom","operand":{"localId":"62","locator":"65:33-65:76","type":"Start","operand":{"localId":"61","locator":"65:43-65:75","path":"relevantPeriod","scope":"AllStrokeEncounter","type":"Property"}}}]},{"localId":"65","locator":"65:81-65:82","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"18","type":"Literal"}]}}},{"localId":"85","locator":"37:1-42:5","name":"Ischemic Stroke Encounter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"85","s":[{"value":["","define ","\"Ischemic Stroke Encounter\"",":\n  "]},{"r":"84","s":[{"s":[{"r":"70","s":[{"r":"69","s":[{"s":[{"value":["\"Encounter with Principal Diagnosis and Age\""]}]}]},{"value":[" ","EncounterWithAge"]}]}]},{"value":["\n    "]},{"r":"83","s":[{"value":["where "]},{"r":"83","s":[{"value":["exists "]},{"r":"82","s":[{"value":["( "]},{"r":"82","s":[{"s":[{"r":"72","s":[{"r":"71","s":[{"s":[{"value":["EncounterWithAge",".","diagnoses"]}]}]},{"value":[" ","Diagnosis"]}]}]},{"value":["\n        "]},{"r":"81","s":[{"value":["where "]},{"r":"81","s":[{"r":"76","s":[{"r":"74","s":[{"r":"73","s":[{"value":["Diagnosis"]}]},{"value":["."]},{"r":"74","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"75","s":[{"value":["\"Ischemic Stroke\""]}]}]},{"value":["\n          and "]},{"r":"80","s":[{"r":"78","s":[{"r":"77","s":[{"value":["Diagnosis"]}]},{"value":["."]},{"r":"78","s":[{"value":["rank"]}]}]},{"r":"79","value":[" ","="," ","1"]}]}]}]}]},{"value":["\n    )"]}]}]}]}]}]}}],"expression":{"localId":"84","locator":"38:3-42:5","type":"Query","source":[{"localId":"70","locator":"38:3-38:63","alias":"EncounterWithAge","expression":{"localId":"69","locator":"38:3-38:46","name":"Encounter with Principal Diagnosis and Age","type":"ExpressionRef"}}],"relationship":[],"where":{"localId":"83","locator":"39:5-42:5","type":"Exists","operand":{"localId":"82","locator":"39:18-42:5","type":"Query","source":[{"localId":"72","locator":"39:20-39:55","alias":"Diagnosis","expression":{"localId":"71","locator":"39:20-39:45","path":"diagnoses","scope":"EncounterWithAge","type":"Property"}}],"relationship":[],"where":{"localId":"81","locator":"40:9-41:32","type":"And","operand":[{"localId":"76","locator":"40:15-40:49","type":"InValueSet","code":{"localId":"74","locator":"40:15-40:28","path":"code","scope":"Diagnosis","type":"Property"},"valueset":{"localId":"75","locator":"40:33-40:49","name":"Ischemic Stroke","type":"ValueSetRef"}},{"localId":"80","locator":"41:15-41:32","type":"Equal","operand":[{"localId":"78","locator":"41:15-41:28","path":"rank","scope":"Diagnosis","type":"Property"},{"localId":"79","locator":"41:32","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"1","type":"Literal"}]}]}}}}},{"localId":"113","locator":"27:1-35:3","name":"Ischemic Stroke Encounters with Discharge Disposition","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"113","s":[{"value":["","define ","\"Ischemic Stroke Encounters with Discharge Disposition\"",":\n  "]},{"r":"112","s":[{"value":["( "]},{"r":"112","s":[{"value":["( "]},{"r":"112","s":[{"s":[{"r":"87","s":[{"r":"86","s":[{"s":[{"value":["\"Ischemic Stroke Encounter\""]}]}]},{"value":[" ","IschemicStrokeEncounter"]}]}]},{"value":["\n        "]},{"r":"111","s":[{"value":["where "]},{"r":"111","s":[{"r":"106","s":[{"r":"101","s":[{"r":"96","s":[{"r":"91","s":[{"r":"89","s":[{"r":"88","s":[{"value":["IschemicStrokeEncounter"]}]},{"value":["."]},{"r":"89","s":[{"value":["dischargeDisposition"]}]}]},{"value":[" in "]},{"r":"90","s":[{"value":["\"Discharge To Acute Care Facility\""]}]}]},{"value":["\n          or "]},{"r":"95","s":[{"r":"93","s":[{"r":"92","s":[{"value":["IschemicStrokeEncounter"]}]},{"value":["."]},{"r":"93","s":[{"value":["dischargeDisposition"]}]}]},{"value":[" in "]},{"r":"94","s":[{"value":["\"Left Against Medical Advice\""]}]}]}]},{"value":["\n          or "]},{"r":"100","s":[{"r":"98","s":[{"r":"97","s":[{"value":["IschemicStrokeEncounter"]}]},{"value":["."]},{"r":"98","s":[{"value":["dischargeDisposition"]}]}]},{"value":[" in "]},{"r":"99","s":[{"value":["\"Patient Expired\""]}]}]}]},{"value":["\n          or "]},{"r":"105","s":[{"r":"103","s":[{"r":"102","s":[{"value":["IschemicStrokeEncounter"]}]},{"value":["."]},{"r":"103","s":[{"value":["dischargeDisposition"]}]}]},{"value":[" in "]},{"r":"104","s":[{"value":["\"Discharged to Home for Hospice Care\""]}]}]}]},{"value":["\n          or "]},{"r":"110","s":[{"r":"108","s":[{"r":"107","s":[{"value":["IschemicStrokeEncounter"]}]},{"value":["."]},{"r":"108","s":[{"value":["dischargeDisposition"]}]}]},{"value":[" in "]},{"r":"109","s":[{"value":["\"Discharged to Health Care Facility for Hospice Care\""]}]}]}]}]}]},{"value":["\n    )"]}]},{"value":["\n  )"]}]}]}}],"expression":{"localId":"112","locator":"28:3-35:3","type":"Query","source":[{"localId":"87","locator":"28:7-28:57","alias":"IschemicStrokeEncounter","expression":{"localId":"86","locator":"28:7-28:33","name":"Ischemic Stroke Encounter","type":"ExpressionRef"}}],"relationship":[],"where":{"localId":"111","locator":"29:9-33:114","type":"Or","operand":[{"localId":"106","locator":"29:15-32:98","type":"Or","operand":[{"localId":"101","locator":"29:15-31:78","type":"Or","operand":[{"localId":"96","locator":"29:15-30:90","type":"Or","operand":[{"localId":"91","locator":"29:15-29:96","type":"InValueSet","code":{"localId":"89","locator":"29:15-29:58","path":"dischargeDisposition","scope":"IschemicStrokeEncounter","type":"Property"},"valueset":{"localId":"90","locator":"29:63-29:96","name":"Discharge To Acute Care Facility","type":"ValueSetRef"}},{"localId":"95","locator":"30:14-30:90","type":"InValueSet","code":{"localId":"93","locator":"30:14-30:57","path":"dischargeDisposition","scope":"IschemicStrokeEncounter","type":"Property"},"valueset":{"localId":"94","locator":"30:62-30:90","name":"Left Against Medical Advice","type":"ValueSetRef"}}]},{"localId":"100","locator":"31:14-31:78","type":"InValueSet","code":{"localId":"98","locator":"31:14-31:57","path":"dischargeDisposition","scope":"IschemicStrokeEncounter","type":"Property"},"valueset":{"localId":"99","locator":"31:62-31:78","name":"Patient Expired","type":"ValueSetRef"}}]},{"localId":"105","locator":"32:14-32:98","type":"InValueSet","code":{"localId":"103","locator":"32:14-32:57","path":"dischargeDisposition","scope":"IschemicStrokeEncounter","type":"Property"},"valueset":{"localId":"104","locator":"32:62-32:98","name":"Discharged to Home for Hospice Care","type":"ValueSetRef"}}]},{"localId":"110","locator":"33:14-33:114","type":"InValueSet","code":{"localId":"108","locator":"33:14-33:57","path":"dischargeDisposition","scope":"IschemicStrokeEncounter","type":"Property"},"valueset":{"localId":"109","locator":"33:62-33:114","name":"Discharged to Health Care Facility for Hospice Care","type":"ValueSetRef"}}]}}},{"localId":"134","locator":"53:1-56:230","name":"Encounter with Comfort Measures during Hospitalization","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"134","s":[{"value":["","define ","\"Encounter with Comfort Measures during Hospitalization\"",":\n  "]},{"r":"133","s":[{"s":[{"r":"115","s":[{"r":"114","s":[{"s":[{"value":["\"Ischemic Stroke Encounter\""]}]}]},{"value":[" ","IschemicStrokeEncounter"]}]}]},{"value":["\n    "]},{"r":"132","s":[{"value":["with "]},{"r":"117","s":[{"r":"116","s":[{"s":[{"value":["\"Intervention Comfort Measures\""]}]}]},{"value":[" ","ComfortMeasure"]}]},{"value":["\n      such that "]},{"r":"131","s":[{"r":"127","s":[{"value":["Coalesce","("]},{"r":"124","s":[{"value":["start of "]},{"r":"123","s":[{"r":"118","s":[{"value":["Global"]}]},{"value":["."]},{"r":"123","s":[{"value":["\"NormalizeInterval\"","("]},{"r":"120","s":[{"r":"119","s":[{"value":["ComfortMeasure"]}]},{"value":["."]},{"r":"120","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"122","s":[{"r":"121","s":[{"value":["ComfortMeasure"]}]},{"value":["."]},{"r":"122","s":[{"value":["relevantPeriod"]}]}]},{"value":[")"]}]}]}]},{"value":[", "]},{"r":"126","s":[{"r":"125","s":[{"value":["ComfortMeasure"]}]},{"value":["."]},{"r":"126","s":[{"value":["authorDatetime"]}]}]},{"value":[")"]}]},{"r":"131","value":["during"," "]},{"r":"130","s":[{"r":"128","s":[{"value":["Global"]}]},{"value":["."]},{"r":"130","s":[{"value":["\"HospitalizationWithObservation\""," ( "]},{"r":"129","s":[{"value":["IschemicStrokeEncounter"]}]},{"value":[" )"]}]}]}]}]}]}]}}],"expression":{"localId":"133","locator":"54:3-56:230","type":"Query","source":[{"localId":"115","locator":"54:3-54:53","alias":"IschemicStrokeEncounter","expression":{"localId":"114","locator":"54:3-54:29","name":"Ischemic Stroke Encounter","type":"ExpressionRef"}}],"relationship":[{"localId":"132","locator":"55:5-56:230","alias":"ComfortMeasure","type":"With","expression":{"localId":"116","locator":"55:10-55:40","name":"Intervention Comfort Measures","type":"ExpressionRef"},"suchThat":{"localId":"131","locator":"56:17-56:230","type":"In","operand":[{"localId":"127","locator":"56:17-56:156","type":"Coalesce","operand":[{"localId":"124","locator":"56:26-56:124","type":"Start","operand":{"localId":"123","locator":"56:35-56:124","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"120","locator":"56:62-56:92","path":"relevantDatetime","scope":"ComfortMeasure","type":"Property"},{"localId":"122","locator":"56:95-56:123","path":"relevantPeriod","scope":"ComfortMeasure","type":"Property"}]}},{"localId":"126","locator":"56:127-56:155","path":"authorDatetime","scope":"ComfortMeasure","type":"Property"}]},{"localId":"130","locator":"56:164-56:230","name":"HospitalizationWithObservation","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"129","locator":"56:206-56:228","name":"IschemicStrokeEncounter","type":"AliasRef"}]}]}}]}},{"localId":"149","locator":"67:1-68:100","name":"TruncateTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"149","s":[{"value":["","define function ","\"TruncateTime\"","(","Value"," "]},{"r":"135","s":[{"value":["DateTime"]}]},{"value":[" ):\n  "]},{"r":"148","s":[{"r":"148","s":[{"value":["DateTime","("]},{"r":"137","s":[{"value":["year from "]},{"r":"136","s":[{"value":["Value"]}]}]},{"value":[", "]},{"r":"139","s":[{"value":["month from "]},{"r":"138","s":[{"value":["Value"]}]}]},{"value":[", "]},{"r":"141","s":[{"value":["day from "]},{"r":"140","s":[{"value":["Value"]}]}]},{"r":"142","value":[", ","0",", ","0",", ","0",", ","0",", "]},{"r":"147","s":[{"value":["timezoneoffset from "]},{"r":"146","s":[{"value":["Value"]}]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"148","locator":"68:3-68:100","type":"DateTime","year":{"localId":"137","locator":"68:12-68:26","precision":"Year","type":"DateTimeComponentFrom","operand":{"localId":"136","locator":"68:22-68:26","name":"Value","type":"OperandRef"}},"month":{"localId":"139","locator":"68:29-68:44","precision":"Month","type":"DateTimeComponentFrom","operand":{"localId":"138","locator":"68:40-68:44","name":"Value","type":"OperandRef"}},"day":{"localId":"141","locator":"68:47-68:60","precision":"Day","type":"DateTimeComponentFrom","operand":{"localId":"140","locator":"68:56-68:60","name":"Value","type":"OperandRef"}},"hour":{"localId":"142","locator":"68:63","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"0","type":"Literal"},"minute":{"localId":"143","locator":"68:66","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"0","type":"Literal"},"second":{"localId":"144","locator":"68:69","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"0","type":"Literal"},"millisecond":{"localId":"145","locator":"68:72","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"0","type":"Literal"},"timezoneOffset":{"localId":"147","locator":"68:75-68:99","type":"TimezoneOffsetFrom","operand":{"localId":"146","locator":"68:95-68:99","name":"Value","type":"OperandRef"}}},"operand":[{"name":"Value","operandTypeSpecifier":{"localId":"135","locator":"67:38-67:45","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}]},{"localId":"158","locator":"70:1-71:75","name":"CalendarDayOfOrDayAfter","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"158","s":[{"value":["","define function ","\"CalendarDayOfOrDayAfter\"","(","StartValue"," "]},{"r":"150","s":[{"value":["DateTime"]}]},{"value":[" ):\n  "]},{"r":"157","s":[{"r":"157","s":[{"value":["Interval["]},{"r":"152","s":[{"value":["\"TruncateTime\"","("]},{"r":"151","s":[{"value":["StartValue"]}]},{"value":[")"]}]},{"value":[", "]},{"r":"156","s":[{"value":["\"TruncateTime\"","("]},{"r":"155","s":[{"r":"153","s":[{"value":["StartValue"]}]},{"value":[" + "]},{"r":"154","s":[{"value":["2 ","days"]}]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"157","locator":"71:3-71:75","lowClosed":true,"highClosed":false,"type":"Interval","low":{"localId":"152","locator":"71:12-71:37","name":"TruncateTime","type":"FunctionRef","operand":[{"localId":"151","locator":"71:27-71:36","name":"StartValue","type":"OperandRef"}]},"high":{"localId":"156","locator":"71:40-71:74","name":"TruncateTime","type":"FunctionRef","operand":[{"localId":"155","locator":"71:55-71:73","type":"Add","operand":[{"localId":"153","locator":"71:55-71:64","name":"StartValue","type":"OperandRef"},{"localId":"154","locator":"71:68-71:73","value":2,"unit":"days","type":"Quantity"}]}]}},"operand":[{"name":"StartValue","operandTypeSpecifier":{"localId":"150","locator":"70:54-70:61","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}]},{"localId":"165","locator":"73:1-74:81","name":"HospitalizationWithObservationLengthofStay","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"165","s":[{"value":["","define function ","\"HospitalizationWithObservationLengthofStay\"","(","Encounter"," "]},{"r":"159","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"164","s":[{"r":"164","s":[{"r":"160","s":[{"value":["Global"]}]},{"value":["."]},{"r":"164","s":[{"value":["\"LengthInDays\""," ( "]},{"r":"163","s":[{"r":"161","s":[{"value":["Global"]}]},{"value":["."]},{"r":"163","s":[{"value":["\"HospitalizationWithObservation\""," ( "]},{"r":"162","s":[{"value":["Encounter"]}]},{"value":[" )"]}]}]},{"value":[" )"]}]}]}]}]}}],"expression":{"localId":"164","locator":"74:3-74:81","name":"LengthInDays","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"163","locator":"74:27-74:79","name":"HospitalizationWithObservation","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"162","locator":"74:69-74:77","name":"Encounter","type":"OperandRef"}]}]},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"159","locator":"73:72-73:93","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]}]}}},"elm_annotations":{"statements":[{"children":[{"children":[{"children":[{"text":"define \"Intervention Comfort Measures\":\n  "}]},{"children":[{"children":[{"children":[{"text":"[\"Intervention, Order\": "}]},{"children":[{"children":[{"text":"\"Comfort Measures\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"17"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"[\"Intervention, Performed\": "}]},{"children":[{"children":[{"text":"\"Comfort Measures\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"18"}],"node_type":"Union","ref_id":"19"}],"ref_id":"20"}],"define_name":"Intervention Comfort Measures"},{"children":[{"children":[{"children":[{"text":"define \"Non Elective Inpatient Encounter\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Non-Elective Inpatient Encounter\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"21"}],"node_type":"Retrieve","ref_id":"21"},{"children":[{"text":" NonElectiveEncounter"}]}],"ref_id":"22"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"23"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"LengthInDays\" ( "}]},{"children":[{"children":[{"children":[{"text":"NonElectiveEncounter"}]}],"ref_id":"24"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"25"}],"node_type":"Property","ref_id":"25"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"26"}],"node_type":"FunctionRef","ref_id":"26"},{"children":[{"text":" \u003c= 120"}],"node_type":"Literal","ref_id":"27"}],"node_type":"LessOrEqual","ref_id":"28"},{"children":[{"text":"\n      and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"NonElectiveEncounter"}]}],"ref_id":"29"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"30"}],"node_type":"Property","ref_id":"30"},{"children":[{"text":" ends during day of "}],"node_type":"In","ref_id":"32"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"31"}],"node_type":"In","ref_id":"32"}],"ref_id":"33"}],"ref_id":"33"}],"node_type":"Query","ref_id":"34"}],"ref_id":"35"}],"define_name":"Non Elective Inpatient Encounter"},{"children":[{"children":[{"children":[{"text":"define \"All Stroke Encounter\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Non Elective Inpatient Encounter\""}]}]}],"node_type":"ExpressionRef","ref_id":"36"},{"children":[{"text":" NonElectiveEncounter"}]}],"ref_id":"37"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"NonElectiveEncounter.diagnoses"}]}]}],"node_type":"Property","ref_id":"38"},{"children":[{"text":" Diagnosis"}]}],"ref_id":"39"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Diagnosis"}]}],"ref_id":"40"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"rank"}]}],"node_type":"Property","ref_id":"41"}],"node_type":"Property","ref_id":"41"},{"children":[{"text":" = 1"}],"node_type":"Literal","ref_id":"42"}],"node_type":"Equal","ref_id":"43"},{"children":[{"text":"\n          and "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Diagnosis"}]}],"ref_id":"44"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"45"}],"ref_id":"45"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Hemorrhagic Stroke\""}]}],"ref_id":"46"}],"node_type":"InValueSet","ref_id":"47"},{"children":[{"text":"\n              or "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Diagnosis"}]}],"ref_id":"48"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"49"}],"ref_id":"49"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Ischemic Stroke\""}]}],"ref_id":"50"}],"node_type":"InValueSet","ref_id":"51"}],"node_type":"Or","ref_id":"52"},{"children":[{"text":"\n          )"}]}],"node_type":"Or","ref_id":"52"}],"ref_id":"53"}],"ref_id":"53"}],"node_type":"Query","ref_id":"54"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"54"}],"ref_id":"55"}],"ref_id":"55"}],"node_type":"Query","ref_id":"56"}],"ref_id":"57"}],"define_name":"All Stroke Encounter"},{"children":[{"children":[{"children":[{"text":"define \"Encounter with Principal Diagnosis and Age\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"All Stroke Encounter\""}]}]}],"node_type":"ExpressionRef","ref_id":"58"},{"children":[{"text":" AllStrokeEncounter"}]}],"ref_id":"59"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"text":"AgeInYearsAt("}]},{"children":[{"children":[{"text":"date from"}]},{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"AllStrokeEncounter"}]}],"ref_id":"60"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"61"}],"node_type":"Property","ref_id":"61"}],"node_type":"Start","ref_id":"62"},{"children":[{"text":")"}]}],"node_type":"Start","ref_id":"62"}],"node_type":"DateFrom","ref_id":"63"},{"children":[{"text":")"}]}],"node_type":"CalculateAgeAt","ref_id":"64"},{"children":[{"text":"\u003e= 18"}],"node_type":"Literal","ref_id":"65"}],"ref_id":"66"}],"ref_id":"66"}],"node_type":"Query","ref_id":"67"}],"ref_id":"68"}],"define_name":"Encounter with Principal Diagnosis and Age"},{"children":[{"children":[{"children":[{"text":"define \"Ischemic Stroke Encounter\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Encounter with Principal Diagnosis and Age\""}]}]}],"node_type":"ExpressionRef","ref_id":"69"},{"children":[{"text":" EncounterWithAge"}]}],"ref_id":"70"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"EncounterWithAge.diagnoses"}]}]}],"node_type":"Property","ref_id":"71"},{"children":[{"text":" Diagnosis"}]}],"ref_id":"72"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Diagnosis"}]}],"ref_id":"73"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"74"}],"ref_id":"74"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Ischemic Stroke\""}]}],"ref_id":"75"}],"node_type":"InValueSet","ref_id":"76"},{"children":[{"text":"\n          and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Diagnosis"}]}],"ref_id":"77"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"rank"}]}],"node_type":"Property","ref_id":"78"}],"node_type":"Property","ref_id":"78"},{"children":[{"text":" = 1"}],"node_type":"Literal","ref_id":"79"}],"node_type":"Equal","ref_id":"80"}],"ref_id":"81"}],"ref_id":"81"}],"node_type":"Query","ref_id":"82"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"82"}],"ref_id":"83"}],"ref_id":"83"}],"node_type":"Query","ref_id":"84"}],"ref_id":"85"}],"define_name":"Ischemic Stroke Encounter"},{"children":[{"children":[{"children":[{"text":"define \"Ischemic Stroke Encounters with Discharge Disposition\":\n  "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Ischemic Stroke Encounter\""}]}]}],"node_type":"ExpressionRef","ref_id":"86"},{"children":[{"text":" IschemicStrokeEncounter"}]}],"ref_id":"87"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"IschemicStrokeEncounter"}]}],"ref_id":"88"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"dischargeDisposition"}]}],"ref_id":"89"}],"ref_id":"89"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Discharge To Acute Care Facility\""}]}],"ref_id":"90"}],"node_type":"InValueSet","ref_id":"91"},{"children":[{"text":"\n          or "}]},{"children":[{"children":[{"children":[{"children":[{"text":"IschemicStrokeEncounter"}]}],"ref_id":"92"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"dischargeDisposition"}]}],"ref_id":"93"}],"ref_id":"93"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Left Against Medical Advice\""}]}],"ref_id":"94"}],"node_type":"InValueSet","ref_id":"95"}],"node_type":"Or","ref_id":"96"},{"children":[{"text":"\n          or "}]},{"children":[{"children":[{"children":[{"children":[{"text":"IschemicStrokeEncounter"}]}],"ref_id":"97"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"dischargeDisposition"}]}],"ref_id":"98"}],"ref_id":"98"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Patient Expired\""}]}],"ref_id":"99"}],"node_type":"InValueSet","ref_id":"100"}],"node_type":"Or","ref_id":"101"},{"children":[{"text":"\n          or "}]},{"children":[{"children":[{"children":[{"children":[{"text":"IschemicStrokeEncounter"}]}],"ref_id":"102"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"dischargeDisposition"}]}],"ref_id":"103"}],"ref_id":"103"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Discharged to Home for Hospice Care\""}]}],"ref_id":"104"}],"node_type":"InValueSet","ref_id":"105"}],"node_type":"Or","ref_id":"106"},{"children":[{"text":"\n          or "}]},{"children":[{"children":[{"children":[{"children":[{"text":"IschemicStrokeEncounter"}]}],"ref_id":"107"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"dischargeDisposition"}]}],"ref_id":"108"}],"ref_id":"108"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Discharged to Health Care Facility for Hospice Care\""}]}],"ref_id":"109"}],"node_type":"InValueSet","ref_id":"110"}],"ref_id":"111"}],"ref_id":"111"}],"node_type":"Query","ref_id":"112"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"112"},{"children":[{"text":"\n  )"}]}],"node_type":"Query","ref_id":"112"}],"ref_id":"113"}],"define_name":"Ischemic Stroke Encounters with Discharge Disposition"},{"children":[{"children":[{"children":[{"text":"define \"Encounter with Comfort Measures during Hospitalization\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Ischemic Stroke Encounter\""}]}]}],"node_type":"ExpressionRef","ref_id":"114"},{"children":[{"text":" IschemicStrokeEncounter"}]}],"ref_id":"115"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"Intervention Comfort Measures\""}]}]}],"node_type":"ExpressionRef","ref_id":"116"},{"children":[{"text":" ComfortMeasure"}]}],"ref_id":"117"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"118"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\"("}]},{"children":[{"children":[{"children":[{"text":"ComfortMeasure"}]}],"ref_id":"119"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"120"}],"node_type":"Property","ref_id":"120"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"ComfortMeasure"}]}],"ref_id":"121"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"122"}],"node_type":"Property","ref_id":"122"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"123"}],"node_type":"FunctionRef","ref_id":"123"}],"node_type":"Start","ref_id":"124"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"ComfortMeasure"}]}],"ref_id":"125"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"126"}],"node_type":"Property","ref_id":"126"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"127"},{"children":[{"text":"during "}],"node_type":"In","ref_id":"131"},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"128"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"HospitalizationWithObservation\" ( "}]},{"children":[{"children":[{"text":"IschemicStrokeEncounter"}]}],"node_type":"AliasRef","ref_id":"129"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"130"}],"node_type":"FunctionRef","ref_id":"130"}],"node_type":"In","ref_id":"131"}],"ref_id":"132"}],"node_type":"Query","ref_id":"133"}],"ref_id":"134"}],"define_name":"Encounter with Comfort Measures during Hospitalization"},{"children":[{"children":[{"children":[{"text":"define function \"TruncateTime\"(Value "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"135"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"DateTime("}]},{"children":[{"children":[{"text":"year from "}]},{"children":[{"children":[{"text":"Value"}]}],"node_type":"OperandRef","ref_id":"136"}],"ref_id":"137"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"month from "}]},{"children":[{"children":[{"text":"Value"}]}],"node_type":"OperandRef","ref_id":"138"}],"ref_id":"139"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"day from "}]},{"children":[{"children":[{"text":"Value"}]}],"node_type":"OperandRef","ref_id":"140"}],"ref_id":"141"},{"children":[{"text":", 0, 0, 0, 0, "}],"ref_id":"142"},{"children":[{"children":[{"text":"timezoneoffset from "}]},{"children":[{"children":[{"text":"Value"}]}],"node_type":"OperandRef","ref_id":"146"}],"ref_id":"147"},{"children":[{"text":")"}]}],"node_type":"DateTime","ref_id":"148"}],"node_type":"DateTime","ref_id":"148"}],"ref_id":"149"}],"define_name":"TruncateTime"},{"children":[{"children":[{"children":[{"text":"define function \"CalendarDayOfOrDayAfter\"(StartValue "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"150"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"\"TruncateTime\"("}]},{"children":[{"children":[{"text":"StartValue"}]}],"node_type":"OperandRef","ref_id":"151"},{"children":[{"text":")"}]}],"ref_id":"152"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"\"TruncateTime\"("}]},{"children":[{"children":[{"children":[{"text":"StartValue"}]}],"node_type":"OperandRef","ref_id":"153"},{"children":[{"text":" + "}]},{"children":[{"children":[{"text":"2 days"}]}],"node_type":"Quantity","ref_id":"154"}],"node_type":"Add","ref_id":"155"},{"children":[{"text":")"}]}],"ref_id":"156"},{"children":[{"text":")"}]}],"node_type":"Interval","ref_id":"157"}],"node_type":"Interval","ref_id":"157"}],"ref_id":"158"}],"define_name":"CalendarDayOfOrDayAfter"},{"children":[{"children":[{"children":[{"text":"define function \"HospitalizationWithObservationLengthofStay\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"159"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"160"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"LengthInDays\" ( "}]},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"161"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"HospitalizationWithObservation\" ( "}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"162"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"163"}],"node_type":"FunctionRef","ref_id":"163"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"164"}],"node_type":"FunctionRef","ref_id":"164"}],"node_type":"FunctionRef","ref_id":"164"}],"ref_id":"165"}],"define_name":"HospitalizationWithObservationLengthofStay"}],"identifier":{"id":"TJCOverall","version":"6.0.000"}},"is_main_library":false,"is_top_level":true,"library_name":"TJCOverall","library_version":"6.0.000","statement_dependencies":[{"_id":"689268d7e8da6d1c0d5175fe","statement_name":"Encounter with Principal Diagnosis and Age","statement_references":[{"_id":"689268d7e8da6d1c0d5175fc","hqmf_id":null,"library_name":"TJCOverall","statement_name":"All Stroke Encounter"},{"_id":"689268d7e8da6d1c0d5175fd","hqmf_id":null,"library_name":"TJCOverall","statement_name":"Patient"}]},{"_id":"689268d7e8da6d1c0d5175ff","statement_name":"All Stroke Encounter","statement_references":[{"_id":"689268dfe8da6d1c0d517829","hqmf_id":null,"library_name":"TJCOverall","statement_name":"Non Elective Inpatient Encounter"}]},{"_id":"689268d7e8da6d1c0d517600","statement_name":"Non Elective Inpatient Encounter","statement_references":[{"_id":"689268dfe8da6d1c0d51782a","hqmf_id":null,"library_name":"MATGlobalCommonFunctions","statement_name":"LengthInDays"}]},{"_id":"689268d7e8da6d1c0d517601","statement_name":"Patient"},{"_id":"689268d7e8da6d1c0d517602","statement_name":"Ischemic Stroke Encounter","statement_references":[{"_id":"689268dfe8da6d1c0d51782b","hqmf_id":null,"library_name":"TJCOverall","statement_name":"Encounter with Principal Diagnosis and Age"}]},{"_id":"689268d7e8da6d1c0d517603","statement_name":"Intervention Comfort Measures"}]}],"created_at":null,"description":"Ischemic stroke patients with atrial fibrillation/flutter who are prescribed or continuing to take anticoagulation therapy at hospital discharge","hqmf_id":"2C928082-7C31-8117-017C-9395F18B1AEA","hqmf_set_id":"03876D69-085B-415C-AE9D-9924171040C2","hqmf_version_number":"12.0.000","main_cql_library":"AnticoagulationTherapyforAtrialFibrillationFlutter","measure_attributes":[{"code":"OTH","value":"71","name":"eCQM Identifier (Measure Authoring Tool)","code_obj":{"type":"CD","null_flavor":"OTH","original_text":"eCQM Identifier (Measure Authoring Tool)"},"value_obj":{"type":"ED","value":"71","media_type":"text/plain"}},{"code":"OTH","value":"Not Applicable","name":"NQF Number","code_obj":{"type":"CD","null_flavor":"OTH","original_text":"NQF Number"},"value_obj":{"type":"ED","value":"Not Applicable","media_type":"text/plain"}},{"code":"COPY","value":"Measure specifications are in the Public Domain.\n\nLOINC(R) copyright 2004-2021 Regenstrief Institute, Inc. This material contains SNOMED Clinical Terms(R) (SNOMED CT[R]) copyright 2004-2021 International Health Terminology Standards Development Organisation. ICD-10 copyright 2021 World Health Organization. All Rights Reserved.","name":"Copyright","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"COPY","title":"Copyright"},"value_obj":{"type":"ED","value":"Measure specifications are in the Public Domain.\n\nLOINC(R) copyright 2004-2021 Regenstrief Institute, Inc. This material contains SNOMED Clinical Terms(R) (SNOMED CT[R]) copyright 2004-2021 International Health Terminology Standards Development Organisation. ICD-10 copyright 2021 World Health Organization. All Rights Reserved.","media_type":"text/plain"}},{"code":"DISC","value":"These performance measures are not clinical guidelines and do not establish a standard of medical care, and have not been tested for all potential applications. The measures and specifications are provided without warranty.","name":"Disclaimer","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DISC","title":"Disclaimer"},"value_obj":{"type":"ED","value":"These performance measures are not clinical guidelines and do not establish a standard of medical care, and have not been tested for all potential applications. The measures and specifications are provided without warranty.","media_type":"text/plain"}},{"code":"MSRSCORE","name":"Measure Scoring","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRSCORE","title":"Measure Scoring"},"value_obj":{"type":"CD","system":"2.16.840.1.113883.5.1063","code":"PROPOR","title":"Proportion"}},{"code":"MSRTYPE","name":"Measure Type","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRTYPE","title":"Measure Type"},"value_obj":{"type":"CD","system":"2.16.840.1.113883.5.1063","code":"PROCESS","title":"PROCESS"}},{"code":"STRAT","value":"None","name":"Stratification","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"STRAT","title":"Stratification"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"MSRADJ","value":"None","name":"Risk Adjustment","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRADJ","title":"Risk Adjustment"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"MSRAGG","value":"None","name":"Rate Aggregation","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRAGG","title":"Rate Aggregation"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"RAT","value":"Nonvalvular atrial fibrillation (NVAF) is a common arrhythmia and an important risk factor for stroke. It is one of several conditions and lifestyle factors that have been identified as risk factors for stroke. It has been estimated that over 2 million adults in the United States have NVAF. While the median age of patients with atrial fibrillation is 75 years, the incidence increases with advancing age. For example, The Framingham Heart Study noted a dramatic increase in stroke risk associated with atrial fibrillation with advancing age, from one and a half percent for those 50 to 59 years of age to 23.5% for those 80 to 89 years of age. Furthermore, a prior stroke or transient ischemic attack (TIA) are among a limited number of predictors of high stroke risk within the population of patients with atrial fibrillation. Therefore, much emphasis has been placed on identifying methods for preventing recurrent ischemic stroke as well as preventing first stroke. Prevention strategies focus on the modifiable risk factors such as hypertension, smoking, and atrial fibrillation. Analysis of five placebo-controlled clinical trials investigating the efficacy of warfarin in the primary prevention of thromboembolic stroke, found the relative risk of thromboembolic stroke was reduced by 68% for atrial fibrillation patients treated with warfarin. The administration of anticoagulation therapy, unless there are contraindications, is an established effective strategy in preventing recurrent stroke in high stroke risk-atrial fibrillation patients with TIA or prior stroke.","name":"Rationale","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"RAT","title":"Rationale"},"value_obj":{"type":"ED","value":"Nonvalvular atrial fibrillation (NVAF) is a common arrhythmia and an important risk factor for stroke. It is one of several conditions and lifestyle factors that have been identified as risk factors for stroke. It has been estimated that over 2 million adults in the United States have NVAF. While the median age of patients with atrial fibrillation is 75 years, the incidence increases with advancing age. For example, The Framingham Heart Study noted a dramatic increase in stroke risk associated with atrial fibrillation with advancing age, from one and a half percent for those 50 to 59 years of age to 23.5% for those 80 to 89 years of age. Furthermore, a prior stroke or transient ischemic attack (TIA) are among a limited number of predictors of high stroke risk within the population of patients with atrial fibrillation. Therefore, much emphasis has been placed on identifying methods for preventing recurrent ischemic stroke as well as preventing first stroke. Prevention strategies focus on the modifiable risk factors such as hypertension, smoking, and atrial fibrillation. Analysis of five placebo-controlled clinical trials investigating the efficacy of warfarin in the primary prevention of thromboembolic stroke, found the relative risk of thromboembolic stroke was reduced by 68% for atrial fibrillation patients treated with warfarin. The administration of anticoagulation therapy, unless there are contraindications, is an established effective strategy in preventing recurrent stroke in high stroke risk-atrial fibrillation patients with TIA or prior stroke.","media_type":"text/plain"}},{"code":"CRS","value":"The administration of anticoagulation therapy, unless there are contraindications, is an established effective strategy in preventing recurrent stroke in high stroke risk atrial fibrillation patients with TIA or prior stroke","name":"Clinical Recommendation Statement","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"CRS","title":"Clinical Recommendation Statement"},"value_obj":{"type":"ED","value":"The administration of anticoagulation therapy, unless there are contraindications, is an established effective strategy in preventing recurrent stroke in high stroke risk atrial fibrillation patients with TIA or prior stroke","media_type":"text/plain"}},{"code":"IDUR","value":"Improvement noted as an increase in rate","name":"Improvement Notation","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"IDUR","title":"Improvement Notation"},"value_obj":{"type":"ED","value":"Improvement noted as an increase in rate","media_type":"text/plain"}},{"code":"REF","value":"CITATIONBerge, E., Abdelnoor, M., Nakstad, P. H., et al. (2000, April 8). Low molecular-weight heparin versus aspirin in patients with acute ischaemic stroke and atrial fibrillation: A double-blind randomised study. Lancet, 355(9211), 1205-1210.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONBerge, E., Abdelnoor, M., Nakstad, P. H., et al. (2000, April 8). Low molecular-weight heparin versus aspirin in patients with acute ischaemic stroke and atrial fibrillation: A double-blind randomised study. Lancet, 355(9211), 1205-1210.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONCenters for Disease Control and Prevention. (2009, May 1). Prevalence and most common causes of disability among adultsUnited States, 2005. Morbidity and Mortality Weekly Report, 58(16), 421-426.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONCenters for Disease Control and Prevention. (2009, May 1). Prevalence and most common causes of disability among adultsUnited States, 2005. Morbidity and Mortality Weekly Report, 58(16), 421-426.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONConnolly, S. J., Ezekowitz, M. D., Yusuf, S., et al. (2009, September 17). Dabigatran versus warfarin in patients with atrial fibrillation. New England Journal of Medicine, 361(12), 1139-1151.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONConnolly, S. J., Ezekowitz, M. D., Yusuf, S., et al. (2009, September 17). Dabigatran versus warfarin in patients with atrial fibrillation. New England Journal of Medicine, 361(12), 1139-1151.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONFuster, V., Ryden, L. E., Asinger, R. W., et al. (2001, October). ACC/AHA/ESC guidelines for the management of patients with atrial fibrillation: Executive summary. A report of the American College of Cardiology/American Heart Association Task Force on Practice Guidelines and the European Society of Cardiology Committee for Practice Guidelines and Policy Conferences (Committee to Develop Guidelines for the Management of Patients with Atrial Fibrillation). Journal of the American College of Cardiology, 38(4), 1231-1266.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONFuster, V., Ryden, L. E., Asinger, R. W., et al. (2001, October). ACC/AHA/ESC guidelines for the management of patients with atrial fibrillation: Executive summary. A report of the American College of Cardiology/American Heart Association Task Force on Practice Guidelines and the European Society of Cardiology Committee for Practice Guidelines and Policy Conferences (Committee to Develop Guidelines for the Management of Patients with Atrial Fibrillation). Journal of the American College of Cardiology, 38(4), 1231-1266.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONFuster, V., Ryden, L. E., Cannom, D. S., et al. (2006, August 15). ACC/AHA/ESC 2006 guidelines for the management of patients with atrial fibrillation: A report of the American College of Cardiology/American Heart Association Task Force on Practice Guidelines and the European Society of Cardiology Committee for Practice Guidelines (writing committee to revise the 2001 guidelines for the management of patients with atrial fibrillation). Circulation, 114(7), e257-354.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONFuster, V., Ryden, L. E., Cannom, D. S., et al. (2006, August 15). ACC/AHA/ESC 2006 guidelines for the management of patients with atrial fibrillation: A report of the American College of Cardiology/American Heart Association Task Force on Practice Guidelines and the European Society of Cardiology Committee for Practice Guidelines (writing committee to revise the 2001 guidelines for the management of patients with atrial fibrillation). Circulation, 114(7), e257-354.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONGoldstein, L. B., Adams, R., Alberts, M. J., et al. (2006, June). Primary prevention of ischemic stroke: A guideline from the American Heart Association/American Stroke Association Stroke Council: Cosponsored by the Atherosclerotic Peripheral Vascular Disease Interdisciplinary Working Group; Cardiovascular Nursing Council; Clinical Cardiology Council; Nutrition, Physical Activity, and Metabolism Council; and the Quality of Care and Outcomes Research Interdisciplinary Working Group: The American Academy of Neurology affirms the value of this guideline. Stroke, 37(6), 1583-1633.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONGoldstein, L. B., Adams, R., Alberts, M. J., et al. (2006, June). Primary prevention of ischemic stroke: A guideline from the American Heart Association/American Stroke Association Stroke Council: Cosponsored by the Atherosclerotic Peripheral Vascular Disease Interdisciplinary Working Group; Cardiovascular Nursing Council; Clinical Cardiology Council; Nutrition, Physical Activity, and Metabolism Council; and the Quality of Care and Outcomes Research Interdisciplinary Working Group: The American Academy of Neurology affirms the value of this guideline. Stroke, 37(6), 1583-1633.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONGorelick, P. B., Sacco, R. L., Smith, D. B., et al. (1999, March). Prevention of a first stroke: A review of guidelines and a multidisciplinary consensus statement from the National Stroke Association. JAMA, 281(12), 1112-1120.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONGorelick, P. B., Sacco, R. L., Smith, D. B., et al. (1999, March). Prevention of a first stroke: A review of guidelines and a multidisciplinary consensus statement from the National Stroke Association. JAMA, 281(12), 1112-1120.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONHart, R. G., Benavente, O., McBride R., et al. (1999, October 5). Antithrombotic therapy to prevent stroke in patients with atrial fibrillation: A meta-analysis. Annals of Internal Medicine, 131(7), 492-501.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONHart, R. G., Benavente, O., McBride R., et al. (1999, October 5). Antithrombotic therapy to prevent stroke in patients with atrial fibrillation: A meta-analysis. Annals of Internal Medicine, 131(7), 492-501.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONJauch, E. C., Saver, J. L., Adams, H. P., Jr., et al. (2013). Guidelines for the early management of patients with acute ischemic stroke: A guideline for health care professionals from the American Heart Association/American Stroke Association. Stroke, 44(3), 870-947.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONJauch, E. C., Saver, J. L., Adams, H. P., Jr., et al. (2013). Guidelines for the early management of patients with acute ischemic stroke: A guideline for health care professionals from the American Heart Association/American Stroke Association. Stroke, 44(3), 870-947.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONKernan, W. N., Ovbiagele, B., Black, H. R., et al. (2014, May). Guidelines for the prevention of stroke in patients with stroke and transient ischemic attack: A guideline for health care professionals from the American Heart Association/American Stroke Association. Stroke, 45(7), 2160-2223.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONKernan, W. N., Ovbiagele, B., Black, H. R., et al. (2014, May). Guidelines for the prevention of stroke in patients with stroke and transient ischemic attack: A guideline for health care professionals from the American Heart Association/American Stroke Association. Stroke, 45(7), 2160-2223.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONKleindorfer, D. O., Towfighi, A., Chaturvedi, S., Cockroft, K. M., Gutierrez, J., Lombardi-Hill, D., ... Williams, L. S. (2021). 2021 guideline for the prevention of stroke in patients with stroke and transient ischemic attack: A guideline from the American Heart Association/American Stroke Association. Stroke, 52(7), e364-e467. https://doi.org/10.1161/STR.0000000000000375","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONKleindorfer, D. O., Towfighi, A., Chaturvedi, S., Cockroft, K. M., Gutierrez, J., Lombardi-Hill, D., ... Williams, L. S. (2021). 2021 guideline for the prevention of stroke in patients with stroke and transient ischemic attack: A guideline from the American Heart Association/American Stroke Association. Stroke, 52(7), e364-e467. https://doi.org/10.1161/STR.0000000000000375","media_type":"text/plain"}},{"code":"REF","value":"CITATIONLin, H. J., Wolf, P. A., Kelly-Hayes, M., et al. (1996, October). Stroke severity in atrial fibrillation: The Framingham Study. Stroke 27(10), 1760-1764","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONLin, H. J., Wolf, P. A., Kelly-Hayes, M., et al. (1996, October). Stroke severity in atrial fibrillation: The Framingham Study. Stroke 27(10), 1760-1764","media_type":"text/plain"}},{"code":"REF","value":"CITATIONPenado, S., Cano, M., Acha, O., et al. (2003, February 15). Atrial fibrillation as a risk factor for stroke recurrence. American Journal of Medicine, 114 (3), 206-210.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONPenado, S., Cano, M., Acha, O., et al. (2003, February 15). Atrial fibrillation as a risk factor for stroke recurrence. American Journal of Medicine, 114 (3), 206-210.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONPowers, W. J., Rabinstein, A. A., Ackerson, T., et al. (2018, January). 2018 guidelines for the early management of patients with acute ischemic stroke: A guideline for health care professionals from the American Heart Association/American Stroke Association. Stroke, 49, e31-e32.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONPowers, W. J., Rabinstein, A. A., Ackerson, T., et al. (2018, January). 2018 guidelines for the early management of patients with acute ischemic stroke: A guideline for health care professionals from the American Heart Association/American Stroke Association. Stroke, 49, e31-e32.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONRoger, V. L., Go, A. S., Lloyd-Jones, D. M., et al. (2012, January 3). Heart disease and stroke statistics2012 update: A report from the American Heart Association. Circulation, 125(1), e2-e220.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONRoger, V. L., Go, A. S., Lloyd-Jones, D. M., et al. (2012, January 3). Heart disease and stroke statistics2012 update: A report from the American Heart Association. Circulation, 125(1), e2-e220.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONSaxena, R., \u0026 Koudstaal, P. J. (2011). Anticoagulants for preventing stroke in patients with nonrheumatic atrial fibrillation and a history of stroke or transient ischemic attack (review). Cochrane Database of Systematic Reviews, (4), CD000185.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONSaxena, R., \u0026 Koudstaal, P. J. (2011). Anticoagulants for preventing stroke in patients with nonrheumatic atrial fibrillation and a history of stroke or transient ischemic attack (review). Cochrane Database of Systematic Reviews, (4), CD000185.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONSaxena, R., Lewis, S., Berge, E., et al. (2001, October). Risk of early death and recurrent stroke and effect of heparin in 3,169 patients with acute ischemic stroke and atrial fibrillation in the International Stroke Trial. Stroke, 32(10), 2333-2337.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONSaxena, R., Lewis, S., Berge, E., et al. (2001, October). Risk of early death and recurrent stroke and effect of heparin in 3,169 patients with acute ischemic stroke and atrial fibrillation in the International Stroke Trial. Stroke, 32(10), 2333-2337.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONVan Walraven, C., Hart, R. G., Singer, D. E., et al. (2002, November 20).Oral anticoagulants vs. aspirin in nonvalvular atrial fibrillation: An individual patient meta-analysis. JAMA, 288(19), 2441-2448.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONVan Walraven, C., Hart, R. G., Singer, D. E., et al. (2002, November 20).Oral anticoagulants vs. aspirin in nonvalvular atrial fibrillation: An individual patient meta-analysis. JAMA, 288(19), 2441-2448.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONWann, L. S., Curtis, A. B., Ellenbogen, K. A., et al. (2011, March 15). 2011 ACCF/AHA/HRS focused update on the management of patients with atrial fibrillation (update on dabigatran): A report of the American College of Cardiology Foundation/American Heart Association Task Force on Practice Guidelines. Journal of the American College of Cardiology, 57(11), 1330-1337.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONWann, L. S., Curtis, A. B., Ellenbogen, K. A., et al. (2011, March 15). 2011 ACCF/AHA/HRS focused update on the management of patients with atrial fibrillation (update on dabigatran): A report of the American College of Cardiology Foundation/American Heart Association Task Force on Practice Guidelines. Journal of the American College of Cardiology, 57(11), 1330-1337.","media_type":"text/plain"}},{"code":"DEF","value":"None","name":"Definition","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DEF","title":"Definition"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"GUIDE","value":"The \"Non-elective Inpatient Encounter\" value set intends to capture all non-scheduled hospitalizations. This value set is a subset of the \"Inpatient Encounter\" value set, excluding concepts that specifically refer to elective hospital admissions. Non-elective Inpatient Encounters include emergency, urgent, and unplanned admissions.\n\nThe \"Medication, Discharge\" datatype refers to the discharge medication list and is intended to express medications ordered for post-discharge use.\n\nThe denominator population includes patients with inpatient hospitalizations and patients from Acute Hospital Care at Home programs, who are treated and billed as inpatients but receive care in their home.\n\nThis eCQM is an episode-based measure. An episode is defined as each inpatient hospitalization or encounter that ends during the measurement period.\n\nThis version of the eCQM uses QDM version 5.6. Please refer to the eCQI resource center (https://ecqi.healthit.gov/qdm) for more information on the QDM.","name":"Guidance","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"GUIDE","title":"Guidance"},"value_obj":{"type":"ED","value":"The \"Non-elective Inpatient Encounter\" value set intends to capture all non-scheduled hospitalizations. This value set is a subset of the \"Inpatient Encounter\" value set, excluding concepts that specifically refer to elective hospital admissions. Non-elective Inpatient Encounters include emergency, urgent, and unplanned admissions.\n\nThe \"Medication, Discharge\" datatype refers to the discharge medication list and is intended to express medications ordered for post-discharge use.\n\nThe denominator population includes patients with inpatient hospitalizations and patients from Acute Hospital Care at Home programs, who are treated and billed as inpatients but receive care in their home.\n\nThis eCQM is an episode-based measure. An episode is defined as each inpatient hospitalization or encounter that ends during the measurement period.\n\nThis version of the eCQM uses QDM version 5.6. Please refer to the eCQI resource center (https://ecqi.healthit.gov/qdm) for more information on the QDM.","media_type":"text/plain"}},{"code":"TRANF","value":"TBD","name":"Transmission Format","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"TRANF","title":"Transmission Format"},"value_obj":{"type":"ED","value":"TBD","media_type":"text/plain"}},{"code":"IPOP","value":"Inpatient hospitalizations for patients age 18 and older, discharged from inpatient care (non-elective admissions) with a principal diagnosis of ischemic or hemorrhagic stroke and a length of stay less than or equal to 120 days that ends during measurement period","name":"Initial Population","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"IPOP","title":"Initial Population"},"value_obj":{"type":"ED","value":"Inpatient hospitalizations for patients age 18 and older, discharged from inpatient care (non-elective admissions) with a principal diagnosis of ischemic or hemorrhagic stroke and a length of stay less than or equal to 120 days that ends during measurement period","media_type":"text/plain"}},{"code":"DENOM","value":"Inpatient hospitalizations for patients with a principal diagnosis of ischemic stroke, and a history of atrial ablation, or current or history of atrial fibrillation/flutter","name":"Denominator","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DENOM","title":"Denominator"},"value_obj":{"type":"ED","value":"Inpatient hospitalizations for patients with a principal diagnosis of ischemic stroke, and a history of atrial ablation, or current or history of atrial fibrillation/flutter","media_type":"text/plain"}},{"code":"DENEX","value":"* Inpatient hospitalizations for patients admitted for elective carotid intervention. This exclusion is implicitly modeled by only including non-elective hospitalizations.\n* Inpatient hospitalizations for patients discharged to another hospital\n* Inpatient hospitalizations for patients who left against medical advice\n* Inpatient hospitalizations for patients who expired\n* Inpatient hospitalizations for patients discharged to home for hospice care\n* Inpatient hospitalizations for patients discharged to a health care facility for hospice care\n* Inpatient hospitalizations for patients with comfort measures documented","name":"Denominator Exclusions","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DENEX","title":"Denominator Exclusions"},"value_obj":{"type":"ED","value":"* Inpatient hospitalizations for patients admitted for elective carotid intervention. This exclusion is implicitly modeled by only including non-elective hospitalizations.\n* Inpatient hospitalizations for patients discharged to another hospital\n* Inpatient hospitalizations for patients who left against medical advice\n* Inpatient hospitalizations for patients who expired\n* Inpatient hospitalizations for patients discharged to home for hospice care\n* Inpatient hospitalizations for patients discharged to a health care facility for hospice care\n* Inpatient hospitalizations for patients with comfort measures documented","media_type":"text/plain"}},{"code":"NUMER","value":"Inpatient hospitalizations for patients prescribed or continuing to take anticoagulation therapy at hospital discharge","name":"Numerator","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"NUMER","title":"Numerator"},"value_obj":{"type":"ED","value":"Inpatient hospitalizations for patients prescribed or continuing to take anticoagulation therapy at hospital discharge","media_type":"text/plain"}},{"code":"NUMEX","value":"Not Applicable","name":"Numerator Exclusions","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"NUMEX","title":"Numerator Exclusions"},"value_obj":{"type":"ED","value":"Not Applicable","media_type":"text/plain"}},{"code":"DENEXCEP","value":"Inpatient hospitalizations for patients with a documented reason for not prescribing anticoagulation therapy at discharge","name":"Denominator Exceptions","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DENEXCEP","title":"Denominator Exceptions"},"value_obj":{"type":"ED","value":"Inpatient hospitalizations for patients with a documented reason for not prescribing anticoagulation therapy at discharge","media_type":"text/plain"}},{"code":"SDE","value":"For every patient evaluated by this measure also identify payer, race, ethnicity and sex","name":"Supplemental Data Elements","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"SDE","title":"Supplemental Data Elements"},"value_obj":{"type":"ED","value":"For every patient evaluated by this measure also identify payer, race, ethnicity and sex","media_type":"text/plain"}}],"measure_period":{"type":"IVL_TS","low":{"type":"TS","value":"201201010000","inclusive?":true,"derived?":false},"high":{"type":"TS","value":"201212312359","inclusive?":true,"derived?":false},"width":{"type":"PQ","unit":"a","value":"1","inclusive?":true,"derived?":false}},"measure_scoring":"PROPORTION","population_criteria":{"IPP":{"conjunction?":true,"type":"IPP","hqmf_id":"8B8DC804-075C-4D86-99F7-98310D33FE00","preconditions":[{"id":2,"preconditions":[{"id":1,"reference":"AnticoagulationTherapyforAtrialFibrillationFlutter__Initial_Population__0756BF7D_0529_4C42_A3B8_D46150C75C7B"}],"conjunction_code":"allTrue"}]},"DENOM":{"conjunction?":true,"type":"DENOM","hqmf_id":"645BBEFD-66F3-42F1-8F6C-D92E534E3B25","preconditions":[{"id":4,"preconditions":[{"id":3,"reference":"AnticoagulationTherapyforAtrialFibrillationFlutter__Denominator__0756BF7D_0529_4C42_A3B8_D46150C75C7B"}],"conjunction_code":"allTrue"}]},"NUMER":{"conjunction?":true,"type":"NUMER","hqmf_id":"B1BE4822-DFC1-4BE3-938E-2B269C2EAE0A","preconditions":[{"id":6,"preconditions":[{"id":5,"reference":"AnticoagulationTherapyforAtrialFibrillationFlutter__Numerator__0756BF7D_0529_4C42_A3B8_D46150C75C7B"}],"conjunction_code":"allTrue"}]},"DENEXCEP":{"conjunction?":true,"type":"DENEXCEP","hqmf_id":"1CE1C57A-D319-4752-A993-35FC676639C1","preconditions":[{"id":8,"preconditions":[{"id":7,"reference":"AnticoagulationTherapyforAtrialFibrillationFlutter__Denominator_Exceptions__0756BF7D_0529_4C42_A3B8_D46150C75C7B"}],"conjunction_code":"atLeastOneTrue"}]},"DENEX":{"conjunction?":true,"type":"DENEX","hqmf_id":"4840F304-B9E4-4AA9-AD66-0111C379C63B","preconditions":[{"id":10,"preconditions":[{"id":9,"reference":"AnticoagulationTherapyforAtrialFibrillationFlutter__Denominator_Exclusions__0756BF7D_0529_4C42_A3B8_D46150C75C7B"}],"conjunction_code":"atLeastOneTrue"}]}},"population_sets":[{"_id":"689268dfe8da6d1c0d51782c","population_set_id":"PopulationSet_1","populations":{"DENEX":{"_id":"689268dfe8da6d1c0d51782d","hqmf_id":"4840F304-B9E4-4AA9-AD66-0111C379C63B","library_name":"AnticoagulationTherapyforAtrialFibrillationFlutter","statement_name":"Denominator Exclusions"},"DENEXCEP":{"_id":"689268dfe8da6d1c0d51782e","hqmf_id":"1CE1C57A-D319-4752-A993-35FC676639C1","library_name":"AnticoagulationTherapyforAtrialFibrillationFlutter","statement_name":"Denominator Exceptions"},"DENOM":{"_id":"689268dfe8da6d1c0d51782f","hqmf_id":"645BBEFD-66F3-42F1-8F6C-D92E534E3B25","library_name":"AnticoagulationTherapyforAtrialFibrillationFlutter","statement_name":"Denominator"},"IPP":{"_id":"689268dfe8da6d1c0d517830","hqmf_id":"8B8DC804-075C-4D86-99F7-98310D33FE00","library_name":"AnticoagulationTherapyforAtrialFibrillationFlutter","statement_name":"Initial Population"},"NUMER":{"_id":"689268dfe8da6d1c0d517831","hqmf_id":"B1BE4822-DFC1-4BE3-938E-2B269C2EAE0A","library_name":"AnticoagulationTherapyforAtrialFibrillationFlutter","statement_name":"Numerator"},"_id":"689268dfe8da6d1c0d517832","_type":"CQM::ProportionPopulationMap"},"supplemental_data_elements":[{"_id":"689268d7e8da6d1c0d5175d6","hqmf_id":"F99F71C7-8CCF-4C18-A8A2-CC8DCA045BC0","library_name":"AnticoagulationTherapyforAtrialFibrillationFlutter","statement_name":"SDE Ethnicity"},{"_id":"689268d7e8da6d1c0d5175d7","hqmf_id":"80B8D998-108C-493A-8469-3FB7292F98BA","library_name":"AnticoagulationTherapyforAtrialFibrillationFlutter","statement_name":"SDE Payer"},{"_id":"689268d7e8da6d1c0d5175d8","hqmf_id":"4D33F8F5-567F-45C8-A1A5-63C408E3B6ED","library_name":"AnticoagulationTherapyforAtrialFibrillationFlutter","statement_name":"SDE Race"},{"_id":"689268d7e8da6d1c0d5175d9","hqmf_id":"C53C7138-A309-40F5-A1AC-CDA4F573C891","library_name":"AnticoagulationTherapyforAtrialFibrillationFlutter","statement_name":"SDE Sex"}],"title":"Population Criteria Section"}],"source_data_criteria":[{"_id":"689268dfe8da6d1c0d517833","_type":"QDM::PatientCharacteristicPayer","codeListId":"2.16.840.1.114222.4.11.3591","dataElementCodes":[],"description":"Patient Characteristic Payer: Payer","hqmfOid":"2.16.840.1.113883.10.20.28.4.58","id":"689268dfe8da6d1c0d517833","qdmCategory":"patient_characteristic","qdmStatus":"payer","qdmTitle":"Patient Characteristic Payer","qdmVersion":"5.6","relevantPeriod":null},{"_id":"689268d7e8da6d1c0d517607","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.117.1.7.1.424","dataElementCodes":[],"description":"Encounter, Performed: Non-ElectiveInpatientEncounter","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"689268d7e8da6d1c0d517607","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"689268dfe8da6d1c0d517834","_type":"QDM::ProcedurePerformed","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"2.16.840.1.113883.3.117.1.7.1.203","components":null,"dataElementCodes":[],"description":"Procedure, Performed: AtrialAblation","hqmfOid":"2.16.840.1.113883.10.20.28.4.67","id":"689268dfe8da6d1c0d517834","incisionDatetime":null,"method":null,"negationRationale":null,"qdmCategory":"procedure","qdmStatus":"performed","qdmTitle":"Procedure, Performed","qdmVersion":"5.6","rank":null,"reason":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null,"status":null},{"_id":"689268dfe8da6d1c0d517835","_type":"QDM::PatientCharacteristicSex","codeListId":"2.16.840.1.113762.1.4.1","dataElementCodes":[],"description":"Patient Characteristic Sex: ONCAdministrativeSex","hqmfOid":"2.16.840.1.113883.10.20.28.4.55","id":"689268dfe8da6d1c0d517835","qdmCategory":"patient_characteristic","qdmStatus":"gender","qdmTitle":"Patient Characteristic Sex","qdmVersion":"5.6"},{"_id":"689268dfe8da6d1c0d517836","_type":"QDM::PatientCharacteristicEthnicity","codeListId":"2.16.840.1.114222.4.11.837","dataElementCodes":[],"description":"Patient Characteristic Ethnicity: Ethnicity","hqmfOid":"2.16.840.1.113883.10.20.28.4.56","id":"689268dfe8da6d1c0d517836","qdmCategory":"patient_characteristic","qdmStatus":"ethnicity","qdmTitle":"Patient Characteristic Ethnicity","qdmVersion":"5.6"},{"_id":"689268dfe8da6d1c0d517837","_type":"QDM::InterventionOrder","authorDatetime":null,"codeListId":"1.3.6.1.4.1.33895.1.3.0.45","dataElementCodes":[],"description":"Intervention, Order: ComfortMeasures","hqmfOid":"2.16.840.1.113883.10.20.28.4.35","id":"689268dfe8da6d1c0d517837","negationRationale":null,"qdmCategory":"intervention","qdmStatus":"order","qdmTitle":"Intervention, Order","qdmVersion":"5.6","reason":null},{"_id":"689268dfe8da6d1c0d517838","_type":"QDM::InterventionPerformed","authorDatetime":null,"codeListId":"1.3.6.1.4.1.33895.1.3.0.45","dataElementCodes":[],"description":"Intervention, Performed: ComfortMeasures","hqmfOid":"2.16.840.1.113883.10.20.28.4.36","id":"689268dfe8da6d1c0d517838","negationRationale":null,"qdmCategory":"intervention","qdmStatus":"performed","qdmTitle":"Intervention, Performed","qdmVersion":"5.6","reason":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null,"status":null},{"_id":"689268dfe8da6d1c0d517839","_type":"QDM::MedicationDischarge","authorDatetime":null,"codeListId":"2.16.840.1.113883.3.117.1.7.1.200","dataElementCodes":[],"daysSupplied":null,"description":"Medication, Discharge: AnticoagulantTherapy","dosage":null,"frequency":null,"hqmfOid":"2.16.840.1.113883.10.20.28.4.48","id":"689268dfe8da6d1c0d517839","negationRationale":null,"qdmCategory":"medication","qdmStatus":"discharge","qdmTitle":"Medication, Discharge","qdmVersion":"5.6","refills":null,"route":null,"supply":null},{"_id":"689268d7e8da6d1c0d517608","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113762.1.4.1111.143","dataElementCodes":[],"description":"Encounter, Performed: ObservationServices","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"689268d7e8da6d1c0d517608","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"689268dfe8da6d1c0d51783a","_type":"QDM::PatientCharacteristicRace","codeListId":"2.16.840.1.114222.4.11.836","dataElementCodes":[],"description":"Patient Characteristic Race: Race","hqmfOid":"2.16.840.1.113883.10.20.28.4.59","id":"689268dfe8da6d1c0d51783a","qdmCategory":"patient_characteristic","qdmStatus":"race","qdmTitle":"Patient Characteristic Race","qdmVersion":"5.6"},{"_id":"689268dfe8da6d1c0d51783b","_type":"QDM::Diagnosis","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"2.16.840.1.113883.3.117.1.7.1.202","dataElementCodes":[],"description":"Diagnosis: AtrialFibrillation/Flutter","hqmfOid":"2.16.840.1.113883.10.20.28.4.110","id":"689268dfe8da6d1c0d51783b","prevalencePeriod":null,"qdmCategory":"condition","qdmTitle":"Diagnosis","qdmVersion":"5.6","qrdaOid":"2.16.840.1.113883.10.20.24.3.135","severity":null},{"_id":"689268d7e8da6d1c0d517609","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.117.1.7.1.292","dataElementCodes":[],"description":"Encounter, Performed: EmergencyDepartmentVisit","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"689268d7e8da6d1c0d517609","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null}],"title":"Anticoagulation Therapy for Atrial Fibrillation/Flutter","updated_at":null,"value_set_ids":["689268dfe8da6d1c0d517807","689268dfe8da6d1c0d517808","689268dfe8da6d1c0d517809","689268dfe8da6d1c0d51780a","689268dfe8da6d1c0d51780b","689268dfe8da6d1c0d51780c","689268dfe8da6d1c0d51780d","689268dfe8da6d1c0d51780e","689268dfe8da6d1c0d51780f","689268dfe8da6d1c0d517810","689268dfe8da6d1c0d517811","689268dfe8da6d1c0d517812","689268dfe8da6d1c0d517813","689268dfe8da6d1c0d517814","689268dfe8da6d1c0d517815","689268dfe8da6d1c0d517816","689268dfe8da6d1c0d517817","689268dfe8da6d1c0d517818","689268dfe8da6d1c0d517819","689268dfe8da6d1c0d51781a","689268dfe8da6d1c0d51781b","689268dfe8da6d1c0d51781c","689268dfe8da6d1c0d51781d"]}