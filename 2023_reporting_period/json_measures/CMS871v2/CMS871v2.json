{"_id":"68926901e8da6d1c0d51891d","calculate_sdes":null,"calculation_method":"PATIENT","cms_id":"CMS871v2","component":false,"component_hqmf_set_ids":[],"composite":false,"composite_hqmf_set_id":null,"cql_libraries":[{"_id":"689268fde8da6d1c0d518474","cql":"library HospitalHarmHyperglycemiainHospitalizedPatients version '2.0.000'\r\n\r\nusing QDM version '5.6'\r\n\r\ninclude MATGlobalCommonFunctions version '7.0.000' called Global\r\n\r\nvalueset \"Diabetes\": 'urn:oid:2.16.840.1.113883.3.464.1003.103.12.1001'\r\nvalueset \"Encounter Inpatient\": 'urn:oid:2.16.840.1.113883.3.666.5.307'\r\nvalueset \"Ethnicity\": 'urn:oid:2.16.840.1.114222.4.11.837'\r\nvalueset \"Glucose Lab Test Mass Per Volume\": 'urn:oid:2.16.840.1.113762.1.4.1248.34'\r\nvalueset \"Hypoglycemics Treatment Medications\": 'urn:oid:2.16.840.1.113762.1.4.1196.394'\r\nvalueset \"ONC Administrative Sex\": 'urn:oid:2.16.840.1.113762.1.4.1'\r\nvalueset \"Payer\": 'urn:oid:2.16.840.1.114222.4.11.3591'\r\nvalueset \"Race\": 'urn:oid:2.16.840.1.114222.4.11.836'\r\n\r\nparameter \"Measurement Period\" Interval\u003cDateTime\u003e\r\n\r\ncontext Patient\r\n\r\ndefine \"Days in Hospitalization\":\r\n  \"Initial Population\" EligibleInpatientHospitalization\r\n    let period: Global.\"HospitalizationWithObservation\" ( EligibleInpatientHospitalization ),\r\n    relevantPeriod: \"Hospital Days Max 10\"(period)\r\n    return Tuple {\r\n      encounter: EligibleInpatientHospitalization,\r\n      hospitalizationPeriod: period,\r\n      relevantPeriod: relevantPeriod,\r\n      relevantDays: \"Days In Period\"(relevantPeriod)\r\n    }\r\n\r\ndefine \"Days With Glucose Results\":\r\n  \"Days in Hospitalization\" InpatientHospitalDays\r\n    return Tuple {\r\n      encounter: InpatientHospitalDays.encounter,\r\n      relevantPeriod: InpatientHospitalDays.relevantPeriod,\r\n      relevantDays: ( InpatientHospitalDays.relevantDays EncounterDay\r\n          return Tuple {\r\n            dayIndex: EncounterDay.dayIndex,\r\n            dayPeriod: EncounterDay.dayPeriod,\r\n            hasSevereResult: exists ( [\"Laboratory Test, Performed\": \"Glucose Lab Test Mass Per Volume\"] BloodGlucoseLab1\r\n                where BloodGlucoseLab1.result \u003e 300 'mg/dL'\r\n                  and BloodGlucoseLab1.relevantDatetime during EncounterDay.dayPeriod\r\n            ),\r\n            hasElevatedResult: exists ( [\"Laboratory Test, Performed\": \"Glucose Lab Test Mass Per Volume\"] BloodGlucoseLab2\r\n                where BloodGlucoseLab2.result \u003e= 200 'mg/dL'\r\n                  and BloodGlucoseLab2.relevantDatetime during EncounterDay.dayPeriod\r\n            ),\r\n            hasNoGlucoseTest: not exists ( [\"Laboratory Test, Performed\": \"Glucose Lab Test Mass Per Volume\"] BloodGlucoseLab3\r\n                where BloodGlucoseLab3.relevantDatetime during EncounterDay.dayPeriod\r\n            )\r\n          }\r\n      )\r\n    }\n\n/*# days with hyper events uses \"Days With Glucose Results\" to find if hyper event on each day. Skips 1st day in 'RelevantDays`. Returns boolean based on: Today high result OR Today no result AND Yesterday high result AND 2 days ago high result*/\r\n\r\ndefine \"Days With Hyperglycemic Events\":\r\n  \"Days With Glucose Results\" EncounterWithResultDays\r\n    let eligibleEventDays: EncounterWithResultDays.relevantDays EncounterDay\r\n      where EncounterDay.dayIndex \u003e 1\r\n      return Tuple {\r\n        dayIndex: EncounterDay.dayIndex,\r\n        dayPeriod: EncounterDay.dayPeriod,\r\n        hasHyperglycemicEvent: ( EncounterDay.hasSevereResult\r\n            or ( EncounterDay.hasNoGlucoseTest\r\n                and EncounterWithResultDays.relevantDays[EncounterDay.dayIndex - 2].hasElevatedResult\r\n                and EncounterWithResultDays.relevantDays[EncounterDay.dayIndex - 3].hasElevatedResult\r\n            )\r\n        )\r\n      }\r\n    return Tuple {\r\n      encounter: EncounterWithResultDays.encounter,\r\n      relevantPeriod: EncounterWithResultDays.relevantPeriod,\r\n      eligibleEventDays: eligibleEventDays\r\n    }\r\n\r\ndefine \"Denominator\":\r\n  \"Initial Population\"\r\n\r\ndefine \"Denominator Exclusions\":\r\n  \"Encounter With First Blood Glucose Greater Than or Equal to 1000\"\n\n/** Using the already calculated pairing of hospitalization periods with encounters, filter on ones with \n * any elevated (\u003e= 200) blood glucose reading during the hospitalization*/\r\n\r\ndefine \"Encounter With Elevated Blood Glucose Lab\":\r\n  \"Encounter With Hospitalization Period\" Hospitalization\r\n    with [\"Laboratory Test, Performed\": \"Glucose Lab Test Mass Per Volume\"] BloodGlucoseLab\r\n      such that BloodGlucoseLab.relevantDatetime during Hospitalization.hospitalizationPeriod\r\n        and BloodGlucoseLab.result \u003e= 200 'mg/dL'\r\n    return Hospitalization.encounter\n\n/** Using the already calculated pairing of hospitalization periods with encounters, filter on ones with \n * diabetes and return the encounter.*/\r\n\r\ndefine \"Encounter With Existing Diabetes Diagnosis\":\r\n  \"Encounter With Hospitalization Period\" Hospitalization\r\n    with [\"Diagnosis\": \"Diabetes\"] Diabetes\r\n      such that Diabetes.prevalencePeriod starts before \r\n      end of Hospitalization.hospitalizationPeriod\r\n    return Hospitalization.encounter\r\n\r\ndefine \"Encounter With First Blood Glucose Greater Than or Equal to 1000\":\r\n  \"Qualifying Encounter\" InpatientHospitalization\r\n    with \"First Blood Glucose Within 1 Hour Prior To and 6 Hours After Encounter Start\" FirstGlucoseResult\r\n      such that FirstGlucoseResult.result \u003e= 1000 'mg/dL'\n\n/** Create paring of encounters to hospitalization period so this calculation can be inspected and the result \n * can be reused, making the logic faster.*/\r\n\r\ndefine \"Encounter With Hospitalization Period\":\r\n  \"Qualifying Encounter\" InpatientHospitalization\r\n    return Tuple {\r\n      encounter: InpatientHospitalization,\r\n      hospitalizationPeriod: Global.\"HospitalizationWithObservation\" ( InpatientHospitalization )\r\n    }\r\n\r\ndefine \"Encounter With Hyperglycemic Events\":\r\n  \"Days With Hyperglycemic Events\" HyperglycemicEventDays\r\n    where exists ( HyperglycemicEventDays.eligibleEventDays EligibleEventDay\r\n        where EligibleEventDay.hasHyperglycemicEvent\r\n    )\r\n    return HyperglycemicEventDays.encounter\r\n\r\ndefine \"Encounter With Hypoglycemic Medication\":\r\n  \"Encounter With Hospitalization Period\" Hospitalization\r\n    with [\"Medication, Administered\": \"Hypoglycemics Treatment Medications\"] HypoglycemicMed\r\n      such that Global.\"NormalizeInterval\" ( HypoglycemicMed.relevantDatetime, HypoglycemicMed.relevantPeriod ) starts during Hospitalization.hospitalizationPeriod\r\n    return Hospitalization.encounter\r\n\r\ndefine \"First Blood Glucose Within 1 Hour Prior To and 6 Hours After Encounter Start\":\r\n  First([\"Laboratory Test, Performed\": \"Glucose Lab Test Mass Per Volume\"] FirstBloodGlucose\r\n      with(\"Qualifying Encounter\")InpatientEncounter\r\n        such that FirstBloodGlucose.relevantDatetime during Interval[(start of Global.\"HospitalizationWithObservation\"(InpatientEncounter)- 1 hour),(start of Global.\"HospitalizationWithObservation\"(InpatientEncounter)+ 6 hours)]\r\n      sort by relevantDatetime\r\n  )\r\n\r\ndefine \"Initial Population\":\r\n  \"Encounter With Existing Diabetes Diagnosis\"\r\n    union \"Encounter With Hypoglycemic Medication\"\r\n    union \"Encounter With Elevated Blood Glucose Lab\"\r\n\r\ndefine \"Numerator\":\r\n  \"Encounter With Hyperglycemic Events\"\r\n\r\ndefine \"Qualifying Encounter\":\r\n  [\"Encounter, Performed\": \"Encounter Inpatient\"] InpatientEncounter\r\n    where InpatientEncounter.relevantPeriod ends during day of \"Measurement Period\"\r\n      and AgeInYearsAt(date from start of Global.\"HospitalizationWithObservation\"(InpatientEncounter))\u003e= 18\r\n\r\ndefine \"SDE Ethnicity\":\r\n  [\"Patient Characteristic Ethnicity\": \"Ethnicity\"]\r\n\r\ndefine \"SDE Payer\":\r\n  [\"Patient Characteristic Payer\": \"Payer\"]\r\n\r\ndefine \"SDE Race\":\r\n  [\"Patient Characteristic Race\": \"Race\"]\r\n\r\ndefine \"SDE Sex\":\r\n  [\"Patient Characteristic Sex\": \"ONC Administrative Sex\"]\n\n/**\n * Creates a list of 24 hour long intervals in an interval paired with the index (1 indexed) to which 24 hour interval it is.*/\r\n\r\ndefine function \"Days In Period\"(Period Interval\u003cDateTime\u003e):\r\n  ( \"Interval To Day Numbers\"(Period)) DayIndex\r\n    let startPeriod: start of Period + ( 24 hours * ( DayIndex - 1 ) ),\r\n    endPeriod: if ( hours between startPeriod and \r\n      end of Period \u003c 24\r\n    ) then startPeriod \r\n      else start of Period + ( 24 hours * DayIndex )\r\n    return Tuple {\r\n      dayIndex: DayIndex,\r\n      dayPeriod: Interval[startPeriod, endPeriod )\r\n    }\n\n/**\n * Crops an interval to a maximum length of 10 days.*/\r\n\r\ndefine function \"Hospital Days Max 10\"(Period Interval\u003cDateTime\u003e):\r\n  Interval[start of Period, Min({ \r\n    end of Period, start of Period + 10 days }\r\n  )]\n\n/**\n * Counts the number of eligible days with a hyperglycemic event in an encounter. This simply filters and counts the data built in\n * \"Days With Hyperglycemic Events\".*/\r\n\r\ndefine function \"Numerator Observations\"(QualifyingEncounter \"Encounter, Performed\"):\r\n  singleton from ( \"Days With Hyperglycemic Events\" EncounterWithEventDays\r\n      where EncounterWithEventDays.encounter = QualifyingEncounter\r\n      return Count(EncounterWithEventDays.eligibleEventDays EligibleEventDay\r\n          where EligibleEventDay.hasHyperglycemicEvent\r\n      )\r\n  )\n\n/** Creates a list of integers from 1 to how many days are in the interval. Note, this wont create an index for\n * the final day if it is less than 24 hours. This also includes the first 24 hour period.*/\r\n\r\ndefine function \"Interval To Day Numbers\"(Period Interval\u003cDateTime\u003e):\r\n  ( expand { Interval[1, duration in days between start of Period and \r\n  end of Period]} ) DayNumber\r\n    return \r\n    end of DayNumber\n\n/**\n * Counts the number of eligible days in an encounter. This simply filters and counts the data built in\n * \"Days With Glucose Results\".*/\r\n\r\ndefine function \"Denominator Observations\"(QualifyingEncounter \"Encounter, Performed\"):\r\n  singleton from ( \"Days With Hyperglycemic Events\" EncounterWithEventDays\r\n      where EncounterWithEventDays.encounter = QualifyingEncounter\r\n      return Count(EncounterWithEventDays.eligibleEventDays)\r\n  )","elm":{"library":{"annotation":[{"translatorOptions":"EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion,DisableMethodInvocation","type":"CqlToElmInfo"},{"type":"Annotation","s":{"r":"397","s":[{"value":["","library HospitalHarmHyperglycemiainHospitalizedPatients version '2.0.000'"]}]}}],"identifier":{"id":"HospitalHarmHyperglycemiainHospitalizedPatients","version":"2.0.000"},"schemaIdentifier":{"id":"urn:hl7-org:elm","version":"r1"},"usings":{"def":[{"localIdentifier":"System","uri":"urn:hl7-org:elm-types:r1"},{"localId":"1","locator":"3:1-3:23","localIdentifier":"QDM","uri":"urn:healthit-gov:qdm:v5_6","version":"5.6","annotation":[{"type":"Annotation","s":{"r":"1","s":[{"value":["","using "]},{"s":[{"value":["QDM"]}]},{"value":[" version ","'5.6'"]}]}}]}]},"includes":{"def":[{"localId":"2","locator":"5:1-5:64","localIdentifier":"Global","path":"MATGlobalCommonFunctions","version":"7.0.000","annotation":[{"type":"Annotation","s":{"r":"2","s":[{"value":["","include "]},{"s":[{"value":["MATGlobalCommonFunctions"]}]},{"value":[" version ","'7.0.000'"," called ","Global"]}]}}]}]},"parameters":{"def":[{"localId":"13","locator":"16:1-16:49","name":"Measurement Period","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"13","s":[{"value":["","parameter ","\"Measurement Period\""," "]},{"r":"12","s":[{"value":["Interval\u003c"]},{"r":"11","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}}],"parameterTypeSpecifier":{"localId":"12","locator":"16:32-16:49","type":"IntervalTypeSpecifier","pointType":{"localId":"11","locator":"16:41-16:48","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},"valueSets":{"def":[{"localId":"3","locator":"7:1-7:71","name":"Diabetes","id":"2.16.840.1.113883.3.464.1003.103.12.1001","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"3","s":[{"value":["","valueset ","\"Diabetes\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.103.12.1001'"]}]}}]},{"localId":"4","locator":"8:1-8:71","name":"Encounter Inpatient","id":"2.16.840.1.113883.3.666.5.307","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"4","s":[{"value":["","valueset ","\"Encounter Inpatient\"",": ","'urn:oid:2.16.840.1.113883.3.666.5.307'"]}]}}]},{"localId":"5","locator":"9:1-9:58","name":"Ethnicity","id":"2.16.840.1.114222.4.11.837","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"5","s":[{"value":["","valueset ","\"Ethnicity\"",": ","'urn:oid:2.16.840.1.114222.4.11.837'"]}]}}]},{"localId":"6","locator":"10:1-10:84","name":"Glucose Lab Test Mass Per Volume","id":"2.16.840.1.113762.1.4.1248.34","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"6","s":[{"value":["","valueset ","\"Glucose Lab Test Mass Per Volume\"",": ","'urn:oid:2.16.840.1.113762.1.4.1248.34'"]}]}}]},{"localId":"7","locator":"11:1-11:88","name":"Hypoglycemics Treatment Medications","id":"2.16.840.1.113762.1.4.1196.394","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"7","s":[{"value":["","valueset ","\"Hypoglycemics Treatment Medications\"",": ","'urn:oid:2.16.840.1.113762.1.4.1196.394'"]}]}}]},{"localId":"8","locator":"12:1-12:68","name":"ONC Administrative Sex","id":"2.16.840.1.113762.1.4.1","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"8","s":[{"value":["","valueset ","\"ONC Administrative Sex\"",": ","'urn:oid:2.16.840.1.113762.1.4.1'"]}]}}]},{"localId":"9","locator":"13:1-13:55","name":"Payer","id":"2.16.840.1.114222.4.11.3591","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"9","s":[{"value":["","valueset ","\"Payer\"",": ","'urn:oid:2.16.840.1.114222.4.11.3591'"]}]}}]},{"localId":"10","locator":"14:1-14:53","name":"Race","id":"2.16.840.1.114222.4.11.836","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"10","s":[{"value":["","valueset ","\"Race\"",": ","'urn:oid:2.16.840.1.114222.4.11.836'"]}]}}]}]},"contexts":{"def":[{"locator":"18:1-18:15","name":"Patient"}]},"statements":{"def":[{"locator":"18:1-18:15","name":"Patient","context":"Patient","expression":{"type":"SingletonFrom","operand":{"locator":"18:1-18:15","dataType":"{urn:healthit-gov:qdm:v5_6}Patient","templateId":"Patient","type":"Retrieve"}}},{"localId":"30","locator":"142:1-145:107","name":"Qualifying Encounter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"30","s":[{"value":["","define ","\"Qualifying Encounter\"",":\n  "]},{"r":"29","s":[{"s":[{"r":"15","s":[{"r":"14","s":[{"r":"14","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Encounter Inpatient\""]}]},{"value":["]"]}]}]},{"value":[" ","InpatientEncounter"]}]}]},{"value":["\n    "]},{"r":"28","s":[{"value":["where "]},{"r":"28","s":[{"r":"19","s":[{"r":"17","s":[{"r":"16","s":[{"value":["InpatientEncounter"]}]},{"value":["."]},{"r":"17","s":[{"value":["relevantPeriod"]}]}]},{"r":"19","value":[" ","ends during day of"," "]},{"r":"18","s":[{"value":["\"Measurement Period\""]}]}]},{"value":["\n      and "]},{"r":"27","s":[{"r":"25","s":[{"value":["AgeInYearsAt","("]},{"r":"24","s":[{"value":["date from "]},{"r":"23","s":[{"value":["start of "]},{"r":"22","s":[{"r":"20","s":[{"value":["Global"]}]},{"value":["."]},{"r":"22","s":[{"value":["\"HospitalizationWithObservation\"","("]},{"r":"21","s":[{"value":["InpatientEncounter"]}]},{"value":[")"]}]}]}]}]},{"value":[")"]}]},{"r":"26","value":["\u003e="," ","18"]}]}]}]}]}]}}],"expression":{"localId":"29","locator":"143:3-145:107","type":"Query","source":[{"localId":"15","locator":"143:3-143:68","alias":"InpatientEncounter","expression":{"localId":"14","locator":"143:3-143:49","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"143:28-143:48","name":"Encounter Inpatient","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"28","locator":"144:5-145:107","type":"And","operand":[{"localId":"19","locator":"144:11-144:83","precision":"Day","type":"In","operand":[{"locator":"144:45-144:48","type":"End","operand":{"localId":"17","locator":"144:11-144:43","path":"relevantPeriod","scope":"InpatientEncounter","type":"Property"}},{"localId":"18","locator":"144:64-144:83","name":"Measurement Period","type":"ParameterRef"}]},{"localId":"27","locator":"145:11-145:107","type":"GreaterOrEqual","operand":[{"localId":"25","locator":"145:11-145:102","precision":"Year","type":"CalculateAgeAt","operand":[{"type":"ToDate","operand":{"path":"birthDatetime","type":"Property","source":{"name":"Patient","type":"ExpressionRef"}}},{"localId":"24","locator":"145:24-145:101","type":"DateFrom","operand":{"localId":"23","locator":"145:34-145:101","type":"Start","operand":{"localId":"22","locator":"145:43-145:101","name":"HospitalizationWithObservation","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"21","locator":"145:83-145:100","name":"InpatientEncounter","type":"AliasRef"}]}}}]},{"localId":"26","locator":"145:106-145:107","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"18","type":"Literal"}]}]}}},{"localId":"40","locator":"107:1-112:5","name":"Encounter With Hospitalization Period","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"40","s":[{"value":["/** Create paring of encounters to hospitalization period so this calculation can be inspected and the result \n * can be reused, making the logic faster.*/","define ","\"Encounter With Hospitalization Period\"",":\n  "]},{"r":"39","s":[{"s":[{"r":"32","s":[{"r":"31","s":[{"s":[{"value":["\"Qualifying Encounter\""]}]}]},{"value":[" ","InpatientHospitalization"]}]}]},{"value":["\n    "]},{"r":"38","s":[{"value":["return "]},{"r":"37","s":[{"value":["Tuple {\n      "]},{"s":[{"value":["encounter",": "]},{"r":"33","s":[{"value":["InpatientHospitalization"]}]}]},{"value":[",\n      "]},{"s":[{"value":["hospitalizationPeriod",": "]},{"r":"36","s":[{"r":"34","s":[{"value":["Global"]}]},{"value":["."]},{"r":"36","s":[{"value":["\"HospitalizationWithObservation\""," ( "]},{"r":"35","s":[{"value":["InpatientHospitalization"]}]},{"value":[" )"]}]}]}]},{"value":["\n    }"]}]}]}]}]}}],"expression":{"localId":"39","locator":"108:3-112:5","type":"Query","source":[{"localId":"32","locator":"108:3-108:49","alias":"InpatientHospitalization","expression":{"localId":"31","locator":"108:3-108:24","name":"Qualifying Encounter","type":"ExpressionRef"}}],"relationship":[],"return":{"localId":"38","locator":"109:5-112:5","expression":{"localId":"37","locator":"109:12-112:5","type":"Tuple","element":[{"name":"encounter","value":{"localId":"33","locator":"110:18-110:41","name":"InpatientHospitalization","type":"AliasRef"}},{"name":"hospitalizationPeriod","value":{"localId":"36","locator":"111:30-111:97","name":"HospitalizationWithObservation","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"35","locator":"111:72-111:95","name":"InpatientHospitalization","type":"AliasRef"}]}}]}}}},{"localId":"56","locator":"93:1-98:36","name":"Encounter With Existing Diabetes Diagnosis","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"56","s":[{"value":["/** Using the already calculated pairing of hospitalization periods with encounters, filter on ones with \n * diabetes and return the encounter.*/","define ","\"Encounter With Existing Diabetes Diagnosis\"",":\n  "]},{"r":"55","s":[{"s":[{"r":"42","s":[{"r":"41","s":[{"s":[{"value":["\"Encounter With Hospitalization Period\""]}]}]},{"value":[" ","Hospitalization"]}]}]},{"value":["\n    "]},{"r":"51","s":[{"value":["with "]},{"r":"44","s":[{"r":"43","s":[{"r":"43","s":[{"value":["[","\"Diagnosis\"",": "]},{"s":[{"value":["\"Diabetes\""]}]},{"value":["]"]}]}]},{"value":[" ","Diabetes"]}]},{"value":["\n      such that "]},{"r":"50","s":[{"r":"46","s":[{"r":"45","s":[{"value":["Diabetes"]}]},{"value":["."]},{"r":"46","s":[{"value":["prevalencePeriod"]}]}]},{"r":"50","value":[" ","starts before"," \n      "]},{"r":"49","s":[{"value":["end of "]},{"r":"48","s":[{"r":"47","s":[{"value":["Hospitalization"]}]},{"value":["."]},{"r":"48","s":[{"value":["hospitalizationPeriod"]}]}]}]}]}]},{"value":["\n    "]},{"r":"54","s":[{"value":["return "]},{"r":"53","s":[{"r":"52","s":[{"value":["Hospitalization"]}]},{"value":["."]},{"r":"53","s":[{"value":["encounter"]}]}]}]}]}]}}],"expression":{"localId":"55","locator":"94:3-98:36","type":"Query","source":[{"localId":"42","locator":"94:3-94:57","alias":"Hospitalization","expression":{"localId":"41","locator":"94:3-94:41","name":"Encounter With Hospitalization Period","type":"ExpressionRef"}}],"relationship":[{"localId":"51","locator":"95:5-97:50","alias":"Diabetes","type":"With","expression":{"localId":"43","locator":"95:10-95:34","dataType":"{urn:healthit-gov:qdm:v5_6}Diagnosis","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"95:24-95:33","name":"Diabetes","type":"ValueSetRef"}},"suchThat":{"localId":"50","locator":"96:17-97:50","type":"Before","operand":[{"locator":"96:43-96:48","type":"Start","operand":{"localId":"46","locator":"96:17-96:41","path":"prevalencePeriod","scope":"Diabetes","type":"Property"}},{"localId":"49","locator":"97:7-97:50","type":"End","operand":{"localId":"48","locator":"97:14-97:50","path":"hospitalizationPeriod","scope":"Hospitalization","type":"Property"}}]}}],"return":{"localId":"54","locator":"98:5-98:36","expression":{"localId":"53","locator":"98:12-98:36","path":"encounter","scope":"Hospitalization","type":"Property"}}}},{"localId":"76","locator":"121:1-125:36","name":"Encounter With Hypoglycemic Medication","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"76","s":[{"value":["","define ","\"Encounter With Hypoglycemic Medication\"",":\n  "]},{"r":"75","s":[{"s":[{"r":"59","s":[{"r":"58","s":[{"s":[{"value":["\"Encounter With Hospitalization Period\""]}]}]},{"value":[" ","Hospitalization"]}]}]},{"value":["\n    "]},{"r":"71","s":[{"value":["with "]},{"r":"61","s":[{"r":"60","s":[{"r":"60","s":[{"value":["[","\"Medication, Administered\"",": "]},{"s":[{"value":["\"Hypoglycemics Treatment Medications\""]}]},{"value":["]"]}]}]},{"value":[" ","HypoglycemicMed"]}]},{"value":["\n      such that "]},{"r":"70","s":[{"r":"67","s":[{"r":"62","s":[{"value":["Global"]}]},{"value":["."]},{"r":"67","s":[{"value":["\"NormalizeInterval\""," ( "]},{"r":"64","s":[{"r":"63","s":[{"value":["HypoglycemicMed"]}]},{"value":["."]},{"r":"64","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"66","s":[{"r":"65","s":[{"value":["HypoglycemicMed"]}]},{"value":["."]},{"r":"66","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]},{"r":"70","value":[" ","starts during"," "]},{"r":"69","s":[{"r":"68","s":[{"value":["Hospitalization"]}]},{"value":["."]},{"r":"69","s":[{"value":["hospitalizationPeriod"]}]}]}]}]},{"value":["\n    "]},{"r":"74","s":[{"value":["return "]},{"r":"73","s":[{"r":"72","s":[{"value":["Hospitalization"]}]},{"value":["."]},{"r":"73","s":[{"value":["encounter"]}]}]}]}]}]}}],"expression":{"localId":"75","locator":"122:3-125:36","type":"Query","source":[{"localId":"59","locator":"122:3-122:57","alias":"Hospitalization","expression":{"localId":"58","locator":"122:3-122:41","name":"Encounter With Hospitalization Period","type":"ExpressionRef"}}],"relationship":[{"localId":"71","locator":"123:5-124:163","alias":"HypoglycemicMed","type":"With","expression":{"localId":"60","locator":"123:10-123:76","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationAdministered","templateId":"PositiveMedicationAdministered","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"123:39-123:75","name":"Hypoglycemics Treatment Medications","type":"ValueSetRef"}},"suchThat":{"localId":"70","locator":"124:17-124:163","type":"In","operand":[{"locator":"124:113-124:118","type":"Start","operand":{"localId":"67","locator":"124:17-124:111","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"64","locator":"124:46-124:77","path":"relevantDatetime","scope":"HypoglycemicMed","type":"Property"},{"localId":"66","locator":"124:80-124:109","path":"relevantPeriod","scope":"HypoglycemicMed","type":"Property"}]}},{"localId":"69","locator":"124:127-124:163","path":"hospitalizationPeriod","scope":"Hospitalization","type":"Property"}]}}],"return":{"localId":"74","locator":"125:5-125:36","expression":{"localId":"73","locator":"125:12-125:36","path":"encounter","scope":"Hospitalization","type":"Property"}}}},{"localId":"98","locator":"84:1-89:36","name":"Encounter With Elevated Blood Glucose Lab","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"98","s":[{"value":["/** Using the already calculated pairing of hospitalization periods with encounters, filter on ones with \n * any elevated (\u003e= 200) blood glucose reading during the hospitalization*/","define ","\"Encounter With Elevated Blood Glucose Lab\"",":\n  "]},{"r":"97","s":[{"s":[{"r":"80","s":[{"r":"79","s":[{"s":[{"value":["\"Encounter With Hospitalization Period\""]}]}]},{"value":[" ","Hospitalization"]}]}]},{"value":["\n    "]},{"r":"93","s":[{"value":["with "]},{"r":"82","s":[{"r":"81","s":[{"r":"81","s":[{"value":["[","\"Laboratory Test, Performed\"",": "]},{"s":[{"value":["\"Glucose Lab Test Mass Per Volume\""]}]},{"value":["]"]}]}]},{"value":[" ","BloodGlucoseLab"]}]},{"value":["\n      such that "]},{"r":"92","s":[{"r":"87","s":[{"r":"84","s":[{"r":"83","s":[{"value":["BloodGlucoseLab"]}]},{"value":["."]},{"r":"84","s":[{"value":["relevantDatetime"]}]}]},{"r":"87","value":[" ","during"," "]},{"r":"86","s":[{"r":"85","s":[{"value":["Hospitalization"]}]},{"value":["."]},{"r":"86","s":[{"value":["hospitalizationPeriod"]}]}]}]},{"value":["\n        and "]},{"r":"91","s":[{"r":"89","s":[{"r":"88","s":[{"value":["BloodGlucoseLab"]}]},{"value":["."]},{"r":"89","s":[{"value":["result"]}]}]},{"value":[" ","\u003e="," "]},{"r":"90","s":[{"value":["200 ","'mg/dL'"]}]}]}]}]},{"value":["\n    "]},{"r":"96","s":[{"value":["return "]},{"r":"95","s":[{"r":"94","s":[{"value":["Hospitalization"]}]},{"value":["."]},{"r":"95","s":[{"value":["encounter"]}]}]}]}]}]}}],"expression":{"localId":"97","locator":"85:3-89:36","type":"Query","source":[{"localId":"80","locator":"85:3-85:57","alias":"Hospitalization","expression":{"localId":"79","locator":"85:3-85:41","name":"Encounter With Hospitalization Period","type":"ExpressionRef"}}],"relationship":[{"localId":"93","locator":"86:5-88:49","alias":"BloodGlucoseLab","type":"With","expression":{"localId":"81","locator":"86:10-86:75","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveLaboratoryTestPerformed","templateId":"PositiveLaboratoryTestPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"86:41-86:74","name":"Glucose Lab Test Mass Per Volume","type":"ValueSetRef"}},"suchThat":{"localId":"92","locator":"87:17-88:49","type":"And","operand":[{"localId":"87","locator":"87:17-87:93","type":"In","operand":[{"localId":"84","locator":"87:17-87:48","path":"relevantDatetime","scope":"BloodGlucoseLab","type":"Property"},{"localId":"86","locator":"87:57-87:93","path":"hospitalizationPeriod","scope":"Hospitalization","type":"Property"}]},{"localId":"91","locator":"88:13-88:49","type":"GreaterOrEqual","operand":[{"asType":"{urn:hl7-org:elm-types:r1}Quantity","type":"As","operand":{"localId":"89","locator":"88:13-88:34","path":"result","scope":"BloodGlucoseLab","type":"Property"}},{"localId":"90","locator":"88:39-88:49","value":200,"unit":"mg/dL","type":"Quantity"}]}]}}],"return":{"localId":"96","locator":"89:5-89:36","expression":{"localId":"95","locator":"89:12-89:36","path":"encounter","scope":"Hospitalization","type":"Property"}}}},{"localId":"101","locator":"134:1-137:53","name":"Initial Population","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"101","s":[{"value":["","define ","\"Initial Population\"",":\n  "]},{"r":"100","s":[{"r":"78","s":[{"r":"57","s":[{"value":["\"Encounter With Existing Diabetes Diagnosis\""]}]},{"value":["\n    union "]},{"r":"77","s":[{"value":["\"Encounter With Hypoglycemic Medication\""]}]}]},{"value":["\n    union "]},{"r":"99","s":[{"value":["\"Encounter With Elevated Blood Glucose Lab\""]}]}]}]}}],"expression":{"localId":"100","locator":"135:3-137:53","type":"Union","operand":[{"localId":"78","locator":"135:3-136:50","type":"Union","operand":[{"localId":"57","locator":"135:3-135:46","name":"Encounter With Existing Diabetes Diagnosis","type":"ExpressionRef"},{"localId":"77","locator":"136:11-136:50","name":"Encounter With Hypoglycemic Medication","type":"ExpressionRef"}]},{"localId":"99","locator":"137:11-137:53","name":"Encounter With Elevated Blood Glucose Lab","type":"ExpressionRef"}]}},{"localId":"122","locator":"175:1-178:4","name":"Hospital Days Max 10","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"122","s":[{"value":["/**\n * Crops an interval to a maximum length of 10 days.*/","define function ","\"Hospital Days Max 10\"","(","Period"," "]},{"r":"110","s":[{"value":["Interval\u003c"]},{"r":"109","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"121","s":[{"r":"121","s":[{"value":["Interval["]},{"r":"112","s":[{"value":["start of "]},{"r":"111","s":[{"value":["Period"]}]}]},{"value":[", "]},{"r":"120","s":[{"value":["Min","("]},{"r":"119","s":[{"value":["{ \n    "]},{"r":"114","s":[{"value":["end of "]},{"r":"113","s":[{"value":["Period"]}]}]},{"value":[", "]},{"r":"118","s":[{"r":"116","s":[{"value":["start of "]},{"r":"115","s":[{"value":["Period"]}]}]},{"value":[" + "]},{"r":"117","s":[{"value":["10 ","days"]}]}]},{"value":[" }"]}]},{"value":["\n  )"]}]},{"value":["]"]}]}]}]}}],"expression":{"localId":"121","locator":"176:3-178:4","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"112","locator":"176:12-176:26","type":"Start","operand":{"localId":"111","locator":"176:21-176:26","name":"Period","type":"OperandRef"}},"high":{"localId":"120","locator":"176:29-178:3","type":"Min","source":{"localId":"119","locator":"176:33-177:46","type":"List","element":[{"localId":"114","locator":"177:5-177:17","type":"End","operand":{"localId":"113","locator":"177:12-177:17","name":"Period","type":"OperandRef"}},{"localId":"118","locator":"177:20-177:44","type":"Add","operand":[{"localId":"116","locator":"177:20-177:34","type":"Start","operand":{"localId":"115","locator":"177:29-177:34","name":"Period","type":"OperandRef"}},{"localId":"117","locator":"177:38-177:44","value":10,"unit":"days","type":"Quantity"}]}]}}},"operand":[{"name":"Period","operandTypeSpecifier":{"localId":"110","locator":"175:47-175:64","type":"IntervalTypeSpecifier","pointType":{"localId":"109","locator":"175:56-175:63","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"148","locator":"193:1-197:20","name":"Interval To Day Numbers","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"148","s":[{"value":["/** Creates a list of integers from 1 to how many days are in the interval. Note, this wont create an index for\n * the final day if it is less than 24 hours. This also includes the first 24 hour period.*/","define function ","\"Interval To Day Numbers\"","(","Period"," "]},{"r":"133","s":[{"value":["Interval\u003c"]},{"r":"132","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"147","s":[{"r":"147","s":[{"s":[{"r":"143","s":[{"r":"142","s":[{"value":["( "]},{"r":"142","s":[{"value":["expand "]},{"r":"141","s":[{"value":["{ "]},{"r":"140","s":[{"r":"134","value":["Interval[","1",", "]},{"r":"139","s":[{"value":["duration in days between "]},{"r":"136","s":[{"value":["start of "]},{"r":"135","s":[{"value":["Period"]}]}]},{"value":[" and \n  "]},{"r":"138","s":[{"value":["end of "]},{"r":"137","s":[{"value":["Period"]}]}]}]},{"value":["]"]}]},{"value":["}"]}]}]},{"value":[" )"]}]},{"value":[" ","DayNumber"]}]}]},{"value":["\n    "]},{"r":"146","s":[{"value":["return \n    "]},{"r":"145","s":[{"value":["end of "]},{"r":"144","s":[{"value":["DayNumber"]}]}]}]}]}]}]}}],"expression":{"localId":"147","locator":"194:3-197:20","type":"Query","source":[{"localId":"143","locator":"194:3-195:29","alias":"DayNumber","expression":{"localId":"142","locator":"194:3-195:19","type":"Expand","operand":[{"localId":"141","locator":"194:12-195:17","type":"List","element":[{"localId":"140","locator":"194:14-195:16","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"134","locator":"194:23","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"1","type":"Literal"},"high":{"localId":"139","locator":"194:26-195:15","precision":"Day","type":"DurationBetween","operand":[{"localId":"136","locator":"194:51-194:65","type":"Start","operand":{"localId":"135","locator":"194:60-194:65","name":"Period","type":"OperandRef"}},{"localId":"138","locator":"195:3-195:15","type":"End","operand":{"localId":"137","locator":"195:10-195:15","name":"Period","type":"OperandRef"}}]}}]},{"resultTypeName":"{urn:hl7-org:elm-types:r1}Quantity","type":"Null"}]}}],"relationship":[],"return":{"localId":"146","locator":"196:5-197:20","expression":{"localId":"145","locator":"197:5-197:20","type":"End","operand":{"localId":"144","locator":"197:12-197:20","name":"DayNumber","type":"AliasRef"}}}},"operand":[{"name":"Period","operandTypeSpecifier":{"localId":"133","locator":"193:50-193:67","type":"IntervalTypeSpecifier","pointType":{"localId":"132","locator":"193:59-193:66","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"182","locator":"161:1-171:5","name":"Days In Period","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"182","s":[{"value":["/**\n * Creates a list of 24 hour long intervals in an interval paired with the index (1 indexed) to which 24 hour interval it is.*/","define function ","\"Days In Period\"","(","Period"," "]},{"r":"130","s":[{"value":["Interval\u003c"]},{"r":"129","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"181","s":[{"r":"181","s":[{"s":[{"r":"150","s":[{"r":"149","s":[{"value":["( "]},{"r":"149","s":[{"value":["\"Interval To Day Numbers\"","("]},{"r":"131","s":[{"value":["Period"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":[" ","DayIndex"]}]}]},{"value":["\n    "]},{"s":[{"value":["let "]},{"r":"159","s":[{"value":["startPeriod",": "]},{"r":"158","s":[{"r":"152","s":[{"value":["start of "]},{"r":"151","s":[{"value":["Period"]}]}]},{"value":[" + "]},{"r":"157","s":[{"value":["( "]},{"r":"157","s":[{"r":"153","s":[{"value":["24 ","hours"]}]},{"value":[" * "]},{"r":"156","s":[{"value":["( "]},{"r":"156","s":[{"r":"154","s":[{"value":["DayIndex"]}]},{"r":"155","value":[" - ","1"]}]},{"value":[" )"]}]}]},{"value":[" )"]}]}]}]},{"value":[",\n    "]},{"r":"174","s":[{"value":["endPeriod",": "]},{"r":"173","s":[{"value":["if "]},{"r":"165","s":[{"value":["( "]},{"r":"165","s":[{"r":"163","s":[{"value":["hours between "]},{"r":"160","s":[{"value":["startPeriod"]}]},{"value":[" and \n      "]},{"r":"162","s":[{"value":["end of "]},{"r":"161","s":[{"value":["Period"]}]}]}]},{"r":"164","value":[" ","\u003c"," ","24"]}]},{"value":["\n    )"]}]},{"value":[" then "]},{"r":"166","s":[{"value":["startPeriod"]}]},{"value":[" \n      else "]},{"r":"172","s":[{"r":"168","s":[{"value":["start of "]},{"r":"167","s":[{"value":["Period"]}]}]},{"value":[" + "]},{"r":"171","s":[{"value":["( "]},{"r":"171","s":[{"r":"169","s":[{"value":["24 ","hours"]}]},{"value":[" * "]},{"r":"170","s":[{"value":["DayIndex"]}]}]},{"value":[" )"]}]}]}]}]}]},{"value":["\n    "]},{"r":"180","s":[{"value":["return "]},{"r":"179","s":[{"value":["Tuple {\n      "]},{"s":[{"value":["dayIndex",": "]},{"r":"175","s":[{"value":["DayIndex"]}]}]},{"value":[",\n      "]},{"s":[{"value":["dayPeriod",": "]},{"r":"178","s":[{"value":["Interval["]},{"r":"176","s":[{"value":["startPeriod"]}]},{"value":[", "]},{"r":"177","s":[{"value":["endPeriod"]}]},{"value":[" )"]}]}]},{"value":["\n    }"]}]}]}]}]}]}}],"expression":{"localId":"181","locator":"162:3-171:5","type":"Query","source":[{"localId":"150","locator":"162:3-162:47","alias":"DayIndex","expression":{"localId":"149","locator":"162:3-162:38","name":"Interval To Day Numbers","type":"FunctionRef","operand":[{"localId":"131","locator":"162:31-162:36","name":"Period","type":"OperandRef"}]}}],"let":[{"localId":"159","locator":"163:9-163:70","identifier":"startPeriod","expression":{"localId":"158","locator":"163:22-163:70","type":"Add","operand":[{"localId":"152","locator":"163:22-163:36","type":"Start","operand":{"localId":"151","locator":"163:31-163:36","name":"Period","type":"OperandRef"}},{"localId":"157","locator":"163:40-163:70","type":"Multiply","operand":[{"localId":"153","locator":"163:42-163:49","value":24,"unit":"hours","type":"Quantity"},{"type":"ToQuantity","operand":{"localId":"156","locator":"163:53-163:68","type":"Subtract","operand":[{"localId":"154","locator":"163:55-163:62","name":"DayIndex","type":"AliasRef"},{"localId":"155","locator":"163:66","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"1","type":"Literal"}]}}]}]}},{"localId":"174","locator":"164:5-167:52","identifier":"endPeriod","expression":{"localId":"173","locator":"164:16-167:52","type":"If","condition":{"localId":"165","locator":"164:19-166:5","type":"Less","operand":[{"localId":"163","locator":"164:21-165:19","precision":"Hour","type":"DurationBetween","operand":[{"localId":"160","locator":"164:35-164:45","name":"startPeriod","type":"QueryLetRef"},{"localId":"162","locator":"165:7-165:19","type":"End","operand":{"localId":"161","locator":"165:14-165:19","name":"Period","type":"OperandRef"}}]},{"localId":"164","locator":"165:23-165:24","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"24","type":"Literal"}]},"then":{"localId":"166","locator":"166:12-166:22","name":"startPeriod","type":"QueryLetRef"},"else":{"localId":"172","locator":"167:12-167:52","type":"Add","operand":[{"localId":"168","locator":"167:12-167:26","type":"Start","operand":{"localId":"167","locator":"167:21-167:26","name":"Period","type":"OperandRef"}},{"localId":"171","locator":"167:30-167:52","type":"Multiply","operand":[{"localId":"169","locator":"167:32-167:39","value":24,"unit":"hours","type":"Quantity"},{"type":"ToQuantity","operand":{"localId":"170","locator":"167:43-167:50","name":"DayIndex","type":"AliasRef"}}]}]}}}],"relationship":[],"return":{"localId":"180","locator":"168:5-171:5","expression":{"localId":"179","locator":"168:12-171:5","type":"Tuple","element":[{"name":"dayIndex","value":{"localId":"175","locator":"169:17-169:24","name":"DayIndex","type":"AliasRef"}},{"name":"dayPeriod","value":{"localId":"178","locator":"170:18-170:50","lowClosed":true,"highClosed":false,"type":"Interval","low":{"localId":"176","locator":"170:27-170:37","name":"startPeriod","type":"QueryLetRef"},"high":{"localId":"177","locator":"170:40-170:48","name":"endPeriod","type":"QueryLetRef"}}}]}}},"operand":[{"name":"Period","operandTypeSpecifier":{"localId":"130","locator":"161:41-161:58","type":"IntervalTypeSpecifier","pointType":{"localId":"129","locator":"161:50-161:57","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"187","locator":"20:1-29:5","name":"Days in Hospitalization","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"187","s":[{"value":["","define ","\"Days in Hospitalization\"",":\n  "]},{"r":"186","s":[{"s":[{"r":"103","s":[{"r":"102","s":[{"s":[{"value":["\"Initial Population\""]}]}]},{"value":[" ","EligibleInpatientHospitalization"]}]}]},{"value":["\n    "]},{"s":[{"value":["let "]},{"r":"107","s":[{"value":["period",": "]},{"r":"106","s":[{"r":"104","s":[{"value":["Global"]}]},{"value":["."]},{"r":"106","s":[{"value":["\"HospitalizationWithObservation\""," ( "]},{"r":"105","s":[{"value":["EligibleInpatientHospitalization"]}]},{"value":[" )"]}]}]}]},{"value":[",\n    "]},{"r":"124","s":[{"value":["relevantPeriod",": "]},{"r":"123","s":[{"value":["\"Hospital Days Max 10\"","("]},{"r":"108","s":[{"value":["period"]}]},{"value":[")"]}]}]}]},{"value":["\n    "]},{"r":"185","s":[{"value":["return "]},{"r":"184","s":[{"value":["Tuple {\n      "]},{"s":[{"value":["encounter",": "]},{"r":"125","s":[{"value":["EligibleInpatientHospitalization"]}]}]},{"value":[",\n      "]},{"s":[{"value":["hospitalizationPeriod",": "]},{"r":"126","s":[{"value":["period"]}]}]},{"value":[",\n      "]},{"s":[{"value":["relevantPeriod",": "]},{"r":"127","s":[{"value":["relevantPeriod"]}]}]},{"value":[",\n      "]},{"s":[{"value":["relevantDays",": "]},{"r":"183","s":[{"value":["\"Days In Period\"","("]},{"r":"128","s":[{"value":["relevantPeriod"]}]},{"value":[")"]}]}]},{"value":["\n    }"]}]}]}]}]}}],"expression":{"localId":"186","locator":"21:3-29:5","type":"Query","source":[{"localId":"103","locator":"21:3-21:55","alias":"EligibleInpatientHospitalization","expression":{"localId":"102","locator":"21:3-21:22","name":"Initial Population","type":"ExpressionRef"}}],"let":[{"localId":"107","locator":"22:9-22:92","identifier":"period","expression":{"localId":"106","locator":"22:17-22:92","name":"HospitalizationWithObservation","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"105","locator":"22:59-22:90","name":"EligibleInpatientHospitalization","type":"AliasRef"}]}},{"localId":"124","locator":"23:5-23:50","identifier":"relevantPeriod","expression":{"localId":"123","locator":"23:21-23:50","name":"Hospital Days Max 10","type":"FunctionRef","operand":[{"localId":"108","locator":"23:44-23:49","name":"period","type":"QueryLetRef"}]}}],"relationship":[],"return":{"localId":"185","locator":"24:5-29:5","expression":{"localId":"184","locator":"24:12-29:5","type":"Tuple","element":[{"name":"encounter","value":{"localId":"125","locator":"25:18-25:49","name":"EligibleInpatientHospitalization","type":"AliasRef"}},{"name":"hospitalizationPeriod","value":{"localId":"126","locator":"26:30-26:35","name":"period","type":"QueryLetRef"}},{"name":"relevantPeriod","value":{"localId":"127","locator":"27:23-27:36","name":"relevantPeriod","type":"QueryLetRef"}},{"name":"relevantDays","value":{"localId":"183","locator":"28:21-28:52","name":"Days In Period","type":"FunctionRef","operand":[{"localId":"128","locator":"28:38-28:51","name":"relevantPeriod","type":"QueryLetRef"}]}}]}}}},{"localId":"244","locator":"31:1-53:5","name":"Days With Glucose Results","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"244","s":[{"value":["","define ","\"Days With Glucose Results\"",":\n  "]},{"r":"243","s":[{"s":[{"r":"189","s":[{"r":"188","s":[{"s":[{"value":["\"Days in Hospitalization\""]}]}]},{"value":[" ","InpatientHospitalDays"]}]}]},{"value":["\n    "]},{"r":"242","s":[{"value":["return "]},{"r":"241","s":[{"value":["Tuple {\n      "]},{"s":[{"value":["encounter",": "]},{"r":"191","s":[{"r":"190","s":[{"value":["InpatientHospitalDays"]}]},{"value":["."]},{"r":"191","s":[{"value":["encounter"]}]}]}]},{"value":[",\n      "]},{"s":[{"value":["relevantPeriod",": "]},{"r":"193","s":[{"r":"192","s":[{"value":["InpatientHospitalDays"]}]},{"value":["."]},{"r":"193","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[",\n      "]},{"s":[{"value":["relevantDays",": "]},{"r":"240","s":[{"value":["( "]},{"r":"240","s":[{"s":[{"r":"195","s":[{"r":"194","s":[{"s":[{"value":["InpatientHospitalDays",".","relevantDays"]}]}]},{"value":[" ","EncounterDay"]}]}]},{"value":["\n          "]},{"r":"239","s":[{"value":["return "]},{"r":"238","s":[{"value":["Tuple {\n            "]},{"s":[{"value":["dayIndex",": "]},{"r":"197","s":[{"r":"196","s":[{"value":["EncounterDay"]}]},{"value":["."]},{"r":"197","s":[{"value":["dayIndex"]}]}]}]},{"value":[",\n            "]},{"s":[{"value":["dayPeriod",": "]},{"r":"199","s":[{"r":"198","s":[{"value":["EncounterDay"]}]},{"value":["."]},{"r":"199","s":[{"value":["dayPeriod"]}]}]}]},{"value":[",\n            "]},{"s":[{"value":["hasSevereResult",": "]},{"r":"213","s":[{"value":["exists "]},{"r":"212","s":[{"value":["( "]},{"r":"212","s":[{"s":[{"r":"201","s":[{"r":"200","s":[{"r":"200","s":[{"value":["[","\"Laboratory Test, Performed\"",": "]},{"s":[{"value":["\"Glucose Lab Test Mass Per Volume\""]}]},{"value":["]"]}]}]},{"value":[" ","BloodGlucoseLab1"]}]}]},{"value":["\n                "]},{"r":"211","s":[{"value":["where "]},{"r":"211","s":[{"r":"205","s":[{"r":"203","s":[{"r":"202","s":[{"value":["BloodGlucoseLab1"]}]},{"value":["."]},{"r":"203","s":[{"value":["result"]}]}]},{"value":[" ","\u003e"," "]},{"r":"204","s":[{"value":["300 ","'mg/dL'"]}]}]},{"value":["\n                  and "]},{"r":"210","s":[{"r":"207","s":[{"r":"206","s":[{"value":["BloodGlucoseLab1"]}]},{"value":["."]},{"r":"207","s":[{"value":["relevantDatetime"]}]}]},{"r":"210","value":[" ","during"," "]},{"r":"209","s":[{"r":"208","s":[{"value":["EncounterDay"]}]},{"value":["."]},{"r":"209","s":[{"value":["dayPeriod"]}]}]}]}]}]}]},{"value":["\n            )"]}]}]}]},{"value":[",\n            "]},{"s":[{"value":["hasElevatedResult",": "]},{"r":"227","s":[{"value":["exists "]},{"r":"226","s":[{"value":["( "]},{"r":"226","s":[{"s":[{"r":"215","s":[{"r":"214","s":[{"r":"214","s":[{"value":["[","\"Laboratory Test, Performed\"",": "]},{"s":[{"value":["\"Glucose Lab Test Mass Per Volume\""]}]},{"value":["]"]}]}]},{"value":[" ","BloodGlucoseLab2"]}]}]},{"value":["\n                "]},{"r":"225","s":[{"value":["where "]},{"r":"225","s":[{"r":"219","s":[{"r":"217","s":[{"r":"216","s":[{"value":["BloodGlucoseLab2"]}]},{"value":["."]},{"r":"217","s":[{"value":["result"]}]}]},{"value":[" ","\u003e="," "]},{"r":"218","s":[{"value":["200 ","'mg/dL'"]}]}]},{"value":["\n                  and "]},{"r":"224","s":[{"r":"221","s":[{"r":"220","s":[{"value":["BloodGlucoseLab2"]}]},{"value":["."]},{"r":"221","s":[{"value":["relevantDatetime"]}]}]},{"r":"224","value":[" ","during"," "]},{"r":"223","s":[{"r":"222","s":[{"value":["EncounterDay"]}]},{"value":["."]},{"r":"223","s":[{"value":["dayPeriod"]}]}]}]}]}]}]},{"value":["\n            )"]}]}]}]},{"value":[",\n            "]},{"s":[{"value":["hasNoGlucoseTest",": "]},{"r":"237","s":[{"value":["not "]},{"r":"236","s":[{"value":["exists "]},{"r":"235","s":[{"value":["( "]},{"r":"235","s":[{"s":[{"r":"229","s":[{"r":"228","s":[{"r":"228","s":[{"value":["[","\"Laboratory Test, Performed\"",": "]},{"s":[{"value":["\"Glucose Lab Test Mass Per Volume\""]}]},{"value":["]"]}]}]},{"value":[" ","BloodGlucoseLab3"]}]}]},{"value":["\n                "]},{"r":"234","s":[{"value":["where "]},{"r":"234","s":[{"r":"231","s":[{"r":"230","s":[{"value":["BloodGlucoseLab3"]}]},{"value":["."]},{"r":"231","s":[{"value":["relevantDatetime"]}]}]},{"r":"234","value":[" ","during"," "]},{"r":"233","s":[{"r":"232","s":[{"value":["EncounterDay"]}]},{"value":["."]},{"r":"233","s":[{"value":["dayPeriod"]}]}]}]}]}]},{"value":["\n            )"]}]}]}]}]},{"value":["\n          }"]}]}]}]},{"value":["\n      )"]}]}]},{"value":["\n    }"]}]}]}]}]}}],"expression":{"localId":"243","locator":"32:3-53:5","type":"Query","source":[{"localId":"189","locator":"32:3-32:49","alias":"InpatientHospitalDays","expression":{"localId":"188","locator":"32:3-32:27","name":"Days in Hospitalization","type":"ExpressionRef"}}],"relationship":[],"return":{"localId":"242","locator":"33:5-53:5","expression":{"localId":"241","locator":"33:12-53:5","type":"Tuple","element":[{"name":"encounter","value":{"localId":"191","locator":"34:18-34:48","path":"encounter","scope":"InpatientHospitalDays","type":"Property"}},{"name":"relevantPeriod","value":{"localId":"193","locator":"35:23-35:58","path":"relevantPeriod","scope":"InpatientHospitalDays","type":"Property"}},{"name":"relevantDays","value":{"localId":"240","locator":"36:21-52:7","type":"Query","source":[{"localId":"195","locator":"36:23-36:69","alias":"EncounterDay","expression":{"localId":"194","locator":"36:23-36:56","path":"relevantDays","scope":"InpatientHospitalDays","type":"Property"}}],"relationship":[],"return":{"localId":"239","locator":"37:11-51:11","expression":{"localId":"238","locator":"37:18-51:11","type":"Tuple","element":[{"name":"dayIndex","value":{"localId":"197","locator":"38:23-38:43","path":"dayIndex","scope":"EncounterDay","type":"Property"}},{"name":"dayPeriod","value":{"localId":"199","locator":"39:24-39:45","path":"dayPeriod","scope":"EncounterDay","type":"Property"}},{"name":"hasSevereResult","value":{"localId":"213","locator":"40:30-43:13","type":"Exists","operand":{"localId":"212","locator":"40:37-43:13","type":"Query","source":[{"localId":"201","locator":"40:39-40:121","alias":"BloodGlucoseLab1","expression":{"localId":"200","locator":"40:39-40:104","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveLaboratoryTestPerformed","templateId":"PositiveLaboratoryTestPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"40:70-40:103","name":"Glucose Lab Test Mass Per Volume","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"211","locator":"41:17-42:85","type":"And","operand":[{"localId":"205","locator":"41:23-41:59","type":"Greater","operand":[{"asType":"{urn:hl7-org:elm-types:r1}Quantity","type":"As","operand":{"localId":"203","locator":"41:23-41:45","path":"result","scope":"BloodGlucoseLab1","type":"Property"}},{"localId":"204","locator":"41:49-41:59","value":300,"unit":"mg/dL","type":"Quantity"}]},{"localId":"210","locator":"42:23-42:85","type":"In","operand":[{"localId":"207","locator":"42:23-42:55","path":"relevantDatetime","scope":"BloodGlucoseLab1","type":"Property"},{"localId":"209","locator":"42:64-42:85","path":"dayPeriod","scope":"EncounterDay","type":"Property"}]}]}}}},{"name":"hasElevatedResult","value":{"localId":"227","locator":"44:32-47:13","type":"Exists","operand":{"localId":"226","locator":"44:39-47:13","type":"Query","source":[{"localId":"215","locator":"44:41-44:123","alias":"BloodGlucoseLab2","expression":{"localId":"214","locator":"44:41-44:106","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveLaboratoryTestPerformed","templateId":"PositiveLaboratoryTestPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"44:72-44:105","name":"Glucose Lab Test Mass Per Volume","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"225","locator":"45:17-46:85","type":"And","operand":[{"localId":"219","locator":"45:23-45:60","type":"GreaterOrEqual","operand":[{"asType":"{urn:hl7-org:elm-types:r1}Quantity","type":"As","operand":{"localId":"217","locator":"45:23-45:45","path":"result","scope":"BloodGlucoseLab2","type":"Property"}},{"localId":"218","locator":"45:50-45:60","value":200,"unit":"mg/dL","type":"Quantity"}]},{"localId":"224","locator":"46:23-46:85","type":"In","operand":[{"localId":"221","locator":"46:23-46:55","path":"relevantDatetime","scope":"BloodGlucoseLab2","type":"Property"},{"localId":"223","locator":"46:64-46:85","path":"dayPeriod","scope":"EncounterDay","type":"Property"}]}]}}}},{"name":"hasNoGlucoseTest","value":{"localId":"237","locator":"48:31-50:13","type":"Not","operand":{"localId":"236","locator":"48:35-50:13","type":"Exists","operand":{"localId":"235","locator":"48:42-50:13","type":"Query","source":[{"localId":"229","locator":"48:44-48:126","alias":"BloodGlucoseLab3","expression":{"localId":"228","locator":"48:44-48:109","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveLaboratoryTestPerformed","templateId":"PositiveLaboratoryTestPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"48:75-48:108","name":"Glucose Lab Test Mass Per Volume","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"234","locator":"49:17-49:85","type":"In","operand":[{"localId":"231","locator":"49:23-49:55","path":"relevantDatetime","scope":"BloodGlucoseLab3","type":"Property"},{"localId":"233","locator":"49:64-49:85","path":"dayPeriod","scope":"EncounterDay","type":"Property"}]}}}}}]}}}}]}}}},{"localId":"292","locator":"56:1-74:5","name":"Days With Hyperglycemic Events","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"292","s":[{"value":["/*# days with hyper events uses \"Days With Glucose Results\" to find if hyper event on each day. Skips 1st day in 'RelevantDays`. Returns boolean based on: Today high result OR Today no result AND Yesterday high result AND 2 days ago high result*/","define ","\"Days With Hyperglycemic Events\"",":\n  "]},{"r":"291","s":[{"s":[{"r":"246","s":[{"r":"245","s":[{"s":[{"value":["\"Days With Glucose Results\""]}]}]},{"value":[" ","EncounterWithResultDays"]}]}]},{"value":["\n    "]},{"s":[{"value":["let "]},{"r":"283","s":[{"value":["eligibleEventDays",": "]},{"r":"282","s":[{"s":[{"r":"248","s":[{"r":"247","s":[{"s":[{"value":["EncounterWithResultDays",".","relevantDays"]}]}]},{"value":[" ","EncounterDay"]}]}]},{"value":["\n      "]},{"r":"252","s":[{"value":["where "]},{"r":"252","s":[{"r":"250","s":[{"r":"249","s":[{"value":["EncounterDay"]}]},{"value":["."]},{"r":"250","s":[{"value":["dayIndex"]}]}]},{"r":"251","value":[" ","\u003e"," ","1"]}]}]},{"value":["\n      "]},{"r":"281","s":[{"value":["return "]},{"r":"280","s":[{"value":["Tuple {\n        "]},{"s":[{"value":["dayIndex",": "]},{"r":"254","s":[{"r":"253","s":[{"value":["EncounterDay"]}]},{"value":["."]},{"r":"254","s":[{"value":["dayIndex"]}]}]}]},{"value":[",\n        "]},{"s":[{"value":["dayPeriod",": "]},{"r":"256","s":[{"r":"255","s":[{"value":["EncounterDay"]}]},{"value":["."]},{"r":"256","s":[{"value":["dayPeriod"]}]}]}]},{"value":[",\n        "]},{"s":[{"value":["hasHyperglycemicEvent",": "]},{"r":"279","s":[{"value":["( "]},{"r":"279","s":[{"r":"258","s":[{"r":"257","s":[{"value":["EncounterDay"]}]},{"value":["."]},{"r":"258","s":[{"value":["hasSevereResult"]}]}]},{"value":["\n            or "]},{"r":"278","s":[{"value":["( "]},{"r":"278","s":[{"r":"269","s":[{"r":"260","s":[{"r":"259","s":[{"value":["EncounterDay"]}]},{"value":["."]},{"r":"260","s":[{"value":["hasNoGlucoseTest"]}]}]},{"value":["\n                and "]},{"r":"268","s":[{"r":"267","s":[{"r":"262","s":[{"r":"261","s":[{"value":["EncounterWithResultDays"]}]},{"value":["."]},{"r":"262","s":[{"value":["relevantDays"]}]}]},{"value":["["]},{"r":"266","s":[{"r":"264","s":[{"r":"263","s":[{"value":["EncounterDay"]}]},{"value":["."]},{"r":"264","s":[{"value":["dayIndex"]}]}]},{"r":"265","value":[" - ","2"]}]},{"value":["]"]}]},{"value":["."]},{"r":"268","s":[{"value":["hasElevatedResult"]}]}]}]},{"value":["\n                and "]},{"r":"277","s":[{"r":"276","s":[{"r":"271","s":[{"r":"270","s":[{"value":["EncounterWithResultDays"]}]},{"value":["."]},{"r":"271","s":[{"value":["relevantDays"]}]}]},{"value":["["]},{"r":"275","s":[{"r":"273","s":[{"r":"272","s":[{"value":["EncounterDay"]}]},{"value":["."]},{"r":"273","s":[{"value":["dayIndex"]}]}]},{"r":"274","value":[" - ","3"]}]},{"value":["]"]}]},{"value":["."]},{"r":"277","s":[{"value":["hasElevatedResult"]}]}]}]},{"value":["\n            )"]}]}]},{"value":["\n        )"]}]}]},{"value":["\n      }"]}]}]}]}]}]},{"value":["\n    "]},{"r":"290","s":[{"value":["return "]},{"r":"289","s":[{"value":["Tuple {\n      "]},{"s":[{"value":["encounter",": "]},{"r":"285","s":[{"r":"284","s":[{"value":["EncounterWithResultDays"]}]},{"value":["."]},{"r":"285","s":[{"value":["encounter"]}]}]}]},{"value":[",\n      "]},{"s":[{"value":["relevantPeriod",": "]},{"r":"287","s":[{"r":"286","s":[{"value":["EncounterWithResultDays"]}]},{"value":["."]},{"r":"287","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[",\n      "]},{"s":[{"value":["eligibleEventDays",": "]},{"r":"288","s":[{"value":["eligibleEventDays"]}]}]},{"value":["\n    }"]}]}]}]}]}}],"expression":{"localId":"291","locator":"57:3-74:5","type":"Query","source":[{"localId":"246","locator":"57:3-57:53","alias":"EncounterWithResultDays","expression":{"localId":"245","locator":"57:3-57:29","name":"Days With Glucose Results","type":"ExpressionRef"}}],"let":[{"localId":"283","locator":"58:9-69:7","identifier":"eligibleEventDays","expression":{"localId":"282","locator":"58:28-69:7","type":"Query","source":[{"localId":"248","locator":"58:28-58:76","alias":"EncounterDay","expression":{"localId":"247","locator":"58:28-58:63","path":"relevantDays","scope":"EncounterWithResultDays","type":"Property"}}],"relationship":[],"where":{"localId":"252","locator":"59:7-59:37","type":"Greater","operand":[{"localId":"250","locator":"59:13-59:33","path":"dayIndex","scope":"EncounterDay","type":"Property"},{"localId":"251","locator":"59:37","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"1","type":"Literal"}]},"return":{"localId":"281","locator":"60:7-69:7","expression":{"localId":"280","locator":"60:14-69:7","type":"Tuple","element":[{"name":"dayIndex","value":{"localId":"254","locator":"61:19-61:39","path":"dayIndex","scope":"EncounterDay","type":"Property"}},{"name":"dayPeriod","value":{"localId":"256","locator":"62:20-62:41","path":"dayPeriod","scope":"EncounterDay","type":"Property"}},{"name":"hasHyperglycemicEvent","value":{"localId":"279","locator":"63:32-68:9","type":"Or","operand":[{"localId":"258","locator":"63:34-63:61","path":"hasSevereResult","scope":"EncounterDay","type":"Property"},{"localId":"278","locator":"64:16-67:13","type":"And","operand":[{"localId":"269","locator":"64:18-65:101","type":"And","operand":[{"localId":"260","locator":"64:18-64:46","path":"hasNoGlucoseTest","scope":"EncounterDay","type":"Property"},{"localId":"268","locator":"65:21-65:101","path":"hasElevatedResult","type":"Property","source":{"localId":"267","locator":"65:21-65:83","type":"Indexer","operand":[{"localId":"262","locator":"65:21-65:56","path":"relevantDays","scope":"EncounterWithResultDays","type":"Property"},{"localId":"266","locator":"65:58-65:82","type":"Subtract","operand":[{"localId":"264","locator":"65:58-65:78","path":"dayIndex","scope":"EncounterDay","type":"Property"},{"localId":"265","locator":"65:82","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"2","type":"Literal"}]}]}}]},{"localId":"277","locator":"66:21-66:101","path":"hasElevatedResult","type":"Property","source":{"localId":"276","locator":"66:21-66:83","type":"Indexer","operand":[{"localId":"271","locator":"66:21-66:56","path":"relevantDays","scope":"EncounterWithResultDays","type":"Property"},{"localId":"275","locator":"66:58-66:82","type":"Subtract","operand":[{"localId":"273","locator":"66:58-66:78","path":"dayIndex","scope":"EncounterDay","type":"Property"},{"localId":"274","locator":"66:82","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"3","type":"Literal"}]}]}}]}]}}]}}}}],"relationship":[],"return":{"localId":"290","locator":"70:5-74:5","expression":{"localId":"289","locator":"70:12-74:5","type":"Tuple","element":[{"name":"encounter","value":{"localId":"285","locator":"71:18-71:50","path":"encounter","scope":"EncounterWithResultDays","type":"Property"}},{"name":"relevantPeriod","value":{"localId":"287","locator":"72:23-72:60","path":"relevantPeriod","scope":"EncounterWithResultDays","type":"Property"}},{"name":"eligibleEventDays","value":{"localId":"288","locator":"73:26-73:42","name":"eligibleEventDays","type":"QueryLetRef"}}]}}}},{"localId":"294","locator":"76:1-77:22","name":"Denominator","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"294","s":[{"value":["","define ","\"Denominator\"",":\n  "]},{"r":"293","s":[{"value":["\"Initial Population\""]}]}]}}],"expression":{"localId":"293","locator":"77:3-77:22","name":"Initial Population","type":"ExpressionRef"}},{"localId":"323","locator":"127:1-132:3","name":"First Blood Glucose Within 1 Hour Prior To and 6 Hours After Encounter Start","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"323","s":[{"value":["","define ","\"First Blood Glucose Within 1 Hour Prior To and 6 Hours After Encounter Start\"",":\n  "]},{"r":"322","s":[{"value":["First","("]},{"r":"321","s":[{"s":[{"r":"298","s":[{"r":"297","s":[{"r":"297","s":[{"value":["[","\"Laboratory Test, Performed\"",": "]},{"s":[{"value":["\"Glucose Lab Test Mass Per Volume\""]}]},{"value":["]"]}]}]},{"value":[" ","FirstBloodGlucose"]}]}]},{"value":["\n      "]},{"r":"317","s":[{"value":["with"]},{"r":"300","s":[{"r":"299","s":[{"value":["("]},{"r":"299","s":[{"value":["\"Qualifying Encounter\""]}]},{"value":[")"]}]},{"value":["InpatientEncounter"]}]},{"value":["\n        such that "]},{"r":"316","s":[{"r":"302","s":[{"r":"301","s":[{"value":["FirstBloodGlucose"]}]},{"value":["."]},{"r":"302","s":[{"value":["relevantDatetime"]}]}]},{"r":"316","value":[" ","during"," "]},{"r":"315","s":[{"value":["Interval["]},{"r":"308","s":[{"value":["("]},{"r":"308","s":[{"r":"306","s":[{"value":["start of "]},{"r":"305","s":[{"r":"303","s":[{"value":["Global"]}]},{"value":["."]},{"r":"305","s":[{"value":["\"HospitalizationWithObservation\"","("]},{"r":"304","s":[{"value":["InpatientEncounter"]}]},{"value":[")"]}]}]}]},{"value":["- "]},{"r":"307","s":[{"value":["1 ","hour"]}]}]},{"value":[")"]}]},{"value":[","]},{"r":"314","s":[{"value":["("]},{"r":"314","s":[{"r":"312","s":[{"value":["start of "]},{"r":"311","s":[{"r":"309","s":[{"value":["Global"]}]},{"value":["."]},{"r":"311","s":[{"value":["\"HospitalizationWithObservation\"","("]},{"r":"310","s":[{"value":["InpatientEncounter"]}]},{"value":[")"]}]}]}]},{"value":["+ "]},{"r":"313","s":[{"value":["6 ","hours"]}]}]},{"value":[")"]}]},{"value":["]"]}]}]}]},{"value":["\n      "]},{"r":"320","s":[{"value":["sort by "]},{"r":"319","s":[{"r":"318","s":[{"value":["relevantDatetime"]}]}]}]}]},{"value":["\n  )"]}]}]}}],"expression":{"localId":"322","locator":"128:3-132:3","type":"First","source":{"localId":"321","locator":"128:9-131:30","type":"Query","source":[{"localId":"298","locator":"128:9-128:92","alias":"FirstBloodGlucose","expression":{"localId":"297","locator":"128:9-128:74","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveLaboratoryTestPerformed","templateId":"PositiveLaboratoryTestPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"128:40-128:73","name":"Glucose Lab Test Mass Per Volume","type":"ValueSetRef"}}}],"relationship":[{"localId":"317","locator":"129:7-130:228","alias":"InpatientEncounter","type":"With","expression":{"localId":"299","locator":"129:11-129:34","name":"Qualifying Encounter","type":"ExpressionRef"},"suchThat":{"localId":"316","locator":"130:19-130:228","type":"In","operand":[{"localId":"302","locator":"130:19-130:52","path":"relevantDatetime","scope":"FirstBloodGlucose","type":"Property"},{"localId":"315","locator":"130:61-130:228","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"308","locator":"130:70-130:147","type":"Subtract","operand":[{"localId":"306","locator":"130:71-130:138","type":"Start","operand":{"localId":"305","locator":"130:80-130:138","name":"HospitalizationWithObservation","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"304","locator":"130:120-130:137","name":"InpatientEncounter","type":"AliasRef"}]}},{"localId":"307","locator":"130:141-130:146","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"314","locator":"130:149-130:227","type":"Add","operand":[{"localId":"312","locator":"130:150-130:217","type":"Start","operand":{"localId":"311","locator":"130:159-130:217","name":"HospitalizationWithObservation","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"310","locator":"130:199-130:216","name":"InpatientEncounter","type":"AliasRef"}]}},{"localId":"313","locator":"130:220-130:226","value":6,"unit":"hours","type":"Quantity"}]}}]}}],"sort":{"localId":"320","locator":"131:7-131:30","by":[{"localId":"319","locator":"131:15-131:30","direction":"asc","path":"relevantDatetime","type":"ByColumn"}]}}}},{"localId":"332","locator":"100:1-103:57","name":"Encounter With First Blood Glucose Greater Than or Equal to 1000","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"332","s":[{"value":["","define ","\"Encounter With First Blood Glucose Greater Than or Equal to 1000\"",":\n  "]},{"r":"331","s":[{"s":[{"r":"296","s":[{"r":"295","s":[{"s":[{"value":["\"Qualifying Encounter\""]}]}]},{"value":[" ","InpatientHospitalization"]}]}]},{"value":["\n    "]},{"r":"330","s":[{"value":["with "]},{"r":"325","s":[{"r":"324","s":[{"s":[{"value":["\"First Blood Glucose Within 1 Hour Prior To and 6 Hours After Encounter Start\""]}]}]},{"value":[" ","FirstGlucoseResult"]}]},{"value":["\n      such that "]},{"r":"329","s":[{"r":"327","s":[{"r":"326","s":[{"value":["FirstGlucoseResult"]}]},{"value":["."]},{"r":"327","s":[{"value":["result"]}]}]},{"value":[" ","\u003e="," "]},{"r":"328","s":[{"value":["1000 ","'mg/dL'"]}]}]}]}]}]}}],"expression":{"localId":"331","locator":"101:3-103:57","type":"Query","source":[{"localId":"296","locator":"101:3-101:49","alias":"InpatientHospitalization","expression":{"localId":"295","locator":"101:3-101:24","name":"Qualifying Encounter","type":"ExpressionRef"}}],"relationship":[{"localId":"330","locator":"102:5-103:57","alias":"FirstGlucoseResult","type":"With","expression":{"localId":"324","locator":"102:10-102:87","name":"First Blood Glucose Within 1 Hour Prior To and 6 Hours After Encounter Start","type":"ExpressionRef"},"suchThat":{"localId":"329","locator":"103:17-103:57","type":"GreaterOrEqual","operand":[{"asType":"{urn:hl7-org:elm-types:r1}Quantity","type":"As","operand":{"localId":"327","locator":"103:17-103:41","path":"result","scope":"FirstGlucoseResult","type":"Property"}},{"localId":"328","locator":"103:46-103:57","value":1000,"unit":"mg/dL","type":"Quantity"}]}}]}},{"localId":"334","locator":"79:1-80:68","name":"Denominator Exclusions","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"334","s":[{"value":["","define ","\"Denominator Exclusions\"",":\n  "]},{"r":"333","s":[{"value":["\"Encounter With First Blood Glucose Greater Than or Equal to 1000\""]}]}]}}],"expression":{"localId":"333","locator":"80:3-80:68","name":"Encounter With First Blood Glucose Greater Than or Equal to 1000","type":"ExpressionRef"}},{"localId":"347","locator":"114:1-119:43","name":"Encounter With Hyperglycemic Events","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"347","s":[{"value":["","define ","\"Encounter With Hyperglycemic Events\"",":\n  "]},{"r":"346","s":[{"s":[{"r":"336","s":[{"r":"335","s":[{"s":[{"value":["\"Days With Hyperglycemic Events\""]}]}]},{"value":[" ","HyperglycemicEventDays"]}]}]},{"value":["\n    "]},{"r":"342","s":[{"value":["where "]},{"r":"342","s":[{"value":["exists "]},{"r":"341","s":[{"value":["( "]},{"r":"341","s":[{"s":[{"r":"338","s":[{"r":"337","s":[{"s":[{"value":["HyperglycemicEventDays",".","eligibleEventDays"]}]}]},{"value":[" ","EligibleEventDay"]}]}]},{"value":["\n        "]},{"r":"340","s":[{"value":["where "]},{"r":"340","s":[{"r":"339","s":[{"value":["EligibleEventDay"]}]},{"value":["."]},{"r":"340","s":[{"value":["hasHyperglycemicEvent"]}]}]}]}]},{"value":["\n    )"]}]}]}]},{"value":["\n    "]},{"r":"345","s":[{"value":["return "]},{"r":"344","s":[{"r":"343","s":[{"value":["HyperglycemicEventDays"]}]},{"value":["."]},{"r":"344","s":[{"value":["encounter"]}]}]}]}]}]}}],"expression":{"localId":"346","locator":"115:3-119:43","type":"Query","source":[{"localId":"336","locator":"115:3-115:57","alias":"HyperglycemicEventDays","expression":{"localId":"335","locator":"115:3-115:34","name":"Days With Hyperglycemic Events","type":"ExpressionRef"}}],"relationship":[],"where":{"localId":"342","locator":"116:5-118:5","type":"Exists","operand":{"localId":"341","locator":"116:18-118:5","type":"Query","source":[{"localId":"338","locator":"116:20-116:76","alias":"EligibleEventDay","expression":{"localId":"337","locator":"116:20-116:59","path":"eligibleEventDays","scope":"HyperglycemicEventDays","type":"Property"}}],"relationship":[],"where":{"localId":"340","locator":"117:9-117:52","path":"hasHyperglycemicEvent","scope":"EligibleEventDay","type":"Property"}}},"return":{"localId":"345","locator":"119:5-119:43","expression":{"localId":"344","locator":"119:12-119:43","path":"encounter","scope":"HyperglycemicEventDays","type":"Property"}}}},{"localId":"349","locator":"139:1-140:39","name":"Numerator","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"349","s":[{"value":["","define ","\"Numerator\"",":\n  "]},{"r":"348","s":[{"value":["\"Encounter With Hyperglycemic Events\""]}]}]}}],"expression":{"localId":"348","locator":"140:3-140:39","name":"Encounter With Hyperglycemic Events","type":"ExpressionRef"}},{"localId":"351","locator":"147:1-148:51","name":"SDE Ethnicity","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"351","s":[{"value":["","define ","\"SDE Ethnicity\"",":\n  "]},{"r":"350","s":[{"value":["[","\"Patient Characteristic Ethnicity\"",": "]},{"s":[{"value":["\"Ethnicity\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"350","locator":"148:3-148:51","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicEthnicity","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"148:40-148:50","name":"Ethnicity","type":"ValueSetRef"}}},{"localId":"353","locator":"150:1-151:43","name":"SDE Payer","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"353","s":[{"value":["","define ","\"SDE Payer\"",":\n  "]},{"r":"352","s":[{"value":["[","\"Patient Characteristic Payer\"",": "]},{"s":[{"value":["\"Payer\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"352","locator":"151:3-151:43","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicPayer","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"151:36-151:42","name":"Payer","type":"ValueSetRef"}}},{"localId":"355","locator":"153:1-154:41","name":"SDE Race","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"355","s":[{"value":["","define ","\"SDE Race\"",":\n  "]},{"r":"354","s":[{"value":["[","\"Patient Characteristic Race\"",": "]},{"s":[{"value":["\"Race\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"354","locator":"154:3-154:41","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicRace","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"154:35-154:40","name":"Race","type":"ValueSetRef"}}},{"localId":"357","locator":"156:1-157:58","name":"SDE Sex","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"357","s":[{"value":["","define ","\"SDE Sex\"",":\n  "]},{"r":"356","s":[{"value":["[","\"Patient Characteristic Sex\"",": "]},{"s":[{"value":["\"ONC Administrative Sex\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"356","locator":"157:3-157:58","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicSex","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"157:34-157:57","name":"ONC Administrative Sex","type":"ValueSetRef"}}},{"localId":"380","locator":"183:1-189:3","name":"Numerator Observations","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"380","s":[{"value":["/**\n * Counts the number of eligible days with a hyperglycemic event in an encounter. This simply filters and counts the data built in\n * \"Days With Hyperglycemic Events\".*/","define function ","\"Numerator Observations\"","(","QualifyingEncounter"," "]},{"r":"364","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"379","s":[{"r":"379","s":[{"value":["singleton from "]},{"r":"378","s":[{"value":["( "]},{"r":"378","s":[{"s":[{"r":"366","s":[{"r":"365","s":[{"s":[{"value":["\"Days With Hyperglycemic Events\""]}]}]},{"value":[" ","EncounterWithEventDays"]}]}]},{"value":["\n      "]},{"r":"370","s":[{"value":["where "]},{"r":"370","s":[{"r":"368","s":[{"r":"367","s":[{"value":["EncounterWithEventDays"]}]},{"value":["."]},{"r":"368","s":[{"value":["encounter"]}]}]},{"value":[" ","="," "]},{"r":"369","s":[{"value":["QualifyingEncounter"]}]}]}]},{"value":["\n      "]},{"r":"377","s":[{"value":["return "]},{"r":"376","s":[{"value":["Count","("]},{"r":"375","s":[{"s":[{"r":"372","s":[{"r":"371","s":[{"s":[{"value":["EncounterWithEventDays",".","eligibleEventDays"]}]}]},{"value":[" ","EligibleEventDay"]}]}]},{"value":["\n          "]},{"r":"374","s":[{"value":["where "]},{"r":"374","s":[{"r":"373","s":[{"value":["EligibleEventDay"]}]},{"value":["."]},{"r":"374","s":[{"value":["hasHyperglycemicEvent"]}]}]}]}]},{"value":["\n      )"]}]}]}]},{"value":["\n  )"]}]}]}]}]}}],"expression":{"localId":"379","locator":"184:3-189:3","type":"SingletonFrom","operand":{"localId":"378","locator":"184:18-189:3","type":"Query","source":[{"localId":"366","locator":"184:20-184:74","alias":"EncounterWithEventDays","expression":{"localId":"365","locator":"184:20-184:51","name":"Days With Hyperglycemic Events","type":"ExpressionRef"}}],"relationship":[],"where":{"localId":"370","locator":"185:7-185:66","type":"Equal","operand":[{"localId":"368","locator":"185:13-185:44","path":"encounter","scope":"EncounterWithEventDays","type":"Property"},{"localId":"369","locator":"185:48-185:66","name":"QualifyingEncounter","type":"OperandRef"}]},"return":{"localId":"377","locator":"186:7-188:7","expression":{"localId":"376","locator":"186:14-188:7","type":"Count","source":{"localId":"375","locator":"186:20-187:54","type":"Query","source":[{"localId":"372","locator":"186:20-186:76","alias":"EligibleEventDay","expression":{"localId":"371","locator":"186:20-186:59","path":"eligibleEventDays","scope":"EncounterWithEventDays","type":"Property"}}],"relationship":[],"where":{"localId":"374","locator":"187:11-187:54","path":"hasHyperglycemicEvent","scope":"EligibleEventDay","type":"Property"}}}}}},"operand":[{"name":"QualifyingEncounter","operandTypeSpecifier":{"localId":"364","locator":"183:62-183:83","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"397","locator":"202:1-206:3","name":"Denominator Observations","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"397","s":[{"value":["/**\n * Counts the number of eligible days in an encounter. This simply filters and counts the data built in\n * \"Days With Glucose Results\".*/","define function ","\"Denominator Observations\"","(","QualifyingEncounter"," "]},{"r":"384","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"396","s":[{"r":"396","s":[{"value":["singleton from "]},{"r":"395","s":[{"value":["( "]},{"r":"395","s":[{"s":[{"r":"386","s":[{"r":"385","s":[{"s":[{"value":["\"Days With Hyperglycemic Events\""]}]}]},{"value":[" ","EncounterWithEventDays"]}]}]},{"value":["\n      "]},{"r":"390","s":[{"value":["where "]},{"r":"390","s":[{"r":"388","s":[{"r":"387","s":[{"value":["EncounterWithEventDays"]}]},{"value":["."]},{"r":"388","s":[{"value":["encounter"]}]}]},{"value":[" ","="," "]},{"r":"389","s":[{"value":["QualifyingEncounter"]}]}]}]},{"value":["\n      "]},{"r":"394","s":[{"value":["return "]},{"r":"393","s":[{"value":["Count","("]},{"r":"392","s":[{"r":"391","s":[{"value":["EncounterWithEventDays"]}]},{"value":["."]},{"r":"392","s":[{"value":["eligibleEventDays"]}]}]},{"value":[")"]}]}]}]},{"value":["\n  )"]}]}]}]}]}}],"expression":{"localId":"396","locator":"203:3-206:3","type":"SingletonFrom","operand":{"localId":"395","locator":"203:18-206:3","type":"Query","source":[{"localId":"386","locator":"203:20-203:74","alias":"EncounterWithEventDays","expression":{"localId":"385","locator":"203:20-203:51","name":"Days With Hyperglycemic Events","type":"ExpressionRef"}}],"relationship":[],"where":{"localId":"390","locator":"204:7-204:66","type":"Equal","operand":[{"localId":"388","locator":"204:13-204:44","path":"encounter","scope":"EncounterWithEventDays","type":"Property"},{"localId":"389","locator":"204:48-204:66","name":"QualifyingEncounter","type":"OperandRef"}]},"return":{"localId":"394","locator":"205:7-205:60","expression":{"localId":"393","locator":"205:14-205:60","type":"Count","source":{"localId":"392","locator":"205:20-205:59","path":"eligibleEventDays","scope":"EncounterWithEventDays","type":"Property"}}}}},"operand":[{"name":"QualifyingEncounter","operandTypeSpecifier":{"localId":"384","locator":"202:64-202:85","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]}]}}},"elm_annotations":{"statements":[{"children":[{"children":[{"children":[{"text":"define \"Qualifying Encounter\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Encounter Inpatient\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"14"}],"node_type":"Retrieve","ref_id":"14"},{"children":[{"text":" InpatientEncounter"}]}],"ref_id":"15"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"InpatientEncounter"}]}],"ref_id":"16"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"17"}],"node_type":"Property","ref_id":"17"},{"children":[{"text":" ends during day of "}],"node_type":"In","ref_id":"19"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"18"}],"node_type":"In","ref_id":"19"},{"children":[{"text":"\n      and "}]},{"children":[{"children":[{"children":[{"text":"AgeInYearsAt("}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"20"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"HospitalizationWithObservation\"("}]},{"children":[{"children":[{"text":"InpatientEncounter"}]}],"node_type":"AliasRef","ref_id":"21"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"22"}],"node_type":"FunctionRef","ref_id":"22"}],"node_type":"Start","ref_id":"23"}],"node_type":"DateFrom","ref_id":"24"},{"children":[{"text":")"}]}],"node_type":"CalculateAgeAt","ref_id":"25"},{"children":[{"text":"\u003e= 18"}],"node_type":"Literal","ref_id":"26"}],"node_type":"GreaterOrEqual","ref_id":"27"}],"ref_id":"28"}],"ref_id":"28"}],"node_type":"Query","ref_id":"29"}],"ref_id":"30"}],"define_name":"Qualifying Encounter"},{"children":[{"children":[{"children":[{"text":"/** Create paring of encounters to hospitalization period so this calculation can be inspected and the result \n * can be reused, making the logic faster.*/define \"Encounter With Hospitalization Period\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Qualifying Encounter\""}]}]}],"node_type":"ExpressionRef","ref_id":"31"},{"children":[{"text":" InpatientHospitalization"}]}],"ref_id":"32"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Tuple {\n      "}]},{"children":[{"children":[{"text":"encounter: "}]},{"children":[{"children":[{"text":"InpatientHospitalization"}]}],"ref_id":"33"}]},{"children":[{"text":",\n      "}]},{"children":[{"children":[{"text":"hospitalizationPeriod: "}]},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"34"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"HospitalizationWithObservation\" ( "}]},{"children":[{"children":[{"text":"InpatientHospitalization"}]}],"node_type":"AliasRef","ref_id":"35"},{"children":[{"text":" )"}]}],"ref_id":"36"}],"ref_id":"36"}]},{"children":[{"text":"\n    }"}]}],"node_type":"Tuple","ref_id":"37"}],"ref_id":"38"}],"node_type":"Query","ref_id":"39"}],"ref_id":"40"}],"define_name":"Encounter With Hospitalization Period"},{"children":[{"children":[{"children":[{"text":"/** Using the already calculated pairing of hospitalization periods with encounters, filter on ones with \n * diabetes and return the encounter.*/define \"Encounter With Existing Diabetes Diagnosis\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Encounter With Hospitalization Period\""}]}]}],"node_type":"ExpressionRef","ref_id":"41"},{"children":[{"text":" Hospitalization"}]}],"ref_id":"42"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"[\"Diagnosis\": "}]},{"children":[{"children":[{"text":"\"Diabetes\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"43"}],"node_type":"Retrieve","ref_id":"43"},{"children":[{"text":" Diabetes"}]}],"ref_id":"44"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Diabetes"}]}],"ref_id":"45"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"prevalencePeriod"}]}],"node_type":"Property","ref_id":"46"}],"node_type":"Property","ref_id":"46"},{"children":[{"text":" starts before \n      "}],"node_type":"Before","ref_id":"50"},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Hospitalization"}]}],"ref_id":"47"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"hospitalizationPeriod"}]}],"node_type":"Property","ref_id":"48"}],"node_type":"Property","ref_id":"48"}],"node_type":"End","ref_id":"49"}],"node_type":"Before","ref_id":"50"}],"ref_id":"51"},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"children":[{"text":"Hospitalization"}]}],"ref_id":"52"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"encounter"}]}],"node_type":"Property","ref_id":"53"}],"node_type":"Property","ref_id":"53"}],"ref_id":"54"}],"node_type":"Query","ref_id":"55"}],"ref_id":"56"}],"define_name":"Encounter With Existing Diabetes Diagnosis"},{"children":[{"children":[{"children":[{"text":"define \"Encounter With Hypoglycemic Medication\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Encounter With Hospitalization Period\""}]}]}],"node_type":"ExpressionRef","ref_id":"58"},{"children":[{"text":" Hospitalization"}]}],"ref_id":"59"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"[\"Medication, Administered\": "}]},{"children":[{"children":[{"text":"\"Hypoglycemics Treatment Medications\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"60"}],"node_type":"Retrieve","ref_id":"60"},{"children":[{"text":" HypoglycemicMed"}]}],"ref_id":"61"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"62"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\" ( "}]},{"children":[{"children":[{"children":[{"text":"HypoglycemicMed"}]}],"ref_id":"63"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"64"}],"node_type":"Property","ref_id":"64"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"HypoglycemicMed"}]}],"ref_id":"65"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"66"}],"node_type":"Property","ref_id":"66"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"67"}],"node_type":"FunctionRef","ref_id":"67"},{"children":[{"text":" starts during "}],"node_type":"In","ref_id":"70"},{"children":[{"children":[{"children":[{"text":"Hospitalization"}]}],"ref_id":"68"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"hospitalizationPeriod"}]}],"node_type":"Property","ref_id":"69"}],"node_type":"Property","ref_id":"69"}],"node_type":"In","ref_id":"70"}],"ref_id":"71"},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"children":[{"text":"Hospitalization"}]}],"ref_id":"72"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"encounter"}]}],"node_type":"Property","ref_id":"73"}],"node_type":"Property","ref_id":"73"}],"ref_id":"74"}],"node_type":"Query","ref_id":"75"}],"ref_id":"76"}],"define_name":"Encounter With Hypoglycemic Medication"},{"children":[{"children":[{"children":[{"text":"/** Using the already calculated pairing of hospitalization periods with encounters, filter on ones with \n * any elevated (\u003e= 200) blood glucose reading during the hospitalization*/define \"Encounter With Elevated Blood Glucose Lab\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Encounter With Hospitalization Period\""}]}]}],"node_type":"ExpressionRef","ref_id":"79"},{"children":[{"text":" Hospitalization"}]}],"ref_id":"80"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"[\"Laboratory Test, Performed\": "}]},{"children":[{"children":[{"text":"\"Glucose Lab Test Mass Per Volume\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"81"}],"node_type":"Retrieve","ref_id":"81"},{"children":[{"text":" BloodGlucoseLab"}]}],"ref_id":"82"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"BloodGlucoseLab"}]}],"ref_id":"83"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"84"}],"node_type":"Property","ref_id":"84"},{"children":[{"text":" during "}],"node_type":"In","ref_id":"87"},{"children":[{"children":[{"children":[{"text":"Hospitalization"}]}],"ref_id":"85"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"hospitalizationPeriod"}]}],"node_type":"Property","ref_id":"86"}],"node_type":"Property","ref_id":"86"}],"node_type":"In","ref_id":"87"},{"children":[{"text":"\n        and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"BloodGlucoseLab"}]}],"ref_id":"88"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"result"}]}],"node_type":"Property","ref_id":"89"}],"node_type":"Property","ref_id":"89"},{"children":[{"text":" \u003e= "}]},{"children":[{"children":[{"text":"200 'mg/dL'"}]}],"node_type":"Quantity","ref_id":"90"}],"node_type":"GreaterOrEqual","ref_id":"91"}],"node_type":"And","ref_id":"92"}],"ref_id":"93"},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"children":[{"text":"Hospitalization"}]}],"ref_id":"94"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"encounter"}]}],"node_type":"Property","ref_id":"95"}],"node_type":"Property","ref_id":"95"}],"ref_id":"96"}],"node_type":"Query","ref_id":"97"}],"ref_id":"98"}],"define_name":"Encounter With Elevated Blood Glucose Lab"},{"children":[{"children":[{"children":[{"text":"define \"Initial Population\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"Encounter With Existing Diabetes Diagnosis\""}]}],"node_type":"ExpressionRef","ref_id":"57"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"\"Encounter With Hypoglycemic Medication\""}]}],"node_type":"ExpressionRef","ref_id":"77"}],"node_type":"Union","ref_id":"78"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"\"Encounter With Elevated Blood Glucose Lab\""}]}],"node_type":"ExpressionRef","ref_id":"99"}],"node_type":"Union","ref_id":"100"}],"ref_id":"101"}],"define_name":"Initial Population"},{"children":[{"children":[{"children":[{"text":"/**\n * Crops an interval to a maximum length of 10 days.*/define function \"Hospital Days Max 10\"(Period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"109"},{"children":[{"text":"\u003e"}]}],"ref_id":"110"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"Period"}]}],"node_type":"OperandRef","ref_id":"111"}],"ref_id":"112"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"Min("}]},{"children":[{"children":[{"text":"{ \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"Period"}]}],"node_type":"OperandRef","ref_id":"113"}],"ref_id":"114"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"Period"}]}],"node_type":"OperandRef","ref_id":"115"}],"node_type":"Start","ref_id":"116"},{"children":[{"text":" + "}]},{"children":[{"children":[{"text":"10 days"}]}],"node_type":"Quantity","ref_id":"117"}],"ref_id":"118"},{"children":[{"text":" }"}]}],"ref_id":"119"},{"children":[{"text":"\n  )"}]}],"ref_id":"120"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"121"}],"node_type":"Interval","ref_id":"121"}],"ref_id":"122"}],"define_name":"Hospital Days Max 10"},{"children":[{"children":[{"children":[{"text":"/** Creates a list of integers from 1 to how many days are in the interval. Note, this wont create an index for\n * the final day if it is less than 24 hours. This also includes the first 24 hour period.*/define function \"Interval To Day Numbers\"(Period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"132"},{"children":[{"text":"\u003e"}]}],"ref_id":"133"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"expand "}]},{"children":[{"children":[{"text":"{ "}]},{"children":[{"children":[{"text":"Interval[1, "}],"ref_id":"134"},{"children":[{"children":[{"text":"duration in days between "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"Period"}]}],"node_type":"OperandRef","ref_id":"135"}],"node_type":"Start","ref_id":"136"},{"children":[{"text":" and \n  "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"Period"}]}],"node_type":"OperandRef","ref_id":"137"}],"node_type":"End","ref_id":"138"}],"ref_id":"139"},{"children":[{"text":"]"}]}],"ref_id":"140"},{"children":[{"text":"}"}]}],"node_type":"List","ref_id":"141"}],"node_type":"Expand","ref_id":"142"},{"children":[{"text":" )"}]}],"node_type":"Expand","ref_id":"142"},{"children":[{"text":" DayNumber"}]}],"ref_id":"143"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"DayNumber"}]}],"node_type":"AliasRef","ref_id":"144"}],"node_type":"End","ref_id":"145"}],"ref_id":"146"}],"node_type":"Query","ref_id":"147"}],"node_type":"Query","ref_id":"147"}],"ref_id":"148"}],"define_name":"Interval To Day Numbers"},{"children":[{"children":[{"children":[{"text":"/**\n * Creates a list of 24 hour long intervals in an interval paired with the index (1 indexed) to which 24 hour interval it is.*/define function \"Days In Period\"(Period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"129"},{"children":[{"text":"\u003e"}]}],"ref_id":"130"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"\"Interval To Day Numbers\"("}]},{"children":[{"children":[{"text":"Period"}]}],"node_type":"OperandRef","ref_id":"131"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"149"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"149"},{"children":[{"text":" DayIndex"}]}],"ref_id":"150"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"startPeriod: "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"Period"}]}],"node_type":"OperandRef","ref_id":"151"}],"node_type":"Start","ref_id":"152"},{"children":[{"text":" + "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"text":"24 hours"}]}],"node_type":"Quantity","ref_id":"153"},{"children":[{"text":" * "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"text":"DayIndex"}]}],"node_type":"AliasRef","ref_id":"154"},{"children":[{"text":" - 1"}],"node_type":"Literal","ref_id":"155"}],"node_type":"Subtract","ref_id":"156"},{"children":[{"text":" )"}]}],"node_type":"Subtract","ref_id":"156"}],"node_type":"Multiply","ref_id":"157"},{"children":[{"text":" )"}]}],"node_type":"Multiply","ref_id":"157"}],"node_type":"Add","ref_id":"158"}],"ref_id":"159"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"endPeriod: "}]},{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"text":"hours between "}]},{"children":[{"children":[{"text":"startPeriod"}]}],"node_type":"QueryLetRef","ref_id":"160"},{"children":[{"text":" and \n      "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"Period"}]}],"node_type":"OperandRef","ref_id":"161"}],"node_type":"End","ref_id":"162"}],"node_type":"DurationBetween","ref_id":"163"},{"children":[{"text":" \u003c 24"}],"node_type":"Literal","ref_id":"164"}],"ref_id":"165"},{"children":[{"text":"\n    )"}]}],"ref_id":"165"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"startPeriod"}]}],"ref_id":"166"},{"children":[{"text":" \n      else "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"Period"}]}],"node_type":"OperandRef","ref_id":"167"}],"node_type":"Start","ref_id":"168"},{"children":[{"text":" + "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"text":"24 hours"}]}],"node_type":"Quantity","ref_id":"169"},{"children":[{"text":" * "}]},{"children":[{"children":[{"text":"DayIndex"}]}],"node_type":"AliasRef","ref_id":"170"}],"node_type":"Multiply","ref_id":"171"},{"children":[{"text":" )"}]}],"node_type":"Multiply","ref_id":"171"}],"ref_id":"172"}],"node_type":"If","ref_id":"173"}],"ref_id":"174"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Tuple {\n      "}]},{"children":[{"children":[{"text":"dayIndex: "}]},{"children":[{"children":[{"text":"DayIndex"}]}],"ref_id":"175"}]},{"children":[{"text":",\n      "}]},{"children":[{"children":[{"text":"dayPeriod: "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"startPeriod"}]}],"ref_id":"176"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"endPeriod"}]}],"ref_id":"177"},{"children":[{"text":" )"}]}],"ref_id":"178"}]},{"children":[{"text":"\n    }"}]}],"node_type":"Tuple","ref_id":"179"}],"ref_id":"180"}],"node_type":"Query","ref_id":"181"}],"node_type":"Query","ref_id":"181"}],"ref_id":"182"}],"define_name":"Days In Period"},{"children":[{"children":[{"children":[{"text":"define \"Days in Hospitalization\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Initial Population\""}]}]}],"node_type":"ExpressionRef","ref_id":"102"},{"children":[{"text":" EligibleInpatientHospitalization"}]}],"ref_id":"103"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"period: "}]},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"104"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"HospitalizationWithObservation\" ( "}]},{"children":[{"children":[{"text":"EligibleInpatientHospitalization"}]}],"node_type":"AliasRef","ref_id":"105"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"106"}],"node_type":"FunctionRef","ref_id":"106"}],"ref_id":"107"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"relevantPeriod: "}]},{"children":[{"children":[{"text":"\"Hospital Days Max 10\"("}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"QueryLetRef","ref_id":"108"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"123"}],"ref_id":"124"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Tuple {\n      "}]},{"children":[{"children":[{"text":"encounter: "}]},{"children":[{"children":[{"text":"EligibleInpatientHospitalization"}]}],"ref_id":"125"}]},{"children":[{"text":",\n      "}]},{"children":[{"children":[{"text":"hospitalizationPeriod: "}]},{"children":[{"children":[{"text":"period"}]}],"ref_id":"126"}]},{"children":[{"text":",\n      "}]},{"children":[{"children":[{"text":"relevantPeriod: "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"ref_id":"127"}]},{"children":[{"text":",\n      "}]},{"children":[{"children":[{"text":"relevantDays: "}]},{"children":[{"children":[{"text":"\"Days In Period\"("}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"QueryLetRef","ref_id":"128"},{"children":[{"text":")"}]}],"ref_id":"183"}]},{"children":[{"text":"\n    }"}]}],"node_type":"Tuple","ref_id":"184"}],"ref_id":"185"}],"node_type":"Query","ref_id":"186"}],"ref_id":"187"}],"define_name":"Days in Hospitalization"},{"children":[{"children":[{"children":[{"text":"define \"Days With Glucose Results\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Days in Hospitalization\""}]}]}],"node_type":"ExpressionRef","ref_id":"188"},{"children":[{"text":" InpatientHospitalDays"}]}],"ref_id":"189"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Tuple {\n      "}]},{"children":[{"children":[{"text":"encounter: "}]},{"children":[{"children":[{"children":[{"text":"InpatientHospitalDays"}]}],"ref_id":"190"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"encounter"}]}],"ref_id":"191"}],"ref_id":"191"}]},{"children":[{"text":",\n      "}]},{"children":[{"children":[{"text":"relevantPeriod: "}]},{"children":[{"children":[{"children":[{"text":"InpatientHospitalDays"}]}],"ref_id":"192"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"ref_id":"193"}],"ref_id":"193"}]},{"children":[{"text":",\n      "}]},{"children":[{"children":[{"text":"relevantDays: "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"InpatientHospitalDays.relevantDays"}]}]}],"node_type":"Property","ref_id":"194"},{"children":[{"text":" EncounterDay"}]}],"ref_id":"195"}]},{"children":[{"text":"\n          "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Tuple {\n            "}]},{"children":[{"children":[{"text":"dayIndex: "}]},{"children":[{"children":[{"children":[{"text":"EncounterDay"}]}],"ref_id":"196"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"dayIndex"}]}],"ref_id":"197"}],"ref_id":"197"}]},{"children":[{"text":",\n            "}]},{"children":[{"children":[{"text":"dayPeriod: "}]},{"children":[{"children":[{"children":[{"text":"EncounterDay"}]}],"ref_id":"198"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"dayPeriod"}]}],"ref_id":"199"}],"ref_id":"199"}]},{"children":[{"text":",\n            "}]},{"children":[{"children":[{"text":"hasSevereResult: "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Laboratory Test, Performed\": "}]},{"children":[{"children":[{"text":"\"Glucose Lab Test Mass Per Volume\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"200"}],"node_type":"Retrieve","ref_id":"200"},{"children":[{"text":" BloodGlucoseLab1"}]}],"ref_id":"201"}]},{"children":[{"text":"\n                "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"BloodGlucoseLab1"}]}],"ref_id":"202"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"result"}]}],"node_type":"Property","ref_id":"203"}],"node_type":"Property","ref_id":"203"},{"children":[{"text":" \u003e "}]},{"children":[{"children":[{"text":"300 'mg/dL'"}]}],"node_type":"Quantity","ref_id":"204"}],"node_type":"Greater","ref_id":"205"},{"children":[{"text":"\n                  and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"BloodGlucoseLab1"}]}],"ref_id":"206"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"207"}],"node_type":"Property","ref_id":"207"},{"children":[{"text":" during "}],"node_type":"In","ref_id":"210"},{"children":[{"children":[{"children":[{"text":"EncounterDay"}]}],"ref_id":"208"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"dayPeriod"}]}],"node_type":"Property","ref_id":"209"}],"node_type":"Property","ref_id":"209"}],"node_type":"In","ref_id":"210"}],"ref_id":"211"}],"ref_id":"211"}],"node_type":"Query","ref_id":"212"},{"children":[{"text":"\n            )"}]}],"node_type":"Query","ref_id":"212"}],"ref_id":"213"}]},{"children":[{"text":",\n            "}]},{"children":[{"children":[{"text":"hasElevatedResult: "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Laboratory Test, Performed\": "}]},{"children":[{"children":[{"text":"\"Glucose Lab Test Mass Per Volume\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"214"}],"node_type":"Retrieve","ref_id":"214"},{"children":[{"text":" BloodGlucoseLab2"}]}],"ref_id":"215"}]},{"children":[{"text":"\n                "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"BloodGlucoseLab2"}]}],"ref_id":"216"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"result"}]}],"node_type":"Property","ref_id":"217"}],"node_type":"Property","ref_id":"217"},{"children":[{"text":" \u003e= "}]},{"children":[{"children":[{"text":"200 'mg/dL'"}]}],"node_type":"Quantity","ref_id":"218"}],"node_type":"GreaterOrEqual","ref_id":"219"},{"children":[{"text":"\n                  and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"BloodGlucoseLab2"}]}],"ref_id":"220"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"221"}],"node_type":"Property","ref_id":"221"},{"children":[{"text":" during "}],"node_type":"In","ref_id":"224"},{"children":[{"children":[{"children":[{"text":"EncounterDay"}]}],"ref_id":"222"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"dayPeriod"}]}],"node_type":"Property","ref_id":"223"}],"node_type":"Property","ref_id":"223"}],"node_type":"In","ref_id":"224"}],"ref_id":"225"}],"ref_id":"225"}],"node_type":"Query","ref_id":"226"},{"children":[{"text":"\n            )"}]}],"node_type":"Query","ref_id":"226"}],"ref_id":"227"}]},{"children":[{"text":",\n            "}]},{"children":[{"children":[{"text":"hasNoGlucoseTest: "}]},{"children":[{"children":[{"text":"not "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Laboratory Test, Performed\": "}]},{"children":[{"children":[{"text":"\"Glucose Lab Test Mass Per Volume\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"228"}],"node_type":"Retrieve","ref_id":"228"},{"children":[{"text":" BloodGlucoseLab3"}]}],"ref_id":"229"}]},{"children":[{"text":"\n                "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"BloodGlucoseLab3"}]}],"ref_id":"230"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"231"}],"node_type":"Property","ref_id":"231"},{"children":[{"text":" during "}],"ref_id":"234"},{"children":[{"children":[{"children":[{"text":"EncounterDay"}]}],"ref_id":"232"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"dayPeriod"}]}],"node_type":"Property","ref_id":"233"}],"node_type":"Property","ref_id":"233"}],"ref_id":"234"}],"ref_id":"234"}],"node_type":"Query","ref_id":"235"},{"children":[{"text":"\n            )"}]}],"node_type":"Query","ref_id":"235"}],"node_type":"Exists","ref_id":"236"}],"ref_id":"237"}]},{"children":[{"text":"\n          }"}]}],"node_type":"Tuple","ref_id":"238"}],"ref_id":"239"}],"ref_id":"240"},{"children":[{"text":"\n      )"}]}],"ref_id":"240"}]},{"children":[{"text":"\n    }"}]}],"node_type":"Tuple","ref_id":"241"}],"ref_id":"242"}],"node_type":"Query","ref_id":"243"}],"ref_id":"244"}],"define_name":"Days With Glucose Results"},{"children":[{"children":[{"children":[{"text":"/*# days with hyper events uses \"Days With Glucose Results\" to find if hyper event on each day. Skips 1st day in 'RelevantDays`. Returns boolean based on: Today high result OR Today no result AND Yesterday high result AND 2 days ago high result*/define \"Days With Hyperglycemic Events\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Days With Glucose Results\""}]}]}],"node_type":"ExpressionRef","ref_id":"245"},{"children":[{"text":" EncounterWithResultDays"}]}],"ref_id":"246"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"eligibleEventDays: "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"EncounterWithResultDays.relevantDays"}]}]}],"node_type":"Property","ref_id":"247"},{"children":[{"text":" EncounterDay"}]}],"ref_id":"248"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"EncounterDay"}]}],"ref_id":"249"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"dayIndex"}]}],"node_type":"Property","ref_id":"250"}],"node_type":"Property","ref_id":"250"},{"children":[{"text":" \u003e 1"}],"node_type":"Literal","ref_id":"251"}],"ref_id":"252"}],"ref_id":"252"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Tuple {\n        "}]},{"children":[{"children":[{"text":"dayIndex: "}]},{"children":[{"children":[{"children":[{"text":"EncounterDay"}]}],"ref_id":"253"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"dayIndex"}]}],"ref_id":"254"}],"ref_id":"254"}]},{"children":[{"text":",\n        "}]},{"children":[{"children":[{"text":"dayPeriod: "}]},{"children":[{"children":[{"children":[{"text":"EncounterDay"}]}],"ref_id":"255"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"dayPeriod"}]}],"ref_id":"256"}],"ref_id":"256"}]},{"children":[{"text":",\n        "}]},{"children":[{"children":[{"text":"hasHyperglycemicEvent: "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"text":"EncounterDay"}]}],"ref_id":"257"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"hasSevereResult"}]}],"node_type":"Property","ref_id":"258"}],"node_type":"Property","ref_id":"258"},{"children":[{"text":"\n            or "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"EncounterDay"}]}],"ref_id":"259"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"hasNoGlucoseTest"}]}],"node_type":"Property","ref_id":"260"}],"node_type":"Property","ref_id":"260"},{"children":[{"text":"\n                and "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"EncounterWithResultDays"}]}],"ref_id":"261"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDays"}]}],"node_type":"Property","ref_id":"262"}],"node_type":"Property","ref_id":"262"},{"children":[{"text":"["}]},{"children":[{"children":[{"children":[{"children":[{"text":"EncounterDay"}]}],"ref_id":"263"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"dayIndex"}]}],"node_type":"Property","ref_id":"264"}],"node_type":"Property","ref_id":"264"},{"children":[{"text":" - 2"}],"node_type":"Literal","ref_id":"265"}],"node_type":"Subtract","ref_id":"266"},{"children":[{"text":"]"}]}],"ref_id":"267"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"hasElevatedResult"}]}],"node_type":"Property","ref_id":"268"}],"node_type":"Property","ref_id":"268"}],"node_type":"And","ref_id":"269"},{"children":[{"text":"\n                and "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"EncounterWithResultDays"}]}],"ref_id":"270"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDays"}]}],"node_type":"Property","ref_id":"271"}],"node_type":"Property","ref_id":"271"},{"children":[{"text":"["}]},{"children":[{"children":[{"children":[{"children":[{"text":"EncounterDay"}]}],"ref_id":"272"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"dayIndex"}]}],"node_type":"Property","ref_id":"273"}],"node_type":"Property","ref_id":"273"},{"children":[{"text":" - 3"}],"node_type":"Literal","ref_id":"274"}],"node_type":"Subtract","ref_id":"275"},{"children":[{"text":"]"}]}],"ref_id":"276"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"hasElevatedResult"}]}],"node_type":"Property","ref_id":"277"}],"node_type":"Property","ref_id":"277"}],"node_type":"And","ref_id":"278"},{"children":[{"text":"\n            )"}]}],"node_type":"And","ref_id":"278"}],"ref_id":"279"},{"children":[{"text":"\n        )"}]}],"ref_id":"279"}]},{"children":[{"text":"\n      }"}]}],"node_type":"Tuple","ref_id":"280"}],"ref_id":"281"}],"node_type":"Query","ref_id":"282"}],"ref_id":"283"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Tuple {\n      "}]},{"children":[{"children":[{"text":"encounter: "}]},{"children":[{"children":[{"children":[{"text":"EncounterWithResultDays"}]}],"ref_id":"284"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"encounter"}]}],"ref_id":"285"}],"ref_id":"285"}]},{"children":[{"text":",\n      "}]},{"children":[{"children":[{"text":"relevantPeriod: "}]},{"children":[{"children":[{"children":[{"text":"EncounterWithResultDays"}]}],"ref_id":"286"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"ref_id":"287"}],"ref_id":"287"}]},{"children":[{"text":",\n      "}]},{"children":[{"children":[{"text":"eligibleEventDays: "}]},{"children":[{"children":[{"text":"eligibleEventDays"}]}],"ref_id":"288"}]},{"children":[{"text":"\n    }"}]}],"node_type":"Tuple","ref_id":"289"}],"ref_id":"290"}],"node_type":"Query","ref_id":"291"}],"ref_id":"292"}],"define_name":"Days With Hyperglycemic Events"},{"children":[{"children":[{"children":[{"text":"define \"Denominator\":\n  "}]},{"children":[{"children":[{"text":"\"Initial Population\""}]}],"node_type":"ExpressionRef","ref_id":"293"}],"ref_id":"294"}],"define_name":"Denominator"},{"children":[{"children":[{"children":[{"text":"define \"First Blood Glucose Within 1 Hour Prior To and 6 Hours After Encounter Start\":\n  "}]},{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Laboratory Test, Performed\": "}]},{"children":[{"children":[{"text":"\"Glucose Lab Test Mass Per Volume\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"297"}],"node_type":"Retrieve","ref_id":"297"},{"children":[{"text":" FirstBloodGlucose"}]}],"ref_id":"298"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"with"}]},{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"\"Qualifying Encounter\""}]}],"node_type":"ExpressionRef","ref_id":"299"},{"children":[{"text":")"}]}],"node_type":"ExpressionRef","ref_id":"299"},{"children":[{"text":"InpatientEncounter"}]}],"ref_id":"300"},{"children":[{"text":"\n        such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"FirstBloodGlucose"}]}],"ref_id":"301"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"302"}],"node_type":"Property","ref_id":"302"},{"children":[{"text":" during "}],"node_type":"In","ref_id":"316"},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"303"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"HospitalizationWithObservation\"("}]},{"children":[{"children":[{"text":"InpatientEncounter"}]}],"node_type":"AliasRef","ref_id":"304"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"305"}],"node_type":"FunctionRef","ref_id":"305"}],"node_type":"Start","ref_id":"306"},{"children":[{"text":"- "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"307"}],"ref_id":"308"},{"children":[{"text":")"}]}],"ref_id":"308"},{"children":[{"text":","}]},{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"309"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"HospitalizationWithObservation\"("}]},{"children":[{"children":[{"text":"InpatientEncounter"}]}],"node_type":"AliasRef","ref_id":"310"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"311"}],"node_type":"FunctionRef","ref_id":"311"}],"node_type":"Start","ref_id":"312"},{"children":[{"text":"+ "}]},{"children":[{"children":[{"text":"6 hours"}]}],"node_type":"Quantity","ref_id":"313"}],"ref_id":"314"},{"children":[{"text":")"}]}],"ref_id":"314"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"315"}],"node_type":"In","ref_id":"316"}],"ref_id":"317"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"relevantDatetime"}]}],"ref_id":"318"}],"ref_id":"319"}],"ref_id":"320"}],"ref_id":"321"},{"children":[{"text":"\n  )"}]}],"node_type":"First","ref_id":"322"}],"ref_id":"323"}],"define_name":"First Blood Glucose Within 1 Hour Prior To and 6 Hours After Encounter Start"},{"children":[{"children":[{"children":[{"text":"define \"Encounter With First Blood Glucose Greater Than or Equal to 1000\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Qualifying Encounter\""}]}]}],"node_type":"ExpressionRef","ref_id":"295"},{"children":[{"text":" InpatientHospitalization"}]}],"ref_id":"296"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"First Blood Glucose Within 1 Hour Prior To and 6 Hours After Encounter Start\""}]}]}],"node_type":"ExpressionRef","ref_id":"324"},{"children":[{"text":" FirstGlucoseResult"}]}],"ref_id":"325"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"FirstGlucoseResult"}]}],"ref_id":"326"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"result"}]}],"node_type":"Property","ref_id":"327"}],"node_type":"Property","ref_id":"327"},{"children":[{"text":" \u003e= "}]},{"children":[{"children":[{"text":"1000 'mg/dL'"}]}],"node_type":"Quantity","ref_id":"328"}],"node_type":"GreaterOrEqual","ref_id":"329"}],"ref_id":"330"}],"node_type":"Query","ref_id":"331"}],"ref_id":"332"}],"define_name":"Encounter With First Blood Glucose Greater Than or Equal to 1000"},{"children":[{"children":[{"children":[{"text":"define \"Denominator Exclusions\":\n  "}]},{"children":[{"children":[{"text":"\"Encounter With First Blood Glucose Greater Than or Equal to 1000\""}]}],"node_type":"ExpressionRef","ref_id":"333"}],"ref_id":"334"}],"define_name":"Denominator Exclusions"},{"children":[{"children":[{"children":[{"text":"define \"Encounter With Hyperglycemic Events\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Days With Hyperglycemic Events\""}]}]}],"node_type":"ExpressionRef","ref_id":"335"},{"children":[{"text":" HyperglycemicEventDays"}]}],"ref_id":"336"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"HyperglycemicEventDays.eligibleEventDays"}]}]}],"node_type":"Property","ref_id":"337"},{"children":[{"text":" EligibleEventDay"}]}],"ref_id":"338"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"text":"EligibleEventDay"}]}],"ref_id":"339"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"hasHyperglycemicEvent"}]}],"ref_id":"340"}],"ref_id":"340"}],"ref_id":"340"}],"node_type":"Query","ref_id":"341"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"341"}],"ref_id":"342"}],"ref_id":"342"},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"children":[{"text":"HyperglycemicEventDays"}]}],"ref_id":"343"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"encounter"}]}],"node_type":"Property","ref_id":"344"}],"node_type":"Property","ref_id":"344"}],"ref_id":"345"}],"node_type":"Query","ref_id":"346"}],"ref_id":"347"}],"define_name":"Encounter With Hyperglycemic Events"},{"children":[{"children":[{"children":[{"text":"define \"Numerator\":\n  "}]},{"children":[{"children":[{"text":"\"Encounter With Hyperglycemic Events\""}]}],"node_type":"ExpressionRef","ref_id":"348"}],"ref_id":"349"}],"define_name":"Numerator"},{"children":[{"children":[{"children":[{"text":"define \"SDE Ethnicity\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Ethnicity\": "}]},{"children":[{"children":[{"text":"\"Ethnicity\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"350"}],"ref_id":"351"}],"define_name":"SDE Ethnicity"},{"children":[{"children":[{"children":[{"text":"define \"SDE Payer\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Payer\": "}]},{"children":[{"children":[{"text":"\"Payer\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"352"}],"ref_id":"353"}],"define_name":"SDE Payer"},{"children":[{"children":[{"children":[{"text":"define \"SDE Race\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Race\": "}]},{"children":[{"children":[{"text":"\"Race\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"354"}],"ref_id":"355"}],"define_name":"SDE Race"},{"children":[{"children":[{"children":[{"text":"define \"SDE Sex\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Sex\": "}]},{"children":[{"children":[{"text":"\"ONC Administrative Sex\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"356"}],"ref_id":"357"}],"define_name":"SDE Sex"},{"children":[{"children":[{"children":[{"text":"/**\n * Counts the number of eligible days with a hyperglycemic event in an encounter. This simply filters and counts the data built in\n * \"Days With Hyperglycemic Events\".*/define function \"Numerator Observations\"(QualifyingEncounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"364"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"singleton from "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Days With Hyperglycemic Events\""}]}]}],"node_type":"ExpressionRef","ref_id":"365"},{"children":[{"text":" EncounterWithEventDays"}]}],"ref_id":"366"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"EncounterWithEventDays"}]}],"ref_id":"367"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"encounter"}]}],"node_type":"Property","ref_id":"368"}],"node_type":"Property","ref_id":"368"},{"children":[{"text":" = "}]},{"children":[{"children":[{"text":"QualifyingEncounter"}]}],"node_type":"OperandRef","ref_id":"369"}],"ref_id":"370"}],"ref_id":"370"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Count("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"EncounterWithEventDays.eligibleEventDays"}]}]}],"node_type":"Property","ref_id":"371"},{"children":[{"text":" EligibleEventDay"}]}],"ref_id":"372"}]},{"children":[{"text":"\n          "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"text":"EligibleEventDay"}]}],"ref_id":"373"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"hasHyperglycemicEvent"}]}],"ref_id":"374"}],"ref_id":"374"}],"ref_id":"374"}],"ref_id":"375"},{"children":[{"text":"\n      )"}]}],"node_type":"Count","ref_id":"376"}],"ref_id":"377"}],"node_type":"Query","ref_id":"378"},{"children":[{"text":"\n  )"}]}],"node_type":"Query","ref_id":"378"}],"node_type":"SingletonFrom","ref_id":"379"}],"node_type":"SingletonFrom","ref_id":"379"}],"ref_id":"380"}],"define_name":"Numerator Observations"},{"children":[{"children":[{"children":[{"text":"/**\n * Counts the number of eligible days in an encounter. This simply filters and counts the data built in\n * \"Days With Glucose Results\".*/define function \"Denominator Observations\"(QualifyingEncounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"384"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"singleton from "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Days With Hyperglycemic Events\""}]}]}],"node_type":"ExpressionRef","ref_id":"385"},{"children":[{"text":" EncounterWithEventDays"}]}],"ref_id":"386"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"EncounterWithEventDays"}]}],"ref_id":"387"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"encounter"}]}],"node_type":"Property","ref_id":"388"}],"node_type":"Property","ref_id":"388"},{"children":[{"text":" = "}]},{"children":[{"children":[{"text":"QualifyingEncounter"}]}],"node_type":"OperandRef","ref_id":"389"}],"ref_id":"390"}],"ref_id":"390"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Count("}]},{"children":[{"children":[{"children":[{"text":"EncounterWithEventDays"}]}],"ref_id":"391"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"eligibleEventDays"}]}],"ref_id":"392"}],"ref_id":"392"},{"children":[{"text":")"}]}],"node_type":"Count","ref_id":"393"}],"ref_id":"394"}],"node_type":"Query","ref_id":"395"},{"children":[{"text":"\n  )"}]}],"node_type":"Query","ref_id":"395"}],"node_type":"SingletonFrom","ref_id":"396"}],"node_type":"SingletonFrom","ref_id":"396"}],"ref_id":"397"}],"define_name":"Denominator Observations"}],"identifier":{"id":"HospitalHarmHyperglycemiainHospitalizedPatients","version":"2.0.000"}},"is_main_library":true,"is_top_level":true,"library_name":"HospitalHarmHyperglycemiainHospitalizedPatients","library_version":"2.0.000","statement_dependencies":[{"_id":"689268fde8da6d1c0d518459","statement_name":"Patient"},{"_id":"689268fde8da6d1c0d51845a","statement_name":"Qualifying Encounter","statement_references":[{"_id":"689268fce8da6d1c0d518448","hqmf_id":null,"library_name":"HospitalHarmHyperglycemiainHospitalizedPatients","statement_name":"Patient"},{"_id":"689268fce8da6d1c0d518449","hqmf_id":null,"library_name":"MATGlobalCommonFunctions","statement_name":"HospitalizationWithObservation"}]},{"_id":"689268fde8da6d1c0d51845b","statement_name":"Encounter With Hospitalization Period","statement_references":[{"_id":"689268fce8da6d1c0d51844a","hqmf_id":null,"library_name":"HospitalHarmHyperglycemiainHospitalizedPatients","statement_name":"Qualifying Encounter"},{"_id":"689268fce8da6d1c0d51844b","hqmf_id":null,"library_name":"MATGlobalCommonFunctions","statement_name":"HospitalizationWithObservation"}]},{"_id":"689268fde8da6d1c0d51845c","statement_name":"Encounter With Existing Diabetes Diagnosis","statement_references":[{"_id":"68926901e8da6d1c0d518920","hqmf_id":null,"library_name":"HospitalHarmHyperglycemiainHospitalizedPatients","statement_name":"Encounter With Hospitalization Period"}]},{"_id":"689268fde8da6d1c0d51845d","statement_name":"Encounter With Hypoglycemic Medication","statement_references":[{"_id":"689268fce8da6d1c0d51844c","hqmf_id":null,"library_name":"HospitalHarmHyperglycemiainHospitalizedPatients","statement_name":"Encounter With Hospitalization Period"},{"_id":"689268fce8da6d1c0d51844d","hqmf_id":null,"library_name":"MATGlobalCommonFunctions","statement_name":"NormalizeInterval"}]},{"_id":"689268fde8da6d1c0d51845e","statement_name":"Encounter With Elevated Blood Glucose Lab","statement_references":[{"_id":"68926901e8da6d1c0d518921","hqmf_id":null,"library_name":"HospitalHarmHyperglycemiainHospitalizedPatients","statement_name":"Encounter With Hospitalization Period"}]},{"_id":"689268fde8da6d1c0d51845f","statement_name":"Initial Population","statement_references":[{"_id":"689268fce8da6d1c0d51844e","hqmf_id":null,"library_name":"HospitalHarmHyperglycemiainHospitalizedPatients","statement_name":"Encounter With Existing Diabetes Diagnosis"},{"_id":"689268fce8da6d1c0d51844f","hqmf_id":null,"library_name":"HospitalHarmHyperglycemiainHospitalizedPatients","statement_name":"Encounter With Hypoglycemic Medication"},{"_id":"689268fce8da6d1c0d518450","hqmf_id":null,"library_name":"HospitalHarmHyperglycemiainHospitalizedPatients","statement_name":"Encounter With Elevated Blood Glucose Lab"}]},{"_id":"689268fde8da6d1c0d518460","statement_name":"Hospital Days Max 10"},{"_id":"689268fde8da6d1c0d518461","statement_name":"Interval To Day Numbers"},{"_id":"689268fde8da6d1c0d518462","statement_name":"Days In Period","statement_references":[{"_id":"68926901e8da6d1c0d518922","hqmf_id":null,"library_name":"HospitalHarmHyperglycemiainHospitalizedPatients","statement_name":"Interval To Day Numbers"}]},{"_id":"689268fde8da6d1c0d518463","statement_name":"Days in Hospitalization","statement_references":[{"_id":"689268fce8da6d1c0d518451","hqmf_id":null,"library_name":"HospitalHarmHyperglycemiainHospitalizedPatients","statement_name":"Initial Population"},{"_id":"689268fce8da6d1c0d518452","hqmf_id":null,"library_name":"MATGlobalCommonFunctions","statement_name":"HospitalizationWithObservation"},{"_id":"689268fce8da6d1c0d518453","hqmf_id":null,"library_name":"HospitalHarmHyperglycemiainHospitalizedPatients","statement_name":"Hospital Days Max 10"},{"_id":"689268fce8da6d1c0d518454","hqmf_id":null,"library_name":"HospitalHarmHyperglycemiainHospitalizedPatients","statement_name":"Days In Period"}]},{"_id":"689268fde8da6d1c0d518464","statement_name":"Days With Glucose Results","statement_references":[{"_id":"68926901e8da6d1c0d518923","hqmf_id":null,"library_name":"HospitalHarmHyperglycemiainHospitalizedPatients","statement_name":"Days in Hospitalization"}]},{"_id":"689268fde8da6d1c0d518465","statement_name":"Days With Hyperglycemic Events","statement_references":[{"_id":"68926901e8da6d1c0d518924","hqmf_id":null,"library_name":"HospitalHarmHyperglycemiainHospitalizedPatients","statement_name":"Days With Glucose Results"}]},{"_id":"689268fde8da6d1c0d518466","statement_name":"Denominator","statement_references":[{"_id":"68926901e8da6d1c0d518925","hqmf_id":null,"library_name":"HospitalHarmHyperglycemiainHospitalizedPatients","statement_name":"Initial Population"}]},{"_id":"689268fde8da6d1c0d518467","statement_name":"First Blood Glucose Within 1 Hour Prior To and 6 Hours After Encounter Start","statement_references":[{"_id":"689268fce8da6d1c0d518455","hqmf_id":null,"library_name":"HospitalHarmHyperglycemiainHospitalizedPatients","statement_name":"Qualifying Encounter"},{"_id":"689268fce8da6d1c0d518456","hqmf_id":null,"library_name":"MATGlobalCommonFunctions","statement_name":"HospitalizationWithObservation"}]},{"_id":"689268fde8da6d1c0d518468","statement_name":"Encounter With First Blood Glucose Greater Than or Equal to 1000","statement_references":[{"_id":"689268fde8da6d1c0d518457","hqmf_id":null,"library_name":"HospitalHarmHyperglycemiainHospitalizedPatients","statement_name":"Qualifying Encounter"},{"_id":"689268fde8da6d1c0d518458","hqmf_id":null,"library_name":"HospitalHarmHyperglycemiainHospitalizedPatients","statement_name":"First Blood Glucose Within 1 Hour Prior To and 6 Hours After Encounter Start"}]},{"_id":"689268fde8da6d1c0d518469","statement_name":"Denominator Exclusions","statement_references":[{"_id":"68926901e8da6d1c0d518926","hqmf_id":null,"library_name":"HospitalHarmHyperglycemiainHospitalizedPatients","statement_name":"Encounter With First Blood Glucose Greater Than or Equal to 1000"}]},{"_id":"689268fde8da6d1c0d51846a","statement_name":"Encounter With Hyperglycemic Events","statement_references":[{"_id":"68926901e8da6d1c0d518927","hqmf_id":null,"library_name":"HospitalHarmHyperglycemiainHospitalizedPatients","statement_name":"Days With Hyperglycemic Events"}]},{"_id":"689268fde8da6d1c0d51846b","statement_name":"Numerator","statement_references":[{"_id":"68926901e8da6d1c0d518928","hqmf_id":null,"library_name":"HospitalHarmHyperglycemiainHospitalizedPatients","statement_name":"Encounter With Hyperglycemic Events"}]},{"_id":"689268fde8da6d1c0d51846c","statement_name":"SDE Ethnicity"},{"_id":"689268fde8da6d1c0d51846d","statement_name":"SDE Payer"},{"_id":"689268fde8da6d1c0d51846e","statement_name":"SDE Race"},{"_id":"689268fde8da6d1c0d51846f","statement_name":"SDE Sex"},{"_id":"689268fde8da6d1c0d518470","statement_name":"Numerator Observations","statement_references":[{"_id":"68926901e8da6d1c0d518929","hqmf_id":null,"library_name":"HospitalHarmHyperglycemiainHospitalizedPatients","statement_name":"Days With Hyperglycemic Events"}]},{"_id":"689268fde8da6d1c0d518471","statement_name":"Denominator Observations","statement_references":[{"_id":"68926901e8da6d1c0d51892a","hqmf_id":null,"library_name":"HospitalHarmHyperglycemiainHospitalizedPatients","statement_name":"Days With Hyperglycemic Events"}]}]},{"_id":"689268fde8da6d1c0d518475","cql":"library MATGlobalCommonFunctions version '7.0.000'\n\nusing QDM version '5.6'\n\nvalueset \"Emergency Department Visit\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.292' \nvalueset \"Encounter Inpatient\": 'urn:oid:2.16.840.1.113883.3.666.5.307' \nvalueset \"Intensive Care Unit\": 'urn:oid:2.16.840.1.113762.1.4.1029.206' \nvalueset \"Observation Services\": 'urn:oid:2.16.840.1.113762.1.4.1111.143' \nvalueset \"Outpatient Surgery Service\": 'urn:oid:2.16.840.1.113762.1.4.1110.38' \n\nparameter \"Measurement Period\" Interval\u003cDateTime\u003e\n\ncontext Patient\n\ndefine \"ED Encounter\":\n  [\"Encounter, Performed\": \"Emergency Department Visit\"]\n\ndefine \"Inpatient Encounter\":\n  [\"Encounter, Performed\": \"Encounter Inpatient\"] EncounterInpatient\n    where \"LengthInDays\"(EncounterInpatient.relevantPeriod)\u003c= 120\n      and EncounterInpatient.relevantPeriod ends during day of \"Measurement Period\"\n\n/*@description: Returns an interval of date values extracted from the input interval of date-time values\n@comment: This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability.*/\ndefine function \"ToDateInterval\"(period Interval\u003cDateTime\u003e ):\n  Interval[date from start of period, date from end of period]\n\n/*calculates the difference in calendar days between the start and end of the given interval.*/\ndefine function \"LengthInDays\"(Value Interval\u003cDateTime\u003e ):\n  difference in days between start of Value and end of Value\n\n/*returns list of all locations within an encounter, including locations for immediately prior ED visit.*/\ndefine function \"HospitalizationLocations\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet EDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn if EDVisit is null then Visit.facilityLocations \n  \t\telse flatten { EDVisit.facilityLocations, Visit.facilityLocations }\n\n/*Returns the arrival time in the ED for the encounter.*/\ndefine function \"EmergencyDepartmentArrivalTime\"(Encounter \"Encounter, Performed\" ):\n  start of First((\"HospitalizationLocations\"(Encounter))HospitalLocation\n  \t\twhere HospitalLocation.code in \"Emergency Department Visit\"\n  \t\tsort by start of locationPeriod\n  ).locationPeriod\n\n/*Returns admission time for an encounter or for immediately prior emergency department visit.*/\ndefine function \"HospitalAdmissionTime\"(Encounter \"Encounter, Performed\" ):\n  start of \"Hospitalization\"(Encounter)\n\n/*Returns earliest arrival time for an encounter including any prior ED visit.*/\ndefine function \"HospitalArrivalTime\"(Encounter \"Encounter, Performed\" ):\n  start of First((\"HospitalizationLocations\"(Encounter))HospitalLocation\n  \t\tsort by start of locationPeriod\n  ).locationPeriod\n\n/*Hospitalization returns the total interval for admission to discharge for the given encounter, or for the admission of any immediately prior emergency department visit to the discharge of the given encounter.*/\ndefine function \"Hospitalization\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet EDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn Interval[Coalesce(start of EDVisit.relevantPeriod, start of Visit.relevantPeriod), \n  \tend of Visit.relevantPeriod]\n\n/*Returns the length of stay in days (i.e. the number of days between admission and discharge) for the given encounter, or from the admission of any immediately prior emergency department visit to the discharge of the encounter*/\ndefine function \"HospitalizationLengthofStay\"(Encounter \"Encounter, Performed\" ):\n  LengthInDays(\"Hospitalization\"(Encounter))\n\n/*Returns the latest departure time for encounter including any prior ED visit.*/\ndefine function \"HospitalDepartureTime\"(Encounter \"Encounter, Performed\" ):\n  end of Last((\"HospitalizationLocations\"(Encounter))HospitalLocation\n  \t\tsort by start of locationPeriod\n  ).locationPeriod\n\n/*Hospital Discharge Time returns the discharge time for an encounter*/\ndefine function \"HospitalDischargeTime\"(Encounter \"Encounter, Performed\" ):\n  end of Encounter.relevantPeriod\n\n/*Hospitalization with Observation and Outpatient Surgery Service returns the total interval from the start of any immediately prior emergency department visit, outpatient surgery visit or observation visit to the discharge of the given encounter.*/\ndefine function \"HospitalizationWithObservationAndOutpatientSurgeryService\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet ObsVisit: Last([\"Encounter, Performed\": \"Observation Services\"] LastObs\n  \t\t\twhere LastObs.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t),\n  \tVisitStart: Coalesce(start of ObsVisit.relevantPeriod, start of Visit.relevantPeriod),\n  \tEDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before VisitStart\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t),\n  \tVisitStartWithED: Coalesce(start of EDVisit.relevantPeriod, VisitStart),\n  \tOutpatientSurgeryVisit: Last([\"Encounter, Performed\": \"Outpatient Surgery Service\"] LastSurgeryOP\n  \t\t\twhere LastSurgeryOP.relevantPeriod ends 1 hour or less on or before VisitStartWithED\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn Interval[Coalesce(start of OutpatientSurgeryVisit.relevantPeriod, VisitStartWithED), \n  \tend of Visit.relevantPeriod]\n\n/*Hospitalization with Observation returns the total interval from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\ndefine function \"HospitalizationWithObservation\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet ObsVisit: Last([\"Encounter, Performed\": \"Observation Services\"] LastObs\n  \t\t\twhere LastObs.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t),\n  \tVisitStart: Coalesce(start of ObsVisit.relevantPeriod, start of Visit.relevantPeriod),\n  \tEDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before VisitStart\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn Interval[Coalesce(start of EDVisit.relevantPeriod, VisitStart), \n  \tend of Visit.relevantPeriod]\n\n/*Hospitalization with Observation Length of Stay returns the length in days from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\ndefine function \"HospitalizationWithObservationLengthofStay\"(Encounter \"Encounter, Performed\" ):\n  \"LengthInDays\"(\"HospitalizationWithObservation\"(Encounter))\n\n/*First Inpatient Intensive Care Unit returns the first intensive care unit for the given encounter, without considering any immediately prior emergency department visit.*/\ndefine function \"FirstInpatientIntensiveCareUnit\"(Encounter \"Encounter, Performed\" ):\n  First((Encounter.facilityLocations)HospitalLocation\n      where HospitalLocation.code in \"Intensive Care Unit\"\n        and HospitalLocation.locationPeriod during Encounter.relevantPeriod\n      sort by start of locationPeriod\n  )\n\n/*Given a datetime and a period, returns the period (if a period is provided) or the interval beginning and ending on the datetime (if a datetime is provided)*/\ndefine function \"NormalizeInterval\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  if pointInTime is not null then Interval[pointInTime, pointInTime]\n    else if period is not null then period \n    else null as Interval\u003cDateTime\u003e\n\n/*Given an interval, return true if the interval has a starting boundary specified (i.e. the start of the interval is not null and not the minimum DateTime value)*/\ndefine function \"HasStart\"(period Interval\u003cDateTime\u003e ):\n  not ( start of period is null\n      or start of period = minimum DateTime\n  )\n\n/*Given an interval, return true if the interval has an ending boundary specified (i.e. the end of the interval is not null and not the maximum DateTime value)*/\ndefine function \"HasEnd\"(period Interval\u003cDateTime\u003e ):\n  not ( \n    end of period is null\n      or \n      end of period = maximum DateTime\n  )\n\n/*Given an interval, return the ending point if the interval has an ending boundary specified, otherwise, return the starting point*/\ndefine function \"Latest\"(period Interval\u003cDateTime\u003e ):\n  if ( HasEnd(period)) then \n  end of period \n    else start of period\n\n/*Given an interval, return the starting point if the interval has a starting boundary specified, otherwise, return the ending point*/\ndefine function \"Earliest\"(period Interval\u003cDateTime\u003e ):\n  if ( HasStart(period)) then start of period \n    else \n  end of period\n\n/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the ending point of the period if the period has an ending boundary specified, otherwise returns the starting point of the interval*/\ndefine function \"LatestOf\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  Latest(NormalizeInterval(pointInTime, period))\n\n/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the starting point of the period if the period has a starting boundary specified, otherwise returns the ending point of the period*/\ndefine function \"EarliestOf\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  Earliest(NormalizeInterval(pointInTime, period))\n\n","elm":{"library":{"annotation":[{"translatorOptions":"EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion,DisableMethodInvocation","type":"CqlToElmInfo"},{"type":"Annotation","s":{"r":"404","s":[{"value":["","library MATGlobalCommonFunctions version '7.0.000'"]}]}}],"identifier":{"id":"MATGlobalCommonFunctions","version":"7.0.000"},"schemaIdentifier":{"id":"urn:hl7-org:elm","version":"r1"},"usings":{"def":[{"localIdentifier":"System","uri":"urn:hl7-org:elm-types:r1"},{"localId":"1","locator":"3:1-3:23","localIdentifier":"QDM","uri":"urn:healthit-gov:qdm:v5_6","version":"5.6","annotation":[{"type":"Annotation","s":{"r":"1","s":[{"value":["","using "]},{"s":[{"value":["QDM"]}]},{"value":[" version ","'5.6'"]}]}}]}]},"parameters":{"def":[{"localId":"9","locator":"11:1-11:49","name":"Measurement Period","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"9","s":[{"value":["","parameter ","\"Measurement Period\""," "]},{"r":"8","s":[{"value":["Interval\u003c"]},{"r":"7","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}}],"parameterTypeSpecifier":{"localId":"8","locator":"11:32-11:49","type":"IntervalTypeSpecifier","pointType":{"localId":"7","locator":"11:41-11:48","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},"valueSets":{"def":[{"localId":"2","locator":"5:1-5:82","name":"Emergency Department Visit","id":"2.16.840.1.113883.3.117.1.7.1.292","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"2","s":[{"value":["","valueset ","\"Emergency Department Visit\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.292'"]}]}}]},{"localId":"3","locator":"6:1-6:71","name":"Encounter Inpatient","id":"2.16.840.1.113883.3.666.5.307","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"3","s":[{"value":["","valueset ","\"Encounter Inpatient\"",": ","'urn:oid:2.16.840.1.113883.3.666.5.307'"]}]}}]},{"localId":"4","locator":"7:1-7:72","name":"Intensive Care Unit","id":"2.16.840.1.113762.1.4.1029.206","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"4","s":[{"value":["","valueset ","\"Intensive Care Unit\"",": ","'urn:oid:2.16.840.1.113762.1.4.1029.206'"]}]}}]},{"localId":"5","locator":"8:1-8:73","name":"Observation Services","id":"2.16.840.1.113762.1.4.1111.143","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"5","s":[{"value":["","valueset ","\"Observation Services\"",": ","'urn:oid:2.16.840.1.113762.1.4.1111.143'"]}]}}]},{"localId":"6","locator":"9:1-9:78","name":"Outpatient Surgery Service","id":"2.16.840.1.113762.1.4.1110.38","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"6","s":[{"value":["","valueset ","\"Outpatient Surgery Service\"",": ","'urn:oid:2.16.840.1.113762.1.4.1110.38'"]}]}}]}]},"contexts":{"def":[{"locator":"13:1-13:15","name":"Patient"}]},"statements":{"def":[{"locator":"13:1-13:15","name":"Patient","context":"Patient","expression":{"type":"SingletonFrom","operand":{"locator":"13:1-13:15","dataType":"{urn:healthit-gov:qdm:v5_6}Patient","templateId":"Patient","type":"Retrieve"}}},{"localId":"11","locator":"15:1-16:56","name":"ED Encounter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"11","s":[{"value":["","define ","\"ED Encounter\"",":\n  "]},{"r":"10","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"10","locator":"16:3-16:56","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"16:28-16:55","name":"Emergency Department Visit","type":"ValueSetRef"}}},{"localId":"23","locator":"32:1-33:60","name":"LengthInDays","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"23","s":[{"value":["/*calculates the difference in calendar days between the start and end of the given interval.*/","define function ","\"LengthInDays\"","(","Value"," "]},{"r":"17","s":[{"value":["Interval\u003c"]},{"r":"16","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"22","s":[{"r":"22","s":[{"value":["difference in days between "]},{"r":"19","s":[{"value":["start of "]},{"r":"18","s":[{"value":["Value"]}]}]},{"value":[" and "]},{"r":"21","s":[{"value":["end of "]},{"r":"20","s":[{"value":["Value"]}]}]}]}]}]}}],"expression":{"localId":"22","locator":"33:3-33:60","precision":"Day","type":"DifferenceBetween","operand":[{"localId":"19","locator":"33:30-33:43","type":"Start","operand":{"localId":"18","locator":"33:39-33:43","name":"Value","type":"OperandRef"}},{"localId":"21","locator":"33:49-33:60","type":"End","operand":{"localId":"20","locator":"33:56-33:60","name":"Value","type":"OperandRef"}}]},"operand":[{"name":"Value","operandTypeSpecifier":{"localId":"17","locator":"32:38-32:55","type":"IntervalTypeSpecifier","pointType":{"localId":"16","locator":"32:47-32:54","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"33","locator":"18:1-21:83","name":"Inpatient Encounter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"33","s":[{"value":["","define ","\"Inpatient Encounter\"",":\n  "]},{"r":"32","s":[{"s":[{"r":"13","s":[{"r":"12","s":[{"r":"12","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Encounter Inpatient\""]}]},{"value":["]"]}]}]},{"value":[" ","EncounterInpatient"]}]}]},{"value":["\n    "]},{"r":"31","s":[{"value":["where "]},{"r":"31","s":[{"r":"26","s":[{"r":"24","s":[{"value":["\"LengthInDays\"","("]},{"r":"15","s":[{"r":"14","s":[{"value":["EncounterInpatient"]}]},{"value":["."]},{"r":"15","s":[{"value":["relevantPeriod"]}]}]},{"value":[")"]}]},{"r":"25","value":["\u003c="," ","120"]}]},{"value":["\n      and "]},{"r":"30","s":[{"r":"28","s":[{"r":"27","s":[{"value":["EncounterInpatient"]}]},{"value":["."]},{"r":"28","s":[{"value":["relevantPeriod"]}]}]},{"r":"30","value":[" ","ends during day of"," "]},{"r":"29","s":[{"value":["\"Measurement Period\""]}]}]}]}]}]}]}}],"expression":{"localId":"32","locator":"19:3-21:83","type":"Query","source":[{"localId":"13","locator":"19:3-19:68","alias":"EncounterInpatient","expression":{"localId":"12","locator":"19:3-19:49","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"19:28-19:48","name":"Encounter Inpatient","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"31","locator":"20:5-21:83","type":"And","operand":[{"localId":"26","locator":"20:11-20:65","type":"LessOrEqual","operand":[{"localId":"24","locator":"20:11-20:59","name":"LengthInDays","type":"FunctionRef","operand":[{"localId":"15","locator":"20:26-20:58","path":"relevantPeriod","scope":"EncounterInpatient","type":"Property"}]},{"localId":"25","locator":"20:63-20:65","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"120","type":"Literal"}]},{"localId":"30","locator":"21:11-21:83","precision":"Day","type":"In","operand":[{"locator":"21:45-21:48","type":"End","operand":{"localId":"28","locator":"21:11-21:43","path":"relevantPeriod","scope":"EncounterInpatient","type":"Property"}},{"localId":"29","locator":"21:64-21:83","name":"Measurement Period","type":"ParameterRef"}]}]}}},{"localId":"43","locator":"28:1-29:62","name":"ToDateInterval","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","t":[{"name":"description","value":"Returns an interval of date values extracted from the input interval of date-time values"},{"name":"description","value":"Returns an interval of date values extracted from the input interval of date-time values"},{"name":"comment","value":"This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability."}],"s":{"r":"43","s":[{"value":["/*@description: Returns an interval of date values extracted from the input interval of date-time values\n@comment: This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability.*/","define function ","\"ToDateInterval\"","(","period"," "]},{"r":"35","s":[{"value":["Interval\u003c"]},{"r":"34","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"42","s":[{"r":"42","s":[{"value":["Interval["]},{"r":"38","s":[{"value":["date from "]},{"r":"37","s":[{"value":["start of "]},{"r":"36","s":[{"value":["period"]}]}]}]},{"value":[", "]},{"r":"41","s":[{"value":["date from "]},{"r":"40","s":[{"value":["end of "]},{"r":"39","s":[{"value":["period"]}]}]}]},{"value":["]"]}]}]}]}}],"expression":{"localId":"42","locator":"29:3-29:62","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"38","locator":"29:12-29:36","type":"DateFrom","operand":{"localId":"37","locator":"29:22-29:36","type":"Start","operand":{"localId":"36","locator":"29:31-29:36","name":"period","type":"OperandRef"}}},"high":{"localId":"41","locator":"29:39-29:61","type":"DateFrom","operand":{"localId":"40","locator":"29:49-29:61","type":"End","operand":{"localId":"39","locator":"29:56-29:61","name":"period","type":"OperandRef"}}}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"35","locator":"28:41-28:58","type":"IntervalTypeSpecifier","pointType":{"localId":"34","locator":"28:50-28:57","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"79","locator":"36:1-44:71","name":"HospitalizationLocations","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"79","s":[{"value":["/*returns list of all locations within an encounter, including locations for immediately prior ED visit.*/","define function ","\"HospitalizationLocations\"","(","Encounter"," "]},{"r":"47","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"78","s":[{"r":"78","s":[{"s":[{"r":"49","s":[{"r":"48","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"65","s":[{"value":["EDVisit",": "]},{"r":"64","s":[{"value":["Last","("]},{"r":"63","s":[{"s":[{"r":"51","s":[{"r":"50","s":[{"r":"50","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"58","s":[{"value":["where "]},{"r":"58","s":[{"r":"53","s":[{"r":"52","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"53","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"58","s":[{"value":["ends "]},{"r":"57","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"56","s":[{"value":["start of "]},{"r":"55","s":[{"r":"54","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"55","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"62","s":[{"value":["sort by \n  \t\t\t"]},{"r":"61","s":[{"r":"60","s":[{"value":["end of "]},{"r":"59","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"77","s":[{"value":["return "]},{"r":"76","s":[{"value":["if "]},{"r":"67","s":[{"r":"66","s":[{"value":["EDVisit"]}]},{"value":[" is null"]}]},{"value":[" then "]},{"r":"69","s":[{"r":"68","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"69","s":[{"value":["facilityLocations"]}]}]},{"value":[" \n  \t\telse "]},{"r":"75","s":[{"value":["flatten "]},{"r":"74","s":[{"value":["{ "]},{"r":"71","s":[{"r":"70","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"71","s":[{"value":["facilityLocations"]}]}]},{"value":[", "]},{"r":"73","s":[{"r":"72","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"73","s":[{"value":["facilityLocations"]}]}]},{"value":[" }"]}]}]}]}]}]}]}]}}],"expression":{"localId":"78","locator":"37:3-44:71","type":"Query","source":[{"localId":"49","locator":"37:3-37:17","alias":"Visit","expression":{"localId":"48","locator":"37:3-37:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"65","locator":"38:8-42:4","identifier":"EDVisit","expression":{"localId":"64","locator":"38:17-42:4","type":"Last","source":{"localId":"63","locator":"38:22-41:26","type":"Query","source":[{"localId":"51","locator":"38:22-38:82","alias":"LastED","expression":{"localId":"50","locator":"38:22-38:75","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"38:47-38:74","name":"Emergency Department Visit","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"58","locator":"39:6-39:95","type":"And","operand":[{"locator":"39:39-39:52","type":"In","operand":[{"locator":"39:34-39:37","type":"End","operand":{"localId":"53","locator":"39:12-39:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"39:39-39:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"39:67-39:95","type":"Subtract","operand":[{"localId":"56","locator":"39:67-39:95","type":"Start","operand":{"localId":"55","locator":"39:76-39:95","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"57","locator":"39:39-39:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"56","locator":"39:67-39:95","type":"Start","operand":{"localId":"55","locator":"39:76-39:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"39:39-39:52","type":"Not","operand":{"locator":"39:39-39:52","type":"IsNull","operand":{"localId":"56","locator":"39:67-39:95","type":"Start","operand":{"localId":"55","locator":"39:76-39:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"62","locator":"40:6-41:26","by":[{"localId":"61","locator":"41:6-41:26","direction":"asc","type":"ByExpression","expression":{"localId":"60","locator":"41:6-41:26","type":"End","operand":{"localId":"59","locator":"41:13-41:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"77","locator":"43:4-44:71","expression":{"localId":"76","locator":"43:11-44:71","type":"If","condition":{"localId":"67","locator":"43:14-43:28","type":"IsNull","operand":{"localId":"66","locator":"43:14-43:20","name":"EDVisit","type":"QueryLetRef"}},"then":{"localId":"69","locator":"43:35-43:57","path":"facilityLocations","scope":"Visit","type":"Property"},"else":{"localId":"75","locator":"44:10-44:71","type":"Flatten","operand":{"localId":"74","locator":"44:18-44:71","type":"List","element":[{"localId":"71","locator":"44:20-44:44","path":"facilityLocations","type":"Property","source":{"localId":"70","locator":"44:20-44:26","name":"EDVisit","type":"QueryLetRef"}},{"localId":"73","locator":"44:47-44:69","path":"facilityLocations","scope":"Visit","type":"Property"}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"47","locator":"36:54-36:75","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"96","locator":"47:1-51:18","name":"EmergencyDepartmentArrivalTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"96","s":[{"value":["/*Returns the arrival time in the ED for the encounter.*/","define function ","\"EmergencyDepartmentArrivalTime\"","(","Encounter"," "]},{"r":"80","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"95","s":[{"r":"95","s":[{"value":["start of "]},{"r":"94","s":[{"r":"93","s":[{"value":["First","("]},{"r":"92","s":[{"s":[{"r":"83","s":[{"r":"82","s":[{"value":["("]},{"r":"82","s":[{"value":["\"HospitalizationLocations\"","("]},{"r":"81","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n  \t\t"]},{"r":"87","s":[{"value":["where "]},{"r":"87","s":[{"r":"85","s":[{"r":"84","s":[{"value":["HospitalLocation"]}]},{"value":["."]},{"r":"85","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"86","s":[{"value":["\"Emergency Department Visit\""]}]}]}]},{"value":["\n  \t\t"]},{"r":"91","s":[{"value":["sort by "]},{"r":"90","s":[{"r":"89","s":[{"value":["start of "]},{"r":"88","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"94","s":[{"value":["locationPeriod"]}]}]}]}]}]}}],"expression":{"localId":"95","locator":"48:3-51:18","type":"Start","operand":{"localId":"94","locator":"48:12-51:18","path":"locationPeriod","type":"Property","source":{"localId":"93","locator":"48:12-51:3","type":"First","source":{"localId":"92","locator":"48:18-50:35","type":"Query","source":[{"localId":"83","locator":"48:18-48:72","alias":"HospitalLocation","expression":{"localId":"82","locator":"48:18-48:56","name":"HospitalizationLocations","type":"FunctionRef","operand":[{"localId":"81","locator":"48:46-48:54","name":"Encounter","type":"OperandRef"}]}}],"relationship":[],"where":{"localId":"87","locator":"49:5-49:63","type":"InValueSet","code":{"localId":"85","locator":"49:11-49:31","path":"code","scope":"HospitalLocation","type":"Property"},"valueset":{"localId":"86","locator":"49:36-49:63","name":"Emergency Department Visit","type":"ValueSetRef"}},"sort":{"localId":"91","locator":"50:5-50:35","by":[{"localId":"90","locator":"50:13-50:35","direction":"asc","type":"ByExpression","expression":{"localId":"89","locator":"50:13-50:35","type":"Start","operand":{"localId":"88","locator":"50:22-50:35","name":"locationPeriod","type":"IdentifierRef"}}}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"80","locator":"47:60-47:81","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"131","locator":"64:1-72:31","name":"Hospitalization","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"131","s":[{"value":["/*Hospitalization returns the total interval for admission to discharge for the given encounter, or for the admission of any immediately prior emergency department visit to the discharge of the given encounter.*/","define function ","\"Hospitalization\"","(","Encounter"," "]},{"r":"99","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"130","s":[{"r":"130","s":[{"s":[{"r":"101","s":[{"r":"100","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"117","s":[{"value":["EDVisit",": "]},{"r":"116","s":[{"value":["Last","("]},{"r":"115","s":[{"s":[{"r":"103","s":[{"r":"102","s":[{"r":"102","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"110","s":[{"value":["where "]},{"r":"110","s":[{"r":"105","s":[{"r":"104","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"105","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"110","s":[{"value":["ends "]},{"r":"109","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"108","s":[{"value":["start of "]},{"r":"107","s":[{"r":"106","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"107","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"114","s":[{"value":["sort by \n  \t\t\t"]},{"r":"113","s":[{"r":"112","s":[{"value":["end of "]},{"r":"111","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"129","s":[{"value":["return "]},{"r":"128","s":[{"value":["Interval["]},{"r":"124","s":[{"value":["Coalesce","("]},{"r":"120","s":[{"value":["start of "]},{"r":"119","s":[{"r":"118","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"119","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"123","s":[{"value":["start of "]},{"r":"122","s":[{"r":"121","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"122","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]},{"value":[", \n  \t"]},{"r":"127","s":[{"value":["end of "]},{"r":"126","s":[{"r":"125","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"126","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["]"]}]}]}]}]}]}}],"expression":{"localId":"130","locator":"65:3-72:31","type":"Query","source":[{"localId":"101","locator":"65:3-65:17","alias":"Visit","expression":{"localId":"100","locator":"65:3-65:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"117","locator":"66:8-70:4","identifier":"EDVisit","expression":{"localId":"116","locator":"66:17-70:4","type":"Last","source":{"localId":"115","locator":"66:22-69:26","type":"Query","source":[{"localId":"103","locator":"66:22-66:82","alias":"LastED","expression":{"localId":"102","locator":"66:22-66:75","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"66:47-66:74","name":"Emergency Department Visit","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"110","locator":"67:6-67:95","type":"And","operand":[{"locator":"67:39-67:52","type":"In","operand":[{"locator":"67:34-67:37","type":"End","operand":{"localId":"105","locator":"67:12-67:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"67:39-67:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"67:67-67:95","type":"Subtract","operand":[{"localId":"108","locator":"67:67-67:95","type":"Start","operand":{"localId":"107","locator":"67:76-67:95","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"109","locator":"67:39-67:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"108","locator":"67:67-67:95","type":"Start","operand":{"localId":"107","locator":"67:76-67:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"67:39-67:52","type":"Not","operand":{"locator":"67:39-67:52","type":"IsNull","operand":{"localId":"108","locator":"67:67-67:95","type":"Start","operand":{"localId":"107","locator":"67:76-67:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"114","locator":"68:6-69:26","by":[{"localId":"113","locator":"69:6-69:26","direction":"asc","type":"ByExpression","expression":{"localId":"112","locator":"69:6-69:26","type":"End","operand":{"localId":"111","locator":"69:13-69:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"129","locator":"71:4-72:31","expression":{"localId":"128","locator":"71:11-72:31","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"124","locator":"71:20-71:91","type":"Coalesce","operand":[{"localId":"120","locator":"71:29-71:59","type":"Start","operand":{"localId":"119","locator":"71:38-71:59","path":"relevantPeriod","type":"Property","source":{"localId":"118","locator":"71:38-71:44","name":"EDVisit","type":"QueryLetRef"}}},{"localId":"123","locator":"71:62-71:90","type":"Start","operand":{"localId":"122","locator":"71:71-71:90","path":"relevantPeriod","scope":"Visit","type":"Property"}}]},"high":{"localId":"127","locator":"72:4-72:30","type":"End","operand":{"localId":"126","locator":"72:11-72:30","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"99","locator":"64:45-64:66","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"134","locator":"54:1-55:39","name":"HospitalAdmissionTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"134","s":[{"value":["/*Returns admission time for an encounter or for immediately prior emergency department visit.*/","define function ","\"HospitalAdmissionTime\"","(","Encounter"," "]},{"r":"97","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"133","s":[{"r":"133","s":[{"value":["start of "]},{"r":"132","s":[{"value":["\"Hospitalization\"","("]},{"r":"98","s":[{"value":["Encounter"]}]},{"value":[")"]}]}]}]}]}}],"expression":{"localId":"133","locator":"55:3-55:39","type":"Start","operand":{"localId":"132","locator":"55:12-55:39","name":"Hospitalization","type":"FunctionRef","operand":[{"localId":"98","locator":"55:30-55:38","name":"Encounter","type":"OperandRef"}]}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"97","locator":"54:51-54:72","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"147","locator":"58:1-61:18","name":"HospitalArrivalTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"147","s":[{"value":["/*Returns earliest arrival time for an encounter including any prior ED visit.*/","define function ","\"HospitalArrivalTime\"","(","Encounter"," "]},{"r":"135","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"146","s":[{"r":"146","s":[{"value":["start of "]},{"r":"145","s":[{"r":"144","s":[{"value":["First","("]},{"r":"143","s":[{"s":[{"r":"138","s":[{"r":"137","s":[{"value":["("]},{"r":"137","s":[{"value":["\"HospitalizationLocations\"","("]},{"r":"136","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n  \t\t"]},{"r":"142","s":[{"value":["sort by "]},{"r":"141","s":[{"r":"140","s":[{"value":["start of "]},{"r":"139","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"145","s":[{"value":["locationPeriod"]}]}]}]}]}]}}],"expression":{"localId":"146","locator":"59:3-61:18","type":"Start","operand":{"localId":"145","locator":"59:12-61:18","path":"locationPeriod","type":"Property","source":{"localId":"144","locator":"59:12-61:3","type":"First","source":{"localId":"143","locator":"59:18-60:35","type":"Query","source":[{"localId":"138","locator":"59:18-59:72","alias":"HospitalLocation","expression":{"localId":"137","locator":"59:18-59:56","name":"HospitalizationLocations","type":"FunctionRef","operand":[{"localId":"136","locator":"59:46-59:54","name":"Encounter","type":"OperandRef"}]}}],"relationship":[],"sort":{"localId":"142","locator":"60:5-60:35","by":[{"localId":"141","locator":"60:13-60:35","direction":"asc","type":"ByExpression","expression":{"localId":"140","locator":"60:13-60:35","type":"Start","operand":{"localId":"139","locator":"60:22-60:35","name":"locationPeriod","type":"IdentifierRef"}}}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"135","locator":"58:49-58:70","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"154","locator":"75:1-76:44","name":"HospitalizationLengthofStay","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"154","s":[{"value":["/*Returns the length of stay in days (i.e. the number of days between admission and discharge) for the given encounter, or from the admission of any immediately prior emergency department visit to the discharge of the encounter*/","define function ","\"HospitalizationLengthofStay\"","(","Encounter"," "]},{"r":"150","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"153","s":[{"r":"153","s":[{"value":["LengthInDays","("]},{"r":"152","s":[{"value":["\"Hospitalization\"","("]},{"r":"151","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"153","locator":"76:3-76:44","name":"LengthInDays","type":"FunctionRef","operand":[{"localId":"152","locator":"76:16-76:43","name":"Hospitalization","type":"FunctionRef","operand":[{"localId":"151","locator":"76:34-76:42","name":"Encounter","type":"OperandRef"}]}]},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"150","locator":"75:57-75:78","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"167","locator":"79:1-82:18","name":"HospitalDepartureTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"167","s":[{"value":["/*Returns the latest departure time for encounter including any prior ED visit.*/","define function ","\"HospitalDepartureTime\"","(","Encounter"," "]},{"r":"155","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"166","s":[{"r":"166","s":[{"value":["end of "]},{"r":"165","s":[{"r":"164","s":[{"value":["Last","("]},{"r":"163","s":[{"s":[{"r":"158","s":[{"r":"157","s":[{"value":["("]},{"r":"157","s":[{"value":["\"HospitalizationLocations\"","("]},{"r":"156","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n  \t\t"]},{"r":"162","s":[{"value":["sort by "]},{"r":"161","s":[{"r":"160","s":[{"value":["start of "]},{"r":"159","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"165","s":[{"value":["locationPeriod"]}]}]}]}]}]}}],"expression":{"localId":"166","locator":"80:3-82:18","type":"End","operand":{"localId":"165","locator":"80:10-82:18","path":"locationPeriod","type":"Property","source":{"localId":"164","locator":"80:10-82:3","type":"Last","source":{"localId":"163","locator":"80:15-81:35","type":"Query","source":[{"localId":"158","locator":"80:15-80:69","alias":"HospitalLocation","expression":{"localId":"157","locator":"80:15-80:53","name":"HospitalizationLocations","type":"FunctionRef","operand":[{"localId":"156","locator":"80:43-80:51","name":"Encounter","type":"OperandRef"}]}}],"relationship":[],"sort":{"localId":"162","locator":"81:5-81:35","by":[{"localId":"161","locator":"81:13-81:35","direction":"asc","type":"ByExpression","expression":{"localId":"160","locator":"81:13-81:35","type":"Start","operand":{"localId":"159","locator":"81:22-81:35","name":"locationPeriod","type":"IdentifierRef"}}}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"155","locator":"79:51-79:72","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"172","locator":"85:1-86:33","name":"HospitalDischargeTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"172","s":[{"value":["/*Hospital Discharge Time returns the discharge time for an encounter*/","define function ","\"HospitalDischargeTime\"","(","Encounter"," "]},{"r":"168","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"171","s":[{"r":"171","s":[{"value":["end of "]},{"r":"170","s":[{"r":"169","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"170","s":[{"value":["relevantPeriod"]}]}]}]}]}]}}],"expression":{"localId":"171","locator":"86:3-86:33","type":"End","operand":{"localId":"170","locator":"86:10-86:33","path":"relevantPeriod","type":"Property","source":{"localId":"169","locator":"86:10-86:18","name":"Encounter","type":"OperandRef"}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"168","locator":"85:51-85:72","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"245","locator":"89:1-109:31","name":"HospitalizationWithObservationAndOutpatientSurgeryService","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"245","s":[{"value":["/*Hospitalization with Observation and Outpatient Surgery Service returns the total interval from the start of any immediately prior emergency department visit, outpatient surgery visit or observation visit to the discharge of the given encounter.*/","define function ","\"HospitalizationWithObservationAndOutpatientSurgeryService\"","(","Encounter"," "]},{"r":"173","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"244","s":[{"r":"244","s":[{"s":[{"r":"175","s":[{"r":"174","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"191","s":[{"value":["ObsVisit",": "]},{"r":"190","s":[{"value":["Last","("]},{"r":"189","s":[{"s":[{"r":"177","s":[{"r":"176","s":[{"r":"176","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Observation Services\""]}]},{"value":["]"]}]}]},{"value":[" ","LastObs"]}]}]},{"value":["\n  \t\t\t"]},{"r":"184","s":[{"value":["where "]},{"r":"184","s":[{"r":"179","s":[{"r":"178","s":[{"value":["LastObs"]}]},{"value":["."]},{"r":"179","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"184","s":[{"value":["ends "]},{"r":"183","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"182","s":[{"value":["start of "]},{"r":"181","s":[{"r":"180","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"181","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"188","s":[{"value":["sort by \n  \t\t\t"]},{"r":"187","s":[{"r":"186","s":[{"value":["end of "]},{"r":"185","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]},{"value":[",\n  \t"]},{"r":"199","s":[{"value":["VisitStart",": "]},{"r":"198","s":[{"value":["Coalesce","("]},{"r":"194","s":[{"value":["start of "]},{"r":"193","s":[{"r":"192","s":[{"value":["ObsVisit"]}]},{"value":["."]},{"r":"193","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"197","s":[{"value":["start of "]},{"r":"196","s":[{"r":"195","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"196","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]}]},{"value":[",\n  \t"]},{"r":"213","s":[{"value":["EDVisit",": "]},{"r":"212","s":[{"value":["Last","("]},{"r":"211","s":[{"s":[{"r":"201","s":[{"r":"200","s":[{"r":"200","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"206","s":[{"value":["where "]},{"r":"206","s":[{"r":"203","s":[{"r":"202","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"203","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"206","s":[{"value":["ends "]},{"r":"205","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"204","s":[{"value":["VisitStart"]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"210","s":[{"value":["sort by \n  \t\t\t"]},{"r":"209","s":[{"r":"208","s":[{"value":["end of "]},{"r":"207","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]},{"value":[",\n  \t"]},{"r":"219","s":[{"value":["VisitStartWithED",": "]},{"r":"218","s":[{"value":["Coalesce","("]},{"r":"216","s":[{"value":["start of "]},{"r":"215","s":[{"r":"214","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"215","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"217","s":[{"value":["VisitStart"]}]},{"value":[")"]}]}]},{"value":[",\n  \t"]},{"r":"233","s":[{"value":["OutpatientSurgeryVisit",": "]},{"r":"232","s":[{"value":["Last","("]},{"r":"231","s":[{"s":[{"r":"221","s":[{"r":"220","s":[{"r":"220","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Outpatient Surgery Service\""]}]},{"value":["]"]}]}]},{"value":[" ","LastSurgeryOP"]}]}]},{"value":["\n  \t\t\t"]},{"r":"226","s":[{"value":["where "]},{"r":"226","s":[{"r":"223","s":[{"r":"222","s":[{"value":["LastSurgeryOP"]}]},{"value":["."]},{"r":"223","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"226","s":[{"value":["ends "]},{"r":"225","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"224","s":[{"value":["VisitStartWithED"]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"230","s":[{"value":["sort by \n  \t\t\t"]},{"r":"229","s":[{"r":"228","s":[{"value":["end of "]},{"r":"227","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"243","s":[{"value":["return "]},{"r":"242","s":[{"value":["Interval["]},{"r":"238","s":[{"value":["Coalesce","("]},{"r":"236","s":[{"value":["start of "]},{"r":"235","s":[{"r":"234","s":[{"value":["OutpatientSurgeryVisit"]}]},{"value":["."]},{"r":"235","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"237","s":[{"value":["VisitStartWithED"]}]},{"value":[")"]}]},{"value":[", \n  \t"]},{"r":"241","s":[{"value":["end of "]},{"r":"240","s":[{"r":"239","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"240","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["]"]}]}]}]}]}]}}],"expression":{"localId":"244","locator":"90:3-109:31","type":"Query","source":[{"localId":"175","locator":"90:3-90:17","alias":"Visit","expression":{"localId":"174","locator":"90:3-90:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"191","locator":"91:8-95:4","identifier":"ObsVisit","expression":{"localId":"190","locator":"91:18-95:4","type":"Last","source":{"localId":"189","locator":"91:23-94:26","type":"Query","source":[{"localId":"177","locator":"91:23-91:78","alias":"LastObs","expression":{"localId":"176","locator":"91:23-91:70","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"91:48-91:69","name":"Observation Services","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"184","locator":"92:6-92:96","type":"And","operand":[{"locator":"92:40-92:53","type":"In","operand":[{"locator":"92:35-92:38","type":"End","operand":{"localId":"179","locator":"92:12-92:33","path":"relevantPeriod","scope":"LastObs","type":"Property"}},{"locator":"92:40-92:53","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"92:68-92:96","type":"Subtract","operand":[{"localId":"182","locator":"92:68-92:96","type":"Start","operand":{"localId":"181","locator":"92:77-92:96","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"183","locator":"92:40-92:45","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"182","locator":"92:68-92:96","type":"Start","operand":{"localId":"181","locator":"92:77-92:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"92:40-92:53","type":"Not","operand":{"locator":"92:40-92:53","type":"IsNull","operand":{"localId":"182","locator":"92:68-92:96","type":"Start","operand":{"localId":"181","locator":"92:77-92:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"188","locator":"93:6-94:26","by":[{"localId":"187","locator":"94:6-94:26","direction":"asc","type":"ByExpression","expression":{"localId":"186","locator":"94:6-94:26","type":"End","operand":{"localId":"185","locator":"94:13-94:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}},{"localId":"199","locator":"96:4-96:88","identifier":"VisitStart","expression":{"localId":"198","locator":"96:16-96:88","type":"Coalesce","operand":[{"localId":"194","locator":"96:25-96:56","type":"Start","operand":{"localId":"193","locator":"96:34-96:56","path":"relevantPeriod","type":"Property","source":{"localId":"192","locator":"96:34-96:41","name":"ObsVisit","type":"QueryLetRef"}}},{"localId":"197","locator":"96:59-96:87","type":"Start","operand":{"localId":"196","locator":"96:68-96:87","path":"relevantPeriod","scope":"Visit","type":"Property"}}]}},{"localId":"213","locator":"97:4-101:4","identifier":"EDVisit","expression":{"localId":"212","locator":"97:13-101:4","type":"Last","source":{"localId":"211","locator":"97:18-100:26","type":"Query","source":[{"localId":"201","locator":"97:18-97:78","alias":"LastED","expression":{"localId":"200","locator":"97:18-97:71","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"97:43-97:70","name":"Emergency Department Visit","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"206","locator":"98:6-98:76","type":"And","operand":[{"locator":"98:39-98:52","type":"In","operand":[{"locator":"98:34-98:37","type":"End","operand":{"localId":"203","locator":"98:12-98:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"98:39-98:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"98:67-98:76","type":"Subtract","operand":[{"localId":"204","locator":"98:67-98:76","name":"VisitStart","type":"QueryLetRef"},{"localId":"205","locator":"98:39-98:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"204","locator":"98:67-98:76","name":"VisitStart","type":"QueryLetRef"}}]},{"locator":"98:39-98:52","type":"Not","operand":{"locator":"98:39-98:52","type":"IsNull","operand":{"localId":"204","locator":"98:67-98:76","name":"VisitStart","type":"QueryLetRef"}}}]},"sort":{"localId":"210","locator":"99:6-100:26","by":[{"localId":"209","locator":"100:6-100:26","direction":"asc","type":"ByExpression","expression":{"localId":"208","locator":"100:6-100:26","type":"End","operand":{"localId":"207","locator":"100:13-100:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}},{"localId":"219","locator":"102:4-102:74","identifier":"VisitStartWithED","expression":{"localId":"218","locator":"102:22-102:74","type":"Coalesce","operand":[{"localId":"216","locator":"102:31-102:61","type":"Start","operand":{"localId":"215","locator":"102:40-102:61","path":"relevantPeriod","type":"Property","source":{"localId":"214","locator":"102:40-102:46","name":"EDVisit","type":"QueryLetRef"}}},{"localId":"217","locator":"102:64-102:73","name":"VisitStart","type":"QueryLetRef"}]}},{"localId":"233","locator":"103:4-107:4","identifier":"OutpatientSurgeryVisit","expression":{"localId":"232","locator":"103:28-107:4","type":"Last","source":{"localId":"231","locator":"103:33-106:26","type":"Query","source":[{"localId":"221","locator":"103:33-103:100","alias":"LastSurgeryOP","expression":{"localId":"220","locator":"103:33-103:86","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"103:58-103:85","name":"Outpatient Surgery Service","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"226","locator":"104:6-104:89","type":"And","operand":[{"locator":"104:46-104:59","type":"In","operand":[{"locator":"104:41-104:44","type":"End","operand":{"localId":"223","locator":"104:12-104:39","path":"relevantPeriod","scope":"LastSurgeryOP","type":"Property"}},{"locator":"104:46-104:59","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"104:74-104:89","type":"Subtract","operand":[{"localId":"224","locator":"104:74-104:89","name":"VisitStartWithED","type":"QueryLetRef"},{"localId":"225","locator":"104:46-104:51","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"224","locator":"104:74-104:89","name":"VisitStartWithED","type":"QueryLetRef"}}]},{"locator":"104:46-104:59","type":"Not","operand":{"locator":"104:46-104:59","type":"IsNull","operand":{"localId":"224","locator":"104:74-104:89","name":"VisitStartWithED","type":"QueryLetRef"}}}]},"sort":{"localId":"230","locator":"105:6-106:26","by":[{"localId":"229","locator":"106:6-106:26","direction":"asc","type":"ByExpression","expression":{"localId":"228","locator":"106:6-106:26","type":"End","operand":{"localId":"227","locator":"106:13-106:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"243","locator":"108:4-109:31","expression":{"localId":"242","locator":"108:11-109:31","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"238","locator":"108:20-108:93","type":"Coalesce","operand":[{"localId":"236","locator":"108:29-108:74","type":"Start","operand":{"localId":"235","locator":"108:38-108:74","path":"relevantPeriod","type":"Property","source":{"localId":"234","locator":"108:38-108:59","name":"OutpatientSurgeryVisit","type":"QueryLetRef"}}},{"localId":"237","locator":"108:77-108:92","name":"VisitStartWithED","type":"QueryLetRef"}]},"high":{"localId":"241","locator":"109:4-109:30","type":"End","operand":{"localId":"240","locator":"109:11-109:30","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"173","locator":"89:87-89:108","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"298","locator":"112:1-126:31","name":"HospitalizationWithObservation","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"298","s":[{"value":["/*Hospitalization with Observation returns the total interval from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/","define function ","\"HospitalizationWithObservation\"","(","Encounter"," "]},{"r":"246","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"297","s":[{"r":"297","s":[{"s":[{"r":"248","s":[{"r":"247","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"264","s":[{"value":["ObsVisit",": "]},{"r":"263","s":[{"value":["Last","("]},{"r":"262","s":[{"s":[{"r":"250","s":[{"r":"249","s":[{"r":"249","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Observation Services\""]}]},{"value":["]"]}]}]},{"value":[" ","LastObs"]}]}]},{"value":["\n  \t\t\t"]},{"r":"257","s":[{"value":["where "]},{"r":"257","s":[{"r":"252","s":[{"r":"251","s":[{"value":["LastObs"]}]},{"value":["."]},{"r":"252","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"257","s":[{"value":["ends "]},{"r":"256","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"255","s":[{"value":["start of "]},{"r":"254","s":[{"r":"253","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"254","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"261","s":[{"value":["sort by \n  \t\t\t"]},{"r":"260","s":[{"r":"259","s":[{"value":["end of "]},{"r":"258","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]},{"value":[",\n  \t"]},{"r":"272","s":[{"value":["VisitStart",": "]},{"r":"271","s":[{"value":["Coalesce","("]},{"r":"267","s":[{"value":["start of "]},{"r":"266","s":[{"r":"265","s":[{"value":["ObsVisit"]}]},{"value":["."]},{"r":"266","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"270","s":[{"value":["start of "]},{"r":"269","s":[{"r":"268","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"269","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]}]},{"value":[",\n  \t"]},{"r":"286","s":[{"value":["EDVisit",": "]},{"r":"285","s":[{"value":["Last","("]},{"r":"284","s":[{"s":[{"r":"274","s":[{"r":"273","s":[{"r":"273","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"279","s":[{"value":["where "]},{"r":"279","s":[{"r":"276","s":[{"r":"275","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"276","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"279","s":[{"value":["ends "]},{"r":"278","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"277","s":[{"value":["VisitStart"]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"283","s":[{"value":["sort by \n  \t\t\t"]},{"r":"282","s":[{"r":"281","s":[{"value":["end of "]},{"r":"280","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"296","s":[{"value":["return "]},{"r":"295","s":[{"value":["Interval["]},{"r":"291","s":[{"value":["Coalesce","("]},{"r":"289","s":[{"value":["start of "]},{"r":"288","s":[{"r":"287","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"288","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"290","s":[{"value":["VisitStart"]}]},{"value":[")"]}]},{"value":[", \n  \t"]},{"r":"294","s":[{"value":["end of "]},{"r":"293","s":[{"r":"292","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"293","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["]"]}]}]}]}]}]}}],"expression":{"localId":"297","locator":"113:3-126:31","type":"Query","source":[{"localId":"248","locator":"113:3-113:17","alias":"Visit","expression":{"localId":"247","locator":"113:3-113:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"264","locator":"114:8-118:4","identifier":"ObsVisit","expression":{"localId":"263","locator":"114:18-118:4","type":"Last","source":{"localId":"262","locator":"114:23-117:26","type":"Query","source":[{"localId":"250","locator":"114:23-114:78","alias":"LastObs","expression":{"localId":"249","locator":"114:23-114:70","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"114:48-114:69","name":"Observation Services","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"257","locator":"115:6-115:96","type":"And","operand":[{"locator":"115:40-115:53","type":"In","operand":[{"locator":"115:35-115:38","type":"End","operand":{"localId":"252","locator":"115:12-115:33","path":"relevantPeriod","scope":"LastObs","type":"Property"}},{"locator":"115:40-115:53","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"115:68-115:96","type":"Subtract","operand":[{"localId":"255","locator":"115:68-115:96","type":"Start","operand":{"localId":"254","locator":"115:77-115:96","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"256","locator":"115:40-115:45","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"255","locator":"115:68-115:96","type":"Start","operand":{"localId":"254","locator":"115:77-115:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"115:40-115:53","type":"Not","operand":{"locator":"115:40-115:53","type":"IsNull","operand":{"localId":"255","locator":"115:68-115:96","type":"Start","operand":{"localId":"254","locator":"115:77-115:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"261","locator":"116:6-117:26","by":[{"localId":"260","locator":"117:6-117:26","direction":"asc","type":"ByExpression","expression":{"localId":"259","locator":"117:6-117:26","type":"End","operand":{"localId":"258","locator":"117:13-117:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}},{"localId":"272","locator":"119:4-119:88","identifier":"VisitStart","expression":{"localId":"271","locator":"119:16-119:88","type":"Coalesce","operand":[{"localId":"267","locator":"119:25-119:56","type":"Start","operand":{"localId":"266","locator":"119:34-119:56","path":"relevantPeriod","type":"Property","source":{"localId":"265","locator":"119:34-119:41","name":"ObsVisit","type":"QueryLetRef"}}},{"localId":"270","locator":"119:59-119:87","type":"Start","operand":{"localId":"269","locator":"119:68-119:87","path":"relevantPeriod","scope":"Visit","type":"Property"}}]}},{"localId":"286","locator":"120:4-124:4","identifier":"EDVisit","expression":{"localId":"285","locator":"120:13-124:4","type":"Last","source":{"localId":"284","locator":"120:18-123:26","type":"Query","source":[{"localId":"274","locator":"120:18-120:78","alias":"LastED","expression":{"localId":"273","locator":"120:18-120:71","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"120:43-120:70","name":"Emergency Department Visit","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"279","locator":"121:6-121:76","type":"And","operand":[{"locator":"121:39-121:52","type":"In","operand":[{"locator":"121:34-121:37","type":"End","operand":{"localId":"276","locator":"121:12-121:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"121:39-121:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"121:67-121:76","type":"Subtract","operand":[{"localId":"277","locator":"121:67-121:76","name":"VisitStart","type":"QueryLetRef"},{"localId":"278","locator":"121:39-121:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"277","locator":"121:67-121:76","name":"VisitStart","type":"QueryLetRef"}}]},{"locator":"121:39-121:52","type":"Not","operand":{"locator":"121:39-121:52","type":"IsNull","operand":{"localId":"277","locator":"121:67-121:76","name":"VisitStart","type":"QueryLetRef"}}}]},"sort":{"localId":"283","locator":"122:6-123:26","by":[{"localId":"282","locator":"123:6-123:26","direction":"asc","type":"ByExpression","expression":{"localId":"281","locator":"123:6-123:26","type":"End","operand":{"localId":"280","locator":"123:13-123:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"296","locator":"125:4-126:31","expression":{"localId":"295","locator":"125:11-126:31","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"291","locator":"125:20-125:72","type":"Coalesce","operand":[{"localId":"289","locator":"125:29-125:59","type":"Start","operand":{"localId":"288","locator":"125:38-125:59","path":"relevantPeriod","type":"Property","source":{"localId":"287","locator":"125:38-125:44","name":"EDVisit","type":"QueryLetRef"}}},{"localId":"290","locator":"125:62-125:71","name":"VisitStart","type":"QueryLetRef"}]},"high":{"localId":"294","locator":"126:4-126:30","type":"End","operand":{"localId":"293","locator":"126:11-126:30","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"246","locator":"112:60-112:81","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"303","locator":"129:1-130:61","name":"HospitalizationWithObservationLengthofStay","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"303","s":[{"value":["/*Hospitalization with Observation Length of Stay returns the length in days from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/","define function ","\"HospitalizationWithObservationLengthofStay\"","(","Encounter"," "]},{"r":"299","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"302","s":[{"r":"302","s":[{"value":["\"LengthInDays\"","("]},{"r":"301","s":[{"value":["\"HospitalizationWithObservation\"","("]},{"r":"300","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"302","locator":"130:3-130:61","name":"LengthInDays","type":"FunctionRef","operand":[{"localId":"301","locator":"130:18-130:60","name":"HospitalizationWithObservation","type":"FunctionRef","operand":[{"localId":"300","locator":"130:51-130:59","name":"Encounter","type":"OperandRef"}]}]},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"299","locator":"129:72-129:93","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"324","locator":"133:1-138:3","name":"FirstInpatientIntensiveCareUnit","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"324","s":[{"value":["/*First Inpatient Intensive Care Unit returns the first intensive care unit for the given encounter, without considering any immediately prior emergency department visit.*/","define function ","\"FirstInpatientIntensiveCareUnit\"","(","Encounter"," "]},{"r":"304","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"323","s":[{"r":"323","s":[{"value":["First","("]},{"r":"322","s":[{"s":[{"r":"307","s":[{"r":"306","s":[{"value":["("]},{"r":"306","s":[{"r":"305","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"306","s":[{"value":["facilityLocations"]}]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n      "]},{"r":"317","s":[{"value":["where "]},{"r":"317","s":[{"r":"311","s":[{"r":"309","s":[{"r":"308","s":[{"value":["HospitalLocation"]}]},{"value":["."]},{"r":"309","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"310","s":[{"value":["\"Intensive Care Unit\""]}]}]},{"value":["\n        and "]},{"r":"316","s":[{"r":"313","s":[{"r":"312","s":[{"value":["HospitalLocation"]}]},{"value":["."]},{"r":"313","s":[{"value":["locationPeriod"]}]}]},{"r":"316","value":[" ","during"," "]},{"r":"315","s":[{"r":"314","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"315","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n      "]},{"r":"321","s":[{"value":["sort by "]},{"r":"320","s":[{"r":"319","s":[{"value":["start of "]},{"r":"318","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]}]}]}}],"expression":{"localId":"323","locator":"134:3-138:3","type":"First","source":{"localId":"322","locator":"134:9-137:37","type":"Query","source":[{"localId":"307","locator":"134:9-134:53","alias":"HospitalLocation","expression":{"localId":"306","locator":"134:9-134:37","path":"facilityLocations","type":"Property","source":{"localId":"305","locator":"134:10-134:18","name":"Encounter","type":"OperandRef"}}}],"relationship":[],"where":{"localId":"317","locator":"135:7-136:75","type":"And","operand":[{"localId":"311","locator":"135:13-135:58","type":"InValueSet","code":{"localId":"309","locator":"135:13-135:33","path":"code","scope":"HospitalLocation","type":"Property"},"valueset":{"localId":"310","locator":"135:38-135:58","name":"Intensive Care Unit","type":"ValueSetRef"}},{"localId":"316","locator":"136:13-136:75","type":"IncludedIn","operand":[{"localId":"313","locator":"136:13-136:43","path":"locationPeriod","scope":"HospitalLocation","type":"Property"},{"localId":"315","locator":"136:52-136:75","path":"relevantPeriod","type":"Property","source":{"localId":"314","locator":"136:52-136:60","name":"Encounter","type":"OperandRef"}}]}]},"sort":{"localId":"321","locator":"137:7-137:37","by":[{"localId":"320","locator":"137:15-137:37","direction":"asc","type":"ByExpression","expression":{"localId":"319","locator":"137:15-137:37","type":"Start","operand":{"localId":"318","locator":"137:24-137:37","name":"locationPeriod","type":"IdentifierRef"}}}]}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"304","locator":"133:61-133:82","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"342","locator":"141:1-144:35","name":"NormalizeInterval","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"342","s":[{"value":["/*Given a datetime and a period, returns the period (if a period is provided) or the interval beginning and ending on the datetime (if a datetime is provided)*/","define function ","\"NormalizeInterval\"","(","pointInTime"," "]},{"r":"325","s":[{"value":["DateTime"]}]},{"value":[", ","period"," "]},{"r":"327","s":[{"value":["Interval\u003c"]},{"r":"326","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"341","s":[{"r":"341","s":[{"value":["if "]},{"r":"329","s":[{"r":"328","s":[{"value":["pointInTime"]}]},{"value":[" is not null"]}]},{"value":[" then "]},{"r":"332","s":[{"value":["Interval["]},{"r":"330","s":[{"value":["pointInTime"]}]},{"value":[", "]},{"r":"331","s":[{"value":["pointInTime"]}]},{"value":["]"]}]},{"value":["\n    else "]},{"r":"340","s":[{"value":["if "]},{"r":"334","s":[{"r":"333","s":[{"value":["period"]}]},{"value":[" is not null"]}]},{"value":[" then "]},{"r":"335","s":[{"value":["period"]}]},{"value":[" \n    else "]},{"r":"339","s":[{"r":"336","value":["null"," as "]},{"r":"338","s":[{"value":["Interval\u003c"]},{"r":"337","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}]}]}]}]}}],"expression":{"localId":"341","locator":"142:3-144:35","type":"If","condition":{"localId":"329","locator":"142:6-142:28","type":"Not","operand":{"locator":"142:6-142:28","type":"IsNull","operand":{"localId":"328","locator":"142:6-142:16","name":"pointInTime","type":"OperandRef"}}},"then":{"localId":"332","locator":"142:35-142:68","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"330","locator":"142:44-142:54","name":"pointInTime","type":"OperandRef"},"high":{"localId":"331","locator":"142:57-142:67","name":"pointInTime","type":"OperandRef"}},"else":{"localId":"340","locator":"143:10-144:35","type":"If","condition":{"localId":"334","locator":"143:13-143:30","type":"Not","operand":{"locator":"143:13-143:30","type":"IsNull","operand":{"localId":"333","locator":"143:13-143:18","name":"period","type":"OperandRef"}}},"then":{"localId":"335","locator":"143:37-143:42","name":"period","type":"OperandRef"},"else":{"localId":"339","locator":"144:10-144:35","strict":false,"type":"As","operand":{"localId":"336","locator":"144:10-144:13","type":"Null"},"asTypeSpecifier":{"localId":"338","locator":"144:18-144:35","type":"IntervalTypeSpecifier","pointType":{"localId":"337","locator":"144:27-144:34","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}},"operand":[{"name":"pointInTime","operandTypeSpecifier":{"localId":"325","locator":"141:49-141:56","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"name":"period","operandTypeSpecifier":{"localId":"327","locator":"141:66-141:83","type":"IntervalTypeSpecifier","pointType":{"localId":"326","locator":"141:75-141:82","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"355","locator":"147:1-150:3","name":"HasStart","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"355","s":[{"value":["/*Given an interval, return true if the interval has a starting boundary specified (i.e. the start of the interval is not null and not the minimum DateTime value)*/","define function ","\"HasStart\"","(","period"," "]},{"r":"344","s":[{"value":["Interval\u003c"]},{"r":"343","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"354","s":[{"r":"354","s":[{"value":["not "]},{"r":"353","s":[{"value":["( "]},{"r":"353","s":[{"r":"347","s":[{"r":"346","s":[{"value":["start of "]},{"r":"345","s":[{"value":["period"]}]}]},{"value":[" is null"]}]},{"value":["\n      or "]},{"r":"352","s":[{"r":"349","s":[{"value":["start of "]},{"r":"348","s":[{"value":["period"]}]}]},{"value":[" ","="," "]},{"r":"351","s":[{"value":["minimum"," "]},{"r":"350","s":[{"value":["DateTime"]}]}]}]}]},{"value":["\n  )"]}]}]}]}]}}],"expression":{"localId":"354","locator":"148:3-150:3","type":"Not","operand":{"localId":"353","locator":"148:7-150:3","type":"Or","operand":[{"localId":"347","locator":"148:9-148:31","type":"IsNull","operand":{"localId":"346","locator":"148:9-148:23","type":"Start","operand":{"localId":"345","locator":"148:18-148:23","name":"period","type":"OperandRef"}}},{"localId":"352","locator":"149:10-149:43","type":"Equal","operand":[{"localId":"349","locator":"149:10-149:24","type":"Start","operand":{"localId":"348","locator":"149:19-149:24","name":"period","type":"OperandRef"}},{"localId":"351","locator":"149:28-149:43","valueType":"{urn:hl7-org:elm-types:r1}DateTime","type":"MinValue"}]}]}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"344","locator":"147:35-147:52","type":"IntervalTypeSpecifier","pointType":{"localId":"343","locator":"147:44-147:51","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"368","locator":"153:1-158:3","name":"HasEnd","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"368","s":[{"value":["/*Given an interval, return true if the interval has an ending boundary specified (i.e. the end of the interval is not null and not the maximum DateTime value)*/","define function ","\"HasEnd\"","(","period"," "]},{"r":"357","s":[{"value":["Interval\u003c"]},{"r":"356","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"367","s":[{"r":"367","s":[{"value":["not "]},{"r":"366","s":[{"value":["( \n    "]},{"r":"366","s":[{"r":"360","s":[{"r":"359","s":[{"value":["end of "]},{"r":"358","s":[{"value":["period"]}]}]},{"value":[" is null"]}]},{"value":["\n      or \n      "]},{"r":"365","s":[{"r":"362","s":[{"value":["end of "]},{"r":"361","s":[{"value":["period"]}]}]},{"value":[" ","="," "]},{"r":"364","s":[{"value":["maximum"," "]},{"r":"363","s":[{"value":["DateTime"]}]}]}]}]},{"value":["\n  )"]}]}]}]}]}}],"expression":{"localId":"367","locator":"154:3-158:3","type":"Not","operand":{"localId":"366","locator":"154:7-158:3","type":"Or","operand":[{"localId":"360","locator":"155:5-155:25","type":"IsNull","operand":{"localId":"359","locator":"155:5-155:17","type":"End","operand":{"localId":"358","locator":"155:12-155:17","name":"period","type":"OperandRef"}}},{"localId":"365","locator":"157:7-157:38","type":"Equal","operand":[{"localId":"362","locator":"157:7-157:19","type":"End","operand":{"localId":"361","locator":"157:14-157:19","name":"period","type":"OperandRef"}},{"localId":"364","locator":"157:23-157:38","valueType":"{urn:hl7-org:elm-types:r1}DateTime","type":"MaxValue"}]}]}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"357","locator":"153:33-153:50","type":"IntervalTypeSpecifier","pointType":{"localId":"356","locator":"153:42-153:49","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"378","locator":"161:1-164:24","name":"Latest","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"378","s":[{"value":["/*Given an interval, return the ending point if the interval has an ending boundary specified, otherwise, return the starting point*/","define function ","\"Latest\"","(","period"," "]},{"r":"370","s":[{"value":["Interval\u003c"]},{"r":"369","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"377","s":[{"r":"377","s":[{"value":["if "]},{"r":"372","s":[{"value":["( "]},{"r":"372","s":[{"value":["HasEnd","("]},{"r":"371","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":[" then \n  "]},{"r":"374","s":[{"value":["end of "]},{"r":"373","s":[{"value":["period"]}]}]},{"value":[" \n    else "]},{"r":"376","s":[{"value":["start of "]},{"r":"375","s":[{"value":["period"]}]}]}]}]}]}}],"expression":{"localId":"377","locator":"162:3-164:24","type":"If","condition":{"localId":"372","locator":"162:6-162:22","name":"HasEnd","type":"FunctionRef","operand":[{"localId":"371","locator":"162:15-162:20","name":"period","type":"OperandRef"}]},"then":{"localId":"374","locator":"163:3-163:15","type":"End","operand":{"localId":"373","locator":"163:10-163:15","name":"period","type":"OperandRef"}},"else":{"localId":"376","locator":"164:10-164:24","type":"Start","operand":{"localId":"375","locator":"164:19-164:24","name":"period","type":"OperandRef"}}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"370","locator":"161:33-161:50","type":"IntervalTypeSpecifier","pointType":{"localId":"369","locator":"161:42-161:49","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"388","locator":"167:1-170:15","name":"Earliest","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"388","s":[{"value":["/*Given an interval, return the starting point if the interval has a starting boundary specified, otherwise, return the ending point*/","define function ","\"Earliest\"","(","period"," "]},{"r":"380","s":[{"value":["Interval\u003c"]},{"r":"379","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"387","s":[{"r":"387","s":[{"value":["if "]},{"r":"382","s":[{"value":["( "]},{"r":"382","s":[{"value":["HasStart","("]},{"r":"381","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":[" then "]},{"r":"384","s":[{"value":["start of "]},{"r":"383","s":[{"value":["period"]}]}]},{"value":[" \n    else \n  "]},{"r":"386","s":[{"value":["end of "]},{"r":"385","s":[{"value":["period"]}]}]}]}]}]}}],"expression":{"localId":"387","locator":"168:3-170:15","type":"If","condition":{"localId":"382","locator":"168:6-168:24","name":"HasStart","type":"FunctionRef","operand":[{"localId":"381","locator":"168:17-168:22","name":"period","type":"OperandRef"}]},"then":{"localId":"384","locator":"168:31-168:45","type":"Start","operand":{"localId":"383","locator":"168:40-168:45","name":"period","type":"OperandRef"}},"else":{"localId":"386","locator":"170:3-170:15","type":"End","operand":{"localId":"385","locator":"170:10-170:15","name":"period","type":"OperandRef"}}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"380","locator":"167:35-167:52","type":"IntervalTypeSpecifier","pointType":{"localId":"379","locator":"167:44-167:51","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"396","locator":"173:1-174:48","name":"LatestOf","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"396","s":[{"value":["/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the ending point of the period if the period has an ending boundary specified, otherwise returns the starting point of the interval*/","define function ","\"LatestOf\"","(","pointInTime"," "]},{"r":"389","s":[{"value":["DateTime"]}]},{"value":[", ","period"," "]},{"r":"391","s":[{"value":["Interval\u003c"]},{"r":"390","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"395","s":[{"r":"395","s":[{"value":["Latest","("]},{"r":"394","s":[{"value":["NormalizeInterval","("]},{"r":"392","s":[{"value":["pointInTime"]}]},{"value":[", "]},{"r":"393","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"395","locator":"174:3-174:48","name":"Latest","type":"FunctionRef","operand":[{"localId":"394","locator":"174:10-174:47","name":"NormalizeInterval","type":"FunctionRef","operand":[{"localId":"392","locator":"174:28-174:38","name":"pointInTime","type":"OperandRef"},{"localId":"393","locator":"174:41-174:46","name":"period","type":"OperandRef"}]}]},"operand":[{"name":"pointInTime","operandTypeSpecifier":{"localId":"389","locator":"173:40-173:47","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"name":"period","operandTypeSpecifier":{"localId":"391","locator":"173:57-173:74","type":"IntervalTypeSpecifier","pointType":{"localId":"390","locator":"173:66-173:73","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"404","locator":"177:1-178:50","name":"EarliestOf","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"404","s":[{"value":["/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the starting point of the period if the period has a starting boundary specified, otherwise returns the ending point of the period*/","define function ","\"EarliestOf\"","(","pointInTime"," "]},{"r":"397","s":[{"value":["DateTime"]}]},{"value":[", ","period"," "]},{"r":"399","s":[{"value":["Interval\u003c"]},{"r":"398","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"403","s":[{"r":"403","s":[{"value":["Earliest","("]},{"r":"402","s":[{"value":["NormalizeInterval","("]},{"r":"400","s":[{"value":["pointInTime"]}]},{"value":[", "]},{"r":"401","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"403","locator":"178:3-178:50","name":"Earliest","type":"FunctionRef","operand":[{"localId":"402","locator":"178:12-178:49","name":"NormalizeInterval","type":"FunctionRef","operand":[{"localId":"400","locator":"178:30-178:40","name":"pointInTime","type":"OperandRef"},{"localId":"401","locator":"178:43-178:48","name":"period","type":"OperandRef"}]}]},"operand":[{"name":"pointInTime","operandTypeSpecifier":{"localId":"397","locator":"177:42-177:49","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"name":"period","operandTypeSpecifier":{"localId":"399","locator":"177:59-177:76","type":"IntervalTypeSpecifier","pointType":{"localId":"398","locator":"177:68-177:75","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]}]}}},"elm_annotations":{"statements":[{"children":[{"children":[{"children":[{"text":"define \"ED Encounter\":\n  "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"10"}],"ref_id":"11"}],"define_name":"ED Encounter"},{"children":[{"children":[{"children":[{"text":"/*calculates the difference in calendar days between the start and end of the given interval.*/define function \"LengthInDays\"(Value "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"16"},{"children":[{"text":"\u003e"}]}],"ref_id":"17"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"difference in days between "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"Value"}]}],"node_type":"OperandRef","ref_id":"18"}],"node_type":"Start","ref_id":"19"},{"children":[{"text":" and "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"Value"}]}],"node_type":"OperandRef","ref_id":"20"}],"node_type":"End","ref_id":"21"}],"node_type":"DifferenceBetween","ref_id":"22"}],"node_type":"DifferenceBetween","ref_id":"22"}],"ref_id":"23"}],"define_name":"LengthInDays"},{"children":[{"children":[{"children":[{"text":"define \"Inpatient Encounter\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Encounter Inpatient\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"12"}],"node_type":"Retrieve","ref_id":"12"},{"children":[{"text":" EncounterInpatient"}]}],"ref_id":"13"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"LengthInDays\"("}]},{"children":[{"children":[{"children":[{"text":"EncounterInpatient"}]}],"ref_id":"14"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"15"}],"node_type":"Property","ref_id":"15"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"24"},{"children":[{"text":"\u003c= 120"}],"node_type":"Literal","ref_id":"25"}],"node_type":"LessOrEqual","ref_id":"26"},{"children":[{"text":"\n      and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"EncounterInpatient"}]}],"ref_id":"27"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"28"}],"node_type":"Property","ref_id":"28"},{"children":[{"text":" ends during day of "}],"node_type":"In","ref_id":"30"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"29"}],"node_type":"In","ref_id":"30"}],"ref_id":"31"}],"ref_id":"31"}],"node_type":"Query","ref_id":"32"}],"ref_id":"33"}],"define_name":"Inpatient Encounter"},{"children":[{"children":[]},{"children":[]},{"children":[]},{"children":[{"children":[{"text":"/*@description: Returns an interval of date values extracted from the input interval of date-time values\n@comment: This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability.*/define function \"ToDateInterval\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"34"},{"children":[{"text":"\u003e"}]}],"ref_id":"35"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"36"}],"node_type":"Start","ref_id":"37"}],"ref_id":"38"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"39"}],"node_type":"End","ref_id":"40"}],"ref_id":"41"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"42"}],"node_type":"Interval","ref_id":"42"}],"ref_id":"43"}],"define_name":"ToDateInterval"},{"children":[{"children":[{"children":[{"text":"/*returns list of all locations within an encounter, including locations for immediately prior ED visit.*/define function \"HospitalizationLocations\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"47"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"48"},{"children":[{"text":" Visit"}]}],"ref_id":"49"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"50"}],"node_type":"Retrieve","ref_id":"50"},{"children":[{"text":" LastED"}]}],"ref_id":"51"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"52"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"53"}],"node_type":"Property","ref_id":"53"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"57"},{"children":[{"text":" or less on or before"}]}],"ref_id":"58"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"54"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"55"}],"node_type":"Property","ref_id":"55"}],"node_type":"Start","ref_id":"56"}],"ref_id":"58"}],"ref_id":"58"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"59"}],"node_type":"End","ref_id":"60"}],"ref_id":"61"}],"ref_id":"62"}],"ref_id":"63"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"64"}],"ref_id":"65"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"node_type":"QueryLetRef","ref_id":"66"},{"children":[{"text":" is null"}]}],"ref_id":"67"},{"children":[{"text":" then "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"68"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"ref_id":"69"}],"ref_id":"69"},{"children":[{"text":" \n      else "}]},{"children":[{"children":[{"text":"flatten "}]},{"children":[{"children":[{"text":"{ "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"70"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"ref_id":"71"}],"ref_id":"71"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"72"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"ref_id":"73"}],"ref_id":"73"},{"children":[{"text":" }"}]}],"node_type":"List","ref_id":"74"}],"ref_id":"75"}],"node_type":"If","ref_id":"76"}],"ref_id":"77"}],"node_type":"Query","ref_id":"78"}],"node_type":"Query","ref_id":"78"}],"ref_id":"79"}],"define_name":"HospitalizationLocations"},{"children":[{"children":[{"children":[{"text":"/*Returns the arrival time in the ED for the encounter.*/define function \"EmergencyDepartmentArrivalTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"80"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"\"HospitalizationLocations\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"81"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"82"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"82"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"83"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"HospitalLocation"}]}],"ref_id":"84"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"85"}],"ref_id":"85"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}],"ref_id":"86"}],"ref_id":"87"}],"ref_id":"87"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"88"}],"node_type":"Start","ref_id":"89"}],"ref_id":"90"}],"ref_id":"91"}],"ref_id":"92"},{"children":[{"text":"\n  )"}]}],"ref_id":"93"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"94"}],"node_type":"Property","ref_id":"94"}],"node_type":"Start","ref_id":"95"}],"node_type":"Start","ref_id":"95"}],"ref_id":"96"}],"define_name":"EmergencyDepartmentArrivalTime"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization returns the total interval for admission to discharge for the given encounter, or for the admission of any immediately prior emergency department visit to the discharge of the given encounter.*/define function \"Hospitalization\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"99"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"100"},{"children":[{"text":" Visit"}]}],"ref_id":"101"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"102"}],"node_type":"Retrieve","ref_id":"102"},{"children":[{"text":" LastED"}]}],"ref_id":"103"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"104"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"105"}],"node_type":"Property","ref_id":"105"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"109"},{"children":[{"text":" or less on or before"}]}],"ref_id":"110"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"106"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"107"}],"node_type":"Property","ref_id":"107"}],"node_type":"Start","ref_id":"108"}],"ref_id":"110"}],"ref_id":"110"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"111"}],"node_type":"End","ref_id":"112"}],"ref_id":"113"}],"ref_id":"114"}],"ref_id":"115"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"116"}],"ref_id":"117"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"118"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"119"}],"node_type":"Property","ref_id":"119"}],"node_type":"Start","ref_id":"120"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"121"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"122"}],"node_type":"Property","ref_id":"122"}],"node_type":"Start","ref_id":"123"},{"children":[{"text":")"}]}],"ref_id":"124"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"125"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"126"}],"node_type":"Property","ref_id":"126"}],"ref_id":"127"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"128"}],"ref_id":"129"}],"node_type":"Query","ref_id":"130"}],"node_type":"Query","ref_id":"130"}],"ref_id":"131"}],"define_name":"Hospitalization"},{"children":[{"children":[{"children":[{"text":"/*Returns admission time for an encounter or for immediately prior emergency department visit.*/define function \"HospitalAdmissionTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"97"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"\"Hospitalization\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"98"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"132"}],"node_type":"Start","ref_id":"133"}],"node_type":"Start","ref_id":"133"}],"ref_id":"134"}],"define_name":"HospitalAdmissionTime"},{"children":[{"children":[{"children":[{"text":"/*Returns earliest arrival time for an encounter including any prior ED visit.*/define function \"HospitalArrivalTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"135"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"\"HospitalizationLocations\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"136"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"137"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"137"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"138"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"139"}],"node_type":"Start","ref_id":"140"}],"ref_id":"141"}],"ref_id":"142"}],"ref_id":"143"},{"children":[{"text":"\n  )"}]}],"ref_id":"144"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"145"}],"node_type":"Property","ref_id":"145"}],"node_type":"Start","ref_id":"146"}],"node_type":"Start","ref_id":"146"}],"ref_id":"147"}],"define_name":"HospitalArrivalTime"},{"children":[{"children":[{"children":[{"text":"/*Returns the length of stay in days (i.e. the number of days between admission and discharge) for the given encounter, or from the admission of any immediately prior emergency department visit to the discharge of the encounter*/define function \"HospitalizationLengthofStay\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"150"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"LengthInDays("}]},{"children":[{"children":[{"text":"\"Hospitalization\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"151"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"152"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"153"}],"node_type":"FunctionRef","ref_id":"153"}],"ref_id":"154"}],"define_name":"HospitalizationLengthofStay"},{"children":[{"children":[{"children":[{"text":"/*Returns the latest departure time for encounter including any prior ED visit.*/define function \"HospitalDepartureTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"155"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"\"HospitalizationLocations\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"156"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"157"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"157"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"158"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"159"}],"node_type":"Start","ref_id":"160"}],"ref_id":"161"}],"ref_id":"162"}],"ref_id":"163"},{"children":[{"text":"\n  )"}]}],"ref_id":"164"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"165"}],"node_type":"Property","ref_id":"165"}],"node_type":"End","ref_id":"166"}],"node_type":"End","ref_id":"166"}],"ref_id":"167"}],"define_name":"HospitalDepartureTime"},{"children":[{"children":[{"children":[{"text":"/*Hospital Discharge Time returns the discharge time for an encounter*/define function \"HospitalDischargeTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"168"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"169"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"170"}],"node_type":"Property","ref_id":"170"}],"node_type":"End","ref_id":"171"}],"node_type":"End","ref_id":"171"}],"ref_id":"172"}],"define_name":"HospitalDischargeTime"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization with Observation and Outpatient Surgery Service returns the total interval from the start of any immediately prior emergency department visit, outpatient surgery visit or observation visit to the discharge of the given encounter.*/define function \"HospitalizationWithObservationAndOutpatientSurgeryService\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"173"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"174"},{"children":[{"text":" Visit"}]}],"ref_id":"175"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"ObsVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Observation Services\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"176"}],"node_type":"Retrieve","ref_id":"176"},{"children":[{"text":" LastObs"}]}],"ref_id":"177"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastObs"}]}],"ref_id":"178"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"179"}],"node_type":"Property","ref_id":"179"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"183"},{"children":[{"text":" or less on or before"}]}],"ref_id":"184"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"180"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"181"}],"node_type":"Property","ref_id":"181"}],"node_type":"Start","ref_id":"182"}],"ref_id":"184"}],"ref_id":"184"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"185"}],"node_type":"End","ref_id":"186"}],"ref_id":"187"}],"ref_id":"188"}],"ref_id":"189"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"190"}],"ref_id":"191"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"VisitStart: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"ObsVisit"}]}],"ref_id":"192"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"193"}],"node_type":"Property","ref_id":"193"}],"node_type":"Start","ref_id":"194"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"195"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"196"}],"node_type":"Property","ref_id":"196"}],"node_type":"Start","ref_id":"197"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"198"}],"ref_id":"199"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"200"}],"node_type":"Retrieve","ref_id":"200"},{"children":[{"text":" LastED"}]}],"ref_id":"201"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"202"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"203"}],"node_type":"Property","ref_id":"203"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"205"},{"children":[{"text":" or less on or before"}]}],"ref_id":"206"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"204"}],"ref_id":"206"}],"ref_id":"206"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"207"}],"node_type":"End","ref_id":"208"}],"ref_id":"209"}],"ref_id":"210"}],"ref_id":"211"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"212"}],"ref_id":"213"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"VisitStartWithED: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"214"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"215"}],"node_type":"Property","ref_id":"215"}],"node_type":"Start","ref_id":"216"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"217"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"218"}],"ref_id":"219"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"OutpatientSurgeryVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Outpatient Surgery Service\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"220"}],"node_type":"Retrieve","ref_id":"220"},{"children":[{"text":" LastSurgeryOP"}]}],"ref_id":"221"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastSurgeryOP"}]}],"ref_id":"222"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"223"}],"node_type":"Property","ref_id":"223"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"225"},{"children":[{"text":" or less on or before"}]}],"ref_id":"226"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"VisitStartWithED"}]}],"node_type":"QueryLetRef","ref_id":"224"}],"ref_id":"226"}],"ref_id":"226"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"227"}],"node_type":"End","ref_id":"228"}],"ref_id":"229"}],"ref_id":"230"}],"ref_id":"231"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"232"}],"ref_id":"233"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"OutpatientSurgeryVisit"}]}],"ref_id":"234"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"235"}],"node_type":"Property","ref_id":"235"}],"node_type":"Start","ref_id":"236"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"VisitStartWithED"}]}],"node_type":"QueryLetRef","ref_id":"237"},{"children":[{"text":")"}]}],"ref_id":"238"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"239"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"240"}],"node_type":"Property","ref_id":"240"}],"ref_id":"241"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"242"}],"ref_id":"243"}],"node_type":"Query","ref_id":"244"}],"node_type":"Query","ref_id":"244"}],"ref_id":"245"}],"define_name":"HospitalizationWithObservationAndOutpatientSurgeryService"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization with Observation returns the total interval from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/define function \"HospitalizationWithObservation\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"246"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"247"},{"children":[{"text":" Visit"}]}],"ref_id":"248"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"ObsVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Observation Services\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"249"}],"node_type":"Retrieve","ref_id":"249"},{"children":[{"text":" LastObs"}]}],"ref_id":"250"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastObs"}]}],"ref_id":"251"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"252"}],"node_type":"Property","ref_id":"252"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"256"},{"children":[{"text":" or less on or before"}]}],"ref_id":"257"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"253"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"254"}],"node_type":"Property","ref_id":"254"}],"node_type":"Start","ref_id":"255"}],"ref_id":"257"}],"ref_id":"257"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"258"}],"node_type":"End","ref_id":"259"}],"ref_id":"260"}],"ref_id":"261"}],"ref_id":"262"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"263"}],"ref_id":"264"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"VisitStart: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"ObsVisit"}]}],"ref_id":"265"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"266"}],"node_type":"Property","ref_id":"266"}],"node_type":"Start","ref_id":"267"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"268"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"269"}],"node_type":"Property","ref_id":"269"}],"node_type":"Start","ref_id":"270"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"271"}],"ref_id":"272"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"273"}],"node_type":"Retrieve","ref_id":"273"},{"children":[{"text":" LastED"}]}],"ref_id":"274"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"275"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"276"}],"node_type":"Property","ref_id":"276"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"278"},{"children":[{"text":" or less on or before"}]}],"ref_id":"279"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"277"}],"ref_id":"279"}],"ref_id":"279"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"280"}],"node_type":"End","ref_id":"281"}],"ref_id":"282"}],"ref_id":"283"}],"ref_id":"284"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"285"}],"ref_id":"286"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"287"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"288"}],"node_type":"Property","ref_id":"288"}],"node_type":"Start","ref_id":"289"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"290"},{"children":[{"text":")"}]}],"ref_id":"291"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"292"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"293"}],"node_type":"Property","ref_id":"293"}],"ref_id":"294"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"295"}],"ref_id":"296"}],"node_type":"Query","ref_id":"297"}],"node_type":"Query","ref_id":"297"}],"ref_id":"298"}],"define_name":"HospitalizationWithObservation"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization with Observation Length of Stay returns the length in days from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/define function \"HospitalizationWithObservationLengthofStay\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"299"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"\"LengthInDays\"("}]},{"children":[{"children":[{"text":"\"HospitalizationWithObservation\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"300"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"301"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"302"}],"node_type":"FunctionRef","ref_id":"302"}],"ref_id":"303"}],"define_name":"HospitalizationWithObservationLengthofStay"},{"children":[{"children":[{"children":[{"text":"/*First Inpatient Intensive Care Unit returns the first intensive care unit for the given encounter, without considering any immediately prior emergency department visit.*/define function \"FirstInpatientIntensiveCareUnit\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"304"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"305"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"node_type":"Property","ref_id":"306"}],"node_type":"Property","ref_id":"306"},{"children":[{"text":")"}]}],"node_type":"Property","ref_id":"306"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"307"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"HospitalLocation"}]}],"ref_id":"308"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"309"}],"ref_id":"309"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Intensive Care Unit\""}]}],"ref_id":"310"}],"node_type":"InValueSet","ref_id":"311"},{"children":[{"text":"\n        and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"HospitalLocation"}]}],"ref_id":"312"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"313"}],"node_type":"Property","ref_id":"313"},{"children":[{"text":" during "}],"node_type":"IncludedIn","ref_id":"316"},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"314"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"315"}],"node_type":"Property","ref_id":"315"}],"node_type":"IncludedIn","ref_id":"316"}],"ref_id":"317"}],"ref_id":"317"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"318"}],"node_type":"Start","ref_id":"319"}],"ref_id":"320"}],"ref_id":"321"}],"ref_id":"322"},{"children":[{"text":"\n  )"}]}],"node_type":"First","ref_id":"323"}],"node_type":"First","ref_id":"323"}],"ref_id":"324"}],"define_name":"FirstInpatientIntensiveCareUnit"},{"children":[{"children":[{"children":[{"text":"/*Given a datetime and a period, returns the period (if a period is provided) or the interval beginning and ending on the datetime (if a datetime is provided)*/define function \"NormalizeInterval\"(pointInTime "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"325"},{"children":[{"text":", period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"326"},{"children":[{"text":"\u003e"}]}],"ref_id":"327"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"pointInTime"}]}],"node_type":"OperandRef","ref_id":"328"},{"children":[{"text":" is not null"}]}],"ref_id":"329"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"pointInTime"}]}],"ref_id":"330"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"pointInTime"}]}],"ref_id":"331"},{"children":[{"text":"]"}]}],"ref_id":"332"},{"children":[{"text":"\n    else "}]},{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"333"},{"children":[{"text":" is not null"}]}],"ref_id":"334"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"period"}]}],"ref_id":"335"},{"children":[{"text":" \n    else "}]},{"children":[{"children":[{"text":"null as "}],"node_type":"Null","ref_id":"336"},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"337"},{"children":[{"text":"\u003e"}]}],"ref_id":"338"}],"ref_id":"339"}],"ref_id":"340"}],"node_type":"If","ref_id":"341"}],"node_type":"If","ref_id":"341"}],"ref_id":"342"}],"define_name":"NormalizeInterval"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return true if the interval has a starting boundary specified (i.e. the start of the interval is not null and not the minimum DateTime value)*/define function \"HasStart\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"343"},{"children":[{"text":"\u003e"}]}],"ref_id":"344"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"not "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"345"}],"node_type":"Start","ref_id":"346"},{"children":[{"text":" is null"}]}],"node_type":"IsNull","ref_id":"347"},{"children":[{"text":"\n      or "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"348"}],"node_type":"Start","ref_id":"349"},{"children":[{"text":" = "}]},{"children":[{"children":[{"text":"minimum "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"350"}],"node_type":"MinValue","ref_id":"351"}],"node_type":"Equal","ref_id":"352"}],"node_type":"Or","ref_id":"353"},{"children":[{"text":"\n  )"}]}],"node_type":"Or","ref_id":"353"}],"node_type":"Not","ref_id":"354"}],"node_type":"Not","ref_id":"354"}],"ref_id":"355"}],"define_name":"HasStart"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return true if the interval has an ending boundary specified (i.e. the end of the interval is not null and not the maximum DateTime value)*/define function \"HasEnd\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"356"},{"children":[{"text":"\u003e"}]}],"ref_id":"357"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"not "}]},{"children":[{"children":[{"text":"( \n    "}]},{"children":[{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"358"}],"node_type":"End","ref_id":"359"},{"children":[{"text":" is null"}]}],"node_type":"IsNull","ref_id":"360"},{"children":[{"text":"\n      or \n      "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"361"}],"node_type":"End","ref_id":"362"},{"children":[{"text":" = "}]},{"children":[{"children":[{"text":"maximum "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"363"}],"node_type":"MaxValue","ref_id":"364"}],"node_type":"Equal","ref_id":"365"}],"node_type":"Or","ref_id":"366"},{"children":[{"text":"\n  )"}]}],"node_type":"Or","ref_id":"366"}],"node_type":"Not","ref_id":"367"}],"node_type":"Not","ref_id":"367"}],"ref_id":"368"}],"define_name":"HasEnd"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return the ending point if the interval has an ending boundary specified, otherwise, return the starting point*/define function \"Latest\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"369"},{"children":[{"text":"\u003e"}]}],"ref_id":"370"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"HasEnd("}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"371"},{"children":[{"text":")"}]}],"ref_id":"372"},{"children":[{"text":")"}]}],"ref_id":"372"},{"children":[{"text":" then \n  "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"373"}],"ref_id":"374"},{"children":[{"text":" \n    else "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"375"}],"ref_id":"376"}],"node_type":"If","ref_id":"377"}],"node_type":"If","ref_id":"377"}],"ref_id":"378"}],"define_name":"Latest"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return the starting point if the interval has a starting boundary specified, otherwise, return the ending point*/define function \"Earliest\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"379"},{"children":[{"text":"\u003e"}]}],"ref_id":"380"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"HasStart("}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"381"},{"children":[{"text":")"}]}],"ref_id":"382"},{"children":[{"text":")"}]}],"ref_id":"382"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"383"}],"ref_id":"384"},{"children":[{"text":" \n    else \n  "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"385"}],"ref_id":"386"}],"node_type":"If","ref_id":"387"}],"node_type":"If","ref_id":"387"}],"ref_id":"388"}],"define_name":"Earliest"},{"children":[{"children":[{"children":[{"text":"/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the ending point of the period if the period has an ending boundary specified, otherwise returns the starting point of the interval*/define function \"LatestOf\"(pointInTime "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"389"},{"children":[{"text":", period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"390"},{"children":[{"text":"\u003e"}]}],"ref_id":"391"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Latest("}]},{"children":[{"children":[{"text":"NormalizeInterval("}]},{"children":[{"children":[{"text":"pointInTime"}]}],"node_type":"OperandRef","ref_id":"392"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"393"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"394"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"395"}],"node_type":"FunctionRef","ref_id":"395"}],"ref_id":"396"}],"define_name":"LatestOf"},{"children":[{"children":[{"children":[{"text":"/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the starting point of the period if the period has a starting boundary specified, otherwise returns the ending point of the period*/define function \"EarliestOf\"(pointInTime "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"397"},{"children":[{"text":", period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"398"},{"children":[{"text":"\u003e"}]}],"ref_id":"399"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Earliest("}]},{"children":[{"children":[{"text":"NormalizeInterval("}]},{"children":[{"children":[{"text":"pointInTime"}]}],"node_type":"OperandRef","ref_id":"400"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"401"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"402"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"403"}],"node_type":"FunctionRef","ref_id":"403"}],"ref_id":"404"}],"define_name":"EarliestOf"}],"identifier":{"id":"MATGlobalCommonFunctions","version":"7.0.000"}},"is_main_library":false,"is_top_level":true,"library_name":"MATGlobalCommonFunctions","library_version":"7.0.000","statement_dependencies":[{"_id":"689268fde8da6d1c0d518472","statement_name":"HospitalizationWithObservation"},{"_id":"689268fde8da6d1c0d518473","statement_name":"NormalizeInterval"}]}],"created_at":null,"description":"This measure assesses the number of inpatient hospital days with a hyperglycemic event (harm) per the total qualifying inpatient hospital days for that encounter for patients 18 years of age or older at admission","hqmf_id":"2C928082-7C31-8117-017C-5B3562370BA4","hqmf_set_id":"EF95493C-3F65-4440-9CCB-EAF1B9ED1210","hqmf_version_number":"2.0.000","main_cql_library":"HospitalHarmHyperglycemiainHospitalizedPatients","measure_attributes":[{"code":"OTH","value":"871","name":"eCQM Identifier (Measure Authoring Tool)","code_obj":{"type":"CD","null_flavor":"OTH","original_text":"eCQM Identifier (Measure Authoring Tool)"},"value_obj":{"type":"ED","value":"871","media_type":"text/plain"}},{"code":"OTH","value":"3533e","name":"NQF Number","code_obj":{"type":"CD","null_flavor":"OTH","original_text":"NQF Number"},"value_obj":{"type":"ED","value":"3533e","media_type":"text/plain"}},{"code":"COPY","value":"Limited proprietary coding is contained in the Measure specifications for user convenience. Users of proprietary code sets should obtain all necessary licenses from the owners of the code sets. American Institutes for Research(R), formerly IMPAQ International, disclaims all liability for use or accuracy of any third party codes contained in the specifications.\n\nLOINC(R) copyright 2004-2021 Regenstrief Institute, Inc. This material contains SNOMED Clinical Terms(R) (SNOMED CT[R]) copyright 2004-2021 International Health Terminology Standards Development Organisation. ICD-10 copyright 2021 World Health Organization. All Rights Reserved.","name":"Copyright","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"COPY","title":"Copyright"},"value_obj":{"type":"ED","value":"Limited proprietary coding is contained in the Measure specifications for user convenience. Users of proprietary code sets should obtain all necessary licenses from the owners of the code sets. American Institutes for Research(R), formerly IMPAQ International, disclaims all liability for use or accuracy of any third party codes contained in the specifications.\n\nLOINC(R) copyright 2004-2021 Regenstrief Institute, Inc. This material contains SNOMED Clinical Terms(R) (SNOMED CT[R]) copyright 2004-2021 International Health Terminology Standards Development Organisation. ICD-10 copyright 2021 World Health Organization. All Rights Reserved.","media_type":"text/plain"}},{"code":"DISC","value":"This measure and specifications are subject to further revisions. This performance measure is not a clinical guideline and does not establish a standard of medical care, and has not been tested for all potential applications.\n\nTHE MEASURES AND SPECIFICATIONS ARE PROVIDED \"AS IS\" WITHOUT WARRANTY OF ANY KIND.\n\nDue to technical limitations, registered trademarks are indicated by (R) or [R] and unregistered trademarks are indicated by (TM) or [TM].","name":"Disclaimer","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DISC","title":"Disclaimer"},"value_obj":{"type":"ED","value":"This measure and specifications are subject to further revisions. This performance measure is not a clinical guideline and does not establish a standard of medical care, and has not been tested for all potential applications.\n\nTHE MEASURES AND SPECIFICATIONS ARE PROVIDED \"AS IS\" WITHOUT WARRANTY OF ANY KIND.\n\nDue to technical limitations, registered trademarks are indicated by (R) or [R] and unregistered trademarks are indicated by (TM) or [TM].","media_type":"text/plain"}},{"code":"MSRSCORE","name":"Measure Scoring","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRSCORE","title":"Measure Scoring"},"value_obj":{"type":"CD","system":"2.16.840.1.113883.5.1063","code":"RATIO","title":"Ratio"}},{"code":"MSRTYPE","name":"Measure Type","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRTYPE","title":"Measure Type"},"value_obj":{"type":"CD","system":"2.16.840.1.113883.5.1063","code":"OUTCOME","title":"OUTCOME"}},{"code":"MSRADJ","value":"None","name":"Risk Adjustment","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRADJ","title":"Risk Adjustment"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"MSRAGG","value":"None","name":"Rate Aggregation","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRAGG","title":"Rate Aggregation"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"RAT","value":"Hyperglycemia, i.e., elevated blood glucose level, is common among hospitalized patients, especially those with preexisting diabetes (Swanson, et al., 2011; Umpierrez et al., 2012). Hyperglycemia can also affect individuals with no prior history of diabetes and may be induced by medications such as steroids, or parenteral (intravenous) or enteral (tube) feeding.\n\nSevere hyperglycemia, i.e., extremely elevated blood glucose level, is significantly associated with a range of harms, including increased in-hospital mortality, infection rates, and hospital length of stay (Pasquel, et al., 2010 and 2021; Rady, et al., 2005; Umpierrez, et al., 2002; Falciglia et al., 2009; Lee et al., 2012; King et al., 2011; Jackson et al., 2012; Umpierrez et al., 2012; Krinsley 2003). Lower rates of inpatient severe hyperglycemia may not only improve care for patients, but also reduce costs for healthcare payers (Krinsley 2003; Newton et al., 2006; Krinsley et al., 2016). The rate of hyperglycemia varies across hospitals, suggesting opportunities for improvement in inpatient glycemic management (Swanson et al., 2011; Cook et al., 2009; Matheny et al., 2008). The rate of inpatient hyperglycemia can be considered a marker for quality of hospital care, since inpatient hyperglycemia is largely avoidable with proper glycemic management. The use of evidence-based standardized protocols and insulin management protocols have been shown to improve glycemic control and safety (Maynard et al., 2015; Donihi et al., 2006).","name":"Rationale","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"RAT","title":"Rationale"},"value_obj":{"type":"ED","value":"Hyperglycemia, i.e., elevated blood glucose level, is common among hospitalized patients, especially those with preexisting diabetes (Swanson, et al., 2011; Umpierrez et al., 2012). Hyperglycemia can also affect individuals with no prior history of diabetes and may be induced by medications such as steroids, or parenteral (intravenous) or enteral (tube) feeding.\n\nSevere hyperglycemia, i.e., extremely elevated blood glucose level, is significantly associated with a range of harms, including increased in-hospital mortality, infection rates, and hospital length of stay (Pasquel, et al., 2010 and 2021; Rady, et al., 2005; Umpierrez, et al., 2002; Falciglia et al., 2009; Lee et al., 2012; King et al., 2011; Jackson et al., 2012; Umpierrez et al., 2012; Krinsley 2003). Lower rates of inpatient severe hyperglycemia may not only improve care for patients, but also reduce costs for healthcare payers (Krinsley 2003; Newton et al., 2006; Krinsley et al., 2016). The rate of hyperglycemia varies across hospitals, suggesting opportunities for improvement in inpatient glycemic management (Swanson et al., 2011; Cook et al., 2009; Matheny et al., 2008). The rate of inpatient hyperglycemia can be considered a marker for quality of hospital care, since inpatient hyperglycemia is largely avoidable with proper glycemic management. The use of evidence-based standardized protocols and insulin management protocols have been shown to improve glycemic control and safety (Maynard et al., 2015; Donihi et al., 2006).","media_type":"text/plain"}},{"code":"CRS","value":"It should be noted that this measure does not aim to measure overall glucose control in hospitalized patients; rather, our goal is to assess the occurrence and extent of severe hyperglycemia. This measure is also intended to be used in combination with its companion measure of hypoglycemia (Hospital Harm  Hypoglycemia) to reduce unintended consequences of measurement. \n\nMultiple guidelines address recommended levels of glycemic control, though these do not define severe hyperglycemia: \n\nFrom Section 15, Diabetes Care in the Hospital, in the Standards of Medical Care in Diabetes by the American Diabetes Association, (American Diabetes Association, 2020): \nInsulin therapy should be initiated for treatment of persistent hyperglycemia starting at a threshold \u003e=180 mg/dL (10.0 mmol/L). Once insulin therapy is started, a target glucose range of 140180 mg/dL (7.810.0 mmol/L) is recommended for the majority of critically ill patients and noncritically ill patients. More stringent goals, such as 110-140 mg/dL (6.1-7.8 mmol/L), may be appropriate for selected patients, as long as this can be achieved without significant hypoglycemia. \n\nFrom the Endocrine Society clinical practice guideline on the Management of Hyperglycemia in Hospitalized Patients in Non-critical Care Setting (Umpierrez et al., 2012):\n3.1. We recommend a pre-meal glucose target of less than 140 mg/dL (7.8 mmol/liter) and a random [blood glucose] of less than 180 mg/dL (10.0 mmol/liter) for the majority of hospitalized patients with non-critical illness.\n\nThere is no clinically accepted cutoff for severe hyperglycemia. Studies have used thresholds of \u003e140, \u003e180 , \u003e300, and \u003e350 mg/dL, among other values (American Diabetes Association, 2020; Umpierrez et al, 2012; Jamesen et al., 2015; Cook et al., 2009; Donihi et al., 2011; Weinberg et al, 2010; Mendez et al, 2015). Glycemic goals may also differ among hospitalized patients. For example, in an older patient with a prior history of severe hypoglycemia, some degree of hyperglycemia may be tolerated to maximize safety.\n\nFor patients who present with hyperglycemic crises, neurologic status must be monitored closely, with frequent re-examination. Care should be taken to prevent over-correction of hyperglycemia and hyperosmolarity following initial uid resuscitation of these patients to prevent cerebral edema, which carries a high mortality rate. (Gosmanov et al., 2021).","name":"Clinical Recommendation Statement","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"CRS","title":"Clinical Recommendation Statement"},"value_obj":{"type":"ED","value":"It should be noted that this measure does not aim to measure overall glucose control in hospitalized patients; rather, our goal is to assess the occurrence and extent of severe hyperglycemia. This measure is also intended to be used in combination with its companion measure of hypoglycemia (Hospital Harm  Hypoglycemia) to reduce unintended consequences of measurement. \n\nMultiple guidelines address recommended levels of glycemic control, though these do not define severe hyperglycemia: \n\nFrom Section 15, Diabetes Care in the Hospital, in the Standards of Medical Care in Diabetes by the American Diabetes Association, (American Diabetes Association, 2020): \nInsulin therapy should be initiated for treatment of persistent hyperglycemia starting at a threshold \u003e=180 mg/dL (10.0 mmol/L). Once insulin therapy is started, a target glucose range of 140180 mg/dL (7.810.0 mmol/L) is recommended for the majority of critically ill patients and noncritically ill patients. More stringent goals, such as 110-140 mg/dL (6.1-7.8 mmol/L), may be appropriate for selected patients, as long as this can be achieved without significant hypoglycemia. \n\nFrom the Endocrine Society clinical practice guideline on the Management of Hyperglycemia in Hospitalized Patients in Non-critical Care Setting (Umpierrez et al., 2012):\n3.1. We recommend a pre-meal glucose target of less than 140 mg/dL (7.8 mmol/liter) and a random [blood glucose] of less than 180 mg/dL (10.0 mmol/liter) for the majority of hospitalized patients with non-critical illness.\n\nThere is no clinically accepted cutoff for severe hyperglycemia. Studies have used thresholds of \u003e140, \u003e180 , \u003e300, and \u003e350 mg/dL, among other values (American Diabetes Association, 2020; Umpierrez et al, 2012; Jamesen et al., 2015; Cook et al., 2009; Donihi et al., 2011; Weinberg et al, 2010; Mendez et al, 2015). Glycemic goals may also differ among hospitalized patients. For example, in an older patient with a prior history of severe hypoglycemia, some degree of hyperglycemia may be tolerated to maximize safety.\n\nFor patients who present with hyperglycemic crises, neurologic status must be monitored closely, with frequent re-examination. Care should be taken to prevent over-correction of hyperglycemia and hyperosmolarity following initial uid resuscitation of these patients to prevent cerebral edema, which carries a high mortality rate. (Gosmanov et al., 2021).","media_type":"text/plain"}},{"code":"IDUR","value":"A lower measure score indicates higher quality","name":"Improvement Notation","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"IDUR","title":"Improvement Notation"},"value_obj":{"type":"ED","value":"A lower measure score indicates higher quality","media_type":"text/plain"}},{"code":"REF","value":"CITATIONAmerican Diabetes Association. 15. Diabetes care in the hospital: standards of medical care in diabetes2020. Diabetes Care 2020; 43 (suppl 1): S193202.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONAmerican Diabetes Association. 15. Diabetes care in the hospital: standards of medical care in diabetes2020. Diabetes Care 2020; 43 (suppl 1): S193202.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONCook CB, Kongable GL, Potter DJ, et al. Inpatient glucose control: a glycemic survey of 126 U.S. hospitals. J Hosp Med. 2009;4(9):E7-E14","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONCook CB, Kongable GL, Potter DJ, et al. Inpatient glucose control: a glycemic survey of 126 U.S. hospitals. J Hosp Med. 2009;4(9):E7-E14","media_type":"text/plain"}},{"code":"REF","value":"CITATIONDonihi AC, DiNardo MM, DeVita MA, et al. Use of a standardized protocol to decrease medication errors and adverse events related to sliding scale insulin. Qual Saf Health Care. 2006;15(2):89-91.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONDonihi AC, DiNardo MM, DeVita MA, et al. Use of a standardized protocol to decrease medication errors and adverse events related to sliding scale insulin. Qual Saf Health Care. 2006;15(2):89-91.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONDonihi AC, Gibson JM, Noschese ML, et al. Effect of targeted glycemic management program on provider response to inpatient hyperglycemia. Endocr Pract. 2011; (4)552-557.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONDonihi AC, Gibson JM, Noschese ML, et al. Effect of targeted glycemic management program on provider response to inpatient hyperglycemia. Endocr Pract. 2011; (4)552-557.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONFalciglia M, Freyberg RW, Alemenoff PL, et al. Hyperglycemia-related mortality in critically ill patients varies with admission diagnosis. Crit Care Med. 2009; 37(12):3001-3009.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONFalciglia M, Freyberg RW, Alemenoff PL, et al. Hyperglycemia-related mortality in critically ill patients varies with admission diagnosis. Crit Care Med. 2009; 37(12):3001-3009.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONJackson RS, Amdur RL, White JC, et al. Hyperglycemia is associated with increased risk of morbidity and mortality after colectomy for cancer. J Am Coll Surg. 2012;214(1):68-80.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONJackson RS, Amdur RL, White JC, et al. Hyperglycemia is associated with increased risk of morbidity and mortality after colectomy for cancer. J Am Coll Surg. 2012;214(1):68-80.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONJamesen E, Nevalainen PL, Eskelinen A, et al. Risk factors for perioperative hyperglycemia in primary hip and knee replacements. Acta Orthop. 2015; 86(2):175-182.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONJamesen E, Nevalainen PL, Eskelinen A, et al. Risk factors for perioperative hyperglycemia in primary hip and knee replacements. Acta Orthop. 2015; 86(2):175-182.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONKing JT, Goulet JL, Perkal MF, et al. Glycemic control and infections in patients with diabetes undergoing noncardiac surgery. Ann surg. 2011;253(1):158-165.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONKing JT, Goulet JL, Perkal MF, et al. Glycemic control and infections in patients with diabetes undergoing noncardiac surgery. Ann surg. 2011;253(1):158-165.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONKrinsley JS. Association between hyperglycemia and increased hospital mortality in a heterogeneous population of critically ill patients. Mayo Clin Proc. 2003 Dec;78(12):1471-1478.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONKrinsley JS. Association between hyperglycemia and increased hospital mortality in a heterogeneous population of critically ill patients. Mayo Clin Proc. 2003 Dec;78(12):1471-1478.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONKrinsley JS, Jones RL. Cost analysis of intensive glycemic control in critically ill adult patients. Chest. 2016;129(3)644-650","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONKrinsley JS, Jones RL. Cost analysis of intensive glycemic control in critically ill adult patients. Chest. 2016;129(3)644-650","media_type":"text/plain"}},{"code":"REF","value":"CITATIONLee LJ, Emons MF, Martin SA, et al. Association of blood glucose levels with in-hospital mortality and 30-day readmission in patients undergoing invasive cardiovascular surgery. Curr Med Res Opin. 2012;28(1):1657-1665.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONLee LJ, Emons MF, Martin SA, et al. Association of blood glucose levels with in-hospital mortality and 30-day readmission in patients undergoing invasive cardiovascular surgery. Curr Med Res Opin. 2012;28(1):1657-1665.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONMatheny ME, Shubina M, Kimmel ZK., et al. Treatment intensification and blood glucose control among hospitalized diabetic patients. J Gen Intern Med. 2008;23(2).","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONMatheny ME, Shubina M, Kimmel ZK., et al. Treatment intensification and blood glucose control among hospitalized diabetic patients. J Gen Intern Med. 2008;23(2).","media_type":"text/plain"}},{"code":"REF","value":"CITATIONMaynard G, Kulasa K, Ramos P, et al. Impact of a hypoglycemic reduction bundle and a systems approach to inpatient glycemic management. Endocr Pract. 2015;21(4):355-367.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONMaynard G, Kulasa K, Ramos P, et al. Impact of a hypoglycemic reduction bundle and a systems approach to inpatient glycemic management. Endocr Pract. 2015;21(4):355-367.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONMendez CE, Ata A, Rourke JM, et al. Daily inpatient glycemic survey (DINGS): A process to remotely identify and assist in the management of hospitalized patients with diabetes and hyperglycemia. Endocr Pract. 2015;21(8):927-935.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONMendez CE, Ata A, Rourke JM, et al. Daily inpatient glycemic survey (DINGS): A process to remotely identify and assist in the management of hospitalized patients with diabetes and hyperglycemia. Endocr Pract. 2015;21(8):927-935.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONNewton CA, Yong, S. Financial implications of glycemic control: Results of an inpatient diabetes management program. Endocr Pract. 2006;3:43-48.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONNewton CA, Yong, S. Financial implications of glycemic control: Results of an inpatient diabetes management program. Endocr Pract. 2006;3:43-48.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONPasquel FJ, Spiegelman R, McCauley M. Hyperglycemia during total parenteral nutrition: An important marker of poor outcome and mortality in hospitalized patients. Diabetes Care. 2010;(33)4:739-741.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONPasquel FJ, Spiegelman R, McCauley M. Hyperglycemia during total parenteral nutrition: An important marker of poor outcome and mortality in hospitalized patients. Diabetes Care. 2010;(33)4:739-741.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONRady MY. Influence of individual characteristics on outcome of glycemic control in intensive care unit patients with or without diabetes mellitus. Mayo Clin Proc 2005;80(12):1558-1567.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONRady MY. Influence of individual characteristics on outcome of glycemic control in intensive care unit patients with or without diabetes mellitus. Mayo Clin Proc 2005;80(12):1558-1567.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONSwanson CM, Potter DJ, Kongable GL, et al. Update on inpatient glycemic control in hospitals in the United States. Endocrine Practice. 2011;17(6):853-861.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONSwanson CM, Potter DJ, Kongable GL, et al. Update on inpatient glycemic control in hospitals in the United States. Endocrine Practice. 2011;17(6):853-861.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONUmpierrez, GE, Hellman, R, Korytkowski, MT, et al. Management of Hyperglycemia in Hospitalized Patients in Non-critical Care Setting: An Endocrine Society Clinical Practice Guideline. J Clin Endocrinol Metab. 2012;97, 16-38","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONUmpierrez, GE, Hellman, R, Korytkowski, MT, et al. Management of Hyperglycemia in Hospitalized Patients in Non-critical Care Setting: An Endocrine Society Clinical Practice Guideline. J Clin Endocrinol Metab. 2012;97, 16-38","media_type":"text/plain"}},{"code":"REF","value":"CITATIONUmpierrez GE, Issacs DS, Bazargan N, et al. Hyperglycemia: an independent marker of in-hospital mortality in patients with undiagnosed diabetes. J Clin Endorinol Metab. 2002;87(3):978-982.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONUmpierrez GE, Issacs DS, Bazargan N, et al. Hyperglycemia: an independent marker of in-hospital mortality in patients with undiagnosed diabetes. J Clin Endorinol Metab. 2002;87(3):978-982.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONWeinberg ME, Bacchetti P, Rushakoff, RJ. Frequently repeated glucose measurements overestimate the incidence of inpatient hypoglycemia and severe hyperglycemia. J Diabetes Sci Technol. 2010;May 1;4(3):577-582.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONWeinberg ME, Bacchetti P, Rushakoff, RJ. Frequently repeated glucose measurements overestimate the incidence of inpatient hypoglycemia and severe hyperglycemia. J Diabetes Sci Technol. 2010;May 1;4(3):577-582.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONGosmanov AR, Gosmanova EO, Kitabchi AE. Hyperglycemic Crises: Diabetic Ketoacidosis and Hyperglycemic Hyperosmolar State. [Updated 2021 May 9]. In: Feingold KR, Anawalt B, Boyce A, et al., editors. Endotext [Internet]. South Dartmouth (MA): MDText.com, Inc.; 2000-. Available from: https://www.ncbi.nlm.nih.gov/books/NBK279052/","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONGosmanov AR, Gosmanova EO, Kitabchi AE. Hyperglycemic Crises: Diabetic Ketoacidosis and Hyperglycemic Hyperosmolar State. [Updated 2021 May 9]. In: Feingold KR, Anawalt B, Boyce A, et al., editors. Endotext [Internet]. South Dartmouth (MA): MDText.com, Inc.; 2000-. Available from: https://www.ncbi.nlm.nih.gov/books/NBK279052/","media_type":"text/plain"}},{"code":"REF","value":"CITATIONFrancisco J Pasquel, M Cecilia Lansang, Ketan Dhatariya, Guillermo E Umpierrez. Management of diabetes and hyperglycaemia in the hospital. The Lancet Diabetes \u0026 Endocrinology. 2021; 9: 17488","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONFrancisco J Pasquel, M Cecilia Lansang, Ketan Dhatariya, Guillermo E Umpierrez. Management of diabetes and hyperglycaemia in the hospital. The Lancet Diabetes \u0026 Endocrinology. 2021; 9: 17488","media_type":"text/plain"}},{"code":"DEF","value":"Inpatient hospitalizations: Includes time in the emergency department and observation when the transition between these encounters (if they exist) and the inpatient encounter are within an hour or less of each other. \n\nThis measure defines a severe hyperglycemic day (harm) as either (1) a day with a test (lab or point-of-care (POC)) for blood glucose with a result of \u003e300 mg/dL, or (2) a day in which a test for blood glucose was not measured and it was preceded by two consecutive days where at least one lab or point-of-care (POC) test during each of the two days for blood glucose had a result \u003e=200 mg/dL. \n\nHospital days are full 24-hour periods that start at the time of admission to the hospital (including emergency department and observation), excluding the last period before discharge if it is less than 24 hours.","name":"Definition","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DEF","title":"Definition"},"value_obj":{"type":"ED","value":"Inpatient hospitalizations: Includes time in the emergency department and observation when the transition between these encounters (if they exist) and the inpatient encounter are within an hour or less of each other. \n\nThis measure defines a severe hyperglycemic day (harm) as either (1) a day with a test (lab or point-of-care (POC)) for blood glucose with a result of \u003e300 mg/dL, or (2) a day in which a test for blood glucose was not measured and it was preceded by two consecutive days where at least one lab or point-of-care (POC) test during each of the two days for blood glucose had a result \u003e=200 mg/dL. \n\nHospital days are full 24-hour periods that start at the time of admission to the hospital (including emergency department and observation), excluding the last period before discharge if it is less than 24 hours.","media_type":"text/plain"}},{"code":"GUIDE","value":"The measure is using mg/dL as the unit of measurement for glucose results.\n\nTo determine the measure outcome, the total number of hyperglycemic days during the inpatient hospitalization is divided by the total number of eligible hospital days of the inpatient hospitalization.\n\nWhen evaluating for days with a blood glucose level \u003e300 mg/dL, the first 24-hour period after admission to the hospital (including the emergency department or observation) is not evaluated to account for potentially poor glucose control outside of the hospital setting or that preceded the start of hospital care.\n\nThis measure evaluates the first 10 days of an eligible inpatient hospitalization in determining eligible days for the denominator and numerator (i.e., the length of stay is truncated to \u003c=10 days when the length exceeds 10 days). Patients admitted for longer length of stays are more likely to have more complex medical conditions.  \n\nThe numerator returns the first eligible encounter that meets the qualifying criteria: an inpatient hospitalization with a hyperglycemic event. Only one numerator is counted per encounter. Note that the Numerator returns the encounters, not days, that meet the criteria.\n\nBlood glucose levels are determined by laboratory or point-of-care (POC) tests, including capillary/glucometer blood glucose tests.\n\nThis eCQM is an episode-based measure. An episode is defined as each inpatient hospitalization or encounter that ends during the measurement period.\n\nThis version of the eCQM uses QDM version 5.6. Please refer to the eCQI resource center (https://ecqi.healthit.gov/qdm) for more information on the QDM.","name":"Guidance","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"GUIDE","title":"Guidance"},"value_obj":{"type":"ED","value":"The measure is using mg/dL as the unit of measurement for glucose results.\n\nTo determine the measure outcome, the total number of hyperglycemic days during the inpatient hospitalization is divided by the total number of eligible hospital days of the inpatient hospitalization.\n\nWhen evaluating for days with a blood glucose level \u003e300 mg/dL, the first 24-hour period after admission to the hospital (including the emergency department or observation) is not evaluated to account for potentially poor glucose control outside of the hospital setting or that preceded the start of hospital care.\n\nThis measure evaluates the first 10 days of an eligible inpatient hospitalization in determining eligible days for the denominator and numerator (i.e., the length of stay is truncated to \u003c=10 days when the length exceeds 10 days). Patients admitted for longer length of stays are more likely to have more complex medical conditions.  \n\nThe numerator returns the first eligible encounter that meets the qualifying criteria: an inpatient hospitalization with a hyperglycemic event. Only one numerator is counted per encounter. Note that the Numerator returns the encounters, not days, that meet the criteria.\n\nBlood glucose levels are determined by laboratory or point-of-care (POC) tests, including capillary/glucometer blood glucose tests.\n\nThis eCQM is an episode-based measure. An episode is defined as each inpatient hospitalization or encounter that ends during the measurement period.\n\nThis version of the eCQM uses QDM version 5.6. Please refer to the eCQI resource center (https://ecqi.healthit.gov/qdm) for more information on the QDM.","media_type":"text/plain"}},{"code":"TRANF","value":"TBD","name":"Transmission Format","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"TRANF","title":"Transmission Format"},"value_obj":{"type":"ED","value":"TBD","media_type":"text/plain"}},{"code":"IPOP","value":"Inpatient hospitalizations where the patient is 18 years or older at the start of the admission with a discharge during the measurement period, as well as either: \n1) a diagnosis of diabetes that starts before or during the encounter; or \n2) administration of at least one dose of insulin or any hypoglycemic medication during the encounter; or \n3) presence of at least one blood glucose value \u003e=200 mg/dL at any time during the encounter\n\nThe measure includes inpatient hospitalizations that began in the emergency department or in observation","name":"Initial Population","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"IPOP","title":"Initial Population"},"value_obj":{"type":"ED","value":"Inpatient hospitalizations where the patient is 18 years or older at the start of the admission with a discharge during the measurement period, as well as either: \n1) a diagnosis of diabetes that starts before or during the encounter; or \n2) administration of at least one dose of insulin or any hypoglycemic medication during the encounter; or \n3) presence of at least one blood glucose value \u003e=200 mg/dL at any time during the encounter\n\nThe measure includes inpatient hospitalizations that began in the emergency department or in observation","media_type":"text/plain"}},{"code":"DENOM","value":"Equals Initial Population","name":"Denominator","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DENOM","title":"Denominator"},"value_obj":{"type":"ED","value":"Equals Initial Population","media_type":"text/plain"}},{"code":"DENEX","value":"Inpatient hospitalizations for patients with an initial blood glucose result of \u003e=1000 mg/dL anytime between 1 hour prior to the start of the encounter to 6 hours after the start of the encounter","name":"Denominator Exclusions","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DENEX","title":"Denominator Exclusions"},"value_obj":{"type":"ED","value":"Inpatient hospitalizations for patients with an initial blood glucose result of \u003e=1000 mg/dL anytime between 1 hour prior to the start of the encounter to 6 hours after the start of the encounter","media_type":"text/plain"}},{"code":"NUMER","value":"Inpatient hospitalizations with a hyperglycemic event within the first 10 days of the encounter minus the first 24 hours, and minus the last period before discharge if less than 24 hours\n\nA hyperglycemic event is defined as: \n1)  A day with at least one blood glucose value \u003e300 mg/dL; \nOR\n2)  A day where a blood glucose test was not done, and it was preceded by two consecutive days where at \n     least one glucose value during each of the two days was \u003e=200 mg/dL","name":"Numerator","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"NUMER","title":"Numerator"},"value_obj":{"type":"ED","value":"Inpatient hospitalizations with a hyperglycemic event within the first 10 days of the encounter minus the first 24 hours, and minus the last period before discharge if less than 24 hours\n\nA hyperglycemic event is defined as: \n1)  A day with at least one blood glucose value \u003e300 mg/dL; \nOR\n2)  A day where a blood glucose test was not done, and it was preceded by two consecutive days where at \n     least one glucose value during each of the two days was \u003e=200 mg/dL","media_type":"text/plain"}},{"code":"NUMEX","value":"Not Applicable","name":"Numerator Exclusions","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"NUMEX","title":"Numerator Exclusions"},"value_obj":{"type":"ED","value":"Not Applicable","media_type":"text/plain"}},{"code":"MSROBS","value":"There are two Measure Observations:\n\nMeasure Observation 1, associated with the Denominator: The total number of eligible days of the inpatient hospitalization which match the initial population/denominator criteria. \n\nMeasure Observation 2, associated with the Numerator: The total number of hyperglycemic days during the inpatient hospitalization. Days with a hyperglycemic event are defined as: \n\na)  All days with a blood glucose level \u003e300 mg/dL (except those occurring in the first 24-hour period after \n     admission to the hospital (including the emergency department and observation)), \nOR\nb)  All days where a blood glucose was not measured, and it was preceded by two consecutive days where \n     at least one glucose value during each of the two days was \u003e=200 mg/dL.\n\nThe length of stay for all eligible inpatient hospitalizations is truncated to \u003c=10 days when the length exceeds 10 days.\n\nDo not count the last day if it was less than a 24-hour period as this is not considered a full day.","name":"Measure Observation","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSROBS","title":"Measure Observation"},"value_obj":{"type":"ED","value":"There are two Measure Observations:\n\nMeasure Observation 1, associated with the Denominator: The total number of eligible days of the inpatient hospitalization which match the initial population/denominator criteria. \n\nMeasure Observation 2, associated with the Numerator: The total number of hyperglycemic days during the inpatient hospitalization. Days with a hyperglycemic event are defined as: \n\na)  All days with a blood glucose level \u003e300 mg/dL (except those occurring in the first 24-hour period after \n     admission to the hospital (including the emergency department and observation)), \nOR\nb)  All days where a blood glucose was not measured, and it was preceded by two consecutive days where \n     at least one glucose value during each of the two days was \u003e=200 mg/dL.\n\nThe length of stay for all eligible inpatient hospitalizations is truncated to \u003c=10 days when the length exceeds 10 days.\n\nDo not count the last day if it was less than a 24-hour period as this is not considered a full day.","media_type":"text/plain"}},{"code":"SDE","value":"For every patient evaluated by this measure also identify payer, race, ethnicity and sex","name":"Supplemental Data Elements","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"SDE","title":"Supplemental Data Elements"},"value_obj":{"type":"ED","value":"For every patient evaluated by this measure also identify payer, race, ethnicity and sex","media_type":"text/plain"}}],"measure_period":{"type":"IVL_TS","low":{"type":"TS","value":"201201010000","inclusive?":true,"derived?":false},"high":{"type":"TS","value":"201212312359","inclusive?":true,"derived?":false},"width":{"type":"PQ","unit":"a","value":"1","inclusive?":true,"derived?":false}},"measure_scoring":"RATIO","population_criteria":{"OBSERV":{"conjunction?":false,"type":"OBSERV","hqmf_id":"2C0D56D2-CE4F-4486-85F1-2B2DF629AC08","aggregator":"SUM"},"OBSERV_1":{"conjunction?":false,"type":"OBSERV","hqmf_id":"4F5CA81E-992B-483E-A69D-A8BDF0887721","aggregator":"SUM"},"IPP":{"conjunction?":true,"type":"IPP","hqmf_id":"B9A39277-3AAA-4531-AF48-E9B075D23FEE","preconditions":[{"id":2,"preconditions":[{"id":1,"reference":"HospitalHarmHyperglycemiainHospitalizedPatients__Initial_Population__EA07F6C1_5D00_4BD3_885B_5CE35C2C0517"}],"conjunction_code":"allTrue"}]},"DENOM":{"conjunction?":true,"type":"DENOM","hqmf_id":"0BE677E4-C6FD-4A1E-AC96-4F5471D52593","preconditions":[{"id":4,"preconditions":[{"id":3,"reference":"HospitalHarmHyperglycemiainHospitalizedPatients__Denominator__EA07F6C1_5D00_4BD3_885B_5CE35C2C0517"}],"conjunction_code":"allTrue"}]},"NUMER":{"conjunction?":true,"type":"NUMER","hqmf_id":"2E4EA7D2-A089-4DD0-A7F2-B07898AB0D73","preconditions":[{"id":6,"preconditions":[{"id":5,"reference":"HospitalHarmHyperglycemiainHospitalizedPatients__Numerator__EA07F6C1_5D00_4BD3_885B_5CE35C2C0517"}],"conjunction_code":"allTrue"}]},"DENEX":{"conjunction?":true,"type":"DENEX","hqmf_id":"656C8122-A3FE-407A-B9F9-900C5E6AE2F5","preconditions":[{"id":8,"preconditions":[{"id":7,"reference":"HospitalHarmHyperglycemiainHospitalizedPatients__Denominator_Exclusions__EA07F6C1_5D00_4BD3_885B_5CE35C2C0517"}],"conjunction_code":"atLeastOneTrue"}]}},"population_sets":[{"_id":"68926901e8da6d1c0d51892b","observations":[{"_id":"68926901e8da6d1c0d51891a","aggregation_type":"SUM","hqmf_id":"2C0D56D2-CE4F-4486-85F1-2B2DF629AC08","observation_function":{"_id":"68926901e8da6d1c0d51892c","hqmf_id":"2C0D56D2-CE4F-4486-85F1-2B2DF629AC08","library_name":"HospitalHarmHyperglycemiainHospitalizedPatients","statement_name":"Denominator Observations"},"observation_parameter":{"_id":"68926901e8da6d1c0d51892d","hqmf_id":"2C0D56D2-CE4F-4486-85F1-2B2DF629AC08","library_name":"HospitalHarmHyperglycemiainHospitalizedPatients","statement_name":"Denominator"}},{"_id":"68926901e8da6d1c0d51891b","aggregation_type":"SUM","hqmf_id":"4F5CA81E-992B-483E-A69D-A8BDF0887721","observation_function":{"_id":"68926901e8da6d1c0d51892e","hqmf_id":"4F5CA81E-992B-483E-A69D-A8BDF0887721","library_name":"HospitalHarmHyperglycemiainHospitalizedPatients","statement_name":"Numerator Observations"},"observation_parameter":{"_id":"68926901e8da6d1c0d51892f","hqmf_id":"4F5CA81E-992B-483E-A69D-A8BDF0887721","library_name":"HospitalHarmHyperglycemiainHospitalizedPatients","statement_name":"Numerator"}}],"population_set_id":"PopulationSet_1","populations":{"DENEX":{"_id":"68926901e8da6d1c0d518930","hqmf_id":"656C8122-A3FE-407A-B9F9-900C5E6AE2F5","library_name":"HospitalHarmHyperglycemiainHospitalizedPatients","statement_name":"Denominator Exclusions"},"DENOM":{"_id":"68926901e8da6d1c0d518931","hqmf_id":"0BE677E4-C6FD-4A1E-AC96-4F5471D52593","library_name":"HospitalHarmHyperglycemiainHospitalizedPatients","statement_name":"Denominator"},"IPP":{"_id":"68926901e8da6d1c0d518932","hqmf_id":"B9A39277-3AAA-4531-AF48-E9B075D23FEE","library_name":"HospitalHarmHyperglycemiainHospitalizedPatients","statement_name":"Initial Population"},"NUMER":{"_id":"68926901e8da6d1c0d518933","hqmf_id":"2E4EA7D2-A089-4DD0-A7F2-B07898AB0D73","library_name":"HospitalHarmHyperglycemiainHospitalizedPatients","statement_name":"Numerator"},"_id":"68926901e8da6d1c0d518934","_type":"CQM::RatioPopulationMap"},"supplemental_data_elements":[{"_id":"689268fce8da6d1c0d518444","hqmf_id":"7224666B-1A34-41D2-8F07-91BE9BE9371C","library_name":"HospitalHarmHyperglycemiainHospitalizedPatients","statement_name":"SDE Ethnicity"},{"_id":"689268fce8da6d1c0d518445","hqmf_id":"33502828-0838-4126-B172-13F18329BCED","library_name":"HospitalHarmHyperglycemiainHospitalizedPatients","statement_name":"SDE Payer"},{"_id":"689268fce8da6d1c0d518446","hqmf_id":"441556F5-B3AB-4410-A52F-1055AD2205F7","library_name":"HospitalHarmHyperglycemiainHospitalizedPatients","statement_name":"SDE Race"},{"_id":"689268fce8da6d1c0d518447","hqmf_id":"958534D0-8E0F-46CD-97C5-915A4494774A","library_name":"HospitalHarmHyperglycemiainHospitalizedPatients","statement_name":"SDE Sex"}],"title":"Population Criteria Section"}],"source_data_criteria":[{"_id":"689268fde8da6d1c0d518476","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.666.5.307","dataElementCodes":[],"description":"Encounter, Performed: EncounterInpatient","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"689268fde8da6d1c0d518476","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"68926901e8da6d1c0d518935","_type":"QDM::PatientCharacteristicPayer","codeListId":"2.16.840.1.114222.4.11.3591","dataElementCodes":[],"description":"Patient Characteristic Payer: Payer","hqmfOid":"2.16.840.1.113883.10.20.28.4.58","id":"68926901e8da6d1c0d518935","qdmCategory":"patient_characteristic","qdmStatus":"payer","qdmTitle":"Patient Characteristic Payer","qdmVersion":"5.6","relevantPeriod":null},{"_id":"68926901e8da6d1c0d518936","_type":"QDM::PatientCharacteristicSex","codeListId":"2.16.840.1.113762.1.4.1","dataElementCodes":[],"description":"Patient Characteristic Sex: ONCAdministrativeSex","hqmfOid":"2.16.840.1.113883.10.20.28.4.55","id":"68926901e8da6d1c0d518936","qdmCategory":"patient_characteristic","qdmStatus":"gender","qdmTitle":"Patient Characteristic Sex","qdmVersion":"5.6"},{"_id":"68926901e8da6d1c0d518937","_type":"QDM::PatientCharacteristicEthnicity","codeListId":"2.16.840.1.114222.4.11.837","dataElementCodes":[],"description":"Patient Characteristic Ethnicity: Ethnicity","hqmfOid":"2.16.840.1.113883.10.20.28.4.56","id":"68926901e8da6d1c0d518937","qdmCategory":"patient_characteristic","qdmStatus":"ethnicity","qdmTitle":"Patient Characteristic Ethnicity","qdmVersion":"5.6"},{"_id":"68926901e8da6d1c0d518938","_type":"QDM::LaboratoryTestPerformed","authorDatetime":null,"codeListId":"2.16.840.1.113762.1.4.1248.34","components":null,"dataElementCodes":[],"description":"Laboratory Test, Performed: GlucoseLabTestMassPerVolume","hqmfOid":"2.16.840.1.113883.10.20.28.4.42","id":"68926901e8da6d1c0d518938","interpretation":null,"method":null,"negationRationale":null,"qdmCategory":"laboratory_test","qdmStatus":"performed","qdmTitle":"Laboratory Test, Performed","qdmVersion":"5.6","reason":null,"referenceRange":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null,"resultDatetime":null,"status":null},{"_id":"689268fde8da6d1c0d518477","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113762.1.4.1111.143","dataElementCodes":[],"description":"Encounter, Performed: ObservationServices","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"689268fde8da6d1c0d518477","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"68926901e8da6d1c0d518939","_type":"QDM::PatientCharacteristicRace","codeListId":"2.16.840.1.114222.4.11.836","dataElementCodes":[],"description":"Patient Characteristic Race: Race","hqmfOid":"2.16.840.1.113883.10.20.28.4.59","id":"68926901e8da6d1c0d518939","qdmCategory":"patient_characteristic","qdmStatus":"race","qdmTitle":"Patient Characteristic Race","qdmVersion":"5.6"},{"_id":"689268fde8da6d1c0d518478","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.117.1.7.1.292","dataElementCodes":[],"description":"Encounter, Performed: EmergencyDepartmentVisit","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"689268fde8da6d1c0d518478","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"68926901e8da6d1c0d51893a","_type":"QDM::Diagnosis","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"2.16.840.1.113883.3.464.1003.103.12.1001","dataElementCodes":[],"description":"Diagnosis: Diabetes","hqmfOid":"2.16.840.1.113883.10.20.28.4.110","id":"68926901e8da6d1c0d51893a","prevalencePeriod":null,"qdmCategory":"condition","qdmTitle":"Diagnosis","qdmVersion":"5.6","qrdaOid":"2.16.840.1.113883.10.20.24.3.135","severity":null},{"_id":"68926901e8da6d1c0d51893b","_type":"QDM::MedicationAdministered","authorDatetime":null,"codeListId":"2.16.840.1.113762.1.4.1196.394","dataElementCodes":[],"description":"Medication, Administered: HypoglycemicsTreatmentMedications","dosage":null,"frequency":null,"hqmfOid":"2.16.840.1.113883.10.20.28.4.45","id":"68926901e8da6d1c0d51893b","negationRationale":null,"qdmCategory":"medication","qdmStatus":"administered","qdmTitle":"Medication, Administered","qdmVersion":"5.6","reason":null,"relevantDatetime":null,"relevantPeriod":null,"route":null}],"title":"Hospital Harm - Severe Hyperglycemia","updated_at":null,"value_set_ids":["68926901e8da6d1c0d51890e","68926901e8da6d1c0d51890f","68926901e8da6d1c0d518910","68926901e8da6d1c0d518911","68926901e8da6d1c0d518912","68926901e8da6d1c0d518913","68926901e8da6d1c0d518914","68926901e8da6d1c0d518915","68926901e8da6d1c0d518916","68926901e8da6d1c0d518917","68926901e8da6d1c0d518918","68926901e8da6d1c0d518919"]}