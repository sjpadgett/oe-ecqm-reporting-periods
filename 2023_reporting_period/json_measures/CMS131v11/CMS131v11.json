{"_id":"689263eee8da6d1c0d4fa9d8","calculate_sdes":null,"calculation_method":"PATIENT","cms_id":"CMS131v11","component":false,"component_hqmf_set_ids":[],"composite":false,"composite_hqmf_set_id":null,"cql_libraries":[{"_id":"689263dee8da6d1c0d4f9a8d","cql":"library AdvancedIllnessandFrailtyExclusionECQM version '7.0.000'\n\nusing QDM version '5.6'\n\ninclude MATGlobalCommonFunctions version '7.0.000' called Global\n\ncodesystem \"LOINC\": 'urn:oid:2.16.840.1.113883.6.1' \ncodesystem \"SNOMEDCT\": 'urn:oid:2.16.840.1.113883.6.96' \n\nvalueset \"Acute Inpatient\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1083' \nvalueset \"Advanced Illness\": 'urn:oid:2.16.840.1.113883.3.464.1003.110.12.1082' \nvalueset \"Dementia Medications\": 'urn:oid:2.16.840.1.113883.3.464.1003.196.12.1510' \nvalueset \"Emergency Department Visit\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1010' \nvalueset \"Frailty Device\": 'urn:oid:2.16.840.1.113883.3.464.1003.118.12.1300' \nvalueset \"Frailty Diagnosis\": 'urn:oid:2.16.840.1.113883.3.464.1003.113.12.1074' \nvalueset \"Frailty Encounter\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1088' \nvalueset \"Frailty Symptom\": 'urn:oid:2.16.840.1.113883.3.464.1003.113.12.1075' \nvalueset \"Nonacute Inpatient\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1084' \nvalueset \"Observation\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1086' \nvalueset \"Outpatient\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1087' \n\ncode \"Housing status\": '71802-3' from \"LOINC\" display 'Housing status'\ncode \"Lives in a nursing home (finding)\": '160734000' from \"SNOMEDCT\" display 'Lives in a nursing home (finding)'\ncode \"Medical equipment used\": '98181-1' from \"LOINC\" display 'Medical equipment used'\n\nparameter \"Measurement Period\" Interval\u003cDateTime\u003e\n\ncontext Patient\n\ndefine \"Is Age 66 or Older with Advanced Illness and Frailty\":\n  ( AgeInYearsAt(date from \n      end of \"Measurement Period\"\n    )\u003e= 66\n      and \"Has Criteria Indicating Frailty\"\n      and ( \"Has Two Outpatient Encounters with Advanced Illness on Different Dates of Service\"\n          or \"Has Inpatient Encounter with Advanced Illness\"\n          or \"Has Dementia Medications in Year Before or During Measurement Period\"\n      )\n  )\n\ndefine \"Has Dementia Medications in Year Before or During Measurement Period\":\n  exists ([\"Medication, Active\": \"Dementia Medications\"] DementiaMedication\n    where Global.\"NormalizeInterval\" ( DementiaMedication.relevantDatetime, DementiaMedication.relevantPeriod ) overlaps Interval[start of \"Measurement Period\" - 1 year, \n    end of \"Measurement Period\"])\n\ndefine \"Has Inpatient Encounter with Advanced Illness\":\n  exists( [\"Encounter, Performed\": \"Acute Inpatient\"] InpatientEncounter\n    where exists ( InpatientEncounter.diagnoses Diagnosis\n        where Diagnosis.code in \"Advanced Illness\"\n    )\n      and InpatientEncounter.relevantPeriod starts during day of Interval[start of \"Measurement Period\" - 1 year, \n      end of \"Measurement Period\"])\n\ndefine \"Outpatient Encounters with Advanced Illness\":\n  ( [\"Encounter, Performed\": \"Outpatient\"]\n    union [\"Encounter, Performed\": \"Observation\"]\n    union [\"Encounter, Performed\": \"Emergency Department Visit\"]\n    union [\"Encounter, Performed\": \"Nonacute Inpatient\"] ) OutpatientEncounter\n    where exists ( OutpatientEncounter.diagnoses Diagnosis\n        where Diagnosis.code in \"Advanced Illness\"\n    )\n      and OutpatientEncounter.relevantPeriod starts during day of Interval[start of \"Measurement Period\" - 1 year, \n      end of \"Measurement Period\"]\n\ndefine \"Has Two Outpatient Encounters with Advanced Illness on Different Dates of Service\":\n  exists (\n  from\n    \"Outpatient Encounters with Advanced Illness\" OutpatientEncounter1,\n    \"Outpatient Encounters with Advanced Illness\" OutpatientEncounter2\n    where OutpatientEncounter2.relevantPeriod ends 1 day or more after day of \n    end of OutpatientEncounter1.relevantPeriod\n    return OutpatientEncounter1\n    )\n\ndefine \"Is Age 66 or Older Living Long Term in a Nursing Home\":\n  ( AgeInYearsAt(date from \n      end of \"Measurement Period\"\n    )\u003e= 66\n  )\n    and ( ( Last([\"Assessment, Performed\": \"Housing status\"] HousingStatus\n          where Global.\"NormalizeInterval\"(HousingStatus.relevantDatetime, HousingStatus.relevantPeriod)ends on or before \n          end of \"Measurement Period\"\n          sort by \n          end of Global.\"NormalizeInterval\"(relevantDatetime, relevantPeriod)asc\n      )) LastHousingStatus\n        where LastHousingStatus.result ~ \"Lives in a nursing home (finding)\"\n    ) is not null\n\ndefine \"Has Criteria Indicating Frailty\":\n  exists ( [\"Device, Order\": \"Frailty Device\"] FrailtyDeviceOrder\n      where FrailtyDeviceOrder.authorDatetime during day of \"Measurement Period\"\n  )\n    or exists ( [\"Assessment, Performed\": \"Medical equipment used\"] EquipmentUsed\n        where EquipmentUsed.result in \"Frailty Device\"\n          and Global.\"NormalizeInterval\" ( EquipmentUsed.relevantDatetime, EquipmentUsed.relevantPeriod ) ends during day of \"Measurement Period\"\n    )\n    or exists ( [\"Diagnosis\": \"Frailty Diagnosis\"] FrailtyDiagnosis\n        where FrailtyDiagnosis.prevalencePeriod overlaps \"Measurement Period\"\n    )\n    or exists ( [\"Encounter, Performed\": \"Frailty Encounter\"] FrailtyEncounter\n        where FrailtyEncounter.relevantPeriod overlaps \"Measurement Period\"\n    )\n    or exists ( [\"Symptom\": \"Frailty Symptom\"] FrailtySymptom\n        where FrailtySymptom.prevalencePeriod overlaps \"Measurement Period\"\n    )\n\ndefine \"Is Age 66 to 80 with Advanced Illness and Frailty or Is Age 81 or Older with Frailty\":\n  ( AgeInYearsAt(date from \n      end of \"Measurement Period\"\n    )in Interval[66, 80]\n      and \"Has Criteria Indicating Frailty\"\n      and ( \"Has Two Outpatient Encounters with Advanced Illness on Different Dates of Service\"\n          or \"Has Inpatient Encounter with Advanced Illness\"\n          or \"Has Dementia Medications in Year Before or During Measurement Period\"\n      )\n  )\n    or ( AgeInYearsAt(date from \n        end of \"Measurement Period\"\n      )\u003e= 81\n        and \"Has Criteria Indicating Frailty\"\n    )\n\n","elm":{"library":{"annotation":[{"translatorOptions":"EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion,DisableMethodInvocation","type":"CqlToElmInfo"},{"type":"Annotation","s":{"r":"242","s":[{"value":["","library AdvancedIllnessandFrailtyExclusionECQM version '7.0.000'"]}]}}],"identifier":{"id":"AdvancedIllnessandFrailtyExclusionECQM","version":"7.0.000"},"schemaIdentifier":{"id":"urn:hl7-org:elm","version":"r1"},"usings":{"def":[{"localIdentifier":"System","uri":"urn:hl7-org:elm-types:r1"},{"localId":"1","locator":"3:1-3:23","localIdentifier":"QDM","uri":"urn:healthit-gov:qdm:v5_6","version":"5.6","annotation":[{"type":"Annotation","s":{"r":"1","s":[{"value":["","using "]},{"s":[{"value":["QDM"]}]},{"value":[" version ","'5.6'"]}]}}]}]},"includes":{"def":[{"localId":"2","locator":"5:1-5:64","localIdentifier":"Global","path":"MATGlobalCommonFunctions","version":"7.0.000","annotation":[{"type":"Annotation","s":{"r":"2","s":[{"value":["","include "]},{"s":[{"value":["MATGlobalCommonFunctions"]}]},{"value":[" version ","'7.0.000'"," called ","Global"]}]}}]}]},"parameters":{"def":[{"localId":"24","locator":"26:1-26:49","name":"Measurement Period","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"24","s":[{"value":["","parameter ","\"Measurement Period\""," "]},{"r":"23","s":[{"value":["Interval\u003c"]},{"r":"22","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}}],"parameterTypeSpecifier":{"localId":"23","locator":"26:32-26:49","type":"IntervalTypeSpecifier","pointType":{"localId":"22","locator":"26:41-26:48","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},"codeSystems":{"def":[{"localId":"3","locator":"7:1-7:51","name":"LOINC","id":"2.16.840.1.113883.6.1","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"3","s":[{"value":["","codesystem ","\"LOINC\"",": ","'urn:oid:2.16.840.1.113883.6.1'"]}]}}]},{"localId":"4","locator":"8:1-8:55","name":"SNOMEDCT","id":"2.16.840.1.113883.6.96","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"4","s":[{"value":["","codesystem ","\"SNOMEDCT\"",": ","'urn:oid:2.16.840.1.113883.6.96'"]}]}}]}]},"valueSets":{"def":[{"localId":"5","locator":"10:1-10:78","name":"Acute Inpatient","id":"2.16.840.1.113883.3.464.1003.101.12.1083","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"5","s":[{"value":["","valueset ","\"Acute Inpatient\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1083'"]}]}}]},{"localId":"6","locator":"11:1-11:79","name":"Advanced Illness","id":"2.16.840.1.113883.3.464.1003.110.12.1082","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"6","s":[{"value":["","valueset ","\"Advanced Illness\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.110.12.1082'"]}]}}]},{"localId":"7","locator":"12:1-12:83","name":"Dementia Medications","id":"2.16.840.1.113883.3.464.1003.196.12.1510","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"7","s":[{"value":["","valueset ","\"Dementia Medications\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.196.12.1510'"]}]}}]},{"localId":"8","locator":"13:1-13:89","name":"Emergency Department Visit","id":"2.16.840.1.113883.3.464.1003.101.12.1010","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"8","s":[{"value":["","valueset ","\"Emergency Department Visit\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1010'"]}]}}]},{"localId":"9","locator":"14:1-14:77","name":"Frailty Device","id":"2.16.840.1.113883.3.464.1003.118.12.1300","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"9","s":[{"value":["","valueset ","\"Frailty Device\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.118.12.1300'"]}]}}]},{"localId":"10","locator":"15:1-15:80","name":"Frailty Diagnosis","id":"2.16.840.1.113883.3.464.1003.113.12.1074","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"10","s":[{"value":["","valueset ","\"Frailty Diagnosis\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.113.12.1074'"]}]}}]},{"localId":"11","locator":"16:1-16:80","name":"Frailty Encounter","id":"2.16.840.1.113883.3.464.1003.101.12.1088","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"11","s":[{"value":["","valueset ","\"Frailty Encounter\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1088'"]}]}}]},{"localId":"12","locator":"17:1-17:78","name":"Frailty Symptom","id":"2.16.840.1.113883.3.464.1003.113.12.1075","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"12","s":[{"value":["","valueset ","\"Frailty Symptom\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.113.12.1075'"]}]}}]},{"localId":"13","locator":"18:1-18:81","name":"Nonacute Inpatient","id":"2.16.840.1.113883.3.464.1003.101.12.1084","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"13","s":[{"value":["","valueset ","\"Nonacute Inpatient\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1084'"]}]}}]},{"localId":"14","locator":"19:1-19:74","name":"Observation","id":"2.16.840.1.113883.3.464.1003.101.12.1086","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"14","s":[{"value":["","valueset ","\"Observation\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1086'"]}]}}]},{"localId":"15","locator":"20:1-20:73","name":"Outpatient","id":"2.16.840.1.113883.3.464.1003.101.12.1087","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"15","s":[{"value":["","valueset ","\"Outpatient\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1087'"]}]}}]}]},"codes":{"def":[{"localId":"17","locator":"22:1-22:70","name":"Housing status","id":"71802-3","display":"Housing status","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"17","s":[{"value":["","code ","\"Housing status\"",": ","'71802-3'"," from "]},{"r":"16","s":[{"value":["\"LOINC\""]}]},{"value":[" display ","'Housing status'"]}]}}],"codeSystem":{"localId":"16","locator":"22:39-22:45","name":"LOINC"}},{"localId":"19","locator":"23:1-23:113","name":"Lives in a nursing home (finding)","id":"160734000","display":"Lives in a nursing home (finding)","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"19","s":[{"value":["","code ","\"Lives in a nursing home (finding)\"",": ","'160734000'"," from "]},{"r":"18","s":[{"value":["\"SNOMEDCT\""]}]},{"value":[" display ","'Lives in a nursing home (finding)'"]}]}}],"codeSystem":{"localId":"18","locator":"23:60-23:69","name":"SNOMEDCT"}},{"localId":"21","locator":"24:1-24:86","name":"Medical equipment used","id":"98181-1","display":"Medical equipment used","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"21","s":[{"value":["","code ","\"Medical equipment used\"",": ","'98181-1'"," from "]},{"r":"20","s":[{"value":["\"LOINC\""]}]},{"value":[" display ","'Medical equipment used'"]}]}}],"codeSystem":{"localId":"20","locator":"24:47-24:53","name":"LOINC"}}]},"contexts":{"def":[{"locator":"28:1-28:15","name":"Patient"}]},"statements":{"def":[{"locator":"28:1-28:15","name":"Patient","context":"Patient","expression":{"type":"SingletonFrom","operand":{"locator":"28:1-28:15","dataType":"{urn:healthit-gov:qdm:v5_6}Patient","templateId":"Patient","type":"Retrieve"}}},{"localId":"84","locator":"89:1-105:5","name":"Has Criteria Indicating Frailty","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"84","s":[{"value":["","define ","\"Has Criteria Indicating Frailty\"",":\n  "]},{"r":"83","s":[{"r":"74","s":[{"r":"65","s":[{"r":"56","s":[{"r":"38","s":[{"value":["exists "]},{"r":"37","s":[{"value":["( "]},{"r":"37","s":[{"s":[{"r":"32","s":[{"r":"31","s":[{"r":"31","s":[{"value":["[","\"Device, Order\"",": "]},{"s":[{"value":["\"Frailty Device\""]}]},{"value":["]"]}]}]},{"value":[" ","FrailtyDeviceOrder"]}]}]},{"value":["\n      "]},{"r":"36","s":[{"value":["where "]},{"r":"36","s":[{"r":"34","s":[{"r":"33","s":[{"value":["FrailtyDeviceOrder"]}]},{"value":["."]},{"r":"34","s":[{"value":["authorDatetime"]}]}]},{"r":"36","value":[" ","during day of"," "]},{"r":"35","s":[{"value":["\"Measurement Period\""]}]}]}]}]},{"value":["\n  )"]}]}]},{"value":["\n    or "]},{"r":"55","s":[{"value":["exists "]},{"r":"54","s":[{"value":["( "]},{"r":"54","s":[{"s":[{"r":"40","s":[{"r":"39","s":[{"r":"39","s":[{"value":["[","\"Assessment, Performed\"",": "]},{"s":[{"value":["\"Medical equipment used\""]}]},{"value":["]"]}]}]},{"value":[" ","EquipmentUsed"]}]}]},{"value":["\n        "]},{"r":"53","s":[{"value":["where "]},{"r":"53","s":[{"r":"44","s":[{"r":"42","s":[{"r":"41","s":[{"value":["EquipmentUsed"]}]},{"value":["."]},{"r":"42","s":[{"value":["result"]}]}]},{"value":[" in "]},{"r":"43","s":[{"value":["\"Frailty Device\""]}]}]},{"value":["\n          and "]},{"r":"52","s":[{"r":"50","s":[{"r":"45","s":[{"value":["Global"]}]},{"value":["."]},{"r":"50","s":[{"value":["\"NormalizeInterval\""," ( "]},{"r":"47","s":[{"r":"46","s":[{"value":["EquipmentUsed"]}]},{"value":["."]},{"r":"47","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"49","s":[{"r":"48","s":[{"value":["EquipmentUsed"]}]},{"value":["."]},{"r":"49","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]},{"r":"52","value":[" ","ends during day of"," "]},{"r":"51","s":[{"value":["\"Measurement Period\""]}]}]}]}]}]},{"value":["\n    )"]}]}]}]},{"value":["\n    or "]},{"r":"64","s":[{"value":["exists "]},{"r":"63","s":[{"value":["( "]},{"r":"63","s":[{"s":[{"r":"58","s":[{"r":"57","s":[{"r":"57","s":[{"value":["[","\"Diagnosis\"",": "]},{"s":[{"value":["\"Frailty Diagnosis\""]}]},{"value":["]"]}]}]},{"value":[" ","FrailtyDiagnosis"]}]}]},{"value":["\n        "]},{"r":"62","s":[{"value":["where "]},{"r":"62","s":[{"r":"60","s":[{"r":"59","s":[{"value":["FrailtyDiagnosis"]}]},{"value":["."]},{"r":"60","s":[{"value":["prevalencePeriod"]}]}]},{"r":"62","value":[" ","overlaps"," "]},{"r":"61","s":[{"value":["\"Measurement Period\""]}]}]}]}]},{"value":["\n    )"]}]}]}]},{"value":["\n    or "]},{"r":"73","s":[{"value":["exists "]},{"r":"72","s":[{"value":["( "]},{"r":"72","s":[{"s":[{"r":"67","s":[{"r":"66","s":[{"r":"66","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Frailty Encounter\""]}]},{"value":["]"]}]}]},{"value":[" ","FrailtyEncounter"]}]}]},{"value":["\n        "]},{"r":"71","s":[{"value":["where "]},{"r":"71","s":[{"r":"69","s":[{"r":"68","s":[{"value":["FrailtyEncounter"]}]},{"value":["."]},{"r":"69","s":[{"value":["relevantPeriod"]}]}]},{"r":"71","value":[" ","overlaps"," "]},{"r":"70","s":[{"value":["\"Measurement Period\""]}]}]}]}]},{"value":["\n    )"]}]}]}]},{"value":["\n    or "]},{"r":"82","s":[{"value":["exists "]},{"r":"81","s":[{"value":["( "]},{"r":"81","s":[{"s":[{"r":"76","s":[{"r":"75","s":[{"r":"75","s":[{"value":["[","\"Symptom\"",": "]},{"s":[{"value":["\"Frailty Symptom\""]}]},{"value":["]"]}]}]},{"value":[" ","FrailtySymptom"]}]}]},{"value":["\n        "]},{"r":"80","s":[{"value":["where "]},{"r":"80","s":[{"r":"78","s":[{"r":"77","s":[{"value":["FrailtySymptom"]}]},{"value":["."]},{"r":"78","s":[{"value":["prevalencePeriod"]}]}]},{"r":"80","value":[" ","overlaps"," "]},{"r":"79","s":[{"value":["\"Measurement Period\""]}]}]}]}]},{"value":["\n    )"]}]}]}]}]}}],"expression":{"localId":"83","locator":"90:3-105:5","type":"Or","operand":[{"localId":"74","locator":"90:3-102:5","type":"Or","operand":[{"localId":"65","locator":"90:3-99:5","type":"Or","operand":[{"localId":"56","locator":"90:3-96:5","type":"Or","operand":[{"localId":"38","locator":"90:3-92:3","type":"Exists","operand":{"localId":"37","locator":"90:10-92:3","type":"Query","source":[{"localId":"32","locator":"90:12-90:65","alias":"FrailtyDeviceOrder","expression":{"localId":"31","locator":"90:12-90:46","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveDeviceOrder","templateId":"PositiveDeviceOrder","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"90:30-90:45","name":"Frailty Device","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"36","locator":"91:7-91:80","precision":"Day","type":"In","operand":[{"localId":"34","locator":"91:13-91:45","path":"authorDatetime","scope":"FrailtyDeviceOrder","type":"Property"},{"localId":"35","locator":"91:61-91:80","name":"Measurement Period","type":"ParameterRef"}]}}},{"localId":"55","locator":"93:8-96:5","type":"Exists","operand":{"localId":"54","locator":"93:15-96:5","type":"Query","source":[{"localId":"40","locator":"93:17-93:81","alias":"EquipmentUsed","expression":{"localId":"39","locator":"93:17-93:67","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveAssessmentPerformed","templateId":"PositiveAssessmentPerformed","codeProperty":"code","codeComparator":"~","type":"Retrieve","codes":{"type":"ToList","operand":{"locator":"93:43-93:66","name":"Medical equipment used","type":"CodeRef"}}}}],"relationship":[],"where":{"localId":"53","locator":"94:9-95:145","type":"And","operand":[{"localId":"44","locator":"94:15-94:54","type":"InValueSet","code":{"asType":"{urn:hl7-org:elm-types:r1}Code","type":"As","operand":{"localId":"42","locator":"94:15-94:34","path":"result","scope":"EquipmentUsed","type":"Property"}},"valueset":{"localId":"43","locator":"94:39-94:54","name":"Frailty Device","type":"ValueSetRef"}},{"localId":"52","locator":"95:15-95:145","precision":"Day","type":"In","operand":[{"locator":"95:107-95:110","type":"End","operand":{"localId":"50","locator":"95:15-95:105","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"47","locator":"95:44-95:73","path":"relevantDatetime","scope":"EquipmentUsed","type":"Property"},{"localId":"49","locator":"95:76-95:103","path":"relevantPeriod","scope":"EquipmentUsed","type":"Property"}]}},{"localId":"51","locator":"95:126-95:145","name":"Measurement Period","type":"ParameterRef"}]}]}}}]},{"localId":"64","locator":"97:8-99:5","type":"Exists","operand":{"localId":"63","locator":"97:15-99:5","type":"Query","source":[{"localId":"58","locator":"97:17-97:67","alias":"FrailtyDiagnosis","expression":{"localId":"57","locator":"97:17-97:50","dataType":"{urn:healthit-gov:qdm:v5_6}Diagnosis","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"97:31-97:49","name":"Frailty Diagnosis","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"62","locator":"98:9-98:77","type":"Overlaps","operand":[{"localId":"60","locator":"98:15-98:47","path":"prevalencePeriod","scope":"FrailtyDiagnosis","type":"Property"},{"localId":"61","locator":"98:58-98:77","name":"Measurement Period","type":"ParameterRef"}]}}}]},{"localId":"73","locator":"100:8-102:5","type":"Exists","operand":{"localId":"72","locator":"100:15-102:5","type":"Query","source":[{"localId":"67","locator":"100:17-100:78","alias":"FrailtyEncounter","expression":{"localId":"66","locator":"100:17-100:61","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"100:42-100:60","name":"Frailty Encounter","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"71","locator":"101:9-101:75","type":"Overlaps","operand":[{"localId":"69","locator":"101:15-101:45","path":"relevantPeriod","scope":"FrailtyEncounter","type":"Property"},{"localId":"70","locator":"101:56-101:75","name":"Measurement Period","type":"ParameterRef"}]}}}]},{"localId":"82","locator":"103:8-105:5","type":"Exists","operand":{"localId":"81","locator":"103:15-105:5","type":"Query","source":[{"localId":"76","locator":"103:17-103:61","alias":"FrailtySymptom","expression":{"localId":"75","locator":"103:17-103:46","dataType":"{urn:healthit-gov:qdm:v5_6}Symptom","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"103:29-103:45","name":"Frailty Symptom","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"80","locator":"104:9-104:75","type":"Overlaps","operand":[{"localId":"78","locator":"104:15-104:45","path":"prevalencePeriod","scope":"FrailtySymptom","type":"Property"},{"localId":"79","locator":"104:56-104:75","name":"Measurement Period","type":"ParameterRef"}]}}}]}},{"localId":"115","locator":"54:1-63:34","name":"Outpatient Encounters with Advanced Illness","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"115","s":[{"value":["","define ","\"Outpatient Encounters with Advanced Illness\"",":\n  "]},{"r":"114","s":[{"s":[{"r":"94","s":[{"r":"93","s":[{"value":["( "]},{"r":"93","s":[{"r":"91","s":[{"r":"89","s":[{"r":"87","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Outpatient\""]}]},{"value":["]"]}]},{"value":["\n    union "]},{"r":"88","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Observation\""]}]},{"value":["]"]}]}]},{"value":["\n    union "]},{"r":"90","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":["\n    union "]},{"r":"92","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Nonacute Inpatient\""]}]},{"value":["]"]}]}]},{"value":[" )"]}]},{"value":[" ","OutpatientEncounter"]}]}]},{"value":["\n    "]},{"r":"113","s":[{"value":["where "]},{"r":"113","s":[{"r":"102","s":[{"value":["exists "]},{"r":"101","s":[{"value":["( "]},{"r":"101","s":[{"s":[{"r":"96","s":[{"r":"95","s":[{"s":[{"value":["OutpatientEncounter",".","diagnoses"]}]}]},{"value":[" ","Diagnosis"]}]}]},{"value":["\n        "]},{"r":"100","s":[{"value":["where "]},{"r":"100","s":[{"r":"98","s":[{"r":"97","s":[{"value":["Diagnosis"]}]},{"value":["."]},{"r":"98","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"99","s":[{"value":["\"Advanced Illness\""]}]}]}]}]},{"value":["\n    )"]}]}]},{"value":["\n      and "]},{"r":"112","s":[{"r":"104","s":[{"r":"103","s":[{"value":["OutpatientEncounter"]}]},{"value":["."]},{"r":"104","s":[{"value":["relevantPeriod"]}]}]},{"r":"112","value":[" ","starts during day of"," "]},{"r":"111","s":[{"value":["Interval["]},{"r":"108","s":[{"r":"106","s":[{"value":["start of "]},{"r":"105","s":[{"value":["\"Measurement Period\""]}]}]},{"value":[" - "]},{"r":"107","s":[{"value":["1 ","year"]}]}]},{"value":[", \n      "]},{"r":"110","s":[{"value":["end of "]},{"r":"109","s":[{"value":["\"Measurement Period\""]}]}]},{"value":["]"]}]}]}]}]}]}]}}],"expression":{"localId":"114","locator":"55:3-63:34","type":"Query","source":[{"localId":"94","locator":"55:3-58:78","alias":"OutpatientEncounter","expression":{"localId":"93","locator":"55:3-58:58","type":"Union","operand":[{"localId":"89","locator":"55:5-56:49","type":"Union","operand":[{"localId":"87","locator":"55:5-55:42","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"55:30-55:41","name":"Outpatient","type":"ValueSetRef"}},{"localId":"88","locator":"56:11-56:49","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"56:36-56:48","name":"Observation","type":"ValueSetRef"}}]},{"type":"Union","operand":[{"localId":"90","locator":"57:11-57:64","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"57:36-57:63","name":"Emergency Department Visit","type":"ValueSetRef"}},{"localId":"92","locator":"58:11-58:56","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"58:36-58:55","name":"Nonacute Inpatient","type":"ValueSetRef"}}]}]}}],"relationship":[],"where":{"localId":"113","locator":"59:5-63:34","type":"And","operand":[{"localId":"102","locator":"59:11-61:5","type":"Exists","operand":{"localId":"101","locator":"59:18-61:5","type":"Query","source":[{"localId":"96","locator":"59:20-59:58","alias":"Diagnosis","expression":{"localId":"95","locator":"59:20-59:48","path":"diagnoses","scope":"OutpatientEncounter","type":"Property"}}],"relationship":[],"where":{"localId":"100","locator":"60:9-60:50","type":"InValueSet","code":{"localId":"98","locator":"60:15-60:28","path":"code","scope":"Diagnosis","type":"Property"},"valueset":{"localId":"99","locator":"60:33-60:50","name":"Advanced Illness","type":"ValueSetRef"}}}},{"localId":"112","locator":"62:11-63:34","precision":"Day","type":"In","operand":[{"locator":"62:46-62:51","type":"Start","operand":{"localId":"104","locator":"62:11-62:44","path":"relevantPeriod","scope":"OutpatientEncounter","type":"Property"}},{"localId":"111","locator":"62:67-63:34","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"108","locator":"62:76-62:113","type":"Subtract","operand":[{"localId":"106","locator":"62:76-62:104","type":"Start","operand":{"localId":"105","locator":"62:85-62:104","name":"Measurement Period","type":"ParameterRef"}},{"localId":"107","locator":"62:108-62:113","value":1,"unit":"year","type":"Quantity"}]},"high":{"localId":"110","locator":"63:7-63:33","type":"End","operand":{"localId":"109","locator":"63:14-63:33","name":"Measurement Period","type":"ParameterRef"}}}]}]}}},{"localId":"131","locator":"65:1-73:5","name":"Has Two Outpatient Encounters with Advanced Illness on Different Dates of Service","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"131","s":[{"value":["","define ","\"Has Two Outpatient Encounters with Advanced Illness on Different Dates of Service\"",":\n  "]},{"r":"130","s":[{"value":["exists "]},{"r":"129","s":[{"value":["(\n  "]},{"r":"129","s":[{"s":[{"value":["from\n    "]},{"r":"117","s":[{"r":"116","s":[{"s":[{"value":["\"Outpatient Encounters with Advanced Illness\""]}]}]},{"value":[" ","OutpatientEncounter1"]}]},{"value":[",\n    "]},{"r":"119","s":[{"r":"118","s":[{"s":[{"value":["\"Outpatient Encounters with Advanced Illness\""]}]}]},{"value":[" ","OutpatientEncounter2"]}]}]},{"value":["\n    "]},{"r":"126","s":[{"value":["where "]},{"r":"126","s":[{"r":"121","s":[{"r":"120","s":[{"value":["OutpatientEncounter2"]}]},{"value":["."]},{"r":"121","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"126","s":[{"value":["ends "]},{"r":"125","s":[{"value":["1 ","day"]}]},{"value":[" or more after day of"]}]},{"value":[" \n    "]},{"r":"124","s":[{"value":["end of "]},{"r":"123","s":[{"r":"122","s":[{"value":["OutpatientEncounter1"]}]},{"value":["."]},{"r":"123","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n    "]},{"r":"128","s":[{"value":["return "]},{"r":"127","s":[{"value":["OutpatientEncounter1"]}]}]}]},{"value":["\n    )"]}]}]}]}}],"expression":{"localId":"130","locator":"66:3-73:5","type":"Exists","operand":{"localId":"129","locator":"66:10-73:5","type":"Query","source":[{"localId":"117","locator":"68:5-68:70","alias":"OutpatientEncounter1","expression":{"localId":"116","locator":"68:5-68:49","name":"Outpatient Encounters with Advanced Illness","type":"ExpressionRef"}},{"localId":"119","locator":"69:5-69:70","alias":"OutpatientEncounter2","expression":{"localId":"118","locator":"69:5-69:49","name":"Outpatient Encounters with Advanced Illness","type":"ExpressionRef"}}],"relationship":[],"where":{"localId":"126","locator":"70:5-71:46","precision":"Day","type":"SameOrAfter","operand":[{"locator":"70:47-70:50","type":"End","operand":{"localId":"121","locator":"70:11-70:45","path":"relevantPeriod","scope":"OutpatientEncounter2","type":"Property"}},{"locator":"71:5-71:46","type":"Add","operand":[{"localId":"124","locator":"71:5-71:46","type":"End","operand":{"localId":"123","locator":"71:12-71:46","path":"relevantPeriod","scope":"OutpatientEncounter1","type":"Property"}},{"localId":"125","locator":"70:52-70:56","value":1,"unit":"day","type":"Quantity"}]}]},"return":{"localId":"128","locator":"72:5-72:31","expression":{"localId":"127","locator":"72:12-72:31","name":"OutpatientEncounter1","type":"AliasRef"}}}}},{"localId":"156","locator":"46:1-52:35","name":"Has Inpatient Encounter with Advanced Illness","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"156","s":[{"value":["","define ","\"Has Inpatient Encounter with Advanced Illness\"",":\n  "]},{"r":"155","s":[{"value":["exists"]},{"r":"154","s":[{"value":["( "]},{"r":"154","s":[{"s":[{"r":"134","s":[{"r":"133","s":[{"r":"133","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Acute Inpatient\""]}]},{"value":["]"]}]}]},{"value":[" ","InpatientEncounter"]}]}]},{"value":["\n    "]},{"r":"153","s":[{"value":["where "]},{"r":"153","s":[{"r":"142","s":[{"value":["exists "]},{"r":"141","s":[{"value":["( "]},{"r":"141","s":[{"s":[{"r":"136","s":[{"r":"135","s":[{"s":[{"value":["InpatientEncounter",".","diagnoses"]}]}]},{"value":[" ","Diagnosis"]}]}]},{"value":["\n        "]},{"r":"140","s":[{"value":["where "]},{"r":"140","s":[{"r":"138","s":[{"r":"137","s":[{"value":["Diagnosis"]}]},{"value":["."]},{"r":"138","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"139","s":[{"value":["\"Advanced Illness\""]}]}]}]}]},{"value":["\n    )"]}]}]},{"value":["\n      and "]},{"r":"152","s":[{"r":"144","s":[{"r":"143","s":[{"value":["InpatientEncounter"]}]},{"value":["."]},{"r":"144","s":[{"value":["relevantPeriod"]}]}]},{"r":"152","value":[" ","starts during day of"," "]},{"r":"151","s":[{"value":["Interval["]},{"r":"148","s":[{"r":"146","s":[{"value":["start of "]},{"r":"145","s":[{"value":["\"Measurement Period\""]}]}]},{"value":[" - "]},{"r":"147","s":[{"value":["1 ","year"]}]}]},{"value":[", \n      "]},{"r":"150","s":[{"value":["end of "]},{"r":"149","s":[{"value":["\"Measurement Period\""]}]}]},{"value":["]"]}]}]}]}]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"155","locator":"47:3-52:35","type":"Exists","operand":{"localId":"154","locator":"47:9-52:35","type":"Query","source":[{"localId":"134","locator":"47:11-47:72","alias":"InpatientEncounter","expression":{"localId":"133","locator":"47:11-47:53","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"47:36-47:52","name":"Acute Inpatient","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"153","locator":"48:5-52:34","type":"And","operand":[{"localId":"142","locator":"48:11-50:5","type":"Exists","operand":{"localId":"141","locator":"48:18-50:5","type":"Query","source":[{"localId":"136","locator":"48:20-48:57","alias":"Diagnosis","expression":{"localId":"135","locator":"48:20-48:47","path":"diagnoses","scope":"InpatientEncounter","type":"Property"}}],"relationship":[],"where":{"localId":"140","locator":"49:9-49:50","type":"InValueSet","code":{"localId":"138","locator":"49:15-49:28","path":"code","scope":"Diagnosis","type":"Property"},"valueset":{"localId":"139","locator":"49:33-49:50","name":"Advanced Illness","type":"ValueSetRef"}}}},{"localId":"152","locator":"51:11-52:34","precision":"Day","type":"In","operand":[{"locator":"51:45-51:50","type":"Start","operand":{"localId":"144","locator":"51:11-51:43","path":"relevantPeriod","scope":"InpatientEncounter","type":"Property"}},{"localId":"151","locator":"51:66-52:34","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"148","locator":"51:75-51:112","type":"Subtract","operand":[{"localId":"146","locator":"51:75-51:103","type":"Start","operand":{"localId":"145","locator":"51:84-51:103","name":"Measurement Period","type":"ParameterRef"}},{"localId":"147","locator":"51:107-51:112","value":1,"unit":"year","type":"Quantity"}]},"high":{"localId":"150","locator":"52:7-52:33","type":"End","operand":{"localId":"149","locator":"52:14-52:33","name":"Measurement Period","type":"ParameterRef"}}}]}]}}}},{"localId":"177","locator":"41:1-44:33","name":"Has Dementia Medications in Year Before or During Measurement Period","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"177","s":[{"value":["","define ","\"Has Dementia Medications in Year Before or During Measurement Period\"",":\n  "]},{"r":"176","s":[{"value":["exists "]},{"r":"175","s":[{"value":["("]},{"r":"175","s":[{"s":[{"r":"160","s":[{"r":"159","s":[{"r":"159","s":[{"value":["[","\"Medication, Active\"",": "]},{"s":[{"value":["\"Dementia Medications\""]}]},{"value":["]"]}]}]},{"value":[" ","DementiaMedication"]}]}]},{"value":["\n    "]},{"r":"174","s":[{"value":["where "]},{"r":"174","s":[{"r":"166","s":[{"r":"161","s":[{"value":["Global"]}]},{"value":["."]},{"r":"166","s":[{"value":["\"NormalizeInterval\""," ( "]},{"r":"163","s":[{"r":"162","s":[{"value":["DementiaMedication"]}]},{"value":["."]},{"r":"163","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"165","s":[{"r":"164","s":[{"value":["DementiaMedication"]}]},{"value":["."]},{"r":"165","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]},{"r":"174","value":[" ","overlaps"," "]},{"r":"173","s":[{"value":["Interval["]},{"r":"170","s":[{"r":"168","s":[{"value":["start of "]},{"r":"167","s":[{"value":["\"Measurement Period\""]}]}]},{"value":[" - "]},{"r":"169","s":[{"value":["1 ","year"]}]}]},{"value":[", \n    "]},{"r":"172","s":[{"value":["end of "]},{"r":"171","s":[{"value":["\"Measurement Period\""]}]}]},{"value":["]"]}]}]}]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"176","locator":"42:3-44:33","type":"Exists","operand":{"localId":"175","locator":"42:10-44:33","type":"Query","source":[{"localId":"160","locator":"42:11-42:75","alias":"DementiaMedication","expression":{"localId":"159","locator":"42:11-42:56","dataType":"{urn:healthit-gov:qdm:v5_6}MedicationActive","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"42:34-42:55","name":"Dementia Medications","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"174","locator":"43:5-44:32","type":"Overlaps","operand":[{"localId":"166","locator":"43:11-43:111","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"163","locator":"43:40-43:74","path":"relevantDatetime","scope":"DementiaMedication","type":"Property"},{"localId":"165","locator":"43:77-43:109","path":"relevantPeriod","scope":"DementiaMedication","type":"Property"}]},{"localId":"173","locator":"43:122-44:32","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"170","locator":"43:131-43:168","type":"Subtract","operand":[{"localId":"168","locator":"43:131-43:159","type":"Start","operand":{"localId":"167","locator":"43:140-43:159","name":"Measurement Period","type":"ParameterRef"}},{"localId":"169","locator":"43:163-43:168","value":1,"unit":"year","type":"Quantity"}]},"high":{"localId":"172","locator":"44:5-44:31","type":"End","operand":{"localId":"171","locator":"44:12-44:31","name":"Measurement Period","type":"ParameterRef"}}}]}}}},{"localId":"181","locator":"30:1-39:3","name":"Is Age 66 or Older with Advanced Illness and Frailty","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"181","s":[{"value":["","define ","\"Is Age 66 or Older with Advanced Illness and Frailty\"",":\n  "]},{"r":"180","s":[{"value":["( "]},{"r":"180","s":[{"r":"86","s":[{"r":"30","s":[{"r":"28","s":[{"value":["AgeInYearsAt","("]},{"r":"27","s":[{"value":["date from \n      "]},{"r":"26","s":[{"value":["end of "]},{"r":"25","s":[{"value":["\"Measurement Period\""]}]}]}]},{"value":["\n    )"]}]},{"r":"29","value":["\u003e="," ","66"]}]},{"value":["\n      and "]},{"r":"85","s":[{"value":["\"Has Criteria Indicating Frailty\""]}]}]},{"value":["\n      and "]},{"r":"179","s":[{"value":["( "]},{"r":"179","s":[{"r":"158","s":[{"r":"132","s":[{"value":["\"Has Two Outpatient Encounters with Advanced Illness on Different Dates of Service\""]}]},{"value":["\n          or "]},{"r":"157","s":[{"value":["\"Has Inpatient Encounter with Advanced Illness\""]}]}]},{"value":["\n          or "]},{"r":"178","s":[{"value":["\"Has Dementia Medications in Year Before or During Measurement Period\""]}]}]},{"value":["\n      )"]}]}]},{"value":["\n  )"]}]}]}}],"expression":{"localId":"180","locator":"31:3-39:3","type":"And","operand":[{"localId":"86","locator":"31:5-34:43","type":"And","operand":[{"localId":"30","locator":"31:5-33:10","type":"GreaterOrEqual","operand":[{"localId":"28","locator":"31:5-33:5","precision":"Year","type":"CalculateAgeAt","operand":[{"type":"ToDate","operand":{"path":"birthDatetime","type":"Property","source":{"name":"Patient","type":"ExpressionRef"}}},{"localId":"27","locator":"31:18-32:33","type":"DateFrom","operand":{"localId":"26","locator":"32:7-32:33","type":"End","operand":{"localId":"25","locator":"32:14-32:33","name":"Measurement Period","type":"ParameterRef"}}}]},{"localId":"29","locator":"33:9-33:10","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"66","type":"Literal"}]},{"localId":"85","locator":"34:11-34:43","name":"Has Criteria Indicating Frailty","type":"ExpressionRef"}]},{"localId":"179","locator":"35:11-38:7","type":"Or","operand":[{"localId":"158","locator":"35:13-36:60","type":"Or","operand":[{"localId":"132","locator":"35:13-35:95","name":"Has Two Outpatient Encounters with Advanced Illness on Different Dates of Service","type":"ExpressionRef"},{"localId":"157","locator":"36:14-36:60","name":"Has Inpatient Encounter with Advanced Illness","type":"ExpressionRef"}]},{"localId":"178","locator":"37:14-37:83","name":"Has Dementia Medications in Year Before or During Measurement Period","type":"ExpressionRef"}]}]}},{"localId":"216","locator":"75:1-87:17","name":"Is Age 66 or Older Living Long Term in a Nursing Home","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"216","s":[{"value":["","define ","\"Is Age 66 or Older Living Long Term in a Nursing Home\"",":\n  "]},{"r":"215","s":[{"r":"187","s":[{"value":["( "]},{"r":"187","s":[{"r":"185","s":[{"value":["AgeInYearsAt","("]},{"r":"184","s":[{"value":["date from \n      "]},{"r":"183","s":[{"value":["end of "]},{"r":"182","s":[{"value":["\"Measurement Period\""]}]}]}]},{"value":["\n    )"]}]},{"r":"186","value":["\u003e="," ","66"]}]},{"value":["\n  )"]}]},{"value":["\n    and "]},{"r":"214","s":[{"r":"213","s":[{"value":["( "]},{"r":"213","s":[{"s":[{"r":"208","s":[{"r":"207","s":[{"value":["( "]},{"r":"207","s":[{"value":["Last","("]},{"r":"206","s":[{"s":[{"r":"189","s":[{"r":"188","s":[{"r":"188","s":[{"value":["[","\"Assessment, Performed\"",": "]},{"s":[{"value":["\"Housing status\""]}]},{"value":["]"]}]}]},{"value":[" ","HousingStatus"]}]}]},{"value":["\n          "]},{"r":"198","s":[{"value":["where "]},{"r":"198","s":[{"r":"195","s":[{"r":"190","s":[{"value":["Global"]}]},{"value":["."]},{"r":"195","s":[{"value":["\"NormalizeInterval\"","("]},{"r":"192","s":[{"r":"191","s":[{"value":["HousingStatus"]}]},{"value":["."]},{"r":"192","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"194","s":[{"r":"193","s":[{"value":["HousingStatus"]}]},{"value":["."]},{"r":"194","s":[{"value":["relevantPeriod"]}]}]},{"value":[")"]}]}]},{"r":"198","value":["ends on or before"," \n          "]},{"r":"197","s":[{"value":["end of "]},{"r":"196","s":[{"value":["\"Measurement Period\""]}]}]}]}]},{"value":["\n          "]},{"r":"205","s":[{"value":["sort by \n          "]},{"r":"204","s":[{"r":"203","s":[{"value":["end of "]},{"r":"202","s":[{"r":"199","s":[{"value":["Global"]}]},{"value":["."]},{"r":"202","s":[{"value":["\"NormalizeInterval\"","("]},{"r":"200","s":[{"value":["relevantDatetime"]}]},{"value":[", "]},{"r":"201","s":[{"value":["relevantPeriod"]}]},{"value":[")"]}]}]}]},{"value":["asc"]}]}]}]},{"value":["\n      )"]}]},{"value":[")"]}]},{"value":[" ","LastHousingStatus"]}]}]},{"value":["\n        "]},{"r":"212","s":[{"value":["where "]},{"r":"212","s":[{"r":"210","s":[{"r":"209","s":[{"value":["LastHousingStatus"]}]},{"value":["."]},{"r":"210","s":[{"value":["result"]}]}]},{"value":[" ","~"," "]},{"r":"211","s":[{"value":["\"Lives in a nursing home (finding)\""]}]}]}]}]},{"value":["\n    )"]}]},{"value":[" is not null"]}]}]}]}}],"expression":{"localId":"215","locator":"76:3-87:17","type":"And","operand":[{"localId":"187","locator":"76:3-79:3","type":"GreaterOrEqual","operand":[{"localId":"185","locator":"76:5-78:5","precision":"Year","type":"CalculateAgeAt","operand":[{"type":"ToDate","operand":{"path":"birthDatetime","type":"Property","source":{"name":"Patient","type":"ExpressionRef"}}},{"localId":"184","locator":"76:18-77:33","type":"DateFrom","operand":{"localId":"183","locator":"77:7-77:33","type":"End","operand":{"localId":"182","locator":"77:14-77:33","name":"Measurement Period","type":"ParameterRef"}}}]},{"localId":"186","locator":"78:9-78:10","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"66","type":"Literal"}]},{"localId":"214","locator":"80:9-87:17","type":"Not","operand":{"locator":"80:9-87:17","type":"IsNull","operand":{"localId":"213","locator":"80:9-87:5","type":"Query","source":[{"localId":"208","locator":"80:11-85:26","alias":"LastHousingStatus","expression":{"localId":"207","locator":"80:11-85:8","type":"Last","source":{"localId":"206","locator":"80:18-84:80","type":"Query","source":[{"localId":"189","locator":"80:18-80:74","alias":"HousingStatus","expression":{"localId":"188","locator":"80:18-80:60","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveAssessmentPerformed","templateId":"PositiveAssessmentPerformed","codeProperty":"code","codeComparator":"~","type":"Retrieve","codes":{"type":"ToList","operand":{"locator":"80:44-80:59","name":"Housing status","type":"CodeRef"}}}}],"relationship":[],"where":{"localId":"198","locator":"81:11-82:37","type":"SameOrBefore","operand":[{"locator":"81:105-81:108","type":"End","operand":{"localId":"195","locator":"81:17-81:104","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"192","locator":"81:44-81:73","path":"relevantDatetime","scope":"HousingStatus","type":"Property"},{"localId":"194","locator":"81:76-81:103","path":"relevantPeriod","scope":"HousingStatus","type":"Property"}]}},{"localId":"197","locator":"82:11-82:37","type":"End","operand":{"localId":"196","locator":"82:18-82:37","name":"Measurement Period","type":"ParameterRef"}}]},"sort":{"localId":"205","locator":"83:11-84:80","by":[{"localId":"204","locator":"84:11-84:80","direction":"asc","type":"ByExpression","expression":{"localId":"203","locator":"84:11-84:77","type":"End","operand":{"localId":"202","locator":"84:18-84:77","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"200","locator":"84:45-84:60","name":"relevantDatetime","type":"IdentifierRef"},{"localId":"201","locator":"84:63-84:76","name":"relevantPeriod","type":"IdentifierRef"}]}}}]}}}}],"relationship":[],"where":{"localId":"212","locator":"86:9-86:76","type":"Equivalent","operand":[{"asType":"{urn:hl7-org:elm-types:r1}Code","type":"As","operand":{"localId":"210","locator":"86:15-86:38","path":"result","scope":"LastHousingStatus","type":"Property"}},{"localId":"211","locator":"86:42-86:76","name":"Lives in a nursing home (finding)","type":"CodeRef"}]}}}}]}},{"localId":"242","locator":"107:1-121:5","name":"Is Age 66 to 80 with Advanced Illness and Frailty or Is Age 81 or Older with Frailty","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"242","s":[{"value":["","define ","\"Is Age 66 to 80 with Advanced Illness and Frailty or Is Age 81 or Older with Frailty\"",":\n  "]},{"r":"241","s":[{"r":"232","s":[{"value":["( "]},{"r":"232","s":[{"r":"226","s":[{"r":"224","s":[{"r":"220","s":[{"value":["AgeInYearsAt","("]},{"r":"219","s":[{"value":["date from \n      "]},{"r":"218","s":[{"value":["end of "]},{"r":"217","s":[{"value":["\"Measurement Period\""]}]}]}]},{"value":["\n    )"]}]},{"value":["in "]},{"r":"223","s":[{"r":"221","value":["Interval[","66",", ","80","]"]}]}]},{"value":["\n      and "]},{"r":"225","s":[{"value":["\"Has Criteria Indicating Frailty\""]}]}]},{"value":["\n      and "]},{"r":"231","s":[{"value":["( "]},{"r":"231","s":[{"r":"229","s":[{"r":"227","s":[{"value":["\"Has Two Outpatient Encounters with Advanced Illness on Different Dates of Service\""]}]},{"value":["\n          or "]},{"r":"228","s":[{"value":["\"Has Inpatient Encounter with Advanced Illness\""]}]}]},{"value":["\n          or "]},{"r":"230","s":[{"value":["\"Has Dementia Medications in Year Before or During Measurement Period\""]}]}]},{"value":["\n      )"]}]}]},{"value":["\n  )"]}]},{"value":["\n    or "]},{"r":"240","s":[{"value":["( "]},{"r":"240","s":[{"r":"238","s":[{"r":"236","s":[{"value":["AgeInYearsAt","("]},{"r":"235","s":[{"value":["date from \n        "]},{"r":"234","s":[{"value":["end of "]},{"r":"233","s":[{"value":["\"Measurement Period\""]}]}]}]},{"value":["\n      )"]}]},{"r":"237","value":["\u003e="," ","81"]}]},{"value":["\n        and "]},{"r":"239","s":[{"value":["\"Has Criteria Indicating Frailty\""]}]}]},{"value":["\n    )"]}]}]}]}}],"expression":{"localId":"241","locator":"108:3-121:5","type":"Or","operand":[{"localId":"232","locator":"108:3-116:3","type":"And","operand":[{"localId":"226","locator":"108:5-111:43","type":"And","operand":[{"localId":"224","locator":"108:5-110:24","type":"In","operand":[{"localId":"220","locator":"108:5-110:5","precision":"Year","type":"CalculateAgeAt","operand":[{"type":"ToDate","operand":{"path":"birthDatetime","type":"Property","source":{"name":"Patient","type":"ExpressionRef"}}},{"localId":"219","locator":"108:18-109:33","type":"DateFrom","operand":{"localId":"218","locator":"109:7-109:33","type":"End","operand":{"localId":"217","locator":"109:14-109:33","name":"Measurement Period","type":"ParameterRef"}}}]},{"localId":"223","locator":"110:9-110:24","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"221","locator":"110:18-110:19","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"66","type":"Literal"},"high":{"localId":"222","locator":"110:22-110:23","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"80","type":"Literal"}}]},{"localId":"225","locator":"111:11-111:43","name":"Has Criteria Indicating Frailty","type":"ExpressionRef"}]},{"localId":"231","locator":"112:11-115:7","type":"Or","operand":[{"localId":"229","locator":"112:13-113:60","type":"Or","operand":[{"localId":"227","locator":"112:13-112:95","name":"Has Two Outpatient Encounters with Advanced Illness on Different Dates of Service","type":"ExpressionRef"},{"localId":"228","locator":"113:14-113:60","name":"Has Inpatient Encounter with Advanced Illness","type":"ExpressionRef"}]},{"localId":"230","locator":"114:14-114:83","name":"Has Dementia Medications in Year Before or During Measurement Period","type":"ExpressionRef"}]}]},{"localId":"240","locator":"117:8-121:5","type":"And","operand":[{"localId":"238","locator":"117:10-119:12","type":"GreaterOrEqual","operand":[{"localId":"236","locator":"117:10-119:7","precision":"Year","type":"CalculateAgeAt","operand":[{"type":"ToDate","operand":{"path":"birthDatetime","type":"Property","source":{"name":"Patient","type":"ExpressionRef"}}},{"localId":"235","locator":"117:23-118:35","type":"DateFrom","operand":{"localId":"234","locator":"118:9-118:35","type":"End","operand":{"localId":"233","locator":"118:16-118:35","name":"Measurement Period","type":"ParameterRef"}}}]},{"localId":"237","locator":"119:11-119:12","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"81","type":"Literal"}]},{"localId":"239","locator":"120:13-120:45","name":"Has Criteria Indicating Frailty","type":"ExpressionRef"}]}]}}]}}},"elm_annotations":{"statements":[{"children":[{"children":[{"children":[{"text":"define \"Has Criteria Indicating Frailty\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Device, Order\": "}]},{"children":[{"children":[{"text":"\"Frailty Device\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"31"}],"node_type":"Retrieve","ref_id":"31"},{"children":[{"text":" FrailtyDeviceOrder"}]}],"ref_id":"32"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"FrailtyDeviceOrder"}]}],"ref_id":"33"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"34"}],"node_type":"Property","ref_id":"34"},{"children":[{"text":" during day of "}],"ref_id":"36"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"35"}],"ref_id":"36"}],"ref_id":"36"}],"node_type":"Query","ref_id":"37"},{"children":[{"text":"\n  )"}]}],"node_type":"Query","ref_id":"37"}],"node_type":"Exists","ref_id":"38"},{"children":[{"text":"\n    or "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Assessment, Performed\": "}]},{"children":[{"children":[{"text":"\"Medical equipment used\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"39"}],"node_type":"Retrieve","ref_id":"39"},{"children":[{"text":" EquipmentUsed"}]}],"ref_id":"40"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"EquipmentUsed"}]}],"ref_id":"41"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"result"}]}],"node_type":"Property","ref_id":"42"}],"node_type":"Property","ref_id":"42"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Frailty Device\""}]}],"ref_id":"43"}],"node_type":"InValueSet","ref_id":"44"},{"children":[{"text":"\n          and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"45"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\" ( "}]},{"children":[{"children":[{"children":[{"text":"EquipmentUsed"}]}],"ref_id":"46"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"47"}],"node_type":"Property","ref_id":"47"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"EquipmentUsed"}]}],"ref_id":"48"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"49"}],"node_type":"Property","ref_id":"49"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"50"}],"node_type":"FunctionRef","ref_id":"50"},{"children":[{"text":" ends during day of "}],"node_type":"In","ref_id":"52"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"51"}],"node_type":"In","ref_id":"52"}],"ref_id":"53"}],"ref_id":"53"}],"node_type":"Query","ref_id":"54"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"54"}],"node_type":"Exists","ref_id":"55"}],"node_type":"Or","ref_id":"56"},{"children":[{"text":"\n    or "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Diagnosis\": "}]},{"children":[{"children":[{"text":"\"Frailty Diagnosis\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"57"}],"node_type":"Retrieve","ref_id":"57"},{"children":[{"text":" FrailtyDiagnosis"}]}],"ref_id":"58"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"FrailtyDiagnosis"}]}],"ref_id":"59"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"prevalencePeriod"}]}],"node_type":"Property","ref_id":"60"}],"node_type":"Property","ref_id":"60"},{"children":[{"text":" overlaps "}],"ref_id":"62"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"61"}],"ref_id":"62"}],"ref_id":"62"}],"node_type":"Query","ref_id":"63"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"63"}],"node_type":"Exists","ref_id":"64"}],"node_type":"Or","ref_id":"65"},{"children":[{"text":"\n    or "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Frailty Encounter\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"66"}],"node_type":"Retrieve","ref_id":"66"},{"children":[{"text":" FrailtyEncounter"}]}],"ref_id":"67"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"FrailtyEncounter"}]}],"ref_id":"68"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"69"}],"node_type":"Property","ref_id":"69"},{"children":[{"text":" overlaps "}],"ref_id":"71"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"70"}],"ref_id":"71"}],"ref_id":"71"}],"node_type":"Query","ref_id":"72"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"72"}],"node_type":"Exists","ref_id":"73"}],"node_type":"Or","ref_id":"74"},{"children":[{"text":"\n    or "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Symptom\": "}]},{"children":[{"children":[{"text":"\"Frailty Symptom\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"75"}],"node_type":"Retrieve","ref_id":"75"},{"children":[{"text":" FrailtySymptom"}]}],"ref_id":"76"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"FrailtySymptom"}]}],"ref_id":"77"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"prevalencePeriod"}]}],"node_type":"Property","ref_id":"78"}],"node_type":"Property","ref_id":"78"},{"children":[{"text":" overlaps "}],"ref_id":"80"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"79"}],"ref_id":"80"}],"ref_id":"80"}],"node_type":"Query","ref_id":"81"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"81"}],"node_type":"Exists","ref_id":"82"}],"node_type":"Or","ref_id":"83"}],"ref_id":"84"}],"define_name":"Has Criteria Indicating Frailty"},{"children":[{"children":[{"children":[{"text":"define \"Outpatient Encounters with Advanced Illness\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Outpatient\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"87"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Observation\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"88"}],"node_type":"Union","ref_id":"89"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"90"}],"ref_id":"91"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Nonacute Inpatient\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"92"}],"node_type":"Union","ref_id":"93"},{"children":[{"text":" )"}]}],"node_type":"Union","ref_id":"93"},{"children":[{"text":" OutpatientEncounter"}]}],"ref_id":"94"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"OutpatientEncounter.diagnoses"}]}]}],"node_type":"Property","ref_id":"95"},{"children":[{"text":" Diagnosis"}]}],"ref_id":"96"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Diagnosis"}]}],"ref_id":"97"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"98"}],"ref_id":"98"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Advanced Illness\""}]}],"ref_id":"99"}],"ref_id":"100"}],"ref_id":"100"}],"node_type":"Query","ref_id":"101"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"101"}],"node_type":"Exists","ref_id":"102"},{"children":[{"text":"\n      and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"OutpatientEncounter"}]}],"ref_id":"103"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"104"}],"node_type":"Property","ref_id":"104"},{"children":[{"text":" starts during day of "}],"node_type":"In","ref_id":"112"},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"105"}],"node_type":"Start","ref_id":"106"},{"children":[{"text":" - "}]},{"children":[{"children":[{"text":"1 year"}]}],"node_type":"Quantity","ref_id":"107"}],"ref_id":"108"},{"children":[{"text":", \n      "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"109"}],"ref_id":"110"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"111"}],"node_type":"In","ref_id":"112"}],"ref_id":"113"}],"ref_id":"113"}],"node_type":"Query","ref_id":"114"}],"ref_id":"115"}],"define_name":"Outpatient Encounters with Advanced Illness"},{"children":[{"children":[{"children":[{"text":"define \"Has Two Outpatient Encounters with Advanced Illness on Different Dates of Service\":\n  "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"(\n  "}]},{"children":[{"children":[{"children":[{"text":"from\n    "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"Outpatient Encounters with Advanced Illness\""}]}]}],"node_type":"ExpressionRef","ref_id":"116"},{"children":[{"text":" OutpatientEncounter1"}]}],"ref_id":"117"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"Outpatient Encounters with Advanced Illness\""}]}]}],"node_type":"ExpressionRef","ref_id":"118"},{"children":[{"text":" OutpatientEncounter2"}]}],"ref_id":"119"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"OutpatientEncounter2"}]}],"ref_id":"120"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"121"}],"node_type":"Property","ref_id":"121"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 day"}]}],"node_type":"Quantity","ref_id":"125"},{"children":[{"text":" or more after day of"}]}],"ref_id":"126"},{"children":[{"text":" \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"OutpatientEncounter1"}]}],"ref_id":"122"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"123"}],"node_type":"Property","ref_id":"123"}],"node_type":"End","ref_id":"124"}],"ref_id":"126"}],"ref_id":"126"},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"OutpatientEncounter1"}]}],"node_type":"AliasRef","ref_id":"127"}],"ref_id":"128"}],"node_type":"Query","ref_id":"129"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"129"}],"node_type":"Exists","ref_id":"130"}],"ref_id":"131"}],"define_name":"Has Two Outpatient Encounters with Advanced Illness on Different Dates of Service"},{"children":[{"children":[{"children":[{"text":"define \"Has Inpatient Encounter with Advanced Illness\":\n  "}]},{"children":[{"children":[{"text":"exists"}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Acute Inpatient\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"133"}],"node_type":"Retrieve","ref_id":"133"},{"children":[{"text":" InpatientEncounter"}]}],"ref_id":"134"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"InpatientEncounter.diagnoses"}]}]}],"node_type":"Property","ref_id":"135"},{"children":[{"text":" Diagnosis"}]}],"ref_id":"136"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Diagnosis"}]}],"ref_id":"137"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"138"}],"ref_id":"138"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Advanced Illness\""}]}],"ref_id":"139"}],"ref_id":"140"}],"ref_id":"140"}],"node_type":"Query","ref_id":"141"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"141"}],"node_type":"Exists","ref_id":"142"},{"children":[{"text":"\n      and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"InpatientEncounter"}]}],"ref_id":"143"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"144"}],"node_type":"Property","ref_id":"144"},{"children":[{"text":" starts during day of "}],"node_type":"In","ref_id":"152"},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"145"}],"node_type":"Start","ref_id":"146"},{"children":[{"text":" - "}]},{"children":[{"children":[{"text":"1 year"}]}],"node_type":"Quantity","ref_id":"147"}],"ref_id":"148"},{"children":[{"text":", \n      "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"149"}],"ref_id":"150"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"151"}],"node_type":"In","ref_id":"152"}],"ref_id":"153"}],"ref_id":"153"}],"node_type":"Query","ref_id":"154"},{"children":[{"text":")"}]}],"node_type":"Query","ref_id":"154"}],"node_type":"Exists","ref_id":"155"}],"ref_id":"156"}],"define_name":"Has Inpatient Encounter with Advanced Illness"},{"children":[{"children":[{"children":[{"text":"define \"Has Dementia Medications in Year Before or During Measurement Period\":\n  "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Medication, Active\": "}]},{"children":[{"children":[{"text":"\"Dementia Medications\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"159"}],"node_type":"Retrieve","ref_id":"159"},{"children":[{"text":" DementiaMedication"}]}],"ref_id":"160"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"161"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\" ( "}]},{"children":[{"children":[{"children":[{"text":"DementiaMedication"}]}],"ref_id":"162"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"163"}],"node_type":"Property","ref_id":"163"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"DementiaMedication"}]}],"ref_id":"164"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"165"}],"node_type":"Property","ref_id":"165"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"166"}],"node_type":"FunctionRef","ref_id":"166"},{"children":[{"text":" overlaps "}],"ref_id":"174"},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"167"}],"node_type":"Start","ref_id":"168"},{"children":[{"text":" - "}]},{"children":[{"children":[{"text":"1 year"}]}],"node_type":"Quantity","ref_id":"169"}],"ref_id":"170"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"171"}],"ref_id":"172"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"173"}],"ref_id":"174"}],"ref_id":"174"}],"node_type":"Query","ref_id":"175"},{"children":[{"text":")"}]}],"node_type":"Query","ref_id":"175"}],"node_type":"Exists","ref_id":"176"}],"ref_id":"177"}],"define_name":"Has Dementia Medications in Year Before or During Measurement Period"},{"children":[{"children":[{"children":[{"text":"define \"Is Age 66 or Older with Advanced Illness and Frailty\":\n  "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"AgeInYearsAt("}]},{"children":[{"children":[{"text":"date from \n      "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"25"}],"node_type":"End","ref_id":"26"}],"node_type":"DateFrom","ref_id":"27"},{"children":[{"text":"\n    )"}]}],"node_type":"CalculateAgeAt","ref_id":"28"},{"children":[{"text":"\u003e= 66"}],"node_type":"Literal","ref_id":"29"}],"node_type":"GreaterOrEqual","ref_id":"30"},{"children":[{"text":"\n      and "}]},{"children":[{"children":[{"text":"\"Has Criteria Indicating Frailty\""}]}],"node_type":"ExpressionRef","ref_id":"85"}],"node_type":"And","ref_id":"86"},{"children":[{"text":"\n      and "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"Has Two Outpatient Encounters with Advanced Illness on Different Dates of Service\""}]}],"node_type":"ExpressionRef","ref_id":"132"},{"children":[{"text":"\n          or "}]},{"children":[{"children":[{"text":"\"Has Inpatient Encounter with Advanced Illness\""}]}],"node_type":"ExpressionRef","ref_id":"157"}],"node_type":"Or","ref_id":"158"},{"children":[{"text":"\n          or "}]},{"children":[{"children":[{"text":"\"Has Dementia Medications in Year Before or During Measurement Period\""}]}],"node_type":"ExpressionRef","ref_id":"178"}],"node_type":"Or","ref_id":"179"},{"children":[{"text":"\n      )"}]}],"node_type":"Or","ref_id":"179"}],"node_type":"And","ref_id":"180"},{"children":[{"text":"\n  )"}]}],"node_type":"And","ref_id":"180"}],"ref_id":"181"}],"define_name":"Is Age 66 or Older with Advanced Illness and Frailty"},{"children":[{"children":[{"children":[{"text":"define \"Is Age 66 or Older Living Long Term in a Nursing Home\":\n  "}]},{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"text":"AgeInYearsAt("}]},{"children":[{"children":[{"text":"date from \n      "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"182"}],"node_type":"End","ref_id":"183"}],"node_type":"DateFrom","ref_id":"184"},{"children":[{"text":"\n    )"}]}],"node_type":"CalculateAgeAt","ref_id":"185"},{"children":[{"text":"\u003e= 66"}],"node_type":"Literal","ref_id":"186"}],"node_type":"GreaterOrEqual","ref_id":"187"},{"children":[{"text":"\n  )"}]}],"node_type":"GreaterOrEqual","ref_id":"187"},{"children":[{"text":"\n    and "}]},{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Assessment, Performed\": "}]},{"children":[{"children":[{"text":"\"Housing status\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"188"}],"node_type":"Retrieve","ref_id":"188"},{"children":[{"text":" HousingStatus"}]}],"ref_id":"189"}]},{"children":[{"text":"\n          "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"190"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\"("}]},{"children":[{"children":[{"children":[{"text":"HousingStatus"}]}],"ref_id":"191"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"192"}],"node_type":"Property","ref_id":"192"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"HousingStatus"}]}],"ref_id":"193"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"194"}],"node_type":"Property","ref_id":"194"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"195"}],"node_type":"FunctionRef","ref_id":"195"},{"children":[{"text":"ends on or before \n          "}],"ref_id":"198"},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"196"}],"node_type":"End","ref_id":"197"}],"ref_id":"198"}],"ref_id":"198"},{"children":[{"text":"\n          "}]},{"children":[{"children":[{"text":"sort by \n          "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"199"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\"("}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"IdentifierRef","ref_id":"200"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"201"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"202"}],"node_type":"FunctionRef","ref_id":"202"}],"node_type":"End","ref_id":"203"},{"children":[{"text":"asc"}]}],"ref_id":"204"}],"ref_id":"205"}],"ref_id":"206"},{"children":[{"text":"\n      )"}]}],"node_type":"Last","ref_id":"207"},{"children":[{"text":")"}]}],"node_type":"Last","ref_id":"207"},{"children":[{"text":" LastHousingStatus"}]}],"ref_id":"208"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastHousingStatus"}]}],"ref_id":"209"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"result"}]}],"node_type":"Property","ref_id":"210"}],"node_type":"Property","ref_id":"210"},{"children":[{"text":" ~ "}]},{"children":[{"children":[{"text":"\"Lives in a nursing home (finding)\""}]}],"node_type":"CodeRef","ref_id":"211"}],"ref_id":"212"}],"ref_id":"212"}],"node_type":"Query","ref_id":"213"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"213"},{"children":[{"text":" is not null"}]}],"node_type":"Not","ref_id":"214"}],"node_type":"And","ref_id":"215"}],"ref_id":"216"}],"define_name":"Is Age 66 or Older Living Long Term in a Nursing Home"},{"children":[{"children":[{"children":[{"text":"define \"Is Age 66 to 80 with Advanced Illness and Frailty or Is Age 81 or Older with Frailty\":\n  "}]},{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"AgeInYearsAt("}]},{"children":[{"children":[{"text":"date from \n      "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"217"}],"node_type":"End","ref_id":"218"}],"node_type":"DateFrom","ref_id":"219"},{"children":[{"text":"\n    )"}]}],"node_type":"CalculateAgeAt","ref_id":"220"},{"children":[{"text":"in "}]},{"children":[{"children":[{"text":"Interval[66, 80]"}],"ref_id":"221"}],"node_type":"Interval","ref_id":"223"}],"node_type":"In","ref_id":"224"},{"children":[{"text":"\n      and "}]},{"children":[{"children":[{"text":"\"Has Criteria Indicating Frailty\""}]}],"node_type":"ExpressionRef","ref_id":"225"}],"node_type":"And","ref_id":"226"},{"children":[{"text":"\n      and "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"Has Two Outpatient Encounters with Advanced Illness on Different Dates of Service\""}]}],"node_type":"ExpressionRef","ref_id":"227"},{"children":[{"text":"\n          or "}]},{"children":[{"children":[{"text":"\"Has Inpatient Encounter with Advanced Illness\""}]}],"node_type":"ExpressionRef","ref_id":"228"}],"node_type":"Or","ref_id":"229"},{"children":[{"text":"\n          or "}]},{"children":[{"children":[{"text":"\"Has Dementia Medications in Year Before or During Measurement Period\""}]}],"node_type":"ExpressionRef","ref_id":"230"}],"node_type":"Or","ref_id":"231"},{"children":[{"text":"\n      )"}]}],"node_type":"Or","ref_id":"231"}],"node_type":"And","ref_id":"232"},{"children":[{"text":"\n  )"}]}],"node_type":"And","ref_id":"232"},{"children":[{"text":"\n    or "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"text":"AgeInYearsAt("}]},{"children":[{"children":[{"text":"date from \n        "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"233"}],"node_type":"End","ref_id":"234"}],"node_type":"DateFrom","ref_id":"235"},{"children":[{"text":"\n      )"}]}],"node_type":"CalculateAgeAt","ref_id":"236"},{"children":[{"text":"\u003e= 81"}],"node_type":"Literal","ref_id":"237"}],"node_type":"GreaterOrEqual","ref_id":"238"},{"children":[{"text":"\n        and "}]},{"children":[{"children":[{"text":"\"Has Criteria Indicating Frailty\""}]}],"node_type":"ExpressionRef","ref_id":"239"}],"node_type":"And","ref_id":"240"},{"children":[{"text":"\n    )"}]}],"node_type":"And","ref_id":"240"}],"node_type":"Or","ref_id":"241"}],"ref_id":"242"}],"define_name":"Is Age 66 to 80 with Advanced Illness and Frailty or Is Age 81 or Older with Frailty"}],"identifier":{"id":"AdvancedIllnessandFrailtyExclusionECQM","version":"7.0.000"}},"is_main_library":false,"is_top_level":true,"library_name":"AdvancedIllnessandFrailtyExclusionECQM","library_version":"7.0.000","statement_dependencies":[{"_id":"689263dee8da6d1c0d4f9a6f","statement_name":"Is Age 66 or Older with Advanced Illness and Frailty","statement_references":[{"_id":"689263dee8da6d1c0d4f9a68","hqmf_id":null,"library_name":"AdvancedIllnessandFrailtyExclusionECQM","statement_name":"Patient"},{"_id":"689263dee8da6d1c0d4f9a69","hqmf_id":null,"library_name":"AdvancedIllnessandFrailtyExclusionECQM","statement_name":"Has Criteria Indicating Frailty"},{"_id":"689263dee8da6d1c0d4f9a6a","hqmf_id":null,"library_name":"AdvancedIllnessandFrailtyExclusionECQM","statement_name":"Has Two Outpatient Encounters with Advanced Illness on Different Dates of Service"},{"_id":"689263dee8da6d1c0d4f9a6b","hqmf_id":null,"library_name":"AdvancedIllnessandFrailtyExclusionECQM","statement_name":"Has Inpatient Encounter with Advanced Illness"},{"_id":"689263dee8da6d1c0d4f9a6c","hqmf_id":null,"library_name":"AdvancedIllnessandFrailtyExclusionECQM","statement_name":"Has Dementia Medications in Year Before or During Measurement Period"}]},{"_id":"689263dee8da6d1c0d4f9a70","statement_name":"Patient"},{"_id":"689263dee8da6d1c0d4f9a71","statement_name":"Has Criteria Indicating Frailty","statement_references":[{"_id":"689263efe8da6d1c0d4fa9e4","hqmf_id":null,"library_name":"MATGlobalCommonFunctions","statement_name":"NormalizeInterval"}]},{"_id":"689263dee8da6d1c0d4f9a72","statement_name":"Has Two Outpatient Encounters with Advanced Illness on Different Dates of Service","statement_references":[{"_id":"689263efe8da6d1c0d4fa9e5","hqmf_id":null,"library_name":"AdvancedIllnessandFrailtyExclusionECQM","statement_name":"Outpatient Encounters with Advanced Illness"}]},{"_id":"689263dee8da6d1c0d4f9a73","statement_name":"Outpatient Encounters with Advanced Illness"},{"_id":"689263dee8da6d1c0d4f9a74","statement_name":"Has Inpatient Encounter with Advanced Illness"},{"_id":"689263dee8da6d1c0d4f9a75","statement_name":"Has Dementia Medications in Year Before or During Measurement Period","statement_references":[{"_id":"689263efe8da6d1c0d4fa9e6","hqmf_id":null,"library_name":"MATGlobalCommonFunctions","statement_name":"NormalizeInterval"}]},{"_id":"689263dee8da6d1c0d4f9a76","statement_name":"Is Age 66 or Older Living Long Term in a Nursing Home","statement_references":[{"_id":"689263dee8da6d1c0d4f9a6d","hqmf_id":null,"library_name":"AdvancedIllnessandFrailtyExclusionECQM","statement_name":"Patient"},{"_id":"689263dee8da6d1c0d4f9a6e","hqmf_id":null,"library_name":"MATGlobalCommonFunctions","statement_name":"NormalizeInterval"}]}]},{"_id":"689263dee8da6d1c0d4f9a8e","cql":"library DiabetesEyeExam version '11.0.000'\r\n\r\nusing QDM version '5.6'\r\n\r\ninclude MATGlobalCommonFunctions version '7.0.000' called Global\r\ninclude Hospice version '4.0.000' called Hospice\r\ninclude PalliativeCareExclusionECQM version '2.0.000' called PalliativeCare\r\ninclude AdvancedIllnessandFrailtyExclusionECQM version '7.0.000' called AIFrailLTCF\r\n\r\nvalueset \"Annual Wellness Visit\": 'urn:oid:2.16.840.1.113883.3.526.3.1240'\r\nvalueset \"Diabetes\": 'urn:oid:2.16.840.1.113883.3.464.1003.103.12.1001'\r\nvalueset \"Diabetic Retinopathy\": 'urn:oid:2.16.840.1.113883.3.526.3.327'\r\nvalueset \"Ethnicity\": 'urn:oid:2.16.840.1.114222.4.11.837'\r\nvalueset \"Home Healthcare Services\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1016'\r\nvalueset \"Office Visit\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1001'\r\nvalueset \"ONC Administrative Sex\": 'urn:oid:2.16.840.1.113762.1.4.1'\r\nvalueset \"Ophthalmological Services\": 'urn:oid:2.16.840.1.113883.3.526.3.1285'\r\nvalueset \"Payer\": 'urn:oid:2.16.840.1.114222.4.11.3591'\r\nvalueset \"Preventive Care Services Established Office Visit, 18 and Up\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1025'\r\nvalueset \"Preventive Care Services Initial Office Visit, 18 and Up\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1023'\r\nvalueset \"Race\": 'urn:oid:2.16.840.1.114222.4.11.836'\r\nvalueset \"Retinal or Dilated Eye Exam\": 'urn:oid:2.16.840.1.113883.3.464.1003.115.12.1088'\r\nvalueset \"Telephone Visits\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1080'\r\n\r\nparameter \"Measurement Period\" Interval\u003cDateTime\u003e\r\n\r\ncontext Patient\r\n\r\ndefine \"SDE Ethnicity\":\r\n  [\"Patient Characteristic Ethnicity\": \"Ethnicity\"]\r\n\r\ndefine \"SDE Payer\":\r\n  [\"Patient Characteristic Payer\": \"Payer\"]\r\n\r\ndefine \"SDE Race\":\r\n  [\"Patient Characteristic Race\": \"Race\"]\r\n\r\ndefine \"SDE Sex\":\r\n  [\"Patient Characteristic Sex\": \"ONC Administrative Sex\"]\r\n\r\ndefine \"Denominator\":\r\n  \"Initial Population\"\r\n\r\ndefine \"Numerator\":\r\n  ( \"Diabetic Retinopathy Overlapping Measurement Period\"\r\n      and exists ( \"Retinal Exam in Measurement Period\" )\r\n  )\r\n    or ( not ( \"Diabetic Retinopathy Overlapping Measurement Period\" )\r\n        and exists ( \"Retinal Exam in Measurement Period or Year Prior\" )\r\n    )\r\n\r\ndefine \"Diabetic Retinopathy Overlapping Measurement Period\":\r\n  exists ( [\"Diagnosis\": \"Diabetic Retinopathy\"] Retinopathy\r\n      where Retinopathy.prevalencePeriod overlaps \"Measurement Period\"\r\n  )\r\n\r\ndefine \"Retinal Exam in Measurement Period\":\r\n  [\"Physical Exam, Performed\": \"Retinal or Dilated Eye Exam\"] RetinalExam\r\n    where Global.\"NormalizeInterval\" ( RetinalExam.relevantDatetime, RetinalExam.relevantPeriod ) during day of \"Measurement Period\"\r\n\r\ndefine \"Retinal Exam in Measurement Period or Year Prior\":\r\n  [\"Physical Exam, Performed\": \"Retinal or Dilated Eye Exam\"] RetinalExam\r\n    where Global.\"NormalizeInterval\" ( RetinalExam.relevantDatetime, RetinalExam.relevantPeriod ) during day of Interval[start of \"Measurement Period\" - 1 year, \r\n    end of \"Measurement Period\"]\r\n\r\ndefine \"Initial Population\":\r\n  AgeInYearsAt(date from \r\n    end of \"Measurement Period\"\r\n  )in Interval[18, 75]\r\n    and exists ( \"Qualifying Encounters\" )\r\n    and exists ( [\"Diagnosis\": \"Diabetes\"] Diabetes\r\n        where Diabetes.prevalencePeriod overlaps \"Measurement Period\"\r\n    )\r\n\r\ndefine \"Qualifying Encounters\":\r\n  ( [\"Encounter, Performed\": \"Office Visit\"]\r\n    union [\"Encounter, Performed\": \"Annual Wellness Visit\"]\r\n    union [\"Encounter, Performed\": \"Preventive Care Services Established Office Visit, 18 and Up\"]\r\n    union [\"Encounter, Performed\": \"Preventive Care Services Initial Office Visit, 18 and Up\"]\r\n    union [\"Encounter, Performed\": \"Home Healthcare Services\"]\r\n    union [\"Encounter, Performed\": \"Ophthalmological Services\"]\r\n    union [\"Encounter, Performed\": \"Telephone Visits\"] ) ValidEncounters\r\n    where ValidEncounters.relevantPeriod during day of \"Measurement Period\"\r\n\r\ndefine \"Denominator Exclusions\":\r\n  Hospice.\"Has Hospice Services\"\r\n    or AIFrailLTCF.\"Is Age 66 or Older with Advanced Illness and Frailty\"\r\n    or AIFrailLTCF.\"Is Age 66 or Older Living Long Term in a Nursing Home\"\r\n    or PalliativeCare.\"Palliative Care in the Measurement Period\"","elm":{"library":{"annotation":[{"translatorOptions":"EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion,DisableMethodInvocation","type":"CqlToElmInfo"},{"type":"Annotation","s":{"r":"135","s":[{"value":["","library DiabetesEyeExam version '11.0.000'"]}]}}],"identifier":{"id":"DiabetesEyeExam","version":"11.0.000"},"schemaIdentifier":{"id":"urn:hl7-org:elm","version":"r1"},"usings":{"def":[{"localIdentifier":"System","uri":"urn:hl7-org:elm-types:r1"},{"localId":"1","locator":"3:1-3:23","localIdentifier":"QDM","uri":"urn:healthit-gov:qdm:v5_6","version":"5.6","annotation":[{"type":"Annotation","s":{"r":"1","s":[{"value":["","using "]},{"s":[{"value":["QDM"]}]},{"value":[" version ","'5.6'"]}]}}]}]},"includes":{"def":[{"localId":"2","locator":"5:1-5:64","localIdentifier":"Global","path":"MATGlobalCommonFunctions","version":"7.0.000","annotation":[{"type":"Annotation","s":{"r":"2","s":[{"value":["","include "]},{"s":[{"value":["MATGlobalCommonFunctions"]}]},{"value":[" version ","'7.0.000'"," called ","Global"]}]}}]},{"localId":"3","locator":"6:1-6:48","localIdentifier":"Hospice","path":"Hospice","version":"4.0.000","annotation":[{"type":"Annotation","s":{"r":"3","s":[{"value":["","include "]},{"s":[{"value":["Hospice"]}]},{"value":[" version ","'4.0.000'"," called ","Hospice"]}]}}]},{"localId":"4","locator":"7:1-7:75","localIdentifier":"PalliativeCare","path":"PalliativeCareExclusionECQM","version":"2.0.000","annotation":[{"type":"Annotation","s":{"r":"4","s":[{"value":["","include "]},{"s":[{"value":["PalliativeCareExclusionECQM"]}]},{"value":[" version ","'2.0.000'"," called ","PalliativeCare"]}]}}]},{"localId":"5","locator":"8:1-8:83","localIdentifier":"AIFrailLTCF","path":"AdvancedIllnessandFrailtyExclusionECQM","version":"7.0.000","annotation":[{"type":"Annotation","s":{"r":"5","s":[{"value":["","include "]},{"s":[{"value":["AdvancedIllnessandFrailtyExclusionECQM"]}]},{"value":[" version ","'7.0.000'"," called ","AIFrailLTCF"]}]}}]}]},"parameters":{"def":[{"localId":"22","locator":"25:1-25:49","name":"Measurement Period","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"22","s":[{"value":["","parameter ","\"Measurement Period\""," "]},{"r":"21","s":[{"value":["Interval\u003c"]},{"r":"20","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}}],"parameterTypeSpecifier":{"localId":"21","locator":"25:32-25:49","type":"IntervalTypeSpecifier","pointType":{"localId":"20","locator":"25:41-25:48","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},"valueSets":{"def":[{"localId":"6","locator":"10:1-10:74","name":"Annual Wellness Visit","id":"2.16.840.1.113883.3.526.3.1240","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"6","s":[{"value":["","valueset ","\"Annual Wellness Visit\"",": ","'urn:oid:2.16.840.1.113883.3.526.3.1240'"]}]}}]},{"localId":"7","locator":"11:1-11:71","name":"Diabetes","id":"2.16.840.1.113883.3.464.1003.103.12.1001","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"7","s":[{"value":["","valueset ","\"Diabetes\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.103.12.1001'"]}]}}]},{"localId":"8","locator":"12:1-12:72","name":"Diabetic Retinopathy","id":"2.16.840.1.113883.3.526.3.327","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"8","s":[{"value":["","valueset ","\"Diabetic Retinopathy\"",": ","'urn:oid:2.16.840.1.113883.3.526.3.327'"]}]}}]},{"localId":"9","locator":"13:1-13:58","name":"Ethnicity","id":"2.16.840.1.114222.4.11.837","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"9","s":[{"value":["","valueset ","\"Ethnicity\"",": ","'urn:oid:2.16.840.1.114222.4.11.837'"]}]}}]},{"localId":"10","locator":"14:1-14:87","name":"Home Healthcare Services","id":"2.16.840.1.113883.3.464.1003.101.12.1016","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"10","s":[{"value":["","valueset ","\"Home Healthcare Services\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1016'"]}]}}]},{"localId":"11","locator":"15:1-15:75","name":"Office Visit","id":"2.16.840.1.113883.3.464.1003.101.12.1001","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"11","s":[{"value":["","valueset ","\"Office Visit\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1001'"]}]}}]},{"localId":"12","locator":"16:1-16:68","name":"ONC Administrative Sex","id":"2.16.840.1.113762.1.4.1","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"12","s":[{"value":["","valueset ","\"ONC Administrative Sex\"",": ","'urn:oid:2.16.840.1.113762.1.4.1'"]}]}}]},{"localId":"13","locator":"17:1-17:78","name":"Ophthalmological Services","id":"2.16.840.1.113883.3.526.3.1285","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"13","s":[{"value":["","valueset ","\"Ophthalmological Services\"",": ","'urn:oid:2.16.840.1.113883.3.526.3.1285'"]}]}}]},{"localId":"14","locator":"18:1-18:55","name":"Payer","id":"2.16.840.1.114222.4.11.3591","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"14","s":[{"value":["","valueset ","\"Payer\"",": ","'urn:oid:2.16.840.1.114222.4.11.3591'"]}]}}]},{"localId":"15","locator":"19:1-19:123","name":"Preventive Care Services Established Office Visit, 18 and Up","id":"2.16.840.1.113883.3.464.1003.101.12.1025","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"15","s":[{"value":["","valueset ","\"Preventive Care Services Established Office Visit, 18 and Up\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1025'"]}]}}]},{"localId":"16","locator":"20:1-20:119","name":"Preventive Care Services Initial Office Visit, 18 and Up","id":"2.16.840.1.113883.3.464.1003.101.12.1023","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"16","s":[{"value":["","valueset ","\"Preventive Care Services Initial Office Visit, 18 and Up\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1023'"]}]}}]},{"localId":"17","locator":"21:1-21:53","name":"Race","id":"2.16.840.1.114222.4.11.836","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"17","s":[{"value":["","valueset ","\"Race\"",": ","'urn:oid:2.16.840.1.114222.4.11.836'"]}]}}]},{"localId":"18","locator":"22:1-22:90","name":"Retinal or Dilated Eye Exam","id":"2.16.840.1.113883.3.464.1003.115.12.1088","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"18","s":[{"value":["","valueset ","\"Retinal or Dilated Eye Exam\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.115.12.1088'"]}]}}]},{"localId":"19","locator":"23:1-23:79","name":"Telephone Visits","id":"2.16.840.1.113883.3.464.1003.101.12.1080","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"19","s":[{"value":["","valueset ","\"Telephone Visits\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1080'"]}]}}]}]},"contexts":{"def":[{"locator":"27:1-27:15","name":"Patient"}]},"statements":{"def":[{"locator":"27:1-27:15","name":"Patient","context":"Patient","expression":{"type":"SingletonFrom","operand":{"locator":"27:1-27:15","dataType":"{urn:healthit-gov:qdm:v5_6}Patient","templateId":"Patient","type":"Retrieve"}}},{"localId":"24","locator":"29:1-30:51","name":"SDE Ethnicity","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"24","s":[{"value":["","define ","\"SDE Ethnicity\"",":\n  "]},{"r":"23","s":[{"value":["[","\"Patient Characteristic Ethnicity\"",": "]},{"s":[{"value":["\"Ethnicity\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"23","locator":"30:3-30:51","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicEthnicity","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"30:40-30:50","name":"Ethnicity","type":"ValueSetRef"}}},{"localId":"26","locator":"32:1-33:43","name":"SDE Payer","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"26","s":[{"value":["","define ","\"SDE Payer\"",":\n  "]},{"r":"25","s":[{"value":["[","\"Patient Characteristic Payer\"",": "]},{"s":[{"value":["\"Payer\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"25","locator":"33:3-33:43","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicPayer","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"33:36-33:42","name":"Payer","type":"ValueSetRef"}}},{"localId":"28","locator":"35:1-36:41","name":"SDE Race","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"28","s":[{"value":["","define ","\"SDE Race\"",":\n  "]},{"r":"27","s":[{"value":["[","\"Patient Characteristic Race\"",": "]},{"s":[{"value":["\"Race\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"27","locator":"36:3-36:41","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicRace","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"36:35-36:40","name":"Race","type":"ValueSetRef"}}},{"localId":"30","locator":"38:1-39:58","name":"SDE Sex","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"30","s":[{"value":["","define ","\"SDE Sex\"",":\n  "]},{"r":"29","s":[{"value":["[","\"Patient Characteristic Sex\"",": "]},{"s":[{"value":["\"ONC Administrative Sex\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"29","locator":"39:3-39:58","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicSex","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"39:34-39:57","name":"ONC Administrative Sex","type":"ValueSetRef"}}},{"localId":"58","locator":"75:1-83:75","name":"Qualifying Encounters","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"58","s":[{"value":["","define ","\"Qualifying Encounters\"",":\n  "]},{"r":"57","s":[{"s":[{"r":"52","s":[{"r":"51","s":[{"value":["( "]},{"r":"51","s":[{"r":"49","s":[{"r":"47","s":[{"r":"45","s":[{"r":"43","s":[{"r":"41","s":[{"r":"39","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Office Visit\""]}]},{"value":["]"]}]},{"value":["\n    union "]},{"r":"40","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Annual Wellness Visit\""]}]},{"value":["]"]}]}]},{"value":["\n    union "]},{"r":"42","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Preventive Care Services Established Office Visit, 18 and Up\""]}]},{"value":["]"]}]}]},{"value":["\n    union "]},{"r":"44","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Preventive Care Services Initial Office Visit, 18 and Up\""]}]},{"value":["]"]}]}]},{"value":["\n    union "]},{"r":"46","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Home Healthcare Services\""]}]},{"value":["]"]}]}]},{"value":["\n    union "]},{"r":"48","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Ophthalmological Services\""]}]},{"value":["]"]}]}]},{"value":["\n    union "]},{"r":"50","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Telephone Visits\""]}]},{"value":["]"]}]}]},{"value":[" )"]}]},{"value":[" ","ValidEncounters"]}]}]},{"value":["\n    "]},{"r":"56","s":[{"value":["where "]},{"r":"56","s":[{"r":"54","s":[{"r":"53","s":[{"value":["ValidEncounters"]}]},{"value":["."]},{"r":"54","s":[{"value":["relevantPeriod"]}]}]},{"r":"56","value":[" ","during day of"," "]},{"r":"55","s":[{"value":["\"Measurement Period\""]}]}]}]}]}]}}],"expression":{"localId":"57","locator":"76:3-83:75","type":"Query","source":[{"localId":"52","locator":"76:3-82:72","alias":"ValidEncounters","expression":{"localId":"51","locator":"76:3-82:56","type":"Union","operand":[{"localId":"49","locator":"76:5-81:63","type":"Union","operand":[{"localId":"45","locator":"76:5-79:94","type":"Union","operand":[{"localId":"41","locator":"76:5-77:59","type":"Union","operand":[{"localId":"39","locator":"76:5-76:44","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"76:30-76:43","name":"Office Visit","type":"ValueSetRef"}},{"localId":"40","locator":"77:11-77:59","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"77:36-77:58","name":"Annual Wellness Visit","type":"ValueSetRef"}}]},{"type":"Union","operand":[{"localId":"42","locator":"78:11-78:98","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"78:36-78:97","name":"Preventive Care Services Established Office Visit, 18 and Up","type":"ValueSetRef"}},{"localId":"44","locator":"79:11-79:94","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"79:36-79:93","name":"Preventive Care Services Initial Office Visit, 18 and Up","type":"ValueSetRef"}}]}]},{"type":"Union","operand":[{"localId":"46","locator":"80:11-80:62","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"80:36-80:61","name":"Home Healthcare Services","type":"ValueSetRef"}},{"localId":"48","locator":"81:11-81:63","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"81:36-81:62","name":"Ophthalmological Services","type":"ValueSetRef"}}]}]},{"localId":"50","locator":"82:11-82:54","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"82:36-82:53","name":"Telephone Visits","type":"ValueSetRef"}}]}}],"relationship":[],"where":{"localId":"56","locator":"83:5-83:75","precision":"Day","type":"IncludedIn","operand":[{"localId":"54","locator":"83:11-83:40","path":"relevantPeriod","scope":"ValidEncounters","type":"Property"},{"localId":"55","locator":"83:56-83:75","name":"Measurement Period","type":"ParameterRef"}]}}},{"localId":"71","locator":"66:1-73:5","name":"Initial Population","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"71","s":[{"value":["","define ","\"Initial Population\"",":\n  "]},{"r":"70","s":[{"r":"61","s":[{"r":"38","s":[{"r":"34","s":[{"value":["AgeInYearsAt","("]},{"r":"33","s":[{"value":["date from \n    "]},{"r":"32","s":[{"value":["end of "]},{"r":"31","s":[{"value":["\"Measurement Period\""]}]}]}]},{"value":["\n  )"]}]},{"value":["in "]},{"r":"37","s":[{"r":"35","value":["Interval[","18",", ","75","]"]}]}]},{"value":["\n    and "]},{"r":"60","s":[{"value":["exists "]},{"r":"59","s":[{"value":["( "]},{"r":"59","s":[{"value":["\"Qualifying Encounters\""]}]},{"value":[" )"]}]}]}]},{"value":["\n    and "]},{"r":"69","s":[{"value":["exists "]},{"r":"68","s":[{"value":["( "]},{"r":"68","s":[{"s":[{"r":"63","s":[{"r":"62","s":[{"r":"62","s":[{"value":["[","\"Diagnosis\"",": "]},{"s":[{"value":["\"Diabetes\""]}]},{"value":["]"]}]}]},{"value":[" ","Diabetes"]}]}]},{"value":["\n        "]},{"r":"67","s":[{"value":["where "]},{"r":"67","s":[{"r":"65","s":[{"r":"64","s":[{"value":["Diabetes"]}]},{"value":["."]},{"r":"65","s":[{"value":["prevalencePeriod"]}]}]},{"r":"67","value":[" ","overlaps"," "]},{"r":"66","s":[{"value":["\"Measurement Period\""]}]}]}]}]},{"value":["\n    )"]}]}]}]}]}}],"expression":{"localId":"70","locator":"67:3-73:5","type":"And","operand":[{"localId":"61","locator":"67:3-70:42","type":"And","operand":[{"localId":"38","locator":"67:3-69:22","type":"In","operand":[{"localId":"34","locator":"67:3-69:3","precision":"Year","type":"CalculateAgeAt","operand":[{"type":"ToDate","operand":{"path":"birthDatetime","type":"Property","source":{"name":"Patient","type":"ExpressionRef"}}},{"localId":"33","locator":"67:16-68:31","type":"DateFrom","operand":{"localId":"32","locator":"68:5-68:31","type":"End","operand":{"localId":"31","locator":"68:12-68:31","name":"Measurement Period","type":"ParameterRef"}}}]},{"localId":"37","locator":"69:7-69:22","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"35","locator":"69:16-69:17","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"18","type":"Literal"},"high":{"localId":"36","locator":"69:20-69:21","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"75","type":"Literal"}}]},{"localId":"60","locator":"70:9-70:42","type":"Exists","operand":{"localId":"59","locator":"70:16-70:42","name":"Qualifying Encounters","type":"ExpressionRef"}}]},{"localId":"69","locator":"71:9-73:5","type":"Exists","operand":{"localId":"68","locator":"71:16-73:5","type":"Query","source":[{"localId":"63","locator":"71:18-71:51","alias":"Diabetes","expression":{"localId":"62","locator":"71:18-71:42","dataType":"{urn:healthit-gov:qdm:v5_6}Diagnosis","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"71:32-71:41","name":"Diabetes","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"67","locator":"72:9-72:69","type":"Overlaps","operand":[{"localId":"65","locator":"72:15-72:39","path":"prevalencePeriod","scope":"Diabetes","type":"Property"},{"localId":"66","locator":"72:50-72:69","name":"Measurement Period","type":"ParameterRef"}]}}}]}},{"localId":"73","locator":"41:1-42:22","name":"Denominator","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"73","s":[{"value":["","define ","\"Denominator\"",":\n  "]},{"r":"72","s":[{"value":["\"Initial Population\""]}]}]}}],"expression":{"localId":"72","locator":"42:3-42:22","name":"Initial Population","type":"ExpressionRef"}},{"localId":"82","locator":"52:1-55:3","name":"Diabetic Retinopathy Overlapping Measurement Period","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"82","s":[{"value":["","define ","\"Diabetic Retinopathy Overlapping Measurement Period\"",":\n  "]},{"r":"81","s":[{"value":["exists "]},{"r":"80","s":[{"value":["( "]},{"r":"80","s":[{"s":[{"r":"75","s":[{"r":"74","s":[{"r":"74","s":[{"value":["[","\"Diagnosis\"",": "]},{"s":[{"value":["\"Diabetic Retinopathy\""]}]},{"value":["]"]}]}]},{"value":[" ","Retinopathy"]}]}]},{"value":["\n      "]},{"r":"79","s":[{"value":["where "]},{"r":"79","s":[{"r":"77","s":[{"r":"76","s":[{"value":["Retinopathy"]}]},{"value":["."]},{"r":"77","s":[{"value":["prevalencePeriod"]}]}]},{"r":"79","value":[" ","overlaps"," "]},{"r":"78","s":[{"value":["\"Measurement Period\""]}]}]}]}]},{"value":["\n  )"]}]}]}]}}],"expression":{"localId":"81","locator":"53:3-55:3","type":"Exists","operand":{"localId":"80","locator":"53:10-55:3","type":"Query","source":[{"localId":"75","locator":"53:12-53:60","alias":"Retinopathy","expression":{"localId":"74","locator":"53:12-53:48","dataType":"{urn:healthit-gov:qdm:v5_6}Diagnosis","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"53:26-53:47","name":"Diabetic Retinopathy","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"79","locator":"54:7-54:70","type":"Overlaps","operand":[{"localId":"77","locator":"54:13-54:40","path":"prevalencePeriod","scope":"Retinopathy","type":"Property"},{"localId":"78","locator":"54:51-54:70","name":"Measurement Period","type":"ParameterRef"}]}}}},{"localId":"95","locator":"57:1-59:132","name":"Retinal Exam in Measurement Period","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"95","s":[{"value":["","define ","\"Retinal Exam in Measurement Period\"",":\n  "]},{"r":"94","s":[{"s":[{"r":"85","s":[{"r":"84","s":[{"r":"84","s":[{"value":["[","\"Physical Exam, Performed\"",": "]},{"s":[{"value":["\"Retinal or Dilated Eye Exam\""]}]},{"value":["]"]}]}]},{"value":[" ","RetinalExam"]}]}]},{"value":["\n    "]},{"r":"93","s":[{"value":["where "]},{"r":"93","s":[{"r":"91","s":[{"r":"86","s":[{"value":["Global"]}]},{"value":["."]},{"r":"91","s":[{"value":["\"NormalizeInterval\""," ( "]},{"r":"88","s":[{"r":"87","s":[{"value":["RetinalExam"]}]},{"value":["."]},{"r":"88","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"90","s":[{"r":"89","s":[{"value":["RetinalExam"]}]},{"value":["."]},{"r":"90","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]},{"r":"93","value":[" ","during day of"," "]},{"r":"92","s":[{"value":["\"Measurement Period\""]}]}]}]}]}]}}],"expression":{"localId":"94","locator":"58:3-59:132","type":"Query","source":[{"localId":"85","locator":"58:3-58:73","alias":"RetinalExam","expression":{"localId":"84","locator":"58:3-58:61","dataType":"{urn:healthit-gov:qdm:v5_6}PositivePhysicalExamPerformed","templateId":"PositivePhysicalExamPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"58:32-58:60","name":"Retinal or Dilated Eye Exam","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"93","locator":"59:5-59:132","precision":"Day","type":"IncludedIn","operand":[{"localId":"91","locator":"59:11-59:97","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"88","locator":"59:40-59:67","path":"relevantDatetime","scope":"RetinalExam","type":"Property"},{"localId":"90","locator":"59:70-59:95","path":"relevantPeriod","scope":"RetinalExam","type":"Property"}]},{"localId":"92","locator":"59:113-59:132","name":"Measurement Period","type":"ParameterRef"}]}}},{"localId":"118","locator":"61:1-64:32","name":"Retinal Exam in Measurement Period or Year Prior","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"118","s":[{"value":["","define ","\"Retinal Exam in Measurement Period or Year Prior\"",":\n  "]},{"r":"117","s":[{"s":[{"r":"102","s":[{"r":"101","s":[{"r":"101","s":[{"value":["[","\"Physical Exam, Performed\"",": "]},{"s":[{"value":["\"Retinal or Dilated Eye Exam\""]}]},{"value":["]"]}]}]},{"value":[" ","RetinalExam"]}]}]},{"value":["\n    "]},{"r":"116","s":[{"value":["where "]},{"r":"116","s":[{"r":"108","s":[{"r":"103","s":[{"value":["Global"]}]},{"value":["."]},{"r":"108","s":[{"value":["\"NormalizeInterval\""," ( "]},{"r":"105","s":[{"r":"104","s":[{"value":["RetinalExam"]}]},{"value":["."]},{"r":"105","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"107","s":[{"r":"106","s":[{"value":["RetinalExam"]}]},{"value":["."]},{"r":"107","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]},{"r":"116","value":[" ","during day of"," "]},{"r":"115","s":[{"value":["Interval["]},{"r":"112","s":[{"r":"110","s":[{"value":["start of "]},{"r":"109","s":[{"value":["\"Measurement Period\""]}]}]},{"value":[" - "]},{"r":"111","s":[{"value":["1 ","year"]}]}]},{"value":[", \n    "]},{"r":"114","s":[{"value":["end of "]},{"r":"113","s":[{"value":["\"Measurement Period\""]}]}]},{"value":["]"]}]}]}]}]}]}}],"expression":{"localId":"117","locator":"62:3-64:32","type":"Query","source":[{"localId":"102","locator":"62:3-62:73","alias":"RetinalExam","expression":{"localId":"101","locator":"62:3-62:61","dataType":"{urn:healthit-gov:qdm:v5_6}PositivePhysicalExamPerformed","templateId":"PositivePhysicalExamPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"62:32-62:60","name":"Retinal or Dilated Eye Exam","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"116","locator":"63:5-64:32","precision":"Day","type":"IncludedIn","operand":[{"localId":"108","locator":"63:11-63:97","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"105","locator":"63:40-63:67","path":"relevantDatetime","scope":"RetinalExam","type":"Property"},{"localId":"107","locator":"63:70-63:95","path":"relevantPeriod","scope":"RetinalExam","type":"Property"}]},{"localId":"115","locator":"63:113-64:32","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"112","locator":"63:122-63:159","type":"Subtract","operand":[{"localId":"110","locator":"63:122-63:150","type":"Start","operand":{"localId":"109","locator":"63:131-63:150","name":"Measurement Period","type":"ParameterRef"}},{"localId":"111","locator":"63:154-63:159","value":1,"unit":"year","type":"Quantity"}]},"high":{"localId":"114","locator":"64:5-64:31","type":"End","operand":{"localId":"113","locator":"64:12-64:31","name":"Measurement Period","type":"ParameterRef"}}}]}}},{"localId":"123","locator":"44:1-50:5","name":"Numerator","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"123","s":[{"value":["","define ","\"Numerator\"",":\n  "]},{"r":"122","s":[{"r":"98","s":[{"value":["( "]},{"r":"98","s":[{"r":"83","s":[{"value":["\"Diabetic Retinopathy Overlapping Measurement Period\""]}]},{"value":["\n      and "]},{"r":"97","s":[{"value":["exists "]},{"r":"96","s":[{"value":["( "]},{"r":"96","s":[{"value":["\"Retinal Exam in Measurement Period\""]}]},{"value":[" )"]}]}]}]},{"value":["\n  )"]}]},{"value":["\n    or "]},{"r":"121","s":[{"value":["( "]},{"r":"121","s":[{"r":"100","s":[{"value":["not "]},{"r":"99","s":[{"value":["( "]},{"r":"99","s":[{"value":["\"Diabetic Retinopathy Overlapping Measurement Period\""]}]},{"value":[" )"]}]}]},{"value":["\n        and "]},{"r":"120","s":[{"value":["exists "]},{"r":"119","s":[{"value":["( "]},{"r":"119","s":[{"value":["\"Retinal Exam in Measurement Period or Year Prior\""]}]},{"value":[" )"]}]}]}]},{"value":["\n    )"]}]}]}]}}],"expression":{"localId":"122","locator":"45:3-50:5","type":"Or","operand":[{"localId":"98","locator":"45:3-47:3","type":"And","operand":[{"localId":"83","locator":"45:5-45:57","name":"Diabetic Retinopathy Overlapping Measurement Period","type":"ExpressionRef"},{"localId":"97","locator":"46:11-46:57","type":"Exists","operand":{"localId":"96","locator":"46:18-46:57","name":"Retinal Exam in Measurement Period","type":"ExpressionRef"}}]},{"localId":"121","locator":"48:8-50:5","type":"And","operand":[{"localId":"100","locator":"48:10-48:70","type":"Not","operand":{"localId":"99","locator":"48:14-48:70","name":"Diabetic Retinopathy Overlapping Measurement Period","type":"ExpressionRef"}},{"localId":"120","locator":"49:13-49:73","type":"Exists","operand":{"localId":"119","locator":"49:20-49:73","name":"Retinal Exam in Measurement Period or Year Prior","type":"ExpressionRef"}}]}]}},{"localId":"135","locator":"85:1-89:65","name":"Denominator Exclusions","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"135","s":[{"value":["","define ","\"Denominator Exclusions\"",":\n  "]},{"r":"134","s":[{"r":"131","s":[{"r":"128","s":[{"r":"125","s":[{"r":"124","s":[{"value":["Hospice"]}]},{"value":["."]},{"r":"125","s":[{"value":["\"Has Hospice Services\""]}]}]},{"value":["\n    or "]},{"r":"127","s":[{"r":"126","s":[{"value":["AIFrailLTCF"]}]},{"value":["."]},{"r":"127","s":[{"value":["\"Is Age 66 or Older with Advanced Illness and Frailty\""]}]}]}]},{"value":["\n    or "]},{"r":"130","s":[{"r":"129","s":[{"value":["AIFrailLTCF"]}]},{"value":["."]},{"r":"130","s":[{"value":["\"Is Age 66 or Older Living Long Term in a Nursing Home\""]}]}]}]},{"value":["\n    or "]},{"r":"133","s":[{"r":"132","s":[{"value":["PalliativeCare"]}]},{"value":["."]},{"r":"133","s":[{"value":["\"Palliative Care in the Measurement Period\""]}]}]}]}]}}],"expression":{"localId":"134","locator":"86:3-89:65","type":"Or","operand":[{"localId":"131","locator":"86:3-88:74","type":"Or","operand":[{"localId":"128","locator":"86:3-87:73","type":"Or","operand":[{"localId":"125","locator":"86:3-86:32","name":"Has Hospice Services","libraryName":"Hospice","type":"ExpressionRef"},{"localId":"127","locator":"87:8-87:73","name":"Is Age 66 or Older with Advanced Illness and Frailty","libraryName":"AIFrailLTCF","type":"ExpressionRef"}]},{"localId":"130","locator":"88:8-88:74","name":"Is Age 66 or Older Living Long Term in a Nursing Home","libraryName":"AIFrailLTCF","type":"ExpressionRef"}]},{"localId":"133","locator":"89:8-89:65","name":"Palliative Care in the Measurement Period","libraryName":"PalliativeCare","type":"ExpressionRef"}]}}]}}},"elm_annotations":{"statements":[{"children":[{"children":[{"children":[{"text":"define \"SDE Ethnicity\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Ethnicity\": "}]},{"children":[{"children":[{"text":"\"Ethnicity\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"23"}],"ref_id":"24"}],"define_name":"SDE Ethnicity"},{"children":[{"children":[{"children":[{"text":"define \"SDE Payer\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Payer\": "}]},{"children":[{"children":[{"text":"\"Payer\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"25"}],"ref_id":"26"}],"define_name":"SDE Payer"},{"children":[{"children":[{"children":[{"text":"define \"SDE Race\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Race\": "}]},{"children":[{"children":[{"text":"\"Race\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"27"}],"ref_id":"28"}],"define_name":"SDE Race"},{"children":[{"children":[{"children":[{"text":"define \"SDE Sex\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Sex\": "}]},{"children":[{"children":[{"text":"\"ONC Administrative Sex\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"29"}],"ref_id":"30"}],"define_name":"SDE Sex"},{"children":[{"children":[{"children":[{"text":"define \"Qualifying Encounters\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Office Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"39"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Annual Wellness Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"40"}],"node_type":"Union","ref_id":"41"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Preventive Care Services Established Office Visit, 18 and Up\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"42"}],"ref_id":"43"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Preventive Care Services Initial Office Visit, 18 and Up\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"44"}],"node_type":"Union","ref_id":"45"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Home Healthcare Services\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"46"}],"ref_id":"47"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Ophthalmological Services\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"48"}],"node_type":"Union","ref_id":"49"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Telephone Visits\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"50"}],"node_type":"Union","ref_id":"51"},{"children":[{"text":" )"}]}],"node_type":"Union","ref_id":"51"},{"children":[{"text":" ValidEncounters"}]}],"ref_id":"52"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"ValidEncounters"}]}],"ref_id":"53"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"54"}],"node_type":"Property","ref_id":"54"},{"children":[{"text":" during day of "}],"ref_id":"56"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"55"}],"ref_id":"56"}],"ref_id":"56"}],"node_type":"Query","ref_id":"57"}],"ref_id":"58"}],"define_name":"Qualifying Encounters"},{"children":[{"children":[{"children":[{"text":"define \"Initial Population\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"AgeInYearsAt("}]},{"children":[{"children":[{"text":"date from \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"31"}],"node_type":"End","ref_id":"32"}],"node_type":"DateFrom","ref_id":"33"},{"children":[{"text":"\n  )"}]}],"node_type":"CalculateAgeAt","ref_id":"34"},{"children":[{"text":"in "}]},{"children":[{"children":[{"text":"Interval[18, 75]"}],"ref_id":"35"}],"node_type":"Interval","ref_id":"37"}],"node_type":"In","ref_id":"38"},{"children":[{"text":"\n    and "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"\"Qualifying Encounters\""}]}],"node_type":"ExpressionRef","ref_id":"59"},{"children":[{"text":" )"}]}],"node_type":"ExpressionRef","ref_id":"59"}],"node_type":"Exists","ref_id":"60"}],"node_type":"And","ref_id":"61"},{"children":[{"text":"\n    and "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Diagnosis\": "}]},{"children":[{"children":[{"text":"\"Diabetes\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"62"}],"node_type":"Retrieve","ref_id":"62"},{"children":[{"text":" Diabetes"}]}],"ref_id":"63"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Diabetes"}]}],"ref_id":"64"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"prevalencePeriod"}]}],"node_type":"Property","ref_id":"65"}],"node_type":"Property","ref_id":"65"},{"children":[{"text":" overlaps "}],"ref_id":"67"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"66"}],"ref_id":"67"}],"ref_id":"67"}],"node_type":"Query","ref_id":"68"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"68"}],"node_type":"Exists","ref_id":"69"}],"node_type":"And","ref_id":"70"}],"ref_id":"71"}],"define_name":"Initial Population"},{"children":[{"children":[{"children":[{"text":"define \"Denominator\":\n  "}]},{"children":[{"children":[{"text":"\"Initial Population\""}]}],"node_type":"ExpressionRef","ref_id":"72"}],"ref_id":"73"}],"define_name":"Denominator"},{"children":[{"children":[{"children":[{"text":"define \"Diabetic Retinopathy Overlapping Measurement Period\":\n  "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Diagnosis\": "}]},{"children":[{"children":[{"text":"\"Diabetic Retinopathy\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"74"}],"node_type":"Retrieve","ref_id":"74"},{"children":[{"text":" Retinopathy"}]}],"ref_id":"75"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Retinopathy"}]}],"ref_id":"76"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"prevalencePeriod"}]}],"node_type":"Property","ref_id":"77"}],"node_type":"Property","ref_id":"77"},{"children":[{"text":" overlaps "}],"ref_id":"79"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"78"}],"ref_id":"79"}],"ref_id":"79"}],"node_type":"Query","ref_id":"80"},{"children":[{"text":"\n  )"}]}],"node_type":"Query","ref_id":"80"}],"node_type":"Exists","ref_id":"81"}],"ref_id":"82"}],"define_name":"Diabetic Retinopathy Overlapping Measurement Period"},{"children":[{"children":[{"children":[{"text":"define \"Retinal Exam in Measurement Period\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Physical Exam, Performed\": "}]},{"children":[{"children":[{"text":"\"Retinal or Dilated Eye Exam\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"84"}],"node_type":"Retrieve","ref_id":"84"},{"children":[{"text":" RetinalExam"}]}],"ref_id":"85"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"86"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\" ( "}]},{"children":[{"children":[{"children":[{"text":"RetinalExam"}]}],"ref_id":"87"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"88"}],"node_type":"Property","ref_id":"88"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"RetinalExam"}]}],"ref_id":"89"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"90"}],"node_type":"Property","ref_id":"90"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"91"}],"node_type":"FunctionRef","ref_id":"91"},{"children":[{"text":" during day of "}],"ref_id":"93"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"92"}],"ref_id":"93"}],"ref_id":"93"}],"node_type":"Query","ref_id":"94"}],"ref_id":"95"}],"define_name":"Retinal Exam in Measurement Period"},{"children":[{"children":[{"children":[{"text":"define \"Retinal Exam in Measurement Period or Year Prior\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Physical Exam, Performed\": "}]},{"children":[{"children":[{"text":"\"Retinal or Dilated Eye Exam\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"101"}],"node_type":"Retrieve","ref_id":"101"},{"children":[{"text":" RetinalExam"}]}],"ref_id":"102"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"103"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\" ( "}]},{"children":[{"children":[{"children":[{"text":"RetinalExam"}]}],"ref_id":"104"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"105"}],"node_type":"Property","ref_id":"105"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"RetinalExam"}]}],"ref_id":"106"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"107"}],"node_type":"Property","ref_id":"107"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"108"}],"node_type":"FunctionRef","ref_id":"108"},{"children":[{"text":" during day of "}],"ref_id":"116"},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"109"}],"node_type":"Start","ref_id":"110"},{"children":[{"text":" - "}]},{"children":[{"children":[{"text":"1 year"}]}],"node_type":"Quantity","ref_id":"111"}],"ref_id":"112"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"113"}],"ref_id":"114"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"115"}],"ref_id":"116"}],"ref_id":"116"}],"node_type":"Query","ref_id":"117"}],"ref_id":"118"}],"define_name":"Retinal Exam in Measurement Period or Year Prior"},{"children":[{"children":[{"children":[{"text":"define \"Numerator\":\n  "}]},{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"text":"\"Diabetic Retinopathy Overlapping Measurement Period\""}]}],"node_type":"ExpressionRef","ref_id":"83"},{"children":[{"text":"\n      and "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"\"Retinal Exam in Measurement Period\""}]}],"node_type":"ExpressionRef","ref_id":"96"},{"children":[{"text":" )"}]}],"node_type":"ExpressionRef","ref_id":"96"}],"node_type":"Exists","ref_id":"97"}],"node_type":"And","ref_id":"98"},{"children":[{"text":"\n  )"}]}],"node_type":"And","ref_id":"98"},{"children":[{"text":"\n    or "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"text":"not "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"\"Diabetic Retinopathy Overlapping Measurement Period\""}]}],"node_type":"ExpressionRef","ref_id":"99"},{"children":[{"text":" )"}]}],"node_type":"ExpressionRef","ref_id":"99"}],"node_type":"Not","ref_id":"100"},{"children":[{"text":"\n        and "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"\"Retinal Exam in Measurement Period or Year Prior\""}]}],"node_type":"ExpressionRef","ref_id":"119"},{"children":[{"text":" )"}]}],"node_type":"ExpressionRef","ref_id":"119"}],"node_type":"Exists","ref_id":"120"}],"node_type":"And","ref_id":"121"},{"children":[{"text":"\n    )"}]}],"node_type":"And","ref_id":"121"}],"node_type":"Or","ref_id":"122"}],"ref_id":"123"}],"define_name":"Numerator"},{"children":[{"children":[{"children":[{"text":"define \"Denominator Exclusions\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Hospice"}]}],"ref_id":"124"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"Has Hospice Services\""}]}],"node_type":"ExpressionRef","ref_id":"125"}],"node_type":"ExpressionRef","ref_id":"125"},{"children":[{"text":"\n    or "}]},{"children":[{"children":[{"children":[{"text":"AIFrailLTCF"}]}],"ref_id":"126"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"Is Age 66 or Older with Advanced Illness and Frailty\""}]}],"node_type":"ExpressionRef","ref_id":"127"}],"node_type":"ExpressionRef","ref_id":"127"}],"node_type":"Or","ref_id":"128"},{"children":[{"text":"\n    or "}]},{"children":[{"children":[{"children":[{"text":"AIFrailLTCF"}]}],"ref_id":"129"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"Is Age 66 or Older Living Long Term in a Nursing Home\""}]}],"node_type":"ExpressionRef","ref_id":"130"}],"node_type":"ExpressionRef","ref_id":"130"}],"node_type":"Or","ref_id":"131"},{"children":[{"text":"\n    or "}]},{"children":[{"children":[{"children":[{"text":"PalliativeCare"}]}],"ref_id":"132"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"Palliative Care in the Measurement Period\""}]}],"node_type":"ExpressionRef","ref_id":"133"}],"node_type":"ExpressionRef","ref_id":"133"}],"node_type":"Or","ref_id":"134"}],"ref_id":"135"}],"define_name":"Denominator Exclusions"}],"identifier":{"id":"DiabetesEyeExam","version":"11.0.000"}},"is_main_library":true,"is_top_level":true,"library_name":"DiabetesEyeExam","library_version":"11.0.000","statement_dependencies":[{"_id":"689263dee8da6d1c0d4f9a80","statement_name":"Patient"},{"_id":"689263dee8da6d1c0d4f9a81","statement_name":"SDE Ethnicity"},{"_id":"689263dee8da6d1c0d4f9a82","statement_name":"SDE Payer"},{"_id":"689263dee8da6d1c0d4f9a83","statement_name":"SDE Race"},{"_id":"689263dee8da6d1c0d4f9a84","statement_name":"SDE Sex"},{"_id":"689263dee8da6d1c0d4f9a85","statement_name":"Qualifying Encounters"},{"_id":"689263dee8da6d1c0d4f9a86","statement_name":"Initial Population","statement_references":[{"_id":"689263dee8da6d1c0d4f9a77","hqmf_id":null,"library_name":"DiabetesEyeExam","statement_name":"Patient"},{"_id":"689263dee8da6d1c0d4f9a78","hqmf_id":null,"library_name":"DiabetesEyeExam","statement_name":"Qualifying Encounters"}]},{"_id":"689263dee8da6d1c0d4f9a87","statement_name":"Denominator","statement_references":[{"_id":"689263efe8da6d1c0d4fa9e7","hqmf_id":null,"library_name":"DiabetesEyeExam","statement_name":"Initial Population"}]},{"_id":"689263dee8da6d1c0d4f9a88","statement_name":"Diabetic Retinopathy Overlapping Measurement Period"},{"_id":"689263dee8da6d1c0d4f9a89","statement_name":"Retinal Exam in Measurement Period","statement_references":[{"_id":"689263efe8da6d1c0d4fa9e8","hqmf_id":null,"library_name":"MATGlobalCommonFunctions","statement_name":"NormalizeInterval"}]},{"_id":"689263dee8da6d1c0d4f9a8a","statement_name":"Retinal Exam in Measurement Period or Year Prior","statement_references":[{"_id":"689263efe8da6d1c0d4fa9e9","hqmf_id":null,"library_name":"MATGlobalCommonFunctions","statement_name":"NormalizeInterval"}]},{"_id":"689263dee8da6d1c0d4f9a8b","statement_name":"Numerator","statement_references":[{"_id":"689263dee8da6d1c0d4f9a79","hqmf_id":null,"library_name":"DiabetesEyeExam","statement_name":"Diabetic Retinopathy Overlapping Measurement Period"},{"_id":"689263dee8da6d1c0d4f9a7a","hqmf_id":null,"library_name":"DiabetesEyeExam","statement_name":"Retinal Exam in Measurement Period"},{"_id":"689263dee8da6d1c0d4f9a7b","hqmf_id":null,"library_name":"DiabetesEyeExam","statement_name":"Retinal Exam in Measurement Period or Year Prior"}]},{"_id":"689263dee8da6d1c0d4f9a8c","statement_name":"Denominator Exclusions","statement_references":[{"_id":"689263dee8da6d1c0d4f9a7c","hqmf_id":null,"library_name":"Hospice","statement_name":"Has Hospice Services"},{"_id":"689263dee8da6d1c0d4f9a7d","hqmf_id":null,"library_name":"AdvancedIllnessandFrailtyExclusionECQM","statement_name":"Is Age 66 or Older with Advanced Illness and Frailty"},{"_id":"689263dee8da6d1c0d4f9a7e","hqmf_id":null,"library_name":"AdvancedIllnessandFrailtyExclusionECQM","statement_name":"Is Age 66 or Older Living Long Term in a Nursing Home"},{"_id":"689263dee8da6d1c0d4f9a7f","hqmf_id":null,"library_name":"PalliativeCareExclusionECQM","statement_name":"Palliative Care in the Measurement Period"}]}]},{"_id":"689263dee8da6d1c0d4f9a8f","cql":"library Hospice version '4.0.000'\n\nusing QDM version '5.6'\n\ninclude MATGlobalCommonFunctions version '7.0.000' called Global\n\ncodesystem \"SNOMEDCT\": 'urn:oid:2.16.840.1.113883.6.96' \ncodesystem \"LOINC\": 'urn:oid:2.16.840.1.113883.6.1' \n\nvalueset \"Encounter Inpatient\": 'urn:oid:2.16.840.1.113883.3.666.5.307' \nvalueset \"Hospice Care Ambulatory\": 'urn:oid:2.16.840.1.113883.3.526.3.1584' \nvalueset \"Hospice Encounter\": 'urn:oid:2.16.840.1.113883.3.464.1003.1003' \n\ncode \"Discharge to healthcare facility for hospice care (procedure)\": '428371000124100' from \"SNOMEDCT\" display 'Discharge to healthcare facility for hospice care (procedure)'\ncode \"Discharge to home for hospice care (procedure)\": '428361000124107' from \"SNOMEDCT\" display 'Discharge to home for hospice care (procedure)'\ncode \"Hospice care [Minimum Data Set]\": '45755-6' from \"LOINC\" display 'Hospice care [Minimum Data Set]'\ncode \"Yes (qualifier value)\": '373066001' from \"SNOMEDCT\" display 'Yes (qualifier value)'\n\nparameter \"Measurement Period\" Interval\u003cDateTime\u003e\n\ncontext Patient\n\ndefine \"Has Hospice Services\":\n  exists ( [\"Encounter, Performed\": \"Encounter Inpatient\"] InpatientEncounter\n      where ( InpatientEncounter.dischargeDisposition ~ \"Discharge to home for hospice care (procedure)\"\n          or InpatientEncounter.dischargeDisposition ~ \"Discharge to healthcare facility for hospice care (procedure)\"\n      )\n        and InpatientEncounter.relevantPeriod ends during day of \"Measurement Period\"\n  )\n    or exists ( [\"Encounter, Performed\": \"Hospice Encounter\"] HospiceEncounter\n        where HospiceEncounter.relevantPeriod overlaps \"Measurement Period\"\n    )\n    or exists ( [\"Assessment, Performed\": \"Hospice care [Minimum Data Set]\"] HospiceAssessment\n        where HospiceAssessment.result ~ \"Yes (qualifier value)\"\n          and Global.\"NormalizeInterval\" ( HospiceAssessment.relevantDatetime, HospiceAssessment.relevantPeriod ) overlaps \"Measurement Period\"\n    )\n    or exists ( [\"Intervention, Order\": \"Hospice Care Ambulatory\"] HospiceOrder\n        where HospiceOrder.authorDatetime during day of \"Measurement Period\"\n    )\n    or exists ( [\"Intervention, Performed\": \"Hospice Care Ambulatory\"] HospicePerformed\n        where Global.\"NormalizeInterval\" ( HospicePerformed.relevantDatetime, HospicePerformed.relevantPeriod ) overlaps \"Measurement Period\"\n    )\n\n","elm":{"library":{"annotation":[{"translatorOptions":"EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion,DisableMethodInvocation","type":"CqlToElmInfo"},{"type":"Annotation","s":{"r":"86","s":[{"value":["","library Hospice version '4.0.000'"]}]}}],"identifier":{"id":"Hospice","version":"4.0.000"},"schemaIdentifier":{"id":"urn:hl7-org:elm","version":"r1"},"usings":{"def":[{"localIdentifier":"System","uri":"urn:hl7-org:elm-types:r1"},{"localId":"1","locator":"3:1-3:23","localIdentifier":"QDM","uri":"urn:healthit-gov:qdm:v5_6","version":"5.6","annotation":[{"type":"Annotation","s":{"r":"1","s":[{"value":["","using "]},{"s":[{"value":["QDM"]}]},{"value":[" version ","'5.6'"]}]}}]}]},"includes":{"def":[{"localId":"2","locator":"5:1-5:64","localIdentifier":"Global","path":"MATGlobalCommonFunctions","version":"7.0.000","annotation":[{"type":"Annotation","s":{"r":"2","s":[{"value":["","include "]},{"s":[{"value":["MATGlobalCommonFunctions"]}]},{"value":[" version ","'7.0.000'"," called ","Global"]}]}}]}]},"parameters":{"def":[{"localId":"18","locator":"19:1-19:49","name":"Measurement Period","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"18","s":[{"value":["","parameter ","\"Measurement Period\""," "]},{"r":"17","s":[{"value":["Interval\u003c"]},{"r":"16","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}}],"parameterTypeSpecifier":{"localId":"17","locator":"19:32-19:49","type":"IntervalTypeSpecifier","pointType":{"localId":"16","locator":"19:41-19:48","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},"codeSystems":{"def":[{"localId":"3","locator":"7:1-7:55","name":"SNOMEDCT","id":"2.16.840.1.113883.6.96","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"3","s":[{"value":["","codesystem ","\"SNOMEDCT\"",": ","'urn:oid:2.16.840.1.113883.6.96'"]}]}}]},{"localId":"4","locator":"8:1-8:51","name":"LOINC","id":"2.16.840.1.113883.6.1","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"4","s":[{"value":["","codesystem ","\"LOINC\"",": ","'urn:oid:2.16.840.1.113883.6.1'"]}]}}]}]},"valueSets":{"def":[{"localId":"5","locator":"10:1-10:71","name":"Encounter Inpatient","id":"2.16.840.1.113883.3.666.5.307","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"5","s":[{"value":["","valueset ","\"Encounter Inpatient\"",": ","'urn:oid:2.16.840.1.113883.3.666.5.307'"]}]}}]},{"localId":"6","locator":"11:1-11:76","name":"Hospice Care Ambulatory","id":"2.16.840.1.113883.3.526.3.1584","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"6","s":[{"value":["","valueset ","\"Hospice Care Ambulatory\"",": ","'urn:oid:2.16.840.1.113883.3.526.3.1584'"]}]}}]},{"localId":"7","locator":"12:1-12:73","name":"Hospice Encounter","id":"2.16.840.1.113883.3.464.1003.1003","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"7","s":[{"value":["","valueset ","\"Hospice Encounter\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.1003'"]}]}}]}]},"codes":{"def":[{"localId":"9","locator":"14:1-14:175","name":"Discharge to healthcare facility for hospice care (procedure)","id":"428371000124100","display":"Discharge to healthcare facility for hospice care (procedure)","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"9","s":[{"value":["","code ","\"Discharge to healthcare facility for hospice care (procedure)\"",": ","'428371000124100'"," from "]},{"r":"8","s":[{"value":["\"SNOMEDCT\""]}]},{"value":[" display ","'Discharge to healthcare facility for hospice care (procedure)'"]}]}}],"codeSystem":{"localId":"8","locator":"14:94-14:103","name":"SNOMEDCT"}},{"localId":"11","locator":"15:1-15:145","name":"Discharge to home for hospice care (procedure)","id":"428361000124107","display":"Discharge to home for hospice care (procedure)","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"11","s":[{"value":["","code ","\"Discharge to home for hospice care (procedure)\"",": ","'428361000124107'"," from "]},{"r":"10","s":[{"value":["\"SNOMEDCT\""]}]},{"value":[" display ","'Discharge to home for hospice care (procedure)'"]}]}}],"codeSystem":{"localId":"10","locator":"15:79-15:88","name":"SNOMEDCT"}},{"localId":"13","locator":"16:1-16:104","name":"Hospice care [Minimum Data Set]","id":"45755-6","display":"Hospice care [Minimum Data Set]","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"13","s":[{"value":["","code ","\"Hospice care [Minimum Data Set]\"",": ","'45755-6'"," from "]},{"r":"12","s":[{"value":["\"LOINC\""]}]},{"value":[" display ","'Hospice care [Minimum Data Set]'"]}]}}],"codeSystem":{"localId":"12","locator":"16:56-16:62","name":"LOINC"}},{"localId":"15","locator":"17:1-17:89","name":"Yes (qualifier value)","id":"373066001","display":"Yes (qualifier value)","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"15","s":[{"value":["","code ","\"Yes (qualifier value)\"",": ","'373066001'"," from "]},{"r":"14","s":[{"value":["\"SNOMEDCT\""]}]},{"value":[" display ","'Yes (qualifier value)'"]}]}}],"codeSystem":{"localId":"14","locator":"17:48-17:57","name":"SNOMEDCT"}}]},"contexts":{"def":[{"locator":"21:1-21:15","name":"Patient"}]},"statements":{"def":[{"locator":"21:1-21:15","name":"Patient","context":"Patient","expression":{"type":"SingletonFrom","operand":{"locator":"21:1-21:15","dataType":"{urn:healthit-gov:qdm:v5_6}Patient","templateId":"Patient","type":"Retrieve"}}},{"localId":"86","locator":"23:1-42:5","name":"Has Hospice Services","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"86","s":[{"value":["","define ","\"Has Hospice Services\"",":\n  "]},{"r":"85","s":[{"r":"72","s":[{"r":"63","s":[{"r":"45","s":[{"r":"36","s":[{"value":["exists "]},{"r":"35","s":[{"value":["( "]},{"r":"35","s":[{"s":[{"r":"20","s":[{"r":"19","s":[{"r":"19","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Encounter Inpatient\""]}]},{"value":["]"]}]}]},{"value":[" ","InpatientEncounter"]}]}]},{"value":["\n      "]},{"r":"34","s":[{"value":["where "]},{"r":"34","s":[{"r":"29","s":[{"value":["( "]},{"r":"29","s":[{"r":"24","s":[{"r":"22","s":[{"r":"21","s":[{"value":["InpatientEncounter"]}]},{"value":["."]},{"r":"22","s":[{"value":["dischargeDisposition"]}]}]},{"value":[" ","~"," "]},{"r":"23","s":[{"value":["\"Discharge to home for hospice care (procedure)\""]}]}]},{"value":["\n          or "]},{"r":"28","s":[{"r":"26","s":[{"r":"25","s":[{"value":["InpatientEncounter"]}]},{"value":["."]},{"r":"26","s":[{"value":["dischargeDisposition"]}]}]},{"value":[" ","~"," "]},{"r":"27","s":[{"value":["\"Discharge to healthcare facility for hospice care (procedure)\""]}]}]}]},{"value":["\n      )"]}]},{"value":["\n        and "]},{"r":"33","s":[{"r":"31","s":[{"r":"30","s":[{"value":["InpatientEncounter"]}]},{"value":["."]},{"r":"31","s":[{"value":["relevantPeriod"]}]}]},{"r":"33","value":[" ","ends during day of"," "]},{"r":"32","s":[{"value":["\"Measurement Period\""]}]}]}]}]}]},{"value":["\n  )"]}]}]},{"value":["\n    or "]},{"r":"44","s":[{"value":["exists "]},{"r":"43","s":[{"value":["( "]},{"r":"43","s":[{"s":[{"r":"38","s":[{"r":"37","s":[{"r":"37","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Hospice Encounter\""]}]},{"value":["]"]}]}]},{"value":[" ","HospiceEncounter"]}]}]},{"value":["\n        "]},{"r":"42","s":[{"value":["where "]},{"r":"42","s":[{"r":"40","s":[{"r":"39","s":[{"value":["HospiceEncounter"]}]},{"value":["."]},{"r":"40","s":[{"value":["relevantPeriod"]}]}]},{"r":"42","value":[" ","overlaps"," "]},{"r":"41","s":[{"value":["\"Measurement Period\""]}]}]}]}]},{"value":["\n    )"]}]}]}]},{"value":["\n    or "]},{"r":"62","s":[{"value":["exists "]},{"r":"61","s":[{"value":["( "]},{"r":"61","s":[{"s":[{"r":"47","s":[{"r":"46","s":[{"r":"46","s":[{"value":["[","\"Assessment, Performed\"",": "]},{"s":[{"value":["\"Hospice care [Minimum Data Set]\""]}]},{"value":["]"]}]}]},{"value":[" ","HospiceAssessment"]}]}]},{"value":["\n        "]},{"r":"60","s":[{"value":["where "]},{"r":"60","s":[{"r":"51","s":[{"r":"49","s":[{"r":"48","s":[{"value":["HospiceAssessment"]}]},{"value":["."]},{"r":"49","s":[{"value":["result"]}]}]},{"value":[" ","~"," "]},{"r":"50","s":[{"value":["\"Yes (qualifier value)\""]}]}]},{"value":["\n          and "]},{"r":"59","s":[{"r":"57","s":[{"r":"52","s":[{"value":["Global"]}]},{"value":["."]},{"r":"57","s":[{"value":["\"NormalizeInterval\""," ( "]},{"r":"54","s":[{"r":"53","s":[{"value":["HospiceAssessment"]}]},{"value":["."]},{"r":"54","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"56","s":[{"r":"55","s":[{"value":["HospiceAssessment"]}]},{"value":["."]},{"r":"56","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]},{"r":"59","value":[" ","overlaps"," "]},{"r":"58","s":[{"value":["\"Measurement Period\""]}]}]}]}]}]},{"value":["\n    )"]}]}]}]},{"value":["\n    or "]},{"r":"71","s":[{"value":["exists "]},{"r":"70","s":[{"value":["( "]},{"r":"70","s":[{"s":[{"r":"65","s":[{"r":"64","s":[{"r":"64","s":[{"value":["[","\"Intervention, Order\"",": "]},{"s":[{"value":["\"Hospice Care Ambulatory\""]}]},{"value":["]"]}]}]},{"value":[" ","HospiceOrder"]}]}]},{"value":["\n        "]},{"r":"69","s":[{"value":["where "]},{"r":"69","s":[{"r":"67","s":[{"r":"66","s":[{"value":["HospiceOrder"]}]},{"value":["."]},{"r":"67","s":[{"value":["authorDatetime"]}]}]},{"r":"69","value":[" ","during day of"," "]},{"r":"68","s":[{"value":["\"Measurement Period\""]}]}]}]}]},{"value":["\n    )"]}]}]}]},{"value":["\n    or "]},{"r":"84","s":[{"value":["exists "]},{"r":"83","s":[{"value":["( "]},{"r":"83","s":[{"s":[{"r":"74","s":[{"r":"73","s":[{"r":"73","s":[{"value":["[","\"Intervention, Performed\"",": "]},{"s":[{"value":["\"Hospice Care Ambulatory\""]}]},{"value":["]"]}]}]},{"value":[" ","HospicePerformed"]}]}]},{"value":["\n        "]},{"r":"82","s":[{"value":["where "]},{"r":"82","s":[{"r":"80","s":[{"r":"75","s":[{"value":["Global"]}]},{"value":["."]},{"r":"80","s":[{"value":["\"NormalizeInterval\""," ( "]},{"r":"77","s":[{"r":"76","s":[{"value":["HospicePerformed"]}]},{"value":["."]},{"r":"77","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"79","s":[{"r":"78","s":[{"value":["HospicePerformed"]}]},{"value":["."]},{"r":"79","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]},{"r":"82","value":[" ","overlaps"," "]},{"r":"81","s":[{"value":["\"Measurement Period\""]}]}]}]}]},{"value":["\n    )"]}]}]}]}]}}],"expression":{"localId":"85","locator":"24:3-42:5","type":"Or","operand":[{"localId":"72","locator":"24:3-39:5","type":"Or","operand":[{"localId":"63","locator":"24:3-36:5","type":"Or","operand":[{"localId":"45","locator":"24:3-32:5","type":"Or","operand":[{"localId":"36","locator":"24:3-29:3","type":"Exists","operand":{"localId":"35","locator":"24:10-29:3","type":"Query","source":[{"localId":"20","locator":"24:12-24:77","alias":"InpatientEncounter","expression":{"localId":"19","locator":"24:12-24:58","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"24:37-24:57","name":"Encounter Inpatient","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"34","locator":"25:7-28:85","type":"And","operand":[{"localId":"29","locator":"25:13-27:7","type":"Or","operand":[{"localId":"24","locator":"25:15-25:104","type":"Equivalent","operand":[{"localId":"22","locator":"25:15-25:53","path":"dischargeDisposition","scope":"InpatientEncounter","type":"Property"},{"localId":"23","locator":"25:57-25:104","name":"Discharge to home for hospice care (procedure)","type":"CodeRef"}]},{"localId":"28","locator":"26:14-26:118","type":"Equivalent","operand":[{"localId":"26","locator":"26:14-26:52","path":"dischargeDisposition","scope":"InpatientEncounter","type":"Property"},{"localId":"27","locator":"26:56-26:118","name":"Discharge to healthcare facility for hospice care (procedure)","type":"CodeRef"}]}]},{"localId":"33","locator":"28:13-28:85","precision":"Day","type":"In","operand":[{"locator":"28:47-28:50","type":"End","operand":{"localId":"31","locator":"28:13-28:45","path":"relevantPeriod","scope":"InpatientEncounter","type":"Property"}},{"localId":"32","locator":"28:66-28:85","name":"Measurement Period","type":"ParameterRef"}]}]}}},{"localId":"44","locator":"30:8-32:5","type":"Exists","operand":{"localId":"43","locator":"30:15-32:5","type":"Query","source":[{"localId":"38","locator":"30:17-30:78","alias":"HospiceEncounter","expression":{"localId":"37","locator":"30:17-30:61","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"30:42-30:60","name":"Hospice Encounter","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"42","locator":"31:9-31:75","type":"Overlaps","operand":[{"localId":"40","locator":"31:15-31:45","path":"relevantPeriod","scope":"HospiceEncounter","type":"Property"},{"localId":"41","locator":"31:56-31:75","name":"Measurement Period","type":"ParameterRef"}]}}}]},{"localId":"62","locator":"33:8-36:5","type":"Exists","operand":{"localId":"61","locator":"33:15-36:5","type":"Query","source":[{"localId":"47","locator":"33:17-33:94","alias":"HospiceAssessment","expression":{"localId":"46","locator":"33:17-33:76","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveAssessmentPerformed","templateId":"PositiveAssessmentPerformed","codeProperty":"code","codeComparator":"~","type":"Retrieve","codes":{"type":"ToList","operand":{"locator":"33:43-33:75","name":"Hospice care [Minimum Data Set]","type":"CodeRef"}}}}],"relationship":[],"where":{"localId":"60","locator":"34:9-35:143","type":"And","operand":[{"localId":"51","locator":"34:15-34:64","type":"Equivalent","operand":[{"asType":"{urn:hl7-org:elm-types:r1}Code","type":"As","operand":{"localId":"49","locator":"34:15-34:38","path":"result","scope":"HospiceAssessment","type":"Property"}},{"localId":"50","locator":"34:42-34:64","name":"Yes (qualifier value)","type":"CodeRef"}]},{"localId":"59","locator":"35:15-35:143","type":"Overlaps","operand":[{"localId":"57","locator":"35:15-35:113","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"54","locator":"35:44-35:77","path":"relevantDatetime","scope":"HospiceAssessment","type":"Property"},{"localId":"56","locator":"35:80-35:111","path":"relevantPeriod","scope":"HospiceAssessment","type":"Property"}]},{"localId":"58","locator":"35:124-35:143","name":"Measurement Period","type":"ParameterRef"}]}]}}}]},{"localId":"71","locator":"37:8-39:5","type":"Exists","operand":{"localId":"70","locator":"37:15-39:5","type":"Query","source":[{"localId":"65","locator":"37:17-37:79","alias":"HospiceOrder","expression":{"localId":"64","locator":"37:17-37:66","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveInterventionOrder","templateId":"PositiveInterventionOrder","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"37:41-37:65","name":"Hospice Care Ambulatory","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"69","locator":"38:9-38:76","precision":"Day","type":"In","operand":[{"localId":"67","locator":"38:15-38:41","path":"authorDatetime","scope":"HospiceOrder","type":"Property"},{"localId":"68","locator":"38:57-38:76","name":"Measurement Period","type":"ParameterRef"}]}}}]},{"localId":"84","locator":"40:8-42:5","type":"Exists","operand":{"localId":"83","locator":"40:15-42:5","type":"Query","source":[{"localId":"74","locator":"40:17-40:87","alias":"HospicePerformed","expression":{"localId":"73","locator":"40:17-40:70","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveInterventionPerformed","templateId":"PositiveInterventionPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"40:45-40:69","name":"Hospice Care Ambulatory","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"82","locator":"41:9-41:141","type":"Overlaps","operand":[{"localId":"80","locator":"41:15-41:111","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"77","locator":"41:44-41:76","path":"relevantDatetime","scope":"HospicePerformed","type":"Property"},{"localId":"79","locator":"41:79-41:109","path":"relevantPeriod","scope":"HospicePerformed","type":"Property"}]},{"localId":"81","locator":"41:122-41:141","name":"Measurement Period","type":"ParameterRef"}]}}}]}}]}}},"elm_annotations":{"statements":[{"children":[{"children":[{"children":[{"text":"define \"Has Hospice Services\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Encounter Inpatient\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"19"}],"node_type":"Retrieve","ref_id":"19"},{"children":[{"text":" InpatientEncounter"}]}],"ref_id":"20"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"InpatientEncounter"}]}],"ref_id":"21"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"dischargeDisposition"}]}],"node_type":"Property","ref_id":"22"}],"node_type":"Property","ref_id":"22"},{"children":[{"text":" ~ "}]},{"children":[{"children":[{"text":"\"Discharge to home for hospice care (procedure)\""}]}],"node_type":"CodeRef","ref_id":"23"}],"node_type":"Equivalent","ref_id":"24"},{"children":[{"text":"\n          or "}]},{"children":[{"children":[{"children":[{"children":[{"text":"InpatientEncounter"}]}],"ref_id":"25"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"dischargeDisposition"}]}],"node_type":"Property","ref_id":"26"}],"node_type":"Property","ref_id":"26"},{"children":[{"text":" ~ "}]},{"children":[{"children":[{"text":"\"Discharge to healthcare facility for hospice care (procedure)\""}]}],"node_type":"CodeRef","ref_id":"27"}],"node_type":"Equivalent","ref_id":"28"}],"node_type":"Or","ref_id":"29"},{"children":[{"text":"\n      )"}]}],"node_type":"Or","ref_id":"29"},{"children":[{"text":"\n        and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"InpatientEncounter"}]}],"ref_id":"30"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"31"}],"node_type":"Property","ref_id":"31"},{"children":[{"text":" ends during day of "}],"node_type":"In","ref_id":"33"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"32"}],"node_type":"In","ref_id":"33"}],"ref_id":"34"}],"ref_id":"34"}],"node_type":"Query","ref_id":"35"},{"children":[{"text":"\n  )"}]}],"node_type":"Query","ref_id":"35"}],"node_type":"Exists","ref_id":"36"},{"children":[{"text":"\n    or "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Hospice Encounter\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"37"}],"node_type":"Retrieve","ref_id":"37"},{"children":[{"text":" HospiceEncounter"}]}],"ref_id":"38"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"HospiceEncounter"}]}],"ref_id":"39"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"40"}],"node_type":"Property","ref_id":"40"},{"children":[{"text":" overlaps "}],"ref_id":"42"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"41"}],"ref_id":"42"}],"ref_id":"42"}],"node_type":"Query","ref_id":"43"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"43"}],"node_type":"Exists","ref_id":"44"}],"node_type":"Or","ref_id":"45"},{"children":[{"text":"\n    or "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Assessment, Performed\": "}]},{"children":[{"children":[{"text":"\"Hospice care [Minimum Data Set]\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"46"}],"node_type":"Retrieve","ref_id":"46"},{"children":[{"text":" HospiceAssessment"}]}],"ref_id":"47"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"HospiceAssessment"}]}],"ref_id":"48"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"result"}]}],"node_type":"Property","ref_id":"49"}],"node_type":"Property","ref_id":"49"},{"children":[{"text":" ~ "}]},{"children":[{"children":[{"text":"\"Yes (qualifier value)\""}]}],"node_type":"CodeRef","ref_id":"50"}],"node_type":"Equivalent","ref_id":"51"},{"children":[{"text":"\n          and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"52"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\" ( "}]},{"children":[{"children":[{"children":[{"text":"HospiceAssessment"}]}],"ref_id":"53"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"54"}],"node_type":"Property","ref_id":"54"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"HospiceAssessment"}]}],"ref_id":"55"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"56"}],"node_type":"Property","ref_id":"56"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"57"}],"node_type":"FunctionRef","ref_id":"57"},{"children":[{"text":" overlaps "}],"node_type":"Overlaps","ref_id":"59"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"58"}],"node_type":"Overlaps","ref_id":"59"}],"ref_id":"60"}],"ref_id":"60"}],"node_type":"Query","ref_id":"61"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"61"}],"node_type":"Exists","ref_id":"62"}],"node_type":"Or","ref_id":"63"},{"children":[{"text":"\n    or "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Intervention, Order\": "}]},{"children":[{"children":[{"text":"\"Hospice Care Ambulatory\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"64"}],"node_type":"Retrieve","ref_id":"64"},{"children":[{"text":" HospiceOrder"}]}],"ref_id":"65"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"HospiceOrder"}]}],"ref_id":"66"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"67"}],"node_type":"Property","ref_id":"67"},{"children":[{"text":" during day of "}],"ref_id":"69"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"68"}],"ref_id":"69"}],"ref_id":"69"}],"node_type":"Query","ref_id":"70"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"70"}],"node_type":"Exists","ref_id":"71"}],"node_type":"Or","ref_id":"72"},{"children":[{"text":"\n    or "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Intervention, Performed\": "}]},{"children":[{"children":[{"text":"\"Hospice Care Ambulatory\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"73"}],"node_type":"Retrieve","ref_id":"73"},{"children":[{"text":" HospicePerformed"}]}],"ref_id":"74"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"75"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\" ( "}]},{"children":[{"children":[{"children":[{"text":"HospicePerformed"}]}],"ref_id":"76"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"77"}],"node_type":"Property","ref_id":"77"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"HospicePerformed"}]}],"ref_id":"78"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"79"}],"node_type":"Property","ref_id":"79"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"80"}],"node_type":"FunctionRef","ref_id":"80"},{"children":[{"text":" overlaps "}],"ref_id":"82"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"81"}],"ref_id":"82"}],"ref_id":"82"}],"node_type":"Query","ref_id":"83"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"83"}],"node_type":"Exists","ref_id":"84"}],"node_type":"Or","ref_id":"85"}],"ref_id":"86"}],"define_name":"Has Hospice Services"}],"identifier":{"id":"Hospice","version":"4.0.000"}},"is_main_library":false,"is_top_level":true,"library_name":"Hospice","library_version":"4.0.000","statement_dependencies":[{"_id":"689263efe8da6d1c0d4fa9ea","statement_name":"Has Hospice Services","statement_references":[{"_id":"689263efe8da6d1c0d4fa9eb","hqmf_id":null,"library_name":"MATGlobalCommonFunctions","statement_name":"NormalizeInterval"}]}]},{"_id":"689263dee8da6d1c0d4f9a90","cql":"library MATGlobalCommonFunctions version '7.0.000'\n\nusing QDM version '5.6'\n\nvalueset \"Emergency Department Visit\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.292' \nvalueset \"Encounter Inpatient\": 'urn:oid:2.16.840.1.113883.3.666.5.307' \nvalueset \"Intensive Care Unit\": 'urn:oid:2.16.840.1.113762.1.4.1029.206' \nvalueset \"Observation Services\": 'urn:oid:2.16.840.1.113762.1.4.1111.143' \nvalueset \"Outpatient Surgery Service\": 'urn:oid:2.16.840.1.113762.1.4.1110.38' \n\nparameter \"Measurement Period\" Interval\u003cDateTime\u003e\n\ncontext Patient\n\ndefine \"ED Encounter\":\n  [\"Encounter, Performed\": \"Emergency Department Visit\"]\n\ndefine \"Inpatient Encounter\":\n  [\"Encounter, Performed\": \"Encounter Inpatient\"] EncounterInpatient\n    where \"LengthInDays\"(EncounterInpatient.relevantPeriod)\u003c= 120\n      and EncounterInpatient.relevantPeriod ends during day of \"Measurement Period\"\n\n/*@description: Returns an interval of date values extracted from the input interval of date-time values\n@comment: This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability.*/\ndefine function \"ToDateInterval\"(period Interval\u003cDateTime\u003e ):\n  Interval[date from start of period, date from end of period]\n\n/*calculates the difference in calendar days between the start and end of the given interval.*/\ndefine function \"LengthInDays\"(Value Interval\u003cDateTime\u003e ):\n  difference in days between start of Value and end of Value\n\n/*returns list of all locations within an encounter, including locations for immediately prior ED visit.*/\ndefine function \"HospitalizationLocations\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet EDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn if EDVisit is null then Visit.facilityLocations \n  \t\telse flatten { EDVisit.facilityLocations, Visit.facilityLocations }\n\n/*Returns the arrival time in the ED for the encounter.*/\ndefine function \"EmergencyDepartmentArrivalTime\"(Encounter \"Encounter, Performed\" ):\n  start of First((\"HospitalizationLocations\"(Encounter))HospitalLocation\n  \t\twhere HospitalLocation.code in \"Emergency Department Visit\"\n  \t\tsort by start of locationPeriod\n  ).locationPeriod\n\n/*Returns admission time for an encounter or for immediately prior emergency department visit.*/\ndefine function \"HospitalAdmissionTime\"(Encounter \"Encounter, Performed\" ):\n  start of \"Hospitalization\"(Encounter)\n\n/*Returns earliest arrival time for an encounter including any prior ED visit.*/\ndefine function \"HospitalArrivalTime\"(Encounter \"Encounter, Performed\" ):\n  start of First((\"HospitalizationLocations\"(Encounter))HospitalLocation\n  \t\tsort by start of locationPeriod\n  ).locationPeriod\n\n/*Hospitalization returns the total interval for admission to discharge for the given encounter, or for the admission of any immediately prior emergency department visit to the discharge of the given encounter.*/\ndefine function \"Hospitalization\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet EDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn Interval[Coalesce(start of EDVisit.relevantPeriod, start of Visit.relevantPeriod), \n  \tend of Visit.relevantPeriod]\n\n/*Returns the length of stay in days (i.e. the number of days between admission and discharge) for the given encounter, or from the admission of any immediately prior emergency department visit to the discharge of the encounter*/\ndefine function \"HospitalizationLengthofStay\"(Encounter \"Encounter, Performed\" ):\n  LengthInDays(\"Hospitalization\"(Encounter))\n\n/*Returns the latest departure time for encounter including any prior ED visit.*/\ndefine function \"HospitalDepartureTime\"(Encounter \"Encounter, Performed\" ):\n  end of Last((\"HospitalizationLocations\"(Encounter))HospitalLocation\n  \t\tsort by start of locationPeriod\n  ).locationPeriod\n\n/*Hospital Discharge Time returns the discharge time for an encounter*/\ndefine function \"HospitalDischargeTime\"(Encounter \"Encounter, Performed\" ):\n  end of Encounter.relevantPeriod\n\n/*Hospitalization with Observation and Outpatient Surgery Service returns the total interval from the start of any immediately prior emergency department visit, outpatient surgery visit or observation visit to the discharge of the given encounter.*/\ndefine function \"HospitalizationWithObservationAndOutpatientSurgeryService\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet ObsVisit: Last([\"Encounter, Performed\": \"Observation Services\"] LastObs\n  \t\t\twhere LastObs.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t),\n  \tVisitStart: Coalesce(start of ObsVisit.relevantPeriod, start of Visit.relevantPeriod),\n  \tEDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before VisitStart\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t),\n  \tVisitStartWithED: Coalesce(start of EDVisit.relevantPeriod, VisitStart),\n  \tOutpatientSurgeryVisit: Last([\"Encounter, Performed\": \"Outpatient Surgery Service\"] LastSurgeryOP\n  \t\t\twhere LastSurgeryOP.relevantPeriod ends 1 hour or less on or before VisitStartWithED\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn Interval[Coalesce(start of OutpatientSurgeryVisit.relevantPeriod, VisitStartWithED), \n  \tend of Visit.relevantPeriod]\n\n/*Hospitalization with Observation returns the total interval from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\ndefine function \"HospitalizationWithObservation\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet ObsVisit: Last([\"Encounter, Performed\": \"Observation Services\"] LastObs\n  \t\t\twhere LastObs.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t),\n  \tVisitStart: Coalesce(start of ObsVisit.relevantPeriod, start of Visit.relevantPeriod),\n  \tEDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before VisitStart\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn Interval[Coalesce(start of EDVisit.relevantPeriod, VisitStart), \n  \tend of Visit.relevantPeriod]\n\n/*Hospitalization with Observation Length of Stay returns the length in days from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\ndefine function \"HospitalizationWithObservationLengthofStay\"(Encounter \"Encounter, Performed\" ):\n  \"LengthInDays\"(\"HospitalizationWithObservation\"(Encounter))\n\n/*First Inpatient Intensive Care Unit returns the first intensive care unit for the given encounter, without considering any immediately prior emergency department visit.*/\ndefine function \"FirstInpatientIntensiveCareUnit\"(Encounter \"Encounter, Performed\" ):\n  First((Encounter.facilityLocations)HospitalLocation\n      where HospitalLocation.code in \"Intensive Care Unit\"\n        and HospitalLocation.locationPeriod during Encounter.relevantPeriod\n      sort by start of locationPeriod\n  )\n\n/*Given a datetime and a period, returns the period (if a period is provided) or the interval beginning and ending on the datetime (if a datetime is provided)*/\ndefine function \"NormalizeInterval\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  if pointInTime is not null then Interval[pointInTime, pointInTime]\n    else if period is not null then period \n    else null as Interval\u003cDateTime\u003e\n\n/*Given an interval, return true if the interval has a starting boundary specified (i.e. the start of the interval is not null and not the minimum DateTime value)*/\ndefine function \"HasStart\"(period Interval\u003cDateTime\u003e ):\n  not ( start of period is null\n      or start of period = minimum DateTime\n  )\n\n/*Given an interval, return true if the interval has an ending boundary specified (i.e. the end of the interval is not null and not the maximum DateTime value)*/\ndefine function \"HasEnd\"(period Interval\u003cDateTime\u003e ):\n  not ( \n    end of period is null\n      or \n      end of period = maximum DateTime\n  )\n\n/*Given an interval, return the ending point if the interval has an ending boundary specified, otherwise, return the starting point*/\ndefine function \"Latest\"(period Interval\u003cDateTime\u003e ):\n  if ( HasEnd(period)) then \n  end of period \n    else start of period\n\n/*Given an interval, return the starting point if the interval has a starting boundary specified, otherwise, return the ending point*/\ndefine function \"Earliest\"(period Interval\u003cDateTime\u003e ):\n  if ( HasStart(period)) then start of period \n    else \n  end of period\n\n/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the ending point of the period if the period has an ending boundary specified, otherwise returns the starting point of the interval*/\ndefine function \"LatestOf\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  Latest(NormalizeInterval(pointInTime, period))\n\n/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the starting point of the period if the period has a starting boundary specified, otherwise returns the ending point of the period*/\ndefine function \"EarliestOf\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  Earliest(NormalizeInterval(pointInTime, period))\n\n","elm":{"library":{"annotation":[{"translatorOptions":"EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion,DisableMethodInvocation","type":"CqlToElmInfo"},{"type":"Annotation","s":{"r":"404","s":[{"value":["","library MATGlobalCommonFunctions version '7.0.000'"]}]}}],"identifier":{"id":"MATGlobalCommonFunctions","version":"7.0.000"},"schemaIdentifier":{"id":"urn:hl7-org:elm","version":"r1"},"usings":{"def":[{"localIdentifier":"System","uri":"urn:hl7-org:elm-types:r1"},{"localId":"1","locator":"3:1-3:23","localIdentifier":"QDM","uri":"urn:healthit-gov:qdm:v5_6","version":"5.6","annotation":[{"type":"Annotation","s":{"r":"1","s":[{"value":["","using "]},{"s":[{"value":["QDM"]}]},{"value":[" version ","'5.6'"]}]}}]}]},"parameters":{"def":[{"localId":"9","locator":"11:1-11:49","name":"Measurement Period","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"9","s":[{"value":["","parameter ","\"Measurement Period\""," "]},{"r":"8","s":[{"value":["Interval\u003c"]},{"r":"7","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}}],"parameterTypeSpecifier":{"localId":"8","locator":"11:32-11:49","type":"IntervalTypeSpecifier","pointType":{"localId":"7","locator":"11:41-11:48","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},"valueSets":{"def":[{"localId":"2","locator":"5:1-5:82","name":"Emergency Department Visit","id":"2.16.840.1.113883.3.117.1.7.1.292","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"2","s":[{"value":["","valueset ","\"Emergency Department Visit\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.292'"]}]}}]},{"localId":"3","locator":"6:1-6:71","name":"Encounter Inpatient","id":"2.16.840.1.113883.3.666.5.307","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"3","s":[{"value":["","valueset ","\"Encounter Inpatient\"",": ","'urn:oid:2.16.840.1.113883.3.666.5.307'"]}]}}]},{"localId":"4","locator":"7:1-7:72","name":"Intensive Care Unit","id":"2.16.840.1.113762.1.4.1029.206","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"4","s":[{"value":["","valueset ","\"Intensive Care Unit\"",": ","'urn:oid:2.16.840.1.113762.1.4.1029.206'"]}]}}]},{"localId":"5","locator":"8:1-8:73","name":"Observation Services","id":"2.16.840.1.113762.1.4.1111.143","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"5","s":[{"value":["","valueset ","\"Observation Services\"",": ","'urn:oid:2.16.840.1.113762.1.4.1111.143'"]}]}}]},{"localId":"6","locator":"9:1-9:78","name":"Outpatient Surgery Service","id":"2.16.840.1.113762.1.4.1110.38","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"6","s":[{"value":["","valueset ","\"Outpatient Surgery Service\"",": ","'urn:oid:2.16.840.1.113762.1.4.1110.38'"]}]}}]}]},"contexts":{"def":[{"locator":"13:1-13:15","name":"Patient"}]},"statements":{"def":[{"locator":"13:1-13:15","name":"Patient","context":"Patient","expression":{"type":"SingletonFrom","operand":{"locator":"13:1-13:15","dataType":"{urn:healthit-gov:qdm:v5_6}Patient","templateId":"Patient","type":"Retrieve"}}},{"localId":"11","locator":"15:1-16:56","name":"ED Encounter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"11","s":[{"value":["","define ","\"ED Encounter\"",":\n  "]},{"r":"10","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"10","locator":"16:3-16:56","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"16:28-16:55","name":"Emergency Department Visit","type":"ValueSetRef"}}},{"localId":"23","locator":"32:1-33:60","name":"LengthInDays","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"23","s":[{"value":["/*calculates the difference in calendar days between the start and end of the given interval.*/","define function ","\"LengthInDays\"","(","Value"," "]},{"r":"17","s":[{"value":["Interval\u003c"]},{"r":"16","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"22","s":[{"r":"22","s":[{"value":["difference in days between "]},{"r":"19","s":[{"value":["start of "]},{"r":"18","s":[{"value":["Value"]}]}]},{"value":[" and "]},{"r":"21","s":[{"value":["end of "]},{"r":"20","s":[{"value":["Value"]}]}]}]}]}]}}],"expression":{"localId":"22","locator":"33:3-33:60","precision":"Day","type":"DifferenceBetween","operand":[{"localId":"19","locator":"33:30-33:43","type":"Start","operand":{"localId":"18","locator":"33:39-33:43","name":"Value","type":"OperandRef"}},{"localId":"21","locator":"33:49-33:60","type":"End","operand":{"localId":"20","locator":"33:56-33:60","name":"Value","type":"OperandRef"}}]},"operand":[{"name":"Value","operandTypeSpecifier":{"localId":"17","locator":"32:38-32:55","type":"IntervalTypeSpecifier","pointType":{"localId":"16","locator":"32:47-32:54","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"33","locator":"18:1-21:83","name":"Inpatient Encounter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"33","s":[{"value":["","define ","\"Inpatient Encounter\"",":\n  "]},{"r":"32","s":[{"s":[{"r":"13","s":[{"r":"12","s":[{"r":"12","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Encounter Inpatient\""]}]},{"value":["]"]}]}]},{"value":[" ","EncounterInpatient"]}]}]},{"value":["\n    "]},{"r":"31","s":[{"value":["where "]},{"r":"31","s":[{"r":"26","s":[{"r":"24","s":[{"value":["\"LengthInDays\"","("]},{"r":"15","s":[{"r":"14","s":[{"value":["EncounterInpatient"]}]},{"value":["."]},{"r":"15","s":[{"value":["relevantPeriod"]}]}]},{"value":[")"]}]},{"r":"25","value":["\u003c="," ","120"]}]},{"value":["\n      and "]},{"r":"30","s":[{"r":"28","s":[{"r":"27","s":[{"value":["EncounterInpatient"]}]},{"value":["."]},{"r":"28","s":[{"value":["relevantPeriod"]}]}]},{"r":"30","value":[" ","ends during day of"," "]},{"r":"29","s":[{"value":["\"Measurement Period\""]}]}]}]}]}]}]}}],"expression":{"localId":"32","locator":"19:3-21:83","type":"Query","source":[{"localId":"13","locator":"19:3-19:68","alias":"EncounterInpatient","expression":{"localId":"12","locator":"19:3-19:49","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"19:28-19:48","name":"Encounter Inpatient","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"31","locator":"20:5-21:83","type":"And","operand":[{"localId":"26","locator":"20:11-20:65","type":"LessOrEqual","operand":[{"localId":"24","locator":"20:11-20:59","name":"LengthInDays","type":"FunctionRef","operand":[{"localId":"15","locator":"20:26-20:58","path":"relevantPeriod","scope":"EncounterInpatient","type":"Property"}]},{"localId":"25","locator":"20:63-20:65","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"120","type":"Literal"}]},{"localId":"30","locator":"21:11-21:83","precision":"Day","type":"In","operand":[{"locator":"21:45-21:48","type":"End","operand":{"localId":"28","locator":"21:11-21:43","path":"relevantPeriod","scope":"EncounterInpatient","type":"Property"}},{"localId":"29","locator":"21:64-21:83","name":"Measurement Period","type":"ParameterRef"}]}]}}},{"localId":"43","locator":"28:1-29:62","name":"ToDateInterval","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","t":[{"name":"description","value":"Returns an interval of date values extracted from the input interval of date-time values"},{"name":"description","value":"Returns an interval of date values extracted from the input interval of date-time values"},{"name":"comment","value":"This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability."}],"s":{"r":"43","s":[{"value":["/*@description: Returns an interval of date values extracted from the input interval of date-time values\n@comment: This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability.*/","define function ","\"ToDateInterval\"","(","period"," "]},{"r":"35","s":[{"value":["Interval\u003c"]},{"r":"34","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"42","s":[{"r":"42","s":[{"value":["Interval["]},{"r":"38","s":[{"value":["date from "]},{"r":"37","s":[{"value":["start of "]},{"r":"36","s":[{"value":["period"]}]}]}]},{"value":[", "]},{"r":"41","s":[{"value":["date from "]},{"r":"40","s":[{"value":["end of "]},{"r":"39","s":[{"value":["period"]}]}]}]},{"value":["]"]}]}]}]}}],"expression":{"localId":"42","locator":"29:3-29:62","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"38","locator":"29:12-29:36","type":"DateFrom","operand":{"localId":"37","locator":"29:22-29:36","type":"Start","operand":{"localId":"36","locator":"29:31-29:36","name":"period","type":"OperandRef"}}},"high":{"localId":"41","locator":"29:39-29:61","type":"DateFrom","operand":{"localId":"40","locator":"29:49-29:61","type":"End","operand":{"localId":"39","locator":"29:56-29:61","name":"period","type":"OperandRef"}}}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"35","locator":"28:41-28:58","type":"IntervalTypeSpecifier","pointType":{"localId":"34","locator":"28:50-28:57","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"79","locator":"36:1-44:71","name":"HospitalizationLocations","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"79","s":[{"value":["/*returns list of all locations within an encounter, including locations for immediately prior ED visit.*/","define function ","\"HospitalizationLocations\"","(","Encounter"," "]},{"r":"47","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"78","s":[{"r":"78","s":[{"s":[{"r":"49","s":[{"r":"48","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"65","s":[{"value":["EDVisit",": "]},{"r":"64","s":[{"value":["Last","("]},{"r":"63","s":[{"s":[{"r":"51","s":[{"r":"50","s":[{"r":"50","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"58","s":[{"value":["where "]},{"r":"58","s":[{"r":"53","s":[{"r":"52","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"53","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"58","s":[{"value":["ends "]},{"r":"57","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"56","s":[{"value":["start of "]},{"r":"55","s":[{"r":"54","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"55","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"62","s":[{"value":["sort by \n  \t\t\t"]},{"r":"61","s":[{"r":"60","s":[{"value":["end of "]},{"r":"59","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"77","s":[{"value":["return "]},{"r":"76","s":[{"value":["if "]},{"r":"67","s":[{"r":"66","s":[{"value":["EDVisit"]}]},{"value":[" is null"]}]},{"value":[" then "]},{"r":"69","s":[{"r":"68","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"69","s":[{"value":["facilityLocations"]}]}]},{"value":[" \n  \t\telse "]},{"r":"75","s":[{"value":["flatten "]},{"r":"74","s":[{"value":["{ "]},{"r":"71","s":[{"r":"70","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"71","s":[{"value":["facilityLocations"]}]}]},{"value":[", "]},{"r":"73","s":[{"r":"72","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"73","s":[{"value":["facilityLocations"]}]}]},{"value":[" }"]}]}]}]}]}]}]}]}}],"expression":{"localId":"78","locator":"37:3-44:71","type":"Query","source":[{"localId":"49","locator":"37:3-37:17","alias":"Visit","expression":{"localId":"48","locator":"37:3-37:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"65","locator":"38:8-42:4","identifier":"EDVisit","expression":{"localId":"64","locator":"38:17-42:4","type":"Last","source":{"localId":"63","locator":"38:22-41:26","type":"Query","source":[{"localId":"51","locator":"38:22-38:82","alias":"LastED","expression":{"localId":"50","locator":"38:22-38:75","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"38:47-38:74","name":"Emergency Department Visit","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"58","locator":"39:6-39:95","type":"And","operand":[{"locator":"39:39-39:52","type":"In","operand":[{"locator":"39:34-39:37","type":"End","operand":{"localId":"53","locator":"39:12-39:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"39:39-39:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"39:67-39:95","type":"Subtract","operand":[{"localId":"56","locator":"39:67-39:95","type":"Start","operand":{"localId":"55","locator":"39:76-39:95","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"57","locator":"39:39-39:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"56","locator":"39:67-39:95","type":"Start","operand":{"localId":"55","locator":"39:76-39:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"39:39-39:52","type":"Not","operand":{"locator":"39:39-39:52","type":"IsNull","operand":{"localId":"56","locator":"39:67-39:95","type":"Start","operand":{"localId":"55","locator":"39:76-39:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"62","locator":"40:6-41:26","by":[{"localId":"61","locator":"41:6-41:26","direction":"asc","type":"ByExpression","expression":{"localId":"60","locator":"41:6-41:26","type":"End","operand":{"localId":"59","locator":"41:13-41:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"77","locator":"43:4-44:71","expression":{"localId":"76","locator":"43:11-44:71","type":"If","condition":{"localId":"67","locator":"43:14-43:28","type":"IsNull","operand":{"localId":"66","locator":"43:14-43:20","name":"EDVisit","type":"QueryLetRef"}},"then":{"localId":"69","locator":"43:35-43:57","path":"facilityLocations","scope":"Visit","type":"Property"},"else":{"localId":"75","locator":"44:10-44:71","type":"Flatten","operand":{"localId":"74","locator":"44:18-44:71","type":"List","element":[{"localId":"71","locator":"44:20-44:44","path":"facilityLocations","type":"Property","source":{"localId":"70","locator":"44:20-44:26","name":"EDVisit","type":"QueryLetRef"}},{"localId":"73","locator":"44:47-44:69","path":"facilityLocations","scope":"Visit","type":"Property"}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"47","locator":"36:54-36:75","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"96","locator":"47:1-51:18","name":"EmergencyDepartmentArrivalTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"96","s":[{"value":["/*Returns the arrival time in the ED for the encounter.*/","define function ","\"EmergencyDepartmentArrivalTime\"","(","Encounter"," "]},{"r":"80","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"95","s":[{"r":"95","s":[{"value":["start of "]},{"r":"94","s":[{"r":"93","s":[{"value":["First","("]},{"r":"92","s":[{"s":[{"r":"83","s":[{"r":"82","s":[{"value":["("]},{"r":"82","s":[{"value":["\"HospitalizationLocations\"","("]},{"r":"81","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n  \t\t"]},{"r":"87","s":[{"value":["where "]},{"r":"87","s":[{"r":"85","s":[{"r":"84","s":[{"value":["HospitalLocation"]}]},{"value":["."]},{"r":"85","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"86","s":[{"value":["\"Emergency Department Visit\""]}]}]}]},{"value":["\n  \t\t"]},{"r":"91","s":[{"value":["sort by "]},{"r":"90","s":[{"r":"89","s":[{"value":["start of "]},{"r":"88","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"94","s":[{"value":["locationPeriod"]}]}]}]}]}]}}],"expression":{"localId":"95","locator":"48:3-51:18","type":"Start","operand":{"localId":"94","locator":"48:12-51:18","path":"locationPeriod","type":"Property","source":{"localId":"93","locator":"48:12-51:3","type":"First","source":{"localId":"92","locator":"48:18-50:35","type":"Query","source":[{"localId":"83","locator":"48:18-48:72","alias":"HospitalLocation","expression":{"localId":"82","locator":"48:18-48:56","name":"HospitalizationLocations","type":"FunctionRef","operand":[{"localId":"81","locator":"48:46-48:54","name":"Encounter","type":"OperandRef"}]}}],"relationship":[],"where":{"localId":"87","locator":"49:5-49:63","type":"InValueSet","code":{"localId":"85","locator":"49:11-49:31","path":"code","scope":"HospitalLocation","type":"Property"},"valueset":{"localId":"86","locator":"49:36-49:63","name":"Emergency Department Visit","type":"ValueSetRef"}},"sort":{"localId":"91","locator":"50:5-50:35","by":[{"localId":"90","locator":"50:13-50:35","direction":"asc","type":"ByExpression","expression":{"localId":"89","locator":"50:13-50:35","type":"Start","operand":{"localId":"88","locator":"50:22-50:35","name":"locationPeriod","type":"IdentifierRef"}}}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"80","locator":"47:60-47:81","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"131","locator":"64:1-72:31","name":"Hospitalization","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"131","s":[{"value":["/*Hospitalization returns the total interval for admission to discharge for the given encounter, or for the admission of any immediately prior emergency department visit to the discharge of the given encounter.*/","define function ","\"Hospitalization\"","(","Encounter"," "]},{"r":"99","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"130","s":[{"r":"130","s":[{"s":[{"r":"101","s":[{"r":"100","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"117","s":[{"value":["EDVisit",": "]},{"r":"116","s":[{"value":["Last","("]},{"r":"115","s":[{"s":[{"r":"103","s":[{"r":"102","s":[{"r":"102","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"110","s":[{"value":["where "]},{"r":"110","s":[{"r":"105","s":[{"r":"104","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"105","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"110","s":[{"value":["ends "]},{"r":"109","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"108","s":[{"value":["start of "]},{"r":"107","s":[{"r":"106","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"107","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"114","s":[{"value":["sort by \n  \t\t\t"]},{"r":"113","s":[{"r":"112","s":[{"value":["end of "]},{"r":"111","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"129","s":[{"value":["return "]},{"r":"128","s":[{"value":["Interval["]},{"r":"124","s":[{"value":["Coalesce","("]},{"r":"120","s":[{"value":["start of "]},{"r":"119","s":[{"r":"118","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"119","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"123","s":[{"value":["start of "]},{"r":"122","s":[{"r":"121","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"122","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]},{"value":[", \n  \t"]},{"r":"127","s":[{"value":["end of "]},{"r":"126","s":[{"r":"125","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"126","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["]"]}]}]}]}]}]}}],"expression":{"localId":"130","locator":"65:3-72:31","type":"Query","source":[{"localId":"101","locator":"65:3-65:17","alias":"Visit","expression":{"localId":"100","locator":"65:3-65:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"117","locator":"66:8-70:4","identifier":"EDVisit","expression":{"localId":"116","locator":"66:17-70:4","type":"Last","source":{"localId":"115","locator":"66:22-69:26","type":"Query","source":[{"localId":"103","locator":"66:22-66:82","alias":"LastED","expression":{"localId":"102","locator":"66:22-66:75","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"66:47-66:74","name":"Emergency Department Visit","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"110","locator":"67:6-67:95","type":"And","operand":[{"locator":"67:39-67:52","type":"In","operand":[{"locator":"67:34-67:37","type":"End","operand":{"localId":"105","locator":"67:12-67:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"67:39-67:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"67:67-67:95","type":"Subtract","operand":[{"localId":"108","locator":"67:67-67:95","type":"Start","operand":{"localId":"107","locator":"67:76-67:95","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"109","locator":"67:39-67:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"108","locator":"67:67-67:95","type":"Start","operand":{"localId":"107","locator":"67:76-67:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"67:39-67:52","type":"Not","operand":{"locator":"67:39-67:52","type":"IsNull","operand":{"localId":"108","locator":"67:67-67:95","type":"Start","operand":{"localId":"107","locator":"67:76-67:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"114","locator":"68:6-69:26","by":[{"localId":"113","locator":"69:6-69:26","direction":"asc","type":"ByExpression","expression":{"localId":"112","locator":"69:6-69:26","type":"End","operand":{"localId":"111","locator":"69:13-69:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"129","locator":"71:4-72:31","expression":{"localId":"128","locator":"71:11-72:31","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"124","locator":"71:20-71:91","type":"Coalesce","operand":[{"localId":"120","locator":"71:29-71:59","type":"Start","operand":{"localId":"119","locator":"71:38-71:59","path":"relevantPeriod","type":"Property","source":{"localId":"118","locator":"71:38-71:44","name":"EDVisit","type":"QueryLetRef"}}},{"localId":"123","locator":"71:62-71:90","type":"Start","operand":{"localId":"122","locator":"71:71-71:90","path":"relevantPeriod","scope":"Visit","type":"Property"}}]},"high":{"localId":"127","locator":"72:4-72:30","type":"End","operand":{"localId":"126","locator":"72:11-72:30","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"99","locator":"64:45-64:66","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"134","locator":"54:1-55:39","name":"HospitalAdmissionTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"134","s":[{"value":["/*Returns admission time for an encounter or for immediately prior emergency department visit.*/","define function ","\"HospitalAdmissionTime\"","(","Encounter"," "]},{"r":"97","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"133","s":[{"r":"133","s":[{"value":["start of "]},{"r":"132","s":[{"value":["\"Hospitalization\"","("]},{"r":"98","s":[{"value":["Encounter"]}]},{"value":[")"]}]}]}]}]}}],"expression":{"localId":"133","locator":"55:3-55:39","type":"Start","operand":{"localId":"132","locator":"55:12-55:39","name":"Hospitalization","type":"FunctionRef","operand":[{"localId":"98","locator":"55:30-55:38","name":"Encounter","type":"OperandRef"}]}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"97","locator":"54:51-54:72","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"147","locator":"58:1-61:18","name":"HospitalArrivalTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"147","s":[{"value":["/*Returns earliest arrival time for an encounter including any prior ED visit.*/","define function ","\"HospitalArrivalTime\"","(","Encounter"," "]},{"r":"135","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"146","s":[{"r":"146","s":[{"value":["start of "]},{"r":"145","s":[{"r":"144","s":[{"value":["First","("]},{"r":"143","s":[{"s":[{"r":"138","s":[{"r":"137","s":[{"value":["("]},{"r":"137","s":[{"value":["\"HospitalizationLocations\"","("]},{"r":"136","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n  \t\t"]},{"r":"142","s":[{"value":["sort by "]},{"r":"141","s":[{"r":"140","s":[{"value":["start of "]},{"r":"139","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"145","s":[{"value":["locationPeriod"]}]}]}]}]}]}}],"expression":{"localId":"146","locator":"59:3-61:18","type":"Start","operand":{"localId":"145","locator":"59:12-61:18","path":"locationPeriod","type":"Property","source":{"localId":"144","locator":"59:12-61:3","type":"First","source":{"localId":"143","locator":"59:18-60:35","type":"Query","source":[{"localId":"138","locator":"59:18-59:72","alias":"HospitalLocation","expression":{"localId":"137","locator":"59:18-59:56","name":"HospitalizationLocations","type":"FunctionRef","operand":[{"localId":"136","locator":"59:46-59:54","name":"Encounter","type":"OperandRef"}]}}],"relationship":[],"sort":{"localId":"142","locator":"60:5-60:35","by":[{"localId":"141","locator":"60:13-60:35","direction":"asc","type":"ByExpression","expression":{"localId":"140","locator":"60:13-60:35","type":"Start","operand":{"localId":"139","locator":"60:22-60:35","name":"locationPeriod","type":"IdentifierRef"}}}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"135","locator":"58:49-58:70","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"154","locator":"75:1-76:44","name":"HospitalizationLengthofStay","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"154","s":[{"value":["/*Returns the length of stay in days (i.e. the number of days between admission and discharge) for the given encounter, or from the admission of any immediately prior emergency department visit to the discharge of the encounter*/","define function ","\"HospitalizationLengthofStay\"","(","Encounter"," "]},{"r":"150","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"153","s":[{"r":"153","s":[{"value":["LengthInDays","("]},{"r":"152","s":[{"value":["\"Hospitalization\"","("]},{"r":"151","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"153","locator":"76:3-76:44","name":"LengthInDays","type":"FunctionRef","operand":[{"localId":"152","locator":"76:16-76:43","name":"Hospitalization","type":"FunctionRef","operand":[{"localId":"151","locator":"76:34-76:42","name":"Encounter","type":"OperandRef"}]}]},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"150","locator":"75:57-75:78","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"167","locator":"79:1-82:18","name":"HospitalDepartureTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"167","s":[{"value":["/*Returns the latest departure time for encounter including any prior ED visit.*/","define function ","\"HospitalDepartureTime\"","(","Encounter"," "]},{"r":"155","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"166","s":[{"r":"166","s":[{"value":["end of "]},{"r":"165","s":[{"r":"164","s":[{"value":["Last","("]},{"r":"163","s":[{"s":[{"r":"158","s":[{"r":"157","s":[{"value":["("]},{"r":"157","s":[{"value":["\"HospitalizationLocations\"","("]},{"r":"156","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n  \t\t"]},{"r":"162","s":[{"value":["sort by "]},{"r":"161","s":[{"r":"160","s":[{"value":["start of "]},{"r":"159","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"165","s":[{"value":["locationPeriod"]}]}]}]}]}]}}],"expression":{"localId":"166","locator":"80:3-82:18","type":"End","operand":{"localId":"165","locator":"80:10-82:18","path":"locationPeriod","type":"Property","source":{"localId":"164","locator":"80:10-82:3","type":"Last","source":{"localId":"163","locator":"80:15-81:35","type":"Query","source":[{"localId":"158","locator":"80:15-80:69","alias":"HospitalLocation","expression":{"localId":"157","locator":"80:15-80:53","name":"HospitalizationLocations","type":"FunctionRef","operand":[{"localId":"156","locator":"80:43-80:51","name":"Encounter","type":"OperandRef"}]}}],"relationship":[],"sort":{"localId":"162","locator":"81:5-81:35","by":[{"localId":"161","locator":"81:13-81:35","direction":"asc","type":"ByExpression","expression":{"localId":"160","locator":"81:13-81:35","type":"Start","operand":{"localId":"159","locator":"81:22-81:35","name":"locationPeriod","type":"IdentifierRef"}}}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"155","locator":"79:51-79:72","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"172","locator":"85:1-86:33","name":"HospitalDischargeTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"172","s":[{"value":["/*Hospital Discharge Time returns the discharge time for an encounter*/","define function ","\"HospitalDischargeTime\"","(","Encounter"," "]},{"r":"168","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"171","s":[{"r":"171","s":[{"value":["end of "]},{"r":"170","s":[{"r":"169","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"170","s":[{"value":["relevantPeriod"]}]}]}]}]}]}}],"expression":{"localId":"171","locator":"86:3-86:33","type":"End","operand":{"localId":"170","locator":"86:10-86:33","path":"relevantPeriod","type":"Property","source":{"localId":"169","locator":"86:10-86:18","name":"Encounter","type":"OperandRef"}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"168","locator":"85:51-85:72","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"245","locator":"89:1-109:31","name":"HospitalizationWithObservationAndOutpatientSurgeryService","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"245","s":[{"value":["/*Hospitalization with Observation and Outpatient Surgery Service returns the total interval from the start of any immediately prior emergency department visit, outpatient surgery visit or observation visit to the discharge of the given encounter.*/","define function ","\"HospitalizationWithObservationAndOutpatientSurgeryService\"","(","Encounter"," "]},{"r":"173","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"244","s":[{"r":"244","s":[{"s":[{"r":"175","s":[{"r":"174","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"191","s":[{"value":["ObsVisit",": "]},{"r":"190","s":[{"value":["Last","("]},{"r":"189","s":[{"s":[{"r":"177","s":[{"r":"176","s":[{"r":"176","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Observation Services\""]}]},{"value":["]"]}]}]},{"value":[" ","LastObs"]}]}]},{"value":["\n  \t\t\t"]},{"r":"184","s":[{"value":["where "]},{"r":"184","s":[{"r":"179","s":[{"r":"178","s":[{"value":["LastObs"]}]},{"value":["."]},{"r":"179","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"184","s":[{"value":["ends "]},{"r":"183","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"182","s":[{"value":["start of "]},{"r":"181","s":[{"r":"180","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"181","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"188","s":[{"value":["sort by \n  \t\t\t"]},{"r":"187","s":[{"r":"186","s":[{"value":["end of "]},{"r":"185","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]},{"value":[",\n  \t"]},{"r":"199","s":[{"value":["VisitStart",": "]},{"r":"198","s":[{"value":["Coalesce","("]},{"r":"194","s":[{"value":["start of "]},{"r":"193","s":[{"r":"192","s":[{"value":["ObsVisit"]}]},{"value":["."]},{"r":"193","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"197","s":[{"value":["start of "]},{"r":"196","s":[{"r":"195","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"196","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]}]},{"value":[",\n  \t"]},{"r":"213","s":[{"value":["EDVisit",": "]},{"r":"212","s":[{"value":["Last","("]},{"r":"211","s":[{"s":[{"r":"201","s":[{"r":"200","s":[{"r":"200","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"206","s":[{"value":["where "]},{"r":"206","s":[{"r":"203","s":[{"r":"202","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"203","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"206","s":[{"value":["ends "]},{"r":"205","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"204","s":[{"value":["VisitStart"]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"210","s":[{"value":["sort by \n  \t\t\t"]},{"r":"209","s":[{"r":"208","s":[{"value":["end of "]},{"r":"207","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]},{"value":[",\n  \t"]},{"r":"219","s":[{"value":["VisitStartWithED",": "]},{"r":"218","s":[{"value":["Coalesce","("]},{"r":"216","s":[{"value":["start of "]},{"r":"215","s":[{"r":"214","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"215","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"217","s":[{"value":["VisitStart"]}]},{"value":[")"]}]}]},{"value":[",\n  \t"]},{"r":"233","s":[{"value":["OutpatientSurgeryVisit",": "]},{"r":"232","s":[{"value":["Last","("]},{"r":"231","s":[{"s":[{"r":"221","s":[{"r":"220","s":[{"r":"220","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Outpatient Surgery Service\""]}]},{"value":["]"]}]}]},{"value":[" ","LastSurgeryOP"]}]}]},{"value":["\n  \t\t\t"]},{"r":"226","s":[{"value":["where "]},{"r":"226","s":[{"r":"223","s":[{"r":"222","s":[{"value":["LastSurgeryOP"]}]},{"value":["."]},{"r":"223","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"226","s":[{"value":["ends "]},{"r":"225","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"224","s":[{"value":["VisitStartWithED"]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"230","s":[{"value":["sort by \n  \t\t\t"]},{"r":"229","s":[{"r":"228","s":[{"value":["end of "]},{"r":"227","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"243","s":[{"value":["return "]},{"r":"242","s":[{"value":["Interval["]},{"r":"238","s":[{"value":["Coalesce","("]},{"r":"236","s":[{"value":["start of "]},{"r":"235","s":[{"r":"234","s":[{"value":["OutpatientSurgeryVisit"]}]},{"value":["."]},{"r":"235","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"237","s":[{"value":["VisitStartWithED"]}]},{"value":[")"]}]},{"value":[", \n  \t"]},{"r":"241","s":[{"value":["end of "]},{"r":"240","s":[{"r":"239","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"240","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["]"]}]}]}]}]}]}}],"expression":{"localId":"244","locator":"90:3-109:31","type":"Query","source":[{"localId":"175","locator":"90:3-90:17","alias":"Visit","expression":{"localId":"174","locator":"90:3-90:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"191","locator":"91:8-95:4","identifier":"ObsVisit","expression":{"localId":"190","locator":"91:18-95:4","type":"Last","source":{"localId":"189","locator":"91:23-94:26","type":"Query","source":[{"localId":"177","locator":"91:23-91:78","alias":"LastObs","expression":{"localId":"176","locator":"91:23-91:70","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"91:48-91:69","name":"Observation Services","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"184","locator":"92:6-92:96","type":"And","operand":[{"locator":"92:40-92:53","type":"In","operand":[{"locator":"92:35-92:38","type":"End","operand":{"localId":"179","locator":"92:12-92:33","path":"relevantPeriod","scope":"LastObs","type":"Property"}},{"locator":"92:40-92:53","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"92:68-92:96","type":"Subtract","operand":[{"localId":"182","locator":"92:68-92:96","type":"Start","operand":{"localId":"181","locator":"92:77-92:96","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"183","locator":"92:40-92:45","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"182","locator":"92:68-92:96","type":"Start","operand":{"localId":"181","locator":"92:77-92:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"92:40-92:53","type":"Not","operand":{"locator":"92:40-92:53","type":"IsNull","operand":{"localId":"182","locator":"92:68-92:96","type":"Start","operand":{"localId":"181","locator":"92:77-92:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"188","locator":"93:6-94:26","by":[{"localId":"187","locator":"94:6-94:26","direction":"asc","type":"ByExpression","expression":{"localId":"186","locator":"94:6-94:26","type":"End","operand":{"localId":"185","locator":"94:13-94:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}},{"localId":"199","locator":"96:4-96:88","identifier":"VisitStart","expression":{"localId":"198","locator":"96:16-96:88","type":"Coalesce","operand":[{"localId":"194","locator":"96:25-96:56","type":"Start","operand":{"localId":"193","locator":"96:34-96:56","path":"relevantPeriod","type":"Property","source":{"localId":"192","locator":"96:34-96:41","name":"ObsVisit","type":"QueryLetRef"}}},{"localId":"197","locator":"96:59-96:87","type":"Start","operand":{"localId":"196","locator":"96:68-96:87","path":"relevantPeriod","scope":"Visit","type":"Property"}}]}},{"localId":"213","locator":"97:4-101:4","identifier":"EDVisit","expression":{"localId":"212","locator":"97:13-101:4","type":"Last","source":{"localId":"211","locator":"97:18-100:26","type":"Query","source":[{"localId":"201","locator":"97:18-97:78","alias":"LastED","expression":{"localId":"200","locator":"97:18-97:71","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"97:43-97:70","name":"Emergency Department Visit","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"206","locator":"98:6-98:76","type":"And","operand":[{"locator":"98:39-98:52","type":"In","operand":[{"locator":"98:34-98:37","type":"End","operand":{"localId":"203","locator":"98:12-98:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"98:39-98:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"98:67-98:76","type":"Subtract","operand":[{"localId":"204","locator":"98:67-98:76","name":"VisitStart","type":"QueryLetRef"},{"localId":"205","locator":"98:39-98:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"204","locator":"98:67-98:76","name":"VisitStart","type":"QueryLetRef"}}]},{"locator":"98:39-98:52","type":"Not","operand":{"locator":"98:39-98:52","type":"IsNull","operand":{"localId":"204","locator":"98:67-98:76","name":"VisitStart","type":"QueryLetRef"}}}]},"sort":{"localId":"210","locator":"99:6-100:26","by":[{"localId":"209","locator":"100:6-100:26","direction":"asc","type":"ByExpression","expression":{"localId":"208","locator":"100:6-100:26","type":"End","operand":{"localId":"207","locator":"100:13-100:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}},{"localId":"219","locator":"102:4-102:74","identifier":"VisitStartWithED","expression":{"localId":"218","locator":"102:22-102:74","type":"Coalesce","operand":[{"localId":"216","locator":"102:31-102:61","type":"Start","operand":{"localId":"215","locator":"102:40-102:61","path":"relevantPeriod","type":"Property","source":{"localId":"214","locator":"102:40-102:46","name":"EDVisit","type":"QueryLetRef"}}},{"localId":"217","locator":"102:64-102:73","name":"VisitStart","type":"QueryLetRef"}]}},{"localId":"233","locator":"103:4-107:4","identifier":"OutpatientSurgeryVisit","expression":{"localId":"232","locator":"103:28-107:4","type":"Last","source":{"localId":"231","locator":"103:33-106:26","type":"Query","source":[{"localId":"221","locator":"103:33-103:100","alias":"LastSurgeryOP","expression":{"localId":"220","locator":"103:33-103:86","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"103:58-103:85","name":"Outpatient Surgery Service","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"226","locator":"104:6-104:89","type":"And","operand":[{"locator":"104:46-104:59","type":"In","operand":[{"locator":"104:41-104:44","type":"End","operand":{"localId":"223","locator":"104:12-104:39","path":"relevantPeriod","scope":"LastSurgeryOP","type":"Property"}},{"locator":"104:46-104:59","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"104:74-104:89","type":"Subtract","operand":[{"localId":"224","locator":"104:74-104:89","name":"VisitStartWithED","type":"QueryLetRef"},{"localId":"225","locator":"104:46-104:51","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"224","locator":"104:74-104:89","name":"VisitStartWithED","type":"QueryLetRef"}}]},{"locator":"104:46-104:59","type":"Not","operand":{"locator":"104:46-104:59","type":"IsNull","operand":{"localId":"224","locator":"104:74-104:89","name":"VisitStartWithED","type":"QueryLetRef"}}}]},"sort":{"localId":"230","locator":"105:6-106:26","by":[{"localId":"229","locator":"106:6-106:26","direction":"asc","type":"ByExpression","expression":{"localId":"228","locator":"106:6-106:26","type":"End","operand":{"localId":"227","locator":"106:13-106:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"243","locator":"108:4-109:31","expression":{"localId":"242","locator":"108:11-109:31","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"238","locator":"108:20-108:93","type":"Coalesce","operand":[{"localId":"236","locator":"108:29-108:74","type":"Start","operand":{"localId":"235","locator":"108:38-108:74","path":"relevantPeriod","type":"Property","source":{"localId":"234","locator":"108:38-108:59","name":"OutpatientSurgeryVisit","type":"QueryLetRef"}}},{"localId":"237","locator":"108:77-108:92","name":"VisitStartWithED","type":"QueryLetRef"}]},"high":{"localId":"241","locator":"109:4-109:30","type":"End","operand":{"localId":"240","locator":"109:11-109:30","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"173","locator":"89:87-89:108","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"298","locator":"112:1-126:31","name":"HospitalizationWithObservation","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"298","s":[{"value":["/*Hospitalization with Observation returns the total interval from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/","define function ","\"HospitalizationWithObservation\"","(","Encounter"," "]},{"r":"246","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"297","s":[{"r":"297","s":[{"s":[{"r":"248","s":[{"r":"247","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"264","s":[{"value":["ObsVisit",": "]},{"r":"263","s":[{"value":["Last","("]},{"r":"262","s":[{"s":[{"r":"250","s":[{"r":"249","s":[{"r":"249","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Observation Services\""]}]},{"value":["]"]}]}]},{"value":[" ","LastObs"]}]}]},{"value":["\n  \t\t\t"]},{"r":"257","s":[{"value":["where "]},{"r":"257","s":[{"r":"252","s":[{"r":"251","s":[{"value":["LastObs"]}]},{"value":["."]},{"r":"252","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"257","s":[{"value":["ends "]},{"r":"256","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"255","s":[{"value":["start of "]},{"r":"254","s":[{"r":"253","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"254","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"261","s":[{"value":["sort by \n  \t\t\t"]},{"r":"260","s":[{"r":"259","s":[{"value":["end of "]},{"r":"258","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]},{"value":[",\n  \t"]},{"r":"272","s":[{"value":["VisitStart",": "]},{"r":"271","s":[{"value":["Coalesce","("]},{"r":"267","s":[{"value":["start of "]},{"r":"266","s":[{"r":"265","s":[{"value":["ObsVisit"]}]},{"value":["."]},{"r":"266","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"270","s":[{"value":["start of "]},{"r":"269","s":[{"r":"268","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"269","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]}]},{"value":[",\n  \t"]},{"r":"286","s":[{"value":["EDVisit",": "]},{"r":"285","s":[{"value":["Last","("]},{"r":"284","s":[{"s":[{"r":"274","s":[{"r":"273","s":[{"r":"273","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"279","s":[{"value":["where "]},{"r":"279","s":[{"r":"276","s":[{"r":"275","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"276","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"279","s":[{"value":["ends "]},{"r":"278","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"277","s":[{"value":["VisitStart"]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"283","s":[{"value":["sort by \n  \t\t\t"]},{"r":"282","s":[{"r":"281","s":[{"value":["end of "]},{"r":"280","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"296","s":[{"value":["return "]},{"r":"295","s":[{"value":["Interval["]},{"r":"291","s":[{"value":["Coalesce","("]},{"r":"289","s":[{"value":["start of "]},{"r":"288","s":[{"r":"287","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"288","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"290","s":[{"value":["VisitStart"]}]},{"value":[")"]}]},{"value":[", \n  \t"]},{"r":"294","s":[{"value":["end of "]},{"r":"293","s":[{"r":"292","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"293","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["]"]}]}]}]}]}]}}],"expression":{"localId":"297","locator":"113:3-126:31","type":"Query","source":[{"localId":"248","locator":"113:3-113:17","alias":"Visit","expression":{"localId":"247","locator":"113:3-113:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"264","locator":"114:8-118:4","identifier":"ObsVisit","expression":{"localId":"263","locator":"114:18-118:4","type":"Last","source":{"localId":"262","locator":"114:23-117:26","type":"Query","source":[{"localId":"250","locator":"114:23-114:78","alias":"LastObs","expression":{"localId":"249","locator":"114:23-114:70","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"114:48-114:69","name":"Observation Services","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"257","locator":"115:6-115:96","type":"And","operand":[{"locator":"115:40-115:53","type":"In","operand":[{"locator":"115:35-115:38","type":"End","operand":{"localId":"252","locator":"115:12-115:33","path":"relevantPeriod","scope":"LastObs","type":"Property"}},{"locator":"115:40-115:53","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"115:68-115:96","type":"Subtract","operand":[{"localId":"255","locator":"115:68-115:96","type":"Start","operand":{"localId":"254","locator":"115:77-115:96","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"256","locator":"115:40-115:45","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"255","locator":"115:68-115:96","type":"Start","operand":{"localId":"254","locator":"115:77-115:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"115:40-115:53","type":"Not","operand":{"locator":"115:40-115:53","type":"IsNull","operand":{"localId":"255","locator":"115:68-115:96","type":"Start","operand":{"localId":"254","locator":"115:77-115:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"261","locator":"116:6-117:26","by":[{"localId":"260","locator":"117:6-117:26","direction":"asc","type":"ByExpression","expression":{"localId":"259","locator":"117:6-117:26","type":"End","operand":{"localId":"258","locator":"117:13-117:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}},{"localId":"272","locator":"119:4-119:88","identifier":"VisitStart","expression":{"localId":"271","locator":"119:16-119:88","type":"Coalesce","operand":[{"localId":"267","locator":"119:25-119:56","type":"Start","operand":{"localId":"266","locator":"119:34-119:56","path":"relevantPeriod","type":"Property","source":{"localId":"265","locator":"119:34-119:41","name":"ObsVisit","type":"QueryLetRef"}}},{"localId":"270","locator":"119:59-119:87","type":"Start","operand":{"localId":"269","locator":"119:68-119:87","path":"relevantPeriod","scope":"Visit","type":"Property"}}]}},{"localId":"286","locator":"120:4-124:4","identifier":"EDVisit","expression":{"localId":"285","locator":"120:13-124:4","type":"Last","source":{"localId":"284","locator":"120:18-123:26","type":"Query","source":[{"localId":"274","locator":"120:18-120:78","alias":"LastED","expression":{"localId":"273","locator":"120:18-120:71","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"120:43-120:70","name":"Emergency Department Visit","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"279","locator":"121:6-121:76","type":"And","operand":[{"locator":"121:39-121:52","type":"In","operand":[{"locator":"121:34-121:37","type":"End","operand":{"localId":"276","locator":"121:12-121:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"121:39-121:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"121:67-121:76","type":"Subtract","operand":[{"localId":"277","locator":"121:67-121:76","name":"VisitStart","type":"QueryLetRef"},{"localId":"278","locator":"121:39-121:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"277","locator":"121:67-121:76","name":"VisitStart","type":"QueryLetRef"}}]},{"locator":"121:39-121:52","type":"Not","operand":{"locator":"121:39-121:52","type":"IsNull","operand":{"localId":"277","locator":"121:67-121:76","name":"VisitStart","type":"QueryLetRef"}}}]},"sort":{"localId":"283","locator":"122:6-123:26","by":[{"localId":"282","locator":"123:6-123:26","direction":"asc","type":"ByExpression","expression":{"localId":"281","locator":"123:6-123:26","type":"End","operand":{"localId":"280","locator":"123:13-123:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"296","locator":"125:4-126:31","expression":{"localId":"295","locator":"125:11-126:31","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"291","locator":"125:20-125:72","type":"Coalesce","operand":[{"localId":"289","locator":"125:29-125:59","type":"Start","operand":{"localId":"288","locator":"125:38-125:59","path":"relevantPeriod","type":"Property","source":{"localId":"287","locator":"125:38-125:44","name":"EDVisit","type":"QueryLetRef"}}},{"localId":"290","locator":"125:62-125:71","name":"VisitStart","type":"QueryLetRef"}]},"high":{"localId":"294","locator":"126:4-126:30","type":"End","operand":{"localId":"293","locator":"126:11-126:30","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"246","locator":"112:60-112:81","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"303","locator":"129:1-130:61","name":"HospitalizationWithObservationLengthofStay","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"303","s":[{"value":["/*Hospitalization with Observation Length of Stay returns the length in days from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/","define function ","\"HospitalizationWithObservationLengthofStay\"","(","Encounter"," "]},{"r":"299","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"302","s":[{"r":"302","s":[{"value":["\"LengthInDays\"","("]},{"r":"301","s":[{"value":["\"HospitalizationWithObservation\"","("]},{"r":"300","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"302","locator":"130:3-130:61","name":"LengthInDays","type":"FunctionRef","operand":[{"localId":"301","locator":"130:18-130:60","name":"HospitalizationWithObservation","type":"FunctionRef","operand":[{"localId":"300","locator":"130:51-130:59","name":"Encounter","type":"OperandRef"}]}]},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"299","locator":"129:72-129:93","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"324","locator":"133:1-138:3","name":"FirstInpatientIntensiveCareUnit","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"324","s":[{"value":["/*First Inpatient Intensive Care Unit returns the first intensive care unit for the given encounter, without considering any immediately prior emergency department visit.*/","define function ","\"FirstInpatientIntensiveCareUnit\"","(","Encounter"," "]},{"r":"304","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"323","s":[{"r":"323","s":[{"value":["First","("]},{"r":"322","s":[{"s":[{"r":"307","s":[{"r":"306","s":[{"value":["("]},{"r":"306","s":[{"r":"305","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"306","s":[{"value":["facilityLocations"]}]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n      "]},{"r":"317","s":[{"value":["where "]},{"r":"317","s":[{"r":"311","s":[{"r":"309","s":[{"r":"308","s":[{"value":["HospitalLocation"]}]},{"value":["."]},{"r":"309","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"310","s":[{"value":["\"Intensive Care Unit\""]}]}]},{"value":["\n        and "]},{"r":"316","s":[{"r":"313","s":[{"r":"312","s":[{"value":["HospitalLocation"]}]},{"value":["."]},{"r":"313","s":[{"value":["locationPeriod"]}]}]},{"r":"316","value":[" ","during"," "]},{"r":"315","s":[{"r":"314","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"315","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n      "]},{"r":"321","s":[{"value":["sort by "]},{"r":"320","s":[{"r":"319","s":[{"value":["start of "]},{"r":"318","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]}]}]}}],"expression":{"localId":"323","locator":"134:3-138:3","type":"First","source":{"localId":"322","locator":"134:9-137:37","type":"Query","source":[{"localId":"307","locator":"134:9-134:53","alias":"HospitalLocation","expression":{"localId":"306","locator":"134:9-134:37","path":"facilityLocations","type":"Property","source":{"localId":"305","locator":"134:10-134:18","name":"Encounter","type":"OperandRef"}}}],"relationship":[],"where":{"localId":"317","locator":"135:7-136:75","type":"And","operand":[{"localId":"311","locator":"135:13-135:58","type":"InValueSet","code":{"localId":"309","locator":"135:13-135:33","path":"code","scope":"HospitalLocation","type":"Property"},"valueset":{"localId":"310","locator":"135:38-135:58","name":"Intensive Care Unit","type":"ValueSetRef"}},{"localId":"316","locator":"136:13-136:75","type":"IncludedIn","operand":[{"localId":"313","locator":"136:13-136:43","path":"locationPeriod","scope":"HospitalLocation","type":"Property"},{"localId":"315","locator":"136:52-136:75","path":"relevantPeriod","type":"Property","source":{"localId":"314","locator":"136:52-136:60","name":"Encounter","type":"OperandRef"}}]}]},"sort":{"localId":"321","locator":"137:7-137:37","by":[{"localId":"320","locator":"137:15-137:37","direction":"asc","type":"ByExpression","expression":{"localId":"319","locator":"137:15-137:37","type":"Start","operand":{"localId":"318","locator":"137:24-137:37","name":"locationPeriod","type":"IdentifierRef"}}}]}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"304","locator":"133:61-133:82","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"342","locator":"141:1-144:35","name":"NormalizeInterval","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"342","s":[{"value":["/*Given a datetime and a period, returns the period (if a period is provided) or the interval beginning and ending on the datetime (if a datetime is provided)*/","define function ","\"NormalizeInterval\"","(","pointInTime"," "]},{"r":"325","s":[{"value":["DateTime"]}]},{"value":[", ","period"," "]},{"r":"327","s":[{"value":["Interval\u003c"]},{"r":"326","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"341","s":[{"r":"341","s":[{"value":["if "]},{"r":"329","s":[{"r":"328","s":[{"value":["pointInTime"]}]},{"value":[" is not null"]}]},{"value":[" then "]},{"r":"332","s":[{"value":["Interval["]},{"r":"330","s":[{"value":["pointInTime"]}]},{"value":[", "]},{"r":"331","s":[{"value":["pointInTime"]}]},{"value":["]"]}]},{"value":["\n    else "]},{"r":"340","s":[{"value":["if "]},{"r":"334","s":[{"r":"333","s":[{"value":["period"]}]},{"value":[" is not null"]}]},{"value":[" then "]},{"r":"335","s":[{"value":["period"]}]},{"value":[" \n    else "]},{"r":"339","s":[{"r":"336","value":["null"," as "]},{"r":"338","s":[{"value":["Interval\u003c"]},{"r":"337","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}]}]}]}]}}],"expression":{"localId":"341","locator":"142:3-144:35","type":"If","condition":{"localId":"329","locator":"142:6-142:28","type":"Not","operand":{"locator":"142:6-142:28","type":"IsNull","operand":{"localId":"328","locator":"142:6-142:16","name":"pointInTime","type":"OperandRef"}}},"then":{"localId":"332","locator":"142:35-142:68","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"330","locator":"142:44-142:54","name":"pointInTime","type":"OperandRef"},"high":{"localId":"331","locator":"142:57-142:67","name":"pointInTime","type":"OperandRef"}},"else":{"localId":"340","locator":"143:10-144:35","type":"If","condition":{"localId":"334","locator":"143:13-143:30","type":"Not","operand":{"locator":"143:13-143:30","type":"IsNull","operand":{"localId":"333","locator":"143:13-143:18","name":"period","type":"OperandRef"}}},"then":{"localId":"335","locator":"143:37-143:42","name":"period","type":"OperandRef"},"else":{"localId":"339","locator":"144:10-144:35","strict":false,"type":"As","operand":{"localId":"336","locator":"144:10-144:13","type":"Null"},"asTypeSpecifier":{"localId":"338","locator":"144:18-144:35","type":"IntervalTypeSpecifier","pointType":{"localId":"337","locator":"144:27-144:34","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}},"operand":[{"name":"pointInTime","operandTypeSpecifier":{"localId":"325","locator":"141:49-141:56","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"name":"period","operandTypeSpecifier":{"localId":"327","locator":"141:66-141:83","type":"IntervalTypeSpecifier","pointType":{"localId":"326","locator":"141:75-141:82","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"355","locator":"147:1-150:3","name":"HasStart","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"355","s":[{"value":["/*Given an interval, return true if the interval has a starting boundary specified (i.e. the start of the interval is not null and not the minimum DateTime value)*/","define function ","\"HasStart\"","(","period"," "]},{"r":"344","s":[{"value":["Interval\u003c"]},{"r":"343","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"354","s":[{"r":"354","s":[{"value":["not "]},{"r":"353","s":[{"value":["( "]},{"r":"353","s":[{"r":"347","s":[{"r":"346","s":[{"value":["start of "]},{"r":"345","s":[{"value":["period"]}]}]},{"value":[" is null"]}]},{"value":["\n      or "]},{"r":"352","s":[{"r":"349","s":[{"value":["start of "]},{"r":"348","s":[{"value":["period"]}]}]},{"value":[" ","="," "]},{"r":"351","s":[{"value":["minimum"," "]},{"r":"350","s":[{"value":["DateTime"]}]}]}]}]},{"value":["\n  )"]}]}]}]}]}}],"expression":{"localId":"354","locator":"148:3-150:3","type":"Not","operand":{"localId":"353","locator":"148:7-150:3","type":"Or","operand":[{"localId":"347","locator":"148:9-148:31","type":"IsNull","operand":{"localId":"346","locator":"148:9-148:23","type":"Start","operand":{"localId":"345","locator":"148:18-148:23","name":"period","type":"OperandRef"}}},{"localId":"352","locator":"149:10-149:43","type":"Equal","operand":[{"localId":"349","locator":"149:10-149:24","type":"Start","operand":{"localId":"348","locator":"149:19-149:24","name":"period","type":"OperandRef"}},{"localId":"351","locator":"149:28-149:43","valueType":"{urn:hl7-org:elm-types:r1}DateTime","type":"MinValue"}]}]}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"344","locator":"147:35-147:52","type":"IntervalTypeSpecifier","pointType":{"localId":"343","locator":"147:44-147:51","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"368","locator":"153:1-158:3","name":"HasEnd","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"368","s":[{"value":["/*Given an interval, return true if the interval has an ending boundary specified (i.e. the end of the interval is not null and not the maximum DateTime value)*/","define function ","\"HasEnd\"","(","period"," "]},{"r":"357","s":[{"value":["Interval\u003c"]},{"r":"356","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"367","s":[{"r":"367","s":[{"value":["not "]},{"r":"366","s":[{"value":["( \n    "]},{"r":"366","s":[{"r":"360","s":[{"r":"359","s":[{"value":["end of "]},{"r":"358","s":[{"value":["period"]}]}]},{"value":[" is null"]}]},{"value":["\n      or \n      "]},{"r":"365","s":[{"r":"362","s":[{"value":["end of "]},{"r":"361","s":[{"value":["period"]}]}]},{"value":[" ","="," "]},{"r":"364","s":[{"value":["maximum"," "]},{"r":"363","s":[{"value":["DateTime"]}]}]}]}]},{"value":["\n  )"]}]}]}]}]}}],"expression":{"localId":"367","locator":"154:3-158:3","type":"Not","operand":{"localId":"366","locator":"154:7-158:3","type":"Or","operand":[{"localId":"360","locator":"155:5-155:25","type":"IsNull","operand":{"localId":"359","locator":"155:5-155:17","type":"End","operand":{"localId":"358","locator":"155:12-155:17","name":"period","type":"OperandRef"}}},{"localId":"365","locator":"157:7-157:38","type":"Equal","operand":[{"localId":"362","locator":"157:7-157:19","type":"End","operand":{"localId":"361","locator":"157:14-157:19","name":"period","type":"OperandRef"}},{"localId":"364","locator":"157:23-157:38","valueType":"{urn:hl7-org:elm-types:r1}DateTime","type":"MaxValue"}]}]}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"357","locator":"153:33-153:50","type":"IntervalTypeSpecifier","pointType":{"localId":"356","locator":"153:42-153:49","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"378","locator":"161:1-164:24","name":"Latest","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"378","s":[{"value":["/*Given an interval, return the ending point if the interval has an ending boundary specified, otherwise, return the starting point*/","define function ","\"Latest\"","(","period"," "]},{"r":"370","s":[{"value":["Interval\u003c"]},{"r":"369","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"377","s":[{"r":"377","s":[{"value":["if "]},{"r":"372","s":[{"value":["( "]},{"r":"372","s":[{"value":["HasEnd","("]},{"r":"371","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":[" then \n  "]},{"r":"374","s":[{"value":["end of "]},{"r":"373","s":[{"value":["period"]}]}]},{"value":[" \n    else "]},{"r":"376","s":[{"value":["start of "]},{"r":"375","s":[{"value":["period"]}]}]}]}]}]}}],"expression":{"localId":"377","locator":"162:3-164:24","type":"If","condition":{"localId":"372","locator":"162:6-162:22","name":"HasEnd","type":"FunctionRef","operand":[{"localId":"371","locator":"162:15-162:20","name":"period","type":"OperandRef"}]},"then":{"localId":"374","locator":"163:3-163:15","type":"End","operand":{"localId":"373","locator":"163:10-163:15","name":"period","type":"OperandRef"}},"else":{"localId":"376","locator":"164:10-164:24","type":"Start","operand":{"localId":"375","locator":"164:19-164:24","name":"period","type":"OperandRef"}}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"370","locator":"161:33-161:50","type":"IntervalTypeSpecifier","pointType":{"localId":"369","locator":"161:42-161:49","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"388","locator":"167:1-170:15","name":"Earliest","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"388","s":[{"value":["/*Given an interval, return the starting point if the interval has a starting boundary specified, otherwise, return the ending point*/","define function ","\"Earliest\"","(","period"," "]},{"r":"380","s":[{"value":["Interval\u003c"]},{"r":"379","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"387","s":[{"r":"387","s":[{"value":["if "]},{"r":"382","s":[{"value":["( "]},{"r":"382","s":[{"value":["HasStart","("]},{"r":"381","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":[" then "]},{"r":"384","s":[{"value":["start of "]},{"r":"383","s":[{"value":["period"]}]}]},{"value":[" \n    else \n  "]},{"r":"386","s":[{"value":["end of "]},{"r":"385","s":[{"value":["period"]}]}]}]}]}]}}],"expression":{"localId":"387","locator":"168:3-170:15","type":"If","condition":{"localId":"382","locator":"168:6-168:24","name":"HasStart","type":"FunctionRef","operand":[{"localId":"381","locator":"168:17-168:22","name":"period","type":"OperandRef"}]},"then":{"localId":"384","locator":"168:31-168:45","type":"Start","operand":{"localId":"383","locator":"168:40-168:45","name":"period","type":"OperandRef"}},"else":{"localId":"386","locator":"170:3-170:15","type":"End","operand":{"localId":"385","locator":"170:10-170:15","name":"period","type":"OperandRef"}}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"380","locator":"167:35-167:52","type":"IntervalTypeSpecifier","pointType":{"localId":"379","locator":"167:44-167:51","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"396","locator":"173:1-174:48","name":"LatestOf","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"396","s":[{"value":["/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the ending point of the period if the period has an ending boundary specified, otherwise returns the starting point of the interval*/","define function ","\"LatestOf\"","(","pointInTime"," "]},{"r":"389","s":[{"value":["DateTime"]}]},{"value":[", ","period"," "]},{"r":"391","s":[{"value":["Interval\u003c"]},{"r":"390","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"395","s":[{"r":"395","s":[{"value":["Latest","("]},{"r":"394","s":[{"value":["NormalizeInterval","("]},{"r":"392","s":[{"value":["pointInTime"]}]},{"value":[", "]},{"r":"393","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"395","locator":"174:3-174:48","name":"Latest","type":"FunctionRef","operand":[{"localId":"394","locator":"174:10-174:47","name":"NormalizeInterval","type":"FunctionRef","operand":[{"localId":"392","locator":"174:28-174:38","name":"pointInTime","type":"OperandRef"},{"localId":"393","locator":"174:41-174:46","name":"period","type":"OperandRef"}]}]},"operand":[{"name":"pointInTime","operandTypeSpecifier":{"localId":"389","locator":"173:40-173:47","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"name":"period","operandTypeSpecifier":{"localId":"391","locator":"173:57-173:74","type":"IntervalTypeSpecifier","pointType":{"localId":"390","locator":"173:66-173:73","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"404","locator":"177:1-178:50","name":"EarliestOf","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"404","s":[{"value":["/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the starting point of the period if the period has a starting boundary specified, otherwise returns the ending point of the period*/","define function ","\"EarliestOf\"","(","pointInTime"," "]},{"r":"397","s":[{"value":["DateTime"]}]},{"value":[", ","period"," "]},{"r":"399","s":[{"value":["Interval\u003c"]},{"r":"398","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"403","s":[{"r":"403","s":[{"value":["Earliest","("]},{"r":"402","s":[{"value":["NormalizeInterval","("]},{"r":"400","s":[{"value":["pointInTime"]}]},{"value":[", "]},{"r":"401","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"403","locator":"178:3-178:50","name":"Earliest","type":"FunctionRef","operand":[{"localId":"402","locator":"178:12-178:49","name":"NormalizeInterval","type":"FunctionRef","operand":[{"localId":"400","locator":"178:30-178:40","name":"pointInTime","type":"OperandRef"},{"localId":"401","locator":"178:43-178:48","name":"period","type":"OperandRef"}]}]},"operand":[{"name":"pointInTime","operandTypeSpecifier":{"localId":"397","locator":"177:42-177:49","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"name":"period","operandTypeSpecifier":{"localId":"399","locator":"177:59-177:76","type":"IntervalTypeSpecifier","pointType":{"localId":"398","locator":"177:68-177:75","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]}]}}},"elm_annotations":{"statements":[{"children":[{"children":[{"children":[{"text":"define \"ED Encounter\":\n  "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"10"}],"ref_id":"11"}],"define_name":"ED Encounter"},{"children":[{"children":[{"children":[{"text":"/*calculates the difference in calendar days between the start and end of the given interval.*/define function \"LengthInDays\"(Value "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"16"},{"children":[{"text":"\u003e"}]}],"ref_id":"17"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"difference in days between "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"Value"}]}],"node_type":"OperandRef","ref_id":"18"}],"node_type":"Start","ref_id":"19"},{"children":[{"text":" and "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"Value"}]}],"node_type":"OperandRef","ref_id":"20"}],"node_type":"End","ref_id":"21"}],"node_type":"DifferenceBetween","ref_id":"22"}],"node_type":"DifferenceBetween","ref_id":"22"}],"ref_id":"23"}],"define_name":"LengthInDays"},{"children":[{"children":[{"children":[{"text":"define \"Inpatient Encounter\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Encounter Inpatient\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"12"}],"node_type":"Retrieve","ref_id":"12"},{"children":[{"text":" EncounterInpatient"}]}],"ref_id":"13"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"LengthInDays\"("}]},{"children":[{"children":[{"children":[{"text":"EncounterInpatient"}]}],"ref_id":"14"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"15"}],"node_type":"Property","ref_id":"15"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"24"},{"children":[{"text":"\u003c= 120"}],"node_type":"Literal","ref_id":"25"}],"node_type":"LessOrEqual","ref_id":"26"},{"children":[{"text":"\n      and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"EncounterInpatient"}]}],"ref_id":"27"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"28"}],"node_type":"Property","ref_id":"28"},{"children":[{"text":" ends during day of "}],"node_type":"In","ref_id":"30"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"29"}],"node_type":"In","ref_id":"30"}],"ref_id":"31"}],"ref_id":"31"}],"node_type":"Query","ref_id":"32"}],"ref_id":"33"}],"define_name":"Inpatient Encounter"},{"children":[{"children":[]},{"children":[]},{"children":[]},{"children":[{"children":[{"text":"/*@description: Returns an interval of date values extracted from the input interval of date-time values\n@comment: This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability.*/define function \"ToDateInterval\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"34"},{"children":[{"text":"\u003e"}]}],"ref_id":"35"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"36"}],"node_type":"Start","ref_id":"37"}],"ref_id":"38"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"39"}],"node_type":"End","ref_id":"40"}],"ref_id":"41"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"42"}],"node_type":"Interval","ref_id":"42"}],"ref_id":"43"}],"define_name":"ToDateInterval"},{"children":[{"children":[{"children":[{"text":"/*returns list of all locations within an encounter, including locations for immediately prior ED visit.*/define function \"HospitalizationLocations\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"47"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"48"},{"children":[{"text":" Visit"}]}],"ref_id":"49"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"50"}],"node_type":"Retrieve","ref_id":"50"},{"children":[{"text":" LastED"}]}],"ref_id":"51"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"52"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"53"}],"node_type":"Property","ref_id":"53"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"57"},{"children":[{"text":" or less on or before"}]}],"ref_id":"58"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"54"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"55"}],"node_type":"Property","ref_id":"55"}],"node_type":"Start","ref_id":"56"}],"ref_id":"58"}],"ref_id":"58"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"59"}],"node_type":"End","ref_id":"60"}],"ref_id":"61"}],"ref_id":"62"}],"ref_id":"63"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"64"}],"ref_id":"65"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"node_type":"QueryLetRef","ref_id":"66"},{"children":[{"text":" is null"}]}],"ref_id":"67"},{"children":[{"text":" then "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"68"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"ref_id":"69"}],"ref_id":"69"},{"children":[{"text":" \n      else "}]},{"children":[{"children":[{"text":"flatten "}]},{"children":[{"children":[{"text":"{ "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"70"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"ref_id":"71"}],"ref_id":"71"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"72"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"ref_id":"73"}],"ref_id":"73"},{"children":[{"text":" }"}]}],"node_type":"List","ref_id":"74"}],"ref_id":"75"}],"node_type":"If","ref_id":"76"}],"ref_id":"77"}],"node_type":"Query","ref_id":"78"}],"node_type":"Query","ref_id":"78"}],"ref_id":"79"}],"define_name":"HospitalizationLocations"},{"children":[{"children":[{"children":[{"text":"/*Returns the arrival time in the ED for the encounter.*/define function \"EmergencyDepartmentArrivalTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"80"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"\"HospitalizationLocations\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"81"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"82"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"82"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"83"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"HospitalLocation"}]}],"ref_id":"84"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"85"}],"ref_id":"85"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}],"ref_id":"86"}],"ref_id":"87"}],"ref_id":"87"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"88"}],"node_type":"Start","ref_id":"89"}],"ref_id":"90"}],"ref_id":"91"}],"ref_id":"92"},{"children":[{"text":"\n  )"}]}],"ref_id":"93"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"94"}],"node_type":"Property","ref_id":"94"}],"node_type":"Start","ref_id":"95"}],"node_type":"Start","ref_id":"95"}],"ref_id":"96"}],"define_name":"EmergencyDepartmentArrivalTime"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization returns the total interval for admission to discharge for the given encounter, or for the admission of any immediately prior emergency department visit to the discharge of the given encounter.*/define function \"Hospitalization\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"99"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"100"},{"children":[{"text":" Visit"}]}],"ref_id":"101"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"102"}],"node_type":"Retrieve","ref_id":"102"},{"children":[{"text":" LastED"}]}],"ref_id":"103"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"104"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"105"}],"node_type":"Property","ref_id":"105"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"109"},{"children":[{"text":" or less on or before"}]}],"ref_id":"110"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"106"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"107"}],"node_type":"Property","ref_id":"107"}],"node_type":"Start","ref_id":"108"}],"ref_id":"110"}],"ref_id":"110"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"111"}],"node_type":"End","ref_id":"112"}],"ref_id":"113"}],"ref_id":"114"}],"ref_id":"115"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"116"}],"ref_id":"117"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"118"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"119"}],"node_type":"Property","ref_id":"119"}],"node_type":"Start","ref_id":"120"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"121"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"122"}],"node_type":"Property","ref_id":"122"}],"node_type":"Start","ref_id":"123"},{"children":[{"text":")"}]}],"ref_id":"124"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"125"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"126"}],"node_type":"Property","ref_id":"126"}],"ref_id":"127"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"128"}],"ref_id":"129"}],"node_type":"Query","ref_id":"130"}],"node_type":"Query","ref_id":"130"}],"ref_id":"131"}],"define_name":"Hospitalization"},{"children":[{"children":[{"children":[{"text":"/*Returns admission time for an encounter or for immediately prior emergency department visit.*/define function \"HospitalAdmissionTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"97"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"\"Hospitalization\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"98"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"132"}],"node_type":"Start","ref_id":"133"}],"node_type":"Start","ref_id":"133"}],"ref_id":"134"}],"define_name":"HospitalAdmissionTime"},{"children":[{"children":[{"children":[{"text":"/*Returns earliest arrival time for an encounter including any prior ED visit.*/define function \"HospitalArrivalTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"135"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"\"HospitalizationLocations\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"136"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"137"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"137"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"138"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"139"}],"node_type":"Start","ref_id":"140"}],"ref_id":"141"}],"ref_id":"142"}],"ref_id":"143"},{"children":[{"text":"\n  )"}]}],"ref_id":"144"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"145"}],"node_type":"Property","ref_id":"145"}],"node_type":"Start","ref_id":"146"}],"node_type":"Start","ref_id":"146"}],"ref_id":"147"}],"define_name":"HospitalArrivalTime"},{"children":[{"children":[{"children":[{"text":"/*Returns the length of stay in days (i.e. the number of days between admission and discharge) for the given encounter, or from the admission of any immediately prior emergency department visit to the discharge of the encounter*/define function \"HospitalizationLengthofStay\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"150"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"LengthInDays("}]},{"children":[{"children":[{"text":"\"Hospitalization\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"151"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"152"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"153"}],"node_type":"FunctionRef","ref_id":"153"}],"ref_id":"154"}],"define_name":"HospitalizationLengthofStay"},{"children":[{"children":[{"children":[{"text":"/*Returns the latest departure time for encounter including any prior ED visit.*/define function \"HospitalDepartureTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"155"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"\"HospitalizationLocations\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"156"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"157"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"157"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"158"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"159"}],"node_type":"Start","ref_id":"160"}],"ref_id":"161"}],"ref_id":"162"}],"ref_id":"163"},{"children":[{"text":"\n  )"}]}],"ref_id":"164"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"165"}],"node_type":"Property","ref_id":"165"}],"node_type":"End","ref_id":"166"}],"node_type":"End","ref_id":"166"}],"ref_id":"167"}],"define_name":"HospitalDepartureTime"},{"children":[{"children":[{"children":[{"text":"/*Hospital Discharge Time returns the discharge time for an encounter*/define function \"HospitalDischargeTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"168"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"169"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"170"}],"node_type":"Property","ref_id":"170"}],"node_type":"End","ref_id":"171"}],"node_type":"End","ref_id":"171"}],"ref_id":"172"}],"define_name":"HospitalDischargeTime"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization with Observation and Outpatient Surgery Service returns the total interval from the start of any immediately prior emergency department visit, outpatient surgery visit or observation visit to the discharge of the given encounter.*/define function \"HospitalizationWithObservationAndOutpatientSurgeryService\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"173"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"174"},{"children":[{"text":" Visit"}]}],"ref_id":"175"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"ObsVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Observation Services\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"176"}],"node_type":"Retrieve","ref_id":"176"},{"children":[{"text":" LastObs"}]}],"ref_id":"177"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastObs"}]}],"ref_id":"178"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"179"}],"node_type":"Property","ref_id":"179"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"183"},{"children":[{"text":" or less on or before"}]}],"ref_id":"184"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"180"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"181"}],"node_type":"Property","ref_id":"181"}],"node_type":"Start","ref_id":"182"}],"ref_id":"184"}],"ref_id":"184"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"185"}],"node_type":"End","ref_id":"186"}],"ref_id":"187"}],"ref_id":"188"}],"ref_id":"189"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"190"}],"ref_id":"191"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"VisitStart: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"ObsVisit"}]}],"ref_id":"192"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"193"}],"node_type":"Property","ref_id":"193"}],"node_type":"Start","ref_id":"194"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"195"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"196"}],"node_type":"Property","ref_id":"196"}],"node_type":"Start","ref_id":"197"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"198"}],"ref_id":"199"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"200"}],"node_type":"Retrieve","ref_id":"200"},{"children":[{"text":" LastED"}]}],"ref_id":"201"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"202"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"203"}],"node_type":"Property","ref_id":"203"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"205"},{"children":[{"text":" or less on or before"}]}],"ref_id":"206"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"204"}],"ref_id":"206"}],"ref_id":"206"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"207"}],"node_type":"End","ref_id":"208"}],"ref_id":"209"}],"ref_id":"210"}],"ref_id":"211"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"212"}],"ref_id":"213"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"VisitStartWithED: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"214"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"215"}],"node_type":"Property","ref_id":"215"}],"node_type":"Start","ref_id":"216"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"217"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"218"}],"ref_id":"219"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"OutpatientSurgeryVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Outpatient Surgery Service\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"220"}],"node_type":"Retrieve","ref_id":"220"},{"children":[{"text":" LastSurgeryOP"}]}],"ref_id":"221"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastSurgeryOP"}]}],"ref_id":"222"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"223"}],"node_type":"Property","ref_id":"223"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"225"},{"children":[{"text":" or less on or before"}]}],"ref_id":"226"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"VisitStartWithED"}]}],"node_type":"QueryLetRef","ref_id":"224"}],"ref_id":"226"}],"ref_id":"226"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"227"}],"node_type":"End","ref_id":"228"}],"ref_id":"229"}],"ref_id":"230"}],"ref_id":"231"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"232"}],"ref_id":"233"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"OutpatientSurgeryVisit"}]}],"ref_id":"234"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"235"}],"node_type":"Property","ref_id":"235"}],"node_type":"Start","ref_id":"236"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"VisitStartWithED"}]}],"node_type":"QueryLetRef","ref_id":"237"},{"children":[{"text":")"}]}],"ref_id":"238"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"239"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"240"}],"node_type":"Property","ref_id":"240"}],"ref_id":"241"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"242"}],"ref_id":"243"}],"node_type":"Query","ref_id":"244"}],"node_type":"Query","ref_id":"244"}],"ref_id":"245"}],"define_name":"HospitalizationWithObservationAndOutpatientSurgeryService"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization with Observation returns the total interval from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/define function \"HospitalizationWithObservation\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"246"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"247"},{"children":[{"text":" Visit"}]}],"ref_id":"248"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"ObsVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Observation Services\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"249"}],"node_type":"Retrieve","ref_id":"249"},{"children":[{"text":" LastObs"}]}],"ref_id":"250"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastObs"}]}],"ref_id":"251"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"252"}],"node_type":"Property","ref_id":"252"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"256"},{"children":[{"text":" or less on or before"}]}],"ref_id":"257"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"253"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"254"}],"node_type":"Property","ref_id":"254"}],"node_type":"Start","ref_id":"255"}],"ref_id":"257"}],"ref_id":"257"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"258"}],"node_type":"End","ref_id":"259"}],"ref_id":"260"}],"ref_id":"261"}],"ref_id":"262"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"263"}],"ref_id":"264"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"VisitStart: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"ObsVisit"}]}],"ref_id":"265"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"266"}],"node_type":"Property","ref_id":"266"}],"node_type":"Start","ref_id":"267"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"268"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"269"}],"node_type":"Property","ref_id":"269"}],"node_type":"Start","ref_id":"270"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"271"}],"ref_id":"272"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"273"}],"node_type":"Retrieve","ref_id":"273"},{"children":[{"text":" LastED"}]}],"ref_id":"274"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"275"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"276"}],"node_type":"Property","ref_id":"276"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"278"},{"children":[{"text":" or less on or before"}]}],"ref_id":"279"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"277"}],"ref_id":"279"}],"ref_id":"279"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"280"}],"node_type":"End","ref_id":"281"}],"ref_id":"282"}],"ref_id":"283"}],"ref_id":"284"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"285"}],"ref_id":"286"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"287"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"288"}],"node_type":"Property","ref_id":"288"}],"node_type":"Start","ref_id":"289"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"290"},{"children":[{"text":")"}]}],"ref_id":"291"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"292"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"293"}],"node_type":"Property","ref_id":"293"}],"ref_id":"294"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"295"}],"ref_id":"296"}],"node_type":"Query","ref_id":"297"}],"node_type":"Query","ref_id":"297"}],"ref_id":"298"}],"define_name":"HospitalizationWithObservation"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization with Observation Length of Stay returns the length in days from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/define function \"HospitalizationWithObservationLengthofStay\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"299"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"\"LengthInDays\"("}]},{"children":[{"children":[{"text":"\"HospitalizationWithObservation\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"300"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"301"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"302"}],"node_type":"FunctionRef","ref_id":"302"}],"ref_id":"303"}],"define_name":"HospitalizationWithObservationLengthofStay"},{"children":[{"children":[{"children":[{"text":"/*First Inpatient Intensive Care Unit returns the first intensive care unit for the given encounter, without considering any immediately prior emergency department visit.*/define function \"FirstInpatientIntensiveCareUnit\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"304"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"305"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"node_type":"Property","ref_id":"306"}],"node_type":"Property","ref_id":"306"},{"children":[{"text":")"}]}],"node_type":"Property","ref_id":"306"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"307"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"HospitalLocation"}]}],"ref_id":"308"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"309"}],"ref_id":"309"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Intensive Care Unit\""}]}],"ref_id":"310"}],"node_type":"InValueSet","ref_id":"311"},{"children":[{"text":"\n        and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"HospitalLocation"}]}],"ref_id":"312"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"313"}],"node_type":"Property","ref_id":"313"},{"children":[{"text":" during "}],"node_type":"IncludedIn","ref_id":"316"},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"314"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"315"}],"node_type":"Property","ref_id":"315"}],"node_type":"IncludedIn","ref_id":"316"}],"ref_id":"317"}],"ref_id":"317"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"318"}],"node_type":"Start","ref_id":"319"}],"ref_id":"320"}],"ref_id":"321"}],"ref_id":"322"},{"children":[{"text":"\n  )"}]}],"node_type":"First","ref_id":"323"}],"node_type":"First","ref_id":"323"}],"ref_id":"324"}],"define_name":"FirstInpatientIntensiveCareUnit"},{"children":[{"children":[{"children":[{"text":"/*Given a datetime and a period, returns the period (if a period is provided) or the interval beginning and ending on the datetime (if a datetime is provided)*/define function \"NormalizeInterval\"(pointInTime "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"325"},{"children":[{"text":", period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"326"},{"children":[{"text":"\u003e"}]}],"ref_id":"327"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"pointInTime"}]}],"node_type":"OperandRef","ref_id":"328"},{"children":[{"text":" is not null"}]}],"ref_id":"329"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"pointInTime"}]}],"ref_id":"330"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"pointInTime"}]}],"ref_id":"331"},{"children":[{"text":"]"}]}],"ref_id":"332"},{"children":[{"text":"\n    else "}]},{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"333"},{"children":[{"text":" is not null"}]}],"ref_id":"334"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"period"}]}],"ref_id":"335"},{"children":[{"text":" \n    else "}]},{"children":[{"children":[{"text":"null as "}],"node_type":"Null","ref_id":"336"},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"337"},{"children":[{"text":"\u003e"}]}],"ref_id":"338"}],"ref_id":"339"}],"ref_id":"340"}],"node_type":"If","ref_id":"341"}],"node_type":"If","ref_id":"341"}],"ref_id":"342"}],"define_name":"NormalizeInterval"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return true if the interval has a starting boundary specified (i.e. the start of the interval is not null and not the minimum DateTime value)*/define function \"HasStart\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"343"},{"children":[{"text":"\u003e"}]}],"ref_id":"344"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"not "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"345"}],"node_type":"Start","ref_id":"346"},{"children":[{"text":" is null"}]}],"node_type":"IsNull","ref_id":"347"},{"children":[{"text":"\n      or "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"348"}],"node_type":"Start","ref_id":"349"},{"children":[{"text":" = "}]},{"children":[{"children":[{"text":"minimum "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"350"}],"node_type":"MinValue","ref_id":"351"}],"node_type":"Equal","ref_id":"352"}],"node_type":"Or","ref_id":"353"},{"children":[{"text":"\n  )"}]}],"node_type":"Or","ref_id":"353"}],"node_type":"Not","ref_id":"354"}],"node_type":"Not","ref_id":"354"}],"ref_id":"355"}],"define_name":"HasStart"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return true if the interval has an ending boundary specified (i.e. the end of the interval is not null and not the maximum DateTime value)*/define function \"HasEnd\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"356"},{"children":[{"text":"\u003e"}]}],"ref_id":"357"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"not "}]},{"children":[{"children":[{"text":"( \n    "}]},{"children":[{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"358"}],"node_type":"End","ref_id":"359"},{"children":[{"text":" is null"}]}],"node_type":"IsNull","ref_id":"360"},{"children":[{"text":"\n      or \n      "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"361"}],"node_type":"End","ref_id":"362"},{"children":[{"text":" = "}]},{"children":[{"children":[{"text":"maximum "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"363"}],"node_type":"MaxValue","ref_id":"364"}],"node_type":"Equal","ref_id":"365"}],"node_type":"Or","ref_id":"366"},{"children":[{"text":"\n  )"}]}],"node_type":"Or","ref_id":"366"}],"node_type":"Not","ref_id":"367"}],"node_type":"Not","ref_id":"367"}],"ref_id":"368"}],"define_name":"HasEnd"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return the ending point if the interval has an ending boundary specified, otherwise, return the starting point*/define function \"Latest\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"369"},{"children":[{"text":"\u003e"}]}],"ref_id":"370"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"HasEnd("}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"371"},{"children":[{"text":")"}]}],"ref_id":"372"},{"children":[{"text":")"}]}],"ref_id":"372"},{"children":[{"text":" then \n  "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"373"}],"ref_id":"374"},{"children":[{"text":" \n    else "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"375"}],"ref_id":"376"}],"node_type":"If","ref_id":"377"}],"node_type":"If","ref_id":"377"}],"ref_id":"378"}],"define_name":"Latest"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return the starting point if the interval has a starting boundary specified, otherwise, return the ending point*/define function \"Earliest\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"379"},{"children":[{"text":"\u003e"}]}],"ref_id":"380"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"HasStart("}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"381"},{"children":[{"text":")"}]}],"ref_id":"382"},{"children":[{"text":")"}]}],"ref_id":"382"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"383"}],"ref_id":"384"},{"children":[{"text":" \n    else \n  "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"385"}],"ref_id":"386"}],"node_type":"If","ref_id":"387"}],"node_type":"If","ref_id":"387"}],"ref_id":"388"}],"define_name":"Earliest"},{"children":[{"children":[{"children":[{"text":"/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the ending point of the period if the period has an ending boundary specified, otherwise returns the starting point of the interval*/define function \"LatestOf\"(pointInTime "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"389"},{"children":[{"text":", period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"390"},{"children":[{"text":"\u003e"}]}],"ref_id":"391"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Latest("}]},{"children":[{"children":[{"text":"NormalizeInterval("}]},{"children":[{"children":[{"text":"pointInTime"}]}],"node_type":"OperandRef","ref_id":"392"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"393"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"394"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"395"}],"node_type":"FunctionRef","ref_id":"395"}],"ref_id":"396"}],"define_name":"LatestOf"},{"children":[{"children":[{"children":[{"text":"/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the starting point of the period if the period has a starting boundary specified, otherwise returns the ending point of the period*/define function \"EarliestOf\"(pointInTime "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"397"},{"children":[{"text":", period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"398"},{"children":[{"text":"\u003e"}]}],"ref_id":"399"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Earliest("}]},{"children":[{"children":[{"text":"NormalizeInterval("}]},{"children":[{"children":[{"text":"pointInTime"}]}],"node_type":"OperandRef","ref_id":"400"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"401"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"402"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"403"}],"node_type":"FunctionRef","ref_id":"403"}],"ref_id":"404"}],"define_name":"EarliestOf"}],"identifier":{"id":"MATGlobalCommonFunctions","version":"7.0.000"}},"is_main_library":false,"is_top_level":true,"library_name":"MATGlobalCommonFunctions","library_version":"7.0.000","statement_dependencies":[{"_id":"689263efe8da6d1c0d4fa9ec","statement_name":"NormalizeInterval"}]},{"_id":"689263dee8da6d1c0d4f9a91","cql":"library PalliativeCareExclusionECQM version '2.0.000'\n\nusing QDM version '5.6'\n\ninclude MATGlobalCommonFunctions version '7.0.000' called Global\n\ncodesystem \"ICD10CM\": 'urn:oid:2.16.840.1.113883.6.90' \ncodesystem \"LOINC\": 'urn:oid:2.16.840.1.113883.6.1' \n\nvalueset \"Palliative Care Encounter\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1090' \nvalueset \"Palliative Care Intervention\": 'urn:oid:2.16.840.1.113883.3.464.1003.198.12.1135' \n\ncode \"Encounter for palliative care\": 'Z51.5' from \"ICD10CM\" display 'Encounter for palliative care'\ncode \"Functional Assessment of Chronic Illness Therapy - Palliative Care Questionnaire (FACIT-Pal)\": '71007-9' from \"LOINC\" display 'Functional Assessment of Chronic Illness Therapy - Palliative Care Questionnaire (FACIT-Pal)'\n\nparameter \"Measurement Period\" Interval\u003cDateTime\u003e\n\ncontext Patient\n\ndefine \"Palliative Care in the Measurement Period\":\n  exists ( [\"Assessment, Performed\": \"Functional Assessment of Chronic Illness Therapy - Palliative Care Questionnaire (FACIT-Pal)\"] PalliativeAssessment\n      where Global.\"NormalizeInterval\"(PalliativeAssessment.relevantDatetime, PalliativeAssessment.relevantPeriod) overlaps \"Measurement Period\"\n  )\n  or exists ([\"Diagnosis\": \"Encounter for palliative care\"] PalliativeDiagnosis\n  where PalliativeDiagnosis.prevalencePeriod overlaps \"Measurement Period\")\n    or exists ( [\"Encounter, Performed\": \"Palliative Care Encounter\"] PalliativeEncounter\n        where PalliativeEncounter.relevantPeriod overlaps \"Measurement Period\"\n    )\n    or exists ( [\"Intervention, Performed\": \"Palliative Care Intervention\"] PalliativeIntervention\n        where Global.\"NormalizeInterval\"(PalliativeIntervention.relevantDatetime, PalliativeIntervention.relevantPeriod) overlaps \"Measurement Period\"\n    )\n\n","elm":{"library":{"annotation":[{"translatorOptions":"EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion,DisableMethodInvocation","type":"CqlToElmInfo"},{"type":"Annotation","s":{"r":"57","s":[{"value":["","library PalliativeCareExclusionECQM version '2.0.000'"]}]}}],"identifier":{"id":"PalliativeCareExclusionECQM","version":"2.0.000"},"schemaIdentifier":{"id":"urn:hl7-org:elm","version":"r1"},"usings":{"def":[{"localIdentifier":"System","uri":"urn:hl7-org:elm-types:r1"},{"localId":"1","locator":"3:1-3:23","localIdentifier":"QDM","uri":"urn:healthit-gov:qdm:v5_6","version":"5.6","annotation":[{"type":"Annotation","s":{"r":"1","s":[{"value":["","using "]},{"s":[{"value":["QDM"]}]},{"value":[" version ","'5.6'"]}]}}]}]},"includes":{"def":[{"localId":"2","locator":"5:1-5:64","localIdentifier":"Global","path":"MATGlobalCommonFunctions","version":"7.0.000","annotation":[{"type":"Annotation","s":{"r":"2","s":[{"value":["","include "]},{"s":[{"value":["MATGlobalCommonFunctions"]}]},{"value":[" version ","'7.0.000'"," called ","Global"]}]}}]}]},"parameters":{"def":[{"localId":"13","locator":"16:1-16:49","name":"Measurement Period","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"13","s":[{"value":["","parameter ","\"Measurement Period\""," "]},{"r":"12","s":[{"value":["Interval\u003c"]},{"r":"11","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}}],"parameterTypeSpecifier":{"localId":"12","locator":"16:32-16:49","type":"IntervalTypeSpecifier","pointType":{"localId":"11","locator":"16:41-16:48","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},"codeSystems":{"def":[{"localId":"3","locator":"7:1-7:54","name":"ICD10CM","id":"2.16.840.1.113883.6.90","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"3","s":[{"value":["","codesystem ","\"ICD10CM\"",": ","'urn:oid:2.16.840.1.113883.6.90'"]}]}}]},{"localId":"4","locator":"8:1-8:51","name":"LOINC","id":"2.16.840.1.113883.6.1","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"4","s":[{"value":["","codesystem ","\"LOINC\"",": ","'urn:oid:2.16.840.1.113883.6.1'"]}]}}]}]},"valueSets":{"def":[{"localId":"5","locator":"10:1-10:88","name":"Palliative Care Encounter","id":"2.16.840.1.113883.3.464.1003.101.12.1090","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"5","s":[{"value":["","valueset ","\"Palliative Care Encounter\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1090'"]}]}}]},{"localId":"6","locator":"11:1-11:91","name":"Palliative Care Intervention","id":"2.16.840.1.113883.3.464.1003.198.12.1135","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"6","s":[{"value":["","valueset ","\"Palliative Care Intervention\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.198.12.1135'"]}]}}]}]},"codes":{"def":[{"localId":"8","locator":"13:1-13:100","name":"Encounter for palliative care","id":"Z51.5","display":"Encounter for palliative care","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"8","s":[{"value":["","code ","\"Encounter for palliative care\"",": ","'Z51.5'"," from "]},{"r":"7","s":[{"value":["\"ICD10CM\""]}]},{"value":[" display ","'Encounter for palliative care'"]}]}}],"codeSystem":{"localId":"7","locator":"13:52-13:60","name":"ICD10CM"}},{"localId":"10","locator":"14:1-14:226","name":"Functional Assessment of Chronic Illness Therapy - Palliative Care Questionnaire (FACIT-Pal)","id":"71007-9","display":"Functional Assessment of Chronic Illness Therapy - Palliative Care Questionnaire (FACIT-Pal)","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"10","s":[{"value":["","code ","\"Functional Assessment of Chronic Illness Therapy - Palliative Care Questionnaire (FACIT-Pal)\"",": ","'71007-9'"," from "]},{"r":"9","s":[{"value":["\"LOINC\""]}]},{"value":[" display ","'Functional Assessment of Chronic Illness Therapy - Palliative Care Questionnaire (FACIT-Pal)'"]}]}}],"codeSystem":{"localId":"9","locator":"14:117-14:123","name":"LOINC"}}]},"contexts":{"def":[{"locator":"18:1-18:15","name":"Patient"}]},"statements":{"def":[{"locator":"18:1-18:15","name":"Patient","context":"Patient","expression":{"type":"SingletonFrom","operand":{"locator":"18:1-18:15","dataType":"{urn:healthit-gov:qdm:v5_6}Patient","templateId":"Patient","type":"Retrieve"}}},{"localId":"57","locator":"20:1-31:5","name":"Palliative Care in the Measurement Period","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"57","s":[{"value":["","define ","\"Palliative Care in the Measurement Period\"",":\n  "]},{"r":"56","s":[{"r":"43","s":[{"r":"34","s":[{"r":"25","s":[{"value":["exists "]},{"r":"24","s":[{"value":["( "]},{"r":"24","s":[{"s":[{"r":"15","s":[{"r":"14","s":[{"r":"14","s":[{"value":["[","\"Assessment, Performed\"",": "]},{"s":[{"value":["\"Functional Assessment of Chronic Illness Therapy - Palliative Care Questionnaire (FACIT-Pal)\""]}]},{"value":["]"]}]}]},{"value":[" ","PalliativeAssessment"]}]}]},{"value":["\n      "]},{"r":"23","s":[{"value":["where "]},{"r":"23","s":[{"r":"21","s":[{"r":"16","s":[{"value":["Global"]}]},{"value":["."]},{"r":"21","s":[{"value":["\"NormalizeInterval\"","("]},{"r":"18","s":[{"r":"17","s":[{"value":["PalliativeAssessment"]}]},{"value":["."]},{"r":"18","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"20","s":[{"r":"19","s":[{"value":["PalliativeAssessment"]}]},{"value":["."]},{"r":"20","s":[{"value":["relevantPeriod"]}]}]},{"value":[")"]}]}]},{"r":"23","value":[" ","overlaps"," "]},{"r":"22","s":[{"value":["\"Measurement Period\""]}]}]}]}]},{"value":["\n  )"]}]}]},{"value":["\n  or "]},{"r":"33","s":[{"value":["exists "]},{"r":"32","s":[{"value":["("]},{"r":"32","s":[{"s":[{"r":"27","s":[{"r":"26","s":[{"r":"26","s":[{"value":["[","\"Diagnosis\"",": "]},{"s":[{"value":["\"Encounter for palliative care\""]}]},{"value":["]"]}]}]},{"value":[" ","PalliativeDiagnosis"]}]}]},{"value":["\n  "]},{"r":"31","s":[{"value":["where "]},{"r":"31","s":[{"r":"29","s":[{"r":"28","s":[{"value":["PalliativeDiagnosis"]}]},{"value":["."]},{"r":"29","s":[{"value":["prevalencePeriod"]}]}]},{"r":"31","value":[" ","overlaps"," "]},{"r":"30","s":[{"value":["\"Measurement Period\""]}]}]}]}]},{"value":[")"]}]}]}]},{"value":["\n    or "]},{"r":"42","s":[{"value":["exists "]},{"r":"41","s":[{"value":["( "]},{"r":"41","s":[{"s":[{"r":"36","s":[{"r":"35","s":[{"r":"35","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Palliative Care Encounter\""]}]},{"value":["]"]}]}]},{"value":[" ","PalliativeEncounter"]}]}]},{"value":["\n        "]},{"r":"40","s":[{"value":["where "]},{"r":"40","s":[{"r":"38","s":[{"r":"37","s":[{"value":["PalliativeEncounter"]}]},{"value":["."]},{"r":"38","s":[{"value":["relevantPeriod"]}]}]},{"r":"40","value":[" ","overlaps"," "]},{"r":"39","s":[{"value":["\"Measurement Period\""]}]}]}]}]},{"value":["\n    )"]}]}]}]},{"value":["\n    or "]},{"r":"55","s":[{"value":["exists "]},{"r":"54","s":[{"value":["( "]},{"r":"54","s":[{"s":[{"r":"45","s":[{"r":"44","s":[{"r":"44","s":[{"value":["[","\"Intervention, Performed\"",": "]},{"s":[{"value":["\"Palliative Care Intervention\""]}]},{"value":["]"]}]}]},{"value":[" ","PalliativeIntervention"]}]}]},{"value":["\n        "]},{"r":"53","s":[{"value":["where "]},{"r":"53","s":[{"r":"51","s":[{"r":"46","s":[{"value":["Global"]}]},{"value":["."]},{"r":"51","s":[{"value":["\"NormalizeInterval\"","("]},{"r":"48","s":[{"r":"47","s":[{"value":["PalliativeIntervention"]}]},{"value":["."]},{"r":"48","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"50","s":[{"r":"49","s":[{"value":["PalliativeIntervention"]}]},{"value":["."]},{"r":"50","s":[{"value":["relevantPeriod"]}]}]},{"value":[")"]}]}]},{"r":"53","value":[" ","overlaps"," "]},{"r":"52","s":[{"value":["\"Measurement Period\""]}]}]}]}]},{"value":["\n    )"]}]}]}]}]}}],"expression":{"localId":"56","locator":"21:3-31:5","type":"Or","operand":[{"localId":"43","locator":"21:3-28:5","type":"Or","operand":[{"localId":"34","locator":"21:3-25:75","type":"Or","operand":[{"localId":"25","locator":"21:3-23:3","type":"Exists","operand":{"localId":"24","locator":"21:10-23:3","type":"Query","source":[{"localId":"15","locator":"21:12-21:153","alias":"PalliativeAssessment","expression":{"localId":"14","locator":"21:12-21:132","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveAssessmentPerformed","templateId":"PositiveAssessmentPerformed","codeProperty":"code","codeComparator":"~","type":"Retrieve","codes":{"type":"ToList","operand":{"locator":"21:38-21:131","name":"Functional Assessment of Chronic Illness Therapy - Palliative Care Questionnaire (FACIT-Pal)","type":"CodeRef"}}}}],"relationship":[],"where":{"localId":"23","locator":"22:7-22:144","type":"Overlaps","operand":[{"localId":"21","locator":"22:13-22:114","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"18","locator":"22:40-22:76","path":"relevantDatetime","scope":"PalliativeAssessment","type":"Property"},{"localId":"20","locator":"22:79-22:113","path":"relevantPeriod","scope":"PalliativeAssessment","type":"Property"}]},{"localId":"22","locator":"22:125-22:144","name":"Measurement Period","type":"ParameterRef"}]}}},{"localId":"33","locator":"24:6-25:75","type":"Exists","operand":{"localId":"32","locator":"24:13-25:75","type":"Query","source":[{"localId":"27","locator":"24:14-24:79","alias":"PalliativeDiagnosis","expression":{"localId":"26","locator":"24:14-24:59","dataType":"{urn:healthit-gov:qdm:v5_6}Diagnosis","codeProperty":"code","codeComparator":"~","type":"Retrieve","codes":{"type":"ToList","operand":{"locator":"24:28-24:58","name":"Encounter for palliative care","type":"CodeRef"}}}}],"relationship":[],"where":{"localId":"31","locator":"25:3-25:74","type":"Overlaps","operand":[{"localId":"29","locator":"25:9-25:44","path":"prevalencePeriod","scope":"PalliativeDiagnosis","type":"Property"},{"localId":"30","locator":"25:55-25:74","name":"Measurement Period","type":"ParameterRef"}]}}}]},{"localId":"42","locator":"26:8-28:5","type":"Exists","operand":{"localId":"41","locator":"26:15-28:5","type":"Query","source":[{"localId":"36","locator":"26:17-26:89","alias":"PalliativeEncounter","expression":{"localId":"35","locator":"26:17-26:69","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"26:42-26:68","name":"Palliative Care Encounter","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"40","locator":"27:9-27:78","type":"Overlaps","operand":[{"localId":"38","locator":"27:15-27:48","path":"relevantPeriod","scope":"PalliativeEncounter","type":"Property"},{"localId":"39","locator":"27:59-27:78","name":"Measurement Period","type":"ParameterRef"}]}}}]},{"localId":"55","locator":"29:8-31:5","type":"Exists","operand":{"localId":"54","locator":"29:15-31:5","type":"Query","source":[{"localId":"45","locator":"29:17-29:98","alias":"PalliativeIntervention","expression":{"localId":"44","locator":"29:17-29:75","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveInterventionPerformed","templateId":"PositiveInterventionPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"29:45-29:74","name":"Palliative Care Intervention","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"53","locator":"30:9-30:150","type":"Overlaps","operand":[{"localId":"51","locator":"30:15-30:120","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"48","locator":"30:42-30:80","path":"relevantDatetime","scope":"PalliativeIntervention","type":"Property"},{"localId":"50","locator":"30:83-30:119","path":"relevantPeriod","scope":"PalliativeIntervention","type":"Property"}]},{"localId":"52","locator":"30:131-30:150","name":"Measurement Period","type":"ParameterRef"}]}}}]}}]}}},"elm_annotations":{"statements":[{"children":[{"children":[{"children":[{"text":"define \"Palliative Care in the Measurement Period\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Assessment, Performed\": "}]},{"children":[{"children":[{"text":"\"Functional Assessment of Chronic Illness Therapy - Palliative Care Questionnaire (FACIT-Pal)\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"14"}],"node_type":"Retrieve","ref_id":"14"},{"children":[{"text":" PalliativeAssessment"}]}],"ref_id":"15"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"16"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\"("}]},{"children":[{"children":[{"children":[{"text":"PalliativeAssessment"}]}],"ref_id":"17"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"18"}],"node_type":"Property","ref_id":"18"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"PalliativeAssessment"}]}],"ref_id":"19"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"20"}],"node_type":"Property","ref_id":"20"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"21"}],"node_type":"FunctionRef","ref_id":"21"},{"children":[{"text":" overlaps "}],"ref_id":"23"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"22"}],"ref_id":"23"}],"ref_id":"23"}],"node_type":"Query","ref_id":"24"},{"children":[{"text":"\n  )"}]}],"node_type":"Query","ref_id":"24"}],"node_type":"Exists","ref_id":"25"},{"children":[{"text":"\n  or "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Diagnosis\": "}]},{"children":[{"children":[{"text":"\"Encounter for palliative care\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"26"}],"node_type":"Retrieve","ref_id":"26"},{"children":[{"text":" PalliativeDiagnosis"}]}],"ref_id":"27"}]},{"children":[{"text":"\n  "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"PalliativeDiagnosis"}]}],"ref_id":"28"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"prevalencePeriod"}]}],"node_type":"Property","ref_id":"29"}],"node_type":"Property","ref_id":"29"},{"children":[{"text":" overlaps "}],"ref_id":"31"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"30"}],"ref_id":"31"}],"ref_id":"31"}],"node_type":"Query","ref_id":"32"},{"children":[{"text":")"}]}],"node_type":"Query","ref_id":"32"}],"node_type":"Exists","ref_id":"33"}],"node_type":"Or","ref_id":"34"},{"children":[{"text":"\n    or "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Palliative Care Encounter\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"35"}],"node_type":"Retrieve","ref_id":"35"},{"children":[{"text":" PalliativeEncounter"}]}],"ref_id":"36"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"PalliativeEncounter"}]}],"ref_id":"37"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"38"}],"node_type":"Property","ref_id":"38"},{"children":[{"text":" overlaps "}],"ref_id":"40"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"39"}],"ref_id":"40"}],"ref_id":"40"}],"node_type":"Query","ref_id":"41"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"41"}],"node_type":"Exists","ref_id":"42"}],"node_type":"Or","ref_id":"43"},{"children":[{"text":"\n    or "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Intervention, Performed\": "}]},{"children":[{"children":[{"text":"\"Palliative Care Intervention\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"44"}],"node_type":"Retrieve","ref_id":"44"},{"children":[{"text":" PalliativeIntervention"}]}],"ref_id":"45"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"46"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\"("}]},{"children":[{"children":[{"children":[{"text":"PalliativeIntervention"}]}],"ref_id":"47"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"48"}],"node_type":"Property","ref_id":"48"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"PalliativeIntervention"}]}],"ref_id":"49"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"50"}],"node_type":"Property","ref_id":"50"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"51"}],"node_type":"FunctionRef","ref_id":"51"},{"children":[{"text":" overlaps "}],"ref_id":"53"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"52"}],"ref_id":"53"}],"ref_id":"53"}],"node_type":"Query","ref_id":"54"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"54"}],"node_type":"Exists","ref_id":"55"}],"node_type":"Or","ref_id":"56"}],"ref_id":"57"}],"define_name":"Palliative Care in the Measurement Period"}],"identifier":{"id":"PalliativeCareExclusionECQM","version":"2.0.000"}},"is_main_library":false,"is_top_level":true,"library_name":"PalliativeCareExclusionECQM","library_version":"2.0.000","statement_dependencies":[{"_id":"689263efe8da6d1c0d4fa9ed","statement_name":"Palliative Care in the Measurement Period","statement_references":[{"_id":"689263efe8da6d1c0d4fa9ee","hqmf_id":null,"library_name":"MATGlobalCommonFunctions","statement_name":"NormalizeInterval"}]}]}],"created_at":null,"description":"Percentage of patients 18-75 years of age with diabetes and an active diagnosis of retinopathy in any part of the measurement period who had a retinal or dilated eye exam by an eye care professional during the measurement period or diabetics with no diagnosis of retinopathy in any part of the measurement period who had a retinal or dilated eye exam by an eye care professional during the measurement period or in the 12 months prior to the measurement period","hqmf_id":"2C928085-7B2A-EB52-017B-55383A9C16E3","hqmf_set_id":"D90BDAB4-B9D2-4329-9993-5C34E2C0DC66","hqmf_version_number":"11.0.000","main_cql_library":"DiabetesEyeExam","measure_attributes":[{"code":"OTH","value":"131","name":"eCQM Identifier (Measure Authoring Tool)","code_obj":{"type":"CD","null_flavor":"OTH","original_text":"eCQM Identifier (Measure Authoring Tool)"},"value_obj":{"type":"ED","value":"131","media_type":"text/plain"}},{"code":"OTH","value":"Not Applicable","name":"NQF Number","code_obj":{"type":"CD","null_flavor":"OTH","original_text":"NQF Number"},"value_obj":{"type":"ED","value":"Not Applicable","media_type":"text/plain"}},{"code":"COPY","value":"This Physician Performance Measure (Measure) and related data specifications are owned and were developed by the National Committee for Quality Assurance (NCQA). NCQA is not responsible for any use of the Measure. NCQA makes no representations, warranties, or endorsement about the quality of any organization or physician that uses or reports performance measures and NCQA has no liability to anyone who relies on such measures or specifications. NCQA holds a copyright in the Measure. The Measure can be reproduced and distributed, without modification, for noncommercial purposes (e.g., use by healthcare providers in connection with their practices) without obtaining approval from NCQA. Commercial use is defined as the sale, licensing, or distribution of the Measure for commercial gain, or incorporation of the Measure into a product or service that is sold, licensed or distributed for commercial gain. All commercial uses or requests for modification must be approved by NCQA and are subject to a license at the discretion of NCQA. (C) 2012-2021 National Committee for Quality Assurance. All Rights Reserved.\n\nLimited proprietary coding is contained in the Measure specifications for user convenience. Users of proprietary code sets should obtain all necessary licenses from the owners of the code sets. NCQA disclaims all liability for use or accuracy of any third party codes contained in the specifications.\n\nCPT(R) contained in the Measure specifications is copyright 2004-2021 American Medical Association. LOINC(R) copyright 2004-2021 Regenstrief Institute, Inc. This material contains SNOMED Clinical Terms(R) (SNOMED CT[R]) copyright 2004-2021 International Health Terminology Standards Development Organisation. ICD-10 copyright 2021 World Health Organization. All Rights Reserved.","name":"Copyright","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"COPY","title":"Copyright"},"value_obj":{"type":"ED","value":"This Physician Performance Measure (Measure) and related data specifications are owned and were developed by the National Committee for Quality Assurance (NCQA). NCQA is not responsible for any use of the Measure. NCQA makes no representations, warranties, or endorsement about the quality of any organization or physician that uses or reports performance measures and NCQA has no liability to anyone who relies on such measures or specifications. NCQA holds a copyright in the Measure. The Measure can be reproduced and distributed, without modification, for noncommercial purposes (e.g., use by healthcare providers in connection with their practices) without obtaining approval from NCQA. Commercial use is defined as the sale, licensing, or distribution of the Measure for commercial gain, or incorporation of the Measure into a product or service that is sold, licensed or distributed for commercial gain. All commercial uses or requests for modification must be approved by NCQA and are subject to a license at the discretion of NCQA. (C) 2012-2021 National Committee for Quality Assurance. All Rights Reserved.\n\nLimited proprietary coding is contained in the Measure specifications for user convenience. Users of proprietary code sets should obtain all necessary licenses from the owners of the code sets. NCQA disclaims all liability for use or accuracy of any third party codes contained in the specifications.\n\nCPT(R) contained in the Measure specifications is copyright 2004-2021 American Medical Association. LOINC(R) copyright 2004-2021 Regenstrief Institute, Inc. This material contains SNOMED Clinical Terms(R) (SNOMED CT[R]) copyright 2004-2021 International Health Terminology Standards Development Organisation. ICD-10 copyright 2021 World Health Organization. All Rights Reserved.","media_type":"text/plain"}},{"code":"DISC","value":"The performance Measure is not a clinical guideline and does not establish a standard of medical care, and has not been tested for all potential applications. THE MEASURE AND SPECIFICATIONS ARE PROVIDED \"AS IS\" WITHOUT WARRANTY OF ANY KIND.\n \nDue to technical limitations, registered trademarks are indicated by (R) or [R] and unregistered trademarks are indicated by (TM) or [TM].","name":"Disclaimer","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DISC","title":"Disclaimer"},"value_obj":{"type":"ED","value":"The performance Measure is not a clinical guideline and does not establish a standard of medical care, and has not been tested for all potential applications. THE MEASURE AND SPECIFICATIONS ARE PROVIDED \"AS IS\" WITHOUT WARRANTY OF ANY KIND.\n \nDue to technical limitations, registered trademarks are indicated by (R) or [R] and unregistered trademarks are indicated by (TM) or [TM].","media_type":"text/plain"}},{"code":"MSRSCORE","name":"Measure Scoring","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRSCORE","title":"Measure Scoring"},"value_obj":{"type":"CD","system":"2.16.840.1.113883.5.1063","code":"PROPOR","title":"Proportion"}},{"code":"MSRTYPE","name":"Measure Type","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRTYPE","title":"Measure Type"},"value_obj":{"type":"CD","system":"2.16.840.1.113883.5.1063","code":"PROCESS","title":"PROCESS"}},{"code":"STRAT","value":"None","name":"Stratification","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"STRAT","title":"Stratification"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"MSRADJ","value":"None","name":"Risk Adjustment","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRADJ","title":"Risk Adjustment"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"MSRAGG","value":"None","name":"Rate Aggregation","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRAGG","title":"Rate Aggregation"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"RAT","value":"Diabetes is the seventh leading cause of death in the United States. In 2017, diabetes affected approximately 34 million Americans (10.5 percent of the U.S. population) and killed approximately 84,000 people (Centers for Disease Control and Prevention [CDC], 2020a). Diabetes is a long-lasting disease marked by high blood glucose levels, resulting from the body's inability to produce or use insulin properly (CDC, 2020b). People with diabetes are at increased risk of serious health complications including vision loss, heart disease, stroke, kidney damage, amputation of feet or legs, and premature death (CDC, 2021).\n\nIn 2017, diabetes cost the U.S. an estimated $327 billion: $237 billion in direct medical costs and $90 billion in reduced productivity. This is a 34 percent increase from the estimated $245 billion spent on diabetes in 2012 (American Diabetes Association, 2018).\n\nDiabetic retinopathy is progressive damage to the small blood vessels in the retina that may result in loss of vision. It is the leading cause of blindness in adults between 20-74 years of age. Approximately 4.1 million adults are affected by diabetic retinopathy (CDC, 2020c).","name":"Rationale","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"RAT","title":"Rationale"},"value_obj":{"type":"ED","value":"Diabetes is the seventh leading cause of death in the United States. In 2017, diabetes affected approximately 34 million Americans (10.5 percent of the U.S. population) and killed approximately 84,000 people (Centers for Disease Control and Prevention [CDC], 2020a). Diabetes is a long-lasting disease marked by high blood glucose levels, resulting from the body's inability to produce or use insulin properly (CDC, 2020b). People with diabetes are at increased risk of serious health complications including vision loss, heart disease, stroke, kidney damage, amputation of feet or legs, and premature death (CDC, 2021).\n\nIn 2017, diabetes cost the U.S. an estimated $327 billion: $237 billion in direct medical costs and $90 billion in reduced productivity. This is a 34 percent increase from the estimated $245 billion spent on diabetes in 2012 (American Diabetes Association, 2018).\n\nDiabetic retinopathy is progressive damage to the small blood vessels in the retina that may result in loss of vision. It is the leading cause of blindness in adults between 20-74 years of age. Approximately 4.1 million adults are affected by diabetic retinopathy (CDC, 2020c).","media_type":"text/plain"}},{"code":"CRS","value":"American Diabetes Association (2021):\n\n- Adults with type 1 diabetes should have an initial dilated and comprehensive eye examination by an ophthalmologist or optometrist within 5 years after the onset of diabetes. (Level of evidence: B)\n\n- Patients with type 2 diabetes should have an initial dilated and comprehensive eye examination by an ophthalmologist or optometrist at the time of the diabetes diagnosis. (Level of evidence: B)\n\n-If there is no evidence of retinopathy for one or more annual eye exam and glycemia is well controlled, then screening every 12 years may be considered. If any level of diabetic retinopathy is present, subsequent dilated retinal examinations should be repeated at least annually by an ophthalmologist or optometrist. If retinopathy is progressing or sight threatening, then examinations will be required more frequently. (Level of evidence: B)","name":"Clinical Recommendation Statement","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"CRS","title":"Clinical Recommendation Statement"},"value_obj":{"type":"ED","value":"American Diabetes Association (2021):\n\n- Adults with type 1 diabetes should have an initial dilated and comprehensive eye examination by an ophthalmologist or optometrist within 5 years after the onset of diabetes. (Level of evidence: B)\n\n- Patients with type 2 diabetes should have an initial dilated and comprehensive eye examination by an ophthalmologist or optometrist at the time of the diabetes diagnosis. (Level of evidence: B)\n\n-If there is no evidence of retinopathy for one or more annual eye exam and glycemia is well controlled, then screening every 12 years may be considered. If any level of diabetic retinopathy is present, subsequent dilated retinal examinations should be repeated at least annually by an ophthalmologist or optometrist. If retinopathy is progressing or sight threatening, then examinations will be required more frequently. (Level of evidence: B)","media_type":"text/plain"}},{"code":"IDUR","value":"Higher score indicates better quality","name":"Improvement Notation","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"IDUR","title":"Improvement Notation"},"value_obj":{"type":"ED","value":"Higher score indicates better quality","media_type":"text/plain"}},{"code":"REF","value":"CITATIONAmerican Diabetes Association. (2018). Economic Costs of Diabetes in the U.S. in 2017. Diabetes Care, 41, 917-928. Retrieved from http://care.diabetesjournals.org/content/early/2018/03/20/dci18-0007","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONAmerican Diabetes Association. (2018). Economic Costs of Diabetes in the U.S. in 2017. Diabetes Care, 41, 917-928. Retrieved from http://care.diabetesjournals.org/content/early/2018/03/20/dci18-0007","media_type":"text/plain"}},{"code":"REF","value":"CITATIONAmerican Diabetes Association. (2021). 11. Microvascular Complications and Foot Care: Standards of Medical Care in Diabetes2021. Diabetes Care 2021; 44(Suppl. 1):S151S167. https://doi.org/10.2337/dc21-S011","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONAmerican Diabetes Association. (2021). 11. Microvascular Complications and Foot Care: Standards of Medical Care in Diabetes2021. Diabetes Care 2021; 44(Suppl. 1):S151S167. https://doi.org/10.2337/dc21-S011","media_type":"text/plain"}},{"code":"REF","value":"CITATIONCenters for Disease Control and Prevention. (2020a). National Diabetes Statistics Report, 2020. Atlanta, GA: Centers for Disease Control and Prevention, U.S. Dept of Health and Human Services. Retrieved from https://www.cdc.gov/diabetes/data/statistics-report/index.html","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONCenters for Disease Control and Prevention. (2020a). National Diabetes Statistics Report, 2020. Atlanta, GA: Centers for Disease Control and Prevention, U.S. Dept of Health and Human Services. Retrieved from https://www.cdc.gov/diabetes/data/statistics-report/index.html","media_type":"text/plain"}},{"code":"REF","value":"CITATIONCenters for Disease Control and Prevention. (2020b). Diabetes Basics. Retrieved from https://www.cdc.gov/diabetes/basics/diabetes.html","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONCenters for Disease Control and Prevention. (2020b). Diabetes Basics. Retrieved from https://www.cdc.gov/diabetes/basics/diabetes.html","media_type":"text/plain"}},{"code":"REF","value":"CITATIONCenters for Disease Control and Prevention. (2020c). Common Eye Disorders and Diseases. Retrieved from https://www.cdc.gov/visionhealth/basics/ced/index.html","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONCenters for Disease Control and Prevention. (2020c). Common Eye Disorders and Diseases. Retrieved from https://www.cdc.gov/visionhealth/basics/ced/index.html","media_type":"text/plain"}},{"code":"REF","value":"CITATIONCenters for Disease Control and Prevention. (2021). Diabetes Report Card 2019. Atlanta, GA: Centers for Disease Control and Prevention, US Dept of Health and Human Services. Retrieved from https://www.cdc.gov/diabetes/library/reports/reportcard.html","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONCenters for Disease Control and Prevention. (2021). Diabetes Report Card 2019. Atlanta, GA: Centers for Disease Control and Prevention, US Dept of Health and Human Services. Retrieved from https://www.cdc.gov/diabetes/library/reports/reportcard.html","media_type":"text/plain"}},{"code":"DEF","value":"None","name":"Definition","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DEF","title":"Definition"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"GUIDE","value":"The eye exam must be performed by an ophthalmologist or optometrist, or there must be evidence that fundus photography results were read by a system that provides an artificial intelligence (AI) interpretation.    \n\nThis eCQM is a patient-based measure.\n\nThis version of the eCQM uses QDM version 5.6. Please refer to the eCQI resource center (https://ecqi.healthit.gov/qdm) for more information on the QDM.","name":"Guidance","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"GUIDE","title":"Guidance"},"value_obj":{"type":"ED","value":"The eye exam must be performed by an ophthalmologist or optometrist, or there must be evidence that fundus photography results were read by a system that provides an artificial intelligence (AI) interpretation.    \n\nThis eCQM is a patient-based measure.\n\nThis version of the eCQM uses QDM version 5.6. Please refer to the eCQI resource center (https://ecqi.healthit.gov/qdm) for more information on the QDM.","media_type":"text/plain"}},{"code":"TRANF","value":"TBD","name":"Transmission Format","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"TRANF","title":"Transmission Format"},"value_obj":{"type":"ED","value":"TBD","media_type":"text/plain"}},{"code":"IPOP","value":"Patients 18-75 years of age by the end of the measurement period, with diabetes with a visit during the measurement period","name":"Initial Population","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"IPOP","title":"Initial Population"},"value_obj":{"type":"ED","value":"Patients 18-75 years of age by the end of the measurement period, with diabetes with a visit during the measurement period","media_type":"text/plain"}},{"code":"DENOM","value":"Equals Initial Population","name":"Denominator","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DENOM","title":"Denominator"},"value_obj":{"type":"ED","value":"Equals Initial Population","media_type":"text/plain"}},{"code":"DENEX","value":"Exclude patients who are in hospice care for any part of the measurement period.\n\nExclude patients 66 and older by the end of the measurement period who are living long term in a nursing home any time on or before the end of  the measurement period. \n\nExclude patients 66 and older by the end of the measurement period with an indication of frailty for any part of the measurement period who also meet any of the following advanced illness criteria:  \n- Advanced illness with two outpatient encounters during the measurement period or the year prior\n- OR advanced illness with one inpatient encounter during the measurement period or the year prior\n- OR taking dementia medications during the measurement period or the year prior\n\nExclude patients receiving palliative care for any part of the measurement period.","name":"Denominator Exclusions","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DENEX","title":"Denominator Exclusions"},"value_obj":{"type":"ED","value":"Exclude patients who are in hospice care for any part of the measurement period.\n\nExclude patients 66 and older by the end of the measurement period who are living long term in a nursing home any time on or before the end of  the measurement period. \n\nExclude patients 66 and older by the end of the measurement period with an indication of frailty for any part of the measurement period who also meet any of the following advanced illness criteria:  \n- Advanced illness with two outpatient encounters during the measurement period or the year prior\n- OR advanced illness with one inpatient encounter during the measurement period or the year prior\n- OR taking dementia medications during the measurement period or the year prior\n\nExclude patients receiving palliative care for any part of the measurement period.","media_type":"text/plain"}},{"code":"NUMER","value":"Patients with an eye screening for diabetic retinal disease. This includes diabetics who had one of the following:\nDiabetic with a diagnosis of retinopathy in any part of the measurement period and a retinal or dilated eye exam by an eye care professional in the measurement period\nDiabetic with no diagnosis of retinopathy in any part of the measurement period and a retinal or dilated eye exam by an eye care professional in the measurement period or the year prior to the measurement period","name":"Numerator","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"NUMER","title":"Numerator"},"value_obj":{"type":"ED","value":"Patients with an eye screening for diabetic retinal disease. This includes diabetics who had one of the following:\nDiabetic with a diagnosis of retinopathy in any part of the measurement period and a retinal or dilated eye exam by an eye care professional in the measurement period\nDiabetic with no diagnosis of retinopathy in any part of the measurement period and a retinal or dilated eye exam by an eye care professional in the measurement period or the year prior to the measurement period","media_type":"text/plain"}},{"code":"NUMEX","value":"Not Applicable","name":"Numerator Exclusions","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"NUMEX","title":"Numerator Exclusions"},"value_obj":{"type":"ED","value":"Not Applicable","media_type":"text/plain"}},{"code":"DENEXCEP","value":"None","name":"Denominator Exceptions","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DENEXCEP","title":"Denominator Exceptions"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"SDE","value":"For every patient evaluated by this measure also identify payer, race, ethnicity and sex","name":"Supplemental Data Elements","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"SDE","title":"Supplemental Data Elements"},"value_obj":{"type":"ED","value":"For every patient evaluated by this measure also identify payer, race, ethnicity and sex","media_type":"text/plain"}}],"measure_period":{"type":"IVL_TS","low":{"type":"TS","value":"201201010000","inclusive?":true,"derived?":false},"high":{"type":"TS","value":"201212312359","inclusive?":true,"derived?":false},"width":{"type":"PQ","unit":"a","value":"1","inclusive?":true,"derived?":false}},"measure_scoring":"PROPORTION","population_criteria":{"IPP":{"conjunction?":true,"type":"IPP","hqmf_id":"0C11F942-5E5C-43E3-8707-E8B799CA09B5","preconditions":[{"id":2,"preconditions":[{"id":1,"reference":"DiabetesEyeExam__Initial_Population__2CA91986_AE4B_4173_86F2_1B3BE1E6D17F"}],"conjunction_code":"allTrue"}]},"DENOM":{"conjunction?":true,"type":"DENOM","hqmf_id":"E759F9A4-87DB-47AB-808E-BF9E99F960CF","preconditions":[{"id":4,"preconditions":[{"id":3,"reference":"DiabetesEyeExam__Denominator__2CA91986_AE4B_4173_86F2_1B3BE1E6D17F"}],"conjunction_code":"allTrue"}]},"NUMER":{"conjunction?":true,"type":"NUMER","hqmf_id":"D1C773EF-4566-4DE0-A63B-DAC54A9195AC","preconditions":[{"id":6,"preconditions":[{"id":5,"reference":"DiabetesEyeExam__Numerator__2CA91986_AE4B_4173_86F2_1B3BE1E6D17F"}],"conjunction_code":"allTrue"}]},"DENEX":{"conjunction?":true,"type":"DENEX","hqmf_id":"7B14535D-E733-43A5-9E4D-2B521CFFDAF1","preconditions":[{"id":8,"preconditions":[{"id":7,"reference":"DiabetesEyeExam__Denominator_Exclusions__2CA91986_AE4B_4173_86F2_1B3BE1E6D17F"}],"conjunction_code":"atLeastOneTrue"}]}},"population_sets":[{"_id":"689263efe8da6d1c0d4fa9ef","population_set_id":"PopulationSet_1","populations":{"DENEX":{"_id":"689263efe8da6d1c0d4fa9f0","hqmf_id":"7B14535D-E733-43A5-9E4D-2B521CFFDAF1","library_name":"DiabetesEyeExam","statement_name":"Denominator Exclusions"},"DENOM":{"_id":"689263efe8da6d1c0d4fa9f1","hqmf_id":"E759F9A4-87DB-47AB-808E-BF9E99F960CF","library_name":"DiabetesEyeExam","statement_name":"Denominator"},"IPP":{"_id":"689263efe8da6d1c0d4fa9f2","hqmf_id":"0C11F942-5E5C-43E3-8707-E8B799CA09B5","library_name":"DiabetesEyeExam","statement_name":"Initial Population"},"NUMER":{"_id":"689263efe8da6d1c0d4fa9f3","hqmf_id":"D1C773EF-4566-4DE0-A63B-DAC54A9195AC","library_name":"DiabetesEyeExam","statement_name":"Numerator"},"_id":"689263efe8da6d1c0d4fa9f4","_type":"CQM::ProportionPopulationMap"},"supplemental_data_elements":[{"_id":"689263dee8da6d1c0d4f9a64","hqmf_id":"9DE7A288-0AAA-4171-B74A-E205F2834F40","library_name":"DiabetesEyeExam","statement_name":"SDE Ethnicity"},{"_id":"689263dee8da6d1c0d4f9a65","hqmf_id":"78BAC2DF-BFFC-4421-8F57-5071AD9ACF1D","library_name":"DiabetesEyeExam","statement_name":"SDE Payer"},{"_id":"689263dee8da6d1c0d4f9a66","hqmf_id":"8095672B-8E8C-46FE-858E-8F704F1D7584","library_name":"DiabetesEyeExam","statement_name":"SDE Race"},{"_id":"689263dee8da6d1c0d4f9a67","hqmf_id":"E5D0F029-C5C9-45B7-B862-CA446A67EDE3","library_name":"DiabetesEyeExam","statement_name":"SDE Sex"}],"title":"Population Criteria Section"}],"source_data_criteria":[{"_id":"689263efe8da6d1c0d4fa9f5","_type":"QDM::PatientCharacteristicSex","codeListId":"2.16.840.1.113762.1.4.1","dataElementCodes":[],"description":"Patient Characteristic Sex: ONCAdministrativeSex","hqmfOid":"2.16.840.1.113883.10.20.28.4.55","id":"689263efe8da6d1c0d4fa9f5","qdmCategory":"patient_characteristic","qdmStatus":"gender","qdmTitle":"Patient Characteristic Sex","qdmVersion":"5.6"},{"_id":"689263dee8da6d1c0d4f9a92","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.464.1003.101.12.1080","dataElementCodes":[],"description":"Encounter, Performed: TelephoneVisits","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"689263dee8da6d1c0d4f9a92","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"689263dee8da6d1c0d4f9a93","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.464.1003.101.12.1083","dataElementCodes":[],"description":"Encounter, Performed: AcuteInpatient","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"689263dee8da6d1c0d4f9a93","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"689263dee8da6d1c0d4f9a94","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.666.5.307","dataElementCodes":[],"description":"Encounter, Performed: EncounterInpatient","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"689263dee8da6d1c0d4f9a94","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"689263efe8da6d1c0d4fa9f6","_type":"QDM::InterventionOrder","authorDatetime":null,"codeListId":"2.16.840.1.113883.3.526.3.1584","dataElementCodes":[],"description":"Intervention, Order: HospiceCareAmbulatory","hqmfOid":"2.16.840.1.113883.10.20.28.4.35","id":"689263efe8da6d1c0d4fa9f6","negationRationale":null,"qdmCategory":"intervention","qdmStatus":"order","qdmTitle":"Intervention, Order","qdmVersion":"5.6","reason":null},{"_id":"689263dee8da6d1c0d4f9a9a","_type":"QDM::InterventionPerformed","authorDatetime":null,"codeListId":"2.16.840.1.113883.3.526.3.1584","dataElementCodes":[],"description":"Intervention, Performed: HospiceCareAmbulatory","hqmfOid":"2.16.840.1.113883.10.20.28.4.36","id":"689263dee8da6d1c0d4f9a9a","negationRationale":null,"qdmCategory":"intervention","qdmStatus":"performed","qdmTitle":"Intervention, Performed","qdmVersion":"5.6","reason":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null,"status":null},{"_id":"689263efe8da6d1c0d4fa9f7","_type":"QDM::DeviceOrder","authorDatetime":null,"codeListId":"2.16.840.1.113883.3.464.1003.118.12.1300","dataElementCodes":[],"description":"Device, Order: FrailtyDevice","hqmfOid":"2.16.840.1.113883.10.20.28.4.15","id":"689263efe8da6d1c0d4fa9f7","negationRationale":null,"qdmCategory":"device","qdmStatus":"order","qdmTitle":"Device, Order","qdmVersion":"5.6","reason":null},{"_id":"689263dee8da6d1c0d4f9a95","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.464.1003.101.12.1088","dataElementCodes":[],"description":"Encounter, Performed: FrailtyEncounter","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"689263dee8da6d1c0d4f9a95","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"689263dee8da6d1c0d4f9a96","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.464.1003.101.12.1025","dataElementCodes":[],"description":"Encounter, Performed: PreventiveCareServicesEstablishedOfficeVisit18andUp","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"689263dee8da6d1c0d4f9a96","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"689263dee8da6d1c0d4f9aa4","_type":"QDM::Diagnosis","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"2.16.840.1.113883.3.464.1003.113.12.1074","dataElementCodes":[],"description":"Diagnosis: FrailtyDiagnosis","hqmfOid":"2.16.840.1.113883.10.20.28.4.110","id":"689263dee8da6d1c0d4f9aa4","prevalencePeriod":null,"qdmCategory":"condition","qdmTitle":"Diagnosis","qdmVersion":"5.6","qrdaOid":"2.16.840.1.113883.10.20.24.3.135","severity":null},{"_id":"689263dee8da6d1c0d4f9a97","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.464.1003.101.12.1016","dataElementCodes":[],"description":"Encounter, Performed: HomeHealthcareServices","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"689263dee8da6d1c0d4f9a97","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"689263efe8da6d1c0d4fa9f8","_type":"QDM::PatientCharacteristicRace","codeListId":"2.16.840.1.114222.4.11.836","dataElementCodes":[],"description":"Patient Characteristic Race: Race","hqmfOid":"2.16.840.1.113883.10.20.28.4.59","id":"689263efe8da6d1c0d4fa9f8","qdmCategory":"patient_characteristic","qdmStatus":"race","qdmTitle":"Patient Characteristic Race","qdmVersion":"5.6"},{"_id":"689263dee8da6d1c0d4f9a98","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.464.1003.101.12.1001","dataElementCodes":[],"description":"Encounter, Performed: OfficeVisit","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"689263dee8da6d1c0d4f9a98","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"689263efe8da6d1c0d4fa9f9","_type":"QDM::PatientCharacteristicPayer","codeListId":"2.16.840.1.114222.4.11.3591","dataElementCodes":[],"description":"Patient Characteristic Payer: Payer","hqmfOid":"2.16.840.1.113883.10.20.28.4.58","id":"689263efe8da6d1c0d4fa9f9","qdmCategory":"patient_characteristic","qdmStatus":"payer","qdmTitle":"Patient Characteristic Payer","qdmVersion":"5.6","relevantPeriod":null},{"_id":"689263dee8da6d1c0d4f9a99","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.464.1003.101.12.1084","dataElementCodes":[],"description":"Encounter, Performed: NonacuteInpatient","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"689263dee8da6d1c0d4f9a99","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"689263efe8da6d1c0d4fa9fa","_type":"QDM::MedicationActive","codeListId":"2.16.840.1.113883.3.464.1003.196.12.1510","dataElementCodes":[],"description":"Medication, Active: DementiaMedications","dosage":null,"frequency":null,"hqmfOid":"2.16.840.1.113883.10.20.28.4.44","id":"689263efe8da6d1c0d4fa9fa","qdmCategory":"medication","qdmStatus":"active","qdmTitle":"Medication, Active","qdmVersion":"5.6","relevantDatetime":null,"relevantPeriod":null,"route":null},{"_id":"689263dee8da6d1c0d4f9a9b","_type":"QDM::InterventionPerformed","authorDatetime":null,"codeListId":"2.16.840.1.113883.3.464.1003.198.12.1135","dataElementCodes":[],"description":"Intervention, Performed: PalliativeCareIntervention","hqmfOid":"2.16.840.1.113883.10.20.28.4.36","id":"689263dee8da6d1c0d4f9a9b","negationRationale":null,"qdmCategory":"intervention","qdmStatus":"performed","qdmTitle":"Intervention, Performed","qdmVersion":"5.6","reason":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null,"status":null},{"_id":"689263dee8da6d1c0d4f9a9c","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.464.1003.101.12.1090","dataElementCodes":[],"description":"Encounter, Performed: PalliativeCareEncounter","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"689263dee8da6d1c0d4f9a9c","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"689263efe8da6d1c0d4fa9fb","_type":"QDM::Symptom","codeListId":"2.16.840.1.113883.3.464.1003.113.12.1075","dataElementCodes":[],"description":"Symptom: FrailtySymptom","hqmfOid":"2.16.840.1.113883.10.20.28.4.116","id":"689263efe8da6d1c0d4fa9fb","prevalencePeriod":null,"qdmCategory":"symptom","qdmTitle":"Symptom","qdmVersion":"5.6","qrdaOid":"2.16.840.1.113883.10.20.24.3.136","severity":null},{"_id":"689263dee8da6d1c0d4f9a9d","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.464.1003.101.12.1086","dataElementCodes":[],"description":"Encounter, Performed: Observation","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"689263dee8da6d1c0d4f9a9d","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"689263dee8da6d1c0d4f9a9e","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.526.3.1240","dataElementCodes":[],"description":"Encounter, Performed: AnnualWellnessVisit","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"689263dee8da6d1c0d4f9a9e","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"689263dee8da6d1c0d4f9a9f","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.464.1003.101.12.1087","dataElementCodes":[],"description":"Encounter, Performed: Outpatient","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"689263dee8da6d1c0d4f9a9f","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"689263efe8da6d1c0d4fa9fc","_type":"QDM::PatientCharacteristicEthnicity","codeListId":"2.16.840.1.114222.4.11.837","dataElementCodes":[],"description":"Patient Characteristic Ethnicity: Ethnicity","hqmfOid":"2.16.840.1.113883.10.20.28.4.56","id":"689263efe8da6d1c0d4fa9fc","qdmCategory":"patient_characteristic","qdmStatus":"ethnicity","qdmTitle":"Patient Characteristic Ethnicity","qdmVersion":"5.6"},{"_id":"689263dee8da6d1c0d4f9aa0","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.464.1003.101.12.1010","dataElementCodes":[],"description":"Encounter, Performed: EmergencyDepartmentVisit","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"689263dee8da6d1c0d4f9aa0","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"689263dee8da6d1c0d4f9aa1","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.464.1003.101.12.1023","dataElementCodes":[],"description":"Encounter, Performed: PreventiveCareServicesInitialOfficeVisit18andUp","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"689263dee8da6d1c0d4f9aa1","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"689263dee8da6d1c0d4f9aa2","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.464.1003.1003","dataElementCodes":[],"description":"Encounter, Performed: HospiceEncounter","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"689263dee8da6d1c0d4f9aa2","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"689263dee8da6d1c0d4f9aa3","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.526.3.1285","dataElementCodes":[],"description":"Encounter, Performed: OphthalmologicalServices","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"689263dee8da6d1c0d4f9aa3","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"689263efe8da6d1c0d4fa9fd","_type":"QDM::PhysicalExamPerformed","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"2.16.840.1.113883.3.464.1003.115.12.1088","components":null,"dataElementCodes":[],"description":"Physical Exam, Performed: RetinalorDilatedEyeExam","hqmfOid":"2.16.840.1.113883.10.20.28.4.62","id":"689263efe8da6d1c0d4fa9fd","method":null,"negationRationale":null,"qdmCategory":"physical_exam","qdmStatus":"performed","qdmTitle":"Physical Exam, Performed","qdmVersion":"5.6","reason":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null},{"_id":"689263dee8da6d1c0d4f9aa5","_type":"QDM::Diagnosis","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"2.16.840.1.113883.3.464.1003.103.12.1001","dataElementCodes":[],"description":"Diagnosis: Diabetes","hqmfOid":"2.16.840.1.113883.10.20.28.4.110","id":"689263dee8da6d1c0d4f9aa5","prevalencePeriod":null,"qdmCategory":"condition","qdmTitle":"Diagnosis","qdmVersion":"5.6","qrdaOid":"2.16.840.1.113883.10.20.24.3.135","severity":null},{"_id":"689263dee8da6d1c0d4f9aa6","_type":"QDM::Diagnosis","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"2.16.840.1.113883.3.526.3.327","dataElementCodes":[],"description":"Diagnosis: DiabeticRetinopathy","hqmfOid":"2.16.840.1.113883.10.20.28.4.110","id":"689263dee8da6d1c0d4f9aa6","prevalencePeriod":null,"qdmCategory":"condition","qdmTitle":"Diagnosis","qdmVersion":"5.6","qrdaOid":"2.16.840.1.113883.10.20.24.3.135","severity":null},{"_id":"689263dee8da6d1c0d4f9aa7","_type":"QDM::Diagnosis","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"drc-83f46697e6727fd3e74e3a2a4ad5b22f799c22a583ee30d083954e3530402622","dataElementCodes":[],"description":"Diagnosis: Encounter for palliative care","hqmfOid":"2.16.840.1.113883.10.20.28.4.110","id":"689263dee8da6d1c0d4f9aa7","prevalencePeriod":null,"qdmCategory":"condition","qdmTitle":"Diagnosis","qdmVersion":"5.6","qrdaOid":"2.16.840.1.113883.10.20.24.3.135","severity":null},{"_id":"689263dee8da6d1c0d4f9aa8","_type":"QDM::AssessmentPerformed","authorDatetime":null,"codeListId":"drc-98493b098fe76eaad45c3544520c83099ec07b5c0842b00514f26f7d1927aab9","components":null,"dataElementCodes":[],"description":"Assessment, Performed: Functional Assessment of Chronic Illness Therapy - Palliative Care Questionnaire (FACIT-Pal)","hqmfOid":"2.16.840.1.113883.10.20.28.4.117","id":"689263dee8da6d1c0d4f9aa8","interpretation":null,"method":null,"negationRationale":null,"qdmCategory":"assessment","qdmStatus":"performed","qdmTitle":"Assessment, Performed","qdmVersion":"5.6","reason":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null},{"_id":"689263dee8da6d1c0d4f9aa9","_type":"QDM::AssessmentPerformed","authorDatetime":null,"codeListId":"drc-f6d772ec145db993bf6142d21ba0d77f6979ffb3daa2a3183e8aea70e0400a8b","components":null,"dataElementCodes":[],"description":"Assessment, Performed: Medical equipment used","hqmfOid":"2.16.840.1.113883.10.20.28.4.117","id":"689263dee8da6d1c0d4f9aa9","interpretation":null,"method":null,"negationRationale":null,"qdmCategory":"assessment","qdmStatus":"performed","qdmTitle":"Assessment, Performed","qdmVersion":"5.6","reason":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null},{"_id":"689263dee8da6d1c0d4f9aaa","_type":"QDM::AssessmentPerformed","authorDatetime":null,"codeListId":"drc-c93e9ff0f3ae782b57e2dffc50fb44954c436dba04720564ac12591838101b3f","components":null,"dataElementCodes":[],"description":"Assessment, Performed: Housing status","hqmfOid":"2.16.840.1.113883.10.20.28.4.117","id":"689263dee8da6d1c0d4f9aaa","interpretation":null,"method":null,"negationRationale":null,"qdmCategory":"assessment","qdmStatus":"performed","qdmTitle":"Assessment, Performed","qdmVersion":"5.6","reason":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null},{"_id":"689263dee8da6d1c0d4f9aab","_type":"QDM::AssessmentPerformed","authorDatetime":null,"codeListId":"drc-fba6a4e5f5a529f9af0e0ac4cc9930b15eed11995ff69f544d676472e0b4ea9f","components":null,"dataElementCodes":[],"description":"Assessment, Performed: Hospice care [Minimum Data Set]","hqmfOid":"2.16.840.1.113883.10.20.28.4.117","id":"689263dee8da6d1c0d4f9aab","interpretation":null,"method":null,"negationRationale":null,"qdmCategory":"assessment","qdmStatus":"performed","qdmTitle":"Assessment, Performed","qdmVersion":"5.6","reason":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null}],"title":"Diabetes: Eye Exam","updated_at":null,"value_set_ids":["689263dee8da6d1c0d4f9aac","689263dee8da6d1c0d4f9aad","689263dee8da6d1c0d4f9aae","689263dee8da6d1c0d4f9aaf","689263dee8da6d1c0d4f9ab0","689263dee8da6d1c0d4f9ab1","689263dee8da6d1c0d4f9ab2","689263dee8da6d1c0d4f9ab3","689263dee8da6d1c0d4f9ab4","689263eee8da6d1c0d4fa9b5","689263eee8da6d1c0d4fa9b6","689263eee8da6d1c0d4fa9b7","689263eee8da6d1c0d4fa9b8","689263eee8da6d1c0d4fa9b9","689263eee8da6d1c0d4fa9ba","689263eee8da6d1c0d4fa9bb","689263eee8da6d1c0d4fa9bc","689263eee8da6d1c0d4fa9bd","689263eee8da6d1c0d4fa9be","689263eee8da6d1c0d4fa9bf","689263eee8da6d1c0d4fa9c0","689263eee8da6d1c0d4fa9c1","689263eee8da6d1c0d4fa9c2","689263eee8da6d1c0d4fa9c3","689263eee8da6d1c0d4fa9c4","689263eee8da6d1c0d4fa9c5","689263eee8da6d1c0d4fa9c6","689263eee8da6d1c0d4fa9c7","689263eee8da6d1c0d4fa9c8","689263eee8da6d1c0d4fa9c9","689263eee8da6d1c0d4fa9ca","689263eee8da6d1c0d4fa9cb","689263eee8da6d1c0d4fa9cc","689263eee8da6d1c0d4fa9cd","689263eee8da6d1c0d4fa9ce","689263eee8da6d1c0d4fa9cf","689263eee8da6d1c0d4fa9d0","689263eee8da6d1c0d4fa9d1","689263eee8da6d1c0d4fa9d2","689263eee8da6d1c0d4fa9d3","689263eee8da6d1c0d4fa9d4","689263eee8da6d1c0d4fa9d5","689263eee8da6d1c0d4fa9d6"]}