{"_id":"689203dd10d20757c0cf5bd7","calculate_sdes":null,"calculation_method":"PATIENT","cms_id":"CMS819v4","component":false,"component_hqmf_set_ids":[],"composite":false,"composite_hqmf_set_id":null,"cql_libraries":[{"_id":"689203d910d20757c0cf5964","cql":"library CMS819HHORAE version '4.2.000'\n\nusing QDM version '5.6'\n\ninclude CQMCommonQDM version '9.0.000' called Global\n\n\ncodesystem \"HSLOC\": 'urn:oid:2.16.840.1.113883.6.259'\n\nvalueset \"Federal Administrative Sex\": 'urn:oid:2.16.840.1.113762.1.4.1021.121'\nvalueset \"Encounter Inpatient\": 'urn:oid:2.16.840.1.113883.3.666.5.307'\nvalueset \"Ethnicity\": 'urn:oid:2.16.840.1.114222.4.11.837'\nvalueset \"Opioid Antagonist\": 'urn:oid:2.16.840.1.113762.1.4.1248.119'\nvalueset \"Opioids, All\": 'urn:oid:2.16.840.1.113762.1.4.1196.226'\nvalueset \"Payer Type\": 'urn:oid:2.16.840.1.114222.4.11.3591'\nvalueset \"Race\": 'urn:oid:2.16.840.1.114222.4.11.836'\nvalueset \"Routes of Administration for Opioid Antagonists\": 'urn:oid:2.16.840.1.113762.1.4.1248.187'\n\ncode \"Operating Room/Suite\": '1096-7' from \"HSLOC\" display 'Operating Room/Suite'\n\nparameter \"Measurement Period\" Interval\u003cDateTime\u003e\n\ncontext Patient\n\ndefine \"Denominator\":\n  \"Initial Population\"\n\ndefine \"Initial Population\":\n  \"Encounter with Opioid Administration Outside of Operating Room\"\n\ndefine \"Non Enteral Opioid Antagonist Administration\":\n  [\"Medication, Administered\": \"Opioid Antagonist\"] Antagonist\n    where Antagonist.route in \"Routes of Administration for Opioid Antagonists\"\n\ndefine \"Numerator\":\n  \"Encounter with NonOperating Room Opioid and Antagonist Administration\"\n\ndefine \"Opioid Administration\":\n  [\"Medication, Administered\": \"Opioids, All\"]\n\ndefine \"Qualifying Encounter\":\n  [\"Encounter, Performed\": \"Encounter Inpatient\"] InpatientHospitalization\n    where InpatientHospitalization.relevantPeriod ends during day of \"Measurement Period\"\n      and AgeInYearsAt(date from start of InpatientHospitalization.relevantPeriod) \u003e= 18\n\ndefine \"SDE Ethnicity\":\n  [\"Patient Characteristic Ethnicity\": \"Ethnicity\"]\n\ndefine \"SDE Payer\":\n  [\"Patient Characteristic Payer\": \"Payer Type\"]\n\ndefine \"SDE Race\":\n  [\"Patient Characteristic Race\": \"Race\"]\n\ndefine \"SDE Sex\":\n  [\"Patient Characteristic Sex\": \"Federal Administrative Sex\"]\n\ndefine \"Encounter with NonOperating Room Opioid and Antagonist Administration\":\n  /* \n  Excludes opioid antagonist administered in operating room \n  AND excludes opioids administered in operating room \n  AND opioid is administered before opioid antagonist \n  AND limits opioid antagonist to non-enteral routes\n  */\n  \n  from\n    \"Non Enteral Opioid Antagonist Administration\" NonEnteralOpioidAntagonistGiven,\n    \"Opioid Administration\" OpioidGiven,\n    \"Denominator\" InpatientHospitalization\n    let NonEnteralOpioidAntagonistGivenTime: Global.\"NormalizeInterval\" ( NonEnteralOpioidAntagonistGiven.relevantDatetime, NonEnteralOpioidAntagonistGiven.relevantPeriod ),\n    OpioidGivenTime: Global.\"NormalizeInterval\" ( OpioidGiven.relevantDatetime, OpioidGiven.relevantPeriod ),\n    HospitalPeriod: Global.\"HospitalizationWithObservation\" ( InpatientHospitalization )\n    where not exists ( InpatientHospitalization.facilityLocations EncounterLocation\n        where EncounterLocation.code ~ \"Operating Room/Suite\"\n          and NonEnteralOpioidAntagonistGivenTime starts during EncounterLocation.locationPeriod\n    )\n      and not exists ( InpatientHospitalization.facilityLocations EncounterLocation\n          where EncounterLocation.code ~ \"Operating Room/Suite\"\n            and OpioidGivenTime starts during EncounterLocation.locationPeriod\n      )\n      and NonEnteralOpioidAntagonistGivenTime starts during HospitalPeriod\n      and OpioidGivenTime starts during HospitalPeriod\n      and OpioidGivenTime ends 12 hours or less before start of NonEnteralOpioidAntagonistGivenTime\n    return InpatientHospitalization\n\ndefine \"Encounter with Opioid Administration Outside of Operating Room\":\n  \"Qualifying Encounter\" InpatientEncounter\n    with \"Opioid Administration\" OpioidGiven\n      such that Global.\"NormalizeInterval\" ( OpioidGiven.relevantDatetime, OpioidGiven.relevantPeriod ) starts during Global.\"HospitalizationWithObservation\" ( InpatientEncounter )\n        and not exists ( InpatientEncounter.facilityLocations EncounterLocation\n            where EncounterLocation.code ~ \"Operating Room/Suite\"\n              and Global.\"NormalizeInterval\" ( OpioidGiven.relevantDatetime, OpioidGiven.relevantPeriod ) starts during EncounterLocation.locationPeriod\n        )","elm":{"library":{"localId":"0","annotation":[{"translatorVersion":"3.14.0","translatorOptions":"EnableAnnotations,EnableLocators,EnableResultTypes,EnableDetailedErrors,DisableListDemotion,DisableListPromotion","signatureLevel":"None","type":"CqlToElmInfo"},{"type":"Annotation","s":{"r":"235","s":[{"value":["","library CMS819HHORAE version '4.2.000'"]}]}}],"identifier":{"id":"CMS819HHORAE","version":"4.2.000"},"schemaIdentifier":{"id":"urn:hl7-org:elm","version":"r1"},"usings":{"def":[{"localId":"1","localIdentifier":"System","uri":"urn:hl7-org:elm-types:r1"},{"localId":"206","locator":"3:1-3:23","localIdentifier":"QDM","uri":"urn:healthit-gov:qdm:v5_6","version":"5.6","annotation":[{"type":"Annotation","s":{"r":"206","s":[{"value":["","using "]},{"s":[{"value":["QDM"]}]},{"value":[" version '5.6'"]}]}}]}]},"includes":{"def":[{"localId":"207","locator":"5:1-5:52","localIdentifier":"Global","path":"CQMCommonQDM","version":"9.0.000","annotation":[{"type":"Annotation","s":{"r":"207","s":[{"value":["","include "]},{"s":[{"value":["CQMCommonQDM"]}]},{"value":[" version ","'9.0.000'"," called ","Global"]}]}}]}]},"parameters":{"def":[{"localId":"219","locator":"21:1-21:49","name":"Measurement Period","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"219","s":[{"value":["","parameter ","\"Measurement Period\""," "]},{"r":"220","s":[{"value":["Interval\u003c"]},{"r":"221","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}}],"resultTypeSpecifier":{"localId":"224","type":"IntervalTypeSpecifier","pointType":{"localId":"225","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"parameterTypeSpecifier":{"localId":"220","locator":"21:32-21:49","type":"IntervalTypeSpecifier","resultTypeSpecifier":{"localId":"222","type":"IntervalTypeSpecifier","pointType":{"localId":"223","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"pointType":{"localId":"221","locator":"21:41-21:48","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},"codeSystems":{"def":[{"localId":"208","locator":"8:1-8:53","resultTypeName":"{urn:hl7-org:elm-types:r1}CodeSystem","name":"HSLOC","id":"2.16.840.1.113883.6.259","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"208","s":[{"value":["","codesystem ","\"HSLOC\"",": ","'urn:oid:2.16.840.1.113883.6.259'"]}]}}]}]},"valueSets":{"def":[{"localId":"209","locator":"10:1-10:79","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Federal Administrative Sex","id":"2.16.840.1.113762.1.4.1021.121","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"209","s":[{"value":["","valueset ","\"Federal Administrative Sex\"",": ","'urn:oid:2.16.840.1.113762.1.4.1021.121'"]}]}}],"codeSystem":[]},{"localId":"210","locator":"11:1-11:71","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Encounter Inpatient","id":"2.16.840.1.113883.3.666.5.307","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"210","s":[{"value":["","valueset ","\"Encounter Inpatient\"",": ","'urn:oid:2.16.840.1.113883.3.666.5.307'"]}]}}],"codeSystem":[]},{"localId":"211","locator":"12:1-12:58","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Ethnicity","id":"2.16.840.1.114222.4.11.837","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"211","s":[{"value":["","valueset ","\"Ethnicity\"",": ","'urn:oid:2.16.840.1.114222.4.11.837'"]}]}}],"codeSystem":[]},{"localId":"212","locator":"13:1-13:70","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Opioid Antagonist","id":"2.16.840.1.113762.1.4.1248.119","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"212","s":[{"value":["","valueset ","\"Opioid Antagonist\"",": ","'urn:oid:2.16.840.1.113762.1.4.1248.119'"]}]}}],"codeSystem":[]},{"localId":"213","locator":"14:1-14:65","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Opioids, All","id":"2.16.840.1.113762.1.4.1196.226","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"213","s":[{"value":["","valueset ","\"Opioids, All\"",": ","'urn:oid:2.16.840.1.113762.1.4.1196.226'"]}]}}],"codeSystem":[]},{"localId":"214","locator":"15:1-15:60","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Payer Type","id":"2.16.840.1.114222.4.11.3591","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"214","s":[{"value":["","valueset ","\"Payer Type\"",": ","'urn:oid:2.16.840.1.114222.4.11.3591'"]}]}}],"codeSystem":[]},{"localId":"215","locator":"16:1-16:53","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Race","id":"2.16.840.1.114222.4.11.836","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"215","s":[{"value":["","valueset ","\"Race\"",": ","'urn:oid:2.16.840.1.114222.4.11.836'"]}]}}],"codeSystem":[]},{"localId":"216","locator":"17:1-17:100","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Routes of Administration for Opioid Antagonists","id":"2.16.840.1.113762.1.4.1248.187","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"216","s":[{"value":["","valueset ","\"Routes of Administration for Opioid Antagonists\"",": ","'urn:oid:2.16.840.1.113762.1.4.1248.187'"]}]}}],"codeSystem":[]}]},"codes":{"def":[{"localId":"217","locator":"19:1-19:81","resultTypeName":"{urn:hl7-org:elm-types:r1}Code","name":"Operating Room/Suite","id":"1096-7","display":"Operating Room/Suite","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"217","s":[{"value":["","code ","\"Operating Room/Suite\"",": ","'1096-7'"," from "]},{"r":"218","s":[{"value":["\"HSLOC\""]}]},{"value":[" display ","'Operating Room/Suite'"]}]}}],"codeSystem":{"localId":"218","locator":"19:44-19:50","resultTypeName":"{urn:hl7-org:elm-types:r1}CodeSystem","name":"HSLOC"}}]},"contexts":{"def":[{"localId":"229","locator":"23:1-23:15","name":"Patient"}]},"statements":{"def":[{"localId":"227","locator":"23:1-23:15","name":"Patient","context":"Patient","expression":{"localId":"228","type":"SingletonFrom","signature":[],"operand":{"localId":"226","locator":"23:1-23:15","dataType":"{urn:healthit-gov:qdm:v5_6}Patient","templateId":"Patient","type":"Retrieve","include":[],"codeFilter":[],"dateFilter":[],"otherFilter":[]}}},{"localId":"238","locator":"41:1-44:88","name":"Qualifying Encounter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"238","s":[{"value":["","define ","\"Qualifying Encounter\"",":\n  "]},{"r":"279","s":[{"s":[{"r":"239","s":[{"r":"242","s":[{"r":"242","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Encounter Inpatient\""]}]},{"value":["]"]}]}]},{"value":[" ","InpatientHospitalization"]}]}]},{"value":["\n    "]},{"r":"250","s":[{"value":["where "]},{"r":"250","s":[{"r":"261","s":[{"r":"252","s":[{"r":"251","s":[{"value":["InpatientHospitalization"]}]},{"value":["."]},{"r":"252","s":[{"value":["relevantPeriod"]}]}]},{"r":"261","value":[" ","ends during day of"," "]},{"r":"257","s":[{"value":["\"Measurement Period\""]}]}]},{"value":["\n      and "]},{"r":"262","s":[{"r":"277","s":[{"value":["AgeInYearsAt","("]},{"r":"263","s":[{"value":["date from "]},{"r":"264","s":[{"value":["start of "]},{"r":"266","s":[{"r":"265","s":[{"value":["InpatientHospitalization"]}]},{"value":["."]},{"r":"266","s":[{"value":["relevantPeriod"]}]}]}]}]},{"value":[")"]}]},{"r":"278","value":[" ","\u003e="," ","18"]}]}]}]}]}]}}],"resultTypeSpecifier":{"localId":"591","type":"ListTypeSpecifier","elementType":{"localId":"592","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"279","locator":"42:3-44:88","type":"Query","resultTypeSpecifier":{"localId":"280","type":"ListTypeSpecifier","elementType":{"localId":"281","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"source":[{"localId":"239","locator":"42:3-42:74","alias":"InpatientHospitalization","resultTypeSpecifier":{"localId":"248","type":"ListTypeSpecifier","elementType":{"localId":"249","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"242","locator":"42:3-42:49","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","resultTypeSpecifier":{"localId":"246","type":"ListTypeSpecifier","elementType":{"localId":"247","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"codes":{"localId":"241","locator":"42:28-42:48","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Encounter Inpatient","preserve":true,"type":"ValueSetRef"},"include":[],"codeFilter":[],"dateFilter":[],"otherFilter":[]}}],"let":[],"relationship":[],"where":{"localId":"250","locator":"43:5-44:88","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"And","signature":[],"operand":[{"localId":"261","locator":"43:11-43:89","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","precision":"Day","type":"In","signature":[],"operand":[{"localId":"260","locator":"43:51-43:54","type":"End","signature":[],"operand":{"localId":"252","locator":"43:11-43:49","path":"relevantPeriod","scope":"InpatientHospitalization","type":"Property","resultTypeSpecifier":{"localId":"255","type":"IntervalTypeSpecifier","pointType":{"localId":"256","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}},{"localId":"257","locator":"43:70-43:89","name":"Measurement Period","type":"ParameterRef","resultTypeSpecifier":{"localId":"258","type":"IntervalTypeSpecifier","pointType":{"localId":"259","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"262","locator":"44:11-44:88","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"GreaterOrEqual","signature":[],"operand":[{"localId":"277","locator":"44:11-44:82","resultTypeName":"{urn:hl7-org:elm-types:r1}Integer","precision":"Year","type":"CalculateAgeAt","signature":[],"operand":[{"localId":"276","type":"ToDate","signature":[],"operand":{"localId":"274","path":"birthDatetime","type":"Property","source":{"localId":"273","name":"Patient","type":"ExpressionRef"}}},{"localId":"263","locator":"44:24-44:81","resultTypeName":"{urn:hl7-org:elm-types:r1}Date","type":"DateFrom","signature":[],"operand":{"localId":"264","locator":"44:34-44:81","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"266","locator":"44:43-44:81","path":"relevantPeriod","scope":"InpatientHospitalization","type":"Property","resultTypeSpecifier":{"localId":"269","type":"IntervalTypeSpecifier","pointType":{"localId":"270","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}}]},{"localId":"278","locator":"44:87-44:88","resultTypeName":"{urn:hl7-org:elm-types:r1}Integer","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"18","type":"Literal"}]}]}}},{"localId":"291","locator":"38:1-39:46","name":"Opioid Administration","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"291","s":[{"value":["","define ","\"Opioid Administration\"",":\n  "]},{"r":"294","s":[{"value":["[","\"Medication, Administered\"",": "]},{"s":[{"value":["\"Opioids, All\""]}]},{"value":["]"]}]}]}}],"resultTypeSpecifier":{"localId":"589","type":"ListTypeSpecifier","elementType":{"localId":"590","name":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationAdministered","type":"NamedTypeSpecifier"}},"expression":{"localId":"294","locator":"39:3-39:46","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationAdministered","templateId":"PositiveMedicationAdministered","codeProperty":"code","codeComparator":"in","type":"Retrieve","resultTypeSpecifier":{"localId":"296","type":"ListTypeSpecifier","elementType":{"localId":"297","name":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationAdministered","type":"NamedTypeSpecifier"}},"codes":{"localId":"293","locator":"39:32-39:45","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Opioids, All","preserve":true,"type":"ValueSetRef"},"include":[],"codeFilter":[],"dateFilter":[],"otherFilter":[]}},{"localId":"235","locator":"86:1-93:9","name":"Encounter with Opioid Administration Outside of Operating Room","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"235","s":[{"value":["","define ","\"Encounter with Opioid Administration Outside of Operating Room\"",":\n  "]},{"r":"373","s":[{"s":[{"r":"236","s":[{"r":"284","s":[{"s":[{"value":["\"Qualifying Encounter\""]}]}]},{"value":[" ","InpatientEncounter"]}]}]},{"value":["\n    "]},{"r":"370","s":[{"value":["with "]},{"r":"289","s":[{"r":"300","s":[{"s":[{"value":["\"Opioid Administration\""]}]}]},{"value":[" ","OpioidGiven"]}]},{"value":["\n      such that "]},{"r":"305","s":[{"r":"328","s":[{"r":"315","s":[{"r":"306","s":[{"value":["Global"]}]},{"value":["."]},{"r":"315","s":[{"value":["\"NormalizeInterval\""," ( "]},{"r":"308","s":[{"r":"307","s":[{"value":["OpioidGiven"]}]},{"value":["."]},{"r":"308","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"310","s":[{"r":"309","s":[{"value":["OpioidGiven"]}]},{"value":["."]},{"r":"310","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]},{"r":"328","value":[" ","starts during"," "]},{"r":"322","s":[{"r":"320","s":[{"value":["Global"]}]},{"value":["."]},{"r":"322","s":[{"value":["\"HospitalizationWithObservation\""," ( "]},{"r":"321","s":[{"value":["InpatientEncounter"]}]},{"value":[" )"]}]}]}]},{"value":["\n        and "]},{"r":"329","s":[{"value":["not "]},{"r":"330","s":[{"value":["exists "]},{"r":"365","s":[{"value":["( "]},{"r":"365","s":[{"s":[{"r":"331","s":[{"r":"333","s":[{"s":[{"value":["InpatientEncounter",".","facilityLocations"]}]}]},{"value":[" ","EncounterLocation"]}]}]},{"value":["\n            "]},{"r":"338","s":[{"value":["where "]},{"r":"338","s":[{"r":"339","s":[{"r":"341","s":[{"r":"340","s":[{"value":["EncounterLocation"]}]},{"value":["."]},{"r":"341","s":[{"value":["code"]}]}]},{"value":[" ","~"," "]},{"r":"342","s":[{"value":["\"Operating Room/Suite\""]}]}]},{"value":["\n              and "]},{"r":"364","s":[{"r":"352","s":[{"r":"343","s":[{"value":["Global"]}]},{"value":["."]},{"r":"352","s":[{"value":["\"NormalizeInterval\""," ( "]},{"r":"345","s":[{"r":"344","s":[{"value":["OpioidGiven"]}]},{"value":["."]},{"r":"345","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"347","s":[{"r":"346","s":[{"value":["OpioidGiven"]}]},{"value":["."]},{"r":"347","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]},{"r":"364","value":[" ","starts during"," "]},{"r":"358","s":[{"r":"357","s":[{"value":["EncounterLocation"]}]},{"value":["."]},{"r":"358","s":[{"value":["locationPeriod"]}]}]}]}]}]}]},{"value":["\n        )"]}]}]}]}]}]}]}]}}],"resultTypeSpecifier":{"localId":"635","type":"ListTypeSpecifier","elementType":{"localId":"636","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"373","locator":"87:3-93:9","type":"Query","resultTypeSpecifier":{"localId":"374","type":"ListTypeSpecifier","elementType":{"localId":"375","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"source":[{"localId":"236","locator":"87:3-87:43","alias":"InpatientEncounter","resultTypeSpecifier":{"localId":"287","type":"ListTypeSpecifier","elementType":{"localId":"288","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"284","locator":"87:3-87:24","name":"Qualifying Encounter","type":"ExpressionRef","resultTypeSpecifier":{"localId":"285","type":"ListTypeSpecifier","elementType":{"localId":"286","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}}}],"let":[],"relationship":[{"localId":"370","locator":"88:5-93:9","alias":"OpioidGiven","type":"With","resultTypeSpecifier":{"localId":"371","type":"ListTypeSpecifier","elementType":{"localId":"372","name":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationAdministered","type":"NamedTypeSpecifier"}},"expression":{"localId":"300","locator":"88:10-88:32","name":"Opioid Administration","type":"ExpressionRef","resultTypeSpecifier":{"localId":"301","type":"ListTypeSpecifier","elementType":{"localId":"302","name":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationAdministered","type":"NamedTypeSpecifier"}}},"suchThat":{"localId":"305","locator":"89:17-93:9","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"And","signature":[],"operand":[{"localId":"328","locator":"89:17-89:180","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"In","signature":[],"operand":[{"localId":"327","locator":"89:105-89:110","type":"Start","signature":[],"operand":{"localId":"315","locator":"89:17-89:103","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","resultTypeSpecifier":{"localId":"318","type":"IntervalTypeSpecifier","pointType":{"localId":"319","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"signature":[],"operand":[{"localId":"308","locator":"89:46-89:73","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","path":"relevantDatetime","scope":"OpioidGiven","type":"Property"},{"localId":"310","locator":"89:76-89:101","path":"relevantPeriod","scope":"OpioidGiven","type":"Property","resultTypeSpecifier":{"localId":"313","type":"IntervalTypeSpecifier","pointType":{"localId":"314","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]}},{"localId":"322","locator":"89:119-89:180","name":"HospitalizationWithObservation","libraryName":"Global","type":"FunctionRef","resultTypeSpecifier":{"localId":"325","type":"IntervalTypeSpecifier","pointType":{"localId":"326","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"signature":[],"operand":[{"localId":"321","locator":"89:161-89:178","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"InpatientEncounter","type":"AliasRef"}]}]},{"localId":"329","locator":"90:13-93:9","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"Not","signature":[],"operand":{"localId":"330","locator":"90:17-93:9","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"Exists","signature":[],"operand":{"localId":"365","locator":"90:24-93:9","type":"Query","resultTypeSpecifier":{"localId":"368","type":"ListTypeSpecifier","elementType":{"localId":"369","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}},"source":[{"localId":"331","locator":"90:26-90:79","alias":"EncounterLocation","resultTypeSpecifier":{"localId":"336","type":"ListTypeSpecifier","elementType":{"localId":"337","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}},"expression":{"localId":"333","locator":"90:26-90:61","path":"facilityLocations","scope":"InpatientEncounter","type":"Property","resultTypeSpecifier":{"localId":"334","type":"ListTypeSpecifier","elementType":{"localId":"335","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}}}}],"let":[],"relationship":[],"where":{"localId":"338","locator":"91:13-92:152","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"And","signature":[],"operand":[{"localId":"339","locator":"91:19-91:65","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"Equivalent","signature":[],"operand":[{"localId":"341","locator":"91:19-91:40","resultTypeName":"{urn:hl7-org:elm-types:r1}Code","path":"code","scope":"EncounterLocation","type":"Property"},{"localId":"342","locator":"91:44-91:65","resultTypeName":"{urn:hl7-org:elm-types:r1}Code","name":"Operating Room/Suite","type":"CodeRef"}]},{"localId":"364","locator":"92:19-92:152","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"In","signature":[],"operand":[{"localId":"363","locator":"92:107-92:112","type":"Start","signature":[],"operand":{"localId":"352","locator":"92:19-92:105","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","resultTypeSpecifier":{"localId":"355","type":"IntervalTypeSpecifier","pointType":{"localId":"356","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"signature":[],"operand":[{"localId":"345","locator":"92:48-92:75","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","path":"relevantDatetime","scope":"OpioidGiven","type":"Property"},{"localId":"347","locator":"92:78-92:103","path":"relevantPeriod","scope":"OpioidGiven","type":"Property","resultTypeSpecifier":{"localId":"350","type":"IntervalTypeSpecifier","pointType":{"localId":"351","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]}},{"localId":"358","locator":"92:121-92:152","path":"locationPeriod","scope":"EncounterLocation","type":"Property","resultTypeSpecifier":{"localId":"361","type":"IntervalTypeSpecifier","pointType":{"localId":"362","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]}]}}}}]}}]}},{"localId":"233","locator":"28:1-29:66","name":"Initial Population","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"233","s":[{"value":["","define ","\"Initial Population\"",":\n  "]},{"r":"378","s":[{"value":["\"Encounter with Opioid Administration Outside of Operating Room\""]}]}]}}],"resultTypeSpecifier":{"localId":"388","type":"ListTypeSpecifier","elementType":{"localId":"389","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"378","locator":"29:3-29:66","name":"Encounter with Opioid Administration Outside of Operating Room","type":"ExpressionRef","resultTypeSpecifier":{"localId":"379","type":"ListTypeSpecifier","elementType":{"localId":"380","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}}},{"localId":"231","locator":"25:1-26:22","name":"Denominator","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"231","s":[{"value":["","define ","\"Denominator\"",":\n  "]},{"r":"383","s":[{"value":["\"Initial Population\""]}]}]}}],"resultTypeSpecifier":{"localId":"386","type":"ListTypeSpecifier","elementType":{"localId":"387","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"383","locator":"26:3-26:22","name":"Initial Population","type":"ExpressionRef","resultTypeSpecifier":{"localId":"384","type":"ListTypeSpecifier","elementType":{"localId":"385","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}}},{"localId":"391","locator":"31:1-33:79","name":"Non Enteral Opioid Antagonist Administration","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"391","s":[{"value":["","define ","\"Non Enteral Opioid Antagonist Administration\"",":\n  "]},{"r":"407","s":[{"s":[{"r":"392","s":[{"r":"395","s":[{"r":"395","s":[{"value":["[","\"Medication, Administered\"",": "]},{"s":[{"value":["\"Opioid Antagonist\""]}]},{"value":["]"]}]}]},{"value":[" ","Antagonist"]}]}]},{"value":["\n    "]},{"r":"406","s":[{"value":["where "]},{"r":"406","s":[{"r":"404","s":[{"r":"403","s":[{"value":["Antagonist"]}]},{"value":["."]},{"r":"404","s":[{"value":["route"]}]}]},{"value":[" in "]},{"r":"405","s":[{"value":["\"Routes of Administration for Opioid Antagonists\""]}]}]}]}]}]}}],"resultTypeSpecifier":{"localId":"410","type":"ListTypeSpecifier","elementType":{"localId":"411","name":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationAdministered","type":"NamedTypeSpecifier"}},"expression":{"localId":"407","locator":"32:3-33:79","type":"Query","resultTypeSpecifier":{"localId":"408","type":"ListTypeSpecifier","elementType":{"localId":"409","name":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationAdministered","type":"NamedTypeSpecifier"}},"source":[{"localId":"392","locator":"32:3-32:62","alias":"Antagonist","resultTypeSpecifier":{"localId":"401","type":"ListTypeSpecifier","elementType":{"localId":"402","name":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationAdministered","type":"NamedTypeSpecifier"}},"expression":{"localId":"395","locator":"32:3-32:51","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationAdministered","templateId":"PositiveMedicationAdministered","codeProperty":"code","codeComparator":"in","type":"Retrieve","resultTypeSpecifier":{"localId":"399","type":"ListTypeSpecifier","elementType":{"localId":"400","name":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationAdministered","type":"NamedTypeSpecifier"}},"codes":{"localId":"394","locator":"32:32-32:50","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Opioid Antagonist","preserve":true,"type":"ValueSetRef"},"include":[],"codeFilter":[],"dateFilter":[],"otherFilter":[]}}],"let":[],"relationship":[],"where":{"localId":"406","locator":"33:5-33:79","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"InValueSet","signature":[],"code":{"localId":"404","locator":"33:11-33:26","resultTypeName":"{urn:hl7-org:elm-types:r1}Code","path":"route","scope":"Antagonist","type":"Property"},"valueset":{"localId":"405","locator":"33:31-33:79","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Routes of Administration for Opioid Antagonists","preserve":true}}}},{"localId":"415","locator":"58:1-84:35","name":"Encounter with NonOperating Room Opioid and Antagonist Administration","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"415","s":[{"value":["","define ","\"Encounter with NonOperating Room Opioid and Antagonist Administration\"",":\n  /* \n  Excludes opioid antagonist administered in operating room \n  AND excludes opioids administered in operating room \n  AND opioid is administered before opioid antagonist \n  AND limits opioid antagonist to non-enteral routes\n  */\n  \n  "]},{"r":"579","s":[{"s":[{"value":["from\n    "]},{"r":"416","s":[{"r":"417","s":[{"s":[{"value":["\"Non Enteral Opioid Antagonist Administration\""]}]}]},{"value":[" ","NonEnteralOpioidAntagonistGiven"]}]},{"value":[",\n    "]},{"r":"422","s":[{"r":"423","s":[{"s":[{"value":["\"Opioid Administration\""]}]}]},{"value":[" ","OpioidGiven"]}]},{"value":[",\n    "]},{"r":"428","s":[{"r":"429","s":[{"s":[{"value":["\"Denominator\""]}]}]},{"value":[" ","InpatientHospitalization"]}]}]},{"value":["\n    "]},{"s":[{"value":["let "]},{"r":"434","s":[{"value":["NonEnteralOpioidAntagonistGivenTime",": "]},{"r":"444","s":[{"r":"435","s":[{"value":["Global"]}]},{"value":["."]},{"r":"444","s":[{"value":["\"NormalizeInterval\""," ( "]},{"r":"437","s":[{"r":"436","s":[{"value":["NonEnteralOpioidAntagonistGiven"]}]},{"value":["."]},{"r":"437","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"439","s":[{"r":"438","s":[{"value":["NonEnteralOpioidAntagonistGiven"]}]},{"value":["."]},{"r":"439","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]}]},{"value":[",\n    "]},{"r":"451","s":[{"value":["OpioidGivenTime",": "]},{"r":"461","s":[{"r":"452","s":[{"value":["Global"]}]},{"value":["."]},{"r":"461","s":[{"value":["\"NormalizeInterval\""," ( "]},{"r":"454","s":[{"r":"453","s":[{"value":["OpioidGiven"]}]},{"value":["."]},{"r":"454","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"456","s":[{"r":"455","s":[{"value":["OpioidGiven"]}]},{"value":["."]},{"r":"456","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]}]},{"value":[",\n    "]},{"r":"468","s":[{"value":["HospitalPeriod",": "]},{"r":"471","s":[{"r":"469","s":[{"value":["Global"]}]},{"value":["."]},{"r":"471","s":[{"value":["\"HospitalizationWithObservation\""," ( "]},{"r":"470","s":[{"value":["InpatientHospitalization"]}]},{"value":[" )"]}]}]}]}]},{"value":["\n    "]},{"r":"478","s":[{"value":["where "]},{"r":"478","s":[{"r":"479","s":[{"r":"480","s":[{"r":"481","s":[{"r":"482","s":[{"value":["not "]},{"r":"483","s":[{"value":["exists "]},{"r":"507","s":[{"value":["( "]},{"r":"507","s":[{"s":[{"r":"484","s":[{"r":"486","s":[{"s":[{"value":["InpatientHospitalization",".","facilityLocations"]}]}]},{"value":[" ","EncounterLocation"]}]}]},{"value":["\n        "]},{"r":"491","s":[{"value":["where "]},{"r":"491","s":[{"r":"492","s":[{"r":"494","s":[{"r":"493","s":[{"value":["EncounterLocation"]}]},{"value":["."]},{"r":"494","s":[{"value":["code"]}]}]},{"value":[" ","~"," "]},{"r":"495","s":[{"value":["\"Operating Room/Suite\""]}]}]},{"value":["\n          and "]},{"r":"506","s":[{"r":"496","s":[{"value":["NonEnteralOpioidAntagonistGivenTime"]}]},{"r":"506","value":[" ","starts during"," "]},{"r":"500","s":[{"r":"499","s":[{"value":["EncounterLocation"]}]},{"value":["."]},{"r":"500","s":[{"value":["locationPeriod"]}]}]}]}]}]}]},{"value":["\n    )"]}]}]}]},{"value":["\n      and "]},{"r":"512","s":[{"value":["not "]},{"r":"513","s":[{"value":["exists "]},{"r":"537","s":[{"value":["( "]},{"r":"537","s":[{"s":[{"r":"514","s":[{"r":"516","s":[{"s":[{"value":["InpatientHospitalization",".","facilityLocations"]}]}]},{"value":[" ","EncounterLocation"]}]}]},{"value":["\n          "]},{"r":"521","s":[{"value":["where "]},{"r":"521","s":[{"r":"522","s":[{"r":"524","s":[{"r":"523","s":[{"value":["EncounterLocation"]}]},{"value":["."]},{"r":"524","s":[{"value":["code"]}]}]},{"value":[" ","~"," "]},{"r":"525","s":[{"value":["\"Operating Room/Suite\""]}]}]},{"value":["\n            and "]},{"r":"536","s":[{"r":"526","s":[{"value":["OpioidGivenTime"]}]},{"r":"536","value":[" ","starts during"," "]},{"r":"530","s":[{"r":"529","s":[{"value":["EncounterLocation"]}]},{"value":["."]},{"r":"530","s":[{"value":["locationPeriod"]}]}]}]}]}]}]},{"value":["\n      )"]}]}]}]}]},{"value":["\n      and "]},{"r":"549","s":[{"r":"542","s":[{"value":["NonEnteralOpioidAntagonistGivenTime"]}]},{"r":"549","value":[" ","starts during"," "]},{"r":"545","s":[{"value":["HospitalPeriod"]}]}]}]},{"value":["\n      and "]},{"r":"557","s":[{"r":"550","s":[{"value":["OpioidGivenTime"]}]},{"r":"557","value":[" ","starts during"," "]},{"r":"553","s":[{"value":["HospitalPeriod"]}]}]}]},{"value":["\n      and "]},{"r":"574","s":[{"r":"558","s":[{"value":["OpioidGivenTime"]}]},{"value":[" "]},{"r":"574","s":[{"value":["ends "]},{"r":"566","s":[{"value":["12 ","hours"]}]},{"value":[" or less before"]}]},{"value":[" "]},{"r":"561","s":[{"value":["start of "]},{"r":"562","s":[{"value":["NonEnteralOpioidAntagonistGivenTime"]}]}]}]}]}]},{"value":["\n    "]},{"r":"575","s":[{"value":["return "]},{"r":"576","s":[{"value":["InpatientHospitalization"]}]}]}]}]}}],"resultTypeSpecifier":{"localId":"633","type":"ListTypeSpecifier","elementType":{"localId":"634","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"579","locator":"66:3-84:35","type":"Query","resultTypeSpecifier":{"localId":"580","type":"ListTypeSpecifier","elementType":{"localId":"581","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"source":[{"localId":"416","locator":"67:5-67:82","alias":"NonEnteralOpioidAntagonistGiven","resultTypeSpecifier":{"localId":"420","type":"ListTypeSpecifier","elementType":{"localId":"421","name":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationAdministered","type":"NamedTypeSpecifier"}},"expression":{"localId":"417","locator":"67:5-67:50","name":"Non Enteral Opioid Antagonist Administration","type":"ExpressionRef","resultTypeSpecifier":{"localId":"418","type":"ListTypeSpecifier","elementType":{"localId":"419","name":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationAdministered","type":"NamedTypeSpecifier"}}}},{"localId":"422","locator":"68:5-68:39","alias":"OpioidGiven","resultTypeSpecifier":{"localId":"426","type":"ListTypeSpecifier","elementType":{"localId":"427","name":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationAdministered","type":"NamedTypeSpecifier"}},"expression":{"localId":"423","locator":"68:5-68:27","name":"Opioid Administration","type":"ExpressionRef","resultTypeSpecifier":{"localId":"424","type":"ListTypeSpecifier","elementType":{"localId":"425","name":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationAdministered","type":"NamedTypeSpecifier"}}}},{"localId":"428","locator":"69:5-69:42","alias":"InpatientHospitalization","resultTypeSpecifier":{"localId":"432","type":"ListTypeSpecifier","elementType":{"localId":"433","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"429","locator":"69:5-69:17","name":"Denominator","type":"ExpressionRef","resultTypeSpecifier":{"localId":"430","type":"ListTypeSpecifier","elementType":{"localId":"431","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}}}],"let":[{"localId":"434","locator":"70:9-70:172","identifier":"NonEnteralOpioidAntagonistGivenTime","resultTypeSpecifier":{"localId":"449","type":"IntervalTypeSpecifier","pointType":{"localId":"450","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"expression":{"localId":"444","locator":"70:46-70:172","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","resultTypeSpecifier":{"localId":"447","type":"IntervalTypeSpecifier","pointType":{"localId":"448","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"signature":[],"operand":[{"localId":"437","locator":"70:75-70:122","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","path":"relevantDatetime","scope":"NonEnteralOpioidAntagonistGiven","type":"Property"},{"localId":"439","locator":"70:125-70:170","path":"relevantPeriod","scope":"NonEnteralOpioidAntagonistGiven","type":"Property","resultTypeSpecifier":{"localId":"442","type":"IntervalTypeSpecifier","pointType":{"localId":"443","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]}},{"localId":"451","locator":"71:5-71:108","identifier":"OpioidGivenTime","resultTypeSpecifier":{"localId":"466","type":"IntervalTypeSpecifier","pointType":{"localId":"467","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"expression":{"localId":"461","locator":"71:22-71:108","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","resultTypeSpecifier":{"localId":"464","type":"IntervalTypeSpecifier","pointType":{"localId":"465","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"signature":[],"operand":[{"localId":"454","locator":"71:51-71:78","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","path":"relevantDatetime","scope":"OpioidGiven","type":"Property"},{"localId":"456","locator":"71:81-71:106","path":"relevantPeriod","scope":"OpioidGiven","type":"Property","resultTypeSpecifier":{"localId":"459","type":"IntervalTypeSpecifier","pointType":{"localId":"460","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]}},{"localId":"468","locator":"72:5-72:88","identifier":"HospitalPeriod","resultTypeSpecifier":{"localId":"476","type":"IntervalTypeSpecifier","pointType":{"localId":"477","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"expression":{"localId":"471","locator":"72:21-72:88","name":"HospitalizationWithObservation","libraryName":"Global","type":"FunctionRef","resultTypeSpecifier":{"localId":"474","type":"IntervalTypeSpecifier","pointType":{"localId":"475","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"signature":[],"operand":[{"localId":"470","locator":"72:63-72:86","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"InpatientHospitalization","type":"AliasRef"}]}}],"relationship":[],"where":{"localId":"478","locator":"73:5-83:99","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"And","signature":[],"operand":[{"localId":"479","locator":"73:11-82:54","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"And","signature":[],"operand":[{"localId":"480","locator":"73:11-81:74","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"And","signature":[],"operand":[{"localId":"481","locator":"73:11-80:7","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"And","signature":[],"operand":[{"localId":"482","locator":"73:11-76:5","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"Not","signature":[],"operand":{"localId":"483","locator":"73:15-76:5","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"Exists","signature":[],"operand":{"localId":"507","locator":"73:22-76:5","type":"Query","resultTypeSpecifier":{"localId":"510","type":"ListTypeSpecifier","elementType":{"localId":"511","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}},"source":[{"localId":"484","locator":"73:24-73:83","alias":"EncounterLocation","resultTypeSpecifier":{"localId":"489","type":"ListTypeSpecifier","elementType":{"localId":"490","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}},"expression":{"localId":"486","locator":"73:24-73:65","path":"facilityLocations","scope":"InpatientHospitalization","type":"Property","resultTypeSpecifier":{"localId":"487","type":"ListTypeSpecifier","elementType":{"localId":"488","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}}}}],"let":[],"relationship":[],"where":{"localId":"491","locator":"74:9-75:96","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"And","signature":[],"operand":[{"localId":"492","locator":"74:15-74:61","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"Equivalent","signature":[],"operand":[{"localId":"494","locator":"74:15-74:36","resultTypeName":"{urn:hl7-org:elm-types:r1}Code","path":"code","scope":"EncounterLocation","type":"Property"},{"localId":"495","locator":"74:40-74:61","resultTypeName":"{urn:hl7-org:elm-types:r1}Code","name":"Operating Room/Suite","type":"CodeRef"}]},{"localId":"506","locator":"75:15-75:96","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"In","signature":[],"operand":[{"localId":"505","locator":"75:51-75:56","type":"Start","signature":[],"operand":{"localId":"496","locator":"75:15-75:49","name":"NonEnteralOpioidAntagonistGivenTime","type":"QueryLetRef","resultTypeSpecifier":{"localId":"497","type":"IntervalTypeSpecifier","pointType":{"localId":"498","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}},{"localId":"500","locator":"75:65-75:96","path":"locationPeriod","scope":"EncounterLocation","type":"Property","resultTypeSpecifier":{"localId":"503","type":"IntervalTypeSpecifier","pointType":{"localId":"504","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]}]}}}},{"localId":"512","locator":"77:11-80:7","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"Not","signature":[],"operand":{"localId":"513","locator":"77:15-80:7","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"Exists","signature":[],"operand":{"localId":"537","locator":"77:22-80:7","type":"Query","resultTypeSpecifier":{"localId":"540","type":"ListTypeSpecifier","elementType":{"localId":"541","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}},"source":[{"localId":"514","locator":"77:24-77:83","alias":"EncounterLocation","resultTypeSpecifier":{"localId":"519","type":"ListTypeSpecifier","elementType":{"localId":"520","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}},"expression":{"localId":"516","locator":"77:24-77:65","path":"facilityLocations","scope":"InpatientHospitalization","type":"Property","resultTypeSpecifier":{"localId":"517","type":"ListTypeSpecifier","elementType":{"localId":"518","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}}}}],"let":[],"relationship":[],"where":{"localId":"521","locator":"78:11-79:78","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"And","signature":[],"operand":[{"localId":"522","locator":"78:17-78:63","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"Equivalent","signature":[],"operand":[{"localId":"524","locator":"78:17-78:38","resultTypeName":"{urn:hl7-org:elm-types:r1}Code","path":"code","scope":"EncounterLocation","type":"Property"},{"localId":"525","locator":"78:42-78:63","resultTypeName":"{urn:hl7-org:elm-types:r1}Code","name":"Operating Room/Suite","type":"CodeRef"}]},{"localId":"536","locator":"79:17-79:78","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"In","signature":[],"operand":[{"localId":"535","locator":"79:33-79:38","type":"Start","signature":[],"operand":{"localId":"526","locator":"79:17-79:31","name":"OpioidGivenTime","type":"QueryLetRef","resultTypeSpecifier":{"localId":"527","type":"IntervalTypeSpecifier","pointType":{"localId":"528","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}},{"localId":"530","locator":"79:47-79:78","path":"locationPeriod","scope":"EncounterLocation","type":"Property","resultTypeSpecifier":{"localId":"533","type":"IntervalTypeSpecifier","pointType":{"localId":"534","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]}]}}}}]},{"localId":"549","locator":"81:11-81:74","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"In","signature":[],"operand":[{"localId":"548","locator":"81:47-81:52","type":"Start","signature":[],"operand":{"localId":"542","locator":"81:11-81:45","name":"NonEnteralOpioidAntagonistGivenTime","type":"QueryLetRef","resultTypeSpecifier":{"localId":"543","type":"IntervalTypeSpecifier","pointType":{"localId":"544","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}},{"localId":"545","locator":"81:61-81:74","name":"HospitalPeriod","type":"QueryLetRef","resultTypeSpecifier":{"localId":"546","type":"IntervalTypeSpecifier","pointType":{"localId":"547","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]}]},{"localId":"557","locator":"82:11-82:54","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"In","signature":[],"operand":[{"localId":"556","locator":"82:27-82:32","type":"Start","signature":[],"operand":{"localId":"550","locator":"82:11-82:25","name":"OpioidGivenTime","type":"QueryLetRef","resultTypeSpecifier":{"localId":"551","type":"IntervalTypeSpecifier","pointType":{"localId":"552","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}},{"localId":"553","locator":"82:41-82:54","name":"HospitalPeriod","type":"QueryLetRef","resultTypeSpecifier":{"localId":"554","type":"IntervalTypeSpecifier","pointType":{"localId":"555","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]}]},{"localId":"574","locator":"83:11-83:99","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"And","signature":[],"operand":[{"localId":"571","locator":"83:32-83:47","type":"In","signature":[],"operand":[{"localId":"565","locator":"83:27-83:30","type":"End","signature":[],"operand":{"localId":"558","locator":"83:11-83:25","name":"OpioidGivenTime","type":"QueryLetRef","resultTypeSpecifier":{"localId":"559","type":"IntervalTypeSpecifier","pointType":{"localId":"560","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}},{"localId":"568","locator":"83:32-83:47","lowClosed":true,"highClosed":false,"type":"Interval","resultTypeSpecifier":{"localId":"569","type":"IntervalTypeSpecifier","pointType":{"localId":"570","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"low":{"localId":"567","locator":"83:56-83:99","type":"Subtract","signature":[],"operand":[{"localId":"561","locator":"83:56-83:99","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"562","locator":"83:65-83:99","name":"NonEnteralOpioidAntagonistGivenTime","type":"QueryLetRef","resultTypeSpecifier":{"localId":"563","type":"IntervalTypeSpecifier","pointType":{"localId":"564","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}},{"localId":"566","locator":"83:32-83:39","resultTypeName":"{urn:hl7-org:elm-types:r1}Quantity","value":12,"unit":"hours","type":"Quantity"}]},"high":{"localId":"561","locator":"83:56-83:99","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"562","locator":"83:65-83:99","name":"NonEnteralOpioidAntagonistGivenTime","type":"QueryLetRef","resultTypeSpecifier":{"localId":"563","type":"IntervalTypeSpecifier","pointType":{"localId":"564","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}}]},{"localId":"573","locator":"83:32-83:47","type":"Not","signature":[],"operand":{"localId":"572","locator":"83:32-83:47","type":"IsNull","signature":[],"operand":{"localId":"561","locator":"83:56-83:99","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"562","locator":"83:65-83:99","name":"NonEnteralOpioidAntagonistGivenTime","type":"QueryLetRef","resultTypeSpecifier":{"localId":"563","type":"IntervalTypeSpecifier","pointType":{"localId":"564","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}}}]}]},"return":{"localId":"575","locator":"84:5-84:35","resultTypeSpecifier":{"localId":"577","type":"ListTypeSpecifier","elementType":{"localId":"578","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"576","locator":"84:12-84:35","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"InpatientHospitalization","type":"AliasRef"}}}},{"localId":"413","locator":"35:1-36:73","name":"Numerator","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"413","s":[{"value":["","define ","\"Numerator\"",":\n  "]},{"r":"584","s":[{"value":["\"Encounter with NonOperating Room Opioid and Antagonist Administration\""]}]}]}}],"resultTypeSpecifier":{"localId":"587","type":"ListTypeSpecifier","elementType":{"localId":"588","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"584","locator":"36:3-36:73","name":"Encounter with NonOperating Room Opioid and Antagonist Administration","type":"ExpressionRef","resultTypeSpecifier":{"localId":"585","type":"ListTypeSpecifier","elementType":{"localId":"586","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}}},{"localId":"594","locator":"46:1-47:51","name":"SDE Ethnicity","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"594","s":[{"value":["","define ","\"SDE Ethnicity\"",":\n  "]},{"r":"597","s":[{"value":["[","\"Patient Characteristic Ethnicity\"",": "]},{"s":[{"value":["\"Ethnicity\""]}]},{"value":["]"]}]}]}}],"resultTypeSpecifier":{"localId":"601","type":"ListTypeSpecifier","elementType":{"localId":"602","name":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicEthnicity","type":"NamedTypeSpecifier"}},"expression":{"localId":"597","locator":"47:3-47:51","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicEthnicity","codeProperty":"code","codeComparator":"in","type":"Retrieve","resultTypeSpecifier":{"localId":"599","type":"ListTypeSpecifier","elementType":{"localId":"600","name":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicEthnicity","type":"NamedTypeSpecifier"}},"codes":{"localId":"596","locator":"47:40-47:50","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Ethnicity","preserve":true,"type":"ValueSetRef"},"include":[],"codeFilter":[],"dateFilter":[],"otherFilter":[]}},{"localId":"604","locator":"49:1-50:48","name":"SDE Payer","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"604","s":[{"value":["","define ","\"SDE Payer\"",":\n  "]},{"r":"607","s":[{"value":["[","\"Patient Characteristic Payer\"",": "]},{"s":[{"value":["\"Payer Type\""]}]},{"value":["]"]}]}]}}],"resultTypeSpecifier":{"localId":"611","type":"ListTypeSpecifier","elementType":{"localId":"612","name":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicPayer","type":"NamedTypeSpecifier"}},"expression":{"localId":"607","locator":"50:3-50:48","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicPayer","codeProperty":"code","codeComparator":"in","type":"Retrieve","resultTypeSpecifier":{"localId":"609","type":"ListTypeSpecifier","elementType":{"localId":"610","name":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicPayer","type":"NamedTypeSpecifier"}},"codes":{"localId":"606","locator":"50:36-50:47","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Payer Type","preserve":true,"type":"ValueSetRef"},"include":[],"codeFilter":[],"dateFilter":[],"otherFilter":[]}},{"localId":"614","locator":"52:1-53:41","name":"SDE Race","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"614","s":[{"value":["","define ","\"SDE Race\"",":\n  "]},{"r":"617","s":[{"value":["[","\"Patient Characteristic Race\"",": "]},{"s":[{"value":["\"Race\""]}]},{"value":["]"]}]}]}}],"resultTypeSpecifier":{"localId":"621","type":"ListTypeSpecifier","elementType":{"localId":"622","name":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicRace","type":"NamedTypeSpecifier"}},"expression":{"localId":"617","locator":"53:3-53:41","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicRace","codeProperty":"code","codeComparator":"in","type":"Retrieve","resultTypeSpecifier":{"localId":"619","type":"ListTypeSpecifier","elementType":{"localId":"620","name":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicRace","type":"NamedTypeSpecifier"}},"codes":{"localId":"616","locator":"53:35-53:40","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Race","preserve":true,"type":"ValueSetRef"},"include":[],"codeFilter":[],"dateFilter":[],"otherFilter":[]}},{"localId":"624","locator":"55:1-56:62","name":"SDE Sex","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"624","s":[{"value":["","define ","\"SDE Sex\"",":\n  "]},{"r":"627","s":[{"value":["[","\"Patient Characteristic Sex\"",": "]},{"s":[{"value":["\"Federal Administrative Sex\""]}]},{"value":["]"]}]}]}}],"resultTypeSpecifier":{"localId":"631","type":"ListTypeSpecifier","elementType":{"localId":"632","name":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicSex","type":"NamedTypeSpecifier"}},"expression":{"localId":"627","locator":"56:3-56:62","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicSex","codeProperty":"code","codeComparator":"in","type":"Retrieve","resultTypeSpecifier":{"localId":"629","type":"ListTypeSpecifier","elementType":{"localId":"630","name":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicSex","type":"NamedTypeSpecifier"}},"codes":{"localId":"626","locator":"56:34-56:61","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Federal Administrative Sex","preserve":true,"type":"ValueSetRef"},"include":[],"codeFilter":[],"dateFilter":[],"otherFilter":[]}}]}}},"elm_annotations":{"statements":[{"children":[{"children":[{"children":[{"text":"define \"Qualifying Encounter\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Encounter Inpatient\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"242"}],"node_type":"Retrieve","ref_id":"242"},{"children":[{"text":" InpatientHospitalization"}]}],"ref_id":"239"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"InpatientHospitalization"}]}],"ref_id":"251"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"252"}],"node_type":"Property","ref_id":"252"},{"children":[{"text":" ends during day of "}],"node_type":"In","ref_id":"261"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"257"}],"node_type":"In","ref_id":"261"},{"children":[{"text":"\n      and "}]},{"children":[{"children":[{"children":[{"text":"AgeInYearsAt("}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"InpatientHospitalization"}]}],"ref_id":"265"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"266"}],"node_type":"Property","ref_id":"266"}],"node_type":"Start","ref_id":"264"}],"node_type":"DateFrom","ref_id":"263"},{"children":[{"text":")"}]}],"node_type":"CalculateAgeAt","ref_id":"277"},{"children":[{"text":" \u003e= 18"}],"node_type":"Literal","ref_id":"278"}],"node_type":"GreaterOrEqual","ref_id":"262"}],"ref_id":"250"}],"ref_id":"250"}],"node_type":"Query","ref_id":"279"}],"ref_id":"238"}],"define_name":"Qualifying Encounter"},{"children":[{"children":[{"children":[{"text":"define \"Opioid Administration\":\n  "}]},{"children":[{"children":[{"text":"[\"Medication, Administered\": "}]},{"children":[{"children":[{"text":"\"Opioids, All\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"294"}],"ref_id":"291"}],"define_name":"Opioid Administration"},{"children":[{"children":[{"children":[{"text":"define \"Encounter with Opioid Administration Outside of Operating Room\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Qualifying Encounter\""}]}]}],"node_type":"ExpressionRef","ref_id":"284"},{"children":[{"text":" InpatientEncounter"}]}],"ref_id":"236"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"Opioid Administration\""}]}]}],"node_type":"ExpressionRef","ref_id":"300"},{"children":[{"text":" OpioidGiven"}]}],"ref_id":"289"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"306"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\" ( "}]},{"children":[{"children":[{"children":[{"text":"OpioidGiven"}]}],"ref_id":"307"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"308"}],"node_type":"Property","ref_id":"308"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"OpioidGiven"}]}],"ref_id":"309"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"310"}],"node_type":"Property","ref_id":"310"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"315"}],"node_type":"FunctionRef","ref_id":"315"},{"children":[{"text":" starts during "}],"node_type":"In","ref_id":"328"},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"320"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"HospitalizationWithObservation\" ( "}]},{"children":[{"children":[{"text":"InpatientEncounter"}]}],"node_type":"AliasRef","ref_id":"321"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"322"}],"node_type":"FunctionRef","ref_id":"322"}],"node_type":"In","ref_id":"328"},{"children":[{"text":"\n        and "}]},{"children":[{"children":[{"text":"not "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"InpatientEncounter.facilityLocations"}]}]}],"node_type":"Property","ref_id":"333"},{"children":[{"text":" EncounterLocation"}]}],"ref_id":"331"}]},{"children":[{"text":"\n            "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"EncounterLocation"}]}],"ref_id":"340"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"node_type":"Property","ref_id":"341"}],"node_type":"Property","ref_id":"341"},{"children":[{"text":" ~ "}]},{"children":[{"children":[{"text":"\"Operating Room/Suite\""}]}],"node_type":"CodeRef","ref_id":"342"}],"node_type":"Equivalent","ref_id":"339"},{"children":[{"text":"\n              and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"343"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\" ( "}]},{"children":[{"children":[{"children":[{"text":"OpioidGiven"}]}],"ref_id":"344"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"345"}],"node_type":"Property","ref_id":"345"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"OpioidGiven"}]}],"ref_id":"346"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"347"}],"node_type":"Property","ref_id":"347"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"352"}],"node_type":"FunctionRef","ref_id":"352"},{"children":[{"text":" starts during "}],"node_type":"In","ref_id":"364"},{"children":[{"children":[{"children":[{"text":"EncounterLocation"}]}],"ref_id":"357"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"358"}],"node_type":"Property","ref_id":"358"}],"node_type":"In","ref_id":"364"}],"ref_id":"338"}],"ref_id":"338"}],"node_type":"Query","ref_id":"365"},{"children":[{"text":"\n        )"}]}],"node_type":"Query","ref_id":"365"}],"node_type":"Exists","ref_id":"330"}],"node_type":"Not","ref_id":"329"}],"node_type":"And","ref_id":"305"}],"ref_id":"370"}],"node_type":"Query","ref_id":"373"}],"ref_id":"235"}],"define_name":"Encounter with Opioid Administration Outside of Operating Room"},{"children":[{"children":[{"children":[{"text":"define \"Initial Population\":\n  "}]},{"children":[{"children":[{"text":"\"Encounter with Opioid Administration Outside of Operating Room\""}]}],"node_type":"ExpressionRef","ref_id":"378"}],"ref_id":"233"}],"define_name":"Initial Population"},{"children":[{"children":[{"children":[{"text":"define \"Denominator\":\n  "}]},{"children":[{"children":[{"text":"\"Initial Population\""}]}],"node_type":"ExpressionRef","ref_id":"383"}],"ref_id":"231"}],"define_name":"Denominator"},{"children":[{"children":[{"children":[{"text":"define \"Non Enteral Opioid Antagonist Administration\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Medication, Administered\": "}]},{"children":[{"children":[{"text":"\"Opioid Antagonist\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"395"}],"node_type":"Retrieve","ref_id":"395"},{"children":[{"text":" Antagonist"}]}],"ref_id":"392"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Antagonist"}]}],"ref_id":"403"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"route"}]}],"ref_id":"404"}],"ref_id":"404"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Routes of Administration for Opioid Antagonists\""}]}],"ref_id":"405"}],"ref_id":"406"}],"ref_id":"406"}],"node_type":"Query","ref_id":"407"}],"ref_id":"391"}],"define_name":"Non Enteral Opioid Antagonist Administration"},{"children":[{"children":[{"children":[{"text":"define \"Encounter with NonOperating Room Opioid and Antagonist Administration\":\n  /* \n  Excludes opioid antagonist administered in operating room \n  AND excludes opioids administered in operating room \n  AND opioid is administered before opioid antagonist \n  AND limits opioid antagonist to non-enteral routes\n  */\n  \n  "}]},{"children":[{"children":[{"children":[{"text":"from\n    "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"Non Enteral Opioid Antagonist Administration\""}]}]}],"node_type":"ExpressionRef","ref_id":"417"},{"children":[{"text":" NonEnteralOpioidAntagonistGiven"}]}],"ref_id":"416"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"Opioid Administration\""}]}]}],"node_type":"ExpressionRef","ref_id":"423"},{"children":[{"text":" OpioidGiven"}]}],"ref_id":"422"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"Denominator\""}]}]}],"node_type":"ExpressionRef","ref_id":"429"},{"children":[{"text":" InpatientHospitalization"}]}],"ref_id":"428"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"NonEnteralOpioidAntagonistGivenTime: "}]},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"435"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\" ( "}]},{"children":[{"children":[{"children":[{"text":"NonEnteralOpioidAntagonistGiven"}]}],"ref_id":"436"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"437"}],"node_type":"Property","ref_id":"437"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"NonEnteralOpioidAntagonistGiven"}]}],"ref_id":"438"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"439"}],"node_type":"Property","ref_id":"439"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"444"}],"node_type":"FunctionRef","ref_id":"444"}],"ref_id":"434"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"OpioidGivenTime: "}]},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"452"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\" ( "}]},{"children":[{"children":[{"children":[{"text":"OpioidGiven"}]}],"ref_id":"453"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"454"}],"node_type":"Property","ref_id":"454"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"OpioidGiven"}]}],"ref_id":"455"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"456"}],"node_type":"Property","ref_id":"456"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"461"}],"node_type":"FunctionRef","ref_id":"461"}],"ref_id":"451"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"HospitalPeriod: "}]},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"469"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"HospitalizationWithObservation\" ( "}]},{"children":[{"children":[{"text":"InpatientHospitalization"}]}],"node_type":"AliasRef","ref_id":"470"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"471"}],"node_type":"FunctionRef","ref_id":"471"}],"ref_id":"468"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"not "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"InpatientHospitalization.facilityLocations"}]}]}],"node_type":"Property","ref_id":"486"},{"children":[{"text":" EncounterLocation"}]}],"ref_id":"484"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"EncounterLocation"}]}],"ref_id":"493"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"node_type":"Property","ref_id":"494"}],"node_type":"Property","ref_id":"494"},{"children":[{"text":" ~ "}]},{"children":[{"children":[{"text":"\"Operating Room/Suite\""}]}],"node_type":"CodeRef","ref_id":"495"}],"node_type":"Equivalent","ref_id":"492"},{"children":[{"text":"\n          and "}]},{"children":[{"children":[{"children":[{"text":"NonEnteralOpioidAntagonistGivenTime"}]}],"node_type":"QueryLetRef","ref_id":"496"},{"children":[{"text":" starts during "}],"node_type":"In","ref_id":"506"},{"children":[{"children":[{"children":[{"text":"EncounterLocation"}]}],"ref_id":"499"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"500"}],"node_type":"Property","ref_id":"500"}],"node_type":"In","ref_id":"506"}],"ref_id":"491"}],"ref_id":"491"}],"node_type":"Query","ref_id":"507"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"507"}],"node_type":"Exists","ref_id":"483"}],"node_type":"Not","ref_id":"482"},{"children":[{"text":"\n      and "}]},{"children":[{"children":[{"text":"not "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"InpatientHospitalization.facilityLocations"}]}]}],"node_type":"Property","ref_id":"516"},{"children":[{"text":" EncounterLocation"}]}],"ref_id":"514"}]},{"children":[{"text":"\n          "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"EncounterLocation"}]}],"ref_id":"523"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"node_type":"Property","ref_id":"524"}],"node_type":"Property","ref_id":"524"},{"children":[{"text":" ~ "}]},{"children":[{"children":[{"text":"\"Operating Room/Suite\""}]}],"node_type":"CodeRef","ref_id":"525"}],"node_type":"Equivalent","ref_id":"522"},{"children":[{"text":"\n            and "}]},{"children":[{"children":[{"children":[{"text":"OpioidGivenTime"}]}],"node_type":"QueryLetRef","ref_id":"526"},{"children":[{"text":" starts during "}],"node_type":"In","ref_id":"536"},{"children":[{"children":[{"children":[{"text":"EncounterLocation"}]}],"ref_id":"529"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"530"}],"node_type":"Property","ref_id":"530"}],"node_type":"In","ref_id":"536"}],"ref_id":"521"}],"ref_id":"521"}],"node_type":"Query","ref_id":"537"},{"children":[{"text":"\n      )"}]}],"node_type":"Query","ref_id":"537"}],"node_type":"Exists","ref_id":"513"}],"node_type":"Not","ref_id":"512"}],"node_type":"And","ref_id":"481"},{"children":[{"text":"\n      and "}]},{"children":[{"children":[{"children":[{"text":"NonEnteralOpioidAntagonistGivenTime"}]}],"node_type":"QueryLetRef","ref_id":"542"},{"children":[{"text":" starts during "}],"node_type":"In","ref_id":"549"},{"children":[{"children":[{"text":"HospitalPeriod"}]}],"node_type":"QueryLetRef","ref_id":"545"}],"node_type":"In","ref_id":"549"}],"node_type":"And","ref_id":"480"},{"children":[{"text":"\n      and "}]},{"children":[{"children":[{"children":[{"text":"OpioidGivenTime"}]}],"node_type":"QueryLetRef","ref_id":"550"},{"children":[{"text":" starts during "}],"node_type":"In","ref_id":"557"},{"children":[{"children":[{"text":"HospitalPeriod"}]}],"node_type":"QueryLetRef","ref_id":"553"}],"node_type":"In","ref_id":"557"}],"node_type":"And","ref_id":"479"},{"children":[{"text":"\n      and "}]},{"children":[{"children":[{"children":[{"text":"OpioidGivenTime"}]}],"node_type":"QueryLetRef","ref_id":"558"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"12 hours"}]}],"node_type":"Quantity","ref_id":"566"},{"children":[{"text":" or less before"}]}],"node_type":"And","ref_id":"574"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"NonEnteralOpioidAntagonistGivenTime"}]}],"node_type":"QueryLetRef","ref_id":"562"}],"node_type":"Start","ref_id":"561"}],"node_type":"And","ref_id":"574"}],"ref_id":"478"}],"ref_id":"478"},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"InpatientHospitalization"}]}],"node_type":"AliasRef","ref_id":"576"}],"ref_id":"575"}],"node_type":"Query","ref_id":"579"}],"ref_id":"415"}],"define_name":"Encounter with NonOperating Room Opioid and Antagonist Administration"},{"children":[{"children":[{"children":[{"text":"define \"Numerator\":\n  "}]},{"children":[{"children":[{"text":"\"Encounter with NonOperating Room Opioid and Antagonist Administration\""}]}],"node_type":"ExpressionRef","ref_id":"584"}],"ref_id":"413"}],"define_name":"Numerator"},{"children":[{"children":[{"children":[{"text":"define \"SDE Ethnicity\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Ethnicity\": "}]},{"children":[{"children":[{"text":"\"Ethnicity\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"597"}],"ref_id":"594"}],"define_name":"SDE Ethnicity"},{"children":[{"children":[{"children":[{"text":"define \"SDE Payer\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Payer\": "}]},{"children":[{"children":[{"text":"\"Payer Type\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"607"}],"ref_id":"604"}],"define_name":"SDE Payer"},{"children":[{"children":[{"children":[{"text":"define \"SDE Race\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Race\": "}]},{"children":[{"children":[{"text":"\"Race\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"617"}],"ref_id":"614"}],"define_name":"SDE Race"},{"children":[{"children":[{"children":[{"text":"define \"SDE Sex\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Sex\": "}]},{"children":[{"children":[{"text":"\"Federal Administrative Sex\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"627"}],"ref_id":"624"}],"define_name":"SDE Sex"}],"identifier":{"id":"CMS819HHORAE","version":"4.2.000"}},"is_main_library":true,"is_top_level":true,"library_name":"CMS819HHORAE","library_version":"4.2.000","statement_dependencies":[{"_id":"689203d810d20757c0cf5955","statement_name":"Patient"},{"_id":"689203d810d20757c0cf5956","statement_name":"Qualifying Encounter","statement_references":[{"_id":"689203dd10d20757c0cf5bdb","hqmf_id":null,"library_name":"CMS819HHORAE","statement_name":"Patient"}]},{"_id":"689203d810d20757c0cf5957","statement_name":"Opioid Administration"},{"_id":"689203d810d20757c0cf5958","statement_name":"Encounter with Opioid Administration Outside of Operating Room","statement_references":[{"_id":"689203d810d20757c0cf594c","hqmf_id":null,"library_name":"CMS819HHORAE","statement_name":"Qualifying Encounter"},{"_id":"689203d810d20757c0cf594d","hqmf_id":null,"library_name":"CMS819HHORAE","statement_name":"Opioid Administration"},{"_id":"689203d810d20757c0cf594e","hqmf_id":null,"library_name":"CQMCommonQDM","statement_name":"NormalizeInterval"},{"_id":"689203d810d20757c0cf594f","hqmf_id":null,"library_name":"CQMCommonQDM","statement_name":"HospitalizationWithObservation"}]},{"_id":"689203d810d20757c0cf5959","statement_name":"Initial Population","statement_references":[{"_id":"689203dd10d20757c0cf5bdc","hqmf_id":null,"library_name":"CMS819HHORAE","statement_name":"Encounter with Opioid Administration Outside of Operating Room"}]},{"_id":"689203d810d20757c0cf595a","statement_name":"Denominator","statement_references":[{"_id":"689203dd10d20757c0cf5bdd","hqmf_id":null,"library_name":"CMS819HHORAE","statement_name":"Initial Population"}]},{"_id":"689203d810d20757c0cf595b","statement_name":"Non Enteral Opioid Antagonist Administration"},{"_id":"689203d810d20757c0cf595c","statement_name":"Encounter with NonOperating Room Opioid and Antagonist Administration","statement_references":[{"_id":"689203d810d20757c0cf5950","hqmf_id":null,"library_name":"CMS819HHORAE","statement_name":"Non Enteral Opioid Antagonist Administration"},{"_id":"689203d810d20757c0cf5951","hqmf_id":null,"library_name":"CMS819HHORAE","statement_name":"Opioid Administration"},{"_id":"689203d810d20757c0cf5952","hqmf_id":null,"library_name":"CMS819HHORAE","statement_name":"Denominator"},{"_id":"689203d810d20757c0cf5953","hqmf_id":null,"library_name":"CQMCommonQDM","statement_name":"NormalizeInterval"},{"_id":"689203d810d20757c0cf5954","hqmf_id":null,"library_name":"CQMCommonQDM","statement_name":"HospitalizationWithObservation"}]},{"_id":"689203d810d20757c0cf595d","statement_name":"Numerator","statement_references":[{"_id":"689203dd10d20757c0cf5bde","hqmf_id":null,"library_name":"CMS819HHORAE","statement_name":"Encounter with NonOperating Room Opioid and Antagonist Administration"}]},{"_id":"689203d810d20757c0cf595e","statement_name":"SDE Ethnicity"},{"_id":"689203d810d20757c0cf595f","statement_name":"SDE Payer"},{"_id":"689203d810d20757c0cf5960","statement_name":"SDE Race"},{"_id":"689203d810d20757c0cf5961","statement_name":"SDE Sex"}]},{"_id":"689203d910d20757c0cf5965","cql":"library CQMCommonQDM version '9.0.000'\n\n/*Upversion to 9.0.000 renaming the library to CQMCommonQDM to align with the FHIR naming convention and to remove the old MAT designation*/\n\nusing QDM version '5.6'\n\nvalueset \"Emergency Department Visit\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.292' \nvalueset \"Encounter Inpatient\": 'urn:oid:2.16.840.1.113883.3.666.5.307' \nvalueset \"Intensive Care Unit\": 'urn:oid:2.16.840.1.113762.1.4.1029.206' \nvalueset \"Observation Services\": 'urn:oid:2.16.840.1.113762.1.4.1111.143' \nvalueset \"Outpatient Surgery Service\": 'urn:oid:2.16.840.1.113762.1.4.1110.38' \n\nparameter \"Measurement Period\" Interval\u003cDateTime\u003e\n\ncontext Patient\n\ndefine \"ED Encounter\":\n  [\"Encounter, Performed\": \"Emergency Department Visit\"]\n\ndefine \"Inpatient Encounter\":\n  [\"Encounter, Performed\": \"Encounter Inpatient\"] EncounterInpatient\n    where EncounterInpatient.relevantPeriod ends during day of \"Measurement Period\"\n\n/*@description: Returns an interval of date values extracted from the input interval of date-time values\n@comment: This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability.*/\ndefine function \"ToDateInterval\"(period Interval\u003cDateTime\u003e ):\n  Interval[date from start of period, date from end of period]\n\n/*calculates the difference in calendar days between the start and end of the given interval.*/\ndefine function \"LengthInDays\"(Value Interval\u003cDateTime\u003e ):\n  difference in days between start of Value and end of Value\n\n/*returns list of all locations within an encounter, including locations for immediately prior ED visit.*/\ndefine function \"HospitalizationLocations\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet EDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn if EDVisit is null then Visit.facilityLocations \n  \t\telse flatten { EDVisit.facilityLocations, Visit.facilityLocations }\n\n/*Returns the arrival time in the ED for the encounter.*/\ndefine function \"EmergencyDepartmentArrivalTime\"(Encounter \"Encounter, Performed\" ):\n  start of First((\"HospitalizationLocations\"(Encounter))HospitalLocation\n  \t\twhere HospitalLocation.code in \"Emergency Department Visit\"\n  \t\tsort by start of locationPeriod\n  ).locationPeriod\n\n/*Returns admission time for an encounter or for immediately prior emergency department visit.*/\ndefine function \"HospitalAdmissionTime\"(Encounter \"Encounter, Performed\" ):\n  start of \"Hospitalization\"(Encounter)\n\n/*Returns earliest arrival time for an encounter including any prior ED visit.*/\ndefine function \"HospitalArrivalTime\"(Encounter \"Encounter, Performed\" ):\n  start of First((\"HospitalizationLocations\"(Encounter))HospitalLocation\n  \t\tsort by start of locationPeriod\n  ).locationPeriod\n\n/*Hospitalization returns the total interval for admission to discharge for the given encounter, or for the admission of any immediately prior emergency department visit to the discharge of the given encounter.*/\ndefine function \"Hospitalization\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet EDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn Interval[Coalesce(start of EDVisit.relevantPeriod, start of Visit.relevantPeriod), \n  \tend of Visit.relevantPeriod]\n\n/*Returns the length of stay in days (i.e. the number of days between admission and discharge) for the given encounter, or from the admission of any immediately prior emergency department visit to the discharge of the encounter*/\ndefine function \"HospitalizationLengthofStay\"(Encounter \"Encounter, Performed\" ):\n  LengthInDays(\"Hospitalization\"(Encounter))\n\n/*Returns the latest departure time for encounter including any prior ED visit.*/\ndefine function \"HospitalDepartureTime\"(Encounter \"Encounter, Performed\" ):\n  end of Last((\"HospitalizationLocations\"(Encounter))HospitalLocation\n  \t\tsort by start of locationPeriod\n  ).locationPeriod\n\n/*Hospital Discharge Time returns the discharge time for an encounter*/\ndefine function \"HospitalDischargeTime\"(Encounter \"Encounter, Performed\" ):\n  end of Encounter.relevantPeriod\n\n/*Hospitalization with Observation and Outpatient Surgery Service returns the total interval from the start of any immediately prior emergency department visit, outpatient surgery visit or observation visit to the discharge of the given encounter.*/\ndefine function \"HospitalizationWithObservationAndOutpatientSurgeryService\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet ObsVisit: Last([\"Encounter, Performed\": \"Observation Services\"] LastObs\n  \t\t\twhere LastObs.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t),\n  \tVisitStart: Coalesce(start of ObsVisit.relevantPeriod, start of Visit.relevantPeriod),\n  \tEDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before VisitStart\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t),\n  \tVisitStartWithED: Coalesce(start of EDVisit.relevantPeriod, VisitStart),\n  \tOutpatientSurgeryVisit: Last([\"Encounter, Performed\": \"Outpatient Surgery Service\"] LastSurgeryOP\n  \t\t\twhere LastSurgeryOP.relevantPeriod ends 1 hour or less on or before VisitStartWithED\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn Interval[Coalesce(start of OutpatientSurgeryVisit.relevantPeriod, VisitStartWithED), \n  \tend of Visit.relevantPeriod]\n\n/*Hospitalization with Observation returns the total interval from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\ndefine function \"HospitalizationWithObservation\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet ObsVisit: Last([\"Encounter, Performed\": \"Observation Services\"] LastObs\n  \t\t\twhere LastObs.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t),\n  \tVisitStart: Coalesce(start of ObsVisit.relevantPeriod, start of Visit.relevantPeriod),\n  \tEDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before VisitStart\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn Interval[Coalesce(start of EDVisit.relevantPeriod, VisitStart), \n  \tend of Visit.relevantPeriod]\n\n/*Hospitalization with Observation Length of Stay returns the length in days from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\ndefine function \"HospitalizationWithObservationLengthofStay\"(Encounter \"Encounter, Performed\" ):\n  \"LengthInDays\"(\"HospitalizationWithObservation\"(Encounter))\n\n/*First Inpatient Intensive Care Unit returns the first intensive care unit for the given encounter, without considering any immediately prior emergency department visit.*/\ndefine function \"FirstInpatientIntensiveCareUnit\"(Encounter \"Encounter, Performed\" ):\n  First((Encounter.facilityLocations)HospitalLocation\n      where HospitalLocation.code in \"Intensive Care Unit\"\n        and HospitalLocation.locationPeriod during Encounter.relevantPeriod\n      sort by start of locationPeriod\n  )\n\n/*Given a datetime and a period, returns the period (if a period is provided) or the interval beginning and ending on the datetime (if a datetime is provided)*/\ndefine function \"NormalizeInterval\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  if pointInTime is not null then Interval[pointInTime, pointInTime]\n    else if period is not null then period \n    else null as Interval\u003cDateTime\u003e\n\n/*Given an interval, return true if the interval has a starting boundary specified (i.e. the start of the interval is not null and not the minimum DateTime value)*/\ndefine function \"HasStart\"(period Interval\u003cDateTime\u003e ):\n  not ( start of period is null\n      or start of period = minimum DateTime\n  )\n\n/*Given an interval, return true if the interval has an ending boundary specified (i.e. the end of the interval is not null and not the maximum DateTime value)*/\ndefine function \"HasEnd\"(period Interval\u003cDateTime\u003e ):\n  not ( \n    end of period is null\n      or \n      end of period = maximum DateTime\n  )\n\n/*Given an interval, return the ending point if the interval has an ending boundary specified, otherwise, return the starting point*/\ndefine function \"Latest\"(period Interval\u003cDateTime\u003e ):\n  if ( HasEnd(period)) then \n  end of period \n    else start of period\n\n/*Given an interval, return the starting point if the interval has a starting boundary specified, otherwise, return the ending point*/\ndefine function \"Earliest\"(period Interval\u003cDateTime\u003e ):\n  if ( HasStart(period)) then start of period \n    else \n  end of period\n\n/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the ending point of the period if the period has an ending boundary specified, otherwise returns the starting point of the interval*/\ndefine function \"LatestOf\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  Latest(NormalizeInterval(pointInTime, period))\n\n/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the starting point of the period if the period has a starting boundary specified, otherwise returns the ending point of the period*/\ndefine function \"EarliestOf\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  Earliest(NormalizeInterval(pointInTime, period))","elm":{"library":{"localId":"0","annotation":[{"translatorVersion":"3.14.0","translatorOptions":"EnableAnnotations,EnableLocators,EnableResultTypes,EnableDetailedErrors,DisableListDemotion,DisableListPromotion","signatureLevel":"None","type":"CqlToElmInfo"},{"message":"An operand identifier [Encounter] is hiding another identifier of the same name.","errorType":"semantic","errorSeverity":"warning","type":"CqlToElmError"},{"type":"Annotation","s":{"r":"1247","s":[{"value":["","library CQMCommonQDM version '9.0.000'"]}]}}],"identifier":{"id":"CQMCommonQDM","version":"9.0.000"},"schemaIdentifier":{"id":"urn:hl7-org:elm","version":"r1"},"usings":{"def":[{"localId":"1","localIdentifier":"System","uri":"urn:hl7-org:elm-types:r1"},{"localId":"206","locator":"5:1-5:23","localIdentifier":"QDM","uri":"urn:healthit-gov:qdm:v5_6","version":"5.6","annotation":[{"type":"Annotation","s":{"r":"206","s":[{"value":["/*Upversion to 9.0.000 renaming the library to CQMCommonQDM to align with the FHIR naming convention and to remove the old MAT designation*/\n\n","using "]},{"s":[{"value":["QDM"]}]},{"value":[" version '5.6'"]}]}}]}]},"parameters":{"def":[{"localId":"212","locator":"13:1-13:49","name":"Measurement Period","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"212","s":[{"value":["","parameter ","\"Measurement Period\""," "]},{"r":"213","s":[{"value":["Interval\u003c"]},{"r":"214","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}}],"resultTypeSpecifier":{"localId":"217","type":"IntervalTypeSpecifier","pointType":{"localId":"218","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"parameterTypeSpecifier":{"localId":"213","locator":"13:32-13:49","type":"IntervalTypeSpecifier","resultTypeSpecifier":{"localId":"215","type":"IntervalTypeSpecifier","pointType":{"localId":"216","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"pointType":{"localId":"214","locator":"13:41-13:48","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},"valueSets":{"def":[{"localId":"207","locator":"7:1-7:82","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Emergency Department Visit","id":"2.16.840.1.113883.3.117.1.7.1.292","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"207","s":[{"value":["","valueset ","\"Emergency Department Visit\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.292'"]}]}}],"codeSystem":[]},{"localId":"208","locator":"8:1-8:71","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Encounter Inpatient","id":"2.16.840.1.113883.3.666.5.307","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"208","s":[{"value":["","valueset ","\"Encounter Inpatient\"",": ","'urn:oid:2.16.840.1.113883.3.666.5.307'"]}]}}],"codeSystem":[]},{"localId":"209","locator":"9:1-9:72","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Intensive Care Unit","id":"2.16.840.1.113762.1.4.1029.206","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"209","s":[{"value":["","valueset ","\"Intensive Care Unit\"",": ","'urn:oid:2.16.840.1.113762.1.4.1029.206'"]}]}}],"codeSystem":[]},{"localId":"210","locator":"10:1-10:73","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Observation Services","id":"2.16.840.1.113762.1.4.1111.143","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"210","s":[{"value":["","valueset ","\"Observation Services\"",": ","'urn:oid:2.16.840.1.113762.1.4.1111.143'"]}]}}],"codeSystem":[]},{"localId":"211","locator":"11:1-11:78","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Outpatient Surgery Service","id":"2.16.840.1.113762.1.4.1110.38","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"211","s":[{"value":["","valueset ","\"Outpatient Surgery Service\"",": ","'urn:oid:2.16.840.1.113762.1.4.1110.38'"]}]}}],"codeSystem":[]}]},"contexts":{"def":[{"localId":"222","locator":"15:1-15:15","name":"Patient"}]},"statements":{"def":[{"localId":"224","locator":"17:1-18:56","name":"ED Encounter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"224","s":[{"value":["","define ","\"ED Encounter\"",":\n  "]},{"r":"227","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]}}],"resultTypeSpecifier":{"localId":"231","type":"ListTypeSpecifier","elementType":{"localId":"232","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"227","locator":"18:3-18:56","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","resultTypeSpecifier":{"localId":"229","type":"ListTypeSpecifier","elementType":{"localId":"230","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"codes":{"localId":"226","locator":"18:28-18:55","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Emergency Department Visit","preserve":true,"type":"ValueSetRef"},"include":[],"codeFilter":[],"dateFilter":[],"otherFilter":[]}},{"localId":"1212","locator":"168:1-171:15","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"Earliest","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"1212","s":[{"value":["/*Given an interval, return the starting point if the interval has a starting boundary specified, otherwise, return the ending point*/\n","define function \"Earliest\"(period Interval\u003cDateTime\u003e ):\n  "]},{"r":"1218","s":[{"r":"1218","s":[{"value":["if "]},{"r":"1222","s":[{"value":["( "]},{"r":"1222","s":[{"value":["HasStart","("]},{"r":"1219","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":[" then "]},{"r":"1223","s":[{"value":["start of "]},{"r":"1224","s":[{"value":["period"]}]}]},{"value":[" \n    else \n  "]},{"r":"1227","s":[{"value":["end of "]},{"r":"1228","s":[{"value":["period"]}]}]}]}]}]}}],"expression":{"localId":"1218","locator":"169:3-171:15","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"If","condition":{"localId":"1222","locator":"169:6-169:24","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","name":"HasStart","type":"FunctionRef","signature":[],"operand":[{"localId":"1219","locator":"169:17-169:22","name":"period","type":"OperandRef","resultTypeSpecifier":{"localId":"1220","type":"IntervalTypeSpecifier","pointType":{"localId":"1221","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},"then":{"localId":"1223","locator":"169:31-169:45","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"1224","locator":"169:40-169:45","name":"period","type":"OperandRef","resultTypeSpecifier":{"localId":"1225","type":"IntervalTypeSpecifier","pointType":{"localId":"1226","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}},"else":{"localId":"1227","locator":"171:3-171:15","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"End","signature":[],"operand":{"localId":"1228","locator":"171:10-171:15","name":"period","type":"OperandRef","resultTypeSpecifier":{"localId":"1229","type":"IntervalTypeSpecifier","pointType":{"localId":"1230","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}},"operand":[{"localId":"1217","name":"period","operandTypeSpecifier":{"localId":"1213","locator":"168:35-168:52","type":"IntervalTypeSpecifier","resultTypeSpecifier":{"localId":"1215","type":"IntervalTypeSpecifier","pointType":{"localId":"1216","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"pointType":{"localId":"1214","locator":"168:44-168:51","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"1247","locator":"178:1-179:50","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"EarliestOf","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"1247","s":[{"value":["/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the starting point of the period if the period has a starting boundary specified, otherwise returns the ending point of the period*/\n","define function \"EarliestOf\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  "]},{"r":"1262","s":[{"r":"1262","s":[{"value":["Earliest","("]},{"r":"1259","s":[{"value":["NormalizeInterval","("]},{"r":"1255","s":[{"value":["pointInTime"]}]},{"value":[", "]},{"r":"1256","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"1262","locator":"179:3-179:50","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"Earliest","type":"FunctionRef","signature":[],"operand":[{"localId":"1259","locator":"179:12-179:49","name":"NormalizeInterval","type":"FunctionRef","resultTypeSpecifier":{"localId":"1260","type":"IntervalTypeSpecifier","pointType":{"localId":"1261","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"signature":[],"operand":[{"localId":"1255","locator":"179:30-179:40","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"pointInTime","type":"OperandRef"},{"localId":"1256","locator":"179:43-179:48","name":"period","type":"OperandRef","resultTypeSpecifier":{"localId":"1257","type":"IntervalTypeSpecifier","pointType":{"localId":"1258","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]}]},"operand":[{"localId":"1249","name":"pointInTime","operandTypeSpecifier":{"localId":"1248","locator":"178:42-178:49","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"localId":"1254","name":"period","operandTypeSpecifier":{"localId":"1250","locator":"178:59-178:76","type":"IntervalTypeSpecifier","resultTypeSpecifier":{"localId":"1252","type":"IntervalTypeSpecifier","pointType":{"localId":"1253","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"pointType":{"localId":"1251","locator":"178:68-178:75","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"395","locator":"48:1-52:18","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"EmergencyDepartmentArrivalTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"395","s":[{"value":["/*Returns the arrival time in the ED for the encounter.*/\n","define function \"EmergencyDepartmentArrivalTime\"(Encounter \"Encounter, Performed\" ):\n  "]},{"r":"398","s":[{"r":"398","s":[{"value":["start of "]},{"r":"427","s":[{"r":"426","s":[{"value":["First","("]},{"r":"421","s":[{"s":[{"r":"399","s":[{"r":"401","s":[{"value":["("]},{"r":"401","s":[{"value":["\"HospitalizationLocations\"","("]},{"r":"400","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n  \t\t"]},{"r":"411","s":[{"value":["where "]},{"r":"411","s":[{"r":"409","s":[{"r":"408","s":[{"value":["HospitalLocation"]}]},{"value":["."]},{"r":"409","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"410","s":[{"value":["\"Emergency Department Visit\""]}]}]}]},{"value":["\n  \t\t"]},{"r":"417","s":[{"value":["sort by "]},{"r":"416","s":[{"r":"412","s":[{"value":["start of "]},{"r":"413","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"427","s":[{"value":["locationPeriod"]}]}]}]}]}]}}],"expression":{"localId":"398","locator":"49:3-52:18","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"427","locator":"49:12-52:18","path":"locationPeriod","type":"Property","resultTypeSpecifier":{"localId":"430","type":"IntervalTypeSpecifier","pointType":{"localId":"431","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"source":{"localId":"426","locator":"49:12-52:3","resultTypeName":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"First","signature":[],"source":{"localId":"421","locator":"49:18-51:35","type":"Query","resultTypeSpecifier":{"localId":"422","type":"ListTypeSpecifier","elementType":{"localId":"423","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}},"source":[{"localId":"399","locator":"49:18-49:72","alias":"HospitalLocation","resultTypeSpecifier":{"localId":"406","type":"ListTypeSpecifier","elementType":{"localId":"407","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}},"expression":{"localId":"401","locator":"49:18-49:56","name":"HospitalizationLocations","type":"FunctionRef","resultTypeSpecifier":{"localId":"404","type":"ListTypeSpecifier","elementType":{"localId":"405","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}},"signature":[],"operand":[{"localId":"400","locator":"49:46-49:54","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"Encounter","type":"OperandRef"}]}}],"let":[],"relationship":[],"where":{"localId":"411","locator":"50:5-50:63","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"InValueSet","signature":[],"code":{"localId":"409","locator":"50:11-50:31","resultTypeName":"{urn:hl7-org:elm-types:r1}Code","path":"code","scope":"HospitalLocation","type":"Property"},"valueset":{"localId":"410","locator":"50:36-50:63","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Emergency Department Visit","preserve":true}},"sort":{"localId":"417","locator":"51:5-51:35","by":[{"localId":"416","locator":"51:13-51:35","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","direction":"asc","type":"ByExpression","expression":{"localId":"412","locator":"51:13-51:35","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"413","locator":"51:22-51:35","name":"locationPeriod","type":"IdentifierRef","resultTypeSpecifier":{"localId":"414","type":"IntervalTypeSpecifier","pointType":{"localId":"415","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}}]}}}}},"operand":[{"localId":"397","name":"Encounter","operandTypeSpecifier":{"localId":"396","locator":"48:60-48:81","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"1063","locator":"134:1-139:3","resultTypeName":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","name":"FirstInpatientIntensiveCareUnit","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"1063","s":[{"value":["/*First Inpatient Intensive Care Unit returns the first intensive care unit for the given encounter, without considering any immediately prior emergency department visit.*/\n","define function \"FirstInpatientIntensiveCareUnit\"(Encounter \"Encounter, Performed\" ):\n  "]},{"r":"1110","s":[{"r":"1110","s":[{"value":["First","("]},{"r":"1105","s":[{"s":[{"r":"1066","s":[{"r":"1068","s":[{"value":["("]},{"r":"1068","s":[{"r":"1067","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"1068","s":[{"value":["facilityLocations"]}]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n      "]},{"r":"1077","s":[{"value":["where "]},{"r":"1077","s":[{"r":"1081","s":[{"r":"1079","s":[{"r":"1078","s":[{"value":["HospitalLocation"]}]},{"value":["."]},{"r":"1079","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"1080","s":[{"value":["\"Intensive Care Unit\""]}]}]},{"value":["\n        and "]},{"r":"1094","s":[{"r":"1083","s":[{"r":"1082","s":[{"value":["HospitalLocation"]}]},{"value":["."]},{"r":"1083","s":[{"value":["locationPeriod"]}]}]},{"r":"1094","value":[" ","during"," "]},{"r":"1089","s":[{"r":"1088","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"1089","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n      "]},{"r":"1101","s":[{"value":["sort by "]},{"r":"1100","s":[{"r":"1096","s":[{"value":["start of "]},{"r":"1097","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]}]}]}}],"expression":{"localId":"1110","locator":"135:3-139:3","resultTypeName":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"First","signature":[],"source":{"localId":"1105","locator":"135:9-138:37","type":"Query","resultTypeSpecifier":{"localId":"1106","type":"ListTypeSpecifier","elementType":{"localId":"1107","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}},"source":[{"localId":"1066","locator":"135:9-135:53","alias":"HospitalLocation","resultTypeSpecifier":{"localId":"1075","type":"ListTypeSpecifier","elementType":{"localId":"1076","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}},"expression":{"localId":"1068","locator":"135:9-135:37","path":"facilityLocations","type":"Property","resultTypeSpecifier":{"localId":"1073","type":"ListTypeSpecifier","elementType":{"localId":"1074","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}},"source":{"localId":"1067","locator":"135:10-135:18","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"Encounter","type":"OperandRef"}}}],"let":[],"relationship":[],"where":{"localId":"1077","locator":"136:7-137:75","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"And","signature":[],"operand":[{"localId":"1081","locator":"136:13-136:58","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"InValueSet","signature":[],"code":{"localId":"1079","locator":"136:13-136:33","resultTypeName":"{urn:hl7-org:elm-types:r1}Code","path":"code","scope":"HospitalLocation","type":"Property"},"valueset":{"localId":"1080","locator":"136:38-136:58","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Intensive Care Unit","preserve":true}},{"localId":"1094","locator":"137:13-137:75","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"IncludedIn","signature":[],"operand":[{"localId":"1083","locator":"137:13-137:43","path":"locationPeriod","scope":"HospitalLocation","type":"Property","resultTypeSpecifier":{"localId":"1086","type":"IntervalTypeSpecifier","pointType":{"localId":"1087","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}},{"localId":"1089","locator":"137:52-137:75","path":"relevantPeriod","type":"Property","resultTypeSpecifier":{"localId":"1092","type":"IntervalTypeSpecifier","pointType":{"localId":"1093","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"source":{"localId":"1088","locator":"137:52-137:60","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"Encounter","type":"OperandRef"}}]}]},"sort":{"localId":"1101","locator":"138:7-138:37","by":[{"localId":"1100","locator":"138:15-138:37","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","direction":"asc","type":"ByExpression","expression":{"localId":"1096","locator":"138:15-138:37","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"1097","locator":"138:24-138:37","name":"locationPeriod","type":"IdentifierRef","resultTypeSpecifier":{"localId":"1098","type":"IntervalTypeSpecifier","pointType":{"localId":"1099","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}}]}}},"operand":[{"localId":"1065","name":"Encounter","operandTypeSpecifier":{"localId":"1064","locator":"134:61-134:82","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"1173","locator":"154:1-159:3","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","name":"HasEnd","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"1173","s":[{"value":["/*Given an interval, return true if the interval has an ending boundary specified (i.e. the end of the interval is not null and not the maximum DateTime value)*/\n","define function \"HasEnd\"(period Interval\u003cDateTime\u003e ):\n  "]},{"r":"1179","s":[{"r":"1179","s":[{"value":["not "]},{"r":"1180","s":[{"value":["( \n    "]},{"r":"1180","s":[{"r":"1185","s":[{"r":"1181","s":[{"value":["end of "]},{"r":"1182","s":[{"value":["period"]}]}]},{"value":[" is null"]}]},{"value":["\n      or \n      "]},{"r":"1186","s":[{"r":"1187","s":[{"value":["end of "]},{"r":"1188","s":[{"value":["period"]}]}]},{"value":[" ","="," "]},{"r":"1192","s":[{"value":["maximum"," "]},{"r":"1191","s":[{"value":["DateTime"]}]}]}]}]},{"value":["\n  )"]}]}]}]}]}}],"expression":{"localId":"1179","locator":"155:3-159:3","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"Not","signature":[],"operand":{"localId":"1180","locator":"155:7-159:3","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"Or","signature":[],"operand":[{"localId":"1185","locator":"156:5-156:25","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"IsNull","signature":[],"operand":{"localId":"1181","locator":"156:5-156:17","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"End","signature":[],"operand":{"localId":"1182","locator":"156:12-156:17","name":"period","type":"OperandRef","resultTypeSpecifier":{"localId":"1183","type":"IntervalTypeSpecifier","pointType":{"localId":"1184","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}},{"localId":"1186","locator":"158:7-158:38","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"Equal","signature":[],"operand":[{"localId":"1187","locator":"158:7-158:19","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"End","signature":[],"operand":{"localId":"1188","locator":"158:14-158:19","name":"period","type":"OperandRef","resultTypeSpecifier":{"localId":"1189","type":"IntervalTypeSpecifier","pointType":{"localId":"1190","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}},{"localId":"1192","locator":"158:23-158:38","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","valueType":"{urn:hl7-org:elm-types:r1}DateTime","type":"MaxValue"}]}]}},"operand":[{"localId":"1178","name":"period","operandTypeSpecifier":{"localId":"1174","locator":"154:33-154:50","type":"IntervalTypeSpecifier","resultTypeSpecifier":{"localId":"1176","type":"IntervalTypeSpecifier","pointType":{"localId":"1177","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"pointType":{"localId":"1175","locator":"154:42-154:49","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"1153","locator":"148:1-151:3","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","name":"HasStart","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"1153","s":[{"value":["/*Given an interval, return true if the interval has a starting boundary specified (i.e. the start of the interval is not null and not the minimum DateTime value)*/\n","define function \"HasStart\"(period Interval\u003cDateTime\u003e ):\n  "]},{"r":"1159","s":[{"r":"1159","s":[{"value":["not "]},{"r":"1160","s":[{"value":["( "]},{"r":"1160","s":[{"r":"1165","s":[{"r":"1161","s":[{"value":["start of "]},{"r":"1162","s":[{"value":["period"]}]}]},{"value":[" is null"]}]},{"value":["\n      or "]},{"r":"1166","s":[{"r":"1167","s":[{"value":["start of "]},{"r":"1168","s":[{"value":["period"]}]}]},{"value":[" ","="," "]},{"r":"1172","s":[{"value":["minimum"," "]},{"r":"1171","s":[{"value":["DateTime"]}]}]}]}]},{"value":["\n  )"]}]}]}]}]}}],"expression":{"localId":"1159","locator":"149:3-151:3","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"Not","signature":[],"operand":{"localId":"1160","locator":"149:7-151:3","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"Or","signature":[],"operand":[{"localId":"1165","locator":"149:9-149:31","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"IsNull","signature":[],"operand":{"localId":"1161","locator":"149:9-149:23","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"1162","locator":"149:18-149:23","name":"period","type":"OperandRef","resultTypeSpecifier":{"localId":"1163","type":"IntervalTypeSpecifier","pointType":{"localId":"1164","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}},{"localId":"1166","locator":"150:10-150:43","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"Equal","signature":[],"operand":[{"localId":"1167","locator":"150:10-150:24","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"1168","locator":"150:19-150:24","name":"period","type":"OperandRef","resultTypeSpecifier":{"localId":"1169","type":"IntervalTypeSpecifier","pointType":{"localId":"1170","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}},{"localId":"1172","locator":"150:28-150:43","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","valueType":"{urn:hl7-org:elm-types:r1}DateTime","type":"MinValue"}]}]}},"operand":[{"localId":"1158","name":"period","operandTypeSpecifier":{"localId":"1154","locator":"148:35-148:52","type":"IntervalTypeSpecifier","resultTypeSpecifier":{"localId":"1156","type":"IntervalTypeSpecifier","pointType":{"localId":"1157","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"pointType":{"localId":"1155","locator":"148:44-148:51","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"432","locator":"55:1-56:39","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"HospitalAdmissionTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"432","s":[{"value":["/*Returns admission time for an encounter or for immediately prior emergency department visit.*/\n","define function \"HospitalAdmissionTime\"(Encounter \"Encounter, Performed\" ):\n  "]},{"r":"435","s":[{"r":"435","s":[{"value":["start of "]},{"r":"440","s":[{"value":["\"Hospitalization\"","("]},{"r":"436","s":[{"value":["Encounter"]}]},{"value":[")"]}]}]}]}]}}],"expression":{"localId":"435","locator":"56:3-56:39","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"440","locator":"56:12-56:39","name":"Hospitalization","type":"FunctionRef","resultTypeSpecifier":{"localId":"528","type":"IntervalTypeSpecifier","pointType":{"localId":"529","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"signature":[],"operand":[{"localId":"436","locator":"56:30-56:38","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"Encounter","type":"OperandRef"}]}},"operand":[{"localId":"434","name":"Encounter","operandTypeSpecifier":{"localId":"433","locator":"55:51-55:72","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"530","locator":"59:1-62:18","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"HospitalArrivalTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"530","s":[{"value":["/*Returns earliest arrival time for an encounter including any prior ED visit.*/\n","define function \"HospitalArrivalTime\"(Encounter \"Encounter, Performed\" ):\n  "]},{"r":"533","s":[{"r":"533","s":[{"value":["start of "]},{"r":"558","s":[{"r":"557","s":[{"value":["First","("]},{"r":"552","s":[{"s":[{"r":"534","s":[{"r":"536","s":[{"value":["("]},{"r":"536","s":[{"value":["\"HospitalizationLocations\"","("]},{"r":"535","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n  \t\t"]},{"r":"548","s":[{"value":["sort by "]},{"r":"547","s":[{"r":"543","s":[{"value":["start of "]},{"r":"544","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"558","s":[{"value":["locationPeriod"]}]}]}]}]}]}}],"expression":{"localId":"533","locator":"60:3-62:18","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"558","locator":"60:12-62:18","path":"locationPeriod","type":"Property","resultTypeSpecifier":{"localId":"561","type":"IntervalTypeSpecifier","pointType":{"localId":"562","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"source":{"localId":"557","locator":"60:12-62:3","resultTypeName":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"First","signature":[],"source":{"localId":"552","locator":"60:18-61:35","type":"Query","resultTypeSpecifier":{"localId":"553","type":"ListTypeSpecifier","elementType":{"localId":"554","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}},"source":[{"localId":"534","locator":"60:18-60:72","alias":"HospitalLocation","resultTypeSpecifier":{"localId":"541","type":"ListTypeSpecifier","elementType":{"localId":"542","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}},"expression":{"localId":"536","locator":"60:18-60:56","name":"HospitalizationLocations","type":"FunctionRef","resultTypeSpecifier":{"localId":"539","type":"ListTypeSpecifier","elementType":{"localId":"540","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}},"signature":[],"operand":[{"localId":"535","locator":"60:46-60:54","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"Encounter","type":"OperandRef"}]}}],"let":[],"relationship":[],"sort":{"localId":"548","locator":"61:5-61:35","by":[{"localId":"547","locator":"61:13-61:35","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","direction":"asc","type":"ByExpression","expression":{"localId":"543","locator":"61:13-61:35","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"544","locator":"61:22-61:35","name":"locationPeriod","type":"IdentifierRef","resultTypeSpecifier":{"localId":"545","type":"IntervalTypeSpecifier","pointType":{"localId":"546","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}}]}}}}},"operand":[{"localId":"532","name":"Encounter","operandTypeSpecifier":{"localId":"531","locator":"59:49-59:70","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"660","locator":"80:1-83:18","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"HospitalDepartureTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"660","s":[{"value":["/*Returns the latest departure time for encounter including any prior ED visit.*/\n","define function \"HospitalDepartureTime\"(Encounter \"Encounter, Performed\" ):\n  "]},{"r":"663","s":[{"r":"663","s":[{"value":["end of "]},{"r":"688","s":[{"r":"687","s":[{"value":["Last","("]},{"r":"682","s":[{"s":[{"r":"664","s":[{"r":"666","s":[{"value":["("]},{"r":"666","s":[{"value":["\"HospitalizationLocations\"","("]},{"r":"665","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n  \t\t"]},{"r":"678","s":[{"value":["sort by "]},{"r":"677","s":[{"r":"673","s":[{"value":["start of "]},{"r":"674","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"688","s":[{"value":["locationPeriod"]}]}]}]}]}]}}],"expression":{"localId":"663","locator":"81:3-83:18","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"End","signature":[],"operand":{"localId":"688","locator":"81:10-83:18","path":"locationPeriod","type":"Property","resultTypeSpecifier":{"localId":"691","type":"IntervalTypeSpecifier","pointType":{"localId":"692","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"source":{"localId":"687","locator":"81:10-83:3","resultTypeName":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"Last","signature":[],"source":{"localId":"682","locator":"81:15-82:35","type":"Query","resultTypeSpecifier":{"localId":"683","type":"ListTypeSpecifier","elementType":{"localId":"684","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}},"source":[{"localId":"664","locator":"81:15-81:69","alias":"HospitalLocation","resultTypeSpecifier":{"localId":"671","type":"ListTypeSpecifier","elementType":{"localId":"672","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}},"expression":{"localId":"666","locator":"81:15-81:53","name":"HospitalizationLocations","type":"FunctionRef","resultTypeSpecifier":{"localId":"669","type":"ListTypeSpecifier","elementType":{"localId":"670","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}},"signature":[],"operand":[{"localId":"665","locator":"81:43-81:51","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"Encounter","type":"OperandRef"}]}}],"let":[],"relationship":[],"sort":{"localId":"678","locator":"82:5-82:35","by":[{"localId":"677","locator":"82:13-82:35","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","direction":"asc","type":"ByExpression","expression":{"localId":"673","locator":"82:13-82:35","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"674","locator":"82:22-82:35","name":"locationPeriod","type":"IdentifierRef","resultTypeSpecifier":{"localId":"675","type":"IntervalTypeSpecifier","pointType":{"localId":"676","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}}]}}}}},"operand":[{"localId":"662","name":"Encounter","operandTypeSpecifier":{"localId":"661","locator":"80:51-80:72","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"693","locator":"86:1-87:33","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"HospitalDischargeTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"693","s":[{"value":["/*Hospital Discharge Time returns the discharge time for an encounter*/\n","define function \"HospitalDischargeTime\"(Encounter \"Encounter, Performed\" ):\n  "]},{"r":"696","s":[{"r":"696","s":[{"value":["end of "]},{"r":"698","s":[{"r":"697","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"698","s":[{"value":["relevantPeriod"]}]}]}]}]}]}}],"expression":{"localId":"696","locator":"87:3-87:33","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"End","signature":[],"operand":{"localId":"698","locator":"87:10-87:33","path":"relevantPeriod","type":"Property","resultTypeSpecifier":{"localId":"701","type":"IntervalTypeSpecifier","pointType":{"localId":"702","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"source":{"localId":"697","locator":"87:10-87:18","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"Encounter","type":"OperandRef"}}},"operand":[{"localId":"695","name":"Encounter","operandTypeSpecifier":{"localId":"694","locator":"86:51-86:72","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"437","locator":"65:1-73:31","name":"Hospitalization","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"437","s":[{"value":["/*Hospitalization returns the total interval for admission to discharge for the given encounter, or for the admission of any immediately prior emergency department visit to the discharge of the given encounter.*/\n","define function \"Hospitalization\"(Encounter \"Encounter, Performed\" ):\n  "]},{"r":"645","s":[{"r":"645","s":[{"s":[{"r":"563","s":[{"r":"564","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"565","s":[{"value":["EDVisit",": "]},{"r":"614","s":[{"value":["Last","("]},{"r":"609","s":[{"s":[{"r":"566","s":[{"r":"569","s":[{"r":"569","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"599","s":[{"value":["where "]},{"r":"599","s":[{"r":"578","s":[{"r":"577","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"578","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"599","s":[{"value":["ends "]},{"r":"591","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"583","s":[{"value":["start of "]},{"r":"585","s":[{"r":"584","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"585","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"605","s":[{"value":["sort by \n  \t\t\t"]},{"r":"604","s":[{"r":"600","s":[{"value":["end of "]},{"r":"601","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"615","s":[{"value":["return "]},{"r":"640","s":[{"value":["Interval["]},{"r":"632","s":[{"value":["Coalesce","("]},{"r":"616","s":[{"value":["start of "]},{"r":"618","s":[{"r":"617","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"618","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"623","s":[{"value":["start of "]},{"r":"625","s":[{"r":"624","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"625","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]},{"value":[", \n  \t"]},{"r":"633","s":[{"value":["end of "]},{"r":"635","s":[{"r":"634","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"635","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["]"]}]}]}]}]}]}}],"resultTypeSpecifier":{"localId":"650","type":"IntervalTypeSpecifier","pointType":{"localId":"651","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"expression":{"localId":"645","locator":"66:3-73:31","type":"Query","resultTypeSpecifier":{"localId":"648","type":"IntervalTypeSpecifier","pointType":{"localId":"649","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"source":[{"localId":"563","locator":"66:3-66:17","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","alias":"Visit","expression":{"localId":"564","locator":"66:3-66:11","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"565","locator":"67:8-71:4","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","identifier":"EDVisit","expression":{"localId":"614","locator":"67:17-71:4","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"Last","signature":[],"source":{"localId":"609","locator":"67:22-70:26","type":"Query","resultTypeSpecifier":{"localId":"610","type":"ListTypeSpecifier","elementType":{"localId":"611","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"source":[{"localId":"566","locator":"67:22-67:82","alias":"LastED","resultTypeSpecifier":{"localId":"575","type":"ListTypeSpecifier","elementType":{"localId":"576","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"569","locator":"67:22-67:75","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","resultTypeSpecifier":{"localId":"573","type":"ListTypeSpecifier","elementType":{"localId":"574","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"codes":{"localId":"568","locator":"67:47-67:74","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Emergency Department Visit","preserve":true,"type":"ValueSetRef"},"include":[],"codeFilter":[],"dateFilter":[],"otherFilter":[]}}],"let":[],"relationship":[],"where":{"localId":"599","locator":"68:6-68:95","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"And","signature":[],"operand":[{"localId":"596","locator":"68:39-68:52","type":"In","signature":[],"operand":[{"localId":"590","locator":"68:34-68:37","type":"End","signature":[],"operand":{"localId":"578","locator":"68:12-68:32","path":"relevantPeriod","scope":"LastED","type":"Property","resultTypeSpecifier":{"localId":"581","type":"IntervalTypeSpecifier","pointType":{"localId":"582","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}},{"localId":"593","locator":"68:39-68:52","lowClosed":true,"highClosed":true,"type":"Interval","resultTypeSpecifier":{"localId":"594","type":"IntervalTypeSpecifier","pointType":{"localId":"595","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"low":{"localId":"592","locator":"68:67-68:95","type":"Subtract","signature":[],"operand":[{"localId":"583","locator":"68:67-68:95","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"585","locator":"68:76-68:95","path":"relevantPeriod","scope":"Visit","type":"Property","resultTypeSpecifier":{"localId":"588","type":"IntervalTypeSpecifier","pointType":{"localId":"589","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}},{"localId":"591","locator":"68:39-68:44","resultTypeName":"{urn:hl7-org:elm-types:r1}Quantity","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"583","locator":"68:67-68:95","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"585","locator":"68:76-68:95","path":"relevantPeriod","scope":"Visit","type":"Property","resultTypeSpecifier":{"localId":"588","type":"IntervalTypeSpecifier","pointType":{"localId":"589","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}}]},{"localId":"598","locator":"68:39-68:52","type":"Not","signature":[],"operand":{"localId":"597","locator":"68:39-68:52","type":"IsNull","signature":[],"operand":{"localId":"583","locator":"68:67-68:95","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"585","locator":"68:76-68:95","path":"relevantPeriod","scope":"Visit","type":"Property","resultTypeSpecifier":{"localId":"588","type":"IntervalTypeSpecifier","pointType":{"localId":"589","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}}}]},"sort":{"localId":"605","locator":"69:6-70:26","by":[{"localId":"604","locator":"70:6-70:26","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","direction":"asc","type":"ByExpression","expression":{"localId":"600","locator":"70:6-70:26","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"End","signature":[],"operand":{"localId":"601","locator":"70:13-70:26","name":"relevantPeriod","type":"IdentifierRef","resultTypeSpecifier":{"localId":"602","type":"IntervalTypeSpecifier","pointType":{"localId":"603","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}}]}}}}],"relationship":[],"return":{"localId":"615","locator":"72:4-73:31","resultTypeSpecifier":{"localId":"643","type":"IntervalTypeSpecifier","pointType":{"localId":"644","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"expression":{"localId":"640","locator":"72:11-73:31","lowClosed":true,"highClosed":true,"type":"Interval","resultTypeSpecifier":{"localId":"641","type":"IntervalTypeSpecifier","pointType":{"localId":"642","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"low":{"localId":"632","locator":"72:20-72:91","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Coalesce","signature":[],"operand":[{"localId":"616","locator":"72:29-72:59","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"618","locator":"72:38-72:59","path":"relevantPeriod","type":"Property","resultTypeSpecifier":{"localId":"621","type":"IntervalTypeSpecifier","pointType":{"localId":"622","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"source":{"localId":"617","locator":"72:38-72:44","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"EDVisit","type":"QueryLetRef"}}},{"localId":"623","locator":"72:62-72:90","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"625","locator":"72:71-72:90","path":"relevantPeriod","scope":"Visit","type":"Property","resultTypeSpecifier":{"localId":"628","type":"IntervalTypeSpecifier","pointType":{"localId":"629","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}]},"high":{"localId":"633","locator":"73:4-73:30","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"End","signature":[],"operand":{"localId":"635","locator":"73:11-73:30","path":"relevantPeriod","scope":"Visit","type":"Property","resultTypeSpecifier":{"localId":"638","type":"IntervalTypeSpecifier","pointType":{"localId":"639","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}}}},"operand":[{"localId":"439","name":"Encounter","operandTypeSpecifier":{"localId":"438","locator":"65:45-65:66","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"652","locator":"76:1-77:44","resultTypeName":"{urn:hl7-org:elm-types:r1}Integer","name":"HospitalizationLengthofStay","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"652","s":[{"value":["/*Returns the length of stay in days (i.e. the number of days between admission and discharge) for the given encounter, or from the admission of any immediately prior emergency department visit to the discharge of the encounter*/\n","define function \"HospitalizationLengthofStay\"(Encounter \"Encounter, Performed\" ):\n  "]},{"r":"659","s":[{"r":"659","s":[{"value":["LengthInDays","("]},{"r":"656","s":[{"value":["\"Hospitalization\"","("]},{"r":"655","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"659","locator":"77:3-77:44","resultTypeName":"{urn:hl7-org:elm-types:r1}Integer","name":"LengthInDays","type":"FunctionRef","signature":[],"operand":[{"localId":"656","locator":"77:16-77:43","name":"Hospitalization","type":"FunctionRef","resultTypeSpecifier":{"localId":"657","type":"IntervalTypeSpecifier","pointType":{"localId":"658","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"signature":[],"operand":[{"localId":"655","locator":"77:34-77:42","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"Encounter","type":"OperandRef"}]}]},"operand":[{"localId":"654","name":"Encounter","operandTypeSpecifier":{"localId":"653","locator":"76:57-76:78","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"300","locator":"37:1-45:71","name":"HospitalizationLocations","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"300","s":[{"value":["/*returns list of all locations within an encounter, including locations for immediately prior ED visit.*/\n","define function \"HospitalizationLocations\"(Encounter \"Encounter, Performed\" ):\n  "]},{"r":"388","s":[{"r":"388","s":[{"s":[{"r":"303","s":[{"r":"304","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"305","s":[{"value":["EDVisit",": "]},{"r":"354","s":[{"value":["Last","("]},{"r":"349","s":[{"s":[{"r":"306","s":[{"r":"309","s":[{"r":"309","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"339","s":[{"value":["where "]},{"r":"339","s":[{"r":"318","s":[{"r":"317","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"318","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"339","s":[{"value":["ends "]},{"r":"331","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"323","s":[{"value":["start of "]},{"r":"325","s":[{"r":"324","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"325","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"345","s":[{"value":["sort by \n  \t\t\t"]},{"r":"344","s":[{"r":"340","s":[{"value":["end of "]},{"r":"341","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"355","s":[{"value":["return "]},{"r":"356","s":[{"value":["if "]},{"r":"358","s":[{"r":"357","s":[{"value":["EDVisit"]}]},{"value":[" is null"]}]},{"value":[" then "]},{"r":"360","s":[{"r":"359","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"360","s":[{"value":["facilityLocations"]}]}]},{"value":[" \n  \t\telse "]},{"r":"365","s":[{"value":["flatten "]},{"r":"366","s":[{"value":["{ "]},{"r":"368","s":[{"r":"367","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"368","s":[{"value":["facilityLocations"]}]}]},{"value":[", "]},{"r":"374","s":[{"r":"373","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"374","s":[{"value":["facilityLocations"]}]}]},{"value":[" }"]}]}]}]}]}]}]}]}}],"resultTypeSpecifier":{"localId":"393","type":"ListTypeSpecifier","elementType":{"localId":"394","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}},"expression":{"localId":"388","locator":"38:3-45:71","type":"Query","resultTypeSpecifier":{"localId":"391","type":"ListTypeSpecifier","elementType":{"localId":"392","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}},"source":[{"localId":"303","locator":"38:3-38:17","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","alias":"Visit","expression":{"localId":"304","locator":"38:3-38:11","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"305","locator":"39:8-43:4","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","identifier":"EDVisit","expression":{"localId":"354","locator":"39:17-43:4","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"Last","signature":[],"source":{"localId":"349","locator":"39:22-42:26","type":"Query","resultTypeSpecifier":{"localId":"350","type":"ListTypeSpecifier","elementType":{"localId":"351","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"source":[{"localId":"306","locator":"39:22-39:82","alias":"LastED","resultTypeSpecifier":{"localId":"315","type":"ListTypeSpecifier","elementType":{"localId":"316","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"309","locator":"39:22-39:75","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","resultTypeSpecifier":{"localId":"313","type":"ListTypeSpecifier","elementType":{"localId":"314","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"codes":{"localId":"308","locator":"39:47-39:74","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Emergency Department Visit","preserve":true,"type":"ValueSetRef"},"include":[],"codeFilter":[],"dateFilter":[],"otherFilter":[]}}],"let":[],"relationship":[],"where":{"localId":"339","locator":"40:6-40:95","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"And","signature":[],"operand":[{"localId":"336","locator":"40:39-40:52","type":"In","signature":[],"operand":[{"localId":"330","locator":"40:34-40:37","type":"End","signature":[],"operand":{"localId":"318","locator":"40:12-40:32","path":"relevantPeriod","scope":"LastED","type":"Property","resultTypeSpecifier":{"localId":"321","type":"IntervalTypeSpecifier","pointType":{"localId":"322","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}},{"localId":"333","locator":"40:39-40:52","lowClosed":true,"highClosed":true,"type":"Interval","resultTypeSpecifier":{"localId":"334","type":"IntervalTypeSpecifier","pointType":{"localId":"335","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"low":{"localId":"332","locator":"40:67-40:95","type":"Subtract","signature":[],"operand":[{"localId":"323","locator":"40:67-40:95","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"325","locator":"40:76-40:95","path":"relevantPeriod","scope":"Visit","type":"Property","resultTypeSpecifier":{"localId":"328","type":"IntervalTypeSpecifier","pointType":{"localId":"329","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}},{"localId":"331","locator":"40:39-40:44","resultTypeName":"{urn:hl7-org:elm-types:r1}Quantity","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"323","locator":"40:67-40:95","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"325","locator":"40:76-40:95","path":"relevantPeriod","scope":"Visit","type":"Property","resultTypeSpecifier":{"localId":"328","type":"IntervalTypeSpecifier","pointType":{"localId":"329","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}}]},{"localId":"338","locator":"40:39-40:52","type":"Not","signature":[],"operand":{"localId":"337","locator":"40:39-40:52","type":"IsNull","signature":[],"operand":{"localId":"323","locator":"40:67-40:95","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"325","locator":"40:76-40:95","path":"relevantPeriod","scope":"Visit","type":"Property","resultTypeSpecifier":{"localId":"328","type":"IntervalTypeSpecifier","pointType":{"localId":"329","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}}}]},"sort":{"localId":"345","locator":"41:6-42:26","by":[{"localId":"344","locator":"42:6-42:26","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","direction":"asc","type":"ByExpression","expression":{"localId":"340","locator":"42:6-42:26","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"End","signature":[],"operand":{"localId":"341","locator":"42:13-42:26","name":"relevantPeriod","type":"IdentifierRef","resultTypeSpecifier":{"localId":"342","type":"IntervalTypeSpecifier","pointType":{"localId":"343","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}}]}}}}],"relationship":[],"return":{"localId":"355","locator":"44:4-45:71","resultTypeSpecifier":{"localId":"386","type":"ListTypeSpecifier","elementType":{"localId":"387","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}},"expression":{"localId":"356","locator":"44:11-45:71","type":"If","resultTypeSpecifier":{"localId":"384","type":"ListTypeSpecifier","elementType":{"localId":"385","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}},"condition":{"localId":"358","locator":"44:14-44:28","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"IsNull","signature":[],"operand":{"localId":"357","locator":"44:14-44:20","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"EDVisit","type":"QueryLetRef"}},"then":{"localId":"360","locator":"44:35-44:57","path":"facilityLocations","scope":"Visit","type":"Property","resultTypeSpecifier":{"localId":"363","type":"ListTypeSpecifier","elementType":{"localId":"364","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}}},"else":{"localId":"365","locator":"45:10-45:71","type":"Flatten","resultTypeSpecifier":{"localId":"382","type":"ListTypeSpecifier","elementType":{"localId":"383","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}},"signature":[],"operand":{"localId":"366","locator":"45:18-45:71","type":"List","resultTypeSpecifier":{"localId":"379","type":"ListTypeSpecifier","elementType":{"localId":"380","type":"ListTypeSpecifier","elementType":{"localId":"381","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}}},"element":[{"localId":"368","locator":"45:20-45:44","path":"facilityLocations","type":"Property","resultTypeSpecifier":{"localId":"371","type":"ListTypeSpecifier","elementType":{"localId":"372","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}},"source":{"localId":"367","locator":"45:20-45:26","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"EDVisit","type":"QueryLetRef"}},{"localId":"374","locator":"45:47-45:69","path":"facilityLocations","scope":"Visit","type":"Property","resultTypeSpecifier":{"localId":"377","type":"ListTypeSpecifier","elementType":{"localId":"378","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}}}]}}}}},"operand":[{"localId":"302","name":"Encounter","operandTypeSpecifier":{"localId":"301","locator":"37:54-37:75","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"907","locator":"113:1-127:31","name":"HospitalizationWithObservation","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"907","s":[{"value":["/*Hospitalization with Observation returns the total interval from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\n","define function \"HospitalizationWithObservation\"(Encounter \"Encounter, Performed\" ):\n  "]},{"r":"1048","s":[{"r":"1048","s":[{"s":[{"r":"910","s":[{"r":"911","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"912","s":[{"value":["ObsVisit",": "]},{"r":"961","s":[{"value":["Last","("]},{"r":"956","s":[{"s":[{"r":"913","s":[{"r":"916","s":[{"r":"916","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Observation Services\""]}]},{"value":["]"]}]}]},{"value":[" ","LastObs"]}]}]},{"value":["\n  \t\t\t"]},{"r":"946","s":[{"value":["where "]},{"r":"946","s":[{"r":"925","s":[{"r":"924","s":[{"value":["LastObs"]}]},{"value":["."]},{"r":"925","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"946","s":[{"value":["ends "]},{"r":"938","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"930","s":[{"value":["start of "]},{"r":"932","s":[{"r":"931","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"932","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"952","s":[{"value":["sort by \n  \t\t\t"]},{"r":"951","s":[{"r":"947","s":[{"value":["end of "]},{"r":"948","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]},{"value":[",\n  \t"]},{"r":"962","s":[{"value":["VisitStart",": "]},{"r":"979","s":[{"value":["Coalesce","("]},{"r":"963","s":[{"value":["start of "]},{"r":"965","s":[{"r":"964","s":[{"value":["ObsVisit"]}]},{"value":["."]},{"r":"965","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"970","s":[{"value":["start of "]},{"r":"972","s":[{"r":"971","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"972","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]}]},{"value":[",\n  \t"]},{"r":"980","s":[{"value":["EDVisit",": "]},{"r":"1023","s":[{"value":["Last","("]},{"r":"1018","s":[{"s":[{"r":"981","s":[{"r":"984","s":[{"r":"984","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"1008","s":[{"value":["where "]},{"r":"1008","s":[{"r":"993","s":[{"r":"992","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"993","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"1008","s":[{"value":["ends "]},{"r":"1000","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"998","s":[{"value":["VisitStart"]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"1014","s":[{"value":["sort by \n  \t\t\t"]},{"r":"1013","s":[{"r":"1009","s":[{"value":["end of "]},{"r":"1010","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"1024","s":[{"value":["return "]},{"r":"1043","s":[{"value":["Interval["]},{"r":"1035","s":[{"value":["Coalesce","("]},{"r":"1025","s":[{"value":["start of "]},{"r":"1027","s":[{"r":"1026","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"1027","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"1032","s":[{"value":["VisitStart"]}]},{"value":[")"]}]},{"value":[", \n  \t"]},{"r":"1036","s":[{"value":["end of "]},{"r":"1038","s":[{"r":"1037","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"1038","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["]"]}]}]}]}]}]}}],"resultTypeSpecifier":{"localId":"1053","type":"IntervalTypeSpecifier","pointType":{"localId":"1054","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"expression":{"localId":"1048","locator":"114:3-127:31","type":"Query","resultTypeSpecifier":{"localId":"1051","type":"IntervalTypeSpecifier","pointType":{"localId":"1052","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"source":[{"localId":"910","locator":"114:3-114:17","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","alias":"Visit","expression":{"localId":"911","locator":"114:3-114:11","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"912","locator":"115:8-119:4","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","identifier":"ObsVisit","expression":{"localId":"961","locator":"115:18-119:4","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"Last","signature":[],"source":{"localId":"956","locator":"115:23-118:26","type":"Query","resultTypeSpecifier":{"localId":"957","type":"ListTypeSpecifier","elementType":{"localId":"958","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"source":[{"localId":"913","locator":"115:23-115:78","alias":"LastObs","resultTypeSpecifier":{"localId":"922","type":"ListTypeSpecifier","elementType":{"localId":"923","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"916","locator":"115:23-115:70","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","resultTypeSpecifier":{"localId":"920","type":"ListTypeSpecifier","elementType":{"localId":"921","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"codes":{"localId":"915","locator":"115:48-115:69","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Observation Services","preserve":true,"type":"ValueSetRef"},"include":[],"codeFilter":[],"dateFilter":[],"otherFilter":[]}}],"let":[],"relationship":[],"where":{"localId":"946","locator":"116:6-116:96","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"And","signature":[],"operand":[{"localId":"943","locator":"116:40-116:53","type":"In","signature":[],"operand":[{"localId":"937","locator":"116:35-116:38","type":"End","signature":[],"operand":{"localId":"925","locator":"116:12-116:33","path":"relevantPeriod","scope":"LastObs","type":"Property","resultTypeSpecifier":{"localId":"928","type":"IntervalTypeSpecifier","pointType":{"localId":"929","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}},{"localId":"940","locator":"116:40-116:53","lowClosed":true,"highClosed":true,"type":"Interval","resultTypeSpecifier":{"localId":"941","type":"IntervalTypeSpecifier","pointType":{"localId":"942","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"low":{"localId":"939","locator":"116:68-116:96","type":"Subtract","signature":[],"operand":[{"localId":"930","locator":"116:68-116:96","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"932","locator":"116:77-116:96","path":"relevantPeriod","scope":"Visit","type":"Property","resultTypeSpecifier":{"localId":"935","type":"IntervalTypeSpecifier","pointType":{"localId":"936","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}},{"localId":"938","locator":"116:40-116:45","resultTypeName":"{urn:hl7-org:elm-types:r1}Quantity","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"930","locator":"116:68-116:96","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"932","locator":"116:77-116:96","path":"relevantPeriod","scope":"Visit","type":"Property","resultTypeSpecifier":{"localId":"935","type":"IntervalTypeSpecifier","pointType":{"localId":"936","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}}]},{"localId":"945","locator":"116:40-116:53","type":"Not","signature":[],"operand":{"localId":"944","locator":"116:40-116:53","type":"IsNull","signature":[],"operand":{"localId":"930","locator":"116:68-116:96","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"932","locator":"116:77-116:96","path":"relevantPeriod","scope":"Visit","type":"Property","resultTypeSpecifier":{"localId":"935","type":"IntervalTypeSpecifier","pointType":{"localId":"936","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}}}]},"sort":{"localId":"952","locator":"117:6-118:26","by":[{"localId":"951","locator":"118:6-118:26","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","direction":"asc","type":"ByExpression","expression":{"localId":"947","locator":"118:6-118:26","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"End","signature":[],"operand":{"localId":"948","locator":"118:13-118:26","name":"relevantPeriod","type":"IdentifierRef","resultTypeSpecifier":{"localId":"949","type":"IntervalTypeSpecifier","pointType":{"localId":"950","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}}]}}}},{"localId":"962","locator":"120:4-120:88","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","identifier":"VisitStart","expression":{"localId":"979","locator":"120:16-120:88","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Coalesce","signature":[],"operand":[{"localId":"963","locator":"120:25-120:56","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"965","locator":"120:34-120:56","path":"relevantPeriod","type":"Property","resultTypeSpecifier":{"localId":"968","type":"IntervalTypeSpecifier","pointType":{"localId":"969","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"source":{"localId":"964","locator":"120:34-120:41","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"ObsVisit","type":"QueryLetRef"}}},{"localId":"970","locator":"120:59-120:87","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"972","locator":"120:68-120:87","path":"relevantPeriod","scope":"Visit","type":"Property","resultTypeSpecifier":{"localId":"975","type":"IntervalTypeSpecifier","pointType":{"localId":"976","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}]}},{"localId":"980","locator":"121:4-125:4","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","identifier":"EDVisit","expression":{"localId":"1023","locator":"121:13-125:4","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"Last","signature":[],"source":{"localId":"1018","locator":"121:18-124:26","type":"Query","resultTypeSpecifier":{"localId":"1019","type":"ListTypeSpecifier","elementType":{"localId":"1020","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"source":[{"localId":"981","locator":"121:18-121:78","alias":"LastED","resultTypeSpecifier":{"localId":"990","type":"ListTypeSpecifier","elementType":{"localId":"991","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"984","locator":"121:18-121:71","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","resultTypeSpecifier":{"localId":"988","type":"ListTypeSpecifier","elementType":{"localId":"989","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"codes":{"localId":"983","locator":"121:43-121:70","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Emergency Department Visit","preserve":true,"type":"ValueSetRef"},"include":[],"codeFilter":[],"dateFilter":[],"otherFilter":[]}}],"let":[],"relationship":[],"where":{"localId":"1008","locator":"122:6-122:76","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"And","signature":[],"operand":[{"localId":"1005","locator":"122:39-122:52","type":"In","signature":[],"operand":[{"localId":"999","locator":"122:34-122:37","type":"End","signature":[],"operand":{"localId":"993","locator":"122:12-122:32","path":"relevantPeriod","scope":"LastED","type":"Property","resultTypeSpecifier":{"localId":"996","type":"IntervalTypeSpecifier","pointType":{"localId":"997","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}},{"localId":"1002","locator":"122:39-122:52","lowClosed":true,"highClosed":true,"type":"Interval","resultTypeSpecifier":{"localId":"1003","type":"IntervalTypeSpecifier","pointType":{"localId":"1004","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"low":{"localId":"1001","locator":"122:67-122:76","type":"Subtract","signature":[],"operand":[{"localId":"998","locator":"122:67-122:76","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"VisitStart","type":"QueryLetRef"},{"localId":"1000","locator":"122:39-122:44","resultTypeName":"{urn:hl7-org:elm-types:r1}Quantity","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"998","locator":"122:67-122:76","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"VisitStart","type":"QueryLetRef"}}]},{"localId":"1007","locator":"122:39-122:52","type":"Not","signature":[],"operand":{"localId":"1006","locator":"122:39-122:52","type":"IsNull","signature":[],"operand":{"localId":"998","locator":"122:67-122:76","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"VisitStart","type":"QueryLetRef"}}}]},"sort":{"localId":"1014","locator":"123:6-124:26","by":[{"localId":"1013","locator":"124:6-124:26","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","direction":"asc","type":"ByExpression","expression":{"localId":"1009","locator":"124:6-124:26","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"End","signature":[],"operand":{"localId":"1010","locator":"124:13-124:26","name":"relevantPeriod","type":"IdentifierRef","resultTypeSpecifier":{"localId":"1011","type":"IntervalTypeSpecifier","pointType":{"localId":"1012","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}}]}}}}],"relationship":[],"return":{"localId":"1024","locator":"126:4-127:31","resultTypeSpecifier":{"localId":"1046","type":"IntervalTypeSpecifier","pointType":{"localId":"1047","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"expression":{"localId":"1043","locator":"126:11-127:31","lowClosed":true,"highClosed":true,"type":"Interval","resultTypeSpecifier":{"localId":"1044","type":"IntervalTypeSpecifier","pointType":{"localId":"1045","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"low":{"localId":"1035","locator":"126:20-126:72","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Coalesce","signature":[],"operand":[{"localId":"1025","locator":"126:29-126:59","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"1027","locator":"126:38-126:59","path":"relevantPeriod","type":"Property","resultTypeSpecifier":{"localId":"1030","type":"IntervalTypeSpecifier","pointType":{"localId":"1031","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"source":{"localId":"1026","locator":"126:38-126:44","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"EDVisit","type":"QueryLetRef"}}},{"localId":"1032","locator":"126:62-126:71","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"VisitStart","type":"QueryLetRef"}]},"high":{"localId":"1036","locator":"127:4-127:30","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"End","signature":[],"operand":{"localId":"1038","locator":"127:11-127:30","path":"relevantPeriod","scope":"Visit","type":"Property","resultTypeSpecifier":{"localId":"1041","type":"IntervalTypeSpecifier","pointType":{"localId":"1042","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}}}},"operand":[{"localId":"909","name":"Encounter","operandTypeSpecifier":{"localId":"908","locator":"113:60-113:81","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"703","locator":"90:1-110:31","name":"HospitalizationWithObservationAndOutpatientSurgeryService","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"703","s":[{"value":["/*Hospitalization with Observation and Outpatient Surgery Service returns the total interval from the start of any immediately prior emergency department visit, outpatient surgery visit or observation visit to the discharge of the given encounter.*/\n","define function \"HospitalizationWithObservationAndOutpatientSurgeryService\"(Encounter \"Encounter, Performed\" ):\n  "]},{"r":"900","s":[{"r":"900","s":[{"s":[{"r":"706","s":[{"r":"707","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"708","s":[{"value":["ObsVisit",": "]},{"r":"757","s":[{"value":["Last","("]},{"r":"752","s":[{"s":[{"r":"709","s":[{"r":"712","s":[{"r":"712","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Observation Services\""]}]},{"value":["]"]}]}]},{"value":[" ","LastObs"]}]}]},{"value":["\n  \t\t\t"]},{"r":"742","s":[{"value":["where "]},{"r":"742","s":[{"r":"721","s":[{"r":"720","s":[{"value":["LastObs"]}]},{"value":["."]},{"r":"721","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"742","s":[{"value":["ends "]},{"r":"734","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"726","s":[{"value":["start of "]},{"r":"728","s":[{"r":"727","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"728","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"748","s":[{"value":["sort by \n  \t\t\t"]},{"r":"747","s":[{"r":"743","s":[{"value":["end of "]},{"r":"744","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]},{"value":[",\n  \t"]},{"r":"758","s":[{"value":["VisitStart",": "]},{"r":"775","s":[{"value":["Coalesce","("]},{"r":"759","s":[{"value":["start of "]},{"r":"761","s":[{"r":"760","s":[{"value":["ObsVisit"]}]},{"value":["."]},{"r":"761","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"766","s":[{"value":["start of "]},{"r":"768","s":[{"r":"767","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"768","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]}]},{"value":[",\n  \t"]},{"r":"776","s":[{"value":["EDVisit",": "]},{"r":"819","s":[{"value":["Last","("]},{"r":"814","s":[{"s":[{"r":"777","s":[{"r":"780","s":[{"r":"780","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"804","s":[{"value":["where "]},{"r":"804","s":[{"r":"789","s":[{"r":"788","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"789","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"804","s":[{"value":["ends "]},{"r":"796","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"794","s":[{"value":["VisitStart"]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"810","s":[{"value":["sort by \n  \t\t\t"]},{"r":"809","s":[{"r":"805","s":[{"value":["end of "]},{"r":"806","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]},{"value":[",\n  \t"]},{"r":"820","s":[{"value":["VisitStartWithED",": "]},{"r":"831","s":[{"value":["Coalesce","("]},{"r":"821","s":[{"value":["start of "]},{"r":"823","s":[{"r":"822","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"823","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"828","s":[{"value":["VisitStart"]}]},{"value":[")"]}]}]},{"value":[",\n  \t"]},{"r":"832","s":[{"value":["OutpatientSurgeryVisit",": "]},{"r":"875","s":[{"value":["Last","("]},{"r":"870","s":[{"s":[{"r":"833","s":[{"r":"836","s":[{"r":"836","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Outpatient Surgery Service\""]}]},{"value":["]"]}]}]},{"value":[" ","LastSurgeryOP"]}]}]},{"value":["\n  \t\t\t"]},{"r":"860","s":[{"value":["where "]},{"r":"860","s":[{"r":"845","s":[{"r":"844","s":[{"value":["LastSurgeryOP"]}]},{"value":["."]},{"r":"845","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"860","s":[{"value":["ends "]},{"r":"852","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"850","s":[{"value":["VisitStartWithED"]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"866","s":[{"value":["sort by \n  \t\t\t"]},{"r":"865","s":[{"r":"861","s":[{"value":["end of "]},{"r":"862","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"876","s":[{"value":["return "]},{"r":"895","s":[{"value":["Interval["]},{"r":"887","s":[{"value":["Coalesce","("]},{"r":"877","s":[{"value":["start of "]},{"r":"879","s":[{"r":"878","s":[{"value":["OutpatientSurgeryVisit"]}]},{"value":["."]},{"r":"879","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"884","s":[{"value":["VisitStartWithED"]}]},{"value":[")"]}]},{"value":[", \n  \t"]},{"r":"888","s":[{"value":["end of "]},{"r":"890","s":[{"r":"889","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"890","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["]"]}]}]}]}]}]}}],"resultTypeSpecifier":{"localId":"905","type":"IntervalTypeSpecifier","pointType":{"localId":"906","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"expression":{"localId":"900","locator":"91:3-110:31","type":"Query","resultTypeSpecifier":{"localId":"903","type":"IntervalTypeSpecifier","pointType":{"localId":"904","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"source":[{"localId":"706","locator":"91:3-91:17","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","alias":"Visit","expression":{"localId":"707","locator":"91:3-91:11","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"708","locator":"92:8-96:4","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","identifier":"ObsVisit","expression":{"localId":"757","locator":"92:18-96:4","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"Last","signature":[],"source":{"localId":"752","locator":"92:23-95:26","type":"Query","resultTypeSpecifier":{"localId":"753","type":"ListTypeSpecifier","elementType":{"localId":"754","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"source":[{"localId":"709","locator":"92:23-92:78","alias":"LastObs","resultTypeSpecifier":{"localId":"718","type":"ListTypeSpecifier","elementType":{"localId":"719","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"712","locator":"92:23-92:70","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","resultTypeSpecifier":{"localId":"716","type":"ListTypeSpecifier","elementType":{"localId":"717","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"codes":{"localId":"711","locator":"92:48-92:69","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Observation Services","preserve":true,"type":"ValueSetRef"},"include":[],"codeFilter":[],"dateFilter":[],"otherFilter":[]}}],"let":[],"relationship":[],"where":{"localId":"742","locator":"93:6-93:96","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"And","signature":[],"operand":[{"localId":"739","locator":"93:40-93:53","type":"In","signature":[],"operand":[{"localId":"733","locator":"93:35-93:38","type":"End","signature":[],"operand":{"localId":"721","locator":"93:12-93:33","path":"relevantPeriod","scope":"LastObs","type":"Property","resultTypeSpecifier":{"localId":"724","type":"IntervalTypeSpecifier","pointType":{"localId":"725","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}},{"localId":"736","locator":"93:40-93:53","lowClosed":true,"highClosed":true,"type":"Interval","resultTypeSpecifier":{"localId":"737","type":"IntervalTypeSpecifier","pointType":{"localId":"738","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"low":{"localId":"735","locator":"93:68-93:96","type":"Subtract","signature":[],"operand":[{"localId":"726","locator":"93:68-93:96","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"728","locator":"93:77-93:96","path":"relevantPeriod","scope":"Visit","type":"Property","resultTypeSpecifier":{"localId":"731","type":"IntervalTypeSpecifier","pointType":{"localId":"732","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}},{"localId":"734","locator":"93:40-93:45","resultTypeName":"{urn:hl7-org:elm-types:r1}Quantity","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"726","locator":"93:68-93:96","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"728","locator":"93:77-93:96","path":"relevantPeriod","scope":"Visit","type":"Property","resultTypeSpecifier":{"localId":"731","type":"IntervalTypeSpecifier","pointType":{"localId":"732","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}}]},{"localId":"741","locator":"93:40-93:53","type":"Not","signature":[],"operand":{"localId":"740","locator":"93:40-93:53","type":"IsNull","signature":[],"operand":{"localId":"726","locator":"93:68-93:96","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"728","locator":"93:77-93:96","path":"relevantPeriod","scope":"Visit","type":"Property","resultTypeSpecifier":{"localId":"731","type":"IntervalTypeSpecifier","pointType":{"localId":"732","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}}}]},"sort":{"localId":"748","locator":"94:6-95:26","by":[{"localId":"747","locator":"95:6-95:26","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","direction":"asc","type":"ByExpression","expression":{"localId":"743","locator":"95:6-95:26","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"End","signature":[],"operand":{"localId":"744","locator":"95:13-95:26","name":"relevantPeriod","type":"IdentifierRef","resultTypeSpecifier":{"localId":"745","type":"IntervalTypeSpecifier","pointType":{"localId":"746","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}}]}}}},{"localId":"758","locator":"97:4-97:88","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","identifier":"VisitStart","expression":{"localId":"775","locator":"97:16-97:88","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Coalesce","signature":[],"operand":[{"localId":"759","locator":"97:25-97:56","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"761","locator":"97:34-97:56","path":"relevantPeriod","type":"Property","resultTypeSpecifier":{"localId":"764","type":"IntervalTypeSpecifier","pointType":{"localId":"765","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"source":{"localId":"760","locator":"97:34-97:41","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"ObsVisit","type":"QueryLetRef"}}},{"localId":"766","locator":"97:59-97:87","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"768","locator":"97:68-97:87","path":"relevantPeriod","scope":"Visit","type":"Property","resultTypeSpecifier":{"localId":"771","type":"IntervalTypeSpecifier","pointType":{"localId":"772","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}]}},{"localId":"776","locator":"98:4-102:4","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","identifier":"EDVisit","expression":{"localId":"819","locator":"98:13-102:4","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"Last","signature":[],"source":{"localId":"814","locator":"98:18-101:26","type":"Query","resultTypeSpecifier":{"localId":"815","type":"ListTypeSpecifier","elementType":{"localId":"816","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"source":[{"localId":"777","locator":"98:18-98:78","alias":"LastED","resultTypeSpecifier":{"localId":"786","type":"ListTypeSpecifier","elementType":{"localId":"787","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"780","locator":"98:18-98:71","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","resultTypeSpecifier":{"localId":"784","type":"ListTypeSpecifier","elementType":{"localId":"785","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"codes":{"localId":"779","locator":"98:43-98:70","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Emergency Department Visit","preserve":true,"type":"ValueSetRef"},"include":[],"codeFilter":[],"dateFilter":[],"otherFilter":[]}}],"let":[],"relationship":[],"where":{"localId":"804","locator":"99:6-99:76","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"And","signature":[],"operand":[{"localId":"801","locator":"99:39-99:52","type":"In","signature":[],"operand":[{"localId":"795","locator":"99:34-99:37","type":"End","signature":[],"operand":{"localId":"789","locator":"99:12-99:32","path":"relevantPeriod","scope":"LastED","type":"Property","resultTypeSpecifier":{"localId":"792","type":"IntervalTypeSpecifier","pointType":{"localId":"793","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}},{"localId":"798","locator":"99:39-99:52","lowClosed":true,"highClosed":true,"type":"Interval","resultTypeSpecifier":{"localId":"799","type":"IntervalTypeSpecifier","pointType":{"localId":"800","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"low":{"localId":"797","locator":"99:67-99:76","type":"Subtract","signature":[],"operand":[{"localId":"794","locator":"99:67-99:76","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"VisitStart","type":"QueryLetRef"},{"localId":"796","locator":"99:39-99:44","resultTypeName":"{urn:hl7-org:elm-types:r1}Quantity","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"794","locator":"99:67-99:76","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"VisitStart","type":"QueryLetRef"}}]},{"localId":"803","locator":"99:39-99:52","type":"Not","signature":[],"operand":{"localId":"802","locator":"99:39-99:52","type":"IsNull","signature":[],"operand":{"localId":"794","locator":"99:67-99:76","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"VisitStart","type":"QueryLetRef"}}}]},"sort":{"localId":"810","locator":"100:6-101:26","by":[{"localId":"809","locator":"101:6-101:26","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","direction":"asc","type":"ByExpression","expression":{"localId":"805","locator":"101:6-101:26","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"End","signature":[],"operand":{"localId":"806","locator":"101:13-101:26","name":"relevantPeriod","type":"IdentifierRef","resultTypeSpecifier":{"localId":"807","type":"IntervalTypeSpecifier","pointType":{"localId":"808","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}}]}}}},{"localId":"820","locator":"103:4-103:74","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","identifier":"VisitStartWithED","expression":{"localId":"831","locator":"103:22-103:74","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Coalesce","signature":[],"operand":[{"localId":"821","locator":"103:31-103:61","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"823","locator":"103:40-103:61","path":"relevantPeriod","type":"Property","resultTypeSpecifier":{"localId":"826","type":"IntervalTypeSpecifier","pointType":{"localId":"827","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"source":{"localId":"822","locator":"103:40-103:46","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"EDVisit","type":"QueryLetRef"}}},{"localId":"828","locator":"103:64-103:73","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"VisitStart","type":"QueryLetRef"}]}},{"localId":"832","locator":"104:4-108:4","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","identifier":"OutpatientSurgeryVisit","expression":{"localId":"875","locator":"104:28-108:4","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"Last","signature":[],"source":{"localId":"870","locator":"104:33-107:26","type":"Query","resultTypeSpecifier":{"localId":"871","type":"ListTypeSpecifier","elementType":{"localId":"872","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"source":[{"localId":"833","locator":"104:33-104:100","alias":"LastSurgeryOP","resultTypeSpecifier":{"localId":"842","type":"ListTypeSpecifier","elementType":{"localId":"843","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"836","locator":"104:33-104:86","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","resultTypeSpecifier":{"localId":"840","type":"ListTypeSpecifier","elementType":{"localId":"841","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"codes":{"localId":"835","locator":"104:58-104:85","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Outpatient Surgery Service","preserve":true,"type":"ValueSetRef"},"include":[],"codeFilter":[],"dateFilter":[],"otherFilter":[]}}],"let":[],"relationship":[],"where":{"localId":"860","locator":"105:6-105:89","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"And","signature":[],"operand":[{"localId":"857","locator":"105:46-105:59","type":"In","signature":[],"operand":[{"localId":"851","locator":"105:41-105:44","type":"End","signature":[],"operand":{"localId":"845","locator":"105:12-105:39","path":"relevantPeriod","scope":"LastSurgeryOP","type":"Property","resultTypeSpecifier":{"localId":"848","type":"IntervalTypeSpecifier","pointType":{"localId":"849","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}},{"localId":"854","locator":"105:46-105:59","lowClosed":true,"highClosed":true,"type":"Interval","resultTypeSpecifier":{"localId":"855","type":"IntervalTypeSpecifier","pointType":{"localId":"856","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"low":{"localId":"853","locator":"105:74-105:89","type":"Subtract","signature":[],"operand":[{"localId":"850","locator":"105:74-105:89","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"VisitStartWithED","type":"QueryLetRef"},{"localId":"852","locator":"105:46-105:51","resultTypeName":"{urn:hl7-org:elm-types:r1}Quantity","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"850","locator":"105:74-105:89","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"VisitStartWithED","type":"QueryLetRef"}}]},{"localId":"859","locator":"105:46-105:59","type":"Not","signature":[],"operand":{"localId":"858","locator":"105:46-105:59","type":"IsNull","signature":[],"operand":{"localId":"850","locator":"105:74-105:89","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"VisitStartWithED","type":"QueryLetRef"}}}]},"sort":{"localId":"866","locator":"106:6-107:26","by":[{"localId":"865","locator":"107:6-107:26","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","direction":"asc","type":"ByExpression","expression":{"localId":"861","locator":"107:6-107:26","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"End","signature":[],"operand":{"localId":"862","locator":"107:13-107:26","name":"relevantPeriod","type":"IdentifierRef","resultTypeSpecifier":{"localId":"863","type":"IntervalTypeSpecifier","pointType":{"localId":"864","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}}]}}}}],"relationship":[],"return":{"localId":"876","locator":"109:4-110:31","resultTypeSpecifier":{"localId":"898","type":"IntervalTypeSpecifier","pointType":{"localId":"899","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"expression":{"localId":"895","locator":"109:11-110:31","lowClosed":true,"highClosed":true,"type":"Interval","resultTypeSpecifier":{"localId":"896","type":"IntervalTypeSpecifier","pointType":{"localId":"897","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"low":{"localId":"887","locator":"109:20-109:93","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Coalesce","signature":[],"operand":[{"localId":"877","locator":"109:29-109:74","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"879","locator":"109:38-109:74","path":"relevantPeriod","type":"Property","resultTypeSpecifier":{"localId":"882","type":"IntervalTypeSpecifier","pointType":{"localId":"883","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"source":{"localId":"878","locator":"109:38-109:59","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"OutpatientSurgeryVisit","type":"QueryLetRef"}}},{"localId":"884","locator":"109:77-109:92","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"VisitStartWithED","type":"QueryLetRef"}]},"high":{"localId":"888","locator":"110:4-110:30","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"End","signature":[],"operand":{"localId":"890","locator":"110:11-110:30","path":"relevantPeriod","scope":"Visit","type":"Property","resultTypeSpecifier":{"localId":"893","type":"IntervalTypeSpecifier","pointType":{"localId":"894","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}}}},"operand":[{"localId":"705","name":"Encounter","operandTypeSpecifier":{"localId":"704","locator":"90:87-90:108","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"1055","locator":"130:1-131:61","resultTypeName":"{urn:hl7-org:elm-types:r1}Integer","name":"HospitalizationWithObservationLengthofStay","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"1055","s":[{"value":["/*Hospitalization with Observation Length of Stay returns the length in days from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\n","define function \"HospitalizationWithObservationLengthofStay\"(Encounter \"Encounter, Performed\" ):\n  "]},{"r":"1062","s":[{"r":"1062","s":[{"value":["\"LengthInDays\"","("]},{"r":"1059","s":[{"value":["\"HospitalizationWithObservation\"","("]},{"r":"1058","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"1062","locator":"131:3-131:61","resultTypeName":"{urn:hl7-org:elm-types:r1}Integer","name":"LengthInDays","type":"FunctionRef","signature":[],"operand":[{"localId":"1059","locator":"131:18-131:60","name":"HospitalizationWithObservation","type":"FunctionRef","resultTypeSpecifier":{"localId":"1060","type":"IntervalTypeSpecifier","pointType":{"localId":"1061","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"signature":[],"operand":[{"localId":"1058","locator":"131:51-131:59","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"Encounter","type":"OperandRef"}]}]},"operand":[{"localId":"1057","name":"Encounter","operandTypeSpecifier":{"localId":"1056","locator":"130:72-130:93","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"234","locator":"20:1-22:83","name":"Inpatient Encounter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"234","s":[{"value":["","define ","\"Inpatient Encounter\"",":\n  "]},{"r":"257","s":[{"s":[{"r":"235","s":[{"r":"238","s":[{"r":"238","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Encounter Inpatient\""]}]},{"value":["]"]}]}]},{"value":[" ","EncounterInpatient"]}]}]},{"value":["\n    "]},{"r":"256","s":[{"value":["where "]},{"r":"256","s":[{"r":"247","s":[{"r":"246","s":[{"value":["EncounterInpatient"]}]},{"value":["."]},{"r":"247","s":[{"value":["relevantPeriod"]}]}]},{"r":"256","value":[" ","ends during day of"," "]},{"r":"252","s":[{"value":["\"Measurement Period\""]}]}]}]}]}]}}],"resultTypeSpecifier":{"localId":"260","type":"ListTypeSpecifier","elementType":{"localId":"261","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"257","locator":"21:3-22:83","type":"Query","resultTypeSpecifier":{"localId":"258","type":"ListTypeSpecifier","elementType":{"localId":"259","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"source":[{"localId":"235","locator":"21:3-21:68","alias":"EncounterInpatient","resultTypeSpecifier":{"localId":"244","type":"ListTypeSpecifier","elementType":{"localId":"245","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"238","locator":"21:3-21:49","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","resultTypeSpecifier":{"localId":"242","type":"ListTypeSpecifier","elementType":{"localId":"243","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"codes":{"localId":"237","locator":"21:28-21:48","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Encounter Inpatient","preserve":true,"type":"ValueSetRef"},"include":[],"codeFilter":[],"dateFilter":[],"otherFilter":[]}}],"let":[],"relationship":[],"where":{"localId":"256","locator":"22:5-22:83","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","precision":"Day","type":"In","signature":[],"operand":[{"localId":"255","locator":"22:45-22:48","type":"End","signature":[],"operand":{"localId":"247","locator":"22:11-22:43","path":"relevantPeriod","scope":"EncounterInpatient","type":"Property","resultTypeSpecifier":{"localId":"250","type":"IntervalTypeSpecifier","pointType":{"localId":"251","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}},{"localId":"252","locator":"22:64-22:83","name":"Measurement Period","type":"ParameterRef","resultTypeSpecifier":{"localId":"253","type":"IntervalTypeSpecifier","pointType":{"localId":"254","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]}}},{"localId":"1193","locator":"162:1-165:24","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"Latest","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"1193","s":[{"value":["/*Given an interval, return the ending point if the interval has an ending boundary specified, otherwise, return the starting point*/\n","define function \"Latest\"(period Interval\u003cDateTime\u003e ):\n  "]},{"r":"1199","s":[{"r":"1199","s":[{"value":["if "]},{"r":"1203","s":[{"value":["( "]},{"r":"1203","s":[{"value":["HasEnd","("]},{"r":"1200","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":[" then \n  "]},{"r":"1204","s":[{"value":["end of "]},{"r":"1205","s":[{"value":["period"]}]}]},{"value":[" \n    else "]},{"r":"1208","s":[{"value":["start of "]},{"r":"1209","s":[{"value":["period"]}]}]}]}]}]}}],"expression":{"localId":"1199","locator":"163:3-165:24","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"If","condition":{"localId":"1203","locator":"163:6-163:22","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","name":"HasEnd","type":"FunctionRef","signature":[],"operand":[{"localId":"1200","locator":"163:15-163:20","name":"period","type":"OperandRef","resultTypeSpecifier":{"localId":"1201","type":"IntervalTypeSpecifier","pointType":{"localId":"1202","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},"then":{"localId":"1204","locator":"164:3-164:15","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"End","signature":[],"operand":{"localId":"1205","locator":"164:10-164:15","name":"period","type":"OperandRef","resultTypeSpecifier":{"localId":"1206","type":"IntervalTypeSpecifier","pointType":{"localId":"1207","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}},"else":{"localId":"1208","locator":"165:10-165:24","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"1209","locator":"165:19-165:24","name":"period","type":"OperandRef","resultTypeSpecifier":{"localId":"1210","type":"IntervalTypeSpecifier","pointType":{"localId":"1211","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}},"operand":[{"localId":"1198","name":"period","operandTypeSpecifier":{"localId":"1194","locator":"162:33-162:50","type":"IntervalTypeSpecifier","resultTypeSpecifier":{"localId":"1196","type":"IntervalTypeSpecifier","pointType":{"localId":"1197","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"pointType":{"localId":"1195","locator":"162:42-162:49","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"1231","locator":"174:1-175:48","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"LatestOf","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"1231","s":[{"value":["/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the ending point of the period if the period has an ending boundary specified, otherwise returns the starting point of the interval*/\n","define function \"LatestOf\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  "]},{"r":"1246","s":[{"r":"1246","s":[{"value":["Latest","("]},{"r":"1243","s":[{"value":["NormalizeInterval","("]},{"r":"1239","s":[{"value":["pointInTime"]}]},{"value":[", "]},{"r":"1240","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"1246","locator":"175:3-175:48","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"Latest","type":"FunctionRef","signature":[],"operand":[{"localId":"1243","locator":"175:10-175:47","name":"NormalizeInterval","type":"FunctionRef","resultTypeSpecifier":{"localId":"1244","type":"IntervalTypeSpecifier","pointType":{"localId":"1245","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"signature":[],"operand":[{"localId":"1239","locator":"175:28-175:38","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"pointInTime","type":"OperandRef"},{"localId":"1240","locator":"175:41-175:46","name":"period","type":"OperandRef","resultTypeSpecifier":{"localId":"1241","type":"IntervalTypeSpecifier","pointType":{"localId":"1242","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]}]},"operand":[{"localId":"1233","name":"pointInTime","operandTypeSpecifier":{"localId":"1232","locator":"174:40-174:47","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"localId":"1238","name":"period","operandTypeSpecifier":{"localId":"1234","locator":"174:57-174:74","type":"IntervalTypeSpecifier","resultTypeSpecifier":{"localId":"1236","type":"IntervalTypeSpecifier","pointType":{"localId":"1237","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"pointType":{"localId":"1235","locator":"174:66-174:73","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"285","locator":"33:1-34:60","resultTypeName":"{urn:hl7-org:elm-types:r1}Integer","name":"LengthInDays","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"285","s":[{"value":["/*calculates the difference in calendar days between the start and end of the given interval.*/\n","define function \"LengthInDays\"(Value Interval\u003cDateTime\u003e ):\n  "]},{"r":"291","s":[{"r":"291","s":[{"value":["difference in days between "]},{"r":"292","s":[{"value":["start of "]},{"r":"293","s":[{"value":["Value"]}]}]},{"value":[" and "]},{"r":"296","s":[{"value":["end of "]},{"r":"297","s":[{"value":["Value"]}]}]}]}]}]}}],"expression":{"localId":"291","locator":"34:3-34:60","resultTypeName":"{urn:hl7-org:elm-types:r1}Integer","precision":"Day","type":"DifferenceBetween","signature":[],"operand":[{"localId":"292","locator":"34:30-34:43","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"293","locator":"34:39-34:43","name":"Value","type":"OperandRef","resultTypeSpecifier":{"localId":"294","type":"IntervalTypeSpecifier","pointType":{"localId":"295","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}},{"localId":"296","locator":"34:49-34:60","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"End","signature":[],"operand":{"localId":"297","locator":"34:56-34:60","name":"Value","type":"OperandRef","resultTypeSpecifier":{"localId":"298","type":"IntervalTypeSpecifier","pointType":{"localId":"299","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}]},"operand":[{"localId":"290","name":"Value","operandTypeSpecifier":{"localId":"286","locator":"33:38-33:55","type":"IntervalTypeSpecifier","resultTypeSpecifier":{"localId":"288","type":"IntervalTypeSpecifier","pointType":{"localId":"289","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"pointType":{"localId":"287","locator":"33:47-33:54","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"1111","locator":"142:1-145:35","name":"NormalizeInterval","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"1111","s":[{"value":["/*Given a datetime and a period, returns the period (if a period is provided) or the interval beginning and ending on the datetime (if a datetime is provided)*/\n","define function \"NormalizeInterval\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  "]},{"r":"1119","s":[{"r":"1119","s":[{"value":["if "]},{"r":"1122","s":[{"r":"1120","s":[{"value":["pointInTime"]}]},{"value":[" is not null"]}]},{"value":[" then "]},{"r":"1125","s":[{"value":["Interval["]},{"r":"1123","s":[{"value":["pointInTime"]}]},{"value":[", "]},{"r":"1124","s":[{"value":["pointInTime"]}]},{"value":["]"]}]},{"value":["\n    else "]},{"r":"1128","s":[{"value":["if "]},{"r":"1133","s":[{"r":"1129","s":[{"value":["period"]}]},{"value":[" is not null"]}]},{"value":[" then "]},{"r":"1134","s":[{"value":["period"]}]},{"value":[" \n    else "]},{"r":"1137","s":[{"r":"1138","value":["null"," as "]},{"r":"1139","s":[{"value":["Interval\u003c"]},{"r":"1140","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}]}]}]}]}}],"resultTypeSpecifier":{"localId":"1151","type":"IntervalTypeSpecifier","pointType":{"localId":"1152","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"expression":{"localId":"1119","locator":"143:3-145:35","type":"If","resultTypeSpecifier":{"localId":"1149","type":"IntervalTypeSpecifier","pointType":{"localId":"1150","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"condition":{"localId":"1122","locator":"143:6-143:28","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"Not","signature":[],"operand":{"localId":"1121","locator":"143:6-143:28","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"IsNull","signature":[],"operand":{"localId":"1120","locator":"143:6-143:16","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"pointInTime","type":"OperandRef"}}},"then":{"localId":"1125","locator":"143:35-143:68","lowClosed":true,"highClosed":true,"type":"Interval","resultTypeSpecifier":{"localId":"1126","type":"IntervalTypeSpecifier","pointType":{"localId":"1127","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"low":{"localId":"1123","locator":"143:44-143:54","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"pointInTime","type":"OperandRef"},"high":{"localId":"1124","locator":"143:57-143:67","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"pointInTime","type":"OperandRef"}},"else":{"localId":"1128","locator":"144:10-145:35","type":"If","resultTypeSpecifier":{"localId":"1145","type":"IntervalTypeSpecifier","pointType":{"localId":"1146","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"condition":{"localId":"1133","locator":"144:13-144:30","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"Not","signature":[],"operand":{"localId":"1132","locator":"144:13-144:30","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"IsNull","signature":[],"operand":{"localId":"1129","locator":"144:13-144:18","name":"period","type":"OperandRef","resultTypeSpecifier":{"localId":"1130","type":"IntervalTypeSpecifier","pointType":{"localId":"1131","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}},"then":{"localId":"1134","locator":"144:37-144:42","name":"period","type":"OperandRef","resultTypeSpecifier":{"localId":"1135","type":"IntervalTypeSpecifier","pointType":{"localId":"1136","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}},"else":{"localId":"1137","locator":"145:10-145:35","strict":false,"type":"As","resultTypeSpecifier":{"localId":"1143","type":"IntervalTypeSpecifier","pointType":{"localId":"1144","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"signature":[],"operand":{"localId":"1138","locator":"145:10-145:13","resultTypeName":"{urn:hl7-org:elm-types:r1}Any","type":"Null"},"asTypeSpecifier":{"localId":"1139","locator":"145:18-145:35","type":"IntervalTypeSpecifier","resultTypeSpecifier":{"localId":"1141","type":"IntervalTypeSpecifier","pointType":{"localId":"1142","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"pointType":{"localId":"1140","locator":"145:27-145:34","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}},"operand":[{"localId":"1113","name":"pointInTime","operandTypeSpecifier":{"localId":"1112","locator":"142:49-142:56","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"localId":"1118","name":"period","operandTypeSpecifier":{"localId":"1114","locator":"142:66-142:83","type":"IntervalTypeSpecifier","resultTypeSpecifier":{"localId":"1116","type":"IntervalTypeSpecifier","pointType":{"localId":"1117","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"pointType":{"localId":"1115","locator":"142:75-142:82","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"220","locator":"15:1-15:15","name":"Patient","context":"Patient","expression":{"localId":"221","type":"SingletonFrom","signature":[],"operand":{"localId":"219","locator":"15:1-15:15","dataType":"{urn:healthit-gov:qdm:v5_6}Patient","templateId":"Patient","type":"Retrieve","include":[],"codeFilter":[],"dateFilter":[],"otherFilter":[]}}},{"localId":"262","locator":"29:1-30:62","name":"ToDateInterval","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","t":[{"name":"description","value":"Returns an interval of date values extracted from the input interval of date-time values"},{"name":"comment","value":"This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability."}],"s":{"r":"262","s":[{"value":["/*@description: Returns an interval of date values extracted from the input interval of date-time values\n@comment: This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability.*/\n","define function \"ToDateInterval\"(period Interval\u003cDateTime\u003e ):\n  "]},{"r":"278","s":[{"r":"278","s":[{"value":["Interval["]},{"r":"268","s":[{"value":["date from "]},{"r":"269","s":[{"value":["start of "]},{"r":"270","s":[{"value":["period"]}]}]}]},{"value":[", "]},{"r":"273","s":[{"value":["date from "]},{"r":"274","s":[{"value":["end of "]},{"r":"275","s":[{"value":["period"]}]}]}]},{"value":["]"]}]}]}]}}],"resultTypeSpecifier":{"localId":"283","type":"IntervalTypeSpecifier","pointType":{"localId":"284","name":"{urn:hl7-org:elm-types:r1}Date","type":"NamedTypeSpecifier"}},"expression":{"localId":"278","locator":"30:3-30:62","lowClosed":true,"highClosed":true,"type":"Interval","resultTypeSpecifier":{"localId":"281","type":"IntervalTypeSpecifier","pointType":{"localId":"282","name":"{urn:hl7-org:elm-types:r1}Date","type":"NamedTypeSpecifier"}},"low":{"localId":"268","locator":"30:12-30:36","resultTypeName":"{urn:hl7-org:elm-types:r1}Date","type":"DateFrom","signature":[],"operand":{"localId":"269","locator":"30:22-30:36","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"270","locator":"30:31-30:36","name":"period","type":"OperandRef","resultTypeSpecifier":{"localId":"271","type":"IntervalTypeSpecifier","pointType":{"localId":"272","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}},"high":{"localId":"273","locator":"30:39-30:61","resultTypeName":"{urn:hl7-org:elm-types:r1}Date","type":"DateFrom","signature":[],"operand":{"localId":"274","locator":"30:49-30:61","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"End","signature":[],"operand":{"localId":"275","locator":"30:56-30:61","name":"period","type":"OperandRef","resultTypeSpecifier":{"localId":"276","type":"IntervalTypeSpecifier","pointType":{"localId":"277","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}}},"operand":[{"localId":"267","name":"period","operandTypeSpecifier":{"localId":"263","locator":"29:41-29:58","type":"IntervalTypeSpecifier","resultTypeSpecifier":{"localId":"265","type":"IntervalTypeSpecifier","pointType":{"localId":"266","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"pointType":{"localId":"264","locator":"29:50-29:57","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]}]}}},"elm_annotations":{"statements":[{"children":[{"children":[{"children":[{"text":"define \"ED Encounter\":\n  "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"227"}],"ref_id":"224"}],"define_name":"ED Encounter"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return the starting point if the interval has a starting boundary specified, otherwise, return the ending point*/\ndefine function \"Earliest\"(period Interval\u003cDateTime\u003e ):\n  "}]},{"children":[{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"HasStart("}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"1219"},{"children":[{"text":")"}]}],"ref_id":"1222"},{"children":[{"text":")"}]}],"ref_id":"1222"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"1224"}],"ref_id":"1223"},{"children":[{"text":" \n    else \n  "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"1228"}],"ref_id":"1227"}],"node_type":"If","ref_id":"1218"}],"node_type":"If","ref_id":"1218"}],"ref_id":"1212"}],"define_name":"Earliest"},{"children":[{"children":[{"children":[{"text":"/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the starting point of the period if the period has a starting boundary specified, otherwise returns the ending point of the period*/\ndefine function \"EarliestOf\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Earliest("}]},{"children":[{"children":[{"text":"NormalizeInterval("}]},{"children":[{"children":[{"text":"pointInTime"}]}],"node_type":"OperandRef","ref_id":"1255"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"1256"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"1259"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"1262"}],"node_type":"FunctionRef","ref_id":"1262"}],"ref_id":"1247"}],"define_name":"EarliestOf"},{"children":[{"children":[{"children":[{"text":"/*Returns the arrival time in the ED for the encounter.*/\ndefine function \"EmergencyDepartmentArrivalTime\"(Encounter \"Encounter, Performed\" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"\"HospitalizationLocations\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"400"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"401"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"401"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"399"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"HospitalLocation"}]}],"ref_id":"408"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"409"}],"ref_id":"409"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}],"ref_id":"410"}],"ref_id":"411"}],"ref_id":"411"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"413"}],"node_type":"Start","ref_id":"412"}],"ref_id":"416"}],"ref_id":"417"}],"ref_id":"421"},{"children":[{"text":"\n  )"}]}],"ref_id":"426"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"427"}],"node_type":"Property","ref_id":"427"}],"node_type":"Start","ref_id":"398"}],"node_type":"Start","ref_id":"398"}],"ref_id":"395"}],"define_name":"EmergencyDepartmentArrivalTime"},{"children":[{"children":[{"children":[{"text":"/*First Inpatient Intensive Care Unit returns the first intensive care unit for the given encounter, without considering any immediately prior emergency department visit.*/\ndefine function \"FirstInpatientIntensiveCareUnit\"(Encounter \"Encounter, Performed\" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"1067"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"node_type":"Property","ref_id":"1068"}],"node_type":"Property","ref_id":"1068"},{"children":[{"text":")"}]}],"node_type":"Property","ref_id":"1068"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"1066"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"HospitalLocation"}]}],"ref_id":"1078"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"1079"}],"ref_id":"1079"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Intensive Care Unit\""}]}],"ref_id":"1080"}],"node_type":"InValueSet","ref_id":"1081"},{"children":[{"text":"\n        and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"HospitalLocation"}]}],"ref_id":"1082"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"1083"}],"node_type":"Property","ref_id":"1083"},{"children":[{"text":" during "}],"node_type":"IncludedIn","ref_id":"1094"},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"1088"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"1089"}],"node_type":"Property","ref_id":"1089"}],"node_type":"IncludedIn","ref_id":"1094"}],"ref_id":"1077"}],"ref_id":"1077"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"1097"}],"node_type":"Start","ref_id":"1096"}],"ref_id":"1100"}],"ref_id":"1101"}],"ref_id":"1105"},{"children":[{"text":"\n  )"}]}],"node_type":"First","ref_id":"1110"}],"node_type":"First","ref_id":"1110"}],"ref_id":"1063"}],"define_name":"FirstInpatientIntensiveCareUnit"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return true if the interval has an ending boundary specified (i.e. the end of the interval is not null and not the maximum DateTime value)*/\ndefine function \"HasEnd\"(period Interval\u003cDateTime\u003e ):\n  "}]},{"children":[{"children":[{"children":[{"text":"not "}]},{"children":[{"children":[{"text":"( \n    "}]},{"children":[{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"1182"}],"node_type":"End","ref_id":"1181"},{"children":[{"text":" is null"}]}],"node_type":"IsNull","ref_id":"1185"},{"children":[{"text":"\n      or \n      "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"1188"}],"node_type":"End","ref_id":"1187"},{"children":[{"text":" = "}]},{"children":[{"children":[{"text":"maximum "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"1191"}],"node_type":"MaxValue","ref_id":"1192"}],"node_type":"Equal","ref_id":"1186"}],"node_type":"Or","ref_id":"1180"},{"children":[{"text":"\n  )"}]}],"node_type":"Or","ref_id":"1180"}],"node_type":"Not","ref_id":"1179"}],"node_type":"Not","ref_id":"1179"}],"ref_id":"1173"}],"define_name":"HasEnd"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return true if the interval has a starting boundary specified (i.e. the start of the interval is not null and not the minimum DateTime value)*/\ndefine function \"HasStart\"(period Interval\u003cDateTime\u003e ):\n  "}]},{"children":[{"children":[{"children":[{"text":"not "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"1162"}],"node_type":"Start","ref_id":"1161"},{"children":[{"text":" is null"}]}],"node_type":"IsNull","ref_id":"1165"},{"children":[{"text":"\n      or "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"1168"}],"node_type":"Start","ref_id":"1167"},{"children":[{"text":" = "}]},{"children":[{"children":[{"text":"minimum "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"1171"}],"node_type":"MinValue","ref_id":"1172"}],"node_type":"Equal","ref_id":"1166"}],"node_type":"Or","ref_id":"1160"},{"children":[{"text":"\n  )"}]}],"node_type":"Or","ref_id":"1160"}],"node_type":"Not","ref_id":"1159"}],"node_type":"Not","ref_id":"1159"}],"ref_id":"1153"}],"define_name":"HasStart"},{"children":[{"children":[{"children":[{"text":"/*Returns admission time for an encounter or for immediately prior emergency department visit.*/\ndefine function \"HospitalAdmissionTime\"(Encounter \"Encounter, Performed\" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"\"Hospitalization\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"436"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"440"}],"node_type":"Start","ref_id":"435"}],"node_type":"Start","ref_id":"435"}],"ref_id":"432"}],"define_name":"HospitalAdmissionTime"},{"children":[{"children":[{"children":[{"text":"/*Returns earliest arrival time for an encounter including any prior ED visit.*/\ndefine function \"HospitalArrivalTime\"(Encounter \"Encounter, Performed\" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"\"HospitalizationLocations\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"535"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"536"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"536"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"534"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"544"}],"node_type":"Start","ref_id":"543"}],"ref_id":"547"}],"ref_id":"548"}],"ref_id":"552"},{"children":[{"text":"\n  )"}]}],"ref_id":"557"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"558"}],"node_type":"Property","ref_id":"558"}],"node_type":"Start","ref_id":"533"}],"node_type":"Start","ref_id":"533"}],"ref_id":"530"}],"define_name":"HospitalArrivalTime"},{"children":[{"children":[{"children":[{"text":"/*Returns the latest departure time for encounter including any prior ED visit.*/\ndefine function \"HospitalDepartureTime\"(Encounter \"Encounter, Performed\" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"\"HospitalizationLocations\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"665"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"666"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"666"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"664"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"674"}],"node_type":"Start","ref_id":"673"}],"ref_id":"677"}],"ref_id":"678"}],"ref_id":"682"},{"children":[{"text":"\n  )"}]}],"ref_id":"687"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"688"}],"node_type":"Property","ref_id":"688"}],"node_type":"End","ref_id":"663"}],"node_type":"End","ref_id":"663"}],"ref_id":"660"}],"define_name":"HospitalDepartureTime"},{"children":[{"children":[{"children":[{"text":"/*Hospital Discharge Time returns the discharge time for an encounter*/\ndefine function \"HospitalDischargeTime\"(Encounter \"Encounter, Performed\" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"697"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"698"}],"node_type":"Property","ref_id":"698"}],"node_type":"End","ref_id":"696"}],"node_type":"End","ref_id":"696"}],"ref_id":"693"}],"define_name":"HospitalDischargeTime"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization returns the total interval for admission to discharge for the given encounter, or for the admission of any immediately prior emergency department visit to the discharge of the given encounter.*/\ndefine function \"Hospitalization\"(Encounter \"Encounter, Performed\" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"564"},{"children":[{"text":" Visit"}]}],"ref_id":"563"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"569"}],"node_type":"Retrieve","ref_id":"569"},{"children":[{"text":" LastED"}]}],"ref_id":"566"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"577"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"578"}],"node_type":"Property","ref_id":"578"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"591"},{"children":[{"text":" or less on or before"}]}],"ref_id":"599"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"584"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"585"}],"node_type":"Property","ref_id":"585"}],"node_type":"Start","ref_id":"583"}],"ref_id":"599"}],"ref_id":"599"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"601"}],"node_type":"End","ref_id":"600"}],"ref_id":"604"}],"ref_id":"605"}],"ref_id":"609"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"614"}],"ref_id":"565"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"617"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"618"}],"node_type":"Property","ref_id":"618"}],"node_type":"Start","ref_id":"616"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"624"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"625"}],"node_type":"Property","ref_id":"625"}],"node_type":"Start","ref_id":"623"},{"children":[{"text":")"}]}],"ref_id":"632"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"634"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"635"}],"node_type":"Property","ref_id":"635"}],"ref_id":"633"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"640"}],"ref_id":"615"}],"node_type":"Query","ref_id":"645"}],"node_type":"Query","ref_id":"645"}],"ref_id":"437"}],"define_name":"Hospitalization"},{"children":[{"children":[{"children":[{"text":"/*Returns the length of stay in days (i.e. the number of days between admission and discharge) for the given encounter, or from the admission of any immediately prior emergency department visit to the discharge of the encounter*/\ndefine function \"HospitalizationLengthofStay\"(Encounter \"Encounter, Performed\" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"LengthInDays("}]},{"children":[{"children":[{"text":"\"Hospitalization\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"655"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"656"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"659"}],"node_type":"FunctionRef","ref_id":"659"}],"ref_id":"652"}],"define_name":"HospitalizationLengthofStay"},{"children":[{"children":[{"children":[{"text":"/*returns list of all locations within an encounter, including locations for immediately prior ED visit.*/\ndefine function \"HospitalizationLocations\"(Encounter \"Encounter, Performed\" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"304"},{"children":[{"text":" Visit"}]}],"ref_id":"303"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"309"}],"node_type":"Retrieve","ref_id":"309"},{"children":[{"text":" LastED"}]}],"ref_id":"306"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"317"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"318"}],"node_type":"Property","ref_id":"318"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"331"},{"children":[{"text":" or less on or before"}]}],"ref_id":"339"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"324"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"325"}],"node_type":"Property","ref_id":"325"}],"node_type":"Start","ref_id":"323"}],"ref_id":"339"}],"ref_id":"339"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"341"}],"node_type":"End","ref_id":"340"}],"ref_id":"344"}],"ref_id":"345"}],"ref_id":"349"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"354"}],"ref_id":"305"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"node_type":"QueryLetRef","ref_id":"357"},{"children":[{"text":" is null"}]}],"ref_id":"358"},{"children":[{"text":" then "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"359"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"ref_id":"360"}],"ref_id":"360"},{"children":[{"text":" \n      else "}]},{"children":[{"children":[{"text":"flatten "}]},{"children":[{"children":[{"text":"{ "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"367"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"ref_id":"368"}],"ref_id":"368"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"373"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"ref_id":"374"}],"ref_id":"374"},{"children":[{"text":" }"}]}],"node_type":"List","ref_id":"366"}],"ref_id":"365"}],"node_type":"If","ref_id":"356"}],"ref_id":"355"}],"node_type":"Query","ref_id":"388"}],"node_type":"Query","ref_id":"388"}],"ref_id":"300"}],"define_name":"HospitalizationLocations"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization with Observation returns the total interval from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\ndefine function \"HospitalizationWithObservation\"(Encounter \"Encounter, Performed\" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"911"},{"children":[{"text":" Visit"}]}],"ref_id":"910"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"ObsVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Observation Services\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"916"}],"node_type":"Retrieve","ref_id":"916"},{"children":[{"text":" LastObs"}]}],"ref_id":"913"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastObs"}]}],"ref_id":"924"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"925"}],"node_type":"Property","ref_id":"925"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"938"},{"children":[{"text":" or less on or before"}]}],"ref_id":"946"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"931"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"932"}],"node_type":"Property","ref_id":"932"}],"node_type":"Start","ref_id":"930"}],"ref_id":"946"}],"ref_id":"946"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"948"}],"node_type":"End","ref_id":"947"}],"ref_id":"951"}],"ref_id":"952"}],"ref_id":"956"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"961"}],"ref_id":"912"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"VisitStart: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"ObsVisit"}]}],"ref_id":"964"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"965"}],"node_type":"Property","ref_id":"965"}],"node_type":"Start","ref_id":"963"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"971"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"972"}],"node_type":"Property","ref_id":"972"}],"node_type":"Start","ref_id":"970"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"979"}],"ref_id":"962"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"984"}],"node_type":"Retrieve","ref_id":"984"},{"children":[{"text":" LastED"}]}],"ref_id":"981"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"992"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"993"}],"node_type":"Property","ref_id":"993"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"1000"},{"children":[{"text":" or less on or before"}]}],"ref_id":"1008"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"998"}],"ref_id":"1008"}],"ref_id":"1008"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"1010"}],"node_type":"End","ref_id":"1009"}],"ref_id":"1013"}],"ref_id":"1014"}],"ref_id":"1018"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"1023"}],"ref_id":"980"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"1026"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"1027"}],"node_type":"Property","ref_id":"1027"}],"node_type":"Start","ref_id":"1025"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"1032"},{"children":[{"text":")"}]}],"ref_id":"1035"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"1037"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"1038"}],"node_type":"Property","ref_id":"1038"}],"ref_id":"1036"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"1043"}],"ref_id":"1024"}],"node_type":"Query","ref_id":"1048"}],"node_type":"Query","ref_id":"1048"}],"ref_id":"907"}],"define_name":"HospitalizationWithObservation"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization with Observation and Outpatient Surgery Service returns the total interval from the start of any immediately prior emergency department visit, outpatient surgery visit or observation visit to the discharge of the given encounter.*/\ndefine function \"HospitalizationWithObservationAndOutpatientSurgeryService\"(Encounter \"Encounter, Performed\" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"707"},{"children":[{"text":" Visit"}]}],"ref_id":"706"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"ObsVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Observation Services\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"712"}],"node_type":"Retrieve","ref_id":"712"},{"children":[{"text":" LastObs"}]}],"ref_id":"709"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastObs"}]}],"ref_id":"720"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"721"}],"node_type":"Property","ref_id":"721"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"734"},{"children":[{"text":" or less on or before"}]}],"ref_id":"742"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"727"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"728"}],"node_type":"Property","ref_id":"728"}],"node_type":"Start","ref_id":"726"}],"ref_id":"742"}],"ref_id":"742"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"744"}],"node_type":"End","ref_id":"743"}],"ref_id":"747"}],"ref_id":"748"}],"ref_id":"752"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"757"}],"ref_id":"708"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"VisitStart: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"ObsVisit"}]}],"ref_id":"760"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"761"}],"node_type":"Property","ref_id":"761"}],"node_type":"Start","ref_id":"759"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"767"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"768"}],"node_type":"Property","ref_id":"768"}],"node_type":"Start","ref_id":"766"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"775"}],"ref_id":"758"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"780"}],"node_type":"Retrieve","ref_id":"780"},{"children":[{"text":" LastED"}]}],"ref_id":"777"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"788"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"789"}],"node_type":"Property","ref_id":"789"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"796"},{"children":[{"text":" or less on or before"}]}],"ref_id":"804"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"794"}],"ref_id":"804"}],"ref_id":"804"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"806"}],"node_type":"End","ref_id":"805"}],"ref_id":"809"}],"ref_id":"810"}],"ref_id":"814"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"819"}],"ref_id":"776"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"VisitStartWithED: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"822"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"823"}],"node_type":"Property","ref_id":"823"}],"node_type":"Start","ref_id":"821"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"828"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"831"}],"ref_id":"820"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"OutpatientSurgeryVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Outpatient Surgery Service\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"836"}],"node_type":"Retrieve","ref_id":"836"},{"children":[{"text":" LastSurgeryOP"}]}],"ref_id":"833"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastSurgeryOP"}]}],"ref_id":"844"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"845"}],"node_type":"Property","ref_id":"845"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"852"},{"children":[{"text":" or less on or before"}]}],"ref_id":"860"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"VisitStartWithED"}]}],"node_type":"QueryLetRef","ref_id":"850"}],"ref_id":"860"}],"ref_id":"860"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"862"}],"node_type":"End","ref_id":"861"}],"ref_id":"865"}],"ref_id":"866"}],"ref_id":"870"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"875"}],"ref_id":"832"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"OutpatientSurgeryVisit"}]}],"ref_id":"878"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"879"}],"node_type":"Property","ref_id":"879"}],"node_type":"Start","ref_id":"877"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"VisitStartWithED"}]}],"node_type":"QueryLetRef","ref_id":"884"},{"children":[{"text":")"}]}],"ref_id":"887"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"889"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"890"}],"node_type":"Property","ref_id":"890"}],"ref_id":"888"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"895"}],"ref_id":"876"}],"node_type":"Query","ref_id":"900"}],"node_type":"Query","ref_id":"900"}],"ref_id":"703"}],"define_name":"HospitalizationWithObservationAndOutpatientSurgeryService"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization with Observation Length of Stay returns the length in days from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\ndefine function \"HospitalizationWithObservationLengthofStay\"(Encounter \"Encounter, Performed\" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"\"LengthInDays\"("}]},{"children":[{"children":[{"text":"\"HospitalizationWithObservation\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"1058"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"1059"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"1062"}],"node_type":"FunctionRef","ref_id":"1062"}],"ref_id":"1055"}],"define_name":"HospitalizationWithObservationLengthofStay"},{"children":[{"children":[{"children":[{"text":"define \"Inpatient Encounter\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Encounter Inpatient\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"238"}],"node_type":"Retrieve","ref_id":"238"},{"children":[{"text":" EncounterInpatient"}]}],"ref_id":"235"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"EncounterInpatient"}]}],"ref_id":"246"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"247"}],"node_type":"Property","ref_id":"247"},{"children":[{"text":" ends during day of "}],"ref_id":"256"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"252"}],"ref_id":"256"}],"ref_id":"256"}],"node_type":"Query","ref_id":"257"}],"ref_id":"234"}],"define_name":"Inpatient Encounter"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return the ending point if the interval has an ending boundary specified, otherwise, return the starting point*/\ndefine function \"Latest\"(period Interval\u003cDateTime\u003e ):\n  "}]},{"children":[{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"HasEnd("}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"1200"},{"children":[{"text":")"}]}],"ref_id":"1203"},{"children":[{"text":")"}]}],"ref_id":"1203"},{"children":[{"text":" then \n  "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"1205"}],"ref_id":"1204"},{"children":[{"text":" \n    else "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"1209"}],"ref_id":"1208"}],"node_type":"If","ref_id":"1199"}],"node_type":"If","ref_id":"1199"}],"ref_id":"1193"}],"define_name":"Latest"},{"children":[{"children":[{"children":[{"text":"/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the ending point of the period if the period has an ending boundary specified, otherwise returns the starting point of the interval*/\ndefine function \"LatestOf\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Latest("}]},{"children":[{"children":[{"text":"NormalizeInterval("}]},{"children":[{"children":[{"text":"pointInTime"}]}],"node_type":"OperandRef","ref_id":"1239"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"1240"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"1243"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"1246"}],"node_type":"FunctionRef","ref_id":"1246"}],"ref_id":"1231"}],"define_name":"LatestOf"},{"children":[{"children":[{"children":[{"text":"/*calculates the difference in calendar days between the start and end of the given interval.*/\ndefine function \"LengthInDays\"(Value Interval\u003cDateTime\u003e ):\n  "}]},{"children":[{"children":[{"children":[{"text":"difference in days between "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"Value"}]}],"node_type":"OperandRef","ref_id":"293"}],"node_type":"Start","ref_id":"292"},{"children":[{"text":" and "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"Value"}]}],"node_type":"OperandRef","ref_id":"297"}],"node_type":"End","ref_id":"296"}],"node_type":"DifferenceBetween","ref_id":"291"}],"node_type":"DifferenceBetween","ref_id":"291"}],"ref_id":"285"}],"define_name":"LengthInDays"},{"children":[{"children":[{"children":[{"text":"/*Given a datetime and a period, returns the period (if a period is provided) or the interval beginning and ending on the datetime (if a datetime is provided)*/\ndefine function \"NormalizeInterval\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  "}]},{"children":[{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"pointInTime"}]}],"node_type":"OperandRef","ref_id":"1120"},{"children":[{"text":" is not null"}]}],"ref_id":"1122"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"pointInTime"}]}],"ref_id":"1123"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"pointInTime"}]}],"ref_id":"1124"},{"children":[{"text":"]"}]}],"ref_id":"1125"},{"children":[{"text":"\n    else "}]},{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"1129"},{"children":[{"text":" is not null"}]}],"ref_id":"1133"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"period"}]}],"ref_id":"1134"},{"children":[{"text":" \n    else "}]},{"children":[{"children":[{"text":"null as "}],"node_type":"Null","ref_id":"1138"},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"1140"},{"children":[{"text":"\u003e"}]}],"ref_id":"1139"}],"ref_id":"1137"}],"ref_id":"1128"}],"node_type":"If","ref_id":"1119"}],"node_type":"If","ref_id":"1119"}],"ref_id":"1111"}],"define_name":"NormalizeInterval"},{"children":[{"children":[]},{"children":[]},{"children":[{"children":[{"text":"/*@description: Returns an interval of date values extracted from the input interval of date-time values\n@comment: This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability.*/\ndefine function \"ToDateInterval\"(period Interval\u003cDateTime\u003e ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"270"}],"node_type":"Start","ref_id":"269"}],"ref_id":"268"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"275"}],"node_type":"End","ref_id":"274"}],"ref_id":"273"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"278"}],"node_type":"Interval","ref_id":"278"}],"ref_id":"262"}],"define_name":"ToDateInterval"}],"identifier":{"id":"CQMCommonQDM","version":"9.0.000"}},"is_main_library":false,"is_top_level":true,"library_name":"CQMCommonQDM","library_version":"9.0.000","statement_dependencies":[{"_id":"689203d910d20757c0cf5962","statement_name":"NormalizeInterval"},{"_id":"689203d910d20757c0cf5963","statement_name":"HospitalizationWithObservation"}]}],"created_at":null,"description":"This measure assesses the number of inpatient hospitalizations for patients age 18 and older who have been administered an opioid medication outside of the operating room and are subsequently administered a non-enteral opioid antagonist outside of the operating room within 12 hours, an indication of an opioid-related adverse event","hqmf_id":"7B4A6B88-B107-43C9-B0EC-7C6D8DC394D9","hqmf_set_id":"CB58C1EF-E8A9-4A8D-AF83-760D354077DB","hqmf_version_number":"4.2.000","main_cql_library":"CMS819HHORAE","measure_attributes":[{"code":"OTH","value":"819","name":"CMS ID","code_obj":{"type":"CD","null_flavor":"OTH","original_text":"CMS ID"},"value_obj":{"type":"ED","value":"819","media_type":"text/plain"}},{"code":"OTH","value":"3501e","name":"CBE Number","code_obj":{"type":"CD","null_flavor":"OTH","original_text":"CBE Number"},"value_obj":{"type":"ED","value":"3501e","media_type":"text/plain"}},{"code":"COPY","value":"Limited proprietary coding is contained in the Measure specifications for user convenience. Users of proprietary code sets should obtain all necessary licenses from the owners of the code sets. Mathematica disclaims all liability for use or accuracy of any third-party codes contained in the specifications. LOINC(R) copyright 2004-2024 Regenstrief Institute, Inc. This material contains SNOMED Clinical Terms(R) (SNOMED CT[R]) copyright 2004-2024 International Health Terminology Standards Development Organisation. ICD-10 copyright 2024 World Health Organization. All Rights Reserved.","name":"Copyright","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"COPY","title":"Copyright"},"value_obj":{"type":"ED","value":"Limited proprietary coding is contained in the Measure specifications for user convenience. Users of proprietary code sets should obtain all necessary licenses from the owners of the code sets. Mathematica disclaims all liability for use or accuracy of any third-party codes contained in the specifications. LOINC(R) copyright 2004-2024 Regenstrief Institute, Inc. This material contains SNOMED Clinical Terms(R) (SNOMED CT[R]) copyright 2004-2024 International Health Terminology Standards Development Organisation. ICD-10 copyright 2024 World Health Organization. All Rights Reserved.","media_type":"text/plain"}},{"code":"DISC","value":"This performance measure is not a clinical guideline, does not establish a standard of medical care, and has not been tested for all potential applications. THE MEASURES AND SPECIFICATIONS ARE PROVIDED “AS IS” WITHOUT WARRANTY OF ANY KIND. Due to technical limitations, registered trademarks are indicated by (R) or [R] and unregistered trademarks are indicated by (TM) or [TM].","name":"Disclaimer","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DISC","title":"Disclaimer"},"value_obj":{"type":"ED","value":"This performance measure is not a clinical guideline, does not establish a standard of medical care, and has not been tested for all potential applications. THE MEASURES AND SPECIFICATIONS ARE PROVIDED “AS IS” WITHOUT WARRANTY OF ANY KIND. Due to technical limitations, registered trademarks are indicated by (R) or [R] and unregistered trademarks are indicated by (TM) or [TM].","media_type":"text/plain"}},{"code":"MSRSCORE","name":"Measure Scoring","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRSCORE","title":"Measure Scoring"},"value_obj":{"type":"CD","system":"2.16.840.1.113883.5.1063","code":"PROPOR","title":"Proportion"}},{"code":"MSRTYPE","name":"Measure Type","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRTYPE","title":"Measure Type"},"value_obj":{"type":"CD","system":"2.16.840.1.113883.5.1063","code":"OUTCOME","title":"Outcome"}},{"code":"STRAT","value":"None","name":"Stratification","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"STRAT","title":"Stratification"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"MSRADJ","value":"None","name":"Risk Adjustment","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRADJ","title":"Risk Adjustment"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"MSRAGG","value":"None","name":"Rate Aggregation","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRAGG","title":"Rate Aggregation"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"RAT","value":"Opioids are often the foundation for sedation and pain relief. Opioid-based analgesia continues to be the most commonly used treatment in postoperative pain management, with more than 95% of surgical patients receiving opioids during their hospitalization (Baker et al., 2020). However, use of opioids can also lead to serious adverse events, including constipation, over sedation, delirium, and respiratory depression (Urman et al., 2021a). Opioid-related adverse events (ORADE) have both patient-level and financial implications. The presence of an ORADE was associated with a 55% longer postoperative length of stay, 29% lower odds of discharge home, and 2.9 times the odds of death (Urman et al., 2021b). For surgical patients, occurrence of opioid-related adverse events was associated with an increase of 1.6 days in length of stay (LOS) and $8225 more in cost for the index hospitalization. Patients who experienced ORADEs while in a hospitalized setting were more likely to have received a higher total dose of opioids during hospitalization (Cone et al., 2023; Shafi et al., 2018). Numerous studies report the additive (risk-adjusted) hospitalization cost burden of surgical patients with ORADEs to be between $4350–$8225, representing a 27–47% increase in (risk-adjusted) admission costs (Khanna et al., 2021). Most opioid-related adverse events are preventable. Each year, adverse drug events (ADE) account for nearly 700,000 emergency department visits and 100,000 hospitalizations (AHRQ, 2019). An estimated one-third of all adverse events that occur in the inpatient setting are adverse drug events (ODPHP, 2020). Additionally, in a closed-claims analysis, 97% of adverse events were judged preventable with better monitoring and response (Lee et al., 2015). Naloxone administration is often used as an indicator of a severe opioid-related adverse event, and implementation of this measure can advance safe use of opioids in hospitals and prevent these serious and potentially lethal adverse drug events.","name":"Rationale","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"RAT","title":"Rationale"},"value_obj":{"type":"ED","value":"Opioids are often the foundation for sedation and pain relief. Opioid-based analgesia continues to be the most commonly used treatment in postoperative pain management, with more than 95% of surgical patients receiving opioids during their hospitalization (Baker et al., 2020). However, use of opioids can also lead to serious adverse events, including constipation, over sedation, delirium, and respiratory depression (Urman et al., 2021a). Opioid-related adverse events (ORADE) have both patient-level and financial implications. The presence of an ORADE was associated with a 55% longer postoperative length of stay, 29% lower odds of discharge home, and 2.9 times the odds of death (Urman et al., 2021b). For surgical patients, occurrence of opioid-related adverse events was associated with an increase of 1.6 days in length of stay (LOS) and $8225 more in cost for the index hospitalization. Patients who experienced ORADEs while in a hospitalized setting were more likely to have received a higher total dose of opioids during hospitalization (Cone et al., 2023; Shafi et al., 2018). Numerous studies report the additive (risk-adjusted) hospitalization cost burden of surgical patients with ORADEs to be between $4350–$8225, representing a 27–47% increase in (risk-adjusted) admission costs (Khanna et al., 2021). Most opioid-related adverse events are preventable. Each year, adverse drug events (ADE) account for nearly 700,000 emergency department visits and 100,000 hospitalizations (AHRQ, 2019). An estimated one-third of all adverse events that occur in the inpatient setting are adverse drug events (ODPHP, 2020). Additionally, in a closed-claims analysis, 97% of adverse events were judged preventable with better monitoring and response (Lee et al., 2015). Naloxone administration is often used as an indicator of a severe opioid-related adverse event, and implementation of this measure can advance safe use of opioids in hospitals and prevent these serious and potentially lethal adverse drug events.","media_type":"text/plain"}},{"code":"CRS","value":"Naloxone is an opioid reversal agent typically used for severe opioid-related adverse events. Naloxone administration has been used in a number of studies as an indicator of opioid-related adverse events (Yiu, et al., 2022; Lynn \u0026 Galinkin, 2017; Nwulu et al., 2013). From Section 10 of the 2015 American Heart Association Guidelines Update for Cardiopulmonary Resuscitation and Emergency Cardiovascular Care (Lavonas et al., 2015), the following recommendation is listed for use of naloxone: Naloxone is a potent opioid receptor antagonist in the brain, spinal cord, and gastrointestinal system. Naloxone has an excellent safety profile and can rapidly reverse central nervous system (CNS) and respiratory depression in a patient with an opioid-associated resuscitative emergency. The 2020 American Heart Association guidelines update for cardiopulmonary resuscitation continue to recommend naloxone for a patient with suspected opioid overdose who has a definite pulse but no normal breathing or only gasping (i.e., a respiratory arrest), in addition to providing standard Pediatric Basic Life Support (PBLS) or Pediatric Advanced Life Support (PALS), it is reasonable for responders to administer intramuscular or intranasal naloxone. These recommendations are identical for adults (American Heart Association, 2020). In February 2022, the Food and Drug Administration (FDA) approved its abbreviated new drug application for nalmefene hydrochloride injection, 2mg/2mL (1mg/1mL). Nalmefene is an opioid antagonist indicated for the complete or partial reversal of opioid drug effects, including respiratory depression, induced by either natural or synthetic opioids, and in the management of known or suspected opioid overdose (FDA, 2022). In contrast to naloxone, the long half-life of nalmefene is similar to or greater than that of many opioid receptor agonists (Britch \u0026 Walsh, 2022), which could decrease the need for repeat drug administration. In May 2023, FDA approved nalmefene hydrochloride nasal spray that delivers 2.7 milligrams (mg) of nalmefene into the nasal cavity (FDA, 2023).","name":"Clinical Recommendation Statement","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"CRS","title":"Clinical Recommendation Statement"},"value_obj":{"type":"ED","value":"Naloxone is an opioid reversal agent typically used for severe opioid-related adverse events. Naloxone administration has been used in a number of studies as an indicator of opioid-related adverse events (Yiu, et al., 2022; Lynn \u0026 Galinkin, 2017; Nwulu et al., 2013). From Section 10 of the 2015 American Heart Association Guidelines Update for Cardiopulmonary Resuscitation and Emergency Cardiovascular Care (Lavonas et al., 2015), the following recommendation is listed for use of naloxone: Naloxone is a potent opioid receptor antagonist in the brain, spinal cord, and gastrointestinal system. Naloxone has an excellent safety profile and can rapidly reverse central nervous system (CNS) and respiratory depression in a patient with an opioid-associated resuscitative emergency. The 2020 American Heart Association guidelines update for cardiopulmonary resuscitation continue to recommend naloxone for a patient with suspected opioid overdose who has a definite pulse but no normal breathing or only gasping (i.e., a respiratory arrest), in addition to providing standard Pediatric Basic Life Support (PBLS) or Pediatric Advanced Life Support (PALS), it is reasonable for responders to administer intramuscular or intranasal naloxone. These recommendations are identical for adults (American Heart Association, 2020). In February 2022, the Food and Drug Administration (FDA) approved its abbreviated new drug application for nalmefene hydrochloride injection, 2mg/2mL (1mg/1mL). Nalmefene is an opioid antagonist indicated for the complete or partial reversal of opioid drug effects, including respiratory depression, induced by either natural or synthetic opioids, and in the management of known or suspected opioid overdose (FDA, 2022). In contrast to naloxone, the long half-life of nalmefene is similar to or greater than that of many opioid receptor agonists (Britch \u0026 Walsh, 2022), which could decrease the need for repeat drug administration. In May 2023, FDA approved nalmefene hydrochloride nasal spray that delivers 2.7 milligrams (mg) of nalmefene into the nasal cavity (FDA, 2023).","media_type":"text/plain"}},{"code":"IDUR","value":"Decreased score indicates improvement","name":"Improvement Notation","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"IDUR","title":"Improvement Notation"},"value_obj":{"type":"ED","value":"Decreased score indicates improvement","media_type":"text/plain"}},{"code":"REF","value":"Citation Agency for Healthcare Research and Quality (AHRQ). (2019). Medication errors and adverse drug events. Rockville: US Department of Health \u0026 Human Services. Retrieved from https://psnet.ahrq.gov/primer/medication-errors-and-adverse-drug-events","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"Citation Agency for Healthcare Research and Quality (AHRQ). (2019). Medication errors and adverse drug events. Rockville: US Department of Health \u0026 Human Services. Retrieved from https://psnet.ahrq.gov/primer/medication-errors-and-adverse-drug-events","media_type":"text/plain"}},{"code":"REF","value":"Citation American Heart Association. (2020). Highlights of the 2020 American Heart Association's guidelines for CPR and ECC. https://cpr.heart.org/-/media/cpr-files/cpr-guidelines-files/highlights/hghlghts_2020_ecc_guidelines_english.pdf","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"Citation American Heart Association. (2020). Highlights of the 2020 American Heart Association's guidelines for CPR and ECC. https://cpr.heart.org/-/media/cpr-files/cpr-guidelines-files/highlights/hghlghts_2020_ecc_guidelines_english.pdf","media_type":"text/plain"}},{"code":"REF","value":"Citation Baker, J., Brovman, E.Y., Rao, N., Beutler, S.S., \u0026 Urman, R.D. (2020). Potential opioid-related adverse drug events are associated with decreased revenue in hip replacement surgery in the older population. Geriatric Orthopaedic Surgery \u0026 Rehabilitation. doi:10.1177/2151459320915328","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"Citation Baker, J., Brovman, E.Y., Rao, N., Beutler, S.S., \u0026 Urman, R.D. (2020). Potential opioid-related adverse drug events are associated with decreased revenue in hip replacement surgery in the older population. Geriatric Orthopaedic Surgery \u0026 Rehabilitation. doi:10.1177/2151459320915328","media_type":"text/plain"}},{"code":"REF","value":"Citation Britch, S.C., \u0026 Walsh, S.L. (2022). Treatment of opioid overdose: current approaches and recent advances. Psychopharmacology (Berl). 2022;239(7):2063-2081. doi:10.1007/s00213-022-06125-5","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"Citation Britch, S.C., \u0026 Walsh, S.L. (2022). Treatment of opioid overdose: current approaches and recent advances. Psychopharmacology (Berl). 2022;239(7):2063-2081. doi:10.1007/s00213-022-06125-5","media_type":"text/plain"}},{"code":"REF","value":"Citation Cone, A.C., Sanchez, M., Morrison, H., \u0026 Fier, A. (2023). Multimodal analgesia's impact on opioid use and adverse drug effects in a multihospital health system. Hospital Pharmacy. 58(2):158-164. doi: 10.1177/00185787221122655.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"Citation Cone, A.C., Sanchez, M., Morrison, H., \u0026 Fier, A. (2023). Multimodal analgesia's impact on opioid use and adverse drug effects in a multihospital health system. Hospital Pharmacy. 58(2):158-164. doi: 10.1177/00185787221122655.","media_type":"text/plain"}},{"code":"REF","value":"Citation Food and Drug Administration (FDA). (2022). Nalmefene hydrochloride injection 2mg/2mL (1mg/1mL) Purdue Pharma L.P. https://www.accessdata.fda.gov/spl/data/d4bb0797-a4ed-4ed4-9904-604433eea4ff/d4bb0797-a4ed-4ed4-9904-604433eea4ff.xml","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"Citation Food and Drug Administration (FDA). (2022). Nalmefene hydrochloride injection 2mg/2mL (1mg/1mL) Purdue Pharma L.P. https://www.accessdata.fda.gov/spl/data/d4bb0797-a4ed-4ed4-9904-604433eea4ff/d4bb0797-a4ed-4ed4-9904-604433eea4ff.xml","media_type":"text/plain"}},{"code":"REF","value":"Citation Food and Drug Administration (FDA). (2023). FDA approves prescription nasal spray to reverse opioid overdose: Nalmefene hydrochloride product in nasal spray form provides additional tool for harm reduction groups and first responders. https://www.fda.gov/news-events/press-announcements/fda-approves-prescription-nasal-spray-reverse-opioid-overdose","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"Citation Food and Drug Administration (FDA). (2023). FDA approves prescription nasal spray to reverse opioid overdose: Nalmefene hydrochloride product in nasal spray form provides additional tool for harm reduction groups and first responders. https://www.fda.gov/news-events/press-announcements/fda-approves-prescription-nasal-spray-reverse-opioid-overdose","media_type":"text/plain"}},{"code":"REF","value":"Citation Khanna, A.K., Saager, L., Bergese, S.D., Jungquist, C.R., Morimatsu, H., Uezono, S., Ti, L.K., Soto, R., Jiang, W., \u0026 Buhre, W. (2021). Opioid-induced respiratory depression increases hospital costs and length of stay in patients recovering on the general care floor. BMC Anesthesiology. 21(1):88. doi:10.1186/s12871-021-01307-8","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"Citation Khanna, A.K., Saager, L., Bergese, S.D., Jungquist, C.R., Morimatsu, H., Uezono, S., Ti, L.K., Soto, R., Jiang, W., \u0026 Buhre, W. (2021). Opioid-induced respiratory depression increases hospital costs and length of stay in patients recovering on the general care floor. BMC Anesthesiology. 21(1):88. doi:10.1186/s12871-021-01307-8","media_type":"text/plain"}},{"code":"REF","value":"Citation Lavonas, E. J., Drennan, I. R., Gabrielli, A., Heffner, A. C., Hoyte, C. O., Orkin, A. M., \u0026 Donnino, M. W. (2015). Part 10: Special circumstances of resuscitation: 2015 American Heart Association guidelines update for cardiopulmonary resuscitation and emergency cardiovascular care. Circulation. 132(18 suppl 2), S501-S518. doi: 10.1161/cir.0000000000000264","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"Citation Lavonas, E. J., Drennan, I. R., Gabrielli, A., Heffner, A. C., Hoyte, C. O., Orkin, A. M., \u0026 Donnino, M. W. (2015). Part 10: Special circumstances of resuscitation: 2015 American Heart Association guidelines update for cardiopulmonary resuscitation and emergency cardiovascular care. Circulation. 132(18 suppl 2), S501-S518. doi: 10.1161/cir.0000000000000264","media_type":"text/plain"}},{"code":"REF","value":"Citation Lee, L. A., Caplan, R. A., Stephens, L. S., Posner, K. L., Terman, G. W., Voepel-Lewis, T., \u0026 Domino, K. B. (2015). Postoperative opioid-induced respiratory depression: a closed claims analysis. Anesthesiology, 122(3), 659-665. doi: 10.1097/ALN.0000000000000564","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"Citation Lee, L. A., Caplan, R. A., Stephens, L. S., Posner, K. L., Terman, G. W., Voepel-Lewis, T., \u0026 Domino, K. B. (2015). Postoperative opioid-induced respiratory depression: a closed claims analysis. Anesthesiology, 122(3), 659-665. doi: 10.1097/ALN.0000000000000564","media_type":"text/plain"}},{"code":"REF","value":"Citation Lynn, R. R., \u0026 Galinkin, J. (2017). Naloxone dosage for opioid reversal: Current evidence and clinical implications. Therapeutic Advances in Drug Safety, 9(1), 63-88. doi:10.1177/2042098617744161","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"Citation Lynn, R. R., \u0026 Galinkin, J. (2017). Naloxone dosage for opioid reversal: Current evidence and clinical implications. Therapeutic Advances in Drug Safety, 9(1), 63-88. doi:10.1177/2042098617744161","media_type":"text/plain"}},{"code":"REF","value":"Citation Nwulu, U., Nirantharakumar, K., Odesanya, R., McDowell, S. E., \u0026 Coleman, J. J. (2013). Improvement in the detection of adverse drug events by the use of electronic health and prescription records: an evaluation of two trigger tools. European Journal of Clinical Pharmacology, 69(2), 255-259. doi: 10.1007/s00228-012-1327-1","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"Citation Nwulu, U., Nirantharakumar, K., Odesanya, R., McDowell, S. E., \u0026 Coleman, J. J. (2013). Improvement in the detection of adverse drug events by the use of electronic health and prescription records: an evaluation of two trigger tools. European Journal of Clinical Pharmacology, 69(2), 255-259. doi: 10.1007/s00228-012-1327-1","media_type":"text/plain"}},{"code":"REF","value":"Citation Office of Disease Prevention and Health Promotion (ODPHP). (2020). National action plan for ADE prevention. U.S. Department of Health and Human Services. https://pmc.ncbi.nlm.nih.gov/articles/PMC6280931/","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"Citation Office of Disease Prevention and Health Promotion (ODPHP). (2020). National action plan for ADE prevention. U.S. Department of Health and Human Services. https://pmc.ncbi.nlm.nih.gov/articles/PMC6280931/","media_type":"text/plain"}},{"code":"REF","value":"Citation Shafi, S., Collinsworth, A.W., Copeland, L.A., Ogola, G.O., Qui, T., Kouznetsova, M., Liao, I.C., Mears, N., Pham, A.T., Wan, G.J., \u0026 Masica, A.L. (2018). Association of opioid-related adverse drug events with clinical and cost outcomes among surgical patients in a large integrated health care delivery system. JAMA Surgery. 153(8):757-763. doi:10.1001/jamasurg.2018.1039.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"Citation Shafi, S., Collinsworth, A.W., Copeland, L.A., Ogola, G.O., Qui, T., Kouznetsova, M., Liao, I.C., Mears, N., Pham, A.T., Wan, G.J., \u0026 Masica, A.L. (2018). Association of opioid-related adverse drug events with clinical and cost outcomes among surgical patients in a large integrated health care delivery system. JAMA Surgery. 153(8):757-763. doi:10.1001/jamasurg.2018.1039.","media_type":"text/plain"}},{"code":"REF","value":"Citation Urman, R.D., Khanna, A.K., Bergese, S.D., Buhre, W., Wittmann, M., Le Guen, M., Overdyk, F.J., Di Piazza, F., \u0026 Saager, L. (2021a). Postoperative opioid administration characteristics associated with opioid-induced respiratory depression: Results from the PRODIGY trial. Journal of Clinical Anesthiology. 70:110167. doi:10.1016/j.jclinane.110167.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"Citation Urman, R.D., Khanna, A.K., Bergese, S.D., Buhre, W., Wittmann, M., Le Guen, M., Overdyk, F.J., Di Piazza, F., \u0026 Saager, L. (2021a). Postoperative opioid administration characteristics associated with opioid-induced respiratory depression: Results from the PRODIGY trial. Journal of Clinical Anesthiology. 70:110167. doi:10.1016/j.jclinane.110167.","media_type":"text/plain"}},{"code":"REF","value":"Citation Urman, R.D., Seger, D.L., Fiskio, J.M., Nevill, B.A., Harry, E.M., Weiner, S.G., Lovelace, B., Fain, R., Cirillo, J., \u0026 Schnipper, J.L. (2021b). The burden of opioid-related adverse drug events on hospitalized previously opioid-free surgical patients. Journal of Patient Safety. 17(2):e76-e83. doi: 10.1097/PTS.0000000000000566.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"Citation Urman, R.D., Seger, D.L., Fiskio, J.M., Nevill, B.A., Harry, E.M., Weiner, S.G., Lovelace, B., Fain, R., Cirillo, J., \u0026 Schnipper, J.L. (2021b). The burden of opioid-related adverse drug events on hospitalized previously opioid-free surgical patients. Journal of Patient Safety. 17(2):e76-e83. doi: 10.1097/PTS.0000000000000566.","media_type":"text/plain"}},{"code":"REF","value":"Citation Yiu, C.H., Vitharana, N., Gnjidic, D., Patanwala, A.E., Fong, I., Rimington, J., Begley, D., Bugeja, B., \u0026 Penm, J. (2022). Patient risk factors for opioid-related adverse drug events in hospitalized patients: A systematic review. Pharmacotherapy, 42(3):194-215. doi: 10.1002/phar.2666.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"Citation Yiu, C.H., Vitharana, N., Gnjidic, D., Patanwala, A.E., Fong, I., Rimington, J., Begley, D., Bugeja, B., \u0026 Penm, J. (2022). Patient risk factors for opioid-related adverse drug events in hospitalized patients: A systematic review. Pharmacotherapy, 42(3):194-215. doi: 10.1002/phar.2666.","media_type":"text/plain"}},{"code":"DEF","value":"This measure defines the indication of a harm for an opioid-related adverse event by assessing administration of an opioid antagonist. Inpatient hospitalizations: Includes time in the emergency department and observation when the transition between these encounters (if they exist) and the inpatient encounter are within an hour or less of each other.","name":"Definition","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DEF","title":"Definition"},"value_obj":{"type":"ED","value":"This measure defines the indication of a harm for an opioid-related adverse event by assessing administration of an opioid antagonist. Inpatient hospitalizations: Includes time in the emergency department and observation when the transition between these encounters (if they exist) and the inpatient encounter are within an hour or less of each other.","media_type":"text/plain"}},{"code":"GUIDE","value":"Qualifying encounters (denominator) include all patients 18 years of age or older with at least one opioid medication administered outside of the operating room. To create the numerator: 1. First, start with those encounters meeting denominator criteria. 2. Next, remove all events where an opioid or opioid antagonist was administered in the operating room. Opioid antagonist administrations in the operating room are excluded because they could be part of the sedation plan as administered by an anesthesiologist. Encounters that include use of opioid antagonists for procedures and recovery outside of the operating room (e.g., bone marrow biopsy and PACU) are included in the numerator, as it would indicate the patient was over-sedated. Note that should a facility not utilize temporary patient locations, alternative times may be used to determine whether a patient is in the operating room during opioid antagonist administration. Since anesthesia end time could represent the time the anesthesiologist signed off, and thus may include the patient’s time in the PACU, this should be avoided. 3. Next, remove all events where the opioid antagonist was administered via an enteral route. Only opioid antagonists given by a non-enteral (i.e., intravenous, intramuscular, subcutaneous, intranasal, inhalation) route are considered. 4. Finally, remove all administrations of opioid antagonist that were given greater than 12 hours following hospital administration of an opioid medication. This eCQM is an episode-based measure. An episode is defined as each inpatient hospitalization or encounter that ends during the measurement period. This version of the eCQM uses QDM version 5.6. Please refer to the eCQI resource center https://ecqi.healthit.gov/qdm) for more information on the QDM.","name":"Guidance","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"GUIDE","title":"Guidance"},"value_obj":{"type":"ED","value":"Qualifying encounters (denominator) include all patients 18 years of age or older with at least one opioid medication administered outside of the operating room. To create the numerator: 1. First, start with those encounters meeting denominator criteria. 2. Next, remove all events where an opioid or opioid antagonist was administered in the operating room. Opioid antagonist administrations in the operating room are excluded because they could be part of the sedation plan as administered by an anesthesiologist. Encounters that include use of opioid antagonists for procedures and recovery outside of the operating room (e.g., bone marrow biopsy and PACU) are included in the numerator, as it would indicate the patient was over-sedated. Note that should a facility not utilize temporary patient locations, alternative times may be used to determine whether a patient is in the operating room during opioid antagonist administration. Since anesthesia end time could represent the time the anesthesiologist signed off, and thus may include the patient’s time in the PACU, this should be avoided. 3. Next, remove all events where the opioid antagonist was administered via an enteral route. Only opioid antagonists given by a non-enteral (i.e., intravenous, intramuscular, subcutaneous, intranasal, inhalation) route are considered. 4. Finally, remove all administrations of opioid antagonist that were given greater than 12 hours following hospital administration of an opioid medication. This eCQM is an episode-based measure. An episode is defined as each inpatient hospitalization or encounter that ends during the measurement period. This version of the eCQM uses QDM version 5.6. Please refer to the eCQI resource center https://ecqi.healthit.gov/qdm) for more information on the QDM.","media_type":"text/plain"}},{"code":"TRANF","value":"TBD","name":"Transmission Format","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"TRANF","title":"Transmission Format"},"value_obj":{"type":"ED","value":"TBD","media_type":"text/plain"}},{"code":"IPOP","value":"Inpatient hospitalizations that end during the measurement period for patients age 18 and older and at least one opioid medication administration starts during the hospitalization outside of the operating room","name":"Initial Population","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"IPOP","title":"Initial Population"},"value_obj":{"type":"ED","value":"Inpatient hospitalizations that end during the measurement period for patients age 18 and older and at least one opioid medication administration starts during the hospitalization outside of the operating room","media_type":"text/plain"}},{"code":"DENOM","value":"Equals Initial Population","name":"Denominator","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DENOM","title":"Denominator"},"value_obj":{"type":"ED","value":"Equals Initial Population","media_type":"text/plain"}},{"code":"DENEX","value":"None","name":"Denominator Exclusions","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DENEX","title":"Denominator Exclusions"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"NUMER","value":"Inpatient hospitalizations where a non-enteral opioid antagonist administration starts during the hospitalization outside of the operating room and 12 hours or less following an opioid medication administered outside of the operating room. The route of administration of the opioid antagonist must be by intranasal spray, inhalation, intramuscular, subcutaneous, or intravenous injection. Only one numerator event is counted per encounter.","name":"Numerator","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"NUMER","title":"Numerator"},"value_obj":{"type":"ED","value":"Inpatient hospitalizations where a non-enteral opioid antagonist administration starts during the hospitalization outside of the operating room and 12 hours or less following an opioid medication administered outside of the operating room. The route of administration of the opioid antagonist must be by intranasal spray, inhalation, intramuscular, subcutaneous, or intravenous injection. Only one numerator event is counted per encounter.","media_type":"text/plain"}},{"code":"NUMEX","value":"None","name":"Numerator Exclusions","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"NUMEX","title":"Numerator Exclusions"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"DENEXCEP","value":"None","name":"Denominator Exceptions","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DENEXCEP","title":"Denominator Exceptions"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"SDE","value":"For every patient evaluated by this measure also identify payer, race, ethnicity and sex","name":"Supplemental Data Elements","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"SDE","title":"Supplemental Data Elements"},"value_obj":{"type":"ED","value":"For every patient evaluated by this measure also identify payer, race, ethnicity and sex","media_type":"text/plain"}}],"measure_period":{"type":"IVL_TS","low":{"type":"TS","value":"201201010000","inclusive?":true,"derived?":false},"high":{"type":"TS","value":"201212312359","inclusive?":true,"derived?":false},"width":{"type":"PQ","unit":"a","value":"1","inclusive?":true,"derived?":false}},"measure_scoring":"PROPORTION","population_criteria":{"IPP":{"conjunction?":true,"type":"IPP","hqmf_id":"64911ADB-037A-49C1-B832-3D639C93D2D8","preconditions":[{"id":2,"preconditions":[{"id":1,"reference":"CMS819HHORAE__Initial_Population__e05f36f9_2de3_48f5_940a_937be8931f03"}],"conjunction_code":"allTrue"}]},"DENOM":{"conjunction?":true,"type":"DENOM","hqmf_id":"1C4A3901-360E-4ED9-847C-E03BEE7E12D2","preconditions":[{"id":4,"preconditions":[{"id":3,"reference":"CMS819HHORAE__Denominator__e05f36f9_2de3_48f5_940a_937be8931f03"}],"conjunction_code":"allTrue"}]},"NUMER":{"conjunction?":true,"type":"NUMER","hqmf_id":"88F9019F-5395-4D0A-BCE8-AC74216378BE","preconditions":[{"id":6,"preconditions":[{"id":5,"reference":"CMS819HHORAE__Numerator__e05f36f9_2de3_48f5_940a_937be8931f03"}],"conjunction_code":"allTrue"}]}},"population_sets":[{"_id":"689203dd10d20757c0cf5bdf","population_set_id":"PopulationSet_1","populations":{"DENOM":{"_id":"689203dd10d20757c0cf5be0","hqmf_id":"1C4A3901-360E-4ED9-847C-E03BEE7E12D2","library_name":"CMS819HHORAE","statement_name":"Denominator"},"IPP":{"_id":"689203dd10d20757c0cf5be1","hqmf_id":"64911ADB-037A-49C1-B832-3D639C93D2D8","library_name":"CMS819HHORAE","statement_name":"Initial Population"},"NUMER":{"_id":"689203dd10d20757c0cf5be2","hqmf_id":"88F9019F-5395-4D0A-BCE8-AC74216378BE","library_name":"CMS819HHORAE","statement_name":"Numerator"},"_id":"689203dd10d20757c0cf5be3","_type":"CQM::ProportionPopulationMap"},"supplemental_data_elements":[{"_id":"689203d810d20757c0cf5948","hqmf_id":"37f4b04c-4ef0-401b-98aa-e83b3a208ecb","library_name":"CMS819HHORAE","statement_name":"SDE Sex"},{"_id":"689203d810d20757c0cf5949","hqmf_id":"218ead46-73a2-4814-ab62-f7c08f945b1b","library_name":"CMS819HHORAE","statement_name":"SDE Race"},{"_id":"689203d810d20757c0cf594a","hqmf_id":"6fe00cb3-4d0e-49cc-9578-3146631602ae","library_name":"CMS819HHORAE","statement_name":"SDE Payer"},{"_id":"689203d810d20757c0cf594b","hqmf_id":"dc5ef785-a24d-4314-93e8-4944a7b334a3","library_name":"CMS819HHORAE","statement_name":"SDE Ethnicity"}],"title":"Population Criteria Section"}],"source_data_criteria":[{"_id":"689203dd10d20757c0cf5be4","_type":"QDM::PatientCharacteristicEthnicity","codeListId":"2.16.840.1.114222.4.11.837","dataElementCodes":[],"description":"Patient Characteristic Ethnicity: Ethnicity","hqmfOid":"2.16.840.1.113883.10.20.28.4.56","id":"689203dd10d20757c0cf5be4","qdmCategory":"patient_characteristic","qdmStatus":"ethnicity","qdmTitle":"Patient Characteristic Ethnicity","qdmVersion":"5.6"},{"_id":"689203dd10d20757c0cf5be5","_type":"QDM::PatientCharacteristicRace","codeListId":"2.16.840.1.114222.4.11.836","dataElementCodes":[],"description":"Patient Characteristic Race: Race","hqmfOid":"2.16.840.1.113883.10.20.28.4.59","id":"689203dd10d20757c0cf5be5","qdmCategory":"patient_characteristic","qdmStatus":"race","qdmTitle":"Patient Characteristic Race","qdmVersion":"5.6"},{"_id":"689203d910d20757c0cf5969","_type":"QDM::MedicationAdministered","authorDatetime":null,"codeListId":"2.16.840.1.113762.1.4.1248.119","dataElementCodes":[],"description":"Medication, Administered: OpioidAntagonist","dosage":null,"frequency":null,"hqmfOid":"2.16.840.1.113883.10.20.28.4.45","id":"689203d910d20757c0cf5969","negationRationale":null,"qdmCategory":"medication","qdmStatus":"administered","qdmTitle":"Medication, Administered","qdmVersion":"5.6","reason":null,"relevantDatetime":null,"relevantPeriod":null,"route":null},{"_id":"689203d910d20757c0cf5966","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.666.5.307","dataElementCodes":[],"description":"Encounter, Performed: EncounterInpatient","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"689203d910d20757c0cf5966","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"689203dd10d20757c0cf5be6","_type":"QDM::PatientCharacteristicPayer","codeListId":"2.16.840.1.114222.4.11.3591","dataElementCodes":[],"description":"Patient Characteristic Payer: PayerType","hqmfOid":"2.16.840.1.113883.10.20.28.4.58","id":"689203dd10d20757c0cf5be6","qdmCategory":"patient_characteristic","qdmStatus":"payer","qdmTitle":"Patient Characteristic Payer","qdmVersion":"5.6","relevantPeriod":null},{"_id":"689203dd10d20757c0cf5be7","_type":"QDM::PatientCharacteristicSex","codeListId":"2.16.840.1.113762.1.4.1021.121","dataElementCodes":[],"description":"Patient Characteristic Sex: FederalAdministrativeSex","hqmfOid":"2.16.840.1.113883.10.20.28.4.55","id":"689203dd10d20757c0cf5be7","qdmCategory":"patient_characteristic","qdmStatus":"gender","qdmTitle":"Patient Characteristic Sex","qdmVersion":"5.6"},{"_id":"689203d910d20757c0cf5967","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.117.1.7.1.292","dataElementCodes":[],"description":"Encounter, Performed: EmergencyDepartmentVisit","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"689203d910d20757c0cf5967","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"689203d910d20757c0cf5968","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113762.1.4.1111.143","dataElementCodes":[],"description":"Encounter, Performed: ObservationServices","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"689203d910d20757c0cf5968","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"689203d910d20757c0cf596a","_type":"QDM::MedicationAdministered","authorDatetime":null,"codeListId":"2.16.840.1.113762.1.4.1196.226","dataElementCodes":[],"description":"Medication, Administered: OpioidsAll","dosage":null,"frequency":null,"hqmfOid":"2.16.840.1.113883.10.20.28.4.45","id":"689203d910d20757c0cf596a","negationRationale":null,"qdmCategory":"medication","qdmStatus":"administered","qdmTitle":"Medication, Administered","qdmVersion":"5.6","reason":null,"relevantDatetime":null,"relevantPeriod":null,"route":null}],"title":"Hospital Harm - Opioid-Related Adverse Events","updated_at":null,"value_set_ids":["689203d910d20757c0cf596b","689203dd10d20757c0cf5bca","689203dd10d20757c0cf5bcb","689203dd10d20757c0cf5bcc","689203dd10d20757c0cf5bcd","689203dd10d20757c0cf5bce","689203dd10d20757c0cf5bcf","689203dd10d20757c0cf5bd0","689203dd10d20757c0cf5bd1","689203dd10d20757c0cf5bd2","689203dd10d20757c0cf5bd3","689203dd10d20757c0cf5bd4","689203dd10d20757c0cf5bd5"]}