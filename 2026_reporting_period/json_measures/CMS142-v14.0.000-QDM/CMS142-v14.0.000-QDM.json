{"_id":"689200cd10d20757c0ce0adc","calculate_sdes":null,"calculation_method":"PATIENT","cms_id":"CMS142v14","component":false,"component_hqmf_set_ids":[],"composite":false,"composite_hqmf_set_id":null,"cql_libraries":[{"_id":"689200c610d20757c0ce0853","cql":"library CMS142DRCommWithPhysicianManagingDiabetesQDM version '14.0.000'\n\nusing QDM version '5.6'\n\ninclude CQMCommonQDM  version '9.0.000' called Global\n\ncodesystem \"SNOMEDCT\": 'urn:oid:2.16.840.1.113883.6.96'\ncodesystem \"ActCode\": 'urn:oid:2.16.840.1.113883.5.4'\n\nvalueset \"Care Services in Long Term Residential Facility\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1014'\nvalueset \"Federal Administrative Sex\": 'urn:oid:2.16.840.1.113762.1.4.1021.121'\nvalueset \"Diabetic Retinopathy\": 'urn:oid:2.16.840.1.113883.3.526.3.327'\nvalueset \"Ethnicity\": 'urn:oid:2.16.840.1.114222.4.11.837'\nvalueset \"Level of Severity of Retinopathy Findings\": 'urn:oid:2.16.840.1.113883.3.526.3.1283'\nvalueset \"Macular Edema Findings Present\": 'urn:oid:2.16.840.1.113883.3.526.3.1320'\nvalueset \"Macular Exam\": 'urn:oid:2.16.840.1.113883.3.526.3.1251'\nvalueset \"Medical Reason\": 'urn:oid:2.16.840.1.113883.3.526.3.1007'\nvalueset \"Nursing Facility Visit\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1012'\nvalueset \"Office Visit\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1001'\nvalueset \"Ophthalmological Services\": 'urn:oid:2.16.840.1.113883.3.526.3.1285'\nvalueset \"Outpatient Consultation\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1008'\nvalueset \"Patient Reason\": 'urn:oid:2.16.840.1.113883.3.526.3.1008'\nvalueset \"Payer Type\": 'urn:oid:2.16.840.1.114222.4.11.3591'\nvalueset \"Race\": 'urn:oid:2.16.840.1.114222.4.11.836'\n\ncode \"Macular edema absent (situation)\": '428341000124108' from \"SNOMEDCT\" display 'Macular edema absent (situation)'\ncode \"virtual\": 'VR' from \"ActCode\" display 'virtual'\n\nparameter \"Measurement Period\" Interval\u003cDateTime\u003e\n\ncontext Patient\n\ndefine \"Denominator\":\n  \"Initial Population\"\n    and exists \"Macular Exam Performed\"\n\ndefine \"Denominator Exceptions\":\n exists \"Medical or Patient Reason for Not Communicating Level of Severity of Retinopathy\"\n  or exists \"Medical or Patient Reason for Not Communicating Absence of Macular Edema\"\n  or exists \"Medical or Patient Reason for Not Communicating Presence of Macular Edema\"\n\ndefine \"Diabetic Retinopathy Encounter\":\n  \"Qualifying Encounter During Day of Measurement Period\" ValidQualifyingEncounter\n    with [\"Diagnosis\": \"Diabetic Retinopathy\"] DiabeticRetinopathy\n      such that DiabeticRetinopathy.prevalencePeriod overlaps day of ValidQualifyingEncounter.relevantPeriod\n\ndefine \"Macular Exam Performed\":\n  [\"Diagnostic Study, Performed\": \"Macular Exam\"] MacularExam\n    with \"Diabetic Retinopathy Encounter\" EncounterDiabeticRetinopathy\n      such that Global.\"NormalizeInterval\" ( MacularExam.relevantDatetime, MacularExam.relevantPeriod ) during day of EncounterDiabeticRetinopathy.relevantPeriod\n    where MacularExam.result is not null\n\ndefine \"Medical or Patient Reason for Not Communicating Absence of Macular Edema\":\n  [\"Communication, Not Performed\": \"Macular edema absent (situation)\"] MacularEdemaAbsentNotCommunicated\n    with \"Diabetic Retinopathy Encounter\" EncounterDiabeticRetinopathy\n      such that MacularEdemaAbsentNotCommunicated.authorDatetime during day of EncounterDiabeticRetinopathy.relevantPeriod\n    where ( MacularEdemaAbsentNotCommunicated.negationRationale in \"Medical Reason\"\n        or MacularEdemaAbsentNotCommunicated.negationRationale in \"Patient Reason\")\n\ndefine \"Medical or Patient Reason for Not Communicating Presence of Macular Edema\":\n  [\"Communication, Not Performed\": \"Macular Edema Findings Present\"] MacularEdemaPresentNotCommunicated\n    with \"Diabetic Retinopathy Encounter\" EncounterDiabeticRetinopathy\n      such that MacularEdemaPresentNotCommunicated.authorDatetime during day of EncounterDiabeticRetinopathy.relevantPeriod\n    where ( MacularEdemaPresentNotCommunicated.negationRationale in \"Medical Reason\"\n        or MacularEdemaPresentNotCommunicated.negationRationale in \"Patient Reason\"\n    )\n\ndefine \"Medical or Patient Reason for Not Communicating Level of Severity of Retinopathy\":\n  [\"Communication, Not Performed\": \"Level of Severity of Retinopathy Findings\"] LevelOfSeverityNotCommunicated\n    with \"Diabetic Retinopathy Encounter\" EncounterDiabeticRetinopathy\n      such that LevelOfSeverityNotCommunicated.authorDatetime during day of EncounterDiabeticRetinopathy.relevantPeriod\n    where ( LevelOfSeverityNotCommunicated.negationRationale in \"Medical Reason\"\n        or LevelOfSeverityNotCommunicated.negationRationale in \"Patient Reason\")\n\ndefine \"Numerator\":\nexists \"Level of Severity of Retinopathy Findings Communicated\"\n  and ( exists \"Macular Edema Absence Communicated\"\n      or exists \"Macular Edema Presence Communicated\"\n      )\n\ndefine \"SDE Ethnicity\":\n  [\"Patient Characteristic Ethnicity\": \"Ethnicity\"]\n\ndefine \"SDE Payer\":\n  [\"Patient Characteristic Payer\": \"Payer Type\"]\n\ndefine \"SDE Race\":\n  [\"Patient Characteristic Race\": \"Race\"]\n\ndefine \"SDE Sex\":\n  [\"Patient Characteristic Sex\": \"Federal Administrative Sex\"]\n\ndefine \"Initial Population\":\n  AgeInYearsAt(date from start of \"Measurement Period\") \u003e= 18\n    and exists \"Diabetic Retinopathy Encounter\"\n\ndefine \"Qualifying Encounter During Day of Measurement Period\":\n  ( [\"Encounter, Performed\": \"Office Visit\"]\n    union [\"Encounter, Performed\": \"Ophthalmological Services\"]\n    union [\"Encounter, Performed\": \"Outpatient Consultation\"]\n    union [\"Encounter, Performed\": \"Care Services in Long Term Residential Facility\"]\n    union [\"Encounter, Performed\": \"Nursing Facility Visit\"] ) QualifyingEncounter\n    where QualifyingEncounter.relevantPeriod during day of \"Measurement Period\"\n      and QualifyingEncounter.class !~ \"virtual\"\n      \ndefine \"Level of Severity of Retinopathy Findings Communicated\":\n  [\"Communication, Performed\": \"Level of Severity of Retinopathy Findings\"] LevelOfSeverityCommunicated\n    with \"Diabetic Retinopathy Encounter\" EncounterDiabeticRetinopathy\n      such that LevelOfSeverityCommunicated.sentDatetime after start of EncounterDiabeticRetinopathy.relevantPeriod\n        and LevelOfSeverityCommunicated.sentDatetime during day of \"Measurement Period\"\n\ndefine \"Macular Edema Presence Communicated\":\n  [\"Communication, Performed\": \"Macular Edema Findings Present\"] MacularEdemaPresentCommunicated\n    with \"Diabetic Retinopathy Encounter\" EncounterDiabeticRetinopathy\n      such that MacularEdemaPresentCommunicated.sentDatetime after start of EncounterDiabeticRetinopathy.relevantPeriod\n        and MacularEdemaPresentCommunicated.sentDatetime during day of \"Measurement Period\"\n\ndefine \"Macular Edema Absence Communicated\":\n  [\"Communication, Performed\": \"Macular edema absent (situation)\"] MacularEdemaAbsentCommunicated\n    with \"Diabetic Retinopathy Encounter\" EncounterDiabeticRetinopathy\n      such that MacularEdemaAbsentCommunicated.sentDatetime after start of EncounterDiabeticRetinopathy.relevantPeriod\n        and MacularEdemaAbsentCommunicated.sentDatetime during day of \"Measurement Period\"\n","elm":{"library":{"localId":"0","annotation":[{"translatorVersion":"3.14.0","translatorOptions":"EnableAnnotations,EnableLocators,EnableResultTypes,EnableDetailedErrors,DisableListDemotion,DisableListPromotion","signatureLevel":"None","type":"CqlToElmInfo"},{"type":"Annotation","s":{"r":"666","s":[{"value":["","library CMS142DRCommWithPhysicianManagingDiabetesQDM version '14.0.000'"]}]}}],"identifier":{"id":"CMS142DRCommWithPhysicianManagingDiabetesQDM","version":"14.0.000"},"schemaIdentifier":{"id":"urn:hl7-org:elm","version":"r1"},"usings":{"def":[{"localId":"1","localIdentifier":"System","uri":"urn:hl7-org:elm-types:r1"},{"localId":"206","locator":"3:1-3:23","localIdentifier":"QDM","uri":"urn:healthit-gov:qdm:v5_6","version":"5.6","annotation":[{"type":"Annotation","s":{"r":"206","s":[{"value":["","using "]},{"s":[{"value":["QDM"]}]},{"value":[" version '5.6'"]}]}}]}]},"includes":{"def":[{"localId":"207","locator":"5:1-5:53","localIdentifier":"Global","path":"CQMCommonQDM","version":"9.0.000","annotation":[{"type":"Annotation","s":{"r":"207","s":[{"value":["","include "]},{"s":[{"value":["CQMCommonQDM"]}]},{"value":["  version ","'9.0.000'"," called ","Global"]}]}}]}]},"parameters":{"def":[{"localId":"229","locator":"29:1-29:49","name":"Measurement Period","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"229","s":[{"value":["","parameter ","\"Measurement Period\""," "]},{"r":"230","s":[{"value":["Interval\u003c"]},{"r":"231","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}}],"resultTypeSpecifier":{"localId":"234","type":"IntervalTypeSpecifier","pointType":{"localId":"235","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"parameterTypeSpecifier":{"localId":"230","locator":"29:32-29:49","type":"IntervalTypeSpecifier","resultTypeSpecifier":{"localId":"232","type":"IntervalTypeSpecifier","pointType":{"localId":"233","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"pointType":{"localId":"231","locator":"29:41-29:48","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},"codeSystems":{"def":[{"localId":"208","locator":"7:1-7:55","resultTypeName":"{urn:hl7-org:elm-types:r1}CodeSystem","name":"SNOMEDCT","id":"2.16.840.1.113883.6.96","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"208","s":[{"value":["","codesystem ","\"SNOMEDCT\"",": ","'urn:oid:2.16.840.1.113883.6.96'"]}]}}]},{"localId":"209","locator":"8:1-8:53","resultTypeName":"{urn:hl7-org:elm-types:r1}CodeSystem","name":"ActCode","id":"2.16.840.1.113883.5.4","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"209","s":[{"value":["","codesystem ","\"ActCode\"",": ","'urn:oid:2.16.840.1.113883.5.4'"]}]}}]}]},"valueSets":{"def":[{"localId":"210","locator":"10:1-10:110","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Care Services in Long Term Residential Facility","id":"2.16.840.1.113883.3.464.1003.101.12.1014","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"210","s":[{"value":["","valueset ","\"Care Services in Long Term Residential Facility\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1014'"]}]}}],"codeSystem":[]},{"localId":"211","locator":"11:1-11:79","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Federal Administrative Sex","id":"2.16.840.1.113762.1.4.1021.121","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"211","s":[{"value":["","valueset ","\"Federal Administrative Sex\"",": ","'urn:oid:2.16.840.1.113762.1.4.1021.121'"]}]}}],"codeSystem":[]},{"localId":"212","locator":"12:1-12:72","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Diabetic Retinopathy","id":"2.16.840.1.113883.3.526.3.327","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"212","s":[{"value":["","valueset ","\"Diabetic Retinopathy\"",": ","'urn:oid:2.16.840.1.113883.3.526.3.327'"]}]}}],"codeSystem":[]},{"localId":"213","locator":"13:1-13:58","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Ethnicity","id":"2.16.840.1.114222.4.11.837","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"213","s":[{"value":["","valueset ","\"Ethnicity\"",": ","'urn:oid:2.16.840.1.114222.4.11.837'"]}]}}],"codeSystem":[]},{"localId":"214","locator":"14:1-14:94","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Level of Severity of Retinopathy Findings","id":"2.16.840.1.113883.3.526.3.1283","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"214","s":[{"value":["","valueset ","\"Level of Severity of Retinopathy Findings\"",": ","'urn:oid:2.16.840.1.113883.3.526.3.1283'"]}]}}],"codeSystem":[]},{"localId":"215","locator":"15:1-15:83","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Macular Edema Findings Present","id":"2.16.840.1.113883.3.526.3.1320","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"215","s":[{"value":["","valueset ","\"Macular Edema Findings Present\"",": ","'urn:oid:2.16.840.1.113883.3.526.3.1320'"]}]}}],"codeSystem":[]},{"localId":"216","locator":"16:1-16:65","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Macular Exam","id":"2.16.840.1.113883.3.526.3.1251","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"216","s":[{"value":["","valueset ","\"Macular Exam\"",": ","'urn:oid:2.16.840.1.113883.3.526.3.1251'"]}]}}],"codeSystem":[]},{"localId":"217","locator":"17:1-17:67","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Medical Reason","id":"2.16.840.1.113883.3.526.3.1007","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"217","s":[{"value":["","valueset ","\"Medical Reason\"",": ","'urn:oid:2.16.840.1.113883.3.526.3.1007'"]}]}}],"codeSystem":[]},{"localId":"218","locator":"18:1-18:85","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Nursing Facility Visit","id":"2.16.840.1.113883.3.464.1003.101.12.1012","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"218","s":[{"value":["","valueset ","\"Nursing Facility Visit\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1012'"]}]}}],"codeSystem":[]},{"localId":"219","locator":"19:1-19:75","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Office Visit","id":"2.16.840.1.113883.3.464.1003.101.12.1001","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"219","s":[{"value":["","valueset ","\"Office Visit\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1001'"]}]}}],"codeSystem":[]},{"localId":"220","locator":"20:1-20:78","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Ophthalmological Services","id":"2.16.840.1.113883.3.526.3.1285","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"220","s":[{"value":["","valueset ","\"Ophthalmological Services\"",": ","'urn:oid:2.16.840.1.113883.3.526.3.1285'"]}]}}],"codeSystem":[]},{"localId":"221","locator":"21:1-21:86","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Outpatient Consultation","id":"2.16.840.1.113883.3.464.1003.101.12.1008","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"221","s":[{"value":["","valueset ","\"Outpatient Consultation\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1008'"]}]}}],"codeSystem":[]},{"localId":"222","locator":"22:1-22:67","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Patient Reason","id":"2.16.840.1.113883.3.526.3.1008","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"222","s":[{"value":["","valueset ","\"Patient Reason\"",": ","'urn:oid:2.16.840.1.113883.3.526.3.1008'"]}]}}],"codeSystem":[]},{"localId":"223","locator":"23:1-23:60","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Payer Type","id":"2.16.840.1.114222.4.11.3591","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"223","s":[{"value":["","valueset ","\"Payer Type\"",": ","'urn:oid:2.16.840.1.114222.4.11.3591'"]}]}}],"codeSystem":[]},{"localId":"224","locator":"24:1-24:53","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Race","id":"2.16.840.1.114222.4.11.836","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"224","s":[{"value":["","valueset ","\"Race\"",": ","'urn:oid:2.16.840.1.114222.4.11.836'"]}]}}],"codeSystem":[]}]},"codes":{"def":[{"localId":"225","locator":"26:1-26:117","resultTypeName":"{urn:hl7-org:elm-types:r1}Code","name":"Macular edema absent (situation)","id":"428341000124108","display":"Macular edema absent (situation)","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"225","s":[{"value":["","code ","\"Macular edema absent (situation)\"",": ","'428341000124108'"," from "]},{"r":"226","s":[{"value":["\"SNOMEDCT\""]}]},{"value":[" display ","'Macular edema absent (situation)'"]}]}}],"codeSystem":{"localId":"226","locator":"26:65-26:74","resultTypeName":"{urn:hl7-org:elm-types:r1}CodeSystem","name":"SNOMEDCT"}},{"localId":"227","locator":"27:1-27:53","resultTypeName":"{urn:hl7-org:elm-types:r1}Code","name":"virtual","id":"VR","display":"virtual","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"227","s":[{"value":["","code ","\"virtual\"",": ","'VR'"," from "]},{"r":"228","s":[{"value":["\"ActCode\""]}]},{"value":[" display ","'virtual'"]}]}}],"codeSystem":{"localId":"228","locator":"27:27-27:35","resultTypeName":"{urn:hl7-org:elm-types:r1}CodeSystem","name":"ActCode"}}]},"contexts":{"def":[{"localId":"239","locator":"31:1-31:15","name":"Patient"}]},"statements":{"def":[{"localId":"237","locator":"31:1-31:15","name":"Patient","context":"Patient","expression":{"localId":"238","type":"SingletonFrom","signature":[],"operand":{"localId":"236","locator":"31:1-31:15","dataType":"{urn:healthit-gov:qdm:v5_6}Patient","templateId":"Patient","type":"Retrieve","include":[],"codeFilter":[],"dateFilter":[],"otherFilter":[]}}},{"localId":"265","locator":"97:1-104:48","name":"Qualifying Encounter During Day of Measurement Period","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"265","s":[{"value":["","define ","\"Qualifying Encounter During Day of Measurement Period\"",":\n  "]},{"r":"331","s":[{"s":[{"r":"266","s":[{"r":"307","s":[{"value":["( "]},{"r":"307","s":[{"r":"298","s":[{"r":"288","s":[{"r":"279","s":[{"r":"269","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Office Visit\""]}]},{"value":["]"]}]},{"value":["\n    union "]},{"r":"275","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Ophthalmological Services\""]}]},{"value":["]"]}]}]},{"value":["\n    union "]},{"r":"284","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Outpatient Consultation\""]}]},{"value":["]"]}]}]},{"value":["\n    union "]},{"r":"293","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Care Services in Long Term Residential Facility\""]}]},{"value":["]"]}]}]},{"value":["\n    union "]},{"r":"303","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Nursing Facility Visit\""]}]},{"value":["]"]}]}]},{"value":[" )"]}]},{"value":[" ","QualifyingEncounter"]}]}]},{"value":["\n    "]},{"r":"314","s":[{"value":["where "]},{"r":"314","s":[{"r":"324","s":[{"r":"316","s":[{"r":"315","s":[{"value":["QualifyingEncounter"]}]},{"value":["."]},{"r":"316","s":[{"value":["relevantPeriod"]}]}]},{"r":"324","value":[" ","during day of"," "]},{"r":"321","s":[{"value":["\"Measurement Period\""]}]}]},{"value":["\n      and "]},{"r":"330","s":[{"r":"328","s":[{"r":"327","s":[{"value":["QualifyingEncounter"]}]},{"value":["."]},{"r":"328","s":[{"value":["class"]}]}]},{"value":[" ","!~"," "]},{"r":"329","s":[{"value":["\"virtual\""]}]}]}]}]}]}]}}],"resultTypeSpecifier":{"localId":"803","type":"ListTypeSpecifier","elementType":{"localId":"804","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"331","locator":"98:3-104:48","type":"Query","resultTypeSpecifier":{"localId":"332","type":"ListTypeSpecifier","elementType":{"localId":"333","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"source":[{"localId":"266","locator":"98:3-102:82","alias":"QualifyingEncounter","resultTypeSpecifier":{"localId":"312","type":"ListTypeSpecifier","elementType":{"localId":"313","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"307","locator":"98:3-102:62","type":"Union","resultTypeSpecifier":{"localId":"310","type":"ListTypeSpecifier","elementType":{"localId":"311","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"signature":[],"operand":[{"localId":"298","locator":"98:5-101:85","type":"Union","resultTypeSpecifier":{"localId":"299","type":"ListTypeSpecifier","elementType":{"localId":"300","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"signature":[],"operand":[{"localId":"279","locator":"98:5-99:63","type":"Union","resultTypeSpecifier":{"localId":"280","type":"ListTypeSpecifier","elementType":{"localId":"281","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"signature":[],"operand":[{"localId":"269","locator":"98:5-98:44","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","resultTypeSpecifier":{"localId":"271","type":"ListTypeSpecifier","elementType":{"localId":"272","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"codes":{"localId":"268","locator":"98:30-98:43","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Office Visit","preserve":true,"type":"ValueSetRef"},"include":[],"codeFilter":[],"dateFilter":[],"otherFilter":[]},{"localId":"275","locator":"99:11-99:63","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","resultTypeSpecifier":{"localId":"277","type":"ListTypeSpecifier","elementType":{"localId":"278","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"codes":{"localId":"274","locator":"99:36-99:62","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Ophthalmological Services","preserve":true,"type":"ValueSetRef"},"include":[],"codeFilter":[],"dateFilter":[],"otherFilter":[]}]},{"localId":"297","type":"Union","signature":[],"operand":[{"localId":"284","locator":"100:11-100:61","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","resultTypeSpecifier":{"localId":"286","type":"ListTypeSpecifier","elementType":{"localId":"287","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"codes":{"localId":"283","locator":"100:36-100:60","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Outpatient Consultation","preserve":true,"type":"ValueSetRef"},"include":[],"codeFilter":[],"dateFilter":[],"otherFilter":[]},{"localId":"293","locator":"101:11-101:85","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","resultTypeSpecifier":{"localId":"295","type":"ListTypeSpecifier","elementType":{"localId":"296","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"codes":{"localId":"292","locator":"101:36-101:84","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Care Services in Long Term Residential Facility","preserve":true,"type":"ValueSetRef"},"include":[],"codeFilter":[],"dateFilter":[],"otherFilter":[]}]}]},{"localId":"303","locator":"102:11-102:60","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","resultTypeSpecifier":{"localId":"305","type":"ListTypeSpecifier","elementType":{"localId":"306","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"codes":{"localId":"302","locator":"102:36-102:59","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Nursing Facility Visit","preserve":true,"type":"ValueSetRef"},"include":[],"codeFilter":[],"dateFilter":[],"otherFilter":[]}]}}],"let":[],"relationship":[],"where":{"localId":"314","locator":"103:5-104:48","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"And","signature":[],"operand":[{"localId":"324","locator":"103:11-103:79","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","precision":"Day","type":"IncludedIn","signature":[],"operand":[{"localId":"316","locator":"103:11-103:44","path":"relevantPeriod","scope":"QualifyingEncounter","type":"Property","resultTypeSpecifier":{"localId":"319","type":"IntervalTypeSpecifier","pointType":{"localId":"320","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}},{"localId":"321","locator":"103:60-103:79","name":"Measurement Period","type":"ParameterRef","resultTypeSpecifier":{"localId":"322","type":"IntervalTypeSpecifier","pointType":{"localId":"323","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"330","locator":"104:11-104:48","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"Not","signature":[],"operand":{"localId":"326","locator":"104:11-104:48","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"Equivalent","signature":[],"operand":[{"localId":"328","locator":"104:11-104:35","resultTypeName":"{urn:hl7-org:elm-types:r1}Code","path":"class","scope":"QualifyingEncounter","type":"Property"},{"localId":"329","locator":"104:40-104:48","resultTypeName":"{urn:hl7-org:elm-types:r1}Code","name":"virtual","type":"CodeRef"}]}}]}}},{"localId":"262","locator":"42:1-45:108","name":"Diabetic Retinopathy Encounter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"262","s":[{"value":["","define ","\"Diabetic Retinopathy Encounter\"",":\n  "]},{"r":"368","s":[{"s":[{"r":"263","s":[{"r":"336","s":[{"s":[{"value":["\"Qualifying Encounter During Day of Measurement Period\""]}]}]},{"value":[" ","ValidQualifyingEncounter"]}]}]},{"value":["\n    "]},{"r":"365","s":[{"value":["with "]},{"r":"341","s":[{"r":"344","s":[{"r":"344","s":[{"value":["[","\"Diagnosis\"",": "]},{"s":[{"value":["\"Diabetic Retinopathy\""]}]},{"value":["]"]}]}]},{"value":[" ","DiabeticRetinopathy"]}]},{"value":["\n      such that "]},{"r":"364","s":[{"r":"353","s":[{"r":"352","s":[{"value":["DiabeticRetinopathy"]}]},{"value":["."]},{"r":"353","s":[{"value":["prevalencePeriod"]}]}]},{"r":"364","value":[" ","overlaps day of"," "]},{"r":"359","s":[{"r":"358","s":[{"value":["ValidQualifyingEncounter"]}]},{"value":["."]},{"r":"359","s":[{"value":["relevantPeriod"]}]}]}]}]}]}]}}],"resultTypeSpecifier":{"localId":"601","type":"ListTypeSpecifier","elementType":{"localId":"602","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"368","locator":"43:3-45:108","type":"Query","resultTypeSpecifier":{"localId":"369","type":"ListTypeSpecifier","elementType":{"localId":"370","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"source":[{"localId":"263","locator":"43:3-43:82","alias":"ValidQualifyingEncounter","resultTypeSpecifier":{"localId":"339","type":"ListTypeSpecifier","elementType":{"localId":"340","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"336","locator":"43:3-43:57","name":"Qualifying Encounter During Day of Measurement Period","type":"ExpressionRef","resultTypeSpecifier":{"localId":"337","type":"ListTypeSpecifier","elementType":{"localId":"338","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}}}],"let":[],"relationship":[{"localId":"365","locator":"44:5-45:108","alias":"DiabeticRetinopathy","type":"With","resultTypeSpecifier":{"localId":"366","type":"ListTypeSpecifier","elementType":{"localId":"367","name":"{urn:healthit-gov:qdm:v5_6}Diagnosis","type":"NamedTypeSpecifier"}},"expression":{"localId":"344","locator":"44:10-44:46","dataType":"{urn:healthit-gov:qdm:v5_6}Diagnosis","codeProperty":"code","codeComparator":"in","type":"Retrieve","resultTypeSpecifier":{"localId":"348","type":"ListTypeSpecifier","elementType":{"localId":"349","name":"{urn:healthit-gov:qdm:v5_6}Diagnosis","type":"NamedTypeSpecifier"}},"codes":{"localId":"343","locator":"44:24-44:45","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Diabetic Retinopathy","preserve":true,"type":"ValueSetRef"},"include":[],"codeFilter":[],"dateFilter":[],"otherFilter":[]},"suchThat":{"localId":"364","locator":"45:17-45:108","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","precision":"Day","type":"Overlaps","signature":[],"operand":[{"localId":"353","locator":"45:17-45:52","path":"prevalencePeriod","scope":"DiabeticRetinopathy","type":"Property","resultTypeSpecifier":{"localId":"356","type":"IntervalTypeSpecifier","pointType":{"localId":"357","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}},{"localId":"359","locator":"45:70-45:108","path":"relevantPeriod","scope":"ValidQualifyingEncounter","type":"Property","resultTypeSpecifier":{"localId":"362","type":"IntervalTypeSpecifier","pointType":{"localId":"363","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]}}]}},{"localId":"244","locator":"93:1-95:47","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","name":"Initial Population","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"244","s":[{"value":["","define ","\"Initial Population\"",":\n  "]},{"r":"245","s":[{"r":"246","s":[{"r":"258","s":[{"value":["AgeInYearsAt","("]},{"r":"247","s":[{"value":["date from "]},{"r":"248","s":[{"value":["start of "]},{"r":"249","s":[{"value":["\"Measurement Period\""]}]}]}]},{"value":[")"]}]},{"r":"259","value":[" ","\u003e="," ","18"]}]},{"value":["\n    and "]},{"r":"260","s":[{"value":["exists "]},{"r":"373","s":[{"value":["\"Diabetic Retinopathy Encounter\""]}]}]}]}]}}],"expression":{"localId":"245","locator":"94:3-95:47","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"And","signature":[],"operand":[{"localId":"246","locator":"94:3-94:61","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"GreaterOrEqual","signature":[],"operand":[{"localId":"258","locator":"94:3-94:55","resultTypeName":"{urn:hl7-org:elm-types:r1}Integer","precision":"Year","type":"CalculateAgeAt","signature":[],"operand":[{"localId":"257","type":"ToDate","signature":[],"operand":{"localId":"255","path":"birthDatetime","type":"Property","source":{"localId":"254","name":"Patient","type":"ExpressionRef"}}},{"localId":"247","locator":"94:16-94:54","resultTypeName":"{urn:hl7-org:elm-types:r1}Date","type":"DateFrom","signature":[],"operand":{"localId":"248","locator":"94:26-94:54","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"249","locator":"94:35-94:54","name":"Measurement Period","type":"ParameterRef","resultTypeSpecifier":{"localId":"250","type":"IntervalTypeSpecifier","pointType":{"localId":"251","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}}]},{"localId":"259","locator":"94:60-94:61","resultTypeName":"{urn:hl7-org:elm-types:r1}Integer","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"18","type":"Literal"}]},{"localId":"260","locator":"95:9-95:47","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"Exists","signature":[],"operand":{"localId":"373","locator":"95:16-95:47","name":"Diabetic Retinopathy Encounter","type":"ExpressionRef","resultTypeSpecifier":{"localId":"374","type":"ListTypeSpecifier","elementType":{"localId":"375","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}}}]}},{"localId":"379","locator":"47:1-51:40","name":"Macular Exam Performed","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"379","s":[{"value":["","define ","\"Macular Exam Performed\"",":\n  "]},{"r":"438","s":[{"s":[{"r":"380","s":[{"r":"383","s":[{"r":"383","s":[{"value":["[","\"Diagnostic Study, Performed\"",": "]},{"s":[{"value":["\"Macular Exam\""]}]},{"value":["]"]}]}]},{"value":[" ","MacularExam"]}]}]},{"value":["\n    "]},{"r":"419","s":[{"value":["with "]},{"r":"391","s":[{"r":"392","s":[{"s":[{"value":["\"Diabetic Retinopathy Encounter\""]}]}]},{"value":[" ","EncounterDiabeticRetinopathy"]}]},{"value":["\n      such that "]},{"r":"417","s":[{"r":"406","s":[{"r":"397","s":[{"value":["Global"]}]},{"value":["."]},{"r":"406","s":[{"value":["\"NormalizeInterval\""," ( "]},{"r":"399","s":[{"r":"398","s":[{"value":["MacularExam"]}]},{"value":["."]},{"r":"399","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"401","s":[{"r":"400","s":[{"value":["MacularExam"]}]},{"value":["."]},{"r":"401","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]},{"r":"417","value":[" ","during day of"," "]},{"r":"412","s":[{"r":"411","s":[{"value":["EncounterDiabeticRetinopathy"]}]},{"value":["."]},{"r":"412","s":[{"value":["relevantPeriod"]}]}]}]}]},{"value":["\n    "]},{"r":"437","s":[{"value":["where "]},{"r":"437","s":[{"r":"423","s":[{"r":"422","s":[{"value":["MacularExam"]}]},{"value":["."]},{"r":"423","s":[{"value":["result"]}]}]},{"value":[" is not null"]}]}]}]}]}}],"resultTypeSpecifier":{"localId":"603","type":"ListTypeSpecifier","elementType":{"localId":"604","name":"{urn:healthit-gov:qdm:v5_6}PositiveDiagnosticStudyPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"438","locator":"48:3-51:40","type":"Query","resultTypeSpecifier":{"localId":"439","type":"ListTypeSpecifier","elementType":{"localId":"440","name":"{urn:healthit-gov:qdm:v5_6}PositiveDiagnosticStudyPerformed","type":"NamedTypeSpecifier"}},"source":[{"localId":"380","locator":"48:3-48:61","alias":"MacularExam","resultTypeSpecifier":{"localId":"389","type":"ListTypeSpecifier","elementType":{"localId":"390","name":"{urn:healthit-gov:qdm:v5_6}PositiveDiagnosticStudyPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"383","locator":"48:3-48:49","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveDiagnosticStudyPerformed","templateId":"PositiveDiagnosticStudyPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","resultTypeSpecifier":{"localId":"387","type":"ListTypeSpecifier","elementType":{"localId":"388","name":"{urn:healthit-gov:qdm:v5_6}PositiveDiagnosticStudyPerformed","type":"NamedTypeSpecifier"}},"codes":{"localId":"382","locator":"48:35-48:48","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Macular Exam","preserve":true,"type":"ValueSetRef"},"include":[],"codeFilter":[],"dateFilter":[],"otherFilter":[]}}],"let":[],"relationship":[{"localId":"419","locator":"49:5-50:161","alias":"EncounterDiabeticRetinopathy","type":"With","resultTypeSpecifier":{"localId":"420","type":"ListTypeSpecifier","elementType":{"localId":"421","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"392","locator":"49:10-49:41","name":"Diabetic Retinopathy Encounter","type":"ExpressionRef","resultTypeSpecifier":{"localId":"393","type":"ListTypeSpecifier","elementType":{"localId":"394","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}},"suchThat":{"localId":"417","locator":"50:17-50:161","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","precision":"Day","type":"IncludedIn","signature":[],"operand":[{"localId":"406","locator":"50:17-50:103","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","resultTypeSpecifier":{"localId":"409","type":"IntervalTypeSpecifier","pointType":{"localId":"410","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"signature":[],"operand":[{"localId":"399","locator":"50:46-50:73","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","path":"relevantDatetime","scope":"MacularExam","type":"Property"},{"localId":"401","locator":"50:76-50:101","path":"relevantPeriod","scope":"MacularExam","type":"Property","resultTypeSpecifier":{"localId":"404","type":"IntervalTypeSpecifier","pointType":{"localId":"405","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"412","locator":"50:119-50:161","path":"relevantPeriod","scope":"EncounterDiabeticRetinopathy","type":"Property","resultTypeSpecifier":{"localId":"415","type":"IntervalTypeSpecifier","pointType":{"localId":"416","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]}}],"where":{"localId":"437","locator":"51:5-51:40","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"Not","signature":[],"operand":{"localId":"436","locator":"51:11-51:40","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"IsNull","signature":[],"operand":{"localId":"423","locator":"51:11-51:28","path":"result","scope":"MacularExam","type":"Property","resultTypeSpecifier":{"localId":"430","type":"ChoiceTypeSpecifier","choice":[{"localId":"431","name":"{urn:hl7-org:elm-types:r1}Integer","type":"NamedTypeSpecifier"},{"localId":"432","name":"{urn:hl7-org:elm-types:r1}Decimal","type":"NamedTypeSpecifier"},{"localId":"433","name":"{urn:hl7-org:elm-types:r1}Code","type":"NamedTypeSpecifier"},{"localId":"434","name":"{urn:hl7-org:elm-types:r1}Quantity","type":"NamedTypeSpecifier"},{"localId":"435","name":"{urn:hl7-org:elm-types:r1}Ratio","type":"NamedTypeSpecifier"}]}}}}}},{"localId":"241","locator":"33:1-35:39","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","name":"Denominator","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"241","s":[{"value":["","define ","\"Denominator\"",":\n  "]},{"r":"242","s":[{"r":"376","s":[{"value":["\"Initial Population\""]}]},{"value":["\n    and "]},{"r":"377","s":[{"value":["exists "]},{"r":"443","s":[{"value":["\"Macular Exam Performed\""]}]}]}]}]}}],"expression":{"localId":"242","locator":"34:3-35:39","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"And","signature":[],"operand":[{"localId":"376","locator":"34:3-34:22","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","name":"Initial Population","type":"ExpressionRef"},{"localId":"377","locator":"35:9-35:39","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"Exists","signature":[],"operand":{"localId":"443","locator":"35:16-35:39","name":"Macular Exam Performed","type":"ExpressionRef","resultTypeSpecifier":{"localId":"444","type":"ListTypeSpecifier","elementType":{"localId":"445","name":"{urn:healthit-gov:qdm:v5_6}PositiveDiagnosticStudyPerformed","type":"NamedTypeSpecifier"}}}}]}},{"localId":"452","locator":"68:1-73:80","name":"Medical or Patient Reason for Not Communicating Level of Severity of Retinopathy","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"452","s":[{"value":["","define ","\"Medical or Patient Reason for Not Communicating Level of Severity of Retinopathy\"",":\n  "]},{"r":"492","s":[{"s":[{"r":"453","s":[{"r":"456","s":[{"r":"456","s":[{"value":["[","\"Communication, Not Performed\"",": "]},{"s":[{"value":["\"Level of Severity of Retinopathy Findings\""]}]},{"value":["]"]}]}]},{"value":[" ","LevelOfSeverityNotCommunicated"]}]}]},{"value":["\n    "]},{"r":"480","s":[{"value":["with "]},{"r":"464","s":[{"r":"465","s":[{"s":[{"value":["\"Diabetic Retinopathy Encounter\""]}]}]},{"value":[" ","EncounterDiabeticRetinopathy"]}]},{"value":["\n      such that "]},{"r":"479","s":[{"r":"471","s":[{"r":"470","s":[{"value":["LevelOfSeverityNotCommunicated"]}]},{"value":["."]},{"r":"471","s":[{"value":["authorDatetime"]}]}]},{"r":"479","value":[" ","during day of"," "]},{"r":"473","s":[{"r":"472","s":[{"value":["EncounterDiabeticRetinopathy"]}]},{"value":["."]},{"r":"473","s":[{"value":["relevantPeriod"]}]}]}]}]},{"value":["\n    "]},{"r":"483","s":[{"value":["where "]},{"r":"483","s":[{"value":["( "]},{"r":"483","s":[{"r":"487","s":[{"r":"485","s":[{"r":"484","s":[{"value":["LevelOfSeverityNotCommunicated"]}]},{"value":["."]},{"r":"485","s":[{"value":["negationRationale"]}]}]},{"value":[" in "]},{"r":"486","s":[{"value":["\"Medical Reason\""]}]}]},{"value":["\n        or "]},{"r":"491","s":[{"r":"489","s":[{"r":"488","s":[{"value":["LevelOfSeverityNotCommunicated"]}]},{"value":["."]},{"r":"489","s":[{"value":["negationRationale"]}]}]},{"value":[" in "]},{"r":"490","s":[{"value":["\"Patient Reason\""]}]}]}]},{"value":[")"]}]}]}]}]}}],"resultTypeSpecifier":{"localId":"609","type":"ListTypeSpecifier","elementType":{"localId":"610","name":"{urn:healthit-gov:qdm:v5_6}NegativeCommunicationPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"492","locator":"69:3-73:80","type":"Query","resultTypeSpecifier":{"localId":"493","type":"ListTypeSpecifier","elementType":{"localId":"494","name":"{urn:healthit-gov:qdm:v5_6}NegativeCommunicationPerformed","type":"NamedTypeSpecifier"}},"source":[{"localId":"453","locator":"69:3-69:110","alias":"LevelOfSeverityNotCommunicated","resultTypeSpecifier":{"localId":"462","type":"ListTypeSpecifier","elementType":{"localId":"463","name":"{urn:healthit-gov:qdm:v5_6}NegativeCommunicationPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"456","locator":"69:3-69:79","dataType":"{urn:healthit-gov:qdm:v5_6}NegativeCommunicationPerformed","templateId":"NegativeCommunicationPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","resultTypeSpecifier":{"localId":"460","type":"ListTypeSpecifier","elementType":{"localId":"461","name":"{urn:healthit-gov:qdm:v5_6}NegativeCommunicationPerformed","type":"NamedTypeSpecifier"}},"codes":{"localId":"455","locator":"69:36-69:78","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Level of Severity of Retinopathy Findings","preserve":true,"type":"ValueSetRef"},"include":[],"codeFilter":[],"dateFilter":[],"otherFilter":[]}}],"let":[],"relationship":[{"localId":"480","locator":"70:5-71:119","alias":"EncounterDiabeticRetinopathy","type":"With","resultTypeSpecifier":{"localId":"481","type":"ListTypeSpecifier","elementType":{"localId":"482","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"465","locator":"70:10-70:41","name":"Diabetic Retinopathy Encounter","type":"ExpressionRef","resultTypeSpecifier":{"localId":"466","type":"ListTypeSpecifier","elementType":{"localId":"467","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}},"suchThat":{"localId":"479","locator":"71:17-71:119","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","precision":"Day","type":"In","signature":[],"operand":[{"localId":"471","locator":"71:17-71:61","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","path":"authorDatetime","scope":"LevelOfSeverityNotCommunicated","type":"Property"},{"localId":"473","locator":"71:77-71:119","path":"relevantPeriod","scope":"EncounterDiabeticRetinopathy","type":"Property","resultTypeSpecifier":{"localId":"476","type":"IntervalTypeSpecifier","pointType":{"localId":"477","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]}}],"where":{"localId":"483","locator":"72:5-73:80","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"Or","signature":[],"operand":[{"localId":"487","locator":"72:13-72:80","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"InValueSet","signature":[],"code":{"localId":"485","locator":"72:13-72:60","resultTypeName":"{urn:hl7-org:elm-types:r1}Code","path":"negationRationale","scope":"LevelOfSeverityNotCommunicated","type":"Property"},"valueset":{"localId":"486","locator":"72:65-72:80","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Medical Reason","preserve":true}},{"localId":"491","locator":"73:12-73:79","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"InValueSet","signature":[],"code":{"localId":"489","locator":"73:12-73:59","resultTypeName":"{urn:hl7-org:elm-types:r1}Code","path":"negationRationale","scope":"LevelOfSeverityNotCommunicated","type":"Property"},"valueset":{"localId":"490","locator":"73:64-73:79","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Patient Reason","preserve":true}}]}}},{"localId":"502","locator":"53:1-58:83","name":"Medical or Patient Reason for Not Communicating Absence of Macular Edema","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"502","s":[{"value":["","define ","\"Medical or Patient Reason for Not Communicating Absence of Macular Edema\"",":\n  "]},{"r":"543","s":[{"s":[{"r":"503","s":[{"r":"506","s":[{"r":"506","s":[{"value":["[","\"Communication, Not Performed\"",": "]},{"s":[{"value":["\"Macular edema absent (situation)\""]}]},{"value":["]"]}]}]},{"value":[" ","MacularEdemaAbsentNotCommunicated"]}]}]},{"value":["\n    "]},{"r":"531","s":[{"value":["with "]},{"r":"515","s":[{"r":"516","s":[{"s":[{"value":["\"Diabetic Retinopathy Encounter\""]}]}]},{"value":[" ","EncounterDiabeticRetinopathy"]}]},{"value":["\n      such that "]},{"r":"530","s":[{"r":"522","s":[{"r":"521","s":[{"value":["MacularEdemaAbsentNotCommunicated"]}]},{"value":["."]},{"r":"522","s":[{"value":["authorDatetime"]}]}]},{"r":"530","value":[" ","during day of"," "]},{"r":"524","s":[{"r":"523","s":[{"value":["EncounterDiabeticRetinopathy"]}]},{"value":["."]},{"r":"524","s":[{"value":["relevantPeriod"]}]}]}]}]},{"value":["\n    "]},{"r":"534","s":[{"value":["where "]},{"r":"534","s":[{"value":["( "]},{"r":"534","s":[{"r":"538","s":[{"r":"536","s":[{"r":"535","s":[{"value":["MacularEdemaAbsentNotCommunicated"]}]},{"value":["."]},{"r":"536","s":[{"value":["negationRationale"]}]}]},{"value":[" in "]},{"r":"537","s":[{"value":["\"Medical Reason\""]}]}]},{"value":["\n        or "]},{"r":"542","s":[{"r":"540","s":[{"r":"539","s":[{"value":["MacularEdemaAbsentNotCommunicated"]}]},{"value":["."]},{"r":"540","s":[{"value":["negationRationale"]}]}]},{"value":[" in "]},{"r":"541","s":[{"value":["\"Patient Reason\""]}]}]}]},{"value":[")"]}]}]}]}]}}],"resultTypeSpecifier":{"localId":"605","type":"ListTypeSpecifier","elementType":{"localId":"606","name":"{urn:healthit-gov:qdm:v5_6}NegativeCommunicationPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"543","locator":"54:3-58:83","type":"Query","resultTypeSpecifier":{"localId":"544","type":"ListTypeSpecifier","elementType":{"localId":"545","name":"{urn:healthit-gov:qdm:v5_6}NegativeCommunicationPerformed","type":"NamedTypeSpecifier"}},"source":[{"localId":"503","locator":"54:3-54:104","alias":"MacularEdemaAbsentNotCommunicated","resultTypeSpecifier":{"localId":"513","type":"ListTypeSpecifier","elementType":{"localId":"514","name":"{urn:healthit-gov:qdm:v5_6}NegativeCommunicationPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"506","locator":"54:3-54:70","dataType":"{urn:healthit-gov:qdm:v5_6}NegativeCommunicationPerformed","templateId":"NegativeCommunicationPerformed","codeProperty":"code","codeComparator":"~","type":"Retrieve","resultTypeSpecifier":{"localId":"511","type":"ListTypeSpecifier","elementType":{"localId":"512","name":"{urn:healthit-gov:qdm:v5_6}NegativeCommunicationPerformed","type":"NamedTypeSpecifier"}},"codes":{"localId":"508","type":"ToList","signature":[],"operand":{"localId":"505","locator":"54:36-54:69","resultTypeName":"{urn:hl7-org:elm-types:r1}Code","name":"Macular edema absent (situation)","type":"CodeRef"}},"include":[],"codeFilter":[],"dateFilter":[],"otherFilter":[]}}],"let":[],"relationship":[{"localId":"531","locator":"55:5-56:122","alias":"EncounterDiabeticRetinopathy","type":"With","resultTypeSpecifier":{"localId":"532","type":"ListTypeSpecifier","elementType":{"localId":"533","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"516","locator":"55:10-55:41","name":"Diabetic Retinopathy Encounter","type":"ExpressionRef","resultTypeSpecifier":{"localId":"517","type":"ListTypeSpecifier","elementType":{"localId":"518","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}},"suchThat":{"localId":"530","locator":"56:17-56:122","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","precision":"Day","type":"In","signature":[],"operand":[{"localId":"522","locator":"56:17-56:64","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","path":"authorDatetime","scope":"MacularEdemaAbsentNotCommunicated","type":"Property"},{"localId":"524","locator":"56:80-56:122","path":"relevantPeriod","scope":"EncounterDiabeticRetinopathy","type":"Property","resultTypeSpecifier":{"localId":"527","type":"IntervalTypeSpecifier","pointType":{"localId":"528","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]}}],"where":{"localId":"534","locator":"57:5-58:83","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"Or","signature":[],"operand":[{"localId":"538","locator":"57:13-57:83","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"InValueSet","signature":[],"code":{"localId":"536","locator":"57:13-57:63","resultTypeName":"{urn:hl7-org:elm-types:r1}Code","path":"negationRationale","scope":"MacularEdemaAbsentNotCommunicated","type":"Property"},"valueset":{"localId":"537","locator":"57:68-57:83","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Medical Reason","preserve":true}},{"localId":"542","locator":"58:12-58:82","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"InValueSet","signature":[],"code":{"localId":"540","locator":"58:12-58:62","resultTypeName":"{urn:hl7-org:elm-types:r1}Code","path":"negationRationale","scope":"MacularEdemaAbsentNotCommunicated","type":"Property"},"valueset":{"localId":"541","locator":"58:67-58:82","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Patient Reason","preserve":true}}]}}},{"localId":"553","locator":"60:1-66:5","name":"Medical or Patient Reason for Not Communicating Presence of Macular Edema","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"553","s":[{"value":["","define ","\"Medical or Patient Reason for Not Communicating Presence of Macular Edema\"",":\n  "]},{"r":"593","s":[{"s":[{"r":"554","s":[{"r":"557","s":[{"r":"557","s":[{"value":["[","\"Communication, Not Performed\"",": "]},{"s":[{"value":["\"Macular Edema Findings Present\""]}]},{"value":["]"]}]}]},{"value":[" ","MacularEdemaPresentNotCommunicated"]}]}]},{"value":["\n    "]},{"r":"581","s":[{"value":["with "]},{"r":"565","s":[{"r":"566","s":[{"s":[{"value":["\"Diabetic Retinopathy Encounter\""]}]}]},{"value":[" ","EncounterDiabeticRetinopathy"]}]},{"value":["\n      such that "]},{"r":"580","s":[{"r":"572","s":[{"r":"571","s":[{"value":["MacularEdemaPresentNotCommunicated"]}]},{"value":["."]},{"r":"572","s":[{"value":["authorDatetime"]}]}]},{"r":"580","value":[" ","during day of"," "]},{"r":"574","s":[{"r":"573","s":[{"value":["EncounterDiabeticRetinopathy"]}]},{"value":["."]},{"r":"574","s":[{"value":["relevantPeriod"]}]}]}]}]},{"value":["\n    "]},{"r":"584","s":[{"value":["where "]},{"r":"584","s":[{"value":["( "]},{"r":"584","s":[{"r":"588","s":[{"r":"586","s":[{"r":"585","s":[{"value":["MacularEdemaPresentNotCommunicated"]}]},{"value":["."]},{"r":"586","s":[{"value":["negationRationale"]}]}]},{"value":[" in "]},{"r":"587","s":[{"value":["\"Medical Reason\""]}]}]},{"value":["\n        or "]},{"r":"592","s":[{"r":"590","s":[{"r":"589","s":[{"value":["MacularEdemaPresentNotCommunicated"]}]},{"value":["."]},{"r":"590","s":[{"value":["negationRationale"]}]}]},{"value":[" in "]},{"r":"591","s":[{"value":["\"Patient Reason\""]}]}]}]},{"value":["\n    )"]}]}]}]}]}}],"resultTypeSpecifier":{"localId":"607","type":"ListTypeSpecifier","elementType":{"localId":"608","name":"{urn:healthit-gov:qdm:v5_6}NegativeCommunicationPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"593","locator":"61:3-66:5","type":"Query","resultTypeSpecifier":{"localId":"594","type":"ListTypeSpecifier","elementType":{"localId":"595","name":"{urn:healthit-gov:qdm:v5_6}NegativeCommunicationPerformed","type":"NamedTypeSpecifier"}},"source":[{"localId":"554","locator":"61:3-61:103","alias":"MacularEdemaPresentNotCommunicated","resultTypeSpecifier":{"localId":"563","type":"ListTypeSpecifier","elementType":{"localId":"564","name":"{urn:healthit-gov:qdm:v5_6}NegativeCommunicationPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"557","locator":"61:3-61:68","dataType":"{urn:healthit-gov:qdm:v5_6}NegativeCommunicationPerformed","templateId":"NegativeCommunicationPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","resultTypeSpecifier":{"localId":"561","type":"ListTypeSpecifier","elementType":{"localId":"562","name":"{urn:healthit-gov:qdm:v5_6}NegativeCommunicationPerformed","type":"NamedTypeSpecifier"}},"codes":{"localId":"556","locator":"61:36-61:67","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Macular Edema Findings Present","preserve":true,"type":"ValueSetRef"},"include":[],"codeFilter":[],"dateFilter":[],"otherFilter":[]}}],"let":[],"relationship":[{"localId":"581","locator":"62:5-63:123","alias":"EncounterDiabeticRetinopathy","type":"With","resultTypeSpecifier":{"localId":"582","type":"ListTypeSpecifier","elementType":{"localId":"583","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"566","locator":"62:10-62:41","name":"Diabetic Retinopathy Encounter","type":"ExpressionRef","resultTypeSpecifier":{"localId":"567","type":"ListTypeSpecifier","elementType":{"localId":"568","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}},"suchThat":{"localId":"580","locator":"63:17-63:123","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","precision":"Day","type":"In","signature":[],"operand":[{"localId":"572","locator":"63:17-63:65","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","path":"authorDatetime","scope":"MacularEdemaPresentNotCommunicated","type":"Property"},{"localId":"574","locator":"63:81-63:123","path":"relevantPeriod","scope":"EncounterDiabeticRetinopathy","type":"Property","resultTypeSpecifier":{"localId":"577","type":"IntervalTypeSpecifier","pointType":{"localId":"578","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]}}],"where":{"localId":"584","locator":"64:5-66:5","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"Or","signature":[],"operand":[{"localId":"588","locator":"64:13-64:84","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"InValueSet","signature":[],"code":{"localId":"586","locator":"64:13-64:64","resultTypeName":"{urn:hl7-org:elm-types:r1}Code","path":"negationRationale","scope":"MacularEdemaPresentNotCommunicated","type":"Property"},"valueset":{"localId":"587","locator":"64:69-64:84","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Medical Reason","preserve":true}},{"localId":"592","locator":"65:12-65:83","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"InValueSet","signature":[],"code":{"localId":"590","locator":"65:12-65:63","resultTypeName":"{urn:hl7-org:elm-types:r1}Code","path":"negationRationale","scope":"MacularEdemaPresentNotCommunicated","type":"Property"},"valueset":{"localId":"591","locator":"65:68-65:83","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Patient Reason","preserve":true}}]}}},{"localId":"447","locator":"37:1-40:87","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","name":"Denominator Exceptions","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"447","s":[{"value":["","define ","\"Denominator Exceptions\"",":\n "]},{"r":"448","s":[{"r":"449","s":[{"r":"450","s":[{"value":["exists "]},{"r":"497","s":[{"value":["\"Medical or Patient Reason for Not Communicating Level of Severity of Retinopathy\""]}]}]},{"value":["\n  or "]},{"r":"500","s":[{"value":["exists "]},{"r":"548","s":[{"value":["\"Medical or Patient Reason for Not Communicating Absence of Macular Edema\""]}]}]}]},{"value":["\n  or "]},{"r":"551","s":[{"value":["exists "]},{"r":"598","s":[{"value":["\"Medical or Patient Reason for Not Communicating Presence of Macular Edema\""]}]}]}]}]}}],"expression":{"localId":"448","locator":"38:2-40:87","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"Or","signature":[],"operand":[{"localId":"449","locator":"38:2-39:86","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"Or","signature":[],"operand":[{"localId":"450","locator":"38:2-38:90","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"Exists","signature":[],"operand":{"localId":"497","locator":"38:9-38:90","name":"Medical or Patient Reason for Not Communicating Level of Severity of Retinopathy","type":"ExpressionRef","resultTypeSpecifier":{"localId":"498","type":"ListTypeSpecifier","elementType":{"localId":"499","name":"{urn:healthit-gov:qdm:v5_6}NegativeCommunicationPerformed","type":"NamedTypeSpecifier"}}}},{"localId":"500","locator":"39:6-39:86","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"Exists","signature":[],"operand":{"localId":"548","locator":"39:13-39:86","name":"Medical or Patient Reason for Not Communicating Absence of Macular Edema","type":"ExpressionRef","resultTypeSpecifier":{"localId":"549","type":"ListTypeSpecifier","elementType":{"localId":"550","name":"{urn:healthit-gov:qdm:v5_6}NegativeCommunicationPerformed","type":"NamedTypeSpecifier"}}}}]},{"localId":"551","locator":"40:6-40:87","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"Exists","signature":[],"operand":{"localId":"598","locator":"40:13-40:87","name":"Medical or Patient Reason for Not Communicating Presence of Macular Edema","type":"ExpressionRef","resultTypeSpecifier":{"localId":"599","type":"ListTypeSpecifier","elementType":{"localId":"600","name":"{urn:healthit-gov:qdm:v5_6}NegativeCommunicationPerformed","type":"NamedTypeSpecifier"}}}}]}},{"localId":"616","locator":"106:1-110:87","name":"Level of Severity of Retinopathy Findings Communicated","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"616","s":[{"value":["","define ","\"Level of Severity of Retinopathy Findings Communicated\"",":\n  "]},{"r":"655","s":[{"s":[{"r":"617","s":[{"r":"620","s":[{"r":"620","s":[{"value":["[","\"Communication, Performed\"",": "]},{"s":[{"value":["\"Level of Severity of Retinopathy Findings\""]}]},{"value":["]"]}]}]},{"value":[" ","LevelOfSeverityCommunicated"]}]}]},{"value":["\n    "]},{"r":"652","s":[{"value":["with "]},{"r":"628","s":[{"r":"629","s":[{"s":[{"value":["\"Diabetic Retinopathy Encounter\""]}]}]},{"value":[" ","EncounterDiabeticRetinopathy"]}]},{"value":["\n      such that "]},{"r":"634","s":[{"r":"644","s":[{"r":"636","s":[{"r":"635","s":[{"value":["LevelOfSeverityCommunicated"]}]},{"value":["."]},{"r":"636","s":[{"value":["sentDatetime"]}]}]},{"r":"644","value":[" ","after"," "]},{"r":"637","s":[{"value":["start of "]},{"r":"639","s":[{"r":"638","s":[{"value":["EncounterDiabeticRetinopathy"]}]},{"value":["."]},{"r":"639","s":[{"value":["relevantPeriod"]}]}]}]}]},{"value":["\n        and "]},{"r":"651","s":[{"r":"646","s":[{"r":"645","s":[{"value":["LevelOfSeverityCommunicated"]}]},{"value":["."]},{"r":"646","s":[{"value":["sentDatetime"]}]}]},{"r":"651","value":[" ","during day of"," "]},{"r":"647","s":[{"value":["\"Measurement Period\""]}]}]}]}]}]}]}}],"resultTypeSpecifier":{"localId":"805","type":"ListTypeSpecifier","elementType":{"localId":"806","name":"{urn:healthit-gov:qdm:v5_6}PositiveCommunicationPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"655","locator":"107:3-110:87","type":"Query","resultTypeSpecifier":{"localId":"656","type":"ListTypeSpecifier","elementType":{"localId":"657","name":"{urn:healthit-gov:qdm:v5_6}PositiveCommunicationPerformed","type":"NamedTypeSpecifier"}},"source":[{"localId":"617","locator":"107:3-107:103","alias":"LevelOfSeverityCommunicated","resultTypeSpecifier":{"localId":"626","type":"ListTypeSpecifier","elementType":{"localId":"627","name":"{urn:healthit-gov:qdm:v5_6}PositiveCommunicationPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"620","locator":"107:3-107:75","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveCommunicationPerformed","templateId":"PositiveCommunicationPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","resultTypeSpecifier":{"localId":"624","type":"ListTypeSpecifier","elementType":{"localId":"625","name":"{urn:healthit-gov:qdm:v5_6}PositiveCommunicationPerformed","type":"NamedTypeSpecifier"}},"codes":{"localId":"619","locator":"107:32-107:74","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Level of Severity of Retinopathy Findings","preserve":true,"type":"ValueSetRef"},"include":[],"codeFilter":[],"dateFilter":[],"otherFilter":[]}}],"let":[],"relationship":[{"localId":"652","locator":"108:5-110:87","alias":"EncounterDiabeticRetinopathy","type":"With","resultTypeSpecifier":{"localId":"653","type":"ListTypeSpecifier","elementType":{"localId":"654","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"629","locator":"108:10-108:41","name":"Diabetic Retinopathy Encounter","type":"ExpressionRef","resultTypeSpecifier":{"localId":"630","type":"ListTypeSpecifier","elementType":{"localId":"631","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}},"suchThat":{"localId":"634","locator":"109:17-110:87","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"And","signature":[],"operand":[{"localId":"644","locator":"109:17-109:115","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"After","signature":[],"operand":[{"localId":"636","locator":"109:17-109:56","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","path":"sentDatetime","scope":"LevelOfSeverityCommunicated","type":"Property"},{"localId":"637","locator":"109:64-109:115","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"639","locator":"109:73-109:115","path":"relevantPeriod","scope":"EncounterDiabeticRetinopathy","type":"Property","resultTypeSpecifier":{"localId":"642","type":"IntervalTypeSpecifier","pointType":{"localId":"643","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}]},{"localId":"651","locator":"110:13-110:87","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","precision":"Day","type":"In","signature":[],"operand":[{"localId":"646","locator":"110:13-110:52","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","path":"sentDatetime","scope":"LevelOfSeverityCommunicated","type":"Property"},{"localId":"647","locator":"110:68-110:87","name":"Measurement Period","type":"ParameterRef","resultTypeSpecifier":{"localId":"648","type":"IntervalTypeSpecifier","pointType":{"localId":"649","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]}]}}]}},{"localId":"666","locator":"118:1-122:90","name":"Macular Edema Absence Communicated","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"666","s":[{"value":["","define ","\"Macular Edema Absence Communicated\"",":\n  "]},{"r":"706","s":[{"s":[{"r":"667","s":[{"r":"670","s":[{"r":"670","s":[{"value":["[","\"Communication, Performed\"",": "]},{"s":[{"value":["\"Macular edema absent (situation)\""]}]},{"value":["]"]}]}]},{"value":[" ","MacularEdemaAbsentCommunicated"]}]}]},{"value":["\n    "]},{"r":"703","s":[{"value":["with "]},{"r":"679","s":[{"r":"680","s":[{"s":[{"value":["\"Diabetic Retinopathy Encounter\""]}]}]},{"value":[" ","EncounterDiabeticRetinopathy"]}]},{"value":["\n      such that "]},{"r":"685","s":[{"r":"695","s":[{"r":"687","s":[{"r":"686","s":[{"value":["MacularEdemaAbsentCommunicated"]}]},{"value":["."]},{"r":"687","s":[{"value":["sentDatetime"]}]}]},{"r":"695","value":[" ","after"," "]},{"r":"688","s":[{"value":["start of "]},{"r":"690","s":[{"r":"689","s":[{"value":["EncounterDiabeticRetinopathy"]}]},{"value":["."]},{"r":"690","s":[{"value":["relevantPeriod"]}]}]}]}]},{"value":["\n        and "]},{"r":"702","s":[{"r":"697","s":[{"r":"696","s":[{"value":["MacularEdemaAbsentCommunicated"]}]},{"value":["."]},{"r":"697","s":[{"value":["sentDatetime"]}]}]},{"r":"702","value":[" ","during day of"," "]},{"r":"698","s":[{"value":["\"Measurement Period\""]}]}]}]}]}]}]}}],"resultTypeSpecifier":{"localId":"809","type":"ListTypeSpecifier","elementType":{"localId":"810","name":"{urn:healthit-gov:qdm:v5_6}PositiveCommunicationPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"706","locator":"119:3-122:90","type":"Query","resultTypeSpecifier":{"localId":"707","type":"ListTypeSpecifier","elementType":{"localId":"708","name":"{urn:healthit-gov:qdm:v5_6}PositiveCommunicationPerformed","type":"NamedTypeSpecifier"}},"source":[{"localId":"667","locator":"119:3-119:97","alias":"MacularEdemaAbsentCommunicated","resultTypeSpecifier":{"localId":"677","type":"ListTypeSpecifier","elementType":{"localId":"678","name":"{urn:healthit-gov:qdm:v5_6}PositiveCommunicationPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"670","locator":"119:3-119:66","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveCommunicationPerformed","templateId":"PositiveCommunicationPerformed","codeProperty":"code","codeComparator":"~","type":"Retrieve","resultTypeSpecifier":{"localId":"675","type":"ListTypeSpecifier","elementType":{"localId":"676","name":"{urn:healthit-gov:qdm:v5_6}PositiveCommunicationPerformed","type":"NamedTypeSpecifier"}},"codes":{"localId":"672","type":"ToList","signature":[],"operand":{"localId":"669","locator":"119:32-119:65","resultTypeName":"{urn:hl7-org:elm-types:r1}Code","name":"Macular edema absent (situation)","type":"CodeRef"}},"include":[],"codeFilter":[],"dateFilter":[],"otherFilter":[]}}],"let":[],"relationship":[{"localId":"703","locator":"120:5-122:90","alias":"EncounterDiabeticRetinopathy","type":"With","resultTypeSpecifier":{"localId":"704","type":"ListTypeSpecifier","elementType":{"localId":"705","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"680","locator":"120:10-120:41","name":"Diabetic Retinopathy Encounter","type":"ExpressionRef","resultTypeSpecifier":{"localId":"681","type":"ListTypeSpecifier","elementType":{"localId":"682","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}},"suchThat":{"localId":"685","locator":"121:17-122:90","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"And","signature":[],"operand":[{"localId":"695","locator":"121:17-121:118","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"After","signature":[],"operand":[{"localId":"687","locator":"121:17-121:59","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","path":"sentDatetime","scope":"MacularEdemaAbsentCommunicated","type":"Property"},{"localId":"688","locator":"121:67-121:118","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"690","locator":"121:76-121:118","path":"relevantPeriod","scope":"EncounterDiabeticRetinopathy","type":"Property","resultTypeSpecifier":{"localId":"693","type":"IntervalTypeSpecifier","pointType":{"localId":"694","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}]},{"localId":"702","locator":"122:13-122:90","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","precision":"Day","type":"In","signature":[],"operand":[{"localId":"697","locator":"122:13-122:55","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","path":"sentDatetime","scope":"MacularEdemaAbsentCommunicated","type":"Property"},{"localId":"698","locator":"122:71-122:90","name":"Measurement Period","type":"ParameterRef","resultTypeSpecifier":{"localId":"699","type":"IntervalTypeSpecifier","pointType":{"localId":"700","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]}]}}]}},{"localId":"716","locator":"112:1-116:91","name":"Macular Edema Presence Communicated","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"716","s":[{"value":["","define ","\"Macular Edema Presence Communicated\"",":\n  "]},{"r":"755","s":[{"s":[{"r":"717","s":[{"r":"720","s":[{"r":"720","s":[{"value":["[","\"Communication, Performed\"",": "]},{"s":[{"value":["\"Macular Edema Findings Present\""]}]},{"value":["]"]}]}]},{"value":[" ","MacularEdemaPresentCommunicated"]}]}]},{"value":["\n    "]},{"r":"752","s":[{"value":["with "]},{"r":"728","s":[{"r":"729","s":[{"s":[{"value":["\"Diabetic Retinopathy Encounter\""]}]}]},{"value":[" ","EncounterDiabeticRetinopathy"]}]},{"value":["\n      such that "]},{"r":"734","s":[{"r":"744","s":[{"r":"736","s":[{"r":"735","s":[{"value":["MacularEdemaPresentCommunicated"]}]},{"value":["."]},{"r":"736","s":[{"value":["sentDatetime"]}]}]},{"r":"744","value":[" ","after"," "]},{"r":"737","s":[{"value":["start of "]},{"r":"739","s":[{"r":"738","s":[{"value":["EncounterDiabeticRetinopathy"]}]},{"value":["."]},{"r":"739","s":[{"value":["relevantPeriod"]}]}]}]}]},{"value":["\n        and "]},{"r":"751","s":[{"r":"746","s":[{"r":"745","s":[{"value":["MacularEdemaPresentCommunicated"]}]},{"value":["."]},{"r":"746","s":[{"value":["sentDatetime"]}]}]},{"r":"751","value":[" ","during day of"," "]},{"r":"747","s":[{"value":["\"Measurement Period\""]}]}]}]}]}]}]}}],"resultTypeSpecifier":{"localId":"807","type":"ListTypeSpecifier","elementType":{"localId":"808","name":"{urn:healthit-gov:qdm:v5_6}PositiveCommunicationPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"755","locator":"113:3-116:91","type":"Query","resultTypeSpecifier":{"localId":"756","type":"ListTypeSpecifier","elementType":{"localId":"757","name":"{urn:healthit-gov:qdm:v5_6}PositiveCommunicationPerformed","type":"NamedTypeSpecifier"}},"source":[{"localId":"717","locator":"113:3-113:96","alias":"MacularEdemaPresentCommunicated","resultTypeSpecifier":{"localId":"726","type":"ListTypeSpecifier","elementType":{"localId":"727","name":"{urn:healthit-gov:qdm:v5_6}PositiveCommunicationPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"720","locator":"113:3-113:64","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveCommunicationPerformed","templateId":"PositiveCommunicationPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","resultTypeSpecifier":{"localId":"724","type":"ListTypeSpecifier","elementType":{"localId":"725","name":"{urn:healthit-gov:qdm:v5_6}PositiveCommunicationPerformed","type":"NamedTypeSpecifier"}},"codes":{"localId":"719","locator":"113:32-113:63","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Macular Edema Findings Present","preserve":true,"type":"ValueSetRef"},"include":[],"codeFilter":[],"dateFilter":[],"otherFilter":[]}}],"let":[],"relationship":[{"localId":"752","locator":"114:5-116:91","alias":"EncounterDiabeticRetinopathy","type":"With","resultTypeSpecifier":{"localId":"753","type":"ListTypeSpecifier","elementType":{"localId":"754","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"729","locator":"114:10-114:41","name":"Diabetic Retinopathy Encounter","type":"ExpressionRef","resultTypeSpecifier":{"localId":"730","type":"ListTypeSpecifier","elementType":{"localId":"731","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}},"suchThat":{"localId":"734","locator":"115:17-116:91","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"And","signature":[],"operand":[{"localId":"744","locator":"115:17-115:119","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"After","signature":[],"operand":[{"localId":"736","locator":"115:17-115:60","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","path":"sentDatetime","scope":"MacularEdemaPresentCommunicated","type":"Property"},{"localId":"737","locator":"115:68-115:119","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"739","locator":"115:77-115:119","path":"relevantPeriod","scope":"EncounterDiabeticRetinopathy","type":"Property","resultTypeSpecifier":{"localId":"742","type":"IntervalTypeSpecifier","pointType":{"localId":"743","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}]},{"localId":"751","locator":"116:13-116:91","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","precision":"Day","type":"In","signature":[],"operand":[{"localId":"746","locator":"116:13-116:56","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","path":"sentDatetime","scope":"MacularEdemaPresentCommunicated","type":"Property"},{"localId":"747","locator":"116:72-116:91","name":"Measurement Period","type":"ParameterRef","resultTypeSpecifier":{"localId":"748","type":"IntervalTypeSpecifier","pointType":{"localId":"749","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]}]}}]}},{"localId":"612","locator":"75:1-79:7","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","name":"Numerator","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"612","s":[{"value":["","define ","\"Numerator\"",":\n"]},{"r":"613","s":[{"r":"614","s":[{"value":["exists "]},{"r":"660","s":[{"value":["\"Level of Severity of Retinopathy Findings Communicated\""]}]}]},{"value":["\n  and "]},{"r":"663","s":[{"value":["( "]},{"r":"663","s":[{"r":"664","s":[{"value":["exists "]},{"r":"711","s":[{"value":["\"Macular Edema Absence Communicated\""]}]}]},{"value":["\n      or "]},{"r":"714","s":[{"value":["exists "]},{"r":"760","s":[{"value":["\"Macular Edema Presence Communicated\""]}]}]}]},{"value":["\n      )"]}]}]}]}}],"expression":{"localId":"613","locator":"76:1-79:7","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"And","signature":[],"operand":[{"localId":"614","locator":"76:1-76:63","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"Exists","signature":[],"operand":{"localId":"660","locator":"76:8-76:63","name":"Level of Severity of Retinopathy Findings Communicated","type":"ExpressionRef","resultTypeSpecifier":{"localId":"661","type":"ListTypeSpecifier","elementType":{"localId":"662","name":"{urn:healthit-gov:qdm:v5_6}PositiveCommunicationPerformed","type":"NamedTypeSpecifier"}}}},{"localId":"663","locator":"77:7-79:7","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"Or","signature":[],"operand":[{"localId":"664","locator":"77:9-77:51","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"Exists","signature":[],"operand":{"localId":"711","locator":"77:16-77:51","name":"Macular Edema Absence Communicated","type":"ExpressionRef","resultTypeSpecifier":{"localId":"712","type":"ListTypeSpecifier","elementType":{"localId":"713","name":"{urn:healthit-gov:qdm:v5_6}PositiveCommunicationPerformed","type":"NamedTypeSpecifier"}}}},{"localId":"714","locator":"78:10-78:53","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"Exists","signature":[],"operand":{"localId":"760","locator":"78:17-78:53","name":"Macular Edema Presence Communicated","type":"ExpressionRef","resultTypeSpecifier":{"localId":"761","type":"ListTypeSpecifier","elementType":{"localId":"762","name":"{urn:healthit-gov:qdm:v5_6}PositiveCommunicationPerformed","type":"NamedTypeSpecifier"}}}}]}]}},{"localId":"764","locator":"81:1-82:51","name":"SDE Ethnicity","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"764","s":[{"value":["","define ","\"SDE Ethnicity\"",":\n  "]},{"r":"767","s":[{"value":["[","\"Patient Characteristic Ethnicity\"",": "]},{"s":[{"value":["\"Ethnicity\""]}]},{"value":["]"]}]}]}}],"resultTypeSpecifier":{"localId":"771","type":"ListTypeSpecifier","elementType":{"localId":"772","name":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicEthnicity","type":"NamedTypeSpecifier"}},"expression":{"localId":"767","locator":"82:3-82:51","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicEthnicity","codeProperty":"code","codeComparator":"in","type":"Retrieve","resultTypeSpecifier":{"localId":"769","type":"ListTypeSpecifier","elementType":{"localId":"770","name":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicEthnicity","type":"NamedTypeSpecifier"}},"codes":{"localId":"766","locator":"82:40-82:50","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Ethnicity","preserve":true,"type":"ValueSetRef"},"include":[],"codeFilter":[],"dateFilter":[],"otherFilter":[]}},{"localId":"774","locator":"84:1-85:48","name":"SDE Payer","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"774","s":[{"value":["","define ","\"SDE Payer\"",":\n  "]},{"r":"777","s":[{"value":["[","\"Patient Characteristic Payer\"",": "]},{"s":[{"value":["\"Payer Type\""]}]},{"value":["]"]}]}]}}],"resultTypeSpecifier":{"localId":"781","type":"ListTypeSpecifier","elementType":{"localId":"782","name":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicPayer","type":"NamedTypeSpecifier"}},"expression":{"localId":"777","locator":"85:3-85:48","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicPayer","codeProperty":"code","codeComparator":"in","type":"Retrieve","resultTypeSpecifier":{"localId":"779","type":"ListTypeSpecifier","elementType":{"localId":"780","name":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicPayer","type":"NamedTypeSpecifier"}},"codes":{"localId":"776","locator":"85:36-85:47","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Payer Type","preserve":true,"type":"ValueSetRef"},"include":[],"codeFilter":[],"dateFilter":[],"otherFilter":[]}},{"localId":"784","locator":"87:1-88:41","name":"SDE Race","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"784","s":[{"value":["","define ","\"SDE Race\"",":\n  "]},{"r":"787","s":[{"value":["[","\"Patient Characteristic Race\"",": "]},{"s":[{"value":["\"Race\""]}]},{"value":["]"]}]}]}}],"resultTypeSpecifier":{"localId":"791","type":"ListTypeSpecifier","elementType":{"localId":"792","name":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicRace","type":"NamedTypeSpecifier"}},"expression":{"localId":"787","locator":"88:3-88:41","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicRace","codeProperty":"code","codeComparator":"in","type":"Retrieve","resultTypeSpecifier":{"localId":"789","type":"ListTypeSpecifier","elementType":{"localId":"790","name":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicRace","type":"NamedTypeSpecifier"}},"codes":{"localId":"786","locator":"88:35-88:40","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Race","preserve":true,"type":"ValueSetRef"},"include":[],"codeFilter":[],"dateFilter":[],"otherFilter":[]}},{"localId":"794","locator":"90:1-91:62","name":"SDE Sex","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"794","s":[{"value":["","define ","\"SDE Sex\"",":\n  "]},{"r":"797","s":[{"value":["[","\"Patient Characteristic Sex\"",": "]},{"s":[{"value":["\"Federal Administrative Sex\""]}]},{"value":["]"]}]}]}}],"resultTypeSpecifier":{"localId":"801","type":"ListTypeSpecifier","elementType":{"localId":"802","name":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicSex","type":"NamedTypeSpecifier"}},"expression":{"localId":"797","locator":"91:3-91:62","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicSex","codeProperty":"code","codeComparator":"in","type":"Retrieve","resultTypeSpecifier":{"localId":"799","type":"ListTypeSpecifier","elementType":{"localId":"800","name":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicSex","type":"NamedTypeSpecifier"}},"codes":{"localId":"796","locator":"91:34-91:61","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Federal Administrative Sex","preserve":true,"type":"ValueSetRef"},"include":[],"codeFilter":[],"dateFilter":[],"otherFilter":[]}}]}}},"elm_annotations":{"statements":[{"children":[{"children":[{"children":[{"text":"define \"Qualifying Encounter During Day of Measurement Period\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Office Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"269"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Ophthalmological Services\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"275"}],"node_type":"Union","ref_id":"279"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Outpatient Consultation\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"284"}],"ref_id":"288"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Care Services in Long Term Residential Facility\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"293"}],"node_type":"Union","ref_id":"298"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Nursing Facility Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"303"}],"node_type":"Union","ref_id":"307"},{"children":[{"text":" )"}]}],"node_type":"Union","ref_id":"307"},{"children":[{"text":" QualifyingEncounter"}]}],"ref_id":"266"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"QualifyingEncounter"}]}],"ref_id":"315"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"316"}],"node_type":"Property","ref_id":"316"},{"children":[{"text":" during day of "}],"node_type":"IncludedIn","ref_id":"324"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"321"}],"node_type":"IncludedIn","ref_id":"324"},{"children":[{"text":"\n      and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"QualifyingEncounter"}]}],"ref_id":"327"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"class"}]}],"node_type":"Property","ref_id":"328"}],"node_type":"Property","ref_id":"328"},{"children":[{"text":" !~ "}]},{"children":[{"children":[{"text":"\"virtual\""}]}],"node_type":"CodeRef","ref_id":"329"}],"node_type":"Not","ref_id":"330"}],"ref_id":"314"}],"ref_id":"314"}],"node_type":"Query","ref_id":"331"}],"ref_id":"265"}],"define_name":"Qualifying Encounter During Day of Measurement Period"},{"children":[{"children":[{"children":[{"text":"define \"Diabetic Retinopathy Encounter\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Qualifying Encounter During Day of Measurement Period\""}]}]}],"node_type":"ExpressionRef","ref_id":"336"},{"children":[{"text":" ValidQualifyingEncounter"}]}],"ref_id":"263"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"[\"Diagnosis\": "}]},{"children":[{"children":[{"text":"\"Diabetic Retinopathy\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"344"}],"node_type":"Retrieve","ref_id":"344"},{"children":[{"text":" DiabeticRetinopathy"}]}],"ref_id":"341"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"DiabeticRetinopathy"}]}],"ref_id":"352"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"prevalencePeriod"}]}],"node_type":"Property","ref_id":"353"}],"node_type":"Property","ref_id":"353"},{"children":[{"text":" overlaps day of "}],"node_type":"Overlaps","ref_id":"364"},{"children":[{"children":[{"children":[{"text":"ValidQualifyingEncounter"}]}],"ref_id":"358"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"359"}],"node_type":"Property","ref_id":"359"}],"node_type":"Overlaps","ref_id":"364"}],"ref_id":"365"}],"node_type":"Query","ref_id":"368"}],"ref_id":"262"}],"define_name":"Diabetic Retinopathy Encounter"},{"children":[{"children":[{"children":[{"text":"define \"Initial Population\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"text":"AgeInYearsAt("}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"249"}],"node_type":"Start","ref_id":"248"}],"node_type":"DateFrom","ref_id":"247"},{"children":[{"text":")"}]}],"node_type":"CalculateAgeAt","ref_id":"258"},{"children":[{"text":" \u003e= 18"}],"node_type":"Literal","ref_id":"259"}],"node_type":"GreaterOrEqual","ref_id":"246"},{"children":[{"text":"\n    and "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"\"Diabetic Retinopathy Encounter\""}]}],"node_type":"ExpressionRef","ref_id":"373"}],"node_type":"Exists","ref_id":"260"}],"node_type":"And","ref_id":"245"}],"ref_id":"244"}],"define_name":"Initial Population"},{"children":[{"children":[{"children":[{"text":"define \"Macular Exam Performed\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Diagnostic Study, Performed\": "}]},{"children":[{"children":[{"text":"\"Macular Exam\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"383"}],"node_type":"Retrieve","ref_id":"383"},{"children":[{"text":" MacularExam"}]}],"ref_id":"380"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"Diabetic Retinopathy Encounter\""}]}]}],"node_type":"ExpressionRef","ref_id":"392"},{"children":[{"text":" EncounterDiabeticRetinopathy"}]}],"ref_id":"391"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"397"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\" ( "}]},{"children":[{"children":[{"children":[{"text":"MacularExam"}]}],"ref_id":"398"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"399"}],"node_type":"Property","ref_id":"399"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"MacularExam"}]}],"ref_id":"400"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"401"}],"node_type":"Property","ref_id":"401"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"406"}],"node_type":"FunctionRef","ref_id":"406"},{"children":[{"text":" during day of "}],"node_type":"IncludedIn","ref_id":"417"},{"children":[{"children":[{"children":[{"text":"EncounterDiabeticRetinopathy"}]}],"ref_id":"411"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"412"}],"node_type":"Property","ref_id":"412"}],"node_type":"IncludedIn","ref_id":"417"}],"ref_id":"419"},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"MacularExam"}]}],"ref_id":"422"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"result"}]}],"node_type":"Property","ref_id":"423"}],"node_type":"Property","ref_id":"423"},{"children":[{"text":" is not null"}]}],"ref_id":"437"}],"ref_id":"437"}],"node_type":"Query","ref_id":"438"}],"ref_id":"379"}],"define_name":"Macular Exam Performed"},{"children":[{"children":[{"children":[{"text":"define \"Denominator\":\n  "}]},{"children":[{"children":[{"children":[{"text":"\"Initial Population\""}]}],"node_type":"ExpressionRef","ref_id":"376"},{"children":[{"text":"\n    and "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"\"Macular Exam Performed\""}]}],"node_type":"ExpressionRef","ref_id":"443"}],"node_type":"Exists","ref_id":"377"}],"node_type":"And","ref_id":"242"}],"ref_id":"241"}],"define_name":"Denominator"},{"children":[{"children":[{"children":[{"text":"define \"Medical or Patient Reason for Not Communicating Level of Severity of Retinopathy\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Communication, Not Performed\": "}]},{"children":[{"children":[{"text":"\"Level of Severity of Retinopathy Findings\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"456"}],"node_type":"Retrieve","ref_id":"456"},{"children":[{"text":" LevelOfSeverityNotCommunicated"}]}],"ref_id":"453"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"Diabetic Retinopathy Encounter\""}]}]}],"node_type":"ExpressionRef","ref_id":"465"},{"children":[{"text":" EncounterDiabeticRetinopathy"}]}],"ref_id":"464"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LevelOfSeverityNotCommunicated"}]}],"ref_id":"470"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"471"}],"node_type":"Property","ref_id":"471"},{"children":[{"text":" during day of "}],"node_type":"In","ref_id":"479"},{"children":[{"children":[{"children":[{"text":"EncounterDiabeticRetinopathy"}]}],"ref_id":"472"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"473"}],"node_type":"Property","ref_id":"473"}],"node_type":"In","ref_id":"479"}],"ref_id":"480"},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"LevelOfSeverityNotCommunicated"}]}],"ref_id":"484"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"negationRationale"}]}],"ref_id":"485"}],"ref_id":"485"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Medical Reason\""}]}],"ref_id":"486"}],"node_type":"InValueSet","ref_id":"487"},{"children":[{"text":"\n        or "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LevelOfSeverityNotCommunicated"}]}],"ref_id":"488"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"negationRationale"}]}],"ref_id":"489"}],"ref_id":"489"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Patient Reason\""}]}],"ref_id":"490"}],"node_type":"InValueSet","ref_id":"491"}],"ref_id":"483"},{"children":[{"text":")"}]}],"ref_id":"483"}],"ref_id":"483"}],"node_type":"Query","ref_id":"492"}],"ref_id":"452"}],"define_name":"Medical or Patient Reason for Not Communicating Level of Severity of Retinopathy"},{"children":[{"children":[{"children":[{"text":"define \"Medical or Patient Reason for Not Communicating Absence of Macular Edema\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Communication, Not Performed\": "}]},{"children":[{"children":[{"text":"\"Macular edema absent (situation)\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"506"}],"node_type":"Retrieve","ref_id":"506"},{"children":[{"text":" MacularEdemaAbsentNotCommunicated"}]}],"ref_id":"503"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"Diabetic Retinopathy Encounter\""}]}]}],"node_type":"ExpressionRef","ref_id":"516"},{"children":[{"text":" EncounterDiabeticRetinopathy"}]}],"ref_id":"515"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"MacularEdemaAbsentNotCommunicated"}]}],"ref_id":"521"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"522"}],"node_type":"Property","ref_id":"522"},{"children":[{"text":" during day of "}],"node_type":"In","ref_id":"530"},{"children":[{"children":[{"children":[{"text":"EncounterDiabeticRetinopathy"}]}],"ref_id":"523"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"524"}],"node_type":"Property","ref_id":"524"}],"node_type":"In","ref_id":"530"}],"ref_id":"531"},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"MacularEdemaAbsentNotCommunicated"}]}],"ref_id":"535"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"negationRationale"}]}],"ref_id":"536"}],"ref_id":"536"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Medical Reason\""}]}],"ref_id":"537"}],"node_type":"InValueSet","ref_id":"538"},{"children":[{"text":"\n        or "}]},{"children":[{"children":[{"children":[{"children":[{"text":"MacularEdemaAbsentNotCommunicated"}]}],"ref_id":"539"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"negationRationale"}]}],"ref_id":"540"}],"ref_id":"540"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Patient Reason\""}]}],"ref_id":"541"}],"node_type":"InValueSet","ref_id":"542"}],"ref_id":"534"},{"children":[{"text":")"}]}],"ref_id":"534"}],"ref_id":"534"}],"node_type":"Query","ref_id":"543"}],"ref_id":"502"}],"define_name":"Medical or Patient Reason for Not Communicating Absence of Macular Edema"},{"children":[{"children":[{"children":[{"text":"define \"Medical or Patient Reason for Not Communicating Presence of Macular Edema\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Communication, Not Performed\": "}]},{"children":[{"children":[{"text":"\"Macular Edema Findings Present\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"557"}],"node_type":"Retrieve","ref_id":"557"},{"children":[{"text":" MacularEdemaPresentNotCommunicated"}]}],"ref_id":"554"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"Diabetic Retinopathy Encounter\""}]}]}],"node_type":"ExpressionRef","ref_id":"566"},{"children":[{"text":" EncounterDiabeticRetinopathy"}]}],"ref_id":"565"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"MacularEdemaPresentNotCommunicated"}]}],"ref_id":"571"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"572"}],"node_type":"Property","ref_id":"572"},{"children":[{"text":" during day of "}],"node_type":"In","ref_id":"580"},{"children":[{"children":[{"children":[{"text":"EncounterDiabeticRetinopathy"}]}],"ref_id":"573"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"574"}],"node_type":"Property","ref_id":"574"}],"node_type":"In","ref_id":"580"}],"ref_id":"581"},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"MacularEdemaPresentNotCommunicated"}]}],"ref_id":"585"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"negationRationale"}]}],"ref_id":"586"}],"ref_id":"586"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Medical Reason\""}]}],"ref_id":"587"}],"node_type":"InValueSet","ref_id":"588"},{"children":[{"text":"\n        or "}]},{"children":[{"children":[{"children":[{"children":[{"text":"MacularEdemaPresentNotCommunicated"}]}],"ref_id":"589"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"negationRationale"}]}],"ref_id":"590"}],"ref_id":"590"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Patient Reason\""}]}],"ref_id":"591"}],"node_type":"InValueSet","ref_id":"592"}],"ref_id":"584"},{"children":[{"text":"\n    )"}]}],"ref_id":"584"}],"ref_id":"584"}],"node_type":"Query","ref_id":"593"}],"ref_id":"553"}],"define_name":"Medical or Patient Reason for Not Communicating Presence of Macular Edema"},{"children":[{"children":[{"children":[{"text":"define \"Denominator Exceptions\":\n "}]},{"children":[{"children":[{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"\"Medical or Patient Reason for Not Communicating Level of Severity of Retinopathy\""}]}],"node_type":"ExpressionRef","ref_id":"497"}],"node_type":"Exists","ref_id":"450"},{"children":[{"text":"\n  or "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"\"Medical or Patient Reason for Not Communicating Absence of Macular Edema\""}]}],"node_type":"ExpressionRef","ref_id":"548"}],"node_type":"Exists","ref_id":"500"}],"node_type":"Or","ref_id":"449"},{"children":[{"text":"\n  or "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"\"Medical or Patient Reason for Not Communicating Presence of Macular Edema\""}]}],"node_type":"ExpressionRef","ref_id":"598"}],"node_type":"Exists","ref_id":"551"}],"node_type":"Or","ref_id":"448"}],"ref_id":"447"}],"define_name":"Denominator Exceptions"},{"children":[{"children":[{"children":[{"text":"define \"Level of Severity of Retinopathy Findings Communicated\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Communication, Performed\": "}]},{"children":[{"children":[{"text":"\"Level of Severity of Retinopathy Findings\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"620"}],"node_type":"Retrieve","ref_id":"620"},{"children":[{"text":" LevelOfSeverityCommunicated"}]}],"ref_id":"617"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"Diabetic Retinopathy Encounter\""}]}]}],"node_type":"ExpressionRef","ref_id":"629"},{"children":[{"text":" EncounterDiabeticRetinopathy"}]}],"ref_id":"628"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"LevelOfSeverityCommunicated"}]}],"ref_id":"635"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"sentDatetime"}]}],"node_type":"Property","ref_id":"636"}],"node_type":"Property","ref_id":"636"},{"children":[{"text":" after "}],"node_type":"After","ref_id":"644"},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EncounterDiabeticRetinopathy"}]}],"ref_id":"638"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"639"}],"node_type":"Property","ref_id":"639"}],"node_type":"Start","ref_id":"637"}],"node_type":"After","ref_id":"644"},{"children":[{"text":"\n        and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LevelOfSeverityCommunicated"}]}],"ref_id":"645"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"sentDatetime"}]}],"node_type":"Property","ref_id":"646"}],"node_type":"Property","ref_id":"646"},{"children":[{"text":" during day of "}],"node_type":"In","ref_id":"651"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"647"}],"node_type":"In","ref_id":"651"}],"node_type":"And","ref_id":"634"}],"ref_id":"652"}],"node_type":"Query","ref_id":"655"}],"ref_id":"616"}],"define_name":"Level of Severity of Retinopathy Findings Communicated"},{"children":[{"children":[{"children":[{"text":"define \"Macular Edema Absence Communicated\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Communication, Performed\": "}]},{"children":[{"children":[{"text":"\"Macular edema absent (situation)\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"670"}],"node_type":"Retrieve","ref_id":"670"},{"children":[{"text":" MacularEdemaAbsentCommunicated"}]}],"ref_id":"667"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"Diabetic Retinopathy Encounter\""}]}]}],"node_type":"ExpressionRef","ref_id":"680"},{"children":[{"text":" EncounterDiabeticRetinopathy"}]}],"ref_id":"679"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"MacularEdemaAbsentCommunicated"}]}],"ref_id":"686"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"sentDatetime"}]}],"node_type":"Property","ref_id":"687"}],"node_type":"Property","ref_id":"687"},{"children":[{"text":" after "}],"node_type":"After","ref_id":"695"},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EncounterDiabeticRetinopathy"}]}],"ref_id":"689"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"690"}],"node_type":"Property","ref_id":"690"}],"node_type":"Start","ref_id":"688"}],"node_type":"After","ref_id":"695"},{"children":[{"text":"\n        and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"MacularEdemaAbsentCommunicated"}]}],"ref_id":"696"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"sentDatetime"}]}],"node_type":"Property","ref_id":"697"}],"node_type":"Property","ref_id":"697"},{"children":[{"text":" during day of "}],"node_type":"In","ref_id":"702"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"698"}],"node_type":"In","ref_id":"702"}],"node_type":"And","ref_id":"685"}],"ref_id":"703"}],"node_type":"Query","ref_id":"706"}],"ref_id":"666"}],"define_name":"Macular Edema Absence Communicated"},{"children":[{"children":[{"children":[{"text":"define \"Macular Edema Presence Communicated\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Communication, Performed\": "}]},{"children":[{"children":[{"text":"\"Macular Edema Findings Present\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"720"}],"node_type":"Retrieve","ref_id":"720"},{"children":[{"text":" MacularEdemaPresentCommunicated"}]}],"ref_id":"717"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"Diabetic Retinopathy Encounter\""}]}]}],"node_type":"ExpressionRef","ref_id":"729"},{"children":[{"text":" EncounterDiabeticRetinopathy"}]}],"ref_id":"728"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"MacularEdemaPresentCommunicated"}]}],"ref_id":"735"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"sentDatetime"}]}],"node_type":"Property","ref_id":"736"}],"node_type":"Property","ref_id":"736"},{"children":[{"text":" after "}],"node_type":"After","ref_id":"744"},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EncounterDiabeticRetinopathy"}]}],"ref_id":"738"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"739"}],"node_type":"Property","ref_id":"739"}],"node_type":"Start","ref_id":"737"}],"node_type":"After","ref_id":"744"},{"children":[{"text":"\n        and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"MacularEdemaPresentCommunicated"}]}],"ref_id":"745"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"sentDatetime"}]}],"node_type":"Property","ref_id":"746"}],"node_type":"Property","ref_id":"746"},{"children":[{"text":" during day of "}],"node_type":"In","ref_id":"751"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"747"}],"node_type":"In","ref_id":"751"}],"node_type":"And","ref_id":"734"}],"ref_id":"752"}],"node_type":"Query","ref_id":"755"}],"ref_id":"716"}],"define_name":"Macular Edema Presence Communicated"},{"children":[{"children":[{"children":[{"text":"define \"Numerator\":\n"}]},{"children":[{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"\"Level of Severity of Retinopathy Findings Communicated\""}]}],"node_type":"ExpressionRef","ref_id":"660"}],"node_type":"Exists","ref_id":"614"},{"children":[{"text":"\n  and "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"\"Macular Edema Absence Communicated\""}]}],"node_type":"ExpressionRef","ref_id":"711"}],"node_type":"Exists","ref_id":"664"},{"children":[{"text":"\n      or "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"\"Macular Edema Presence Communicated\""}]}],"node_type":"ExpressionRef","ref_id":"760"}],"node_type":"Exists","ref_id":"714"}],"node_type":"Or","ref_id":"663"},{"children":[{"text":"\n      )"}]}],"node_type":"Or","ref_id":"663"}],"node_type":"And","ref_id":"613"}],"ref_id":"612"}],"define_name":"Numerator"},{"children":[{"children":[{"children":[{"text":"define \"SDE Ethnicity\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Ethnicity\": "}]},{"children":[{"children":[{"text":"\"Ethnicity\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"767"}],"ref_id":"764"}],"define_name":"SDE Ethnicity"},{"children":[{"children":[{"children":[{"text":"define \"SDE Payer\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Payer\": "}]},{"children":[{"children":[{"text":"\"Payer Type\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"777"}],"ref_id":"774"}],"define_name":"SDE Payer"},{"children":[{"children":[{"children":[{"text":"define \"SDE Race\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Race\": "}]},{"children":[{"children":[{"text":"\"Race\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"787"}],"ref_id":"784"}],"define_name":"SDE Race"},{"children":[{"children":[{"children":[{"text":"define \"SDE Sex\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Sex\": "}]},{"children":[{"children":[{"text":"\"Federal Administrative Sex\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"797"}],"ref_id":"794"}],"define_name":"SDE Sex"}],"identifier":{"id":"CMS142DRCommWithPhysicianManagingDiabetesQDM","version":"14.0.000"}},"is_main_library":true,"is_top_level":true,"library_name":"CMS142DRCommWithPhysicianManagingDiabetesQDM","library_version":"14.0.000","statement_dependencies":[{"_id":"689200c610d20757c0ce0841","statement_name":"Patient"},{"_id":"689200c610d20757c0ce0842","statement_name":"Qualifying Encounter During Day of Measurement Period"},{"_id":"689200c610d20757c0ce0843","statement_name":"Diabetic Retinopathy Encounter","statement_references":[{"_id":"689200cd10d20757c0ce0ae1","hqmf_id":null,"library_name":"CMS142DRCommWithPhysicianManagingDiabetesQDM","statement_name":"Qualifying Encounter During Day of Measurement Period"}]},{"_id":"689200c610d20757c0ce0844","statement_name":"Initial Population","statement_references":[{"_id":"689200c610d20757c0ce0835","hqmf_id":null,"library_name":"CMS142DRCommWithPhysicianManagingDiabetesQDM","statement_name":"Patient"},{"_id":"689200c610d20757c0ce0836","hqmf_id":null,"library_name":"CMS142DRCommWithPhysicianManagingDiabetesQDM","statement_name":"Diabetic Retinopathy Encounter"}]},{"_id":"689200c610d20757c0ce0845","statement_name":"Macular Exam Performed","statement_references":[{"_id":"689200c610d20757c0ce0837","hqmf_id":null,"library_name":"CMS142DRCommWithPhysicianManagingDiabetesQDM","statement_name":"Diabetic Retinopathy Encounter"},{"_id":"689200c610d20757c0ce0838","hqmf_id":null,"library_name":"CQMCommonQDM","statement_name":"NormalizeInterval"}]},{"_id":"689200c610d20757c0ce0846","statement_name":"Denominator","statement_references":[{"_id":"689200c610d20757c0ce0839","hqmf_id":null,"library_name":"CMS142DRCommWithPhysicianManagingDiabetesQDM","statement_name":"Initial Population"},{"_id":"689200c610d20757c0ce083a","hqmf_id":null,"library_name":"CMS142DRCommWithPhysicianManagingDiabetesQDM","statement_name":"Macular Exam Performed"}]},{"_id":"689200c610d20757c0ce0847","statement_name":"Medical or Patient Reason for Not Communicating Level of Severity of Retinopathy","statement_references":[{"_id":"689200cd10d20757c0ce0ae2","hqmf_id":null,"library_name":"CMS142DRCommWithPhysicianManagingDiabetesQDM","statement_name":"Diabetic Retinopathy Encounter"}]},{"_id":"689200c610d20757c0ce0848","statement_name":"Medical or Patient Reason for Not Communicating Absence of Macular Edema","statement_references":[{"_id":"689200cd10d20757c0ce0ae3","hqmf_id":null,"library_name":"CMS142DRCommWithPhysicianManagingDiabetesQDM","statement_name":"Diabetic Retinopathy Encounter"}]},{"_id":"689200c610d20757c0ce0849","statement_name":"Medical or Patient Reason for Not Communicating Presence of Macular Edema","statement_references":[{"_id":"689200cd10d20757c0ce0ae4","hqmf_id":null,"library_name":"CMS142DRCommWithPhysicianManagingDiabetesQDM","statement_name":"Diabetic Retinopathy Encounter"}]},{"_id":"689200c610d20757c0ce084a","statement_name":"Denominator Exceptions","statement_references":[{"_id":"689200c610d20757c0ce083b","hqmf_id":null,"library_name":"CMS142DRCommWithPhysicianManagingDiabetesQDM","statement_name":"Medical or Patient Reason for Not Communicating Level of Severity of Retinopathy"},{"_id":"689200c610d20757c0ce083c","hqmf_id":null,"library_name":"CMS142DRCommWithPhysicianManagingDiabetesQDM","statement_name":"Medical or Patient Reason for Not Communicating Absence of Macular Edema"},{"_id":"689200c610d20757c0ce083d","hqmf_id":null,"library_name":"CMS142DRCommWithPhysicianManagingDiabetesQDM","statement_name":"Medical or Patient Reason for Not Communicating Presence of Macular Edema"}]},{"_id":"689200c610d20757c0ce084b","statement_name":"Level of Severity of Retinopathy Findings Communicated","statement_references":[{"_id":"689200cd10d20757c0ce0ae5","hqmf_id":null,"library_name":"CMS142DRCommWithPhysicianManagingDiabetesQDM","statement_name":"Diabetic Retinopathy Encounter"}]},{"_id":"689200c610d20757c0ce084c","statement_name":"Macular Edema Absence Communicated","statement_references":[{"_id":"689200cd10d20757c0ce0ae6","hqmf_id":null,"library_name":"CMS142DRCommWithPhysicianManagingDiabetesQDM","statement_name":"Diabetic Retinopathy Encounter"}]},{"_id":"689200c610d20757c0ce084d","statement_name":"Macular Edema Presence Communicated","statement_references":[{"_id":"689200cd10d20757c0ce0ae7","hqmf_id":null,"library_name":"CMS142DRCommWithPhysicianManagingDiabetesQDM","statement_name":"Diabetic Retinopathy Encounter"}]},{"_id":"689200c610d20757c0ce084e","statement_name":"Numerator","statement_references":[{"_id":"689200c610d20757c0ce083e","hqmf_id":null,"library_name":"CMS142DRCommWithPhysicianManagingDiabetesQDM","statement_name":"Level of Severity of Retinopathy Findings Communicated"},{"_id":"689200c610d20757c0ce083f","hqmf_id":null,"library_name":"CMS142DRCommWithPhysicianManagingDiabetesQDM","statement_name":"Macular Edema Absence Communicated"},{"_id":"689200c610d20757c0ce0840","hqmf_id":null,"library_name":"CMS142DRCommWithPhysicianManagingDiabetesQDM","statement_name":"Macular Edema Presence Communicated"}]},{"_id":"689200c610d20757c0ce084f","statement_name":"SDE Ethnicity"},{"_id":"689200c610d20757c0ce0850","statement_name":"SDE Payer"},{"_id":"689200c610d20757c0ce0851","statement_name":"SDE Race"},{"_id":"689200c610d20757c0ce0852","statement_name":"SDE Sex"}]},{"_id":"689200c610d20757c0ce0854","cql":"library CQMCommonQDM version '9.0.000'\n\n/*Upversion to 9.0.000 renaming the library to CQMCommonQDM to align with the FHIR naming convention and to remove the old MAT designation*/\n\nusing QDM version '5.6'\n\nvalueset \"Emergency Department Visit\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.292' \nvalueset \"Encounter Inpatient\": 'urn:oid:2.16.840.1.113883.3.666.5.307' \nvalueset \"Intensive Care Unit\": 'urn:oid:2.16.840.1.113762.1.4.1029.206' \nvalueset \"Observation Services\": 'urn:oid:2.16.840.1.113762.1.4.1111.143' \nvalueset \"Outpatient Surgery Service\": 'urn:oid:2.16.840.1.113762.1.4.1110.38' \n\nparameter \"Measurement Period\" Interval\u003cDateTime\u003e\n\ncontext Patient\n\ndefine \"ED Encounter\":\n  [\"Encounter, Performed\": \"Emergency Department Visit\"]\n\ndefine \"Inpatient Encounter\":\n  [\"Encounter, Performed\": \"Encounter Inpatient\"] EncounterInpatient\n    where EncounterInpatient.relevantPeriod ends during day of \"Measurement Period\"\n\n/*@description: Returns an interval of date values extracted from the input interval of date-time values\n@comment: This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability.*/\ndefine function \"ToDateInterval\"(period Interval\u003cDateTime\u003e ):\n  Interval[date from start of period, date from end of period]\n\n/*calculates the difference in calendar days between the start and end of the given interval.*/\ndefine function \"LengthInDays\"(Value Interval\u003cDateTime\u003e ):\n  difference in days between start of Value and end of Value\n\n/*returns list of all locations within an encounter, including locations for immediately prior ED visit.*/\ndefine function \"HospitalizationLocations\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet EDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn if EDVisit is null then Visit.facilityLocations \n  \t\telse flatten { EDVisit.facilityLocations, Visit.facilityLocations }\n\n/*Returns the arrival time in the ED for the encounter.*/\ndefine function \"EmergencyDepartmentArrivalTime\"(Encounter \"Encounter, Performed\" ):\n  start of First((\"HospitalizationLocations\"(Encounter))HospitalLocation\n  \t\twhere HospitalLocation.code in \"Emergency Department Visit\"\n  \t\tsort by start of locationPeriod\n  ).locationPeriod\n\n/*Returns admission time for an encounter or for immediately prior emergency department visit.*/\ndefine function \"HospitalAdmissionTime\"(Encounter \"Encounter, Performed\" ):\n  start of \"Hospitalization\"(Encounter)\n\n/*Returns earliest arrival time for an encounter including any prior ED visit.*/\ndefine function \"HospitalArrivalTime\"(Encounter \"Encounter, Performed\" ):\n  start of First((\"HospitalizationLocations\"(Encounter))HospitalLocation\n  \t\tsort by start of locationPeriod\n  ).locationPeriod\n\n/*Hospitalization returns the total interval for admission to discharge for the given encounter, or for the admission of any immediately prior emergency department visit to the discharge of the given encounter.*/\ndefine function \"Hospitalization\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet EDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn Interval[Coalesce(start of EDVisit.relevantPeriod, start of Visit.relevantPeriod), \n  \tend of Visit.relevantPeriod]\n\n/*Returns the length of stay in days (i.e. the number of days between admission and discharge) for the given encounter, or from the admission of any immediately prior emergency department visit to the discharge of the encounter*/\ndefine function \"HospitalizationLengthofStay\"(Encounter \"Encounter, Performed\" ):\n  LengthInDays(\"Hospitalization\"(Encounter))\n\n/*Returns the latest departure time for encounter including any prior ED visit.*/\ndefine function \"HospitalDepartureTime\"(Encounter \"Encounter, Performed\" ):\n  end of Last((\"HospitalizationLocations\"(Encounter))HospitalLocation\n  \t\tsort by start of locationPeriod\n  ).locationPeriod\n\n/*Hospital Discharge Time returns the discharge time for an encounter*/\ndefine function \"HospitalDischargeTime\"(Encounter \"Encounter, Performed\" ):\n  end of Encounter.relevantPeriod\n\n/*Hospitalization with Observation and Outpatient Surgery Service returns the total interval from the start of any immediately prior emergency department visit, outpatient surgery visit or observation visit to the discharge of the given encounter.*/\ndefine function \"HospitalizationWithObservationAndOutpatientSurgeryService\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet ObsVisit: Last([\"Encounter, Performed\": \"Observation Services\"] LastObs\n  \t\t\twhere LastObs.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t),\n  \tVisitStart: Coalesce(start of ObsVisit.relevantPeriod, start of Visit.relevantPeriod),\n  \tEDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before VisitStart\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t),\n  \tVisitStartWithED: Coalesce(start of EDVisit.relevantPeriod, VisitStart),\n  \tOutpatientSurgeryVisit: Last([\"Encounter, Performed\": \"Outpatient Surgery Service\"] LastSurgeryOP\n  \t\t\twhere LastSurgeryOP.relevantPeriod ends 1 hour or less on or before VisitStartWithED\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn Interval[Coalesce(start of OutpatientSurgeryVisit.relevantPeriod, VisitStartWithED), \n  \tend of Visit.relevantPeriod]\n\n/*Hospitalization with Observation returns the total interval from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\ndefine function \"HospitalizationWithObservation\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet ObsVisit: Last([\"Encounter, Performed\": \"Observation Services\"] LastObs\n  \t\t\twhere LastObs.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t),\n  \tVisitStart: Coalesce(start of ObsVisit.relevantPeriod, start of Visit.relevantPeriod),\n  \tEDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before VisitStart\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn Interval[Coalesce(start of EDVisit.relevantPeriod, VisitStart), \n  \tend of Visit.relevantPeriod]\n\n/*Hospitalization with Observation Length of Stay returns the length in days from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\ndefine function \"HospitalizationWithObservationLengthofStay\"(Encounter \"Encounter, Performed\" ):\n  \"LengthInDays\"(\"HospitalizationWithObservation\"(Encounter))\n\n/*First Inpatient Intensive Care Unit returns the first intensive care unit for the given encounter, without considering any immediately prior emergency department visit.*/\ndefine function \"FirstInpatientIntensiveCareUnit\"(Encounter \"Encounter, Performed\" ):\n  First((Encounter.facilityLocations)HospitalLocation\n      where HospitalLocation.code in \"Intensive Care Unit\"\n        and HospitalLocation.locationPeriod during Encounter.relevantPeriod\n      sort by start of locationPeriod\n  )\n\n/*Given a datetime and a period, returns the period (if a period is provided) or the interval beginning and ending on the datetime (if a datetime is provided)*/\ndefine function \"NormalizeInterval\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  if pointInTime is not null then Interval[pointInTime, pointInTime]\n    else if period is not null then period \n    else null as Interval\u003cDateTime\u003e\n\n/*Given an interval, return true if the interval has a starting boundary specified (i.e. the start of the interval is not null and not the minimum DateTime value)*/\ndefine function \"HasStart\"(period Interval\u003cDateTime\u003e ):\n  not ( start of period is null\n      or start of period = minimum DateTime\n  )\n\n/*Given an interval, return true if the interval has an ending boundary specified (i.e. the end of the interval is not null and not the maximum DateTime value)*/\ndefine function \"HasEnd\"(period Interval\u003cDateTime\u003e ):\n  not ( \n    end of period is null\n      or \n      end of period = maximum DateTime\n  )\n\n/*Given an interval, return the ending point if the interval has an ending boundary specified, otherwise, return the starting point*/\ndefine function \"Latest\"(period Interval\u003cDateTime\u003e ):\n  if ( HasEnd(period)) then \n  end of period \n    else start of period\n\n/*Given an interval, return the starting point if the interval has a starting boundary specified, otherwise, return the ending point*/\ndefine function \"Earliest\"(period Interval\u003cDateTime\u003e ):\n  if ( HasStart(period)) then start of period \n    else \n  end of period\n\n/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the ending point of the period if the period has an ending boundary specified, otherwise returns the starting point of the interval*/\ndefine function \"LatestOf\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  Latest(NormalizeInterval(pointInTime, period))\n\n/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the starting point of the period if the period has a starting boundary specified, otherwise returns the ending point of the period*/\ndefine function \"EarliestOf\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  Earliest(NormalizeInterval(pointInTime, period))","elm":{"library":{"localId":"0","annotation":[{"translatorVersion":"3.14.0","translatorOptions":"EnableAnnotations,EnableLocators,EnableResultTypes,EnableDetailedErrors,DisableListDemotion,DisableListPromotion","signatureLevel":"None","type":"CqlToElmInfo"},{"message":"An operand identifier [Encounter] is hiding another identifier of the same name.","errorType":"semantic","errorSeverity":"warning","type":"CqlToElmError"},{"type":"Annotation","s":{"r":"1247","s":[{"value":["","library CQMCommonQDM version '9.0.000'"]}]}}],"identifier":{"id":"CQMCommonQDM","version":"9.0.000"},"schemaIdentifier":{"id":"urn:hl7-org:elm","version":"r1"},"usings":{"def":[{"localId":"1","localIdentifier":"System","uri":"urn:hl7-org:elm-types:r1"},{"localId":"206","locator":"5:1-5:23","localIdentifier":"QDM","uri":"urn:healthit-gov:qdm:v5_6","version":"5.6","annotation":[{"type":"Annotation","s":{"r":"206","s":[{"value":["/*Upversion to 9.0.000 renaming the library to CQMCommonQDM to align with the FHIR naming convention and to remove the old MAT designation*/\n\n","using "]},{"s":[{"value":["QDM"]}]},{"value":[" version '5.6'"]}]}}]}]},"parameters":{"def":[{"localId":"212","locator":"13:1-13:49","name":"Measurement Period","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"212","s":[{"value":["","parameter ","\"Measurement Period\""," "]},{"r":"213","s":[{"value":["Interval\u003c"]},{"r":"214","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}}],"resultTypeSpecifier":{"localId":"217","type":"IntervalTypeSpecifier","pointType":{"localId":"218","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"parameterTypeSpecifier":{"localId":"213","locator":"13:32-13:49","type":"IntervalTypeSpecifier","resultTypeSpecifier":{"localId":"215","type":"IntervalTypeSpecifier","pointType":{"localId":"216","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"pointType":{"localId":"214","locator":"13:41-13:48","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},"valueSets":{"def":[{"localId":"207","locator":"7:1-7:82","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Emergency Department Visit","id":"2.16.840.1.113883.3.117.1.7.1.292","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"207","s":[{"value":["","valueset ","\"Emergency Department Visit\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.292'"]}]}}],"codeSystem":[]},{"localId":"208","locator":"8:1-8:71","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Encounter Inpatient","id":"2.16.840.1.113883.3.666.5.307","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"208","s":[{"value":["","valueset ","\"Encounter Inpatient\"",": ","'urn:oid:2.16.840.1.113883.3.666.5.307'"]}]}}],"codeSystem":[]},{"localId":"209","locator":"9:1-9:72","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Intensive Care Unit","id":"2.16.840.1.113762.1.4.1029.206","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"209","s":[{"value":["","valueset ","\"Intensive Care Unit\"",": ","'urn:oid:2.16.840.1.113762.1.4.1029.206'"]}]}}],"codeSystem":[]},{"localId":"210","locator":"10:1-10:73","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Observation Services","id":"2.16.840.1.113762.1.4.1111.143","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"210","s":[{"value":["","valueset ","\"Observation Services\"",": ","'urn:oid:2.16.840.1.113762.1.4.1111.143'"]}]}}],"codeSystem":[]},{"localId":"211","locator":"11:1-11:78","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Outpatient Surgery Service","id":"2.16.840.1.113762.1.4.1110.38","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"211","s":[{"value":["","valueset ","\"Outpatient Surgery Service\"",": ","'urn:oid:2.16.840.1.113762.1.4.1110.38'"]}]}}],"codeSystem":[]}]},"contexts":{"def":[{"localId":"222","locator":"15:1-15:15","name":"Patient"}]},"statements":{"def":[{"localId":"224","locator":"17:1-18:56","name":"ED Encounter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"224","s":[{"value":["","define ","\"ED Encounter\"",":\n  "]},{"r":"227","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]}}],"resultTypeSpecifier":{"localId":"231","type":"ListTypeSpecifier","elementType":{"localId":"232","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"227","locator":"18:3-18:56","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","resultTypeSpecifier":{"localId":"229","type":"ListTypeSpecifier","elementType":{"localId":"230","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"codes":{"localId":"226","locator":"18:28-18:55","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Emergency Department Visit","preserve":true,"type":"ValueSetRef"},"include":[],"codeFilter":[],"dateFilter":[],"otherFilter":[]}},{"localId":"1212","locator":"168:1-171:15","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"Earliest","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"1212","s":[{"value":["/*Given an interval, return the starting point if the interval has a starting boundary specified, otherwise, return the ending point*/\n","define function \"Earliest\"(period Interval\u003cDateTime\u003e ):\n  "]},{"r":"1218","s":[{"r":"1218","s":[{"value":["if "]},{"r":"1222","s":[{"value":["( "]},{"r":"1222","s":[{"value":["HasStart","("]},{"r":"1219","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":[" then "]},{"r":"1223","s":[{"value":["start of "]},{"r":"1224","s":[{"value":["period"]}]}]},{"value":[" \n    else \n  "]},{"r":"1227","s":[{"value":["end of "]},{"r":"1228","s":[{"value":["period"]}]}]}]}]}]}}],"expression":{"localId":"1218","locator":"169:3-171:15","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"If","condition":{"localId":"1222","locator":"169:6-169:24","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","name":"HasStart","type":"FunctionRef","signature":[],"operand":[{"localId":"1219","locator":"169:17-169:22","name":"period","type":"OperandRef","resultTypeSpecifier":{"localId":"1220","type":"IntervalTypeSpecifier","pointType":{"localId":"1221","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},"then":{"localId":"1223","locator":"169:31-169:45","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"1224","locator":"169:40-169:45","name":"period","type":"OperandRef","resultTypeSpecifier":{"localId":"1225","type":"IntervalTypeSpecifier","pointType":{"localId":"1226","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}},"else":{"localId":"1227","locator":"171:3-171:15","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"End","signature":[],"operand":{"localId":"1228","locator":"171:10-171:15","name":"period","type":"OperandRef","resultTypeSpecifier":{"localId":"1229","type":"IntervalTypeSpecifier","pointType":{"localId":"1230","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}},"operand":[{"localId":"1217","name":"period","operandTypeSpecifier":{"localId":"1213","locator":"168:35-168:52","type":"IntervalTypeSpecifier","resultTypeSpecifier":{"localId":"1215","type":"IntervalTypeSpecifier","pointType":{"localId":"1216","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"pointType":{"localId":"1214","locator":"168:44-168:51","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"1247","locator":"178:1-179:50","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"EarliestOf","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"1247","s":[{"value":["/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the starting point of the period if the period has a starting boundary specified, otherwise returns the ending point of the period*/\n","define function \"EarliestOf\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  "]},{"r":"1262","s":[{"r":"1262","s":[{"value":["Earliest","("]},{"r":"1259","s":[{"value":["NormalizeInterval","("]},{"r":"1255","s":[{"value":["pointInTime"]}]},{"value":[", "]},{"r":"1256","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"1262","locator":"179:3-179:50","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"Earliest","type":"FunctionRef","signature":[],"operand":[{"localId":"1259","locator":"179:12-179:49","name":"NormalizeInterval","type":"FunctionRef","resultTypeSpecifier":{"localId":"1260","type":"IntervalTypeSpecifier","pointType":{"localId":"1261","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"signature":[],"operand":[{"localId":"1255","locator":"179:30-179:40","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"pointInTime","type":"OperandRef"},{"localId":"1256","locator":"179:43-179:48","name":"period","type":"OperandRef","resultTypeSpecifier":{"localId":"1257","type":"IntervalTypeSpecifier","pointType":{"localId":"1258","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]}]},"operand":[{"localId":"1249","name":"pointInTime","operandTypeSpecifier":{"localId":"1248","locator":"178:42-178:49","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"localId":"1254","name":"period","operandTypeSpecifier":{"localId":"1250","locator":"178:59-178:76","type":"IntervalTypeSpecifier","resultTypeSpecifier":{"localId":"1252","type":"IntervalTypeSpecifier","pointType":{"localId":"1253","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"pointType":{"localId":"1251","locator":"178:68-178:75","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"395","locator":"48:1-52:18","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"EmergencyDepartmentArrivalTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"395","s":[{"value":["/*Returns the arrival time in the ED for the encounter.*/\n","define function \"EmergencyDepartmentArrivalTime\"(Encounter \"Encounter, Performed\" ):\n  "]},{"r":"398","s":[{"r":"398","s":[{"value":["start of "]},{"r":"427","s":[{"r":"426","s":[{"value":["First","("]},{"r":"421","s":[{"s":[{"r":"399","s":[{"r":"401","s":[{"value":["("]},{"r":"401","s":[{"value":["\"HospitalizationLocations\"","("]},{"r":"400","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n  \t\t"]},{"r":"411","s":[{"value":["where "]},{"r":"411","s":[{"r":"409","s":[{"r":"408","s":[{"value":["HospitalLocation"]}]},{"value":["."]},{"r":"409","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"410","s":[{"value":["\"Emergency Department Visit\""]}]}]}]},{"value":["\n  \t\t"]},{"r":"417","s":[{"value":["sort by "]},{"r":"416","s":[{"r":"412","s":[{"value":["start of "]},{"r":"413","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"427","s":[{"value":["locationPeriod"]}]}]}]}]}]}}],"expression":{"localId":"398","locator":"49:3-52:18","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"427","locator":"49:12-52:18","path":"locationPeriod","type":"Property","resultTypeSpecifier":{"localId":"430","type":"IntervalTypeSpecifier","pointType":{"localId":"431","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"source":{"localId":"426","locator":"49:12-52:3","resultTypeName":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"First","signature":[],"source":{"localId":"421","locator":"49:18-51:35","type":"Query","resultTypeSpecifier":{"localId":"422","type":"ListTypeSpecifier","elementType":{"localId":"423","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}},"source":[{"localId":"399","locator":"49:18-49:72","alias":"HospitalLocation","resultTypeSpecifier":{"localId":"406","type":"ListTypeSpecifier","elementType":{"localId":"407","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}},"expression":{"localId":"401","locator":"49:18-49:56","name":"HospitalizationLocations","type":"FunctionRef","resultTypeSpecifier":{"localId":"404","type":"ListTypeSpecifier","elementType":{"localId":"405","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}},"signature":[],"operand":[{"localId":"400","locator":"49:46-49:54","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"Encounter","type":"OperandRef"}]}}],"let":[],"relationship":[],"where":{"localId":"411","locator":"50:5-50:63","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"InValueSet","signature":[],"code":{"localId":"409","locator":"50:11-50:31","resultTypeName":"{urn:hl7-org:elm-types:r1}Code","path":"code","scope":"HospitalLocation","type":"Property"},"valueset":{"localId":"410","locator":"50:36-50:63","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Emergency Department Visit","preserve":true}},"sort":{"localId":"417","locator":"51:5-51:35","by":[{"localId":"416","locator":"51:13-51:35","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","direction":"asc","type":"ByExpression","expression":{"localId":"412","locator":"51:13-51:35","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"413","locator":"51:22-51:35","name":"locationPeriod","type":"IdentifierRef","resultTypeSpecifier":{"localId":"414","type":"IntervalTypeSpecifier","pointType":{"localId":"415","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}}]}}}}},"operand":[{"localId":"397","name":"Encounter","operandTypeSpecifier":{"localId":"396","locator":"48:60-48:81","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"1063","locator":"134:1-139:3","resultTypeName":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","name":"FirstInpatientIntensiveCareUnit","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"1063","s":[{"value":["/*First Inpatient Intensive Care Unit returns the first intensive care unit for the given encounter, without considering any immediately prior emergency department visit.*/\n","define function \"FirstInpatientIntensiveCareUnit\"(Encounter \"Encounter, Performed\" ):\n  "]},{"r":"1110","s":[{"r":"1110","s":[{"value":["First","("]},{"r":"1105","s":[{"s":[{"r":"1066","s":[{"r":"1068","s":[{"value":["("]},{"r":"1068","s":[{"r":"1067","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"1068","s":[{"value":["facilityLocations"]}]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n      "]},{"r":"1077","s":[{"value":["where "]},{"r":"1077","s":[{"r":"1081","s":[{"r":"1079","s":[{"r":"1078","s":[{"value":["HospitalLocation"]}]},{"value":["."]},{"r":"1079","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"1080","s":[{"value":["\"Intensive Care Unit\""]}]}]},{"value":["\n        and "]},{"r":"1094","s":[{"r":"1083","s":[{"r":"1082","s":[{"value":["HospitalLocation"]}]},{"value":["."]},{"r":"1083","s":[{"value":["locationPeriod"]}]}]},{"r":"1094","value":[" ","during"," "]},{"r":"1089","s":[{"r":"1088","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"1089","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n      "]},{"r":"1101","s":[{"value":["sort by "]},{"r":"1100","s":[{"r":"1096","s":[{"value":["start of "]},{"r":"1097","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]}]}]}}],"expression":{"localId":"1110","locator":"135:3-139:3","resultTypeName":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"First","signature":[],"source":{"localId":"1105","locator":"135:9-138:37","type":"Query","resultTypeSpecifier":{"localId":"1106","type":"ListTypeSpecifier","elementType":{"localId":"1107","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}},"source":[{"localId":"1066","locator":"135:9-135:53","alias":"HospitalLocation","resultTypeSpecifier":{"localId":"1075","type":"ListTypeSpecifier","elementType":{"localId":"1076","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}},"expression":{"localId":"1068","locator":"135:9-135:37","path":"facilityLocations","type":"Property","resultTypeSpecifier":{"localId":"1073","type":"ListTypeSpecifier","elementType":{"localId":"1074","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}},"source":{"localId":"1067","locator":"135:10-135:18","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"Encounter","type":"OperandRef"}}}],"let":[],"relationship":[],"where":{"localId":"1077","locator":"136:7-137:75","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"And","signature":[],"operand":[{"localId":"1081","locator":"136:13-136:58","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"InValueSet","signature":[],"code":{"localId":"1079","locator":"136:13-136:33","resultTypeName":"{urn:hl7-org:elm-types:r1}Code","path":"code","scope":"HospitalLocation","type":"Property"},"valueset":{"localId":"1080","locator":"136:38-136:58","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Intensive Care Unit","preserve":true}},{"localId":"1094","locator":"137:13-137:75","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"IncludedIn","signature":[],"operand":[{"localId":"1083","locator":"137:13-137:43","path":"locationPeriod","scope":"HospitalLocation","type":"Property","resultTypeSpecifier":{"localId":"1086","type":"IntervalTypeSpecifier","pointType":{"localId":"1087","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}},{"localId":"1089","locator":"137:52-137:75","path":"relevantPeriod","type":"Property","resultTypeSpecifier":{"localId":"1092","type":"IntervalTypeSpecifier","pointType":{"localId":"1093","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"source":{"localId":"1088","locator":"137:52-137:60","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"Encounter","type":"OperandRef"}}]}]},"sort":{"localId":"1101","locator":"138:7-138:37","by":[{"localId":"1100","locator":"138:15-138:37","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","direction":"asc","type":"ByExpression","expression":{"localId":"1096","locator":"138:15-138:37","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"1097","locator":"138:24-138:37","name":"locationPeriod","type":"IdentifierRef","resultTypeSpecifier":{"localId":"1098","type":"IntervalTypeSpecifier","pointType":{"localId":"1099","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}}]}}},"operand":[{"localId":"1065","name":"Encounter","operandTypeSpecifier":{"localId":"1064","locator":"134:61-134:82","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"1173","locator":"154:1-159:3","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","name":"HasEnd","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"1173","s":[{"value":["/*Given an interval, return true if the interval has an ending boundary specified (i.e. the end of the interval is not null and not the maximum DateTime value)*/\n","define function \"HasEnd\"(period Interval\u003cDateTime\u003e ):\n  "]},{"r":"1179","s":[{"r":"1179","s":[{"value":["not "]},{"r":"1180","s":[{"value":["( \n    "]},{"r":"1180","s":[{"r":"1185","s":[{"r":"1181","s":[{"value":["end of "]},{"r":"1182","s":[{"value":["period"]}]}]},{"value":[" is null"]}]},{"value":["\n      or \n      "]},{"r":"1186","s":[{"r":"1187","s":[{"value":["end of "]},{"r":"1188","s":[{"value":["period"]}]}]},{"value":[" ","="," "]},{"r":"1192","s":[{"value":["maximum"," "]},{"r":"1191","s":[{"value":["DateTime"]}]}]}]}]},{"value":["\n  )"]}]}]}]}]}}],"expression":{"localId":"1179","locator":"155:3-159:3","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"Not","signature":[],"operand":{"localId":"1180","locator":"155:7-159:3","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"Or","signature":[],"operand":[{"localId":"1185","locator":"156:5-156:25","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"IsNull","signature":[],"operand":{"localId":"1181","locator":"156:5-156:17","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"End","signature":[],"operand":{"localId":"1182","locator":"156:12-156:17","name":"period","type":"OperandRef","resultTypeSpecifier":{"localId":"1183","type":"IntervalTypeSpecifier","pointType":{"localId":"1184","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}},{"localId":"1186","locator":"158:7-158:38","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"Equal","signature":[],"operand":[{"localId":"1187","locator":"158:7-158:19","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"End","signature":[],"operand":{"localId":"1188","locator":"158:14-158:19","name":"period","type":"OperandRef","resultTypeSpecifier":{"localId":"1189","type":"IntervalTypeSpecifier","pointType":{"localId":"1190","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}},{"localId":"1192","locator":"158:23-158:38","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","valueType":"{urn:hl7-org:elm-types:r1}DateTime","type":"MaxValue"}]}]}},"operand":[{"localId":"1178","name":"period","operandTypeSpecifier":{"localId":"1174","locator":"154:33-154:50","type":"IntervalTypeSpecifier","resultTypeSpecifier":{"localId":"1176","type":"IntervalTypeSpecifier","pointType":{"localId":"1177","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"pointType":{"localId":"1175","locator":"154:42-154:49","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"1153","locator":"148:1-151:3","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","name":"HasStart","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"1153","s":[{"value":["/*Given an interval, return true if the interval has a starting boundary specified (i.e. the start of the interval is not null and not the minimum DateTime value)*/\n","define function \"HasStart\"(period Interval\u003cDateTime\u003e ):\n  "]},{"r":"1159","s":[{"r":"1159","s":[{"value":["not "]},{"r":"1160","s":[{"value":["( "]},{"r":"1160","s":[{"r":"1165","s":[{"r":"1161","s":[{"value":["start of "]},{"r":"1162","s":[{"value":["period"]}]}]},{"value":[" is null"]}]},{"value":["\n      or "]},{"r":"1166","s":[{"r":"1167","s":[{"value":["start of "]},{"r":"1168","s":[{"value":["period"]}]}]},{"value":[" ","="," "]},{"r":"1172","s":[{"value":["minimum"," "]},{"r":"1171","s":[{"value":["DateTime"]}]}]}]}]},{"value":["\n  )"]}]}]}]}]}}],"expression":{"localId":"1159","locator":"149:3-151:3","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"Not","signature":[],"operand":{"localId":"1160","locator":"149:7-151:3","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"Or","signature":[],"operand":[{"localId":"1165","locator":"149:9-149:31","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"IsNull","signature":[],"operand":{"localId":"1161","locator":"149:9-149:23","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"1162","locator":"149:18-149:23","name":"period","type":"OperandRef","resultTypeSpecifier":{"localId":"1163","type":"IntervalTypeSpecifier","pointType":{"localId":"1164","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}},{"localId":"1166","locator":"150:10-150:43","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"Equal","signature":[],"operand":[{"localId":"1167","locator":"150:10-150:24","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"1168","locator":"150:19-150:24","name":"period","type":"OperandRef","resultTypeSpecifier":{"localId":"1169","type":"IntervalTypeSpecifier","pointType":{"localId":"1170","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}},{"localId":"1172","locator":"150:28-150:43","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","valueType":"{urn:hl7-org:elm-types:r1}DateTime","type":"MinValue"}]}]}},"operand":[{"localId":"1158","name":"period","operandTypeSpecifier":{"localId":"1154","locator":"148:35-148:52","type":"IntervalTypeSpecifier","resultTypeSpecifier":{"localId":"1156","type":"IntervalTypeSpecifier","pointType":{"localId":"1157","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"pointType":{"localId":"1155","locator":"148:44-148:51","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"432","locator":"55:1-56:39","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"HospitalAdmissionTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"432","s":[{"value":["/*Returns admission time for an encounter or for immediately prior emergency department visit.*/\n","define function \"HospitalAdmissionTime\"(Encounter \"Encounter, Performed\" ):\n  "]},{"r":"435","s":[{"r":"435","s":[{"value":["start of "]},{"r":"440","s":[{"value":["\"Hospitalization\"","("]},{"r":"436","s":[{"value":["Encounter"]}]},{"value":[")"]}]}]}]}]}}],"expression":{"localId":"435","locator":"56:3-56:39","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"440","locator":"56:12-56:39","name":"Hospitalization","type":"FunctionRef","resultTypeSpecifier":{"localId":"528","type":"IntervalTypeSpecifier","pointType":{"localId":"529","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"signature":[],"operand":[{"localId":"436","locator":"56:30-56:38","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"Encounter","type":"OperandRef"}]}},"operand":[{"localId":"434","name":"Encounter","operandTypeSpecifier":{"localId":"433","locator":"55:51-55:72","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"530","locator":"59:1-62:18","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"HospitalArrivalTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"530","s":[{"value":["/*Returns earliest arrival time for an encounter including any prior ED visit.*/\n","define function \"HospitalArrivalTime\"(Encounter \"Encounter, Performed\" ):\n  "]},{"r":"533","s":[{"r":"533","s":[{"value":["start of "]},{"r":"558","s":[{"r":"557","s":[{"value":["First","("]},{"r":"552","s":[{"s":[{"r":"534","s":[{"r":"536","s":[{"value":["("]},{"r":"536","s":[{"value":["\"HospitalizationLocations\"","("]},{"r":"535","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n  \t\t"]},{"r":"548","s":[{"value":["sort by "]},{"r":"547","s":[{"r":"543","s":[{"value":["start of "]},{"r":"544","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"558","s":[{"value":["locationPeriod"]}]}]}]}]}]}}],"expression":{"localId":"533","locator":"60:3-62:18","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"558","locator":"60:12-62:18","path":"locationPeriod","type":"Property","resultTypeSpecifier":{"localId":"561","type":"IntervalTypeSpecifier","pointType":{"localId":"562","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"source":{"localId":"557","locator":"60:12-62:3","resultTypeName":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"First","signature":[],"source":{"localId":"552","locator":"60:18-61:35","type":"Query","resultTypeSpecifier":{"localId":"553","type":"ListTypeSpecifier","elementType":{"localId":"554","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}},"source":[{"localId":"534","locator":"60:18-60:72","alias":"HospitalLocation","resultTypeSpecifier":{"localId":"541","type":"ListTypeSpecifier","elementType":{"localId":"542","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}},"expression":{"localId":"536","locator":"60:18-60:56","name":"HospitalizationLocations","type":"FunctionRef","resultTypeSpecifier":{"localId":"539","type":"ListTypeSpecifier","elementType":{"localId":"540","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}},"signature":[],"operand":[{"localId":"535","locator":"60:46-60:54","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"Encounter","type":"OperandRef"}]}}],"let":[],"relationship":[],"sort":{"localId":"548","locator":"61:5-61:35","by":[{"localId":"547","locator":"61:13-61:35","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","direction":"asc","type":"ByExpression","expression":{"localId":"543","locator":"61:13-61:35","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"544","locator":"61:22-61:35","name":"locationPeriod","type":"IdentifierRef","resultTypeSpecifier":{"localId":"545","type":"IntervalTypeSpecifier","pointType":{"localId":"546","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}}]}}}}},"operand":[{"localId":"532","name":"Encounter","operandTypeSpecifier":{"localId":"531","locator":"59:49-59:70","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"660","locator":"80:1-83:18","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"HospitalDepartureTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"660","s":[{"value":["/*Returns the latest departure time for encounter including any prior ED visit.*/\n","define function \"HospitalDepartureTime\"(Encounter \"Encounter, Performed\" ):\n  "]},{"r":"663","s":[{"r":"663","s":[{"value":["end of "]},{"r":"688","s":[{"r":"687","s":[{"value":["Last","("]},{"r":"682","s":[{"s":[{"r":"664","s":[{"r":"666","s":[{"value":["("]},{"r":"666","s":[{"value":["\"HospitalizationLocations\"","("]},{"r":"665","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n  \t\t"]},{"r":"678","s":[{"value":["sort by "]},{"r":"677","s":[{"r":"673","s":[{"value":["start of "]},{"r":"674","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"688","s":[{"value":["locationPeriod"]}]}]}]}]}]}}],"expression":{"localId":"663","locator":"81:3-83:18","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"End","signature":[],"operand":{"localId":"688","locator":"81:10-83:18","path":"locationPeriod","type":"Property","resultTypeSpecifier":{"localId":"691","type":"IntervalTypeSpecifier","pointType":{"localId":"692","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"source":{"localId":"687","locator":"81:10-83:3","resultTypeName":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"Last","signature":[],"source":{"localId":"682","locator":"81:15-82:35","type":"Query","resultTypeSpecifier":{"localId":"683","type":"ListTypeSpecifier","elementType":{"localId":"684","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}},"source":[{"localId":"664","locator":"81:15-81:69","alias":"HospitalLocation","resultTypeSpecifier":{"localId":"671","type":"ListTypeSpecifier","elementType":{"localId":"672","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}},"expression":{"localId":"666","locator":"81:15-81:53","name":"HospitalizationLocations","type":"FunctionRef","resultTypeSpecifier":{"localId":"669","type":"ListTypeSpecifier","elementType":{"localId":"670","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}},"signature":[],"operand":[{"localId":"665","locator":"81:43-81:51","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"Encounter","type":"OperandRef"}]}}],"let":[],"relationship":[],"sort":{"localId":"678","locator":"82:5-82:35","by":[{"localId":"677","locator":"82:13-82:35","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","direction":"asc","type":"ByExpression","expression":{"localId":"673","locator":"82:13-82:35","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"674","locator":"82:22-82:35","name":"locationPeriod","type":"IdentifierRef","resultTypeSpecifier":{"localId":"675","type":"IntervalTypeSpecifier","pointType":{"localId":"676","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}}]}}}}},"operand":[{"localId":"662","name":"Encounter","operandTypeSpecifier":{"localId":"661","locator":"80:51-80:72","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"693","locator":"86:1-87:33","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"HospitalDischargeTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"693","s":[{"value":["/*Hospital Discharge Time returns the discharge time for an encounter*/\n","define function \"HospitalDischargeTime\"(Encounter \"Encounter, Performed\" ):\n  "]},{"r":"696","s":[{"r":"696","s":[{"value":["end of "]},{"r":"698","s":[{"r":"697","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"698","s":[{"value":["relevantPeriod"]}]}]}]}]}]}}],"expression":{"localId":"696","locator":"87:3-87:33","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"End","signature":[],"operand":{"localId":"698","locator":"87:10-87:33","path":"relevantPeriod","type":"Property","resultTypeSpecifier":{"localId":"701","type":"IntervalTypeSpecifier","pointType":{"localId":"702","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"source":{"localId":"697","locator":"87:10-87:18","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"Encounter","type":"OperandRef"}}},"operand":[{"localId":"695","name":"Encounter","operandTypeSpecifier":{"localId":"694","locator":"86:51-86:72","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"437","locator":"65:1-73:31","name":"Hospitalization","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"437","s":[{"value":["/*Hospitalization returns the total interval for admission to discharge for the given encounter, or for the admission of any immediately prior emergency department visit to the discharge of the given encounter.*/\n","define function \"Hospitalization\"(Encounter \"Encounter, Performed\" ):\n  "]},{"r":"645","s":[{"r":"645","s":[{"s":[{"r":"563","s":[{"r":"564","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"565","s":[{"value":["EDVisit",": "]},{"r":"614","s":[{"value":["Last","("]},{"r":"609","s":[{"s":[{"r":"566","s":[{"r":"569","s":[{"r":"569","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"599","s":[{"value":["where "]},{"r":"599","s":[{"r":"578","s":[{"r":"577","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"578","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"599","s":[{"value":["ends "]},{"r":"591","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"583","s":[{"value":["start of "]},{"r":"585","s":[{"r":"584","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"585","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"605","s":[{"value":["sort by \n  \t\t\t"]},{"r":"604","s":[{"r":"600","s":[{"value":["end of "]},{"r":"601","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"615","s":[{"value":["return "]},{"r":"640","s":[{"value":["Interval["]},{"r":"632","s":[{"value":["Coalesce","("]},{"r":"616","s":[{"value":["start of "]},{"r":"618","s":[{"r":"617","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"618","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"623","s":[{"value":["start of "]},{"r":"625","s":[{"r":"624","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"625","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]},{"value":[", \n  \t"]},{"r":"633","s":[{"value":["end of "]},{"r":"635","s":[{"r":"634","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"635","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["]"]}]}]}]}]}]}}],"resultTypeSpecifier":{"localId":"650","type":"IntervalTypeSpecifier","pointType":{"localId":"651","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"expression":{"localId":"645","locator":"66:3-73:31","type":"Query","resultTypeSpecifier":{"localId":"648","type":"IntervalTypeSpecifier","pointType":{"localId":"649","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"source":[{"localId":"563","locator":"66:3-66:17","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","alias":"Visit","expression":{"localId":"564","locator":"66:3-66:11","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"565","locator":"67:8-71:4","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","identifier":"EDVisit","expression":{"localId":"614","locator":"67:17-71:4","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"Last","signature":[],"source":{"localId":"609","locator":"67:22-70:26","type":"Query","resultTypeSpecifier":{"localId":"610","type":"ListTypeSpecifier","elementType":{"localId":"611","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"source":[{"localId":"566","locator":"67:22-67:82","alias":"LastED","resultTypeSpecifier":{"localId":"575","type":"ListTypeSpecifier","elementType":{"localId":"576","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"569","locator":"67:22-67:75","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","resultTypeSpecifier":{"localId":"573","type":"ListTypeSpecifier","elementType":{"localId":"574","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"codes":{"localId":"568","locator":"67:47-67:74","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Emergency Department Visit","preserve":true,"type":"ValueSetRef"},"include":[],"codeFilter":[],"dateFilter":[],"otherFilter":[]}}],"let":[],"relationship":[],"where":{"localId":"599","locator":"68:6-68:95","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"And","signature":[],"operand":[{"localId":"596","locator":"68:39-68:52","type":"In","signature":[],"operand":[{"localId":"590","locator":"68:34-68:37","type":"End","signature":[],"operand":{"localId":"578","locator":"68:12-68:32","path":"relevantPeriod","scope":"LastED","type":"Property","resultTypeSpecifier":{"localId":"581","type":"IntervalTypeSpecifier","pointType":{"localId":"582","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}},{"localId":"593","locator":"68:39-68:52","lowClosed":true,"highClosed":true,"type":"Interval","resultTypeSpecifier":{"localId":"594","type":"IntervalTypeSpecifier","pointType":{"localId":"595","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"low":{"localId":"592","locator":"68:67-68:95","type":"Subtract","signature":[],"operand":[{"localId":"583","locator":"68:67-68:95","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"585","locator":"68:76-68:95","path":"relevantPeriod","scope":"Visit","type":"Property","resultTypeSpecifier":{"localId":"588","type":"IntervalTypeSpecifier","pointType":{"localId":"589","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}},{"localId":"591","locator":"68:39-68:44","resultTypeName":"{urn:hl7-org:elm-types:r1}Quantity","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"583","locator":"68:67-68:95","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"585","locator":"68:76-68:95","path":"relevantPeriod","scope":"Visit","type":"Property","resultTypeSpecifier":{"localId":"588","type":"IntervalTypeSpecifier","pointType":{"localId":"589","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}}]},{"localId":"598","locator":"68:39-68:52","type":"Not","signature":[],"operand":{"localId":"597","locator":"68:39-68:52","type":"IsNull","signature":[],"operand":{"localId":"583","locator":"68:67-68:95","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"585","locator":"68:76-68:95","path":"relevantPeriod","scope":"Visit","type":"Property","resultTypeSpecifier":{"localId":"588","type":"IntervalTypeSpecifier","pointType":{"localId":"589","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}}}]},"sort":{"localId":"605","locator":"69:6-70:26","by":[{"localId":"604","locator":"70:6-70:26","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","direction":"asc","type":"ByExpression","expression":{"localId":"600","locator":"70:6-70:26","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"End","signature":[],"operand":{"localId":"601","locator":"70:13-70:26","name":"relevantPeriod","type":"IdentifierRef","resultTypeSpecifier":{"localId":"602","type":"IntervalTypeSpecifier","pointType":{"localId":"603","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}}]}}}}],"relationship":[],"return":{"localId":"615","locator":"72:4-73:31","resultTypeSpecifier":{"localId":"643","type":"IntervalTypeSpecifier","pointType":{"localId":"644","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"expression":{"localId":"640","locator":"72:11-73:31","lowClosed":true,"highClosed":true,"type":"Interval","resultTypeSpecifier":{"localId":"641","type":"IntervalTypeSpecifier","pointType":{"localId":"642","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"low":{"localId":"632","locator":"72:20-72:91","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Coalesce","signature":[],"operand":[{"localId":"616","locator":"72:29-72:59","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"618","locator":"72:38-72:59","path":"relevantPeriod","type":"Property","resultTypeSpecifier":{"localId":"621","type":"IntervalTypeSpecifier","pointType":{"localId":"622","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"source":{"localId":"617","locator":"72:38-72:44","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"EDVisit","type":"QueryLetRef"}}},{"localId":"623","locator":"72:62-72:90","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"625","locator":"72:71-72:90","path":"relevantPeriod","scope":"Visit","type":"Property","resultTypeSpecifier":{"localId":"628","type":"IntervalTypeSpecifier","pointType":{"localId":"629","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}]},"high":{"localId":"633","locator":"73:4-73:30","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"End","signature":[],"operand":{"localId":"635","locator":"73:11-73:30","path":"relevantPeriod","scope":"Visit","type":"Property","resultTypeSpecifier":{"localId":"638","type":"IntervalTypeSpecifier","pointType":{"localId":"639","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}}}},"operand":[{"localId":"439","name":"Encounter","operandTypeSpecifier":{"localId":"438","locator":"65:45-65:66","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"652","locator":"76:1-77:44","resultTypeName":"{urn:hl7-org:elm-types:r1}Integer","name":"HospitalizationLengthofStay","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"652","s":[{"value":["/*Returns the length of stay in days (i.e. the number of days between admission and discharge) for the given encounter, or from the admission of any immediately prior emergency department visit to the discharge of the encounter*/\n","define function \"HospitalizationLengthofStay\"(Encounter \"Encounter, Performed\" ):\n  "]},{"r":"659","s":[{"r":"659","s":[{"value":["LengthInDays","("]},{"r":"656","s":[{"value":["\"Hospitalization\"","("]},{"r":"655","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"659","locator":"77:3-77:44","resultTypeName":"{urn:hl7-org:elm-types:r1}Integer","name":"LengthInDays","type":"FunctionRef","signature":[],"operand":[{"localId":"656","locator":"77:16-77:43","name":"Hospitalization","type":"FunctionRef","resultTypeSpecifier":{"localId":"657","type":"IntervalTypeSpecifier","pointType":{"localId":"658","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"signature":[],"operand":[{"localId":"655","locator":"77:34-77:42","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"Encounter","type":"OperandRef"}]}]},"operand":[{"localId":"654","name":"Encounter","operandTypeSpecifier":{"localId":"653","locator":"76:57-76:78","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"300","locator":"37:1-45:71","name":"HospitalizationLocations","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"300","s":[{"value":["/*returns list of all locations within an encounter, including locations for immediately prior ED visit.*/\n","define function \"HospitalizationLocations\"(Encounter \"Encounter, Performed\" ):\n  "]},{"r":"388","s":[{"r":"388","s":[{"s":[{"r":"303","s":[{"r":"304","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"305","s":[{"value":["EDVisit",": "]},{"r":"354","s":[{"value":["Last","("]},{"r":"349","s":[{"s":[{"r":"306","s":[{"r":"309","s":[{"r":"309","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"339","s":[{"value":["where "]},{"r":"339","s":[{"r":"318","s":[{"r":"317","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"318","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"339","s":[{"value":["ends "]},{"r":"331","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"323","s":[{"value":["start of "]},{"r":"325","s":[{"r":"324","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"325","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"345","s":[{"value":["sort by \n  \t\t\t"]},{"r":"344","s":[{"r":"340","s":[{"value":["end of "]},{"r":"341","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"355","s":[{"value":["return "]},{"r":"356","s":[{"value":["if "]},{"r":"358","s":[{"r":"357","s":[{"value":["EDVisit"]}]},{"value":[" is null"]}]},{"value":[" then "]},{"r":"360","s":[{"r":"359","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"360","s":[{"value":["facilityLocations"]}]}]},{"value":[" \n  \t\telse "]},{"r":"365","s":[{"value":["flatten "]},{"r":"366","s":[{"value":["{ "]},{"r":"368","s":[{"r":"367","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"368","s":[{"value":["facilityLocations"]}]}]},{"value":[", "]},{"r":"374","s":[{"r":"373","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"374","s":[{"value":["facilityLocations"]}]}]},{"value":[" }"]}]}]}]}]}]}]}]}}],"resultTypeSpecifier":{"localId":"393","type":"ListTypeSpecifier","elementType":{"localId":"394","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}},"expression":{"localId":"388","locator":"38:3-45:71","type":"Query","resultTypeSpecifier":{"localId":"391","type":"ListTypeSpecifier","elementType":{"localId":"392","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}},"source":[{"localId":"303","locator":"38:3-38:17","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","alias":"Visit","expression":{"localId":"304","locator":"38:3-38:11","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"305","locator":"39:8-43:4","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","identifier":"EDVisit","expression":{"localId":"354","locator":"39:17-43:4","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"Last","signature":[],"source":{"localId":"349","locator":"39:22-42:26","type":"Query","resultTypeSpecifier":{"localId":"350","type":"ListTypeSpecifier","elementType":{"localId":"351","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"source":[{"localId":"306","locator":"39:22-39:82","alias":"LastED","resultTypeSpecifier":{"localId":"315","type":"ListTypeSpecifier","elementType":{"localId":"316","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"309","locator":"39:22-39:75","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","resultTypeSpecifier":{"localId":"313","type":"ListTypeSpecifier","elementType":{"localId":"314","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"codes":{"localId":"308","locator":"39:47-39:74","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Emergency Department Visit","preserve":true,"type":"ValueSetRef"},"include":[],"codeFilter":[],"dateFilter":[],"otherFilter":[]}}],"let":[],"relationship":[],"where":{"localId":"339","locator":"40:6-40:95","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"And","signature":[],"operand":[{"localId":"336","locator":"40:39-40:52","type":"In","signature":[],"operand":[{"localId":"330","locator":"40:34-40:37","type":"End","signature":[],"operand":{"localId":"318","locator":"40:12-40:32","path":"relevantPeriod","scope":"LastED","type":"Property","resultTypeSpecifier":{"localId":"321","type":"IntervalTypeSpecifier","pointType":{"localId":"322","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}},{"localId":"333","locator":"40:39-40:52","lowClosed":true,"highClosed":true,"type":"Interval","resultTypeSpecifier":{"localId":"334","type":"IntervalTypeSpecifier","pointType":{"localId":"335","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"low":{"localId":"332","locator":"40:67-40:95","type":"Subtract","signature":[],"operand":[{"localId":"323","locator":"40:67-40:95","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"325","locator":"40:76-40:95","path":"relevantPeriod","scope":"Visit","type":"Property","resultTypeSpecifier":{"localId":"328","type":"IntervalTypeSpecifier","pointType":{"localId":"329","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}},{"localId":"331","locator":"40:39-40:44","resultTypeName":"{urn:hl7-org:elm-types:r1}Quantity","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"323","locator":"40:67-40:95","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"325","locator":"40:76-40:95","path":"relevantPeriod","scope":"Visit","type":"Property","resultTypeSpecifier":{"localId":"328","type":"IntervalTypeSpecifier","pointType":{"localId":"329","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}}]},{"localId":"338","locator":"40:39-40:52","type":"Not","signature":[],"operand":{"localId":"337","locator":"40:39-40:52","type":"IsNull","signature":[],"operand":{"localId":"323","locator":"40:67-40:95","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"325","locator":"40:76-40:95","path":"relevantPeriod","scope":"Visit","type":"Property","resultTypeSpecifier":{"localId":"328","type":"IntervalTypeSpecifier","pointType":{"localId":"329","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}}}]},"sort":{"localId":"345","locator":"41:6-42:26","by":[{"localId":"344","locator":"42:6-42:26","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","direction":"asc","type":"ByExpression","expression":{"localId":"340","locator":"42:6-42:26","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"End","signature":[],"operand":{"localId":"341","locator":"42:13-42:26","name":"relevantPeriod","type":"IdentifierRef","resultTypeSpecifier":{"localId":"342","type":"IntervalTypeSpecifier","pointType":{"localId":"343","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}}]}}}}],"relationship":[],"return":{"localId":"355","locator":"44:4-45:71","resultTypeSpecifier":{"localId":"386","type":"ListTypeSpecifier","elementType":{"localId":"387","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}},"expression":{"localId":"356","locator":"44:11-45:71","type":"If","resultTypeSpecifier":{"localId":"384","type":"ListTypeSpecifier","elementType":{"localId":"385","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}},"condition":{"localId":"358","locator":"44:14-44:28","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"IsNull","signature":[],"operand":{"localId":"357","locator":"44:14-44:20","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"EDVisit","type":"QueryLetRef"}},"then":{"localId":"360","locator":"44:35-44:57","path":"facilityLocations","scope":"Visit","type":"Property","resultTypeSpecifier":{"localId":"363","type":"ListTypeSpecifier","elementType":{"localId":"364","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}}},"else":{"localId":"365","locator":"45:10-45:71","type":"Flatten","resultTypeSpecifier":{"localId":"382","type":"ListTypeSpecifier","elementType":{"localId":"383","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}},"signature":[],"operand":{"localId":"366","locator":"45:18-45:71","type":"List","resultTypeSpecifier":{"localId":"379","type":"ListTypeSpecifier","elementType":{"localId":"380","type":"ListTypeSpecifier","elementType":{"localId":"381","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}}},"element":[{"localId":"368","locator":"45:20-45:44","path":"facilityLocations","type":"Property","resultTypeSpecifier":{"localId":"371","type":"ListTypeSpecifier","elementType":{"localId":"372","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}},"source":{"localId":"367","locator":"45:20-45:26","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"EDVisit","type":"QueryLetRef"}},{"localId":"374","locator":"45:47-45:69","path":"facilityLocations","scope":"Visit","type":"Property","resultTypeSpecifier":{"localId":"377","type":"ListTypeSpecifier","elementType":{"localId":"378","name":"{urn:healthit-gov:qdm:v5_6}FacilityLocation","type":"NamedTypeSpecifier"}}}]}}}}},"operand":[{"localId":"302","name":"Encounter","operandTypeSpecifier":{"localId":"301","locator":"37:54-37:75","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"907","locator":"113:1-127:31","name":"HospitalizationWithObservation","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"907","s":[{"value":["/*Hospitalization with Observation returns the total interval from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\n","define function \"HospitalizationWithObservation\"(Encounter \"Encounter, Performed\" ):\n  "]},{"r":"1048","s":[{"r":"1048","s":[{"s":[{"r":"910","s":[{"r":"911","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"912","s":[{"value":["ObsVisit",": "]},{"r":"961","s":[{"value":["Last","("]},{"r":"956","s":[{"s":[{"r":"913","s":[{"r":"916","s":[{"r":"916","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Observation Services\""]}]},{"value":["]"]}]}]},{"value":[" ","LastObs"]}]}]},{"value":["\n  \t\t\t"]},{"r":"946","s":[{"value":["where "]},{"r":"946","s":[{"r":"925","s":[{"r":"924","s":[{"value":["LastObs"]}]},{"value":["."]},{"r":"925","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"946","s":[{"value":["ends "]},{"r":"938","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"930","s":[{"value":["start of "]},{"r":"932","s":[{"r":"931","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"932","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"952","s":[{"value":["sort by \n  \t\t\t"]},{"r":"951","s":[{"r":"947","s":[{"value":["end of "]},{"r":"948","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]},{"value":[",\n  \t"]},{"r":"962","s":[{"value":["VisitStart",": "]},{"r":"979","s":[{"value":["Coalesce","("]},{"r":"963","s":[{"value":["start of "]},{"r":"965","s":[{"r":"964","s":[{"value":["ObsVisit"]}]},{"value":["."]},{"r":"965","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"970","s":[{"value":["start of "]},{"r":"972","s":[{"r":"971","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"972","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]}]},{"value":[",\n  \t"]},{"r":"980","s":[{"value":["EDVisit",": "]},{"r":"1023","s":[{"value":["Last","("]},{"r":"1018","s":[{"s":[{"r":"981","s":[{"r":"984","s":[{"r":"984","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"1008","s":[{"value":["where "]},{"r":"1008","s":[{"r":"993","s":[{"r":"992","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"993","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"1008","s":[{"value":["ends "]},{"r":"1000","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"998","s":[{"value":["VisitStart"]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"1014","s":[{"value":["sort by \n  \t\t\t"]},{"r":"1013","s":[{"r":"1009","s":[{"value":["end of "]},{"r":"1010","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"1024","s":[{"value":["return "]},{"r":"1043","s":[{"value":["Interval["]},{"r":"1035","s":[{"value":["Coalesce","("]},{"r":"1025","s":[{"value":["start of "]},{"r":"1027","s":[{"r":"1026","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"1027","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"1032","s":[{"value":["VisitStart"]}]},{"value":[")"]}]},{"value":[", \n  \t"]},{"r":"1036","s":[{"value":["end of "]},{"r":"1038","s":[{"r":"1037","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"1038","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["]"]}]}]}]}]}]}}],"resultTypeSpecifier":{"localId":"1053","type":"IntervalTypeSpecifier","pointType":{"localId":"1054","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"expression":{"localId":"1048","locator":"114:3-127:31","type":"Query","resultTypeSpecifier":{"localId":"1051","type":"IntervalTypeSpecifier","pointType":{"localId":"1052","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"source":[{"localId":"910","locator":"114:3-114:17","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","alias":"Visit","expression":{"localId":"911","locator":"114:3-114:11","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"912","locator":"115:8-119:4","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","identifier":"ObsVisit","expression":{"localId":"961","locator":"115:18-119:4","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"Last","signature":[],"source":{"localId":"956","locator":"115:23-118:26","type":"Query","resultTypeSpecifier":{"localId":"957","type":"ListTypeSpecifier","elementType":{"localId":"958","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"source":[{"localId":"913","locator":"115:23-115:78","alias":"LastObs","resultTypeSpecifier":{"localId":"922","type":"ListTypeSpecifier","elementType":{"localId":"923","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"916","locator":"115:23-115:70","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","resultTypeSpecifier":{"localId":"920","type":"ListTypeSpecifier","elementType":{"localId":"921","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"codes":{"localId":"915","locator":"115:48-115:69","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Observation Services","preserve":true,"type":"ValueSetRef"},"include":[],"codeFilter":[],"dateFilter":[],"otherFilter":[]}}],"let":[],"relationship":[],"where":{"localId":"946","locator":"116:6-116:96","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"And","signature":[],"operand":[{"localId":"943","locator":"116:40-116:53","type":"In","signature":[],"operand":[{"localId":"937","locator":"116:35-116:38","type":"End","signature":[],"operand":{"localId":"925","locator":"116:12-116:33","path":"relevantPeriod","scope":"LastObs","type":"Property","resultTypeSpecifier":{"localId":"928","type":"IntervalTypeSpecifier","pointType":{"localId":"929","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}},{"localId":"940","locator":"116:40-116:53","lowClosed":true,"highClosed":true,"type":"Interval","resultTypeSpecifier":{"localId":"941","type":"IntervalTypeSpecifier","pointType":{"localId":"942","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"low":{"localId":"939","locator":"116:68-116:96","type":"Subtract","signature":[],"operand":[{"localId":"930","locator":"116:68-116:96","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"932","locator":"116:77-116:96","path":"relevantPeriod","scope":"Visit","type":"Property","resultTypeSpecifier":{"localId":"935","type":"IntervalTypeSpecifier","pointType":{"localId":"936","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}},{"localId":"938","locator":"116:40-116:45","resultTypeName":"{urn:hl7-org:elm-types:r1}Quantity","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"930","locator":"116:68-116:96","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"932","locator":"116:77-116:96","path":"relevantPeriod","scope":"Visit","type":"Property","resultTypeSpecifier":{"localId":"935","type":"IntervalTypeSpecifier","pointType":{"localId":"936","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}}]},{"localId":"945","locator":"116:40-116:53","type":"Not","signature":[],"operand":{"localId":"944","locator":"116:40-116:53","type":"IsNull","signature":[],"operand":{"localId":"930","locator":"116:68-116:96","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"932","locator":"116:77-116:96","path":"relevantPeriod","scope":"Visit","type":"Property","resultTypeSpecifier":{"localId":"935","type":"IntervalTypeSpecifier","pointType":{"localId":"936","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}}}]},"sort":{"localId":"952","locator":"117:6-118:26","by":[{"localId":"951","locator":"118:6-118:26","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","direction":"asc","type":"ByExpression","expression":{"localId":"947","locator":"118:6-118:26","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"End","signature":[],"operand":{"localId":"948","locator":"118:13-118:26","name":"relevantPeriod","type":"IdentifierRef","resultTypeSpecifier":{"localId":"949","type":"IntervalTypeSpecifier","pointType":{"localId":"950","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}}]}}}},{"localId":"962","locator":"120:4-120:88","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","identifier":"VisitStart","expression":{"localId":"979","locator":"120:16-120:88","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Coalesce","signature":[],"operand":[{"localId":"963","locator":"120:25-120:56","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"965","locator":"120:34-120:56","path":"relevantPeriod","type":"Property","resultTypeSpecifier":{"localId":"968","type":"IntervalTypeSpecifier","pointType":{"localId":"969","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"source":{"localId":"964","locator":"120:34-120:41","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"ObsVisit","type":"QueryLetRef"}}},{"localId":"970","locator":"120:59-120:87","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"972","locator":"120:68-120:87","path":"relevantPeriod","scope":"Visit","type":"Property","resultTypeSpecifier":{"localId":"975","type":"IntervalTypeSpecifier","pointType":{"localId":"976","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}]}},{"localId":"980","locator":"121:4-125:4","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","identifier":"EDVisit","expression":{"localId":"1023","locator":"121:13-125:4","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"Last","signature":[],"source":{"localId":"1018","locator":"121:18-124:26","type":"Query","resultTypeSpecifier":{"localId":"1019","type":"ListTypeSpecifier","elementType":{"localId":"1020","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"source":[{"localId":"981","locator":"121:18-121:78","alias":"LastED","resultTypeSpecifier":{"localId":"990","type":"ListTypeSpecifier","elementType":{"localId":"991","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"984","locator":"121:18-121:71","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","resultTypeSpecifier":{"localId":"988","type":"ListTypeSpecifier","elementType":{"localId":"989","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"codes":{"localId":"983","locator":"121:43-121:70","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Emergency Department Visit","preserve":true,"type":"ValueSetRef"},"include":[],"codeFilter":[],"dateFilter":[],"otherFilter":[]}}],"let":[],"relationship":[],"where":{"localId":"1008","locator":"122:6-122:76","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"And","signature":[],"operand":[{"localId":"1005","locator":"122:39-122:52","type":"In","signature":[],"operand":[{"localId":"999","locator":"122:34-122:37","type":"End","signature":[],"operand":{"localId":"993","locator":"122:12-122:32","path":"relevantPeriod","scope":"LastED","type":"Property","resultTypeSpecifier":{"localId":"996","type":"IntervalTypeSpecifier","pointType":{"localId":"997","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}},{"localId":"1002","locator":"122:39-122:52","lowClosed":true,"highClosed":true,"type":"Interval","resultTypeSpecifier":{"localId":"1003","type":"IntervalTypeSpecifier","pointType":{"localId":"1004","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"low":{"localId":"1001","locator":"122:67-122:76","type":"Subtract","signature":[],"operand":[{"localId":"998","locator":"122:67-122:76","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"VisitStart","type":"QueryLetRef"},{"localId":"1000","locator":"122:39-122:44","resultTypeName":"{urn:hl7-org:elm-types:r1}Quantity","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"998","locator":"122:67-122:76","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"VisitStart","type":"QueryLetRef"}}]},{"localId":"1007","locator":"122:39-122:52","type":"Not","signature":[],"operand":{"localId":"1006","locator":"122:39-122:52","type":"IsNull","signature":[],"operand":{"localId":"998","locator":"122:67-122:76","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"VisitStart","type":"QueryLetRef"}}}]},"sort":{"localId":"1014","locator":"123:6-124:26","by":[{"localId":"1013","locator":"124:6-124:26","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","direction":"asc","type":"ByExpression","expression":{"localId":"1009","locator":"124:6-124:26","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"End","signature":[],"operand":{"localId":"1010","locator":"124:13-124:26","name":"relevantPeriod","type":"IdentifierRef","resultTypeSpecifier":{"localId":"1011","type":"IntervalTypeSpecifier","pointType":{"localId":"1012","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}}]}}}}],"relationship":[],"return":{"localId":"1024","locator":"126:4-127:31","resultTypeSpecifier":{"localId":"1046","type":"IntervalTypeSpecifier","pointType":{"localId":"1047","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"expression":{"localId":"1043","locator":"126:11-127:31","lowClosed":true,"highClosed":true,"type":"Interval","resultTypeSpecifier":{"localId":"1044","type":"IntervalTypeSpecifier","pointType":{"localId":"1045","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"low":{"localId":"1035","locator":"126:20-126:72","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Coalesce","signature":[],"operand":[{"localId":"1025","locator":"126:29-126:59","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"1027","locator":"126:38-126:59","path":"relevantPeriod","type":"Property","resultTypeSpecifier":{"localId":"1030","type":"IntervalTypeSpecifier","pointType":{"localId":"1031","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"source":{"localId":"1026","locator":"126:38-126:44","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"EDVisit","type":"QueryLetRef"}}},{"localId":"1032","locator":"126:62-126:71","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"VisitStart","type":"QueryLetRef"}]},"high":{"localId":"1036","locator":"127:4-127:30","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"End","signature":[],"operand":{"localId":"1038","locator":"127:11-127:30","path":"relevantPeriod","scope":"Visit","type":"Property","resultTypeSpecifier":{"localId":"1041","type":"IntervalTypeSpecifier","pointType":{"localId":"1042","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}}}},"operand":[{"localId":"909","name":"Encounter","operandTypeSpecifier":{"localId":"908","locator":"113:60-113:81","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"703","locator":"90:1-110:31","name":"HospitalizationWithObservationAndOutpatientSurgeryService","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"703","s":[{"value":["/*Hospitalization with Observation and Outpatient Surgery Service returns the total interval from the start of any immediately prior emergency department visit, outpatient surgery visit or observation visit to the discharge of the given encounter.*/\n","define function \"HospitalizationWithObservationAndOutpatientSurgeryService\"(Encounter \"Encounter, Performed\" ):\n  "]},{"r":"900","s":[{"r":"900","s":[{"s":[{"r":"706","s":[{"r":"707","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"708","s":[{"value":["ObsVisit",": "]},{"r":"757","s":[{"value":["Last","("]},{"r":"752","s":[{"s":[{"r":"709","s":[{"r":"712","s":[{"r":"712","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Observation Services\""]}]},{"value":["]"]}]}]},{"value":[" ","LastObs"]}]}]},{"value":["\n  \t\t\t"]},{"r":"742","s":[{"value":["where "]},{"r":"742","s":[{"r":"721","s":[{"r":"720","s":[{"value":["LastObs"]}]},{"value":["."]},{"r":"721","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"742","s":[{"value":["ends "]},{"r":"734","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"726","s":[{"value":["start of "]},{"r":"728","s":[{"r":"727","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"728","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"748","s":[{"value":["sort by \n  \t\t\t"]},{"r":"747","s":[{"r":"743","s":[{"value":["end of "]},{"r":"744","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]},{"value":[",\n  \t"]},{"r":"758","s":[{"value":["VisitStart",": "]},{"r":"775","s":[{"value":["Coalesce","("]},{"r":"759","s":[{"value":["start of "]},{"r":"761","s":[{"r":"760","s":[{"value":["ObsVisit"]}]},{"value":["."]},{"r":"761","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"766","s":[{"value":["start of "]},{"r":"768","s":[{"r":"767","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"768","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]}]},{"value":[",\n  \t"]},{"r":"776","s":[{"value":["EDVisit",": "]},{"r":"819","s":[{"value":["Last","("]},{"r":"814","s":[{"s":[{"r":"777","s":[{"r":"780","s":[{"r":"780","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"804","s":[{"value":["where "]},{"r":"804","s":[{"r":"789","s":[{"r":"788","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"789","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"804","s":[{"value":["ends "]},{"r":"796","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"794","s":[{"value":["VisitStart"]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"810","s":[{"value":["sort by \n  \t\t\t"]},{"r":"809","s":[{"r":"805","s":[{"value":["end of "]},{"r":"806","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]},{"value":[",\n  \t"]},{"r":"820","s":[{"value":["VisitStartWithED",": "]},{"r":"831","s":[{"value":["Coalesce","("]},{"r":"821","s":[{"value":["start of "]},{"r":"823","s":[{"r":"822","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"823","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"828","s":[{"value":["VisitStart"]}]},{"value":[")"]}]}]},{"value":[",\n  \t"]},{"r":"832","s":[{"value":["OutpatientSurgeryVisit",": "]},{"r":"875","s":[{"value":["Last","("]},{"r":"870","s":[{"s":[{"r":"833","s":[{"r":"836","s":[{"r":"836","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Outpatient Surgery Service\""]}]},{"value":["]"]}]}]},{"value":[" ","LastSurgeryOP"]}]}]},{"value":["\n  \t\t\t"]},{"r":"860","s":[{"value":["where "]},{"r":"860","s":[{"r":"845","s":[{"r":"844","s":[{"value":["LastSurgeryOP"]}]},{"value":["."]},{"r":"845","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"860","s":[{"value":["ends "]},{"r":"852","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"850","s":[{"value":["VisitStartWithED"]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"866","s":[{"value":["sort by \n  \t\t\t"]},{"r":"865","s":[{"r":"861","s":[{"value":["end of "]},{"r":"862","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"876","s":[{"value":["return "]},{"r":"895","s":[{"value":["Interval["]},{"r":"887","s":[{"value":["Coalesce","("]},{"r":"877","s":[{"value":["start of "]},{"r":"879","s":[{"r":"878","s":[{"value":["OutpatientSurgeryVisit"]}]},{"value":["."]},{"r":"879","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"884","s":[{"value":["VisitStartWithED"]}]},{"value":[")"]}]},{"value":[", \n  \t"]},{"r":"888","s":[{"value":["end of "]},{"r":"890","s":[{"r":"889","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"890","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["]"]}]}]}]}]}]}}],"resultTypeSpecifier":{"localId":"905","type":"IntervalTypeSpecifier","pointType":{"localId":"906","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"expression":{"localId":"900","locator":"91:3-110:31","type":"Query","resultTypeSpecifier":{"localId":"903","type":"IntervalTypeSpecifier","pointType":{"localId":"904","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"source":[{"localId":"706","locator":"91:3-91:17","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","alias":"Visit","expression":{"localId":"707","locator":"91:3-91:11","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"708","locator":"92:8-96:4","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","identifier":"ObsVisit","expression":{"localId":"757","locator":"92:18-96:4","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"Last","signature":[],"source":{"localId":"752","locator":"92:23-95:26","type":"Query","resultTypeSpecifier":{"localId":"753","type":"ListTypeSpecifier","elementType":{"localId":"754","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"source":[{"localId":"709","locator":"92:23-92:78","alias":"LastObs","resultTypeSpecifier":{"localId":"718","type":"ListTypeSpecifier","elementType":{"localId":"719","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"712","locator":"92:23-92:70","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","resultTypeSpecifier":{"localId":"716","type":"ListTypeSpecifier","elementType":{"localId":"717","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"codes":{"localId":"711","locator":"92:48-92:69","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Observation Services","preserve":true,"type":"ValueSetRef"},"include":[],"codeFilter":[],"dateFilter":[],"otherFilter":[]}}],"let":[],"relationship":[],"where":{"localId":"742","locator":"93:6-93:96","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"And","signature":[],"operand":[{"localId":"739","locator":"93:40-93:53","type":"In","signature":[],"operand":[{"localId":"733","locator":"93:35-93:38","type":"End","signature":[],"operand":{"localId":"721","locator":"93:12-93:33","path":"relevantPeriod","scope":"LastObs","type":"Property","resultTypeSpecifier":{"localId":"724","type":"IntervalTypeSpecifier","pointType":{"localId":"725","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}},{"localId":"736","locator":"93:40-93:53","lowClosed":true,"highClosed":true,"type":"Interval","resultTypeSpecifier":{"localId":"737","type":"IntervalTypeSpecifier","pointType":{"localId":"738","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"low":{"localId":"735","locator":"93:68-93:96","type":"Subtract","signature":[],"operand":[{"localId":"726","locator":"93:68-93:96","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"728","locator":"93:77-93:96","path":"relevantPeriod","scope":"Visit","type":"Property","resultTypeSpecifier":{"localId":"731","type":"IntervalTypeSpecifier","pointType":{"localId":"732","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}},{"localId":"734","locator":"93:40-93:45","resultTypeName":"{urn:hl7-org:elm-types:r1}Quantity","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"726","locator":"93:68-93:96","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"728","locator":"93:77-93:96","path":"relevantPeriod","scope":"Visit","type":"Property","resultTypeSpecifier":{"localId":"731","type":"IntervalTypeSpecifier","pointType":{"localId":"732","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}}]},{"localId":"741","locator":"93:40-93:53","type":"Not","signature":[],"operand":{"localId":"740","locator":"93:40-93:53","type":"IsNull","signature":[],"operand":{"localId":"726","locator":"93:68-93:96","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"728","locator":"93:77-93:96","path":"relevantPeriod","scope":"Visit","type":"Property","resultTypeSpecifier":{"localId":"731","type":"IntervalTypeSpecifier","pointType":{"localId":"732","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}}}]},"sort":{"localId":"748","locator":"94:6-95:26","by":[{"localId":"747","locator":"95:6-95:26","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","direction":"asc","type":"ByExpression","expression":{"localId":"743","locator":"95:6-95:26","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"End","signature":[],"operand":{"localId":"744","locator":"95:13-95:26","name":"relevantPeriod","type":"IdentifierRef","resultTypeSpecifier":{"localId":"745","type":"IntervalTypeSpecifier","pointType":{"localId":"746","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}}]}}}},{"localId":"758","locator":"97:4-97:88","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","identifier":"VisitStart","expression":{"localId":"775","locator":"97:16-97:88","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Coalesce","signature":[],"operand":[{"localId":"759","locator":"97:25-97:56","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"761","locator":"97:34-97:56","path":"relevantPeriod","type":"Property","resultTypeSpecifier":{"localId":"764","type":"IntervalTypeSpecifier","pointType":{"localId":"765","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"source":{"localId":"760","locator":"97:34-97:41","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"ObsVisit","type":"QueryLetRef"}}},{"localId":"766","locator":"97:59-97:87","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"768","locator":"97:68-97:87","path":"relevantPeriod","scope":"Visit","type":"Property","resultTypeSpecifier":{"localId":"771","type":"IntervalTypeSpecifier","pointType":{"localId":"772","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}]}},{"localId":"776","locator":"98:4-102:4","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","identifier":"EDVisit","expression":{"localId":"819","locator":"98:13-102:4","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"Last","signature":[],"source":{"localId":"814","locator":"98:18-101:26","type":"Query","resultTypeSpecifier":{"localId":"815","type":"ListTypeSpecifier","elementType":{"localId":"816","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"source":[{"localId":"777","locator":"98:18-98:78","alias":"LastED","resultTypeSpecifier":{"localId":"786","type":"ListTypeSpecifier","elementType":{"localId":"787","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"780","locator":"98:18-98:71","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","resultTypeSpecifier":{"localId":"784","type":"ListTypeSpecifier","elementType":{"localId":"785","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"codes":{"localId":"779","locator":"98:43-98:70","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Emergency Department Visit","preserve":true,"type":"ValueSetRef"},"include":[],"codeFilter":[],"dateFilter":[],"otherFilter":[]}}],"let":[],"relationship":[],"where":{"localId":"804","locator":"99:6-99:76","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"And","signature":[],"operand":[{"localId":"801","locator":"99:39-99:52","type":"In","signature":[],"operand":[{"localId":"795","locator":"99:34-99:37","type":"End","signature":[],"operand":{"localId":"789","locator":"99:12-99:32","path":"relevantPeriod","scope":"LastED","type":"Property","resultTypeSpecifier":{"localId":"792","type":"IntervalTypeSpecifier","pointType":{"localId":"793","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}},{"localId":"798","locator":"99:39-99:52","lowClosed":true,"highClosed":true,"type":"Interval","resultTypeSpecifier":{"localId":"799","type":"IntervalTypeSpecifier","pointType":{"localId":"800","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"low":{"localId":"797","locator":"99:67-99:76","type":"Subtract","signature":[],"operand":[{"localId":"794","locator":"99:67-99:76","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"VisitStart","type":"QueryLetRef"},{"localId":"796","locator":"99:39-99:44","resultTypeName":"{urn:hl7-org:elm-types:r1}Quantity","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"794","locator":"99:67-99:76","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"VisitStart","type":"QueryLetRef"}}]},{"localId":"803","locator":"99:39-99:52","type":"Not","signature":[],"operand":{"localId":"802","locator":"99:39-99:52","type":"IsNull","signature":[],"operand":{"localId":"794","locator":"99:67-99:76","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"VisitStart","type":"QueryLetRef"}}}]},"sort":{"localId":"810","locator":"100:6-101:26","by":[{"localId":"809","locator":"101:6-101:26","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","direction":"asc","type":"ByExpression","expression":{"localId":"805","locator":"101:6-101:26","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"End","signature":[],"operand":{"localId":"806","locator":"101:13-101:26","name":"relevantPeriod","type":"IdentifierRef","resultTypeSpecifier":{"localId":"807","type":"IntervalTypeSpecifier","pointType":{"localId":"808","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}}]}}}},{"localId":"820","locator":"103:4-103:74","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","identifier":"VisitStartWithED","expression":{"localId":"831","locator":"103:22-103:74","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Coalesce","signature":[],"operand":[{"localId":"821","locator":"103:31-103:61","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"823","locator":"103:40-103:61","path":"relevantPeriod","type":"Property","resultTypeSpecifier":{"localId":"826","type":"IntervalTypeSpecifier","pointType":{"localId":"827","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"source":{"localId":"822","locator":"103:40-103:46","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"EDVisit","type":"QueryLetRef"}}},{"localId":"828","locator":"103:64-103:73","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"VisitStart","type":"QueryLetRef"}]}},{"localId":"832","locator":"104:4-108:4","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","identifier":"OutpatientSurgeryVisit","expression":{"localId":"875","locator":"104:28-108:4","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"Last","signature":[],"source":{"localId":"870","locator":"104:33-107:26","type":"Query","resultTypeSpecifier":{"localId":"871","type":"ListTypeSpecifier","elementType":{"localId":"872","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"source":[{"localId":"833","locator":"104:33-104:100","alias":"LastSurgeryOP","resultTypeSpecifier":{"localId":"842","type":"ListTypeSpecifier","elementType":{"localId":"843","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"836","locator":"104:33-104:86","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","resultTypeSpecifier":{"localId":"840","type":"ListTypeSpecifier","elementType":{"localId":"841","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"codes":{"localId":"835","locator":"104:58-104:85","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Outpatient Surgery Service","preserve":true,"type":"ValueSetRef"},"include":[],"codeFilter":[],"dateFilter":[],"otherFilter":[]}}],"let":[],"relationship":[],"where":{"localId":"860","locator":"105:6-105:89","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"And","signature":[],"operand":[{"localId":"857","locator":"105:46-105:59","type":"In","signature":[],"operand":[{"localId":"851","locator":"105:41-105:44","type":"End","signature":[],"operand":{"localId":"845","locator":"105:12-105:39","path":"relevantPeriod","scope":"LastSurgeryOP","type":"Property","resultTypeSpecifier":{"localId":"848","type":"IntervalTypeSpecifier","pointType":{"localId":"849","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}},{"localId":"854","locator":"105:46-105:59","lowClosed":true,"highClosed":true,"type":"Interval","resultTypeSpecifier":{"localId":"855","type":"IntervalTypeSpecifier","pointType":{"localId":"856","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"low":{"localId":"853","locator":"105:74-105:89","type":"Subtract","signature":[],"operand":[{"localId":"850","locator":"105:74-105:89","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"VisitStartWithED","type":"QueryLetRef"},{"localId":"852","locator":"105:46-105:51","resultTypeName":"{urn:hl7-org:elm-types:r1}Quantity","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"850","locator":"105:74-105:89","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"VisitStartWithED","type":"QueryLetRef"}}]},{"localId":"859","locator":"105:46-105:59","type":"Not","signature":[],"operand":{"localId":"858","locator":"105:46-105:59","type":"IsNull","signature":[],"operand":{"localId":"850","locator":"105:74-105:89","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"VisitStartWithED","type":"QueryLetRef"}}}]},"sort":{"localId":"866","locator":"106:6-107:26","by":[{"localId":"865","locator":"107:6-107:26","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","direction":"asc","type":"ByExpression","expression":{"localId":"861","locator":"107:6-107:26","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"End","signature":[],"operand":{"localId":"862","locator":"107:13-107:26","name":"relevantPeriod","type":"IdentifierRef","resultTypeSpecifier":{"localId":"863","type":"IntervalTypeSpecifier","pointType":{"localId":"864","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}}]}}}}],"relationship":[],"return":{"localId":"876","locator":"109:4-110:31","resultTypeSpecifier":{"localId":"898","type":"IntervalTypeSpecifier","pointType":{"localId":"899","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"expression":{"localId":"895","locator":"109:11-110:31","lowClosed":true,"highClosed":true,"type":"Interval","resultTypeSpecifier":{"localId":"896","type":"IntervalTypeSpecifier","pointType":{"localId":"897","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"low":{"localId":"887","locator":"109:20-109:93","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Coalesce","signature":[],"operand":[{"localId":"877","locator":"109:29-109:74","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"879","locator":"109:38-109:74","path":"relevantPeriod","type":"Property","resultTypeSpecifier":{"localId":"882","type":"IntervalTypeSpecifier","pointType":{"localId":"883","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"source":{"localId":"878","locator":"109:38-109:59","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"OutpatientSurgeryVisit","type":"QueryLetRef"}}},{"localId":"884","locator":"109:77-109:92","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"VisitStartWithED","type":"QueryLetRef"}]},"high":{"localId":"888","locator":"110:4-110:30","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"End","signature":[],"operand":{"localId":"890","locator":"110:11-110:30","path":"relevantPeriod","scope":"Visit","type":"Property","resultTypeSpecifier":{"localId":"893","type":"IntervalTypeSpecifier","pointType":{"localId":"894","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}}}},"operand":[{"localId":"705","name":"Encounter","operandTypeSpecifier":{"localId":"704","locator":"90:87-90:108","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"1055","locator":"130:1-131:61","resultTypeName":"{urn:hl7-org:elm-types:r1}Integer","name":"HospitalizationWithObservationLengthofStay","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"1055","s":[{"value":["/*Hospitalization with Observation Length of Stay returns the length in days from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\n","define function \"HospitalizationWithObservationLengthofStay\"(Encounter \"Encounter, Performed\" ):\n  "]},{"r":"1062","s":[{"r":"1062","s":[{"value":["\"LengthInDays\"","("]},{"r":"1059","s":[{"value":["\"HospitalizationWithObservation\"","("]},{"r":"1058","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"1062","locator":"131:3-131:61","resultTypeName":"{urn:hl7-org:elm-types:r1}Integer","name":"LengthInDays","type":"FunctionRef","signature":[],"operand":[{"localId":"1059","locator":"131:18-131:60","name":"HospitalizationWithObservation","type":"FunctionRef","resultTypeSpecifier":{"localId":"1060","type":"IntervalTypeSpecifier","pointType":{"localId":"1061","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"signature":[],"operand":[{"localId":"1058","locator":"131:51-131:59","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"Encounter","type":"OperandRef"}]}]},"operand":[{"localId":"1057","name":"Encounter","operandTypeSpecifier":{"localId":"1056","locator":"130:72-130:93","resultTypeName":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"234","locator":"20:1-22:83","name":"Inpatient Encounter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"234","s":[{"value":["","define ","\"Inpatient Encounter\"",":\n  "]},{"r":"257","s":[{"s":[{"r":"235","s":[{"r":"238","s":[{"r":"238","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Encounter Inpatient\""]}]},{"value":["]"]}]}]},{"value":[" ","EncounterInpatient"]}]}]},{"value":["\n    "]},{"r":"256","s":[{"value":["where "]},{"r":"256","s":[{"r":"247","s":[{"r":"246","s":[{"value":["EncounterInpatient"]}]},{"value":["."]},{"r":"247","s":[{"value":["relevantPeriod"]}]}]},{"r":"256","value":[" ","ends during day of"," "]},{"r":"252","s":[{"value":["\"Measurement Period\""]}]}]}]}]}]}}],"resultTypeSpecifier":{"localId":"260","type":"ListTypeSpecifier","elementType":{"localId":"261","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"257","locator":"21:3-22:83","type":"Query","resultTypeSpecifier":{"localId":"258","type":"ListTypeSpecifier","elementType":{"localId":"259","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"source":[{"localId":"235","locator":"21:3-21:68","alias":"EncounterInpatient","resultTypeSpecifier":{"localId":"244","type":"ListTypeSpecifier","elementType":{"localId":"245","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"expression":{"localId":"238","locator":"21:3-21:49","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","resultTypeSpecifier":{"localId":"242","type":"ListTypeSpecifier","elementType":{"localId":"243","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}},"codes":{"localId":"237","locator":"21:28-21:48","resultTypeName":"{urn:hl7-org:elm-types:r1}ValueSet","name":"Encounter Inpatient","preserve":true,"type":"ValueSetRef"},"include":[],"codeFilter":[],"dateFilter":[],"otherFilter":[]}}],"let":[],"relationship":[],"where":{"localId":"256","locator":"22:5-22:83","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","precision":"Day","type":"In","signature":[],"operand":[{"localId":"255","locator":"22:45-22:48","type":"End","signature":[],"operand":{"localId":"247","locator":"22:11-22:43","path":"relevantPeriod","scope":"EncounterInpatient","type":"Property","resultTypeSpecifier":{"localId":"250","type":"IntervalTypeSpecifier","pointType":{"localId":"251","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}},{"localId":"252","locator":"22:64-22:83","name":"Measurement Period","type":"ParameterRef","resultTypeSpecifier":{"localId":"253","type":"IntervalTypeSpecifier","pointType":{"localId":"254","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]}}},{"localId":"1193","locator":"162:1-165:24","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"Latest","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"1193","s":[{"value":["/*Given an interval, return the ending point if the interval has an ending boundary specified, otherwise, return the starting point*/\n","define function \"Latest\"(period Interval\u003cDateTime\u003e ):\n  "]},{"r":"1199","s":[{"r":"1199","s":[{"value":["if "]},{"r":"1203","s":[{"value":["( "]},{"r":"1203","s":[{"value":["HasEnd","("]},{"r":"1200","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":[" then \n  "]},{"r":"1204","s":[{"value":["end of "]},{"r":"1205","s":[{"value":["period"]}]}]},{"value":[" \n    else "]},{"r":"1208","s":[{"value":["start of "]},{"r":"1209","s":[{"value":["period"]}]}]}]}]}]}}],"expression":{"localId":"1199","locator":"163:3-165:24","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"If","condition":{"localId":"1203","locator":"163:6-163:22","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","name":"HasEnd","type":"FunctionRef","signature":[],"operand":[{"localId":"1200","locator":"163:15-163:20","name":"period","type":"OperandRef","resultTypeSpecifier":{"localId":"1201","type":"IntervalTypeSpecifier","pointType":{"localId":"1202","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},"then":{"localId":"1204","locator":"164:3-164:15","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"End","signature":[],"operand":{"localId":"1205","locator":"164:10-164:15","name":"period","type":"OperandRef","resultTypeSpecifier":{"localId":"1206","type":"IntervalTypeSpecifier","pointType":{"localId":"1207","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}},"else":{"localId":"1208","locator":"165:10-165:24","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"1209","locator":"165:19-165:24","name":"period","type":"OperandRef","resultTypeSpecifier":{"localId":"1210","type":"IntervalTypeSpecifier","pointType":{"localId":"1211","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}},"operand":[{"localId":"1198","name":"period","operandTypeSpecifier":{"localId":"1194","locator":"162:33-162:50","type":"IntervalTypeSpecifier","resultTypeSpecifier":{"localId":"1196","type":"IntervalTypeSpecifier","pointType":{"localId":"1197","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"pointType":{"localId":"1195","locator":"162:42-162:49","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"1231","locator":"174:1-175:48","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"LatestOf","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"1231","s":[{"value":["/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the ending point of the period if the period has an ending boundary specified, otherwise returns the starting point of the interval*/\n","define function \"LatestOf\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  "]},{"r":"1246","s":[{"r":"1246","s":[{"value":["Latest","("]},{"r":"1243","s":[{"value":["NormalizeInterval","("]},{"r":"1239","s":[{"value":["pointInTime"]}]},{"value":[", "]},{"r":"1240","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"1246","locator":"175:3-175:48","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"Latest","type":"FunctionRef","signature":[],"operand":[{"localId":"1243","locator":"175:10-175:47","name":"NormalizeInterval","type":"FunctionRef","resultTypeSpecifier":{"localId":"1244","type":"IntervalTypeSpecifier","pointType":{"localId":"1245","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"signature":[],"operand":[{"localId":"1239","locator":"175:28-175:38","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"pointInTime","type":"OperandRef"},{"localId":"1240","locator":"175:41-175:46","name":"period","type":"OperandRef","resultTypeSpecifier":{"localId":"1241","type":"IntervalTypeSpecifier","pointType":{"localId":"1242","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]}]},"operand":[{"localId":"1233","name":"pointInTime","operandTypeSpecifier":{"localId":"1232","locator":"174:40-174:47","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"localId":"1238","name":"period","operandTypeSpecifier":{"localId":"1234","locator":"174:57-174:74","type":"IntervalTypeSpecifier","resultTypeSpecifier":{"localId":"1236","type":"IntervalTypeSpecifier","pointType":{"localId":"1237","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"pointType":{"localId":"1235","locator":"174:66-174:73","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"285","locator":"33:1-34:60","resultTypeName":"{urn:hl7-org:elm-types:r1}Integer","name":"LengthInDays","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"285","s":[{"value":["/*calculates the difference in calendar days between the start and end of the given interval.*/\n","define function \"LengthInDays\"(Value Interval\u003cDateTime\u003e ):\n  "]},{"r":"291","s":[{"r":"291","s":[{"value":["difference in days between "]},{"r":"292","s":[{"value":["start of "]},{"r":"293","s":[{"value":["Value"]}]}]},{"value":[" and "]},{"r":"296","s":[{"value":["end of "]},{"r":"297","s":[{"value":["Value"]}]}]}]}]}]}}],"expression":{"localId":"291","locator":"34:3-34:60","resultTypeName":"{urn:hl7-org:elm-types:r1}Integer","precision":"Day","type":"DifferenceBetween","signature":[],"operand":[{"localId":"292","locator":"34:30-34:43","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"293","locator":"34:39-34:43","name":"Value","type":"OperandRef","resultTypeSpecifier":{"localId":"294","type":"IntervalTypeSpecifier","pointType":{"localId":"295","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}},{"localId":"296","locator":"34:49-34:60","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"End","signature":[],"operand":{"localId":"297","locator":"34:56-34:60","name":"Value","type":"OperandRef","resultTypeSpecifier":{"localId":"298","type":"IntervalTypeSpecifier","pointType":{"localId":"299","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}]},"operand":[{"localId":"290","name":"Value","operandTypeSpecifier":{"localId":"286","locator":"33:38-33:55","type":"IntervalTypeSpecifier","resultTypeSpecifier":{"localId":"288","type":"IntervalTypeSpecifier","pointType":{"localId":"289","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"pointType":{"localId":"287","locator":"33:47-33:54","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"1111","locator":"142:1-145:35","name":"NormalizeInterval","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"1111","s":[{"value":["/*Given a datetime and a period, returns the period (if a period is provided) or the interval beginning and ending on the datetime (if a datetime is provided)*/\n","define function \"NormalizeInterval\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  "]},{"r":"1119","s":[{"r":"1119","s":[{"value":["if "]},{"r":"1122","s":[{"r":"1120","s":[{"value":["pointInTime"]}]},{"value":[" is not null"]}]},{"value":[" then "]},{"r":"1125","s":[{"value":["Interval["]},{"r":"1123","s":[{"value":["pointInTime"]}]},{"value":[", "]},{"r":"1124","s":[{"value":["pointInTime"]}]},{"value":["]"]}]},{"value":["\n    else "]},{"r":"1128","s":[{"value":["if "]},{"r":"1133","s":[{"r":"1129","s":[{"value":["period"]}]},{"value":[" is not null"]}]},{"value":[" then "]},{"r":"1134","s":[{"value":["period"]}]},{"value":[" \n    else "]},{"r":"1137","s":[{"r":"1138","value":["null"," as "]},{"r":"1139","s":[{"value":["Interval\u003c"]},{"r":"1140","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}]}]}]}]}}],"resultTypeSpecifier":{"localId":"1151","type":"IntervalTypeSpecifier","pointType":{"localId":"1152","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"expression":{"localId":"1119","locator":"143:3-145:35","type":"If","resultTypeSpecifier":{"localId":"1149","type":"IntervalTypeSpecifier","pointType":{"localId":"1150","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"condition":{"localId":"1122","locator":"143:6-143:28","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"Not","signature":[],"operand":{"localId":"1121","locator":"143:6-143:28","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"IsNull","signature":[],"operand":{"localId":"1120","locator":"143:6-143:16","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"pointInTime","type":"OperandRef"}}},"then":{"localId":"1125","locator":"143:35-143:68","lowClosed":true,"highClosed":true,"type":"Interval","resultTypeSpecifier":{"localId":"1126","type":"IntervalTypeSpecifier","pointType":{"localId":"1127","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"low":{"localId":"1123","locator":"143:44-143:54","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"pointInTime","type":"OperandRef"},"high":{"localId":"1124","locator":"143:57-143:67","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"pointInTime","type":"OperandRef"}},"else":{"localId":"1128","locator":"144:10-145:35","type":"If","resultTypeSpecifier":{"localId":"1145","type":"IntervalTypeSpecifier","pointType":{"localId":"1146","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"condition":{"localId":"1133","locator":"144:13-144:30","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"Not","signature":[],"operand":{"localId":"1132","locator":"144:13-144:30","resultTypeName":"{urn:hl7-org:elm-types:r1}Boolean","type":"IsNull","signature":[],"operand":{"localId":"1129","locator":"144:13-144:18","name":"period","type":"OperandRef","resultTypeSpecifier":{"localId":"1130","type":"IntervalTypeSpecifier","pointType":{"localId":"1131","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}},"then":{"localId":"1134","locator":"144:37-144:42","name":"period","type":"OperandRef","resultTypeSpecifier":{"localId":"1135","type":"IntervalTypeSpecifier","pointType":{"localId":"1136","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}},"else":{"localId":"1137","locator":"145:10-145:35","strict":false,"type":"As","resultTypeSpecifier":{"localId":"1143","type":"IntervalTypeSpecifier","pointType":{"localId":"1144","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"signature":[],"operand":{"localId":"1138","locator":"145:10-145:13","resultTypeName":"{urn:hl7-org:elm-types:r1}Any","type":"Null"},"asTypeSpecifier":{"localId":"1139","locator":"145:18-145:35","type":"IntervalTypeSpecifier","resultTypeSpecifier":{"localId":"1141","type":"IntervalTypeSpecifier","pointType":{"localId":"1142","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"pointType":{"localId":"1140","locator":"145:27-145:34","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}},"operand":[{"localId":"1113","name":"pointInTime","operandTypeSpecifier":{"localId":"1112","locator":"142:49-142:56","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"localId":"1118","name":"period","operandTypeSpecifier":{"localId":"1114","locator":"142:66-142:83","type":"IntervalTypeSpecifier","resultTypeSpecifier":{"localId":"1116","type":"IntervalTypeSpecifier","pointType":{"localId":"1117","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"pointType":{"localId":"1115","locator":"142:75-142:82","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"220","locator":"15:1-15:15","name":"Patient","context":"Patient","expression":{"localId":"221","type":"SingletonFrom","signature":[],"operand":{"localId":"219","locator":"15:1-15:15","dataType":"{urn:healthit-gov:qdm:v5_6}Patient","templateId":"Patient","type":"Retrieve","include":[],"codeFilter":[],"dateFilter":[],"otherFilter":[]}}},{"localId":"262","locator":"29:1-30:62","name":"ToDateInterval","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","t":[{"name":"description","value":"Returns an interval of date values extracted from the input interval of date-time values"},{"name":"comment","value":"This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability."}],"s":{"r":"262","s":[{"value":["/*@description: Returns an interval of date values extracted from the input interval of date-time values\n@comment: This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability.*/\n","define function \"ToDateInterval\"(period Interval\u003cDateTime\u003e ):\n  "]},{"r":"278","s":[{"r":"278","s":[{"value":["Interval["]},{"r":"268","s":[{"value":["date from "]},{"r":"269","s":[{"value":["start of "]},{"r":"270","s":[{"value":["period"]}]}]}]},{"value":[", "]},{"r":"273","s":[{"value":["date from "]},{"r":"274","s":[{"value":["end of "]},{"r":"275","s":[{"value":["period"]}]}]}]},{"value":["]"]}]}]}]}}],"resultTypeSpecifier":{"localId":"283","type":"IntervalTypeSpecifier","pointType":{"localId":"284","name":"{urn:hl7-org:elm-types:r1}Date","type":"NamedTypeSpecifier"}},"expression":{"localId":"278","locator":"30:3-30:62","lowClosed":true,"highClosed":true,"type":"Interval","resultTypeSpecifier":{"localId":"281","type":"IntervalTypeSpecifier","pointType":{"localId":"282","name":"{urn:hl7-org:elm-types:r1}Date","type":"NamedTypeSpecifier"}},"low":{"localId":"268","locator":"30:12-30:36","resultTypeName":"{urn:hl7-org:elm-types:r1}Date","type":"DateFrom","signature":[],"operand":{"localId":"269","locator":"30:22-30:36","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"Start","signature":[],"operand":{"localId":"270","locator":"30:31-30:36","name":"period","type":"OperandRef","resultTypeSpecifier":{"localId":"271","type":"IntervalTypeSpecifier","pointType":{"localId":"272","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}},"high":{"localId":"273","locator":"30:39-30:61","resultTypeName":"{urn:hl7-org:elm-types:r1}Date","type":"DateFrom","signature":[],"operand":{"localId":"274","locator":"30:49-30:61","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","type":"End","signature":[],"operand":{"localId":"275","locator":"30:56-30:61","name":"period","type":"OperandRef","resultTypeSpecifier":{"localId":"276","type":"IntervalTypeSpecifier","pointType":{"localId":"277","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}}},"operand":[{"localId":"267","name":"period","operandTypeSpecifier":{"localId":"263","locator":"29:41-29:58","type":"IntervalTypeSpecifier","resultTypeSpecifier":{"localId":"265","type":"IntervalTypeSpecifier","pointType":{"localId":"266","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},"pointType":{"localId":"264","locator":"29:50-29:57","resultTypeName":"{urn:hl7-org:elm-types:r1}DateTime","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]}]}}},"elm_annotations":{"statements":[{"children":[{"children":[{"children":[{"text":"define \"ED Encounter\":\n  "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"227"}],"ref_id":"224"}],"define_name":"ED Encounter"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return the starting point if the interval has a starting boundary specified, otherwise, return the ending point*/\ndefine function \"Earliest\"(period Interval\u003cDateTime\u003e ):\n  "}]},{"children":[{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"HasStart("}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"1219"},{"children":[{"text":")"}]}],"ref_id":"1222"},{"children":[{"text":")"}]}],"ref_id":"1222"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"1224"}],"ref_id":"1223"},{"children":[{"text":" \n    else \n  "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"1228"}],"ref_id":"1227"}],"node_type":"If","ref_id":"1218"}],"node_type":"If","ref_id":"1218"}],"ref_id":"1212"}],"define_name":"Earliest"},{"children":[{"children":[{"children":[{"text":"/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the starting point of the period if the period has a starting boundary specified, otherwise returns the ending point of the period*/\ndefine function \"EarliestOf\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Earliest("}]},{"children":[{"children":[{"text":"NormalizeInterval("}]},{"children":[{"children":[{"text":"pointInTime"}]}],"node_type":"OperandRef","ref_id":"1255"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"1256"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"1259"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"1262"}],"node_type":"FunctionRef","ref_id":"1262"}],"ref_id":"1247"}],"define_name":"EarliestOf"},{"children":[{"children":[{"children":[{"text":"/*Returns the arrival time in the ED for the encounter.*/\ndefine function \"EmergencyDepartmentArrivalTime\"(Encounter \"Encounter, Performed\" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"\"HospitalizationLocations\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"400"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"401"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"401"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"399"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"HospitalLocation"}]}],"ref_id":"408"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"409"}],"ref_id":"409"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}],"ref_id":"410"}],"ref_id":"411"}],"ref_id":"411"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"413"}],"node_type":"Start","ref_id":"412"}],"ref_id":"416"}],"ref_id":"417"}],"ref_id":"421"},{"children":[{"text":"\n  )"}]}],"ref_id":"426"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"427"}],"node_type":"Property","ref_id":"427"}],"node_type":"Start","ref_id":"398"}],"node_type":"Start","ref_id":"398"}],"ref_id":"395"}],"define_name":"EmergencyDepartmentArrivalTime"},{"children":[{"children":[{"children":[{"text":"/*First Inpatient Intensive Care Unit returns the first intensive care unit for the given encounter, without considering any immediately prior emergency department visit.*/\ndefine function \"FirstInpatientIntensiveCareUnit\"(Encounter \"Encounter, Performed\" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"1067"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"node_type":"Property","ref_id":"1068"}],"node_type":"Property","ref_id":"1068"},{"children":[{"text":")"}]}],"node_type":"Property","ref_id":"1068"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"1066"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"HospitalLocation"}]}],"ref_id":"1078"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"1079"}],"ref_id":"1079"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Intensive Care Unit\""}]}],"ref_id":"1080"}],"node_type":"InValueSet","ref_id":"1081"},{"children":[{"text":"\n        and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"HospitalLocation"}]}],"ref_id":"1082"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"1083"}],"node_type":"Property","ref_id":"1083"},{"children":[{"text":" during "}],"node_type":"IncludedIn","ref_id":"1094"},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"1088"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"1089"}],"node_type":"Property","ref_id":"1089"}],"node_type":"IncludedIn","ref_id":"1094"}],"ref_id":"1077"}],"ref_id":"1077"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"1097"}],"node_type":"Start","ref_id":"1096"}],"ref_id":"1100"}],"ref_id":"1101"}],"ref_id":"1105"},{"children":[{"text":"\n  )"}]}],"node_type":"First","ref_id":"1110"}],"node_type":"First","ref_id":"1110"}],"ref_id":"1063"}],"define_name":"FirstInpatientIntensiveCareUnit"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return true if the interval has an ending boundary specified (i.e. the end of the interval is not null and not the maximum DateTime value)*/\ndefine function \"HasEnd\"(period Interval\u003cDateTime\u003e ):\n  "}]},{"children":[{"children":[{"children":[{"text":"not "}]},{"children":[{"children":[{"text":"( \n    "}]},{"children":[{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"1182"}],"node_type":"End","ref_id":"1181"},{"children":[{"text":" is null"}]}],"node_type":"IsNull","ref_id":"1185"},{"children":[{"text":"\n      or \n      "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"1188"}],"node_type":"End","ref_id":"1187"},{"children":[{"text":" = "}]},{"children":[{"children":[{"text":"maximum "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"1191"}],"node_type":"MaxValue","ref_id":"1192"}],"node_type":"Equal","ref_id":"1186"}],"node_type":"Or","ref_id":"1180"},{"children":[{"text":"\n  )"}]}],"node_type":"Or","ref_id":"1180"}],"node_type":"Not","ref_id":"1179"}],"node_type":"Not","ref_id":"1179"}],"ref_id":"1173"}],"define_name":"HasEnd"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return true if the interval has a starting boundary specified (i.e. the start of the interval is not null and not the minimum DateTime value)*/\ndefine function \"HasStart\"(period Interval\u003cDateTime\u003e ):\n  "}]},{"children":[{"children":[{"children":[{"text":"not "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"1162"}],"node_type":"Start","ref_id":"1161"},{"children":[{"text":" is null"}]}],"node_type":"IsNull","ref_id":"1165"},{"children":[{"text":"\n      or "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"1168"}],"node_type":"Start","ref_id":"1167"},{"children":[{"text":" = "}]},{"children":[{"children":[{"text":"minimum "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"1171"}],"node_type":"MinValue","ref_id":"1172"}],"node_type":"Equal","ref_id":"1166"}],"node_type":"Or","ref_id":"1160"},{"children":[{"text":"\n  )"}]}],"node_type":"Or","ref_id":"1160"}],"node_type":"Not","ref_id":"1159"}],"node_type":"Not","ref_id":"1159"}],"ref_id":"1153"}],"define_name":"HasStart"},{"children":[{"children":[{"children":[{"text":"/*Returns admission time for an encounter or for immediately prior emergency department visit.*/\ndefine function \"HospitalAdmissionTime\"(Encounter \"Encounter, Performed\" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"\"Hospitalization\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"436"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"440"}],"node_type":"Start","ref_id":"435"}],"node_type":"Start","ref_id":"435"}],"ref_id":"432"}],"define_name":"HospitalAdmissionTime"},{"children":[{"children":[{"children":[{"text":"/*Returns earliest arrival time for an encounter including any prior ED visit.*/\ndefine function \"HospitalArrivalTime\"(Encounter \"Encounter, Performed\" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"\"HospitalizationLocations\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"535"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"536"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"536"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"534"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"544"}],"node_type":"Start","ref_id":"543"}],"ref_id":"547"}],"ref_id":"548"}],"ref_id":"552"},{"children":[{"text":"\n  )"}]}],"ref_id":"557"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"558"}],"node_type":"Property","ref_id":"558"}],"node_type":"Start","ref_id":"533"}],"node_type":"Start","ref_id":"533"}],"ref_id":"530"}],"define_name":"HospitalArrivalTime"},{"children":[{"children":[{"children":[{"text":"/*Returns the latest departure time for encounter including any prior ED visit.*/\ndefine function \"HospitalDepartureTime\"(Encounter \"Encounter, Performed\" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"\"HospitalizationLocations\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"665"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"666"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"666"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"664"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"674"}],"node_type":"Start","ref_id":"673"}],"ref_id":"677"}],"ref_id":"678"}],"ref_id":"682"},{"children":[{"text":"\n  )"}]}],"ref_id":"687"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"688"}],"node_type":"Property","ref_id":"688"}],"node_type":"End","ref_id":"663"}],"node_type":"End","ref_id":"663"}],"ref_id":"660"}],"define_name":"HospitalDepartureTime"},{"children":[{"children":[{"children":[{"text":"/*Hospital Discharge Time returns the discharge time for an encounter*/\ndefine function \"HospitalDischargeTime\"(Encounter \"Encounter, Performed\" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"697"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"698"}],"node_type":"Property","ref_id":"698"}],"node_type":"End","ref_id":"696"}],"node_type":"End","ref_id":"696"}],"ref_id":"693"}],"define_name":"HospitalDischargeTime"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization returns the total interval for admission to discharge for the given encounter, or for the admission of any immediately prior emergency department visit to the discharge of the given encounter.*/\ndefine function \"Hospitalization\"(Encounter \"Encounter, Performed\" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"564"},{"children":[{"text":" Visit"}]}],"ref_id":"563"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"569"}],"node_type":"Retrieve","ref_id":"569"},{"children":[{"text":" LastED"}]}],"ref_id":"566"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"577"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"578"}],"node_type":"Property","ref_id":"578"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"591"},{"children":[{"text":" or less on or before"}]}],"ref_id":"599"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"584"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"585"}],"node_type":"Property","ref_id":"585"}],"node_type":"Start","ref_id":"583"}],"ref_id":"599"}],"ref_id":"599"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"601"}],"node_type":"End","ref_id":"600"}],"ref_id":"604"}],"ref_id":"605"}],"ref_id":"609"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"614"}],"ref_id":"565"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"617"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"618"}],"node_type":"Property","ref_id":"618"}],"node_type":"Start","ref_id":"616"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"624"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"625"}],"node_type":"Property","ref_id":"625"}],"node_type":"Start","ref_id":"623"},{"children":[{"text":")"}]}],"ref_id":"632"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"634"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"635"}],"node_type":"Property","ref_id":"635"}],"ref_id":"633"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"640"}],"ref_id":"615"}],"node_type":"Query","ref_id":"645"}],"node_type":"Query","ref_id":"645"}],"ref_id":"437"}],"define_name":"Hospitalization"},{"children":[{"children":[{"children":[{"text":"/*Returns the length of stay in days (i.e. the number of days between admission and discharge) for the given encounter, or from the admission of any immediately prior emergency department visit to the discharge of the encounter*/\ndefine function \"HospitalizationLengthofStay\"(Encounter \"Encounter, Performed\" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"LengthInDays("}]},{"children":[{"children":[{"text":"\"Hospitalization\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"655"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"656"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"659"}],"node_type":"FunctionRef","ref_id":"659"}],"ref_id":"652"}],"define_name":"HospitalizationLengthofStay"},{"children":[{"children":[{"children":[{"text":"/*returns list of all locations within an encounter, including locations for immediately prior ED visit.*/\ndefine function \"HospitalizationLocations\"(Encounter \"Encounter, Performed\" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"304"},{"children":[{"text":" Visit"}]}],"ref_id":"303"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"309"}],"node_type":"Retrieve","ref_id":"309"},{"children":[{"text":" LastED"}]}],"ref_id":"306"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"317"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"318"}],"node_type":"Property","ref_id":"318"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"331"},{"children":[{"text":" or less on or before"}]}],"ref_id":"339"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"324"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"325"}],"node_type":"Property","ref_id":"325"}],"node_type":"Start","ref_id":"323"}],"ref_id":"339"}],"ref_id":"339"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"341"}],"node_type":"End","ref_id":"340"}],"ref_id":"344"}],"ref_id":"345"}],"ref_id":"349"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"354"}],"ref_id":"305"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"node_type":"QueryLetRef","ref_id":"357"},{"children":[{"text":" is null"}]}],"ref_id":"358"},{"children":[{"text":" then "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"359"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"ref_id":"360"}],"ref_id":"360"},{"children":[{"text":" \n      else "}]},{"children":[{"children":[{"text":"flatten "}]},{"children":[{"children":[{"text":"{ "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"367"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"ref_id":"368"}],"ref_id":"368"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"373"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"ref_id":"374"}],"ref_id":"374"},{"children":[{"text":" }"}]}],"node_type":"List","ref_id":"366"}],"ref_id":"365"}],"node_type":"If","ref_id":"356"}],"ref_id":"355"}],"node_type":"Query","ref_id":"388"}],"node_type":"Query","ref_id":"388"}],"ref_id":"300"}],"define_name":"HospitalizationLocations"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization with Observation returns the total interval from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\ndefine function \"HospitalizationWithObservation\"(Encounter \"Encounter, Performed\" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"911"},{"children":[{"text":" Visit"}]}],"ref_id":"910"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"ObsVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Observation Services\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"916"}],"node_type":"Retrieve","ref_id":"916"},{"children":[{"text":" LastObs"}]}],"ref_id":"913"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastObs"}]}],"ref_id":"924"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"925"}],"node_type":"Property","ref_id":"925"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"938"},{"children":[{"text":" or less on or before"}]}],"ref_id":"946"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"931"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"932"}],"node_type":"Property","ref_id":"932"}],"node_type":"Start","ref_id":"930"}],"ref_id":"946"}],"ref_id":"946"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"948"}],"node_type":"End","ref_id":"947"}],"ref_id":"951"}],"ref_id":"952"}],"ref_id":"956"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"961"}],"ref_id":"912"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"VisitStart: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"ObsVisit"}]}],"ref_id":"964"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"965"}],"node_type":"Property","ref_id":"965"}],"node_type":"Start","ref_id":"963"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"971"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"972"}],"node_type":"Property","ref_id":"972"}],"node_type":"Start","ref_id":"970"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"979"}],"ref_id":"962"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"984"}],"node_type":"Retrieve","ref_id":"984"},{"children":[{"text":" LastED"}]}],"ref_id":"981"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"992"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"993"}],"node_type":"Property","ref_id":"993"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"1000"},{"children":[{"text":" or less on or before"}]}],"ref_id":"1008"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"998"}],"ref_id":"1008"}],"ref_id":"1008"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"1010"}],"node_type":"End","ref_id":"1009"}],"ref_id":"1013"}],"ref_id":"1014"}],"ref_id":"1018"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"1023"}],"ref_id":"980"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"1026"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"1027"}],"node_type":"Property","ref_id":"1027"}],"node_type":"Start","ref_id":"1025"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"1032"},{"children":[{"text":")"}]}],"ref_id":"1035"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"1037"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"1038"}],"node_type":"Property","ref_id":"1038"}],"ref_id":"1036"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"1043"}],"ref_id":"1024"}],"node_type":"Query","ref_id":"1048"}],"node_type":"Query","ref_id":"1048"}],"ref_id":"907"}],"define_name":"HospitalizationWithObservation"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization with Observation and Outpatient Surgery Service returns the total interval from the start of any immediately prior emergency department visit, outpatient surgery visit or observation visit to the discharge of the given encounter.*/\ndefine function \"HospitalizationWithObservationAndOutpatientSurgeryService\"(Encounter \"Encounter, Performed\" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"707"},{"children":[{"text":" Visit"}]}],"ref_id":"706"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"ObsVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Observation Services\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"712"}],"node_type":"Retrieve","ref_id":"712"},{"children":[{"text":" LastObs"}]}],"ref_id":"709"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastObs"}]}],"ref_id":"720"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"721"}],"node_type":"Property","ref_id":"721"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"734"},{"children":[{"text":" or less on or before"}]}],"ref_id":"742"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"727"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"728"}],"node_type":"Property","ref_id":"728"}],"node_type":"Start","ref_id":"726"}],"ref_id":"742"}],"ref_id":"742"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"744"}],"node_type":"End","ref_id":"743"}],"ref_id":"747"}],"ref_id":"748"}],"ref_id":"752"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"757"}],"ref_id":"708"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"VisitStart: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"ObsVisit"}]}],"ref_id":"760"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"761"}],"node_type":"Property","ref_id":"761"}],"node_type":"Start","ref_id":"759"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"767"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"768"}],"node_type":"Property","ref_id":"768"}],"node_type":"Start","ref_id":"766"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"775"}],"ref_id":"758"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"780"}],"node_type":"Retrieve","ref_id":"780"},{"children":[{"text":" LastED"}]}],"ref_id":"777"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"788"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"789"}],"node_type":"Property","ref_id":"789"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"796"},{"children":[{"text":" or less on or before"}]}],"ref_id":"804"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"794"}],"ref_id":"804"}],"ref_id":"804"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"806"}],"node_type":"End","ref_id":"805"}],"ref_id":"809"}],"ref_id":"810"}],"ref_id":"814"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"819"}],"ref_id":"776"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"VisitStartWithED: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"822"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"823"}],"node_type":"Property","ref_id":"823"}],"node_type":"Start","ref_id":"821"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"828"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"831"}],"ref_id":"820"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"OutpatientSurgeryVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Outpatient Surgery Service\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"836"}],"node_type":"Retrieve","ref_id":"836"},{"children":[{"text":" LastSurgeryOP"}]}],"ref_id":"833"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastSurgeryOP"}]}],"ref_id":"844"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"845"}],"node_type":"Property","ref_id":"845"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"852"},{"children":[{"text":" or less on or before"}]}],"ref_id":"860"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"VisitStartWithED"}]}],"node_type":"QueryLetRef","ref_id":"850"}],"ref_id":"860"}],"ref_id":"860"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"862"}],"node_type":"End","ref_id":"861"}],"ref_id":"865"}],"ref_id":"866"}],"ref_id":"870"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"875"}],"ref_id":"832"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"OutpatientSurgeryVisit"}]}],"ref_id":"878"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"879"}],"node_type":"Property","ref_id":"879"}],"node_type":"Start","ref_id":"877"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"VisitStartWithED"}]}],"node_type":"QueryLetRef","ref_id":"884"},{"children":[{"text":")"}]}],"ref_id":"887"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"889"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"890"}],"node_type":"Property","ref_id":"890"}],"ref_id":"888"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"895"}],"ref_id":"876"}],"node_type":"Query","ref_id":"900"}],"node_type":"Query","ref_id":"900"}],"ref_id":"703"}],"define_name":"HospitalizationWithObservationAndOutpatientSurgeryService"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization with Observation Length of Stay returns the length in days from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\ndefine function \"HospitalizationWithObservationLengthofStay\"(Encounter \"Encounter, Performed\" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"\"LengthInDays\"("}]},{"children":[{"children":[{"text":"\"HospitalizationWithObservation\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"1058"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"1059"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"1062"}],"node_type":"FunctionRef","ref_id":"1062"}],"ref_id":"1055"}],"define_name":"HospitalizationWithObservationLengthofStay"},{"children":[{"children":[{"children":[{"text":"define \"Inpatient Encounter\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Encounter Inpatient\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"238"}],"node_type":"Retrieve","ref_id":"238"},{"children":[{"text":" EncounterInpatient"}]}],"ref_id":"235"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"EncounterInpatient"}]}],"ref_id":"246"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"247"}],"node_type":"Property","ref_id":"247"},{"children":[{"text":" ends during day of "}],"ref_id":"256"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"252"}],"ref_id":"256"}],"ref_id":"256"}],"node_type":"Query","ref_id":"257"}],"ref_id":"234"}],"define_name":"Inpatient Encounter"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return the ending point if the interval has an ending boundary specified, otherwise, return the starting point*/\ndefine function \"Latest\"(period Interval\u003cDateTime\u003e ):\n  "}]},{"children":[{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"HasEnd("}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"1200"},{"children":[{"text":")"}]}],"ref_id":"1203"},{"children":[{"text":")"}]}],"ref_id":"1203"},{"children":[{"text":" then \n  "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"1205"}],"ref_id":"1204"},{"children":[{"text":" \n    else "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"1209"}],"ref_id":"1208"}],"node_type":"If","ref_id":"1199"}],"node_type":"If","ref_id":"1199"}],"ref_id":"1193"}],"define_name":"Latest"},{"children":[{"children":[{"children":[{"text":"/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the ending point of the period if the period has an ending boundary specified, otherwise returns the starting point of the interval*/\ndefine function \"LatestOf\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Latest("}]},{"children":[{"children":[{"text":"NormalizeInterval("}]},{"children":[{"children":[{"text":"pointInTime"}]}],"node_type":"OperandRef","ref_id":"1239"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"1240"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"1243"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"1246"}],"node_type":"FunctionRef","ref_id":"1246"}],"ref_id":"1231"}],"define_name":"LatestOf"},{"children":[{"children":[{"children":[{"text":"/*calculates the difference in calendar days between the start and end of the given interval.*/\ndefine function \"LengthInDays\"(Value Interval\u003cDateTime\u003e ):\n  "}]},{"children":[{"children":[{"children":[{"text":"difference in days between "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"Value"}]}],"node_type":"OperandRef","ref_id":"293"}],"node_type":"Start","ref_id":"292"},{"children":[{"text":" and "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"Value"}]}],"node_type":"OperandRef","ref_id":"297"}],"node_type":"End","ref_id":"296"}],"node_type":"DifferenceBetween","ref_id":"291"}],"node_type":"DifferenceBetween","ref_id":"291"}],"ref_id":"285"}],"define_name":"LengthInDays"},{"children":[{"children":[{"children":[{"text":"/*Given a datetime and a period, returns the period (if a period is provided) or the interval beginning and ending on the datetime (if a datetime is provided)*/\ndefine function \"NormalizeInterval\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  "}]},{"children":[{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"pointInTime"}]}],"node_type":"OperandRef","ref_id":"1120"},{"children":[{"text":" is not null"}]}],"ref_id":"1122"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"pointInTime"}]}],"ref_id":"1123"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"pointInTime"}]}],"ref_id":"1124"},{"children":[{"text":"]"}]}],"ref_id":"1125"},{"children":[{"text":"\n    else "}]},{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"1129"},{"children":[{"text":" is not null"}]}],"ref_id":"1133"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"period"}]}],"ref_id":"1134"},{"children":[{"text":" \n    else "}]},{"children":[{"children":[{"text":"null as "}],"node_type":"Null","ref_id":"1138"},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"1140"},{"children":[{"text":"\u003e"}]}],"ref_id":"1139"}],"ref_id":"1137"}],"ref_id":"1128"}],"node_type":"If","ref_id":"1119"}],"node_type":"If","ref_id":"1119"}],"ref_id":"1111"}],"define_name":"NormalizeInterval"},{"children":[{"children":[]},{"children":[]},{"children":[{"children":[{"text":"/*@description: Returns an interval of date values extracted from the input interval of date-time values\n@comment: This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability.*/\ndefine function \"ToDateInterval\"(period Interval\u003cDateTime\u003e ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"270"}],"node_type":"Start","ref_id":"269"}],"ref_id":"268"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"275"}],"node_type":"End","ref_id":"274"}],"ref_id":"273"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"278"}],"node_type":"Interval","ref_id":"278"}],"ref_id":"262"}],"define_name":"ToDateInterval"}],"identifier":{"id":"CQMCommonQDM","version":"9.0.000"}},"is_main_library":false,"is_top_level":true,"library_name":"CQMCommonQDM","library_version":"9.0.000","statement_dependencies":[{"_id":"689200cd10d20757c0ce0ae8","statement_name":"NormalizeInterval"}]}],"created_at":null,"description":"Percentage of patients aged 18 years and older with a diagnosis of diabetic retinopathy who had a dilated macular or fundus exam performed with documented communication to the physician who manages the ongoing care of the patient with diabetes mellitus regarding the findings of the macular or fundus exam at least once during the measurement period","hqmf_id":"1FF2B3D2-6132-4DA7-9598-3F071C73789D","hqmf_set_id":"53D6D7C3-43FB-4D24-8099-17E74C022C05","hqmf_version_number":"14.0.000","main_cql_library":"CMS142DRCommWithPhysicianManagingDiabetesQDM","measure_attributes":[{"code":"OTH","value":"142","name":"CMS ID","code_obj":{"type":"CD","null_flavor":"OTH","original_text":"CMS ID"},"value_obj":{"type":"ED","value":"142","media_type":"text/plain"}},{"code":"OTH","value":"Not Applicable","name":"CBE Number","code_obj":{"type":"CD","null_flavor":"OTH","original_text":"CBE Number"},"value_obj":{"type":"ED","value":"Not Applicable","media_type":"text/plain"}},{"code":"COPY","value":"Copyright 2025 American Academy of Ophthalmology. All Rights Reserved.","name":"Copyright","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"COPY","title":"Copyright"},"value_obj":{"type":"ED","value":"Copyright 2025 American Academy of Ophthalmology. All Rights Reserved.","media_type":"text/plain"}},{"code":"DISC","value":"The Measure is not a clinical guideline, does not establish a standard of medical care, and has not been tested for all potential applications. The Measure, while copyrighted, can be reproduced and distributed, without modification, for noncommercial purposes, e.g., use by health care providers in connection with their practices. Commercial use is defined as the sale, license, or distribution of the Measure for commercial gain, or incorporation of the Measure into a product or service that is sold, licensed or distributed for commercial gain. Commercial uses of the Measure require a license agreement between the user and the American Academy of Ophthalmology (Academy). Neither the Academy, PCPI, nor the American Medical Association (AMA), nor the former AMA-convened Physician Consortium for Performance Improvement(R) (AMA-PCPI), nor their members shall be responsible for any use of the Measure. The PCPIs and AMAs significant past efforts and contributions to the development and updating of the Measures are acknowledged. The National Committee for Quality Assurance's significant past efforts and contributions to the development and updating of the Measure is acknowledged. THE MEASURE AND SPECIFICATIONS ARE PROVIDED \"AS IS\" WITHOUT WARRANTY OF ANY KIND. Limited proprietary coding is contained in the Measure specifications for convenience. A license agreement must be entered prior to a third partys use of Current Procedural Terminology (CPT[R]) or other proprietary code set contained in the Measures. Any other use of CPT or other coding by the third party is strictly prohibited. The Academy, the AMA, and former members of the PCPI disclaim all liability for use or accuracy of any CPT or other coding contained in the specifications. CPT(R) contained in the Measure specifications is copyright 2004-2024 American Medical Association. LOINC(R) is copyright 2004-2024 Regenstrief Institute, Inc. This material contains SNOMED Clinical Terms(R) (SNOMED CT[R]) copyright 2004-2024 International Health Terminology Standards Development Organisation. ICD-10 is copyright 2024 World Health Organization. All Rights Reserved. Due to technical limitations, registered trademarks are indicated by (R) or [R].","name":"Disclaimer","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DISC","title":"Disclaimer"},"value_obj":{"type":"ED","value":"The Measure is not a clinical guideline, does not establish a standard of medical care, and has not been tested for all potential applications. The Measure, while copyrighted, can be reproduced and distributed, without modification, for noncommercial purposes, e.g., use by health care providers in connection with their practices. Commercial use is defined as the sale, license, or distribution of the Measure for commercial gain, or incorporation of the Measure into a product or service that is sold, licensed or distributed for commercial gain. Commercial uses of the Measure require a license agreement between the user and the American Academy of Ophthalmology (Academy). Neither the Academy, PCPI, nor the American Medical Association (AMA), nor the former AMA-convened Physician Consortium for Performance Improvement(R) (AMA-PCPI), nor their members shall be responsible for any use of the Measure. The PCPIs and AMAs significant past efforts and contributions to the development and updating of the Measures are acknowledged. The National Committee for Quality Assurance's significant past efforts and contributions to the development and updating of the Measure is acknowledged. THE MEASURE AND SPECIFICATIONS ARE PROVIDED \"AS IS\" WITHOUT WARRANTY OF ANY KIND. Limited proprietary coding is contained in the Measure specifications for convenience. A license agreement must be entered prior to a third partys use of Current Procedural Terminology (CPT[R]) or other proprietary code set contained in the Measures. Any other use of CPT or other coding by the third party is strictly prohibited. The Academy, the AMA, and former members of the PCPI disclaim all liability for use or accuracy of any CPT or other coding contained in the specifications. CPT(R) contained in the Measure specifications is copyright 2004-2024 American Medical Association. LOINC(R) is copyright 2004-2024 Regenstrief Institute, Inc. This material contains SNOMED Clinical Terms(R) (SNOMED CT[R]) copyright 2004-2024 International Health Terminology Standards Development Organisation. ICD-10 is copyright 2024 World Health Organization. All Rights Reserved. Due to technical limitations, registered trademarks are indicated by (R) or [R].","media_type":"text/plain"}},{"code":"MSRSCORE","name":"Measure Scoring","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRSCORE","title":"Measure Scoring"},"value_obj":{"type":"CD","system":"2.16.840.1.113883.5.1063","code":"PROPOR","title":"Proportion"}},{"code":"MSRTYPE","name":"Measure Type","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRTYPE","title":"Measure Type"},"value_obj":{"type":"CD","system":"2.16.840.1.113883.5.1063","code":"PROCESS","title":"Process"}},{"code":"STRAT","value":"None","name":"Stratification","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"STRAT","title":"Stratification"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"MSRADJ","value":"None","name":"Risk Adjustment","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRADJ","title":"Risk Adjustment"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"MSRAGG","value":"None","name":"Rate Aggregation","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRAGG","title":"Rate Aggregation"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"RAT","value":"Diabetic retinopathy is a prevalent complication of diabetes, estimated to affect 28.5% of diabetic patients in the US (Zhang et al., 2010). Diabetic retinopathy is a key indicator of systemic complications of diabetes (Zhang et al., 2010). Coordination of care between the eye care specialist and the physician managing a patients ongoing diabetes care is essential in stemming the progression of vision loss. Communication from the eye care specialist to a primary care physician facilitates the exchange of information about the severity and progression of a patients diabetic retinopathy, adherence to recommended ocular care, need for follow-up visits, and treatment plans (Storey et al., 2016). Data from the Diabetes Control and Complications Trial showed that diabetic treatment and maintenance of glucose control delays the onset and slows the progression of diabetic retinopathy (Aiello \u0026 DCCT/EDIC Research Group, 2014).","name":"Rationale","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"RAT","title":"Rationale"},"value_obj":{"type":"ED","value":"Diabetic retinopathy is a prevalent complication of diabetes, estimated to affect 28.5% of diabetic patients in the US (Zhang et al., 2010). Diabetic retinopathy is a key indicator of systemic complications of diabetes (Zhang et al., 2010). Coordination of care between the eye care specialist and the physician managing a patients ongoing diabetes care is essential in stemming the progression of vision loss. Communication from the eye care specialist to a primary care physician facilitates the exchange of information about the severity and progression of a patients diabetic retinopathy, adherence to recommended ocular care, need for follow-up visits, and treatment plans (Storey et al., 2016). Data from the Diabetes Control and Complications Trial showed that diabetic treatment and maintenance of glucose control delays the onset and slows the progression of diabetic retinopathy (Aiello \u0026 DCCT/EDIC Research Group, 2014).","media_type":"text/plain"}},{"code":"CRS","value":"The ophthalmologist should refer patients with diabetes to a primary care physician or endocrinologist for appropriate management of their systemic condition and should communicate examination results to the physician managing the patients ongoing diabetes care (Lim et al., 2025). A goal is to achieve optimal control of blood glucose, blood pressure, and other risk factors through close communication with the patients primary care physician on the status of the DR and the need for optimal metabolic control (Lim et al., 2025). Establishing a close partnership between the ophthalmologist and the primary care physician is an important step to ensure optimal patient care. Furthermore, it is important to help educate patients with diabetes as well as their primary care physician about the ophthalmologic implications of controlling blood glucose (as monitored by HbA1c) to as near to normal as is safely possible (Lim et al., 2025).","name":"Clinical Recommendation Statement","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"CRS","title":"Clinical Recommendation Statement"},"value_obj":{"type":"ED","value":"The ophthalmologist should refer patients with diabetes to a primary care physician or endocrinologist for appropriate management of their systemic condition and should communicate examination results to the physician managing the patients ongoing diabetes care (Lim et al., 2025). A goal is to achieve optimal control of blood glucose, blood pressure, and other risk factors through close communication with the patients primary care physician on the status of the DR and the need for optimal metabolic control (Lim et al., 2025). Establishing a close partnership between the ophthalmologist and the primary care physician is an important step to ensure optimal patient care. Furthermore, it is important to help educate patients with diabetes as well as their primary care physician about the ophthalmologic implications of controlling blood glucose (as monitored by HbA1c) to as near to normal as is safely possible (Lim et al., 2025).","media_type":"text/plain"}},{"code":"IDUR","value":"Higher score indicates better quality","name":"Improvement Notation","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"IDUR","title":"Improvement Notation"},"value_obj":{"type":"ED","value":"Higher score indicates better quality","media_type":"text/plain"}},{"code":"REF","value":"CITATION Aiello, L. P., \u0026 DCCT/EDIC Research Group (2014). Diabetic retinopathy and other ocular findings in the diabetes control and complications trial/epidemiology of diabetes interventions and complications study. Diabetes care, 37(1), 1723. doi:10.2337/dc13-2251","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATION Aiello, L. P., \u0026 DCCT/EDIC Research Group (2014). Diabetic retinopathy and other ocular findings in the diabetes control and complications trial/epidemiology of diabetes interventions and complications study. Diabetes care, 37(1), 1723. doi:10.2337/dc13-2251","media_type":"text/plain"}},{"code":"REF","value":"Citation Lim, J.I., Kim, S.J., Bailey, S.T., Kovach, J.L., Vemulakonda, G.A., Ying, G., Flaxel, C.J. and the American Academy of Ophthalmology Preferred Practice Pattern Retina/Vitreous Committee (2025). Diabetic Retinopathy Preferred Practice Pattern. Ophthalmology. 2025 in press. doi: 10.1016/j.ophtha.2024.12.020.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"Citation Lim, J.I., Kim, S.J., Bailey, S.T., Kovach, J.L., Vemulakonda, G.A., Ying, G., Flaxel, C.J. and the American Academy of Ophthalmology Preferred Practice Pattern Retina/Vitreous Committee (2025). Diabetic Retinopathy Preferred Practice Pattern. Ophthalmology. 2025 in press. doi: 10.1016/j.ophtha.2024.12.020.","media_type":"text/plain"}},{"code":"REF","value":"CITATION Storey, P. P., Murchison, A. P., Pizzi, L. T., Hark, L. A., Dai, Y., Leiby, B. E., \u0026 Haller, J. A. (2016). Impact of physician communication on diabetic eye examination adherence: Results from a Retrospective Cohort Analysis. Retina.;36(1),20-7. doi:10.1097/IAE.0000000000000652","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATION Storey, P. P., Murchison, A. P., Pizzi, L. T., Hark, L. A., Dai, Y., Leiby, B. E., \u0026 Haller, J. A. (2016). Impact of physician communication on diabetic eye examination adherence: Results from a Retrospective Cohort Analysis. Retina.;36(1),20-7. doi:10.1097/IAE.0000000000000652","media_type":"text/plain"}},{"code":"REF","value":"CITATION Zhang, X., Saaddine, J. B., Chou, C. F., Cotch, M. F., Cheng, Y. J., Geiss, L. S.,  Klein, R. (2010). Prevalence of diabetic retinopathy in the United States, 2005-2008. JAMA, 304(6), 649656. doi:10.1001/jama.2010.1111","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATION Zhang, X., Saaddine, J. B., Chou, C. F., Cotch, M. F., Cheng, Y. J., Geiss, L. S.,  Klein, R. (2010). Prevalence of diabetic retinopathy in the United States, 2005-2008. JAMA, 304(6), 649656. doi:10.1001/jama.2010.1111","media_type":"text/plain"}},{"code":"DEF","value":"Communication - May include documentation in the medical record indicating that the findings of the dilated macular or fundus exam were communicated (e.g., verbally, by letter) with the clinician managing the patient's diabetic care OR a copy of a letter in the medical record to the clinician managing the patient's diabetic care outlining the findings of the dilated macular or fundus exam. Findings - Includes level of severity of retinopathy (e.g., mild nonproliferative, moderate nonproliferative, severe nonproliferative, very severe nonproliferative, proliferative) AND the presence or absence of macular edema.","name":"Definition","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DEF","title":"Definition"},"value_obj":{"type":"ED","value":"Communication - May include documentation in the medical record indicating that the findings of the dilated macular or fundus exam were communicated (e.g., verbally, by letter) with the clinician managing the patient's diabetic care OR a copy of a letter in the medical record to the clinician managing the patient's diabetic care outlining the findings of the dilated macular or fundus exam. Findings - Includes level of severity of retinopathy (e.g., mild nonproliferative, moderate nonproliferative, severe nonproliferative, very severe nonproliferative, proliferative) AND the presence or absence of macular edema.","media_type":"text/plain"}},{"code":"GUIDE","value":"The measure, as written, does not specifically require documentation of laterality. Coding limitations in particular clinical terminologies do not currently allow for that level of specificity (ICD-10-CM includes laterality, but SNOMED-CT does not uniformly include this distinction). Therefore, at this time, it is not a requirement of this measure to indicate laterality of the diagnoses, findings or procedures. Available coding to capture the data elements specified in this measure has been provided. It is assumed that the eligible clinician will record laterality in the patient medical record, as quality care and clinical documentation should include laterality. The communication of results, including the level of severity of diabetic retinopathy and presence or absence of macular edema to the primary care physician providing ongoing care of a patient's diabetes should be completed soon after the dilated exam is performed. Eligible clinicians reporting on this measure should note that all data for the measurement period is to be submitted by the deadline established by CMS. Therefore, eligible clinicians who see patients towards the end of the measurement period (i.e., December in particular), should communicate the results of the dilated macular exam as soon as possible in order for those patients to be counted in the measure numerator. Communicating the results as soon as possible after the date of the exam will ensure the data are included in the submission to CMS. This eCQM is a patient-based measure. Telehealth encounters are not eligible for this measure because the measure requires a clinical action that cannot be conducted via telehealth. This version of the eCQM uses QDM version 5.6. Please refer to the eCQI resource center (https://ecqi.healthit.gov/qdm) for more information on the QDM.","name":"Guidance","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"GUIDE","title":"Guidance"},"value_obj":{"type":"ED","value":"The measure, as written, does not specifically require documentation of laterality. Coding limitations in particular clinical terminologies do not currently allow for that level of specificity (ICD-10-CM includes laterality, but SNOMED-CT does not uniformly include this distinction). Therefore, at this time, it is not a requirement of this measure to indicate laterality of the diagnoses, findings or procedures. Available coding to capture the data elements specified in this measure has been provided. It is assumed that the eligible clinician will record laterality in the patient medical record, as quality care and clinical documentation should include laterality. The communication of results, including the level of severity of diabetic retinopathy and presence or absence of macular edema to the primary care physician providing ongoing care of a patient's diabetes should be completed soon after the dilated exam is performed. Eligible clinicians reporting on this measure should note that all data for the measurement period is to be submitted by the deadline established by CMS. Therefore, eligible clinicians who see patients towards the end of the measurement period (i.e., December in particular), should communicate the results of the dilated macular exam as soon as possible in order for those patients to be counted in the measure numerator. Communicating the results as soon as possible after the date of the exam will ensure the data are included in the submission to CMS. This eCQM is a patient-based measure. Telehealth encounters are not eligible for this measure because the measure requires a clinical action that cannot be conducted via telehealth. This version of the eCQM uses QDM version 5.6. Please refer to the eCQI resource center (https://ecqi.healthit.gov/qdm) for more information on the QDM.","media_type":"text/plain"}},{"code":"TRANF","value":"TBD","name":"Transmission Format","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"TRANF","title":"Transmission Format"},"value_obj":{"type":"ED","value":"TBD","media_type":"text/plain"}},{"code":"IPOP","value":"All patients aged 18 years and older with a diagnosis of diabetic retinopathy during the measurement period","name":"Initial Population","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"IPOP","title":"Initial Population"},"value_obj":{"type":"ED","value":"All patients aged 18 years and older with a diagnosis of diabetic retinopathy during the measurement period","media_type":"text/plain"}},{"code":"DENOM","value":"Equals Initial Population who had a dilated macular or fundus exam performed during the measurement period","name":"Denominator","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DENOM","title":"Denominator"},"value_obj":{"type":"ED","value":"Equals Initial Population who had a dilated macular or fundus exam performed during the measurement period","media_type":"text/plain"}},{"code":"DENEX","value":"None","name":"Denominator Exclusions","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DENEX","title":"Denominator Exclusions"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"NUMER","value":"Patients with documentation, at least once within the measurement period, of the findings of the dilated macular or fundus exam via communication to the physician who manages the patient's diabetic care","name":"Numerator","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"NUMER","title":"Numerator"},"value_obj":{"type":"ED","value":"Patients with documentation, at least once within the measurement period, of the findings of the dilated macular or fundus exam via communication to the physician who manages the patient's diabetic care","media_type":"text/plain"}},{"code":"NUMEX","value":"None","name":"Numerator Exclusions","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"NUMEX","title":"Numerator Exclusions"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"DENEXCEP","value":"Documentation of medical reason(s) for not communicating the findings of the dilated macular or fundus exam to the physician who manages the ongoing care of the patient with diabetes Documentation of patient reason(s) for not communicating the findings of the dilated macular or fundus exam to the physician who manages the ongoing care of the patient with diabetes","name":"Denominator Exceptions","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DENEXCEP","title":"Denominator Exceptions"},"value_obj":{"type":"ED","value":"Documentation of medical reason(s) for not communicating the findings of the dilated macular or fundus exam to the physician who manages the ongoing care of the patient with diabetes Documentation of patient reason(s) for not communicating the findings of the dilated macular or fundus exam to the physician who manages the ongoing care of the patient with diabetes","media_type":"text/plain"}},{"code":"SDE","value":"For every patient evaluated by this measure also identify payer, race, ethnicity, and sex.","name":"Supplemental Data Elements","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"SDE","title":"Supplemental Data Elements"},"value_obj":{"type":"ED","value":"For every patient evaluated by this measure also identify payer, race, ethnicity, and sex.","media_type":"text/plain"}}],"measure_period":{"type":"IVL_TS","low":{"type":"TS","value":"201201010000","inclusive?":true,"derived?":false},"high":{"type":"TS","value":"201212312359","inclusive?":true,"derived?":false},"width":{"type":"PQ","unit":"a","value":"1","inclusive?":true,"derived?":false}},"measure_scoring":"PROPORTION","population_criteria":{"IPP":{"conjunction?":true,"type":"IPP","hqmf_id":"25A23253-E238-4C41-AC70-556A2C25EBAE","preconditions":[{"id":2,"preconditions":[{"id":1,"reference":"CMS142DRCommWithPhysicianManagingDiabetesQDM__Initial_Population__fded3a5e_ef87_48c2_abb1_dfc7e4ae0952"}],"conjunction_code":"allTrue"}]},"DENOM":{"conjunction?":true,"type":"DENOM","hqmf_id":"1FDD8A3A-9815-43BB-A69A-6430BD9D5507","preconditions":[{"id":4,"preconditions":[{"id":3,"reference":"CMS142DRCommWithPhysicianManagingDiabetesQDM__Denominator__fded3a5e_ef87_48c2_abb1_dfc7e4ae0952"}],"conjunction_code":"allTrue"}]},"NUMER":{"conjunction?":true,"type":"NUMER","hqmf_id":"75CBF5D5-DF61-4232-90AA-E935A07E25BE","preconditions":[{"id":6,"preconditions":[{"id":5,"reference":"CMS142DRCommWithPhysicianManagingDiabetesQDM__Numerator__fded3a5e_ef87_48c2_abb1_dfc7e4ae0952"}],"conjunction_code":"allTrue"}]},"DENEXCEP":{"conjunction?":true,"type":"DENEXCEP","hqmf_id":"7C701A84-4CE6-4B35-BC7B-A55104C4318D","preconditions":[{"id":8,"preconditions":[{"id":7,"reference":"CMS142DRCommWithPhysicianManagingDiabetesQDM__Denominator_Exceptions__fded3a5e_ef87_48c2_abb1_dfc7e4ae0952"}],"conjunction_code":"atLeastOneTrue"}]}},"population_sets":[{"_id":"689200cd10d20757c0ce0ae9","population_set_id":"PopulationSet_1","populations":{"DENEXCEP":{"_id":"689200cd10d20757c0ce0aea","hqmf_id":"7C701A84-4CE6-4B35-BC7B-A55104C4318D","library_name":"CMS142DRCommWithPhysicianManagingDiabetesQDM","statement_name":"Denominator Exceptions"},"DENOM":{"_id":"689200cd10d20757c0ce0aeb","hqmf_id":"1FDD8A3A-9815-43BB-A69A-6430BD9D5507","library_name":"CMS142DRCommWithPhysicianManagingDiabetesQDM","statement_name":"Denominator"},"IPP":{"_id":"689200cd10d20757c0ce0aec","hqmf_id":"25A23253-E238-4C41-AC70-556A2C25EBAE","library_name":"CMS142DRCommWithPhysicianManagingDiabetesQDM","statement_name":"Initial Population"},"NUMER":{"_id":"689200cd10d20757c0ce0aed","hqmf_id":"75CBF5D5-DF61-4232-90AA-E935A07E25BE","library_name":"CMS142DRCommWithPhysicianManagingDiabetesQDM","statement_name":"Numerator"},"_id":"689200cd10d20757c0ce0aee","_type":"CQM::ProportionPopulationMap"},"supplemental_data_elements":[{"_id":"689200c610d20757c0ce0831","hqmf_id":"e83d112e-0059-4d9d-8781-a619947d2f9f","library_name":"CMS142DRCommWithPhysicianManagingDiabetesQDM","statement_name":"SDE Race"},{"_id":"689200c610d20757c0ce0832","hqmf_id":"dcfadb09-c1fc-45b9-8c7f-c7178135d454","library_name":"CMS142DRCommWithPhysicianManagingDiabetesQDM","statement_name":"SDE Payer"},{"_id":"689200c610d20757c0ce0833","hqmf_id":"be2d9db7-2b31-4cb2-8db9-90e8a3f378f3","library_name":"CMS142DRCommWithPhysicianManagingDiabetesQDM","statement_name":"SDE Ethnicity"},{"_id":"689200c610d20757c0ce0834","hqmf_id":"975a3c9d-c55c-44b2-877e-7308949bd316","library_name":"CMS142DRCommWithPhysicianManagingDiabetesQDM","statement_name":"SDE Sex"}],"title":"Population Criteria Section"}],"source_data_criteria":[{"_id":"689200c610d20757c0ce0855","_type":"QDM::CommunicationPerformed","authorDatetime":null,"category":null,"codeListId":"2.16.840.1.113883.3.526.3.1320","dataElementCodes":[],"description":"Communication, Performed: MacularEdemaFindingsPresent","hqmfOid":"2.16.840.1.113883.10.20.28.4.132","id":"689200c610d20757c0ce0855","medium":null,"negationRationale":null,"qdmCategory":"communication","qdmStatus":"performed","qdmTitle":"Communication, Performed","qdmVersion":"5.6","receivedDatetime":null,"relatedTo":null,"sentDatetime":null},{"_id":"689200c610d20757c0ce0856","_type":"QDM::CommunicationPerformed","authorDatetime":null,"category":null,"codeListId":"2.16.840.1.113883.3.526.3.1283","dataElementCodes":[],"description":"Communication, Performed: LevelofSeverityofRetinopathyFindings","hqmfOid":"2.16.840.1.113883.10.20.28.4.132","id":"689200c610d20757c0ce0856","medium":null,"negationRationale":null,"qdmCategory":"communication","qdmStatus":"performed","qdmTitle":"Communication, Performed","qdmVersion":"5.6","receivedDatetime":null,"relatedTo":null,"sentDatetime":null},{"_id":"689200cd10d20757c0ce0aef","_type":"QDM::PatientCharacteristicRace","codeListId":"2.16.840.1.114222.4.11.836","dataElementCodes":[],"description":"Patient Characteristic Race: Race","hqmfOid":"2.16.840.1.113883.10.20.28.4.59","id":"689200cd10d20757c0ce0aef","qdmCategory":"patient_characteristic","qdmStatus":"race","qdmTitle":"Patient Characteristic Race","qdmVersion":"5.6"},{"_id":"689200c610d20757c0ce0857","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.464.1003.101.12.1008","dataElementCodes":[],"description":"Encounter, Performed: OutpatientConsultation","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"689200c610d20757c0ce0857","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"689200cd10d20757c0ce0af0","_type":"QDM::PatientCharacteristicSex","codeListId":"2.16.840.1.113762.1.4.1021.121","dataElementCodes":[],"description":"Patient Characteristic Sex: FederalAdministrativeSex","hqmfOid":"2.16.840.1.113883.10.20.28.4.55","id":"689200cd10d20757c0ce0af0","qdmCategory":"patient_characteristic","qdmStatus":"gender","qdmTitle":"Patient Characteristic Sex","qdmVersion":"5.6"},{"_id":"689200cd10d20757c0ce0af1","_type":"QDM::PatientCharacteristicEthnicity","codeListId":"2.16.840.1.114222.4.11.837","dataElementCodes":[],"description":"Patient Characteristic Ethnicity: Ethnicity","hqmfOid":"2.16.840.1.113883.10.20.28.4.56","id":"689200cd10d20757c0ce0af1","qdmCategory":"patient_characteristic","qdmStatus":"ethnicity","qdmTitle":"Patient Characteristic Ethnicity","qdmVersion":"5.6"},{"_id":"689200cd10d20757c0ce0af2","_type":"QDM::PatientCharacteristicPayer","codeListId":"2.16.840.1.114222.4.11.3591","dataElementCodes":[],"description":"Patient Characteristic Payer: PayerType","hqmfOid":"2.16.840.1.113883.10.20.28.4.58","id":"689200cd10d20757c0ce0af2","qdmCategory":"patient_characteristic","qdmStatus":"payer","qdmTitle":"Patient Characteristic Payer","qdmVersion":"5.6","relevantPeriod":null},{"_id":"689200cd10d20757c0ce0af3","_type":"QDM::Diagnosis","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"2.16.840.1.113883.3.526.3.327","dataElementCodes":[],"description":"Diagnosis: DiabeticRetinopathy","hqmfOid":"2.16.840.1.113883.10.20.28.4.110","id":"689200cd10d20757c0ce0af3","prevalencePeriod":null,"qdmCategory":"condition","qdmTitle":"Diagnosis","qdmVersion":"5.6","qrdaOid":"2.16.840.1.113883.10.20.24.3.135","severity":null},{"_id":"689200c610d20757c0ce0858","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.464.1003.101.12.1014","dataElementCodes":[],"description":"Encounter, Performed: CareServicesinLongTermResidentialFacility","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"689200c610d20757c0ce0858","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"689200cd10d20757c0ce0af4","_type":"QDM::DiagnosticStudyPerformed","authorDatetime":null,"codeListId":"2.16.840.1.113883.3.526.3.1251","components":null,"dataElementCodes":[],"description":"Diagnostic Study, Performed: MacularExam","facilityLocation":null,"hqmfOid":"2.16.840.1.113883.10.20.28.4.23","id":"689200cd10d20757c0ce0af4","interpretation":null,"method":null,"negationRationale":null,"qdmCategory":"diagnostic_study","qdmStatus":"performed","qdmTitle":"Diagnostic Study, Performed","qdmVersion":"5.6","reason":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null,"resultDatetime":null,"status":null},{"_id":"689200c610d20757c0ce0859","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.464.1003.101.12.1001","dataElementCodes":[],"description":"Encounter, Performed: OfficeVisit","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"689200c610d20757c0ce0859","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"689200c610d20757c0ce085a","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.526.3.1285","dataElementCodes":[],"description":"Encounter, Performed: OphthalmologicalServices","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"689200c610d20757c0ce085a","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"689200c610d20757c0ce085b","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.464.1003.101.12.1012","dataElementCodes":[],"description":"Encounter, Performed: NursingFacilityVisit","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"689200c610d20757c0ce085b","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"689200c610d20757c0ce085c","_type":"QDM::CommunicationPerformed","authorDatetime":null,"category":null,"codeListId":"drc-3d71ed48017f433f7030961e45b07751cfa2141c3a49449c593888d8d13a75f0","dataElementCodes":[],"description":"Communication, Performed: Macular edema absent (situation)","hqmfOid":"2.16.840.1.113883.10.20.28.4.132","id":"689200c610d20757c0ce085c","medium":null,"negationRationale":null,"qdmCategory":"communication","qdmStatus":"performed","qdmTitle":"Communication, Performed","qdmVersion":"5.6","receivedDatetime":null,"relatedTo":null,"sentDatetime":null}],"title":"Diabetic Retinopathy: Communication with the Physician Managing Ongoing Diabetes Care","updated_at":null,"value_set_ids":["689200c610d20757c0ce085d","689200c610d20757c0ce085e","689200cd10d20757c0ce0ac7","689200cd10d20757c0ce0ac8","689200cd10d20757c0ce0ac9","689200cd10d20757c0ce0aca","689200cd10d20757c0ce0acb","689200cd10d20757c0ce0acc","689200cd10d20757c0ce0acd","689200cd10d20757c0ce0ace","689200cd10d20757c0ce0acf","689200cd10d20757c0ce0ad0","689200cd10d20757c0ce0ad1","689200cd10d20757c0ce0ad2","689200cd10d20757c0ce0ad3","689200cd10d20757c0ce0ad4","689200cd10d20757c0ce0ad5","689200cd10d20757c0ce0ad6","689200cd10d20757c0ce0ad7","689200cd10d20757c0ce0ad8","689200cd10d20757c0ce0ad9","689200cd10d20757c0ce0ada"]}