{"_id":"68923f90a83e15671c2e4e85","calculate_sdes":null,"calculation_method":"PATIENT","cms_id":"CMS71v14","component":false,"component_hqmf_set_ids":[],"composite":false,"composite_hqmf_set_id":null,"cql_libraries":[{"_id":"68923f89a83e15671c2e4ca1","cql":"library AnticoagulationTherapyforAtrialFibrillationFlutter version '14.0.000'\r\n\r\nusing QDM version '5.6'\r\n\r\ninclude MATGlobalCommonFunctionsQDM version '8.0.000' called Global\r\ninclude TJCOverallQDM version '8.0.000' called TJC\r\n\r\nvalueset \"Anticoagulant Therapy\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.200'\r\nvalueset \"Atrial Ablation\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.203'\r\nvalueset \"Atrial Fibrillation or Flutter\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.202'\r\nvalueset \"Discharge To Acute Care Facility\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.87'\r\nvalueset \"Discharged to Health Care Facility for Hospice Care\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.207'\r\nvalueset \"Discharged to Home for Hospice Care\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.209'\r\nvalueset \"Ethnicity\": 'urn:oid:2.16.840.1.114222.4.11.837'\r\nvalueset \"History of Atrial Ablation\": 'urn:oid:2.16.840.1.113762.1.4.1110.76'\r\nvalueset \"Left Against Medical Advice\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.308'\r\nvalueset \"Medical Reason For Not Providing Treatment\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.473'\r\nvalueset \"ONC Administrative Sex\": 'urn:oid:2.16.840.1.113762.1.4.1'\r\nvalueset \"Patient Expired\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.309'\r\nvalueset \"Patient Refusal\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.93'\r\nvalueset \"Payer Type\": 'urn:oid:2.16.840.1.114222.4.11.3591'\r\nvalueset \"Race\": 'urn:oid:2.16.840.1.114222.4.11.836'\r\n\r\ncontext Patient\r\n\r\ndefine \"Denominator\":\r\n  \"Encounter with a History of Atrial Ablation\"\r\n    union \"Encounter with Prior or Present Diagnosis of Atrial Fibrillation or Flutter\"\r\n\r\ndefine \"Denominator Exceptions\":\r\n  \"Denominator\" Encounter\r\n    with \"Documented Reason for Not Giving Anticoagulant at Discharge\" NoDischargeAnticoagulant\r\n      such that NoDischargeAnticoagulant.authorDatetime during Encounter.relevantPeriod\r\n\r\ndefine \"Denominator Exclusions\":\r\n  ( \"Denominator\" Encounter\r\n      where Encounter.dischargeDisposition in \"Discharge To Acute Care Facility\"\r\n        or Encounter.dischargeDisposition in \"Left Against Medical Advice\"\r\n        or Encounter.dischargeDisposition in \"Patient Expired\"\r\n        or Encounter.dischargeDisposition in \"Discharged to Home for Hospice Care\"\r\n        or Encounter.dischargeDisposition in \"Discharged to Health Care Facility for Hospice Care\"\r\n  )\r\n    union \"Encounter with Comfort Measures during Hospitalization for Patients with Documented Atrial Fibrillation or Flutter\"\r\n\r\ndefine \"Encounter with Comfort Measures during Hospitalization for Patients with Documented Atrial Fibrillation or Flutter\":\r\n  \"Denominator\" Encounter\r\n    with TJC.\"Intervention Comfort Measures\" ComfortMeasure\r\n      such that Coalesce(start of Global.\"NormalizeInterval\"(ComfortMeasure.relevantDatetime, ComfortMeasure.relevantPeriod), ComfortMeasure.authorDatetime) during Global.\"HospitalizationWithObservation\" ( Encounter )\r\n\r\ndefine \"Encounter with Prior or Present Diagnosis of Atrial Fibrillation or Flutter\":\r\n  ( TJC.\"Ischemic Stroke Encounter\" IschemicStrokeEncounter\r\n      with [\"Diagnosis\": \"Atrial Fibrillation or Flutter\"] AtrialFibrillationFlutter\r\n        such that AtrialFibrillationFlutter.prevalencePeriod starts on or before end of IschemicStrokeEncounter.relevantPeriod\r\n  )\r\n    union ( TJC.\"Ischemic Stroke Encounter\" IschemicStrokeEncounter\r\n        where exists ( IschemicStrokeEncounter.diagnoses Diagnosis\r\n            where Diagnosis.code in \"Atrial Fibrillation or Flutter\"\r\n        )\r\n    )\r\n\r\ndefine \"Numerator\":\r\n  \"Denominator\" Encounter\r\n    with [\"Medication, Discharge\": \"Anticoagulant Therapy\"] DischargeAnticoagulant\r\n      such that DischargeAnticoagulant.authorDatetime during Encounter.relevantPeriod\r\n\r\ndefine \"SDE Ethnicity\":\r\n  [\"Patient Characteristic Ethnicity\": \"Ethnicity\"]\r\n\r\ndefine \"SDE Payer\":\r\n  [\"Patient Characteristic Payer\": \"Payer Type\"]\r\n\r\ndefine \"SDE Race\":\r\n  [\"Patient Characteristic Race\": \"Race\"]\r\n\r\ndefine \"SDE Sex\":\r\n  [\"Patient Characteristic Sex\": \"ONC Administrative Sex\"]\r\n\r\ndefine \"Encounter with a History of Atrial Ablation\":\r\n  ( TJC.\"Ischemic Stroke Encounter\" IschemicStrokeEncounter\r\n      with [\"Procedure, Performed\": \"Atrial Ablation\"] AtrialAblationProcedure\r\n        such that Global.\"NormalizeInterval\" ( AtrialAblationProcedure.relevantDatetime, AtrialAblationProcedure.relevantPeriod ) starts before start of IschemicStrokeEncounter.relevantPeriod\r\n  )\r\n    union ( TJC.\"Ischemic Stroke Encounter\" IschemicStrokeEncounter\r\n        with [\"Diagnosis\": \"History of Atrial Ablation\"] AtrialAblationDiagnosis\r\n          such that AtrialAblationDiagnosis.prevalencePeriod starts before start of IschemicStrokeEncounter.relevantPeriod\r\n    )\r\n    union ( TJC.\"Ischemic Stroke Encounter\" IschemicStrokeEncounter\r\n        with [\"Assessment, Performed\": \"History of Atrial Ablation\"] AtrialAblationAssessment\r\n          such that Global.\"EarliestOf\" ( AtrialAblationAssessment.relevantDatetime, AtrialAblationAssessment.relevantPeriod ) on or before end of IschemicStrokeEncounter.relevantPeriod\r\n    )\r\n\r\ndefine \"Documented Reason for Not Giving Anticoagulant at Discharge\":\r\n  [\"Medication, Not Discharged\": \"Anticoagulant Therapy\"] NoAnticoagulant\r\n    where NoAnticoagulant.negationRationale in \"Medical Reason For Not Providing Treatment\"\r\n      or NoAnticoagulant.negationRationale in \"Patient Refusal\"\r\n\r\ndefine \"Initial Population\":\r\n  TJC.\"Ischemic Stroke Encounter\"","elm":{"library":{"annotation":[{"translatorOptions":"EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion,DisableMethodInvocation","type":"CqlToElmInfo"},{"type":"Annotation","s":{"r":"193","s":[{"value":["","library AnticoagulationTherapyforAtrialFibrillationFlutter version '14.0.000'"]}]}}],"identifier":{"id":"AnticoagulationTherapyforAtrialFibrillationFlutter","version":"14.0.000"},"schemaIdentifier":{"id":"urn:hl7-org:elm","version":"r1"},"usings":{"def":[{"localIdentifier":"System","uri":"urn:hl7-org:elm-types:r1"},{"localId":"1","locator":"3:1-3:23","localIdentifier":"QDM","uri":"urn:healthit-gov:qdm:v5_6","version":"5.6","annotation":[{"type":"Annotation","s":{"r":"1","s":[{"value":["","using "]},{"s":[{"value":["QDM"]}]},{"value":[" version ","'5.6'"]}]}}]}]},"includes":{"def":[{"localId":"2","locator":"5:1-5:67","localIdentifier":"Global","path":"MATGlobalCommonFunctionsQDM","version":"8.0.000","annotation":[{"type":"Annotation","s":{"r":"2","s":[{"value":["","include "]},{"s":[{"value":["MATGlobalCommonFunctionsQDM"]}]},{"value":[" version ","'8.0.000'"," called ","Global"]}]}}]},{"localId":"3","locator":"6:1-6:50","localIdentifier":"TJC","path":"TJCOverallQDM","version":"8.0.000","annotation":[{"type":"Annotation","s":{"r":"3","s":[{"value":["","include "]},{"s":[{"value":["TJCOverallQDM"]}]},{"value":[" version ","'8.0.000'"," called ","TJC"]}]}}]}]},"valueSets":{"def":[{"localId":"4","locator":"8:1-8:77","name":"Anticoagulant Therapy","id":"2.16.840.1.113883.3.117.1.7.1.200","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"4","s":[{"value":["","valueset ","\"Anticoagulant Therapy\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.200'"]}]}}]},{"localId":"5","locator":"9:1-9:71","name":"Atrial Ablation","id":"2.16.840.1.113883.3.117.1.7.1.203","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"5","s":[{"value":["","valueset ","\"Atrial Ablation\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.203'"]}]}}]},{"localId":"6","locator":"10:1-10:86","name":"Atrial Fibrillation or Flutter","id":"2.16.840.1.113883.3.117.1.7.1.202","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"6","s":[{"value":["","valueset ","\"Atrial Fibrillation or Flutter\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.202'"]}]}}]},{"localId":"7","locator":"11:1-11:87","name":"Discharge To Acute Care Facility","id":"2.16.840.1.113883.3.117.1.7.1.87","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"7","s":[{"value":["","valueset ","\"Discharge To Acute Care Facility\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.87'"]}]}}]},{"localId":"8","locator":"12:1-12:107","name":"Discharged to Health Care Facility for Hospice Care","id":"2.16.840.1.113883.3.117.1.7.1.207","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"8","s":[{"value":["","valueset ","\"Discharged to Health Care Facility for Hospice Care\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.207'"]}]}}]},{"localId":"9","locator":"13:1-13:91","name":"Discharged to Home for Hospice Care","id":"2.16.840.1.113883.3.117.1.7.1.209","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"9","s":[{"value":["","valueset ","\"Discharged to Home for Hospice Care\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.209'"]}]}}]},{"localId":"10","locator":"14:1-14:58","name":"Ethnicity","id":"2.16.840.1.114222.4.11.837","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"10","s":[{"value":["","valueset ","\"Ethnicity\"",": ","'urn:oid:2.16.840.1.114222.4.11.837'"]}]}}]},{"localId":"11","locator":"15:1-15:78","name":"History of Atrial Ablation","id":"2.16.840.1.113762.1.4.1110.76","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"11","s":[{"value":["","valueset ","\"History of Atrial Ablation\"",": ","'urn:oid:2.16.840.1.113762.1.4.1110.76'"]}]}}]},{"localId":"12","locator":"16:1-16:83","name":"Left Against Medical Advice","id":"2.16.840.1.113883.3.117.1.7.1.308","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"12","s":[{"value":["","valueset ","\"Left Against Medical Advice\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.308'"]}]}}]},{"localId":"13","locator":"17:1-17:98","name":"Medical Reason For Not Providing Treatment","id":"2.16.840.1.113883.3.117.1.7.1.473","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"13","s":[{"value":["","valueset ","\"Medical Reason For Not Providing Treatment\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.473'"]}]}}]},{"localId":"14","locator":"18:1-18:68","name":"ONC Administrative Sex","id":"2.16.840.1.113762.1.4.1","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"14","s":[{"value":["","valueset ","\"ONC Administrative Sex\"",": ","'urn:oid:2.16.840.1.113762.1.4.1'"]}]}}]},{"localId":"15","locator":"19:1-19:71","name":"Patient Expired","id":"2.16.840.1.113883.3.117.1.7.1.309","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"15","s":[{"value":["","valueset ","\"Patient Expired\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.309'"]}]}}]},{"localId":"16","locator":"20:1-20:70","name":"Patient Refusal","id":"2.16.840.1.113883.3.117.1.7.1.93","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"16","s":[{"value":["","valueset ","\"Patient Refusal\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.93'"]}]}}]},{"localId":"17","locator":"21:1-21:60","name":"Payer Type","id":"2.16.840.1.114222.4.11.3591","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"17","s":[{"value":["","valueset ","\"Payer Type\"",": ","'urn:oid:2.16.840.1.114222.4.11.3591'"]}]}}]},{"localId":"18","locator":"22:1-22:53","name":"Race","id":"2.16.840.1.114222.4.11.836","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"18","s":[{"value":["","valueset ","\"Race\"",": ","'urn:oid:2.16.840.1.114222.4.11.836'"]}]}}]}]},"contexts":{"def":[{"locator":"24:1-24:15","name":"Patient"}]},"statements":{"def":[{"locator":"24:1-24:15","name":"Patient","context":"Patient","expression":{"type":"SingletonFrom","operand":{"locator":"24:1-24:15","dataType":"{urn:healthit-gov:qdm:v5_6}Patient","templateId":"Patient","type":"Retrieve"}}},{"localId":"65","locator":"78:1-90:5","name":"Encounter with a History of Atrial Ablation","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"65","s":[{"value":["","define ","\"Encounter with a History of Atrial Ablation\"",":\n  "]},{"r":"64","s":[{"r":"47","s":[{"r":"34","s":[{"value":["( "]},{"r":"34","s":[{"s":[{"r":"20","s":[{"r":"19","s":[{"s":[{"value":["TJC",".","\"Ischemic Stroke Encounter\""]}]}]},{"value":[" ","IschemicStrokeEncounter"]}]}]},{"value":["\n      "]},{"r":"33","s":[{"value":["with "]},{"r":"22","s":[{"r":"21","s":[{"r":"21","s":[{"value":["[","\"Procedure, Performed\"",": "]},{"s":[{"value":["\"Atrial Ablation\""]}]},{"value":["]"]}]}]},{"value":[" ","AtrialAblationProcedure"]}]},{"value":["\n        such that "]},{"r":"32","s":[{"r":"28","s":[{"r":"23","s":[{"value":["Global"]}]},{"value":["."]},{"r":"28","s":[{"value":["\"NormalizeInterval\""," ( "]},{"r":"25","s":[{"r":"24","s":[{"value":["AtrialAblationProcedure"]}]},{"value":["."]},{"r":"25","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"27","s":[{"r":"26","s":[{"value":["AtrialAblationProcedure"]}]},{"value":["."]},{"r":"27","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]},{"r":"32","value":[" ","starts before"," "]},{"r":"31","s":[{"value":["start of "]},{"r":"30","s":[{"r":"29","s":[{"value":["IschemicStrokeEncounter"]}]},{"value":["."]},{"r":"30","s":[{"value":["relevantPeriod"]}]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["\n    union "]},{"r":"46","s":[{"value":["( "]},{"r":"46","s":[{"s":[{"r":"36","s":[{"r":"35","s":[{"s":[{"value":["TJC",".","\"Ischemic Stroke Encounter\""]}]}]},{"value":[" ","IschemicStrokeEncounter"]}]}]},{"value":["\n        "]},{"r":"45","s":[{"value":["with "]},{"r":"38","s":[{"r":"37","s":[{"r":"37","s":[{"value":["[","\"Diagnosis\"",": "]},{"s":[{"value":["\"History of Atrial Ablation\""]}]},{"value":["]"]}]}]},{"value":[" ","AtrialAblationDiagnosis"]}]},{"value":["\n          such that "]},{"r":"44","s":[{"r":"40","s":[{"r":"39","s":[{"value":["AtrialAblationDiagnosis"]}]},{"value":["."]},{"r":"40","s":[{"value":["prevalencePeriod"]}]}]},{"r":"44","value":[" ","starts before"," "]},{"r":"43","s":[{"value":["start of "]},{"r":"42","s":[{"r":"41","s":[{"value":["IschemicStrokeEncounter"]}]},{"value":["."]},{"r":"42","s":[{"value":["relevantPeriod"]}]}]}]}]}]}]},{"value":["\n    )"]}]}]},{"value":["\n    union "]},{"r":"63","s":[{"value":["( "]},{"r":"63","s":[{"s":[{"r":"49","s":[{"r":"48","s":[{"s":[{"value":["TJC",".","\"Ischemic Stroke Encounter\""]}]}]},{"value":[" ","IschemicStrokeEncounter"]}]}]},{"value":["\n        "]},{"r":"62","s":[{"value":["with "]},{"r":"51","s":[{"r":"50","s":[{"r":"50","s":[{"value":["[","\"Assessment, Performed\"",": "]},{"s":[{"value":["\"History of Atrial Ablation\""]}]},{"value":["]"]}]}]},{"value":[" ","AtrialAblationAssessment"]}]},{"value":["\n          such that "]},{"r":"61","s":[{"r":"57","s":[{"r":"52","s":[{"value":["Global"]}]},{"value":["."]},{"r":"57","s":[{"value":["\"EarliestOf\""," ( "]},{"r":"54","s":[{"r":"53","s":[{"value":["AtrialAblationAssessment"]}]},{"value":["."]},{"r":"54","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"56","s":[{"r":"55","s":[{"value":["AtrialAblationAssessment"]}]},{"value":["."]},{"r":"56","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]},{"r":"61","value":[" ","on or before"," "]},{"r":"60","s":[{"value":["end of "]},{"r":"59","s":[{"r":"58","s":[{"value":["IschemicStrokeEncounter"]}]},{"value":["."]},{"r":"59","s":[{"value":["relevantPeriod"]}]}]}]}]}]}]},{"value":["\n    )"]}]}]}]}}],"expression":{"localId":"64","locator":"79:3-90:5","type":"Union","operand":[{"localId":"47","locator":"79:3-86:5","type":"Union","operand":[{"localId":"34","locator":"79:3-82:3","type":"Query","source":[{"localId":"20","locator":"79:5-79:59","alias":"IschemicStrokeEncounter","expression":{"localId":"19","locator":"79:5-79:35","name":"Ischemic Stroke Encounter","libraryName":"TJC","type":"ExpressionRef"}}],"relationship":[{"localId":"33","locator":"80:7-81:191","alias":"AtrialAblationProcedure","type":"With","expression":{"localId":"21","locator":"80:12-80:54","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveProcedurePerformed","templateId":"PositiveProcedurePerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"80:37-80:53","name":"Atrial Ablation","preserve":true,"type":"ValueSetRef"}},"suchThat":{"localId":"32","locator":"81:19-81:191","type":"Before","operand":[{"locator":"81:131-81:136","type":"Start","operand":{"localId":"28","locator":"81:19-81:129","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"25","locator":"81:48-81:87","path":"relevantDatetime","scope":"AtrialAblationProcedure","type":"Property"},{"localId":"27","locator":"81:90-81:127","path":"relevantPeriod","scope":"AtrialAblationProcedure","type":"Property"}]}},{"localId":"31","locator":"81:145-81:191","type":"Start","operand":{"localId":"30","locator":"81:154-81:191","path":"relevantPeriod","scope":"IschemicStrokeEncounter","type":"Property"}}]}}]},{"localId":"46","locator":"83:11-86:5","type":"Query","source":[{"localId":"36","locator":"83:13-83:67","alias":"IschemicStrokeEncounter","expression":{"localId":"35","locator":"83:13-83:43","name":"Ischemic Stroke Encounter","libraryName":"TJC","type":"ExpressionRef"}}],"relationship":[{"localId":"45","locator":"84:9-85:122","alias":"AtrialAblationDiagnosis","type":"With","expression":{"localId":"37","locator":"84:14-84:56","dataType":"{urn:healthit-gov:qdm:v5_6}Diagnosis","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"84:28-84:55","name":"History of Atrial Ablation","preserve":true,"type":"ValueSetRef"}},"suchThat":{"localId":"44","locator":"85:21-85:122","type":"Before","operand":[{"locator":"85:62-85:67","type":"Start","operand":{"localId":"40","locator":"85:21-85:60","path":"prevalencePeriod","scope":"AtrialAblationDiagnosis","type":"Property"}},{"localId":"43","locator":"85:76-85:122","type":"Start","operand":{"localId":"42","locator":"85:85-85:122","path":"relevantPeriod","scope":"IschemicStrokeEncounter","type":"Property"}}]}}]}]},{"localId":"63","locator":"87:11-90:5","type":"Query","source":[{"localId":"49","locator":"87:13-87:67","alias":"IschemicStrokeEncounter","expression":{"localId":"48","locator":"87:13-87:43","name":"Ischemic Stroke Encounter","libraryName":"TJC","type":"ExpressionRef"}}],"relationship":[{"localId":"62","locator":"88:9-89:185","alias":"AtrialAblationAssessment","type":"With","expression":{"localId":"50","locator":"88:14-88:68","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveAssessmentPerformed","templateId":"PositiveAssessmentPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"88:40-88:67","name":"History of Atrial Ablation","preserve":true,"type":"ValueSetRef"}},"suchThat":{"localId":"61","locator":"89:21-89:185","type":"SameOrBefore","operand":[{"localId":"57","locator":"89:21-89:126","name":"EarliestOf","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"54","locator":"89:43-89:83","path":"relevantDatetime","scope":"AtrialAblationAssessment","type":"Property"},{"localId":"56","locator":"89:86-89:124","path":"relevantPeriod","scope":"AtrialAblationAssessment","type":"Property"}]},{"localId":"60","locator":"89:141-89:185","type":"End","operand":{"localId":"59","locator":"89:148-89:185","path":"relevantPeriod","scope":"IschemicStrokeEncounter","type":"Property"}}]}}]}]}},{"localId":"91","locator":"50:1-59:5","name":"Encounter with Prior or Present Diagnosis of Atrial Fibrillation or Flutter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"91","s":[{"value":["","define ","\"Encounter with Prior or Present Diagnosis of Atrial Fibrillation or Flutter\"",":\n  "]},{"r":"90","s":[{"r":"78","s":[{"value":["( "]},{"r":"78","s":[{"s":[{"r":"68","s":[{"r":"67","s":[{"s":[{"value":["TJC",".","\"Ischemic Stroke Encounter\""]}]}]},{"value":[" ","IschemicStrokeEncounter"]}]}]},{"value":["\n      "]},{"r":"77","s":[{"value":["with "]},{"r":"70","s":[{"r":"69","s":[{"r":"69","s":[{"value":["[","\"Diagnosis\"",": "]},{"s":[{"value":["\"Atrial Fibrillation or Flutter\""]}]},{"value":["]"]}]}]},{"value":[" ","AtrialFibrillationFlutter"]}]},{"value":["\n        such that "]},{"r":"76","s":[{"r":"72","s":[{"r":"71","s":[{"value":["AtrialFibrillationFlutter"]}]},{"value":["."]},{"r":"72","s":[{"value":["prevalencePeriod"]}]}]},{"r":"76","value":[" ","starts on or before"," "]},{"r":"75","s":[{"value":["end of "]},{"r":"74","s":[{"r":"73","s":[{"value":["IschemicStrokeEncounter"]}]},{"value":["."]},{"r":"74","s":[{"value":["relevantPeriod"]}]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["\n    union "]},{"r":"89","s":[{"value":["( "]},{"r":"89","s":[{"s":[{"r":"80","s":[{"r":"79","s":[{"s":[{"value":["TJC",".","\"Ischemic Stroke Encounter\""]}]}]},{"value":[" ","IschemicStrokeEncounter"]}]}]},{"value":["\n        "]},{"r":"88","s":[{"value":["where "]},{"r":"88","s":[{"value":["exists "]},{"r":"87","s":[{"value":["( "]},{"r":"87","s":[{"s":[{"r":"82","s":[{"r":"81","s":[{"s":[{"value":["IschemicStrokeEncounter",".","diagnoses"]}]}]},{"value":[" ","Diagnosis"]}]}]},{"value":["\n            "]},{"r":"86","s":[{"value":["where "]},{"r":"86","s":[{"r":"84","s":[{"r":"83","s":[{"value":["Diagnosis"]}]},{"value":["."]},{"r":"84","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"85","s":[{"value":["\"Atrial Fibrillation or Flutter\""]}]}]}]}]},{"value":["\n        )"]}]}]}]}]},{"value":["\n    )"]}]}]}]}}],"expression":{"localId":"90","locator":"51:3-59:5","type":"Union","operand":[{"localId":"78","locator":"51:3-54:3","type":"Query","source":[{"localId":"68","locator":"51:5-51:59","alias":"IschemicStrokeEncounter","expression":{"localId":"67","locator":"51:5-51:35","name":"Ischemic Stroke Encounter","libraryName":"TJC","type":"ExpressionRef"}}],"relationship":[{"localId":"77","locator":"52:7-53:126","alias":"AtrialFibrillationFlutter","type":"With","expression":{"localId":"69","locator":"52:12-52:58","dataType":"{urn:healthit-gov:qdm:v5_6}Diagnosis","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"52:26-52:57","name":"Atrial Fibrillation or Flutter","preserve":true,"type":"ValueSetRef"}},"suchThat":{"localId":"76","locator":"53:19-53:126","type":"SameOrBefore","operand":[{"locator":"53:62-53:67","type":"Start","operand":{"localId":"72","locator":"53:19-53:60","path":"prevalencePeriod","scope":"AtrialFibrillationFlutter","type":"Property"}},{"localId":"75","locator":"53:82-53:126","type":"End","operand":{"localId":"74","locator":"53:89-53:126","path":"relevantPeriod","scope":"IschemicStrokeEncounter","type":"Property"}}]}}]},{"localId":"89","locator":"55:11-59:5","type":"Query","source":[{"localId":"80","locator":"55:13-55:67","alias":"IschemicStrokeEncounter","expression":{"localId":"79","locator":"55:13-55:43","name":"Ischemic Stroke Encounter","libraryName":"TJC","type":"ExpressionRef"}}],"relationship":[],"where":{"localId":"88","locator":"56:9-58:9","type":"Exists","operand":{"localId":"87","locator":"56:22-58:9","type":"Query","source":[{"localId":"82","locator":"56:24-56:66","alias":"Diagnosis","expression":{"localId":"81","locator":"56:24-56:56","path":"diagnoses","scope":"IschemicStrokeEncounter","type":"Property"}}],"relationship":[],"where":{"localId":"86","locator":"57:13-57:68","type":"InValueSet","code":{"localId":"84","locator":"57:19-57:32","path":"code","scope":"Diagnosis","type":"Property"},"valueset":{"localId":"85","locator":"57:37-57:68","name":"Atrial Fibrillation or Flutter","preserve":true}}}}}]}},{"localId":"94","locator":"26:1-28:87","name":"Denominator","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"94","s":[{"value":["","define ","\"Denominator\"",":\n  "]},{"r":"93","s":[{"r":"66","s":[{"value":["\"Encounter with a History of Atrial Ablation\""]}]},{"value":["\n    union "]},{"r":"92","s":[{"value":["\"Encounter with Prior or Present Diagnosis of Atrial Fibrillation or Flutter\""]}]}]}]}}],"expression":{"localId":"93","locator":"27:3-28:87","type":"Union","operand":[{"localId":"66","locator":"27:3-27:47","name":"Encounter with a History of Atrial Ablation","type":"ExpressionRef"},{"localId":"92","locator":"28:11-28:87","name":"Encounter with Prior or Present Diagnosis of Atrial Fibrillation or Flutter","type":"ExpressionRef"}]}},{"localId":"109","locator":"92:1-95:63","name":"Documented Reason for Not Giving Anticoagulant at Discharge","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"109","s":[{"value":["","define ","\"Documented Reason for Not Giving Anticoagulant at Discharge\"",":\n  "]},{"r":"108","s":[{"s":[{"r":"98","s":[{"r":"97","s":[{"r":"97","s":[{"value":["[","\"Medication, Not Discharged\"",": "]},{"s":[{"value":["\"Anticoagulant Therapy\""]}]},{"value":["]"]}]}]},{"value":[" ","NoAnticoagulant"]}]}]},{"value":["\n    "]},{"r":"107","s":[{"value":["where "]},{"r":"107","s":[{"r":"102","s":[{"r":"100","s":[{"r":"99","s":[{"value":["NoAnticoagulant"]}]},{"value":["."]},{"r":"100","s":[{"value":["negationRationale"]}]}]},{"value":[" in "]},{"r":"101","s":[{"value":["\"Medical Reason For Not Providing Treatment\""]}]}]},{"value":["\n      or "]},{"r":"106","s":[{"r":"104","s":[{"r":"103","s":[{"value":["NoAnticoagulant"]}]},{"value":["."]},{"r":"104","s":[{"value":["negationRationale"]}]}]},{"value":[" in "]},{"r":"105","s":[{"value":["\"Patient Refusal\""]}]}]}]}]}]}]}}],"expression":{"localId":"108","locator":"93:3-95:63","type":"Query","source":[{"localId":"98","locator":"93:3-93:73","alias":"NoAnticoagulant","expression":{"localId":"97","locator":"93:3-93:57","dataType":"{urn:healthit-gov:qdm:v5_6}NegativeMedicationDischarge","templateId":"NegativeMedicationDischarge","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"93:34-93:56","name":"Anticoagulant Therapy","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"107","locator":"94:5-95:63","type":"Or","operand":[{"localId":"102","locator":"94:11-94:91","type":"InValueSet","code":{"localId":"100","locator":"94:11-94:43","path":"negationRationale","scope":"NoAnticoagulant","type":"Property"},"valueset":{"localId":"101","locator":"94:48-94:91","name":"Medical Reason For Not Providing Treatment","preserve":true}},{"localId":"106","locator":"95:10-95:63","type":"InValueSet","code":{"localId":"104","locator":"95:10-95:42","path":"negationRationale","scope":"NoAnticoagulant","type":"Property"},"valueset":{"localId":"105","locator":"95:47-95:63","name":"Patient Refusal","preserve":true}}]}}},{"localId":"119","locator":"30:1-33:87","name":"Denominator Exceptions","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"119","s":[{"value":["","define ","\"Denominator Exceptions\"",":\n  "]},{"r":"118","s":[{"s":[{"r":"96","s":[{"r":"95","s":[{"s":[{"value":["\"Denominator\""]}]}]},{"value":[" ","Encounter"]}]}]},{"value":["\n    "]},{"r":"117","s":[{"value":["with "]},{"r":"111","s":[{"r":"110","s":[{"s":[{"value":["\"Documented Reason for Not Giving Anticoagulant at Discharge\""]}]}]},{"value":[" ","NoDischargeAnticoagulant"]}]},{"value":["\n      such that "]},{"r":"116","s":[{"r":"113","s":[{"r":"112","s":[{"value":["NoDischargeAnticoagulant"]}]},{"value":["."]},{"r":"113","s":[{"value":["authorDatetime"]}]}]},{"r":"116","value":[" ","during"," "]},{"r":"115","s":[{"r":"114","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"115","s":[{"value":["relevantPeriod"]}]}]}]}]}]}]}}],"expression":{"localId":"118","locator":"31:3-33:87","type":"Query","source":[{"localId":"96","locator":"31:3-31:25","alias":"Encounter","expression":{"localId":"95","locator":"31:3-31:15","name":"Denominator","type":"ExpressionRef"}}],"relationship":[{"localId":"117","locator":"32:5-33:87","alias":"NoDischargeAnticoagulant","type":"With","expression":{"localId":"110","locator":"32:10-32:70","name":"Documented Reason for Not Giving Anticoagulant at Discharge","type":"ExpressionRef"},"suchThat":{"localId":"116","locator":"33:17-33:87","type":"In","operand":[{"localId":"113","locator":"33:17-33:55","path":"authorDatetime","scope":"NoDischargeAnticoagulant","type":"Property"},{"localId":"115","locator":"33:64-33:87","path":"relevantPeriod","scope":"Encounter","type":"Property"}]}}]}},{"localId":"167","locator":"45:1-48:217","name":"Encounter with Comfort Measures during Hospitalization for Patients with Documented Atrial Fibrillation or Flutter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"167","s":[{"value":["","define ","\"Encounter with Comfort Measures during Hospitalization for Patients with Documented Atrial Fibrillation or Flutter\"",":\n  "]},{"r":"166","s":[{"s":[{"r":"148","s":[{"r":"147","s":[{"s":[{"value":["\"Denominator\""]}]}]},{"value":[" ","Encounter"]}]}]},{"value":["\n    "]},{"r":"165","s":[{"value":["with "]},{"r":"150","s":[{"r":"149","s":[{"s":[{"value":["TJC",".","\"Intervention Comfort Measures\""]}]}]},{"value":[" ","ComfortMeasure"]}]},{"value":["\n      such that "]},{"r":"164","s":[{"r":"160","s":[{"value":["Coalesce","("]},{"r":"157","s":[{"value":["start of "]},{"r":"156","s":[{"r":"151","s":[{"value":["Global"]}]},{"value":["."]},{"r":"156","s":[{"value":["\"NormalizeInterval\"","("]},{"r":"153","s":[{"r":"152","s":[{"value":["ComfortMeasure"]}]},{"value":["."]},{"r":"153","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"155","s":[{"r":"154","s":[{"value":["ComfortMeasure"]}]},{"value":["."]},{"r":"155","s":[{"value":["relevantPeriod"]}]}]},{"value":[")"]}]}]}]},{"value":[", "]},{"r":"159","s":[{"r":"158","s":[{"value":["ComfortMeasure"]}]},{"value":["."]},{"r":"159","s":[{"value":["authorDatetime"]}]}]},{"value":[")"]}]},{"r":"164","value":[" ","during"," "]},{"r":"163","s":[{"r":"161","s":[{"value":["Global"]}]},{"value":["."]},{"r":"163","s":[{"value":["\"HospitalizationWithObservation\""," ( "]},{"r":"162","s":[{"value":["Encounter"]}]},{"value":[" )"]}]}]}]}]}]}]}}],"expression":{"localId":"166","locator":"46:3-48:217","type":"Query","source":[{"localId":"148","locator":"46:3-46:25","alias":"Encounter","expression":{"localId":"147","locator":"46:3-46:15","name":"Denominator","type":"ExpressionRef"}}],"relationship":[{"localId":"165","locator":"47:5-48:217","alias":"ComfortMeasure","type":"With","expression":{"localId":"149","locator":"47:10-47:44","name":"Intervention Comfort Measures","libraryName":"TJC","type":"ExpressionRef"},"suchThat":{"localId":"164","locator":"48:17-48:217","type":"In","operand":[{"localId":"160","locator":"48:17-48:156","type":"Coalesce","operand":[{"localId":"157","locator":"48:26-48:124","type":"Start","operand":{"localId":"156","locator":"48:35-48:124","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"153","locator":"48:62-48:92","path":"relevantDatetime","scope":"ComfortMeasure","type":"Property"},{"localId":"155","locator":"48:95-48:123","path":"relevantPeriod","scope":"ComfortMeasure","type":"Property"}]}},{"localId":"159","locator":"48:127-48:155","path":"authorDatetime","scope":"ComfortMeasure","type":"Property"}]},{"localId":"163","locator":"48:165-48:217","name":"HospitalizationWithObservation","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"162","locator":"48:207-48:215","name":"Encounter","type":"AliasRef"}]}]}}]}},{"localId":"170","locator":"35:1-43:126","name":"Denominator Exclusions","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"170","s":[{"value":["","define ","\"Denominator Exclusions\"",":\n  "]},{"r":"169","s":[{"r":"146","s":[{"value":["( "]},{"r":"146","s":[{"s":[{"r":"121","s":[{"r":"120","s":[{"s":[{"value":["\"Denominator\""]}]}]},{"value":[" ","Encounter"]}]}]},{"value":["\n      "]},{"r":"145","s":[{"value":["where "]},{"r":"145","s":[{"r":"140","s":[{"r":"135","s":[{"r":"130","s":[{"r":"125","s":[{"r":"123","s":[{"r":"122","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"123","s":[{"value":["dischargeDisposition"]}]}]},{"value":[" in "]},{"r":"124","s":[{"value":["\"Discharge To Acute Care Facility\""]}]}]},{"value":["\n        or "]},{"r":"129","s":[{"r":"127","s":[{"r":"126","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"127","s":[{"value":["dischargeDisposition"]}]}]},{"value":[" in "]},{"r":"128","s":[{"value":["\"Left Against Medical Advice\""]}]}]}]},{"value":["\n        or "]},{"r":"134","s":[{"r":"132","s":[{"r":"131","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"132","s":[{"value":["dischargeDisposition"]}]}]},{"value":[" in "]},{"r":"133","s":[{"value":["\"Patient Expired\""]}]}]}]},{"value":["\n        or "]},{"r":"139","s":[{"r":"137","s":[{"r":"136","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"137","s":[{"value":["dischargeDisposition"]}]}]},{"value":[" in "]},{"r":"138","s":[{"value":["\"Discharged to Home for Hospice Care\""]}]}]}]},{"value":["\n        or "]},{"r":"144","s":[{"r":"142","s":[{"r":"141","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"142","s":[{"value":["dischargeDisposition"]}]}]},{"value":[" in "]},{"r":"143","s":[{"value":["\"Discharged to Health Care Facility for Hospice Care\""]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["\n    union "]},{"r":"168","s":[{"value":["\"Encounter with Comfort Measures during Hospitalization for Patients with Documented Atrial Fibrillation or Flutter\""]}]}]}]}}],"expression":{"localId":"169","locator":"36:3-43:126","type":"Union","operand":[{"localId":"146","locator":"36:3-42:3","type":"Query","source":[{"localId":"121","locator":"36:5-36:27","alias":"Encounter","expression":{"localId":"120","locator":"36:5-36:17","name":"Denominator","type":"ExpressionRef"}}],"relationship":[],"where":{"localId":"145","locator":"37:7-41:98","type":"Or","operand":[{"localId":"140","locator":"37:13-40:82","type":"Or","operand":[{"localId":"135","locator":"37:13-39:62","type":"Or","operand":[{"localId":"130","locator":"37:13-38:74","type":"Or","operand":[{"localId":"125","locator":"37:13-37:80","type":"InValueSet","code":{"localId":"123","locator":"37:13-37:42","path":"dischargeDisposition","scope":"Encounter","type":"Property"},"valueset":{"localId":"124","locator":"37:47-37:80","name":"Discharge To Acute Care Facility","preserve":true}},{"localId":"129","locator":"38:12-38:74","type":"InValueSet","code":{"localId":"127","locator":"38:12-38:41","path":"dischargeDisposition","scope":"Encounter","type":"Property"},"valueset":{"localId":"128","locator":"38:46-38:74","name":"Left Against Medical Advice","preserve":true}}]},{"localId":"134","locator":"39:12-39:62","type":"InValueSet","code":{"localId":"132","locator":"39:12-39:41","path":"dischargeDisposition","scope":"Encounter","type":"Property"},"valueset":{"localId":"133","locator":"39:46-39:62","name":"Patient Expired","preserve":true}}]},{"localId":"139","locator":"40:12-40:82","type":"InValueSet","code":{"localId":"137","locator":"40:12-40:41","path":"dischargeDisposition","scope":"Encounter","type":"Property"},"valueset":{"localId":"138","locator":"40:46-40:82","name":"Discharged to Home for Hospice Care","preserve":true}}]},{"localId":"144","locator":"41:12-41:98","type":"InValueSet","code":{"localId":"142","locator":"41:12-41:41","path":"dischargeDisposition","scope":"Encounter","type":"Property"},"valueset":{"localId":"143","locator":"41:46-41:98","name":"Discharged to Health Care Facility for Hospice Care","preserve":true}}]}},{"localId":"168","locator":"43:11-43:126","name":"Encounter with Comfort Measures during Hospitalization for Patients with Documented Atrial Fibrillation or Flutter","type":"ExpressionRef"}]}},{"localId":"182","locator":"61:1-64:85","name":"Numerator","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"182","s":[{"value":["","define ","\"Numerator\"",":\n  "]},{"r":"181","s":[{"s":[{"r":"172","s":[{"r":"171","s":[{"s":[{"value":["\"Denominator\""]}]}]},{"value":[" ","Encounter"]}]}]},{"value":["\n    "]},{"r":"180","s":[{"value":["with "]},{"r":"174","s":[{"r":"173","s":[{"r":"173","s":[{"value":["[","\"Medication, Discharge\"",": "]},{"s":[{"value":["\"Anticoagulant Therapy\""]}]},{"value":["]"]}]}]},{"value":[" ","DischargeAnticoagulant"]}]},{"value":["\n      such that "]},{"r":"179","s":[{"r":"176","s":[{"r":"175","s":[{"value":["DischargeAnticoagulant"]}]},{"value":["."]},{"r":"176","s":[{"value":["authorDatetime"]}]}]},{"r":"179","value":[" ","during"," "]},{"r":"178","s":[{"r":"177","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"178","s":[{"value":["relevantPeriod"]}]}]}]}]}]}]}}],"expression":{"localId":"181","locator":"62:3-64:85","type":"Query","source":[{"localId":"172","locator":"62:3-62:25","alias":"Encounter","expression":{"localId":"171","locator":"62:3-62:15","name":"Denominator","type":"ExpressionRef"}}],"relationship":[{"localId":"180","locator":"63:5-64:85","alias":"DischargeAnticoagulant","type":"With","expression":{"localId":"173","locator":"63:10-63:59","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationDischarge","templateId":"PositiveMedicationDischarge","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"63:36-63:58","name":"Anticoagulant Therapy","preserve":true,"type":"ValueSetRef"}},"suchThat":{"localId":"179","locator":"64:17-64:85","type":"In","operand":[{"localId":"176","locator":"64:17-64:53","path":"authorDatetime","scope":"DischargeAnticoagulant","type":"Property"},{"localId":"178","locator":"64:62-64:85","path":"relevantPeriod","scope":"Encounter","type":"Property"}]}}]}},{"localId":"184","locator":"66:1-67:51","name":"SDE Ethnicity","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"184","s":[{"value":["","define ","\"SDE Ethnicity\"",":\n  "]},{"r":"183","s":[{"value":["[","\"Patient Characteristic Ethnicity\"",": "]},{"s":[{"value":["\"Ethnicity\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"183","locator":"67:3-67:51","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicEthnicity","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"67:40-67:50","name":"Ethnicity","preserve":true,"type":"ValueSetRef"}}},{"localId":"186","locator":"69:1-70:48","name":"SDE Payer","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"186","s":[{"value":["","define ","\"SDE Payer\"",":\n  "]},{"r":"185","s":[{"value":["[","\"Patient Characteristic Payer\"",": "]},{"s":[{"value":["\"Payer Type\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"185","locator":"70:3-70:48","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicPayer","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"70:36-70:47","name":"Payer Type","preserve":true,"type":"ValueSetRef"}}},{"localId":"188","locator":"72:1-73:41","name":"SDE Race","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"188","s":[{"value":["","define ","\"SDE Race\"",":\n  "]},{"r":"187","s":[{"value":["[","\"Patient Characteristic Race\"",": "]},{"s":[{"value":["\"Race\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"187","locator":"73:3-73:41","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicRace","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"73:35-73:40","name":"Race","preserve":true,"type":"ValueSetRef"}}},{"localId":"190","locator":"75:1-76:58","name":"SDE Sex","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"190","s":[{"value":["","define ","\"SDE Sex\"",":\n  "]},{"r":"189","s":[{"value":["[","\"Patient Characteristic Sex\"",": "]},{"s":[{"value":["\"ONC Administrative Sex\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"189","locator":"76:3-76:58","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicSex","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"76:34-76:57","name":"ONC Administrative Sex","preserve":true,"type":"ValueSetRef"}}},{"localId":"193","locator":"97:1-98:33","name":"Initial Population","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"193","s":[{"value":["","define ","\"Initial Population\"",":\n  "]},{"r":"192","s":[{"r":"191","s":[{"value":["TJC"]}]},{"value":["."]},{"r":"192","s":[{"value":["\"Ischemic Stroke Encounter\""]}]}]}]}}],"expression":{"localId":"192","locator":"98:3-98:33","name":"Ischemic Stroke Encounter","libraryName":"TJC","type":"ExpressionRef"}}]}}},"elm_annotations":{"statements":[{"children":[{"children":[{"children":[{"text":"define \"Encounter with a History of Atrial Ablation\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"TJC.\"Ischemic Stroke Encounter\""}]}]}],"node_type":"ExpressionRef","ref_id":"19"},{"children":[{"text":" IschemicStrokeEncounter"}]}],"ref_id":"20"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"[\"Procedure, Performed\": "}]},{"children":[{"children":[{"text":"\"Atrial Ablation\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"21"}],"node_type":"Retrieve","ref_id":"21"},{"children":[{"text":" AtrialAblationProcedure"}]}],"ref_id":"22"},{"children":[{"text":"\n        such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"23"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\" ( "}]},{"children":[{"children":[{"children":[{"text":"AtrialAblationProcedure"}]}],"ref_id":"24"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"25"}],"node_type":"Property","ref_id":"25"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"AtrialAblationProcedure"}]}],"ref_id":"26"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"27"}],"node_type":"Property","ref_id":"27"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"28"}],"node_type":"FunctionRef","ref_id":"28"},{"children":[{"text":" starts before "}],"node_type":"Before","ref_id":"32"},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"IschemicStrokeEncounter"}]}],"ref_id":"29"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"30"}],"node_type":"Property","ref_id":"30"}],"node_type":"Start","ref_id":"31"}],"node_type":"Before","ref_id":"32"}],"ref_id":"33"}],"node_type":"Query","ref_id":"34"},{"children":[{"text":"\n  )"}]}],"node_type":"Query","ref_id":"34"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"TJC.\"Ischemic Stroke Encounter\""}]}]}],"node_type":"ExpressionRef","ref_id":"35"},{"children":[{"text":" IschemicStrokeEncounter"}]}],"ref_id":"36"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"[\"Diagnosis\": "}]},{"children":[{"children":[{"text":"\"History of Atrial Ablation\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"37"}],"node_type":"Retrieve","ref_id":"37"},{"children":[{"text":" AtrialAblationDiagnosis"}]}],"ref_id":"38"},{"children":[{"text":"\n          such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"AtrialAblationDiagnosis"}]}],"ref_id":"39"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"prevalencePeriod"}]}],"node_type":"Property","ref_id":"40"}],"node_type":"Property","ref_id":"40"},{"children":[{"text":" starts before "}],"node_type":"Before","ref_id":"44"},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"IschemicStrokeEncounter"}]}],"ref_id":"41"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"42"}],"node_type":"Property","ref_id":"42"}],"node_type":"Start","ref_id":"43"}],"node_type":"Before","ref_id":"44"}],"ref_id":"45"}],"node_type":"Query","ref_id":"46"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"46"}],"node_type":"Union","ref_id":"47"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"TJC.\"Ischemic Stroke Encounter\""}]}]}],"node_type":"ExpressionRef","ref_id":"48"},{"children":[{"text":" IschemicStrokeEncounter"}]}],"ref_id":"49"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"[\"Assessment, Performed\": "}]},{"children":[{"children":[{"text":"\"History of Atrial Ablation\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"50"}],"node_type":"Retrieve","ref_id":"50"},{"children":[{"text":" AtrialAblationAssessment"}]}],"ref_id":"51"},{"children":[{"text":"\n          such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"52"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"EarliestOf\" ( "}]},{"children":[{"children":[{"children":[{"text":"AtrialAblationAssessment"}]}],"ref_id":"53"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"54"}],"node_type":"Property","ref_id":"54"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"AtrialAblationAssessment"}]}],"ref_id":"55"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"56"}],"node_type":"Property","ref_id":"56"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"57"}],"node_type":"FunctionRef","ref_id":"57"},{"children":[{"text":" on or before "}],"node_type":"SameOrBefore","ref_id":"61"},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"IschemicStrokeEncounter"}]}],"ref_id":"58"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"59"}],"node_type":"Property","ref_id":"59"}],"node_type":"End","ref_id":"60"}],"node_type":"SameOrBefore","ref_id":"61"}],"ref_id":"62"}],"node_type":"Query","ref_id":"63"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"63"}],"node_type":"Union","ref_id":"64"}],"ref_id":"65"}],"define_name":"Encounter with a History of Atrial Ablation"},{"children":[{"children":[{"children":[{"text":"define \"Encounter with Prior or Present Diagnosis of Atrial Fibrillation or Flutter\":\n  "}]},{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"TJC.\"Ischemic Stroke Encounter\""}]}]}],"node_type":"ExpressionRef","ref_id":"67"},{"children":[{"text":" IschemicStrokeEncounter"}]}],"ref_id":"68"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"[\"Diagnosis\": "}]},{"children":[{"children":[{"text":"\"Atrial Fibrillation or Flutter\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"69"}],"node_type":"Retrieve","ref_id":"69"},{"children":[{"text":" AtrialFibrillationFlutter"}]}],"ref_id":"70"},{"children":[{"text":"\n        such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"AtrialFibrillationFlutter"}]}],"ref_id":"71"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"prevalencePeriod"}]}],"node_type":"Property","ref_id":"72"}],"node_type":"Property","ref_id":"72"},{"children":[{"text":" starts on or before "}],"node_type":"SameOrBefore","ref_id":"76"},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"IschemicStrokeEncounter"}]}],"ref_id":"73"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"74"}],"node_type":"Property","ref_id":"74"}],"node_type":"End","ref_id":"75"}],"node_type":"SameOrBefore","ref_id":"76"}],"ref_id":"77"}],"node_type":"Query","ref_id":"78"},{"children":[{"text":"\n  )"}]}],"node_type":"Query","ref_id":"78"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"TJC.\"Ischemic Stroke Encounter\""}]}]}],"node_type":"ExpressionRef","ref_id":"79"},{"children":[{"text":" IschemicStrokeEncounter"}]}],"ref_id":"80"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"IschemicStrokeEncounter.diagnoses"}]}]}],"node_type":"Property","ref_id":"81"},{"children":[{"text":" Diagnosis"}]}],"ref_id":"82"}]},{"children":[{"text":"\n            "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Diagnosis"}]}],"ref_id":"83"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"84"}],"ref_id":"84"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Atrial Fibrillation or Flutter\""}]}],"ref_id":"85"}],"ref_id":"86"}],"ref_id":"86"}],"node_type":"Query","ref_id":"87"},{"children":[{"text":"\n        )"}]}],"node_type":"Query","ref_id":"87"}],"ref_id":"88"}],"ref_id":"88"}],"node_type":"Query","ref_id":"89"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"89"}],"node_type":"Union","ref_id":"90"}],"ref_id":"91"}],"define_name":"Encounter with Prior or Present Diagnosis of Atrial Fibrillation or Flutter"},{"children":[{"children":[{"children":[{"text":"define \"Denominator\":\n  "}]},{"children":[{"children":[{"children":[{"text":"\"Encounter with a History of Atrial Ablation\""}]}],"node_type":"ExpressionRef","ref_id":"66"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"\"Encounter with Prior or Present Diagnosis of Atrial Fibrillation or Flutter\""}]}],"node_type":"ExpressionRef","ref_id":"92"}],"node_type":"Union","ref_id":"93"}],"ref_id":"94"}],"define_name":"Denominator"},{"children":[{"children":[{"children":[{"text":"define \"Documented Reason for Not Giving Anticoagulant at Discharge\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Medication, Not Discharged\": "}]},{"children":[{"children":[{"text":"\"Anticoagulant Therapy\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"97"}],"node_type":"Retrieve","ref_id":"97"},{"children":[{"text":" NoAnticoagulant"}]}],"ref_id":"98"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"NoAnticoagulant"}]}],"ref_id":"99"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"negationRationale"}]}],"ref_id":"100"}],"ref_id":"100"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Medical Reason For Not Providing Treatment\""}]}],"ref_id":"101"}],"node_type":"InValueSet","ref_id":"102"},{"children":[{"text":"\n      or "}]},{"children":[{"children":[{"children":[{"children":[{"text":"NoAnticoagulant"}]}],"ref_id":"103"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"negationRationale"}]}],"ref_id":"104"}],"ref_id":"104"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Patient Refusal\""}]}],"ref_id":"105"}],"node_type":"InValueSet","ref_id":"106"}],"ref_id":"107"}],"ref_id":"107"}],"node_type":"Query","ref_id":"108"}],"ref_id":"109"}],"define_name":"Documented Reason for Not Giving Anticoagulant at Discharge"},{"children":[{"children":[{"children":[{"text":"define \"Denominator Exceptions\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Denominator\""}]}]}],"node_type":"ExpressionRef","ref_id":"95"},{"children":[{"text":" Encounter"}]}],"ref_id":"96"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"Documented Reason for Not Giving Anticoagulant at Discharge\""}]}]}],"node_type":"ExpressionRef","ref_id":"110"},{"children":[{"text":" NoDischargeAnticoagulant"}]}],"ref_id":"111"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"NoDischargeAnticoagulant"}]}],"ref_id":"112"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"113"}],"node_type":"Property","ref_id":"113"},{"children":[{"text":" during "}],"node_type":"In","ref_id":"116"},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"114"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"115"}],"node_type":"Property","ref_id":"115"}],"node_type":"In","ref_id":"116"}],"ref_id":"117"}],"node_type":"Query","ref_id":"118"}],"ref_id":"119"}],"define_name":"Denominator Exceptions"},{"children":[{"children":[{"children":[{"text":"define \"Encounter with Comfort Measures during Hospitalization for Patients with Documented Atrial Fibrillation or Flutter\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Denominator\""}]}]}],"node_type":"ExpressionRef","ref_id":"147"},{"children":[{"text":" Encounter"}]}],"ref_id":"148"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"TJC.\"Intervention Comfort Measures\""}]}]}],"node_type":"ExpressionRef","ref_id":"149"},{"children":[{"text":" ComfortMeasure"}]}],"ref_id":"150"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"151"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\"("}]},{"children":[{"children":[{"children":[{"text":"ComfortMeasure"}]}],"ref_id":"152"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"153"}],"node_type":"Property","ref_id":"153"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"ComfortMeasure"}]}],"ref_id":"154"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"155"}],"node_type":"Property","ref_id":"155"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"156"}],"node_type":"FunctionRef","ref_id":"156"}],"node_type":"Start","ref_id":"157"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"ComfortMeasure"}]}],"ref_id":"158"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"159"}],"node_type":"Property","ref_id":"159"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"160"},{"children":[{"text":" during "}],"node_type":"In","ref_id":"164"},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"161"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"HospitalizationWithObservation\" ( "}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"AliasRef","ref_id":"162"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"163"}],"node_type":"FunctionRef","ref_id":"163"}],"node_type":"In","ref_id":"164"}],"ref_id":"165"}],"node_type":"Query","ref_id":"166"}],"ref_id":"167"}],"define_name":"Encounter with Comfort Measures during Hospitalization for Patients with Documented Atrial Fibrillation or Flutter"},{"children":[{"children":[{"children":[{"text":"define \"Denominator Exclusions\":\n  "}]},{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Denominator\""}]}]}],"node_type":"ExpressionRef","ref_id":"120"},{"children":[{"text":" Encounter"}]}],"ref_id":"121"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"122"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"dischargeDisposition"}]}],"ref_id":"123"}],"ref_id":"123"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Discharge To Acute Care Facility\""}]}],"ref_id":"124"}],"node_type":"InValueSet","ref_id":"125"},{"children":[{"text":"\n        or "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"126"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"dischargeDisposition"}]}],"ref_id":"127"}],"ref_id":"127"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Left Against Medical Advice\""}]}],"ref_id":"128"}],"node_type":"InValueSet","ref_id":"129"}],"node_type":"Or","ref_id":"130"},{"children":[{"text":"\n        or "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"131"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"dischargeDisposition"}]}],"ref_id":"132"}],"ref_id":"132"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Patient Expired\""}]}],"ref_id":"133"}],"node_type":"InValueSet","ref_id":"134"}],"node_type":"Or","ref_id":"135"},{"children":[{"text":"\n        or "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"136"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"dischargeDisposition"}]}],"ref_id":"137"}],"ref_id":"137"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Discharged to Home for Hospice Care\""}]}],"ref_id":"138"}],"node_type":"InValueSet","ref_id":"139"}],"node_type":"Or","ref_id":"140"},{"children":[{"text":"\n        or "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"141"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"dischargeDisposition"}]}],"ref_id":"142"}],"ref_id":"142"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Discharged to Health Care Facility for Hospice Care\""}]}],"ref_id":"143"}],"node_type":"InValueSet","ref_id":"144"}],"ref_id":"145"}],"ref_id":"145"}],"node_type":"Query","ref_id":"146"},{"children":[{"text":"\n  )"}]}],"node_type":"Query","ref_id":"146"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"\"Encounter with Comfort Measures during Hospitalization for Patients with Documented Atrial Fibrillation or Flutter\""}]}],"node_type":"ExpressionRef","ref_id":"168"}],"node_type":"Union","ref_id":"169"}],"ref_id":"170"}],"define_name":"Denominator Exclusions"},{"children":[{"children":[{"children":[{"text":"define \"Numerator\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Denominator\""}]}]}],"node_type":"ExpressionRef","ref_id":"171"},{"children":[{"text":" Encounter"}]}],"ref_id":"172"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"[\"Medication, Discharge\": "}]},{"children":[{"children":[{"text":"\"Anticoagulant Therapy\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"173"}],"node_type":"Retrieve","ref_id":"173"},{"children":[{"text":" DischargeAnticoagulant"}]}],"ref_id":"174"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"DischargeAnticoagulant"}]}],"ref_id":"175"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"176"}],"node_type":"Property","ref_id":"176"},{"children":[{"text":" during "}],"node_type":"In","ref_id":"179"},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"177"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"178"}],"node_type":"Property","ref_id":"178"}],"node_type":"In","ref_id":"179"}],"ref_id":"180"}],"node_type":"Query","ref_id":"181"}],"ref_id":"182"}],"define_name":"Numerator"},{"children":[{"children":[{"children":[{"text":"define \"SDE Ethnicity\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Ethnicity\": "}]},{"children":[{"children":[{"text":"\"Ethnicity\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"183"}],"ref_id":"184"}],"define_name":"SDE Ethnicity"},{"children":[{"children":[{"children":[{"text":"define \"SDE Payer\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Payer\": "}]},{"children":[{"children":[{"text":"\"Payer Type\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"185"}],"ref_id":"186"}],"define_name":"SDE Payer"},{"children":[{"children":[{"children":[{"text":"define \"SDE Race\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Race\": "}]},{"children":[{"children":[{"text":"\"Race\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"187"}],"ref_id":"188"}],"define_name":"SDE Race"},{"children":[{"children":[{"children":[{"text":"define \"SDE Sex\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Sex\": "}]},{"children":[{"children":[{"text":"\"ONC Administrative Sex\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"189"}],"ref_id":"190"}],"define_name":"SDE Sex"},{"children":[{"children":[{"children":[{"text":"define \"Initial Population\":\n  "}]},{"children":[{"children":[{"children":[{"text":"TJC"}]}],"ref_id":"191"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"Ischemic Stroke Encounter\""}]}],"node_type":"ExpressionRef","ref_id":"192"}],"node_type":"ExpressionRef","ref_id":"192"}],"ref_id":"193"}],"define_name":"Initial Population"}],"identifier":{"id":"AnticoagulationTherapyforAtrialFibrillationFlutter","version":"14.0.000"}},"is_main_library":true,"is_top_level":true,"library_name":"AnticoagulationTherapyforAtrialFibrillationFlutter","library_version":"14.0.000","statement_dependencies":[{"_id":"68923f89a83e15671c2e4c88","statement_name":"Patient"},{"_id":"68923f89a83e15671c2e4c89","statement_name":"Encounter with a History of Atrial Ablation","statement_references":[{"_id":"68923f89a83e15671c2e4c7b","hqmf_id":null,"library_name":"TJCOverallQDM","statement_name":"Ischemic Stroke Encounter"},{"_id":"68923f89a83e15671c2e4c7c","hqmf_id":null,"library_name":"MATGlobalCommonFunctionsQDM","statement_name":"NormalizeInterval"},{"_id":"68923f89a83e15671c2e4c7d","hqmf_id":null,"library_name":"MATGlobalCommonFunctionsQDM","statement_name":"EarliestOf"}]},{"_id":"68923f89a83e15671c2e4c8a","statement_name":"Encounter with Prior or Present Diagnosis of Atrial Fibrillation or Flutter","statement_references":[{"_id":"68923f90a83e15671c2e4e8c","hqmf_id":null,"library_name":"TJCOverallQDM","statement_name":"Ischemic Stroke Encounter"}]},{"_id":"68923f89a83e15671c2e4c8b","statement_name":"Denominator","statement_references":[{"_id":"68923f89a83e15671c2e4c7e","hqmf_id":null,"library_name":"AnticoagulationTherapyforAtrialFibrillationFlutter","statement_name":"Encounter with a History of Atrial Ablation"},{"_id":"68923f89a83e15671c2e4c7f","hqmf_id":null,"library_name":"AnticoagulationTherapyforAtrialFibrillationFlutter","statement_name":"Encounter with Prior or Present Diagnosis of Atrial Fibrillation or Flutter"}]},{"_id":"68923f89a83e15671c2e4c8c","statement_name":"Documented Reason for Not Giving Anticoagulant at Discharge"},{"_id":"68923f89a83e15671c2e4c8d","statement_name":"Denominator Exceptions","statement_references":[{"_id":"68923f89a83e15671c2e4c80","hqmf_id":null,"library_name":"AnticoagulationTherapyforAtrialFibrillationFlutter","statement_name":"Denominator"},{"_id":"68923f89a83e15671c2e4c81","hqmf_id":null,"library_name":"AnticoagulationTherapyforAtrialFibrillationFlutter","statement_name":"Documented Reason for Not Giving Anticoagulant at Discharge"}]},{"_id":"68923f89a83e15671c2e4c8e","statement_name":"Encounter with Comfort Measures during Hospitalization for Patients with Documented Atrial Fibrillation or Flutter","statement_references":[{"_id":"68923f89a83e15671c2e4c82","hqmf_id":null,"library_name":"AnticoagulationTherapyforAtrialFibrillationFlutter","statement_name":"Denominator"},{"_id":"68923f89a83e15671c2e4c83","hqmf_id":null,"library_name":"TJCOverallQDM","statement_name":"Intervention Comfort Measures"},{"_id":"68923f89a83e15671c2e4c84","hqmf_id":null,"library_name":"MATGlobalCommonFunctionsQDM","statement_name":"NormalizeInterval"},{"_id":"68923f89a83e15671c2e4c85","hqmf_id":null,"library_name":"MATGlobalCommonFunctionsQDM","statement_name":"HospitalizationWithObservation"}]},{"_id":"68923f89a83e15671c2e4c8f","statement_name":"Denominator Exclusions","statement_references":[{"_id":"68923f89a83e15671c2e4c86","hqmf_id":null,"library_name":"AnticoagulationTherapyforAtrialFibrillationFlutter","statement_name":"Denominator"},{"_id":"68923f89a83e15671c2e4c87","hqmf_id":null,"library_name":"AnticoagulationTherapyforAtrialFibrillationFlutter","statement_name":"Encounter with Comfort Measures during Hospitalization for Patients with Documented Atrial Fibrillation or Flutter"}]},{"_id":"68923f89a83e15671c2e4c90","statement_name":"Numerator","statement_references":[{"_id":"68923f90a83e15671c2e4e8d","hqmf_id":null,"library_name":"AnticoagulationTherapyforAtrialFibrillationFlutter","statement_name":"Denominator"}]},{"_id":"68923f89a83e15671c2e4c91","statement_name":"SDE Ethnicity"},{"_id":"68923f89a83e15671c2e4c92","statement_name":"SDE Payer"},{"_id":"68923f89a83e15671c2e4c93","statement_name":"SDE Race"},{"_id":"68923f89a83e15671c2e4c94","statement_name":"SDE Sex"},{"_id":"68923f89a83e15671c2e4c95","statement_name":"Initial Population","statement_references":[{"_id":"68923f90a83e15671c2e4e8e","hqmf_id":null,"library_name":"TJCOverallQDM","statement_name":"Ischemic Stroke Encounter"}]}]},{"_id":"68923f89a83e15671c2e4ca2","cql":"library MATGlobalCommonFunctionsQDM version '8.0.000'\n\n/*1. Upversion to 8.0.000 to support 2024 AU efforts.  No content changes were made from version 7.2.000 to this version 8.0.000*/\n\nusing QDM version '5.6'\n\nvalueset \"Emergency Department Visit\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.292' \nvalueset \"Encounter Inpatient\": 'urn:oid:2.16.840.1.113883.3.666.5.307' \nvalueset \"Intensive Care Unit\": 'urn:oid:2.16.840.1.113762.1.4.1029.206' \nvalueset \"Observation Services\": 'urn:oid:2.16.840.1.113762.1.4.1111.143' \nvalueset \"Outpatient Surgery Service\": 'urn:oid:2.16.840.1.113762.1.4.1110.38' \n\nparameter \"Measurement Period\" Interval\u003cDateTime\u003e\n\ncontext Patient\n\ndefine \"ED Encounter\":\n  [\"Encounter, Performed\": \"Emergency Department Visit\"]\n\ndefine \"Inpatient Encounter\":\n  [\"Encounter, Performed\": \"Encounter Inpatient\"] EncounterInpatient\n    where EncounterInpatient.relevantPeriod ends during day of \"Measurement Period\"\n\n/*@description: Returns an interval of date values extracted from the input interval of date-time values\n@comment: This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability.*/\ndefine function \"ToDateInterval\"(period Interval\u003cDateTime\u003e ):\n  Interval[date from start of period, date from end of period]\n\n/*calculates the difference in calendar days between the start and end of the given interval.*/\ndefine function \"LengthInDays\"(Value Interval\u003cDateTime\u003e ):\n  difference in days between start of Value and end of Value\n\n/*returns list of all locations within an encounter, including locations for immediately prior ED visit.*/\ndefine function \"HospitalizationLocations\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet EDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn if EDVisit is null then Visit.facilityLocations \n  \t\telse flatten { EDVisit.facilityLocations, Visit.facilityLocations }\n\n/*Returns the arrival time in the ED for the encounter.*/\ndefine function \"EmergencyDepartmentArrivalTime\"(Encounter \"Encounter, Performed\" ):\n  start of First((\"HospitalizationLocations\"(Encounter))HospitalLocation\n  \t\twhere HospitalLocation.code in \"Emergency Department Visit\"\n  \t\tsort by start of locationPeriod\n  ).locationPeriod\n\n/*Returns admission time for an encounter or for immediately prior emergency department visit.*/\ndefine function \"HospitalAdmissionTime\"(Encounter \"Encounter, Performed\" ):\n  start of \"Hospitalization\"(Encounter)\n\n/*Returns earliest arrival time for an encounter including any prior ED visit.*/\ndefine function \"HospitalArrivalTime\"(Encounter \"Encounter, Performed\" ):\n  start of First((\"HospitalizationLocations\"(Encounter))HospitalLocation\n  \t\tsort by start of locationPeriod\n  ).locationPeriod\n\n/*Hospitalization returns the total interval for admission to discharge for the given encounter, or for the admission of any immediately prior emergency department visit to the discharge of the given encounter.*/\ndefine function \"Hospitalization\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet EDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn Interval[Coalesce(start of EDVisit.relevantPeriod, start of Visit.relevantPeriod), \n  \tend of Visit.relevantPeriod]\n\n/*Returns the length of stay in days (i.e. the number of days between admission and discharge) for the given encounter, or from the admission of any immediately prior emergency department visit to the discharge of the encounter*/\ndefine function \"HospitalizationLengthofStay\"(Encounter \"Encounter, Performed\" ):\n  LengthInDays(\"Hospitalization\"(Encounter))\n\n/*Returns the latest departure time for encounter including any prior ED visit.*/\ndefine function \"HospitalDepartureTime\"(Encounter \"Encounter, Performed\" ):\n  end of Last((\"HospitalizationLocations\"(Encounter))HospitalLocation\n  \t\tsort by start of locationPeriod\n  ).locationPeriod\n\n/*Hospital Discharge Time returns the discharge time for an encounter*/\ndefine function \"HospitalDischargeTime\"(Encounter \"Encounter, Performed\" ):\n  end of Encounter.relevantPeriod\n\n/*Hospitalization with Observation and Outpatient Surgery Service returns the total interval from the start of any immediately prior emergency department visit, outpatient surgery visit or observation visit to the discharge of the given encounter.*/\ndefine function \"HospitalizationWithObservationAndOutpatientSurgeryService\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet ObsVisit: Last([\"Encounter, Performed\": \"Observation Services\"] LastObs\n  \t\t\twhere LastObs.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t),\n  \tVisitStart: Coalesce(start of ObsVisit.relevantPeriod, start of Visit.relevantPeriod),\n  \tEDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before VisitStart\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t),\n  \tVisitStartWithED: Coalesce(start of EDVisit.relevantPeriod, VisitStart),\n  \tOutpatientSurgeryVisit: Last([\"Encounter, Performed\": \"Outpatient Surgery Service\"] LastSurgeryOP\n  \t\t\twhere LastSurgeryOP.relevantPeriod ends 1 hour or less on or before VisitStartWithED\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn Interval[Coalesce(start of OutpatientSurgeryVisit.relevantPeriod, VisitStartWithED), \n  \tend of Visit.relevantPeriod]\n\n/*Hospitalization with Observation returns the total interval from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\ndefine function \"HospitalizationWithObservation\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet ObsVisit: Last([\"Encounter, Performed\": \"Observation Services\"] LastObs\n  \t\t\twhere LastObs.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t),\n  \tVisitStart: Coalesce(start of ObsVisit.relevantPeriod, start of Visit.relevantPeriod),\n  \tEDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before VisitStart\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn Interval[Coalesce(start of EDVisit.relevantPeriod, VisitStart), \n  \tend of Visit.relevantPeriod]\n\n/*Hospitalization with Observation Length of Stay returns the length in days from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\ndefine function \"HospitalizationWithObservationLengthofStay\"(Encounter \"Encounter, Performed\" ):\n  \"LengthInDays\"(\"HospitalizationWithObservation\"(Encounter))\n\n/*First Inpatient Intensive Care Unit returns the first intensive care unit for the given encounter, without considering any immediately prior emergency department visit.*/\ndefine function \"FirstInpatientIntensiveCareUnit\"(Encounter \"Encounter, Performed\" ):\n  First((Encounter.facilityLocations)HospitalLocation\n      where HospitalLocation.code in \"Intensive Care Unit\"\n        and HospitalLocation.locationPeriod during Encounter.relevantPeriod\n      sort by start of locationPeriod\n  )\n\n/*Given a datetime and a period, returns the period (if a period is provided) or the interval beginning and ending on the datetime (if a datetime is provided)*/\ndefine function \"NormalizeInterval\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  if pointInTime is not null then Interval[pointInTime, pointInTime]\n    else if period is not null then period \n    else null as Interval\u003cDateTime\u003e\n\n/*Given an interval, return true if the interval has a starting boundary specified (i.e. the start of the interval is not null and not the minimum DateTime value)*/\ndefine function \"HasStart\"(period Interval\u003cDateTime\u003e ):\n  not ( start of period is null\n      or start of period = minimum DateTime\n  )\n\n/*Given an interval, return true if the interval has an ending boundary specified (i.e. the end of the interval is not null and not the maximum DateTime value)*/\ndefine function \"HasEnd\"(period Interval\u003cDateTime\u003e ):\n  not ( \n    end of period is null\n      or \n      end of period = maximum DateTime\n  )\n\n/*Given an interval, return the ending point if the interval has an ending boundary specified, otherwise, return the starting point*/\ndefine function \"Latest\"(period Interval\u003cDateTime\u003e ):\n  if ( HasEnd(period)) then \n  end of period \n    else start of period\n\n/*Given an interval, return the starting point if the interval has a starting boundary specified, otherwise, return the ending point*/\ndefine function \"Earliest\"(period Interval\u003cDateTime\u003e ):\n  if ( HasStart(period)) then start of period \n    else \n  end of period\n\n/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the ending point of the period if the period has an ending boundary specified, otherwise returns the starting point of the interval*/\ndefine function \"LatestOf\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  Latest(NormalizeInterval(pointInTime, period))\n\n/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the starting point of the period if the period has a starting boundary specified, otherwise returns the ending point of the period*/\ndefine function \"EarliestOf\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  Earliest(NormalizeInterval(pointInTime, period))\n\n","elm":{"library":{"annotation":[{"translatorOptions":"EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion,DisableMethodInvocation","type":"CqlToElmInfo"},{"type":"Annotation","s":{"r":"395","s":[{"value":["","library MATGlobalCommonFunctionsQDM version '8.0.000'"]}]}}],"identifier":{"id":"MATGlobalCommonFunctionsQDM","version":"8.0.000"},"schemaIdentifier":{"id":"urn:hl7-org:elm","version":"r1"},"usings":{"def":[{"localIdentifier":"System","uri":"urn:hl7-org:elm-types:r1"},{"localId":"1","locator":"5:1-5:23","localIdentifier":"QDM","uri":"urn:healthit-gov:qdm:v5_6","version":"5.6","annotation":[{"type":"Annotation","s":{"r":"1","s":[{"value":["/*1. Upversion to 8.0.000 to support 2024 AU efforts.  No content changes were made from version 7.2.000 to this version 8.0.000*/\n","using "]},{"s":[{"value":["QDM"]}]},{"value":[" version ","'5.6'"]}]}}]}]},"parameters":{"def":[{"localId":"9","locator":"13:1-13:49","name":"Measurement Period","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"9","s":[{"value":["","parameter ","\"Measurement Period\""," "]},{"r":"8","s":[{"value":["Interval\u003c"]},{"r":"7","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}}],"parameterTypeSpecifier":{"localId":"8","locator":"13:32-13:49","type":"IntervalTypeSpecifier","pointType":{"localId":"7","locator":"13:41-13:48","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},"valueSets":{"def":[{"localId":"2","locator":"7:1-7:82","name":"Emergency Department Visit","id":"2.16.840.1.113883.3.117.1.7.1.292","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"2","s":[{"value":["","valueset ","\"Emergency Department Visit\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.292'"]}]}}]},{"localId":"3","locator":"8:1-8:71","name":"Encounter Inpatient","id":"2.16.840.1.113883.3.666.5.307","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"3","s":[{"value":["","valueset ","\"Encounter Inpatient\"",": ","'urn:oid:2.16.840.1.113883.3.666.5.307'"]}]}}]},{"localId":"4","locator":"9:1-9:72","name":"Intensive Care Unit","id":"2.16.840.1.113762.1.4.1029.206","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"4","s":[{"value":["","valueset ","\"Intensive Care Unit\"",": ","'urn:oid:2.16.840.1.113762.1.4.1029.206'"]}]}}]},{"localId":"5","locator":"10:1-10:73","name":"Observation Services","id":"2.16.840.1.113762.1.4.1111.143","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"5","s":[{"value":["","valueset ","\"Observation Services\"",": ","'urn:oid:2.16.840.1.113762.1.4.1111.143'"]}]}}]},{"localId":"6","locator":"11:1-11:78","name":"Outpatient Surgery Service","id":"2.16.840.1.113762.1.4.1110.38","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"6","s":[{"value":["","valueset ","\"Outpatient Surgery Service\"",": ","'urn:oid:2.16.840.1.113762.1.4.1110.38'"]}]}}]}]},"contexts":{"def":[{"locator":"15:1-15:15","name":"Patient"}]},"statements":{"def":[{"locator":"15:1-15:15","name":"Patient","context":"Patient","expression":{"type":"SingletonFrom","operand":{"locator":"15:1-15:15","dataType":"{urn:healthit-gov:qdm:v5_6}Patient","templateId":"Patient","type":"Retrieve"}}},{"localId":"11","locator":"17:1-18:56","name":"ED Encounter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"11","s":[{"value":["","define ","\"ED Encounter\"",":\n  "]},{"r":"10","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"10","locator":"18:3-18:56","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"18:28-18:55","name":"Emergency Department Visit","preserve":true,"type":"ValueSetRef"}}},{"localId":"19","locator":"20:1-22:83","name":"Inpatient Encounter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"19","s":[{"value":["","define ","\"Inpatient Encounter\"",":\n  "]},{"r":"18","s":[{"s":[{"r":"13","s":[{"r":"12","s":[{"r":"12","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Encounter Inpatient\""]}]},{"value":["]"]}]}]},{"value":[" ","EncounterInpatient"]}]}]},{"value":["\n    "]},{"r":"17","s":[{"value":["where "]},{"r":"17","s":[{"r":"15","s":[{"r":"14","s":[{"value":["EncounterInpatient"]}]},{"value":["."]},{"r":"15","s":[{"value":["relevantPeriod"]}]}]},{"r":"17","value":[" ","ends during day of"," "]},{"r":"16","s":[{"value":["\"Measurement Period\""]}]}]}]}]}]}}],"expression":{"localId":"18","locator":"21:3-22:83","type":"Query","source":[{"localId":"13","locator":"21:3-21:68","alias":"EncounterInpatient","expression":{"localId":"12","locator":"21:3-21:49","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"21:28-21:48","name":"Encounter Inpatient","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"17","locator":"22:5-22:83","precision":"Day","type":"In","operand":[{"locator":"22:45-22:48","type":"End","operand":{"localId":"15","locator":"22:11-22:43","path":"relevantPeriod","scope":"EncounterInpatient","type":"Property"}},{"localId":"16","locator":"22:64-22:83","name":"Measurement Period","type":"ParameterRef"}]}}},{"localId":"29","locator":"29:1-30:62","name":"ToDateInterval","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","t":[{"name":"description","value":"Returns an interval of date values extracted from the input interval of date-time values"},{"name":"description","value":"Returns an interval of date values extracted from the input interval of date-time values"},{"name":"comment","value":"This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability."}],"s":{"r":"29","s":[{"value":["/*@description: Returns an interval of date values extracted from the input interval of date-time values\n@comment: This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability.*/\n","define function ","\"ToDateInterval\"","(","period"," "]},{"r":"21","s":[{"value":["Interval\u003c"]},{"r":"20","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"28","s":[{"r":"28","s":[{"value":["Interval["]},{"r":"24","s":[{"value":["date from "]},{"r":"23","s":[{"value":["start of "]},{"r":"22","s":[{"value":["period"]}]}]}]},{"value":[", "]},{"r":"27","s":[{"value":["date from "]},{"r":"26","s":[{"value":["end of "]},{"r":"25","s":[{"value":["period"]}]}]}]},{"value":["]"]}]}]}]}}],"expression":{"localId":"28","locator":"30:3-30:62","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"24","locator":"30:12-30:36","type":"DateFrom","operand":{"localId":"23","locator":"30:22-30:36","type":"Start","operand":{"localId":"22","locator":"30:31-30:36","name":"period","type":"OperandRef"}}},"high":{"localId":"27","locator":"30:39-30:61","type":"DateFrom","operand":{"localId":"26","locator":"30:49-30:61","type":"End","operand":{"localId":"25","locator":"30:56-30:61","name":"period","type":"OperandRef"}}}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"21","locator":"29:41-29:58","type":"IntervalTypeSpecifier","pointType":{"localId":"20","locator":"29:50-29:57","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"37","locator":"33:1-34:60","name":"LengthInDays","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"37","s":[{"value":["/*calculates the difference in calendar days between the start and end of the given interval.*/\n","define function ","\"LengthInDays\"","(","Value"," "]},{"r":"31","s":[{"value":["Interval\u003c"]},{"r":"30","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"36","s":[{"r":"36","s":[{"value":["difference in days between "]},{"r":"33","s":[{"value":["start of "]},{"r":"32","s":[{"value":["Value"]}]}]},{"value":[" and "]},{"r":"35","s":[{"value":["end of "]},{"r":"34","s":[{"value":["Value"]}]}]}]}]}]}}],"expression":{"localId":"36","locator":"34:3-34:60","precision":"Day","type":"DifferenceBetween","operand":[{"localId":"33","locator":"34:30-34:43","type":"Start","operand":{"localId":"32","locator":"34:39-34:43","name":"Value","type":"OperandRef"}},{"localId":"35","locator":"34:49-34:60","type":"End","operand":{"localId":"34","locator":"34:56-34:60","name":"Value","type":"OperandRef"}}]},"operand":[{"name":"Value","operandTypeSpecifier":{"localId":"31","locator":"33:38-33:55","type":"IntervalTypeSpecifier","pointType":{"localId":"30","locator":"33:47-33:54","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"70","locator":"37:1-45:71","name":"HospitalizationLocations","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"70","s":[{"value":["/*returns list of all locations within an encounter, including locations for immediately prior ED visit.*/\n","define function ","\"HospitalizationLocations\"","(","Encounter"," "]},{"r":"38","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"69","s":[{"r":"69","s":[{"s":[{"r":"40","s":[{"r":"39","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"56","s":[{"value":["EDVisit",": "]},{"r":"55","s":[{"value":["Last","("]},{"r":"54","s":[{"s":[{"r":"42","s":[{"r":"41","s":[{"r":"41","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"49","s":[{"value":["where "]},{"r":"49","s":[{"r":"44","s":[{"r":"43","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"44","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"49","s":[{"value":["ends "]},{"r":"48","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"47","s":[{"value":["start of "]},{"r":"46","s":[{"r":"45","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"46","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"53","s":[{"value":["sort by \n  \t\t\t"]},{"r":"52","s":[{"r":"51","s":[{"value":["end of "]},{"r":"50","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"68","s":[{"value":["return "]},{"r":"67","s":[{"value":["if "]},{"r":"58","s":[{"r":"57","s":[{"value":["EDVisit"]}]},{"value":[" is null"]}]},{"value":[" then "]},{"r":"60","s":[{"r":"59","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"60","s":[{"value":["facilityLocations"]}]}]},{"value":[" \n  \t\telse "]},{"r":"66","s":[{"value":["flatten "]},{"r":"65","s":[{"value":["{ "]},{"r":"62","s":[{"r":"61","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"62","s":[{"value":["facilityLocations"]}]}]},{"value":[", "]},{"r":"64","s":[{"r":"63","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"64","s":[{"value":["facilityLocations"]}]}]},{"value":[" }"]}]}]}]}]}]}]}]}}],"expression":{"localId":"69","locator":"38:3-45:71","type":"Query","source":[{"localId":"40","locator":"38:3-38:17","alias":"Visit","expression":{"localId":"39","locator":"38:3-38:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"56","locator":"39:8-43:4","identifier":"EDVisit","expression":{"localId":"55","locator":"39:17-43:4","type":"Last","source":{"localId":"54","locator":"39:22-42:26","type":"Query","source":[{"localId":"42","locator":"39:22-39:82","alias":"LastED","expression":{"localId":"41","locator":"39:22-39:75","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"39:47-39:74","name":"Emergency Department Visit","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"49","locator":"40:6-40:95","type":"And","operand":[{"locator":"40:39-40:52","type":"In","operand":[{"locator":"40:34-40:37","type":"End","operand":{"localId":"44","locator":"40:12-40:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"40:39-40:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"40:67-40:95","type":"Subtract","operand":[{"localId":"47","locator":"40:67-40:95","type":"Start","operand":{"localId":"46","locator":"40:76-40:95","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"48","locator":"40:39-40:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"47","locator":"40:67-40:95","type":"Start","operand":{"localId":"46","locator":"40:76-40:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"40:39-40:52","type":"Not","operand":{"locator":"40:39-40:52","type":"IsNull","operand":{"localId":"47","locator":"40:67-40:95","type":"Start","operand":{"localId":"46","locator":"40:76-40:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"53","locator":"41:6-42:26","by":[{"localId":"52","locator":"42:6-42:26","direction":"asc","type":"ByExpression","expression":{"localId":"51","locator":"42:6-42:26","type":"End","operand":{"localId":"50","locator":"42:13-42:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"68","locator":"44:4-45:71","expression":{"localId":"67","locator":"44:11-45:71","type":"If","condition":{"localId":"58","locator":"44:14-44:28","type":"IsNull","operand":{"localId":"57","locator":"44:14-44:20","name":"EDVisit","type":"QueryLetRef"}},"then":{"localId":"60","locator":"44:35-44:57","path":"facilityLocations","scope":"Visit","type":"Property"},"else":{"localId":"66","locator":"45:10-45:71","type":"Flatten","operand":{"localId":"65","locator":"45:18-45:71","type":"List","element":[{"localId":"62","locator":"45:20-45:44","path":"facilityLocations","type":"Property","source":{"localId":"61","locator":"45:20-45:26","name":"EDVisit","type":"QueryLetRef"}},{"localId":"64","locator":"45:47-45:69","path":"facilityLocations","scope":"Visit","type":"Property"}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"38","locator":"37:54-37:75","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"87","locator":"48:1-52:18","name":"EmergencyDepartmentArrivalTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"87","s":[{"value":["/*Returns the arrival time in the ED for the encounter.*/\n","define function ","\"EmergencyDepartmentArrivalTime\"","(","Encounter"," "]},{"r":"71","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"86","s":[{"r":"86","s":[{"value":["start of "]},{"r":"85","s":[{"r":"84","s":[{"value":["First","("]},{"r":"83","s":[{"s":[{"r":"74","s":[{"r":"73","s":[{"value":["("]},{"r":"73","s":[{"value":["\"HospitalizationLocations\"","("]},{"r":"72","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n  \t\t"]},{"r":"78","s":[{"value":["where "]},{"r":"78","s":[{"r":"76","s":[{"r":"75","s":[{"value":["HospitalLocation"]}]},{"value":["."]},{"r":"76","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"77","s":[{"value":["\"Emergency Department Visit\""]}]}]}]},{"value":["\n  \t\t"]},{"r":"82","s":[{"value":["sort by "]},{"r":"81","s":[{"r":"80","s":[{"value":["start of "]},{"r":"79","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"85","s":[{"value":["locationPeriod"]}]}]}]}]}]}}],"expression":{"localId":"86","locator":"49:3-52:18","type":"Start","operand":{"localId":"85","locator":"49:12-52:18","path":"locationPeriod","type":"Property","source":{"localId":"84","locator":"49:12-52:3","type":"First","source":{"localId":"83","locator":"49:18-51:35","type":"Query","source":[{"localId":"74","locator":"49:18-49:72","alias":"HospitalLocation","expression":{"localId":"73","locator":"49:18-49:56","name":"HospitalizationLocations","type":"FunctionRef","operand":[{"localId":"72","locator":"49:46-49:54","name":"Encounter","type":"OperandRef"}]}}],"relationship":[],"where":{"localId":"78","locator":"50:5-50:63","type":"InValueSet","code":{"localId":"76","locator":"50:11-50:31","path":"code","scope":"HospitalLocation","type":"Property"},"valueset":{"localId":"77","locator":"50:36-50:63","name":"Emergency Department Visit","preserve":true}},"sort":{"localId":"82","locator":"51:5-51:35","by":[{"localId":"81","locator":"51:13-51:35","direction":"asc","type":"ByExpression","expression":{"localId":"80","locator":"51:13-51:35","type":"Start","operand":{"localId":"79","locator":"51:22-51:35","name":"locationPeriod","type":"IdentifierRef"}}}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"71","locator":"48:60-48:81","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"122","locator":"65:1-73:31","name":"Hospitalization","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"122","s":[{"value":["/*Hospitalization returns the total interval for admission to discharge for the given encounter, or for the admission of any immediately prior emergency department visit to the discharge of the given encounter.*/\n","define function ","\"Hospitalization\"","(","Encounter"," "]},{"r":"90","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"121","s":[{"r":"121","s":[{"s":[{"r":"92","s":[{"r":"91","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"108","s":[{"value":["EDVisit",": "]},{"r":"107","s":[{"value":["Last","("]},{"r":"106","s":[{"s":[{"r":"94","s":[{"r":"93","s":[{"r":"93","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"101","s":[{"value":["where "]},{"r":"101","s":[{"r":"96","s":[{"r":"95","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"96","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"101","s":[{"value":["ends "]},{"r":"100","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"99","s":[{"value":["start of "]},{"r":"98","s":[{"r":"97","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"98","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"105","s":[{"value":["sort by \n  \t\t\t"]},{"r":"104","s":[{"r":"103","s":[{"value":["end of "]},{"r":"102","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"120","s":[{"value":["return "]},{"r":"119","s":[{"value":["Interval["]},{"r":"115","s":[{"value":["Coalesce","("]},{"r":"111","s":[{"value":["start of "]},{"r":"110","s":[{"r":"109","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"110","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"114","s":[{"value":["start of "]},{"r":"113","s":[{"r":"112","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"113","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]},{"value":[", \n  \t"]},{"r":"118","s":[{"value":["end of "]},{"r":"117","s":[{"r":"116","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"117","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["]"]}]}]}]}]}]}}],"expression":{"localId":"121","locator":"66:3-73:31","type":"Query","source":[{"localId":"92","locator":"66:3-66:17","alias":"Visit","expression":{"localId":"91","locator":"66:3-66:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"108","locator":"67:8-71:4","identifier":"EDVisit","expression":{"localId":"107","locator":"67:17-71:4","type":"Last","source":{"localId":"106","locator":"67:22-70:26","type":"Query","source":[{"localId":"94","locator":"67:22-67:82","alias":"LastED","expression":{"localId":"93","locator":"67:22-67:75","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"67:47-67:74","name":"Emergency Department Visit","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"101","locator":"68:6-68:95","type":"And","operand":[{"locator":"68:39-68:52","type":"In","operand":[{"locator":"68:34-68:37","type":"End","operand":{"localId":"96","locator":"68:12-68:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"68:39-68:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"68:67-68:95","type":"Subtract","operand":[{"localId":"99","locator":"68:67-68:95","type":"Start","operand":{"localId":"98","locator":"68:76-68:95","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"100","locator":"68:39-68:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"99","locator":"68:67-68:95","type":"Start","operand":{"localId":"98","locator":"68:76-68:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"68:39-68:52","type":"Not","operand":{"locator":"68:39-68:52","type":"IsNull","operand":{"localId":"99","locator":"68:67-68:95","type":"Start","operand":{"localId":"98","locator":"68:76-68:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"105","locator":"69:6-70:26","by":[{"localId":"104","locator":"70:6-70:26","direction":"asc","type":"ByExpression","expression":{"localId":"103","locator":"70:6-70:26","type":"End","operand":{"localId":"102","locator":"70:13-70:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"120","locator":"72:4-73:31","expression":{"localId":"119","locator":"72:11-73:31","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"115","locator":"72:20-72:91","type":"Coalesce","operand":[{"localId":"111","locator":"72:29-72:59","type":"Start","operand":{"localId":"110","locator":"72:38-72:59","path":"relevantPeriod","type":"Property","source":{"localId":"109","locator":"72:38-72:44","name":"EDVisit","type":"QueryLetRef"}}},{"localId":"114","locator":"72:62-72:90","type":"Start","operand":{"localId":"113","locator":"72:71-72:90","path":"relevantPeriod","scope":"Visit","type":"Property"}}]},"high":{"localId":"118","locator":"73:4-73:30","type":"End","operand":{"localId":"117","locator":"73:11-73:30","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"90","locator":"65:45-65:66","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"125","locator":"55:1-56:39","name":"HospitalAdmissionTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"125","s":[{"value":["/*Returns admission time for an encounter or for immediately prior emergency department visit.*/\n","define function ","\"HospitalAdmissionTime\"","(","Encounter"," "]},{"r":"88","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"124","s":[{"r":"124","s":[{"value":["start of "]},{"r":"123","s":[{"value":["\"Hospitalization\"","("]},{"r":"89","s":[{"value":["Encounter"]}]},{"value":[")"]}]}]}]}]}}],"expression":{"localId":"124","locator":"56:3-56:39","type":"Start","operand":{"localId":"123","locator":"56:12-56:39","name":"Hospitalization","type":"FunctionRef","operand":[{"localId":"89","locator":"56:30-56:38","name":"Encounter","type":"OperandRef"}]}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"88","locator":"55:51-55:72","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"138","locator":"59:1-62:18","name":"HospitalArrivalTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"138","s":[{"value":["/*Returns earliest arrival time for an encounter including any prior ED visit.*/\n","define function ","\"HospitalArrivalTime\"","(","Encounter"," "]},{"r":"126","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"137","s":[{"r":"137","s":[{"value":["start of "]},{"r":"136","s":[{"r":"135","s":[{"value":["First","("]},{"r":"134","s":[{"s":[{"r":"129","s":[{"r":"128","s":[{"value":["("]},{"r":"128","s":[{"value":["\"HospitalizationLocations\"","("]},{"r":"127","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n  \t\t"]},{"r":"133","s":[{"value":["sort by "]},{"r":"132","s":[{"r":"131","s":[{"value":["start of "]},{"r":"130","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"136","s":[{"value":["locationPeriod"]}]}]}]}]}]}}],"expression":{"localId":"137","locator":"60:3-62:18","type":"Start","operand":{"localId":"136","locator":"60:12-62:18","path":"locationPeriod","type":"Property","source":{"localId":"135","locator":"60:12-62:3","type":"First","source":{"localId":"134","locator":"60:18-61:35","type":"Query","source":[{"localId":"129","locator":"60:18-60:72","alias":"HospitalLocation","expression":{"localId":"128","locator":"60:18-60:56","name":"HospitalizationLocations","type":"FunctionRef","operand":[{"localId":"127","locator":"60:46-60:54","name":"Encounter","type":"OperandRef"}]}}],"relationship":[],"sort":{"localId":"133","locator":"61:5-61:35","by":[{"localId":"132","locator":"61:13-61:35","direction":"asc","type":"ByExpression","expression":{"localId":"131","locator":"61:13-61:35","type":"Start","operand":{"localId":"130","locator":"61:22-61:35","name":"locationPeriod","type":"IdentifierRef"}}}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"126","locator":"59:49-59:70","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"145","locator":"76:1-77:44","name":"HospitalizationLengthofStay","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"145","s":[{"value":["/*Returns the length of stay in days (i.e. the number of days between admission and discharge) for the given encounter, or from the admission of any immediately prior emergency department visit to the discharge of the encounter*/\n","define function ","\"HospitalizationLengthofStay\"","(","Encounter"," "]},{"r":"141","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"144","s":[{"r":"144","s":[{"value":["LengthInDays","("]},{"r":"143","s":[{"value":["\"Hospitalization\"","("]},{"r":"142","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"144","locator":"77:3-77:44","name":"LengthInDays","type":"FunctionRef","operand":[{"localId":"143","locator":"77:16-77:43","name":"Hospitalization","type":"FunctionRef","operand":[{"localId":"142","locator":"77:34-77:42","name":"Encounter","type":"OperandRef"}]}]},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"141","locator":"76:57-76:78","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"158","locator":"80:1-83:18","name":"HospitalDepartureTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"158","s":[{"value":["/*Returns the latest departure time for encounter including any prior ED visit.*/\n","define function ","\"HospitalDepartureTime\"","(","Encounter"," "]},{"r":"146","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"157","s":[{"r":"157","s":[{"value":["end of "]},{"r":"156","s":[{"r":"155","s":[{"value":["Last","("]},{"r":"154","s":[{"s":[{"r":"149","s":[{"r":"148","s":[{"value":["("]},{"r":"148","s":[{"value":["\"HospitalizationLocations\"","("]},{"r":"147","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n  \t\t"]},{"r":"153","s":[{"value":["sort by "]},{"r":"152","s":[{"r":"151","s":[{"value":["start of "]},{"r":"150","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"156","s":[{"value":["locationPeriod"]}]}]}]}]}]}}],"expression":{"localId":"157","locator":"81:3-83:18","type":"End","operand":{"localId":"156","locator":"81:10-83:18","path":"locationPeriod","type":"Property","source":{"localId":"155","locator":"81:10-83:3","type":"Last","source":{"localId":"154","locator":"81:15-82:35","type":"Query","source":[{"localId":"149","locator":"81:15-81:69","alias":"HospitalLocation","expression":{"localId":"148","locator":"81:15-81:53","name":"HospitalizationLocations","type":"FunctionRef","operand":[{"localId":"147","locator":"81:43-81:51","name":"Encounter","type":"OperandRef"}]}}],"relationship":[],"sort":{"localId":"153","locator":"82:5-82:35","by":[{"localId":"152","locator":"82:13-82:35","direction":"asc","type":"ByExpression","expression":{"localId":"151","locator":"82:13-82:35","type":"Start","operand":{"localId":"150","locator":"82:22-82:35","name":"locationPeriod","type":"IdentifierRef"}}}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"146","locator":"80:51-80:72","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"163","locator":"86:1-87:33","name":"HospitalDischargeTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"163","s":[{"value":["/*Hospital Discharge Time returns the discharge time for an encounter*/\n","define function ","\"HospitalDischargeTime\"","(","Encounter"," "]},{"r":"159","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"162","s":[{"r":"162","s":[{"value":["end of "]},{"r":"161","s":[{"r":"160","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"161","s":[{"value":["relevantPeriod"]}]}]}]}]}]}}],"expression":{"localId":"162","locator":"87:3-87:33","type":"End","operand":{"localId":"161","locator":"87:10-87:33","path":"relevantPeriod","type":"Property","source":{"localId":"160","locator":"87:10-87:18","name":"Encounter","type":"OperandRef"}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"159","locator":"86:51-86:72","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"236","locator":"90:1-110:31","name":"HospitalizationWithObservationAndOutpatientSurgeryService","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"236","s":[{"value":["/*Hospitalization with Observation and Outpatient Surgery Service returns the total interval from the start of any immediately prior emergency department visit, outpatient surgery visit or observation visit to the discharge of the given encounter.*/\n","define function ","\"HospitalizationWithObservationAndOutpatientSurgeryService\"","(","Encounter"," "]},{"r":"164","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"235","s":[{"r":"235","s":[{"s":[{"r":"166","s":[{"r":"165","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"182","s":[{"value":["ObsVisit",": "]},{"r":"181","s":[{"value":["Last","("]},{"r":"180","s":[{"s":[{"r":"168","s":[{"r":"167","s":[{"r":"167","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Observation Services\""]}]},{"value":["]"]}]}]},{"value":[" ","LastObs"]}]}]},{"value":["\n  \t\t\t"]},{"r":"175","s":[{"value":["where "]},{"r":"175","s":[{"r":"170","s":[{"r":"169","s":[{"value":["LastObs"]}]},{"value":["."]},{"r":"170","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"175","s":[{"value":["ends "]},{"r":"174","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"173","s":[{"value":["start of "]},{"r":"172","s":[{"r":"171","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"172","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"179","s":[{"value":["sort by \n  \t\t\t"]},{"r":"178","s":[{"r":"177","s":[{"value":["end of "]},{"r":"176","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]},{"value":[",\n  \t"]},{"r":"190","s":[{"value":["VisitStart",": "]},{"r":"189","s":[{"value":["Coalesce","("]},{"r":"185","s":[{"value":["start of "]},{"r":"184","s":[{"r":"183","s":[{"value":["ObsVisit"]}]},{"value":["."]},{"r":"184","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"188","s":[{"value":["start of "]},{"r":"187","s":[{"r":"186","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"187","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]}]},{"value":[",\n  \t"]},{"r":"204","s":[{"value":["EDVisit",": "]},{"r":"203","s":[{"value":["Last","("]},{"r":"202","s":[{"s":[{"r":"192","s":[{"r":"191","s":[{"r":"191","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"197","s":[{"value":["where "]},{"r":"197","s":[{"r":"194","s":[{"r":"193","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"194","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"197","s":[{"value":["ends "]},{"r":"196","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"195","s":[{"value":["VisitStart"]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"201","s":[{"value":["sort by \n  \t\t\t"]},{"r":"200","s":[{"r":"199","s":[{"value":["end of "]},{"r":"198","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]},{"value":[",\n  \t"]},{"r":"210","s":[{"value":["VisitStartWithED",": "]},{"r":"209","s":[{"value":["Coalesce","("]},{"r":"207","s":[{"value":["start of "]},{"r":"206","s":[{"r":"205","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"206","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"208","s":[{"value":["VisitStart"]}]},{"value":[")"]}]}]},{"value":[",\n  \t"]},{"r":"224","s":[{"value":["OutpatientSurgeryVisit",": "]},{"r":"223","s":[{"value":["Last","("]},{"r":"222","s":[{"s":[{"r":"212","s":[{"r":"211","s":[{"r":"211","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Outpatient Surgery Service\""]}]},{"value":["]"]}]}]},{"value":[" ","LastSurgeryOP"]}]}]},{"value":["\n  \t\t\t"]},{"r":"217","s":[{"value":["where "]},{"r":"217","s":[{"r":"214","s":[{"r":"213","s":[{"value":["LastSurgeryOP"]}]},{"value":["."]},{"r":"214","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"217","s":[{"value":["ends "]},{"r":"216","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"215","s":[{"value":["VisitStartWithED"]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"221","s":[{"value":["sort by \n  \t\t\t"]},{"r":"220","s":[{"r":"219","s":[{"value":["end of "]},{"r":"218","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"234","s":[{"value":["return "]},{"r":"233","s":[{"value":["Interval["]},{"r":"229","s":[{"value":["Coalesce","("]},{"r":"227","s":[{"value":["start of "]},{"r":"226","s":[{"r":"225","s":[{"value":["OutpatientSurgeryVisit"]}]},{"value":["."]},{"r":"226","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"228","s":[{"value":["VisitStartWithED"]}]},{"value":[")"]}]},{"value":[", \n  \t"]},{"r":"232","s":[{"value":["end of "]},{"r":"231","s":[{"r":"230","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"231","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["]"]}]}]}]}]}]}}],"expression":{"localId":"235","locator":"91:3-110:31","type":"Query","source":[{"localId":"166","locator":"91:3-91:17","alias":"Visit","expression":{"localId":"165","locator":"91:3-91:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"182","locator":"92:8-96:4","identifier":"ObsVisit","expression":{"localId":"181","locator":"92:18-96:4","type":"Last","source":{"localId":"180","locator":"92:23-95:26","type":"Query","source":[{"localId":"168","locator":"92:23-92:78","alias":"LastObs","expression":{"localId":"167","locator":"92:23-92:70","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"92:48-92:69","name":"Observation Services","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"175","locator":"93:6-93:96","type":"And","operand":[{"locator":"93:40-93:53","type":"In","operand":[{"locator":"93:35-93:38","type":"End","operand":{"localId":"170","locator":"93:12-93:33","path":"relevantPeriod","scope":"LastObs","type":"Property"}},{"locator":"93:40-93:53","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"93:68-93:96","type":"Subtract","operand":[{"localId":"173","locator":"93:68-93:96","type":"Start","operand":{"localId":"172","locator":"93:77-93:96","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"174","locator":"93:40-93:45","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"173","locator":"93:68-93:96","type":"Start","operand":{"localId":"172","locator":"93:77-93:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"93:40-93:53","type":"Not","operand":{"locator":"93:40-93:53","type":"IsNull","operand":{"localId":"173","locator":"93:68-93:96","type":"Start","operand":{"localId":"172","locator":"93:77-93:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"179","locator":"94:6-95:26","by":[{"localId":"178","locator":"95:6-95:26","direction":"asc","type":"ByExpression","expression":{"localId":"177","locator":"95:6-95:26","type":"End","operand":{"localId":"176","locator":"95:13-95:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}},{"localId":"190","locator":"97:4-97:88","identifier":"VisitStart","expression":{"localId":"189","locator":"97:16-97:88","type":"Coalesce","operand":[{"localId":"185","locator":"97:25-97:56","type":"Start","operand":{"localId":"184","locator":"97:34-97:56","path":"relevantPeriod","type":"Property","source":{"localId":"183","locator":"97:34-97:41","name":"ObsVisit","type":"QueryLetRef"}}},{"localId":"188","locator":"97:59-97:87","type":"Start","operand":{"localId":"187","locator":"97:68-97:87","path":"relevantPeriod","scope":"Visit","type":"Property"}}]}},{"localId":"204","locator":"98:4-102:4","identifier":"EDVisit","expression":{"localId":"203","locator":"98:13-102:4","type":"Last","source":{"localId":"202","locator":"98:18-101:26","type":"Query","source":[{"localId":"192","locator":"98:18-98:78","alias":"LastED","expression":{"localId":"191","locator":"98:18-98:71","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"98:43-98:70","name":"Emergency Department Visit","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"197","locator":"99:6-99:76","type":"And","operand":[{"locator":"99:39-99:52","type":"In","operand":[{"locator":"99:34-99:37","type":"End","operand":{"localId":"194","locator":"99:12-99:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"99:39-99:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"99:67-99:76","type":"Subtract","operand":[{"localId":"195","locator":"99:67-99:76","name":"VisitStart","type":"QueryLetRef"},{"localId":"196","locator":"99:39-99:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"195","locator":"99:67-99:76","name":"VisitStart","type":"QueryLetRef"}}]},{"locator":"99:39-99:52","type":"Not","operand":{"locator":"99:39-99:52","type":"IsNull","operand":{"localId":"195","locator":"99:67-99:76","name":"VisitStart","type":"QueryLetRef"}}}]},"sort":{"localId":"201","locator":"100:6-101:26","by":[{"localId":"200","locator":"101:6-101:26","direction":"asc","type":"ByExpression","expression":{"localId":"199","locator":"101:6-101:26","type":"End","operand":{"localId":"198","locator":"101:13-101:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}},{"localId":"210","locator":"103:4-103:74","identifier":"VisitStartWithED","expression":{"localId":"209","locator":"103:22-103:74","type":"Coalesce","operand":[{"localId":"207","locator":"103:31-103:61","type":"Start","operand":{"localId":"206","locator":"103:40-103:61","path":"relevantPeriod","type":"Property","source":{"localId":"205","locator":"103:40-103:46","name":"EDVisit","type":"QueryLetRef"}}},{"localId":"208","locator":"103:64-103:73","name":"VisitStart","type":"QueryLetRef"}]}},{"localId":"224","locator":"104:4-108:4","identifier":"OutpatientSurgeryVisit","expression":{"localId":"223","locator":"104:28-108:4","type":"Last","source":{"localId":"222","locator":"104:33-107:26","type":"Query","source":[{"localId":"212","locator":"104:33-104:100","alias":"LastSurgeryOP","expression":{"localId":"211","locator":"104:33-104:86","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"104:58-104:85","name":"Outpatient Surgery Service","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"217","locator":"105:6-105:89","type":"And","operand":[{"locator":"105:46-105:59","type":"In","operand":[{"locator":"105:41-105:44","type":"End","operand":{"localId":"214","locator":"105:12-105:39","path":"relevantPeriod","scope":"LastSurgeryOP","type":"Property"}},{"locator":"105:46-105:59","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"105:74-105:89","type":"Subtract","operand":[{"localId":"215","locator":"105:74-105:89","name":"VisitStartWithED","type":"QueryLetRef"},{"localId":"216","locator":"105:46-105:51","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"215","locator":"105:74-105:89","name":"VisitStartWithED","type":"QueryLetRef"}}]},{"locator":"105:46-105:59","type":"Not","operand":{"locator":"105:46-105:59","type":"IsNull","operand":{"localId":"215","locator":"105:74-105:89","name":"VisitStartWithED","type":"QueryLetRef"}}}]},"sort":{"localId":"221","locator":"106:6-107:26","by":[{"localId":"220","locator":"107:6-107:26","direction":"asc","type":"ByExpression","expression":{"localId":"219","locator":"107:6-107:26","type":"End","operand":{"localId":"218","locator":"107:13-107:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"234","locator":"109:4-110:31","expression":{"localId":"233","locator":"109:11-110:31","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"229","locator":"109:20-109:93","type":"Coalesce","operand":[{"localId":"227","locator":"109:29-109:74","type":"Start","operand":{"localId":"226","locator":"109:38-109:74","path":"relevantPeriod","type":"Property","source":{"localId":"225","locator":"109:38-109:59","name":"OutpatientSurgeryVisit","type":"QueryLetRef"}}},{"localId":"228","locator":"109:77-109:92","name":"VisitStartWithED","type":"QueryLetRef"}]},"high":{"localId":"232","locator":"110:4-110:30","type":"End","operand":{"localId":"231","locator":"110:11-110:30","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"164","locator":"90:87-90:108","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"289","locator":"113:1-127:31","name":"HospitalizationWithObservation","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"289","s":[{"value":["/*Hospitalization with Observation returns the total interval from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\n","define function ","\"HospitalizationWithObservation\"","(","Encounter"," "]},{"r":"237","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"288","s":[{"r":"288","s":[{"s":[{"r":"239","s":[{"r":"238","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"255","s":[{"value":["ObsVisit",": "]},{"r":"254","s":[{"value":["Last","("]},{"r":"253","s":[{"s":[{"r":"241","s":[{"r":"240","s":[{"r":"240","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Observation Services\""]}]},{"value":["]"]}]}]},{"value":[" ","LastObs"]}]}]},{"value":["\n  \t\t\t"]},{"r":"248","s":[{"value":["where "]},{"r":"248","s":[{"r":"243","s":[{"r":"242","s":[{"value":["LastObs"]}]},{"value":["."]},{"r":"243","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"248","s":[{"value":["ends "]},{"r":"247","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"246","s":[{"value":["start of "]},{"r":"245","s":[{"r":"244","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"245","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"252","s":[{"value":["sort by \n  \t\t\t"]},{"r":"251","s":[{"r":"250","s":[{"value":["end of "]},{"r":"249","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]},{"value":[",\n  \t"]},{"r":"263","s":[{"value":["VisitStart",": "]},{"r":"262","s":[{"value":["Coalesce","("]},{"r":"258","s":[{"value":["start of "]},{"r":"257","s":[{"r":"256","s":[{"value":["ObsVisit"]}]},{"value":["."]},{"r":"257","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"261","s":[{"value":["start of "]},{"r":"260","s":[{"r":"259","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"260","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]}]},{"value":[",\n  \t"]},{"r":"277","s":[{"value":["EDVisit",": "]},{"r":"276","s":[{"value":["Last","("]},{"r":"275","s":[{"s":[{"r":"265","s":[{"r":"264","s":[{"r":"264","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"270","s":[{"value":["where "]},{"r":"270","s":[{"r":"267","s":[{"r":"266","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"267","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"270","s":[{"value":["ends "]},{"r":"269","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"268","s":[{"value":["VisitStart"]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"274","s":[{"value":["sort by \n  \t\t\t"]},{"r":"273","s":[{"r":"272","s":[{"value":["end of "]},{"r":"271","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"287","s":[{"value":["return "]},{"r":"286","s":[{"value":["Interval["]},{"r":"282","s":[{"value":["Coalesce","("]},{"r":"280","s":[{"value":["start of "]},{"r":"279","s":[{"r":"278","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"279","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"281","s":[{"value":["VisitStart"]}]},{"value":[")"]}]},{"value":[", \n  \t"]},{"r":"285","s":[{"value":["end of "]},{"r":"284","s":[{"r":"283","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"284","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["]"]}]}]}]}]}]}}],"expression":{"localId":"288","locator":"114:3-127:31","type":"Query","source":[{"localId":"239","locator":"114:3-114:17","alias":"Visit","expression":{"localId":"238","locator":"114:3-114:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"255","locator":"115:8-119:4","identifier":"ObsVisit","expression":{"localId":"254","locator":"115:18-119:4","type":"Last","source":{"localId":"253","locator":"115:23-118:26","type":"Query","source":[{"localId":"241","locator":"115:23-115:78","alias":"LastObs","expression":{"localId":"240","locator":"115:23-115:70","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"115:48-115:69","name":"Observation Services","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"248","locator":"116:6-116:96","type":"And","operand":[{"locator":"116:40-116:53","type":"In","operand":[{"locator":"116:35-116:38","type":"End","operand":{"localId":"243","locator":"116:12-116:33","path":"relevantPeriod","scope":"LastObs","type":"Property"}},{"locator":"116:40-116:53","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"116:68-116:96","type":"Subtract","operand":[{"localId":"246","locator":"116:68-116:96","type":"Start","operand":{"localId":"245","locator":"116:77-116:96","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"247","locator":"116:40-116:45","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"246","locator":"116:68-116:96","type":"Start","operand":{"localId":"245","locator":"116:77-116:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"116:40-116:53","type":"Not","operand":{"locator":"116:40-116:53","type":"IsNull","operand":{"localId":"246","locator":"116:68-116:96","type":"Start","operand":{"localId":"245","locator":"116:77-116:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"252","locator":"117:6-118:26","by":[{"localId":"251","locator":"118:6-118:26","direction":"asc","type":"ByExpression","expression":{"localId":"250","locator":"118:6-118:26","type":"End","operand":{"localId":"249","locator":"118:13-118:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}},{"localId":"263","locator":"120:4-120:88","identifier":"VisitStart","expression":{"localId":"262","locator":"120:16-120:88","type":"Coalesce","operand":[{"localId":"258","locator":"120:25-120:56","type":"Start","operand":{"localId":"257","locator":"120:34-120:56","path":"relevantPeriod","type":"Property","source":{"localId":"256","locator":"120:34-120:41","name":"ObsVisit","type":"QueryLetRef"}}},{"localId":"261","locator":"120:59-120:87","type":"Start","operand":{"localId":"260","locator":"120:68-120:87","path":"relevantPeriod","scope":"Visit","type":"Property"}}]}},{"localId":"277","locator":"121:4-125:4","identifier":"EDVisit","expression":{"localId":"276","locator":"121:13-125:4","type":"Last","source":{"localId":"275","locator":"121:18-124:26","type":"Query","source":[{"localId":"265","locator":"121:18-121:78","alias":"LastED","expression":{"localId":"264","locator":"121:18-121:71","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"121:43-121:70","name":"Emergency Department Visit","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"270","locator":"122:6-122:76","type":"And","operand":[{"locator":"122:39-122:52","type":"In","operand":[{"locator":"122:34-122:37","type":"End","operand":{"localId":"267","locator":"122:12-122:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"122:39-122:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"122:67-122:76","type":"Subtract","operand":[{"localId":"268","locator":"122:67-122:76","name":"VisitStart","type":"QueryLetRef"},{"localId":"269","locator":"122:39-122:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"268","locator":"122:67-122:76","name":"VisitStart","type":"QueryLetRef"}}]},{"locator":"122:39-122:52","type":"Not","operand":{"locator":"122:39-122:52","type":"IsNull","operand":{"localId":"268","locator":"122:67-122:76","name":"VisitStart","type":"QueryLetRef"}}}]},"sort":{"localId":"274","locator":"123:6-124:26","by":[{"localId":"273","locator":"124:6-124:26","direction":"asc","type":"ByExpression","expression":{"localId":"272","locator":"124:6-124:26","type":"End","operand":{"localId":"271","locator":"124:13-124:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"287","locator":"126:4-127:31","expression":{"localId":"286","locator":"126:11-127:31","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"282","locator":"126:20-126:72","type":"Coalesce","operand":[{"localId":"280","locator":"126:29-126:59","type":"Start","operand":{"localId":"279","locator":"126:38-126:59","path":"relevantPeriod","type":"Property","source":{"localId":"278","locator":"126:38-126:44","name":"EDVisit","type":"QueryLetRef"}}},{"localId":"281","locator":"126:62-126:71","name":"VisitStart","type":"QueryLetRef"}]},"high":{"localId":"285","locator":"127:4-127:30","type":"End","operand":{"localId":"284","locator":"127:11-127:30","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"237","locator":"113:60-113:81","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"294","locator":"130:1-131:61","name":"HospitalizationWithObservationLengthofStay","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"294","s":[{"value":["/*Hospitalization with Observation Length of Stay returns the length in days from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\n","define function ","\"HospitalizationWithObservationLengthofStay\"","(","Encounter"," "]},{"r":"290","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"293","s":[{"r":"293","s":[{"value":["\"LengthInDays\"","("]},{"r":"292","s":[{"value":["\"HospitalizationWithObservation\"","("]},{"r":"291","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"293","locator":"131:3-131:61","name":"LengthInDays","type":"FunctionRef","operand":[{"localId":"292","locator":"131:18-131:60","name":"HospitalizationWithObservation","type":"FunctionRef","operand":[{"localId":"291","locator":"131:51-131:59","name":"Encounter","type":"OperandRef"}]}]},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"290","locator":"130:72-130:93","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"315","locator":"134:1-139:3","name":"FirstInpatientIntensiveCareUnit","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"315","s":[{"value":["/*First Inpatient Intensive Care Unit returns the first intensive care unit for the given encounter, without considering any immediately prior emergency department visit.*/\n","define function ","\"FirstInpatientIntensiveCareUnit\"","(","Encounter"," "]},{"r":"295","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"314","s":[{"r":"314","s":[{"value":["First","("]},{"r":"313","s":[{"s":[{"r":"298","s":[{"r":"297","s":[{"value":["("]},{"r":"297","s":[{"r":"296","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"297","s":[{"value":["facilityLocations"]}]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n      "]},{"r":"308","s":[{"value":["where "]},{"r":"308","s":[{"r":"302","s":[{"r":"300","s":[{"r":"299","s":[{"value":["HospitalLocation"]}]},{"value":["."]},{"r":"300","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"301","s":[{"value":["\"Intensive Care Unit\""]}]}]},{"value":["\n        and "]},{"r":"307","s":[{"r":"304","s":[{"r":"303","s":[{"value":["HospitalLocation"]}]},{"value":["."]},{"r":"304","s":[{"value":["locationPeriod"]}]}]},{"r":"307","value":[" ","during"," "]},{"r":"306","s":[{"r":"305","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"306","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n      "]},{"r":"312","s":[{"value":["sort by "]},{"r":"311","s":[{"r":"310","s":[{"value":["start of "]},{"r":"309","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]}]}]}}],"expression":{"localId":"314","locator":"135:3-139:3","type":"First","source":{"localId":"313","locator":"135:9-138:37","type":"Query","source":[{"localId":"298","locator":"135:9-135:53","alias":"HospitalLocation","expression":{"localId":"297","locator":"135:9-135:37","path":"facilityLocations","type":"Property","source":{"localId":"296","locator":"135:10-135:18","name":"Encounter","type":"OperandRef"}}}],"relationship":[],"where":{"localId":"308","locator":"136:7-137:75","type":"And","operand":[{"localId":"302","locator":"136:13-136:58","type":"InValueSet","code":{"localId":"300","locator":"136:13-136:33","path":"code","scope":"HospitalLocation","type":"Property"},"valueset":{"localId":"301","locator":"136:38-136:58","name":"Intensive Care Unit","preserve":true}},{"localId":"307","locator":"137:13-137:75","type":"IncludedIn","operand":[{"localId":"304","locator":"137:13-137:43","path":"locationPeriod","scope":"HospitalLocation","type":"Property"},{"localId":"306","locator":"137:52-137:75","path":"relevantPeriod","type":"Property","source":{"localId":"305","locator":"137:52-137:60","name":"Encounter","type":"OperandRef"}}]}]},"sort":{"localId":"312","locator":"138:7-138:37","by":[{"localId":"311","locator":"138:15-138:37","direction":"asc","type":"ByExpression","expression":{"localId":"310","locator":"138:15-138:37","type":"Start","operand":{"localId":"309","locator":"138:24-138:37","name":"locationPeriod","type":"IdentifierRef"}}}]}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"295","locator":"134:61-134:82","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"333","locator":"142:1-145:35","name":"NormalizeInterval","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"333","s":[{"value":["/*Given a datetime and a period, returns the period (if a period is provided) or the interval beginning and ending on the datetime (if a datetime is provided)*/\n","define function ","\"NormalizeInterval\"","(","pointInTime"," "]},{"r":"316","s":[{"value":["DateTime"]}]},{"value":[", ","period"," "]},{"r":"318","s":[{"value":["Interval\u003c"]},{"r":"317","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"332","s":[{"r":"332","s":[{"value":["if "]},{"r":"320","s":[{"r":"319","s":[{"value":["pointInTime"]}]},{"value":[" is not null"]}]},{"value":[" then "]},{"r":"323","s":[{"value":["Interval["]},{"r":"321","s":[{"value":["pointInTime"]}]},{"value":[", "]},{"r":"322","s":[{"value":["pointInTime"]}]},{"value":["]"]}]},{"value":["\n    else "]},{"r":"331","s":[{"value":["if "]},{"r":"325","s":[{"r":"324","s":[{"value":["period"]}]},{"value":[" is not null"]}]},{"value":[" then "]},{"r":"326","s":[{"value":["period"]}]},{"value":[" \n    else "]},{"r":"330","s":[{"r":"327","value":["null"," as "]},{"r":"329","s":[{"value":["Interval\u003c"]},{"r":"328","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}]}]}]}]}}],"expression":{"localId":"332","locator":"143:3-145:35","type":"If","condition":{"localId":"320","locator":"143:6-143:28","type":"Not","operand":{"locator":"143:6-143:28","type":"IsNull","operand":{"localId":"319","locator":"143:6-143:16","name":"pointInTime","type":"OperandRef"}}},"then":{"localId":"323","locator":"143:35-143:68","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"321","locator":"143:44-143:54","name":"pointInTime","type":"OperandRef"},"high":{"localId":"322","locator":"143:57-143:67","name":"pointInTime","type":"OperandRef"}},"else":{"localId":"331","locator":"144:10-145:35","type":"If","condition":{"localId":"325","locator":"144:13-144:30","type":"Not","operand":{"locator":"144:13-144:30","type":"IsNull","operand":{"localId":"324","locator":"144:13-144:18","name":"period","type":"OperandRef"}}},"then":{"localId":"326","locator":"144:37-144:42","name":"period","type":"OperandRef"},"else":{"localId":"330","locator":"145:10-145:35","strict":false,"type":"As","operand":{"localId":"327","locator":"145:10-145:13","type":"Null"},"asTypeSpecifier":{"localId":"329","locator":"145:18-145:35","type":"IntervalTypeSpecifier","pointType":{"localId":"328","locator":"145:27-145:34","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}},"operand":[{"name":"pointInTime","operandTypeSpecifier":{"localId":"316","locator":"142:49-142:56","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"name":"period","operandTypeSpecifier":{"localId":"318","locator":"142:66-142:83","type":"IntervalTypeSpecifier","pointType":{"localId":"317","locator":"142:75-142:82","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"346","locator":"148:1-151:3","name":"HasStart","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"346","s":[{"value":["/*Given an interval, return true if the interval has a starting boundary specified (i.e. the start of the interval is not null and not the minimum DateTime value)*/\n","define function ","\"HasStart\"","(","period"," "]},{"r":"335","s":[{"value":["Interval\u003c"]},{"r":"334","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"345","s":[{"r":"345","s":[{"value":["not "]},{"r":"344","s":[{"value":["( "]},{"r":"344","s":[{"r":"338","s":[{"r":"337","s":[{"value":["start of "]},{"r":"336","s":[{"value":["period"]}]}]},{"value":[" is null"]}]},{"value":["\n      or "]},{"r":"343","s":[{"r":"340","s":[{"value":["start of "]},{"r":"339","s":[{"value":["period"]}]}]},{"value":[" ","="," "]},{"r":"342","s":[{"value":["minimum"," "]},{"r":"341","s":[{"value":["DateTime"]}]}]}]}]},{"value":["\n  )"]}]}]}]}]}}],"expression":{"localId":"345","locator":"149:3-151:3","type":"Not","operand":{"localId":"344","locator":"149:7-151:3","type":"Or","operand":[{"localId":"338","locator":"149:9-149:31","type":"IsNull","operand":{"localId":"337","locator":"149:9-149:23","type":"Start","operand":{"localId":"336","locator":"149:18-149:23","name":"period","type":"OperandRef"}}},{"localId":"343","locator":"150:10-150:43","type":"Equal","operand":[{"localId":"340","locator":"150:10-150:24","type":"Start","operand":{"localId":"339","locator":"150:19-150:24","name":"period","type":"OperandRef"}},{"localId":"342","locator":"150:28-150:43","valueType":"{urn:hl7-org:elm-types:r1}DateTime","type":"MinValue"}]}]}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"335","locator":"148:35-148:52","type":"IntervalTypeSpecifier","pointType":{"localId":"334","locator":"148:44-148:51","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"359","locator":"154:1-159:3","name":"HasEnd","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"359","s":[{"value":["/*Given an interval, return true if the interval has an ending boundary specified (i.e. the end of the interval is not null and not the maximum DateTime value)*/\n","define function ","\"HasEnd\"","(","period"," "]},{"r":"348","s":[{"value":["Interval\u003c"]},{"r":"347","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"358","s":[{"r":"358","s":[{"value":["not "]},{"r":"357","s":[{"value":["( \n    "]},{"r":"357","s":[{"r":"351","s":[{"r":"350","s":[{"value":["end of "]},{"r":"349","s":[{"value":["period"]}]}]},{"value":[" is null"]}]},{"value":["\n      or \n      "]},{"r":"356","s":[{"r":"353","s":[{"value":["end of "]},{"r":"352","s":[{"value":["period"]}]}]},{"value":[" ","="," "]},{"r":"355","s":[{"value":["maximum"," "]},{"r":"354","s":[{"value":["DateTime"]}]}]}]}]},{"value":["\n  )"]}]}]}]}]}}],"expression":{"localId":"358","locator":"155:3-159:3","type":"Not","operand":{"localId":"357","locator":"155:7-159:3","type":"Or","operand":[{"localId":"351","locator":"156:5-156:25","type":"IsNull","operand":{"localId":"350","locator":"156:5-156:17","type":"End","operand":{"localId":"349","locator":"156:12-156:17","name":"period","type":"OperandRef"}}},{"localId":"356","locator":"158:7-158:38","type":"Equal","operand":[{"localId":"353","locator":"158:7-158:19","type":"End","operand":{"localId":"352","locator":"158:14-158:19","name":"period","type":"OperandRef"}},{"localId":"355","locator":"158:23-158:38","valueType":"{urn:hl7-org:elm-types:r1}DateTime","type":"MaxValue"}]}]}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"348","locator":"154:33-154:50","type":"IntervalTypeSpecifier","pointType":{"localId":"347","locator":"154:42-154:49","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"369","locator":"162:1-165:24","name":"Latest","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"369","s":[{"value":["/*Given an interval, return the ending point if the interval has an ending boundary specified, otherwise, return the starting point*/\n","define function ","\"Latest\"","(","period"," "]},{"r":"361","s":[{"value":["Interval\u003c"]},{"r":"360","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"368","s":[{"r":"368","s":[{"value":["if "]},{"r":"363","s":[{"value":["( "]},{"r":"363","s":[{"value":["HasEnd","("]},{"r":"362","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":[" then \n  "]},{"r":"365","s":[{"value":["end of "]},{"r":"364","s":[{"value":["period"]}]}]},{"value":[" \n    else "]},{"r":"367","s":[{"value":["start of "]},{"r":"366","s":[{"value":["period"]}]}]}]}]}]}}],"expression":{"localId":"368","locator":"163:3-165:24","type":"If","condition":{"localId":"363","locator":"163:6-163:22","name":"HasEnd","type":"FunctionRef","operand":[{"localId":"362","locator":"163:15-163:20","name":"period","type":"OperandRef"}]},"then":{"localId":"365","locator":"164:3-164:15","type":"End","operand":{"localId":"364","locator":"164:10-164:15","name":"period","type":"OperandRef"}},"else":{"localId":"367","locator":"165:10-165:24","type":"Start","operand":{"localId":"366","locator":"165:19-165:24","name":"period","type":"OperandRef"}}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"361","locator":"162:33-162:50","type":"IntervalTypeSpecifier","pointType":{"localId":"360","locator":"162:42-162:49","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"379","locator":"168:1-171:15","name":"Earliest","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"379","s":[{"value":["/*Given an interval, return the starting point if the interval has a starting boundary specified, otherwise, return the ending point*/\n","define function ","\"Earliest\"","(","period"," "]},{"r":"371","s":[{"value":["Interval\u003c"]},{"r":"370","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"378","s":[{"r":"378","s":[{"value":["if "]},{"r":"373","s":[{"value":["( "]},{"r":"373","s":[{"value":["HasStart","("]},{"r":"372","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":[" then "]},{"r":"375","s":[{"value":["start of "]},{"r":"374","s":[{"value":["period"]}]}]},{"value":[" \n    else \n  "]},{"r":"377","s":[{"value":["end of "]},{"r":"376","s":[{"value":["period"]}]}]}]}]}]}}],"expression":{"localId":"378","locator":"169:3-171:15","type":"If","condition":{"localId":"373","locator":"169:6-169:24","name":"HasStart","type":"FunctionRef","operand":[{"localId":"372","locator":"169:17-169:22","name":"period","type":"OperandRef"}]},"then":{"localId":"375","locator":"169:31-169:45","type":"Start","operand":{"localId":"374","locator":"169:40-169:45","name":"period","type":"OperandRef"}},"else":{"localId":"377","locator":"171:3-171:15","type":"End","operand":{"localId":"376","locator":"171:10-171:15","name":"period","type":"OperandRef"}}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"371","locator":"168:35-168:52","type":"IntervalTypeSpecifier","pointType":{"localId":"370","locator":"168:44-168:51","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"387","locator":"174:1-175:48","name":"LatestOf","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"387","s":[{"value":["/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the ending point of the period if the period has an ending boundary specified, otherwise returns the starting point of the interval*/\n","define function ","\"LatestOf\"","(","pointInTime"," "]},{"r":"380","s":[{"value":["DateTime"]}]},{"value":[", ","period"," "]},{"r":"382","s":[{"value":["Interval\u003c"]},{"r":"381","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"386","s":[{"r":"386","s":[{"value":["Latest","("]},{"r":"385","s":[{"value":["NormalizeInterval","("]},{"r":"383","s":[{"value":["pointInTime"]}]},{"value":[", "]},{"r":"384","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"386","locator":"175:3-175:48","name":"Latest","type":"FunctionRef","operand":[{"localId":"385","locator":"175:10-175:47","name":"NormalizeInterval","type":"FunctionRef","operand":[{"localId":"383","locator":"175:28-175:38","name":"pointInTime","type":"OperandRef"},{"localId":"384","locator":"175:41-175:46","name":"period","type":"OperandRef"}]}]},"operand":[{"name":"pointInTime","operandTypeSpecifier":{"localId":"380","locator":"174:40-174:47","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"name":"period","operandTypeSpecifier":{"localId":"382","locator":"174:57-174:74","type":"IntervalTypeSpecifier","pointType":{"localId":"381","locator":"174:66-174:73","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"395","locator":"178:1-179:50","name":"EarliestOf","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"395","s":[{"value":["/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the starting point of the period if the period has a starting boundary specified, otherwise returns the ending point of the period*/\n","define function ","\"EarliestOf\"","(","pointInTime"," "]},{"r":"388","s":[{"value":["DateTime"]}]},{"value":[", ","period"," "]},{"r":"390","s":[{"value":["Interval\u003c"]},{"r":"389","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"394","s":[{"r":"394","s":[{"value":["Earliest","("]},{"r":"393","s":[{"value":["NormalizeInterval","("]},{"r":"391","s":[{"value":["pointInTime"]}]},{"value":[", "]},{"r":"392","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"394","locator":"179:3-179:50","name":"Earliest","type":"FunctionRef","operand":[{"localId":"393","locator":"179:12-179:49","name":"NormalizeInterval","type":"FunctionRef","operand":[{"localId":"391","locator":"179:30-179:40","name":"pointInTime","type":"OperandRef"},{"localId":"392","locator":"179:43-179:48","name":"period","type":"OperandRef"}]}]},"operand":[{"name":"pointInTime","operandTypeSpecifier":{"localId":"388","locator":"178:42-178:49","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"name":"period","operandTypeSpecifier":{"localId":"390","locator":"178:59-178:76","type":"IntervalTypeSpecifier","pointType":{"localId":"389","locator":"178:68-178:75","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]}]}}},"elm_annotations":{"statements":[{"children":[{"children":[{"children":[{"text":"define \"ED Encounter\":\n  "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"10"}],"ref_id":"11"}],"define_name":"ED Encounter"},{"children":[{"children":[{"children":[{"text":"define \"Inpatient Encounter\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Encounter Inpatient\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"12"}],"node_type":"Retrieve","ref_id":"12"},{"children":[{"text":" EncounterInpatient"}]}],"ref_id":"13"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"EncounterInpatient"}]}],"ref_id":"14"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"15"}],"node_type":"Property","ref_id":"15"},{"children":[{"text":" ends during day of "}],"ref_id":"17"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"16"}],"ref_id":"17"}],"ref_id":"17"}],"node_type":"Query","ref_id":"18"}],"ref_id":"19"}],"define_name":"Inpatient Encounter"},{"children":[{"children":[]},{"children":[]},{"children":[]},{"children":[{"children":[{"text":"/*@description: Returns an interval of date values extracted from the input interval of date-time values\n@comment: This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability.*/\ndefine function \"ToDateInterval\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"20"},{"children":[{"text":"\u003e"}]}],"ref_id":"21"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"22"}],"node_type":"Start","ref_id":"23"}],"ref_id":"24"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"25"}],"node_type":"End","ref_id":"26"}],"ref_id":"27"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"28"}],"node_type":"Interval","ref_id":"28"}],"ref_id":"29"}],"define_name":"ToDateInterval"},{"children":[{"children":[{"children":[{"text":"/*calculates the difference in calendar days between the start and end of the given interval.*/\ndefine function \"LengthInDays\"(Value "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"30"},{"children":[{"text":"\u003e"}]}],"ref_id":"31"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"difference in days between "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"Value"}]}],"node_type":"OperandRef","ref_id":"32"}],"node_type":"Start","ref_id":"33"},{"children":[{"text":" and "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"Value"}]}],"node_type":"OperandRef","ref_id":"34"}],"node_type":"End","ref_id":"35"}],"node_type":"DifferenceBetween","ref_id":"36"}],"node_type":"DifferenceBetween","ref_id":"36"}],"ref_id":"37"}],"define_name":"LengthInDays"},{"children":[{"children":[{"children":[{"text":"/*returns list of all locations within an encounter, including locations for immediately prior ED visit.*/\ndefine function \"HospitalizationLocations\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"38"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"39"},{"children":[{"text":" Visit"}]}],"ref_id":"40"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"41"}],"node_type":"Retrieve","ref_id":"41"},{"children":[{"text":" LastED"}]}],"ref_id":"42"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"43"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"44"}],"node_type":"Property","ref_id":"44"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"48"},{"children":[{"text":" or less on or before"}]}],"ref_id":"49"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"45"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"46"}],"node_type":"Property","ref_id":"46"}],"node_type":"Start","ref_id":"47"}],"ref_id":"49"}],"ref_id":"49"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"50"}],"node_type":"End","ref_id":"51"}],"ref_id":"52"}],"ref_id":"53"}],"ref_id":"54"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"55"}],"ref_id":"56"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"node_type":"QueryLetRef","ref_id":"57"},{"children":[{"text":" is null"}]}],"ref_id":"58"},{"children":[{"text":" then "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"59"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"ref_id":"60"}],"ref_id":"60"},{"children":[{"text":" \n      else "}]},{"children":[{"children":[{"text":"flatten "}]},{"children":[{"children":[{"text":"{ "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"61"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"ref_id":"62"}],"ref_id":"62"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"63"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"ref_id":"64"}],"ref_id":"64"},{"children":[{"text":" }"}]}],"node_type":"List","ref_id":"65"}],"ref_id":"66"}],"node_type":"If","ref_id":"67"}],"ref_id":"68"}],"node_type":"Query","ref_id":"69"}],"node_type":"Query","ref_id":"69"}],"ref_id":"70"}],"define_name":"HospitalizationLocations"},{"children":[{"children":[{"children":[{"text":"/*Returns the arrival time in the ED for the encounter.*/\ndefine function \"EmergencyDepartmentArrivalTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"71"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"\"HospitalizationLocations\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"72"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"73"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"73"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"74"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"HospitalLocation"}]}],"ref_id":"75"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"76"}],"ref_id":"76"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}],"ref_id":"77"}],"ref_id":"78"}],"ref_id":"78"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"79"}],"node_type":"Start","ref_id":"80"}],"ref_id":"81"}],"ref_id":"82"}],"ref_id":"83"},{"children":[{"text":"\n  )"}]}],"ref_id":"84"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"85"}],"node_type":"Property","ref_id":"85"}],"node_type":"Start","ref_id":"86"}],"node_type":"Start","ref_id":"86"}],"ref_id":"87"}],"define_name":"EmergencyDepartmentArrivalTime"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization returns the total interval for admission to discharge for the given encounter, or for the admission of any immediately prior emergency department visit to the discharge of the given encounter.*/\ndefine function \"Hospitalization\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"90"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"91"},{"children":[{"text":" Visit"}]}],"ref_id":"92"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"93"}],"node_type":"Retrieve","ref_id":"93"},{"children":[{"text":" LastED"}]}],"ref_id":"94"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"95"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"96"}],"node_type":"Property","ref_id":"96"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"100"},{"children":[{"text":" or less on or before"}]}],"ref_id":"101"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"97"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"98"}],"node_type":"Property","ref_id":"98"}],"node_type":"Start","ref_id":"99"}],"ref_id":"101"}],"ref_id":"101"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"102"}],"node_type":"End","ref_id":"103"}],"ref_id":"104"}],"ref_id":"105"}],"ref_id":"106"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"107"}],"ref_id":"108"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"109"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"110"}],"node_type":"Property","ref_id":"110"}],"node_type":"Start","ref_id":"111"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"112"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"113"}],"node_type":"Property","ref_id":"113"}],"node_type":"Start","ref_id":"114"},{"children":[{"text":")"}]}],"ref_id":"115"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"116"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"117"}],"node_type":"Property","ref_id":"117"}],"ref_id":"118"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"119"}],"ref_id":"120"}],"node_type":"Query","ref_id":"121"}],"node_type":"Query","ref_id":"121"}],"ref_id":"122"}],"define_name":"Hospitalization"},{"children":[{"children":[{"children":[{"text":"/*Returns admission time for an encounter or for immediately prior emergency department visit.*/\ndefine function \"HospitalAdmissionTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"88"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"\"Hospitalization\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"89"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"123"}],"node_type":"Start","ref_id":"124"}],"node_type":"Start","ref_id":"124"}],"ref_id":"125"}],"define_name":"HospitalAdmissionTime"},{"children":[{"children":[{"children":[{"text":"/*Returns earliest arrival time for an encounter including any prior ED visit.*/\ndefine function \"HospitalArrivalTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"126"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"\"HospitalizationLocations\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"127"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"128"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"128"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"129"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"130"}],"node_type":"Start","ref_id":"131"}],"ref_id":"132"}],"ref_id":"133"}],"ref_id":"134"},{"children":[{"text":"\n  )"}]}],"ref_id":"135"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"136"}],"node_type":"Property","ref_id":"136"}],"node_type":"Start","ref_id":"137"}],"node_type":"Start","ref_id":"137"}],"ref_id":"138"}],"define_name":"HospitalArrivalTime"},{"children":[{"children":[{"children":[{"text":"/*Returns the length of stay in days (i.e. the number of days between admission and discharge) for the given encounter, or from the admission of any immediately prior emergency department visit to the discharge of the encounter*/\ndefine function \"HospitalizationLengthofStay\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"141"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"LengthInDays("}]},{"children":[{"children":[{"text":"\"Hospitalization\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"142"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"143"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"144"}],"node_type":"FunctionRef","ref_id":"144"}],"ref_id":"145"}],"define_name":"HospitalizationLengthofStay"},{"children":[{"children":[{"children":[{"text":"/*Returns the latest departure time for encounter including any prior ED visit.*/\ndefine function \"HospitalDepartureTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"146"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"\"HospitalizationLocations\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"147"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"148"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"148"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"149"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"150"}],"node_type":"Start","ref_id":"151"}],"ref_id":"152"}],"ref_id":"153"}],"ref_id":"154"},{"children":[{"text":"\n  )"}]}],"ref_id":"155"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"156"}],"node_type":"Property","ref_id":"156"}],"node_type":"End","ref_id":"157"}],"node_type":"End","ref_id":"157"}],"ref_id":"158"}],"define_name":"HospitalDepartureTime"},{"children":[{"children":[{"children":[{"text":"/*Hospital Discharge Time returns the discharge time for an encounter*/\ndefine function \"HospitalDischargeTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"159"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"160"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"161"}],"node_type":"Property","ref_id":"161"}],"node_type":"End","ref_id":"162"}],"node_type":"End","ref_id":"162"}],"ref_id":"163"}],"define_name":"HospitalDischargeTime"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization with Observation and Outpatient Surgery Service returns the total interval from the start of any immediately prior emergency department visit, outpatient surgery visit or observation visit to the discharge of the given encounter.*/\ndefine function \"HospitalizationWithObservationAndOutpatientSurgeryService\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"164"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"165"},{"children":[{"text":" Visit"}]}],"ref_id":"166"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"ObsVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Observation Services\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"167"}],"node_type":"Retrieve","ref_id":"167"},{"children":[{"text":" LastObs"}]}],"ref_id":"168"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastObs"}]}],"ref_id":"169"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"170"}],"node_type":"Property","ref_id":"170"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"174"},{"children":[{"text":" or less on or before"}]}],"ref_id":"175"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"171"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"172"}],"node_type":"Property","ref_id":"172"}],"node_type":"Start","ref_id":"173"}],"ref_id":"175"}],"ref_id":"175"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"176"}],"node_type":"End","ref_id":"177"}],"ref_id":"178"}],"ref_id":"179"}],"ref_id":"180"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"181"}],"ref_id":"182"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"VisitStart: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"ObsVisit"}]}],"ref_id":"183"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"184"}],"node_type":"Property","ref_id":"184"}],"node_type":"Start","ref_id":"185"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"186"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"187"}],"node_type":"Property","ref_id":"187"}],"node_type":"Start","ref_id":"188"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"189"}],"ref_id":"190"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"191"}],"node_type":"Retrieve","ref_id":"191"},{"children":[{"text":" LastED"}]}],"ref_id":"192"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"193"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"194"}],"node_type":"Property","ref_id":"194"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"196"},{"children":[{"text":" or less on or before"}]}],"ref_id":"197"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"195"}],"ref_id":"197"}],"ref_id":"197"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"198"}],"node_type":"End","ref_id":"199"}],"ref_id":"200"}],"ref_id":"201"}],"ref_id":"202"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"203"}],"ref_id":"204"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"VisitStartWithED: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"205"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"206"}],"node_type":"Property","ref_id":"206"}],"node_type":"Start","ref_id":"207"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"208"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"209"}],"ref_id":"210"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"OutpatientSurgeryVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Outpatient Surgery Service\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"211"}],"node_type":"Retrieve","ref_id":"211"},{"children":[{"text":" LastSurgeryOP"}]}],"ref_id":"212"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastSurgeryOP"}]}],"ref_id":"213"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"214"}],"node_type":"Property","ref_id":"214"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"216"},{"children":[{"text":" or less on or before"}]}],"ref_id":"217"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"VisitStartWithED"}]}],"node_type":"QueryLetRef","ref_id":"215"}],"ref_id":"217"}],"ref_id":"217"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"218"}],"node_type":"End","ref_id":"219"}],"ref_id":"220"}],"ref_id":"221"}],"ref_id":"222"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"223"}],"ref_id":"224"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"OutpatientSurgeryVisit"}]}],"ref_id":"225"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"226"}],"node_type":"Property","ref_id":"226"}],"node_type":"Start","ref_id":"227"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"VisitStartWithED"}]}],"node_type":"QueryLetRef","ref_id":"228"},{"children":[{"text":")"}]}],"ref_id":"229"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"230"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"231"}],"node_type":"Property","ref_id":"231"}],"ref_id":"232"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"233"}],"ref_id":"234"}],"node_type":"Query","ref_id":"235"}],"node_type":"Query","ref_id":"235"}],"ref_id":"236"}],"define_name":"HospitalizationWithObservationAndOutpatientSurgeryService"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization with Observation returns the total interval from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\ndefine function \"HospitalizationWithObservation\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"237"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"238"},{"children":[{"text":" Visit"}]}],"ref_id":"239"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"ObsVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Observation Services\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"240"}],"node_type":"Retrieve","ref_id":"240"},{"children":[{"text":" LastObs"}]}],"ref_id":"241"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastObs"}]}],"ref_id":"242"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"243"}],"node_type":"Property","ref_id":"243"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"247"},{"children":[{"text":" or less on or before"}]}],"ref_id":"248"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"244"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"245"}],"node_type":"Property","ref_id":"245"}],"node_type":"Start","ref_id":"246"}],"ref_id":"248"}],"ref_id":"248"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"249"}],"node_type":"End","ref_id":"250"}],"ref_id":"251"}],"ref_id":"252"}],"ref_id":"253"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"254"}],"ref_id":"255"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"VisitStart: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"ObsVisit"}]}],"ref_id":"256"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"257"}],"node_type":"Property","ref_id":"257"}],"node_type":"Start","ref_id":"258"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"259"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"260"}],"node_type":"Property","ref_id":"260"}],"node_type":"Start","ref_id":"261"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"262"}],"ref_id":"263"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"264"}],"node_type":"Retrieve","ref_id":"264"},{"children":[{"text":" LastED"}]}],"ref_id":"265"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"266"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"267"}],"node_type":"Property","ref_id":"267"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"269"},{"children":[{"text":" or less on or before"}]}],"ref_id":"270"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"268"}],"ref_id":"270"}],"ref_id":"270"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"271"}],"node_type":"End","ref_id":"272"}],"ref_id":"273"}],"ref_id":"274"}],"ref_id":"275"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"276"}],"ref_id":"277"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"278"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"279"}],"node_type":"Property","ref_id":"279"}],"node_type":"Start","ref_id":"280"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"281"},{"children":[{"text":")"}]}],"ref_id":"282"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"283"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"284"}],"node_type":"Property","ref_id":"284"}],"ref_id":"285"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"286"}],"ref_id":"287"}],"node_type":"Query","ref_id":"288"}],"node_type":"Query","ref_id":"288"}],"ref_id":"289"}],"define_name":"HospitalizationWithObservation"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization with Observation Length of Stay returns the length in days from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\ndefine function \"HospitalizationWithObservationLengthofStay\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"290"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"\"LengthInDays\"("}]},{"children":[{"children":[{"text":"\"HospitalizationWithObservation\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"291"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"292"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"293"}],"node_type":"FunctionRef","ref_id":"293"}],"ref_id":"294"}],"define_name":"HospitalizationWithObservationLengthofStay"},{"children":[{"children":[{"children":[{"text":"/*First Inpatient Intensive Care Unit returns the first intensive care unit for the given encounter, without considering any immediately prior emergency department visit.*/\ndefine function \"FirstInpatientIntensiveCareUnit\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"295"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"296"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"node_type":"Property","ref_id":"297"}],"node_type":"Property","ref_id":"297"},{"children":[{"text":")"}]}],"node_type":"Property","ref_id":"297"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"298"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"HospitalLocation"}]}],"ref_id":"299"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"300"}],"ref_id":"300"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Intensive Care Unit\""}]}],"ref_id":"301"}],"node_type":"InValueSet","ref_id":"302"},{"children":[{"text":"\n        and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"HospitalLocation"}]}],"ref_id":"303"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"304"}],"node_type":"Property","ref_id":"304"},{"children":[{"text":" during "}],"node_type":"IncludedIn","ref_id":"307"},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"305"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"306"}],"node_type":"Property","ref_id":"306"}],"node_type":"IncludedIn","ref_id":"307"}],"ref_id":"308"}],"ref_id":"308"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"309"}],"node_type":"Start","ref_id":"310"}],"ref_id":"311"}],"ref_id":"312"}],"ref_id":"313"},{"children":[{"text":"\n  )"}]}],"node_type":"First","ref_id":"314"}],"node_type":"First","ref_id":"314"}],"ref_id":"315"}],"define_name":"FirstInpatientIntensiveCareUnit"},{"children":[{"children":[{"children":[{"text":"/*Given a datetime and a period, returns the period (if a period is provided) or the interval beginning and ending on the datetime (if a datetime is provided)*/\ndefine function \"NormalizeInterval\"(pointInTime "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"316"},{"children":[{"text":", period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"317"},{"children":[{"text":"\u003e"}]}],"ref_id":"318"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"pointInTime"}]}],"node_type":"OperandRef","ref_id":"319"},{"children":[{"text":" is not null"}]}],"ref_id":"320"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"pointInTime"}]}],"ref_id":"321"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"pointInTime"}]}],"ref_id":"322"},{"children":[{"text":"]"}]}],"ref_id":"323"},{"children":[{"text":"\n    else "}]},{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"324"},{"children":[{"text":" is not null"}]}],"ref_id":"325"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"period"}]}],"ref_id":"326"},{"children":[{"text":" \n    else "}]},{"children":[{"children":[{"text":"null as "}],"node_type":"Null","ref_id":"327"},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"328"},{"children":[{"text":"\u003e"}]}],"ref_id":"329"}],"ref_id":"330"}],"ref_id":"331"}],"node_type":"If","ref_id":"332"}],"node_type":"If","ref_id":"332"}],"ref_id":"333"}],"define_name":"NormalizeInterval"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return true if the interval has a starting boundary specified (i.e. the start of the interval is not null and not the minimum DateTime value)*/\ndefine function \"HasStart\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"334"},{"children":[{"text":"\u003e"}]}],"ref_id":"335"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"not "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"336"}],"node_type":"Start","ref_id":"337"},{"children":[{"text":" is null"}]}],"node_type":"IsNull","ref_id":"338"},{"children":[{"text":"\n      or "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"339"}],"node_type":"Start","ref_id":"340"},{"children":[{"text":" = "}]},{"children":[{"children":[{"text":"minimum "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"341"}],"node_type":"MinValue","ref_id":"342"}],"node_type":"Equal","ref_id":"343"}],"node_type":"Or","ref_id":"344"},{"children":[{"text":"\n  )"}]}],"node_type":"Or","ref_id":"344"}],"node_type":"Not","ref_id":"345"}],"node_type":"Not","ref_id":"345"}],"ref_id":"346"}],"define_name":"HasStart"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return true if the interval has an ending boundary specified (i.e. the end of the interval is not null and not the maximum DateTime value)*/\ndefine function \"HasEnd\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"347"},{"children":[{"text":"\u003e"}]}],"ref_id":"348"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"not "}]},{"children":[{"children":[{"text":"( \n    "}]},{"children":[{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"349"}],"node_type":"End","ref_id":"350"},{"children":[{"text":" is null"}]}],"node_type":"IsNull","ref_id":"351"},{"children":[{"text":"\n      or \n      "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"352"}],"node_type":"End","ref_id":"353"},{"children":[{"text":" = "}]},{"children":[{"children":[{"text":"maximum "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"354"}],"node_type":"MaxValue","ref_id":"355"}],"node_type":"Equal","ref_id":"356"}],"node_type":"Or","ref_id":"357"},{"children":[{"text":"\n  )"}]}],"node_type":"Or","ref_id":"357"}],"node_type":"Not","ref_id":"358"}],"node_type":"Not","ref_id":"358"}],"ref_id":"359"}],"define_name":"HasEnd"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return the ending point if the interval has an ending boundary specified, otherwise, return the starting point*/\ndefine function \"Latest\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"360"},{"children":[{"text":"\u003e"}]}],"ref_id":"361"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"HasEnd("}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"362"},{"children":[{"text":")"}]}],"ref_id":"363"},{"children":[{"text":")"}]}],"ref_id":"363"},{"children":[{"text":" then \n  "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"364"}],"ref_id":"365"},{"children":[{"text":" \n    else "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"366"}],"ref_id":"367"}],"node_type":"If","ref_id":"368"}],"node_type":"If","ref_id":"368"}],"ref_id":"369"}],"define_name":"Latest"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return the starting point if the interval has a starting boundary specified, otherwise, return the ending point*/\ndefine function \"Earliest\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"370"},{"children":[{"text":"\u003e"}]}],"ref_id":"371"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"HasStart("}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"372"},{"children":[{"text":")"}]}],"ref_id":"373"},{"children":[{"text":")"}]}],"ref_id":"373"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"374"}],"ref_id":"375"},{"children":[{"text":" \n    else \n  "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"376"}],"ref_id":"377"}],"node_type":"If","ref_id":"378"}],"node_type":"If","ref_id":"378"}],"ref_id":"379"}],"define_name":"Earliest"},{"children":[{"children":[{"children":[{"text":"/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the ending point of the period if the period has an ending boundary specified, otherwise returns the starting point of the interval*/\ndefine function \"LatestOf\"(pointInTime "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"380"},{"children":[{"text":", period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"381"},{"children":[{"text":"\u003e"}]}],"ref_id":"382"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Latest("}]},{"children":[{"children":[{"text":"NormalizeInterval("}]},{"children":[{"children":[{"text":"pointInTime"}]}],"node_type":"OperandRef","ref_id":"383"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"384"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"385"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"386"}],"node_type":"FunctionRef","ref_id":"386"}],"ref_id":"387"}],"define_name":"LatestOf"},{"children":[{"children":[{"children":[{"text":"/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the starting point of the period if the period has a starting boundary specified, otherwise returns the ending point of the period*/\ndefine function \"EarliestOf\"(pointInTime "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"388"},{"children":[{"text":", period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"389"},{"children":[{"text":"\u003e"}]}],"ref_id":"390"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Earliest("}]},{"children":[{"children":[{"text":"NormalizeInterval("}]},{"children":[{"children":[{"text":"pointInTime"}]}],"node_type":"OperandRef","ref_id":"391"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"392"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"393"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"394"}],"node_type":"FunctionRef","ref_id":"394"}],"ref_id":"395"}],"define_name":"EarliestOf"}],"identifier":{"id":"MATGlobalCommonFunctionsQDM","version":"8.0.000"}},"is_main_library":false,"is_top_level":true,"library_name":"MATGlobalCommonFunctionsQDM","library_version":"8.0.000","statement_dependencies":[{"_id":"68923f89a83e15671c2e4c98","statement_name":"NormalizeInterval"},{"_id":"68923f89a83e15671c2e4c99","statement_name":"EarliestOf","statement_references":[{"_id":"68923f89a83e15671c2e4c96","hqmf_id":null,"library_name":"MATGlobalCommonFunctionsQDM","statement_name":"Earliest"},{"_id":"68923f89a83e15671c2e4c97","hqmf_id":null,"library_name":"MATGlobalCommonFunctionsQDM","statement_name":"NormalizeInterval"}]},{"_id":"68923f89a83e15671c2e4c9a","statement_name":"Earliest","statement_references":[{"_id":"68923f90a83e15671c2e4e8f","hqmf_id":null,"library_name":"MATGlobalCommonFunctionsQDM","statement_name":"HasStart"}]},{"_id":"68923f89a83e15671c2e4c9b","statement_name":"HasStart"},{"_id":"68923f89a83e15671c2e4c9c","statement_name":"HospitalizationWithObservation"}]},{"_id":"68923f89a83e15671c2e4ca3","cql":"library TJCOverallQDM version '8.0.000'\n\nusing QDM version '5.6'\n\ninclude MATGlobalCommonFunctionsQDM version '8.0.000' called Global\n\nvalueset \"Comfort Measures\": 'urn:oid:1.3.6.1.4.1.33895.1.3.0.45' \nvalueset \"Discharge To Acute Care Facility\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.87' \nvalueset \"Discharged to Health Care Facility for Hospice Care\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.207' \nvalueset \"Discharged to Home for Hospice Care\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.209' \nvalueset \"Emergency Department Visit\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.292' \nvalueset \"Ischemic Stroke\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.247' \nvalueset \"Left Against Medical Advice\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.308' \nvalueset \"Nonelective Inpatient Encounter\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.424' \nvalueset \"Observation Services\": 'urn:oid:2.16.840.1.113762.1.4.1111.143' \nvalueset \"Patient Expired\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.309' \n\nparameter \"Measurement Period\" Interval\u003cDateTime\u003e\n\ncontext Patient\n\ndefine \"Encounter with Comfort Measures during Hospitalization\":\n  \"Ischemic Stroke Encounter\" IschemicStrokeEncounter\n    with \"Intervention Comfort Measures\" ComfortMeasure\n      such that Coalesce(start of Global.\"NormalizeInterval\"(ComfortMeasure.relevantDatetime, ComfortMeasure.relevantPeriod), ComfortMeasure.authorDatetime)during Global.\"HospitalizationWithObservation\" ( IschemicStrokeEncounter )\n\ndefine \"Intervention Comfort Measures\":\n  [\"Intervention, Order\": \"Comfort Measures\"]\n    union [\"Intervention, Performed\": \"Comfort Measures\"]\n\ndefine \"Ischemic Stroke Encounters with Discharge Disposition\":\n  ( ( \"Ischemic Stroke Encounter\" IschemicStrokeEncounter\n        where IschemicStrokeEncounter.dischargeDisposition in \"Discharge To Acute Care Facility\"\n          or IschemicStrokeEncounter.dischargeDisposition in \"Left Against Medical Advice\"\n          or IschemicStrokeEncounter.dischargeDisposition in \"Patient Expired\"\n          or IschemicStrokeEncounter.dischargeDisposition in \"Discharged to Home for Hospice Care\"\n          or IschemicStrokeEncounter.dischargeDisposition in \"Discharged to Health Care Facility for Hospice Care\"\n    )\n  )\n\ndefine \"Non Elective Encounter with Age\":\n  [\"Encounter, Performed\": \"Nonelective Inpatient Encounter\"] NonElectiveEncounter\n    where AgeInYearsAt(date from start of NonElectiveEncounter.relevantPeriod) \u003e= 18\n      and NonElectiveEncounter.relevantPeriod ends during day of \"Measurement Period\"\n\ndefine \"Ischemic Stroke Encounter\":\n  \"Non Elective Encounter with Age\" NonElectiveEncounterWithAge\n    where exists ( NonElectiveEncounterWithAge.diagnoses Diagnosis\n        where Diagnosis.code in \"Ischemic Stroke\"\n          and Diagnosis.rank = 1\n    )\n\ndefine function \"HospitalizationWithObservationLengthofStay\"(Encounter \"Encounter, Performed\" ):\n  Global.\"LengthInDays\" ( Global.\"HospitalizationWithObservation\" ( Encounter ) )\n\ndefine function \"CalendarDayOfOrDayAfter\"(StartValue DateTime ):\n  Interval[date from ( StartValue ), date from ( StartValue ) + 1 day]\n\n","elm":{"library":{"annotation":[{"translatorOptions":"EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion,DisableMethodInvocation","type":"CqlToElmInfo"},{"type":"Annotation","s":{"r":"117","s":[{"value":["","library TJCOverallQDM version '8.0.000'"]}]}}],"identifier":{"id":"TJCOverallQDM","version":"8.0.000"},"schemaIdentifier":{"id":"urn:hl7-org:elm","version":"r1"},"usings":{"def":[{"localIdentifier":"System","uri":"urn:hl7-org:elm-types:r1"},{"localId":"1","locator":"3:1-3:23","localIdentifier":"QDM","uri":"urn:healthit-gov:qdm:v5_6","version":"5.6","annotation":[{"type":"Annotation","s":{"r":"1","s":[{"value":["","using "]},{"s":[{"value":["QDM"]}]},{"value":[" version ","'5.6'"]}]}}]}]},"includes":{"def":[{"localId":"2","locator":"5:1-5:67","localIdentifier":"Global","path":"MATGlobalCommonFunctionsQDM","version":"8.0.000","annotation":[{"type":"Annotation","s":{"r":"2","s":[{"value":["","include "]},{"s":[{"value":["MATGlobalCommonFunctionsQDM"]}]},{"value":[" version ","'8.0.000'"," called ","Global"]}]}}]}]},"parameters":{"def":[{"localId":"15","locator":"18:1-18:49","name":"Measurement Period","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"15","s":[{"value":["","parameter ","\"Measurement Period\""," "]},{"r":"14","s":[{"value":["Interval\u003c"]},{"r":"13","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}}],"parameterTypeSpecifier":{"localId":"14","locator":"18:32-18:49","type":"IntervalTypeSpecifier","pointType":{"localId":"13","locator":"18:41-18:48","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},"valueSets":{"def":[{"localId":"3","locator":"7:1-7:65","name":"Comfort Measures","id":"1.3.6.1.4.1.33895.1.3.0.45","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"3","s":[{"value":["","valueset ","\"Comfort Measures\"",": ","'urn:oid:1.3.6.1.4.1.33895.1.3.0.45'"]}]}}]},{"localId":"4","locator":"8:1-8:87","name":"Discharge To Acute Care Facility","id":"2.16.840.1.113883.3.117.1.7.1.87","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"4","s":[{"value":["","valueset ","\"Discharge To Acute Care Facility\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.87'"]}]}}]},{"localId":"5","locator":"9:1-9:107","name":"Discharged to Health Care Facility for Hospice Care","id":"2.16.840.1.113883.3.117.1.7.1.207","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"5","s":[{"value":["","valueset ","\"Discharged to Health Care Facility for Hospice Care\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.207'"]}]}}]},{"localId":"6","locator":"10:1-10:91","name":"Discharged to Home for Hospice Care","id":"2.16.840.1.113883.3.117.1.7.1.209","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"6","s":[{"value":["","valueset ","\"Discharged to Home for Hospice Care\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.209'"]}]}}]},{"localId":"7","locator":"11:1-11:82","name":"Emergency Department Visit","id":"2.16.840.1.113883.3.117.1.7.1.292","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"7","s":[{"value":["","valueset ","\"Emergency Department Visit\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.292'"]}]}}]},{"localId":"8","locator":"12:1-12:71","name":"Ischemic Stroke","id":"2.16.840.1.113883.3.117.1.7.1.247","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"8","s":[{"value":["","valueset ","\"Ischemic Stroke\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.247'"]}]}}]},{"localId":"9","locator":"13:1-13:83","name":"Left Against Medical Advice","id":"2.16.840.1.113883.3.117.1.7.1.308","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"9","s":[{"value":["","valueset ","\"Left Against Medical Advice\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.308'"]}]}}]},{"localId":"10","locator":"14:1-14:87","name":"Nonelective Inpatient Encounter","id":"2.16.840.1.113883.3.117.1.7.1.424","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"10","s":[{"value":["","valueset ","\"Nonelective Inpatient Encounter\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.424'"]}]}}]},{"localId":"11","locator":"15:1-15:73","name":"Observation Services","id":"2.16.840.1.113762.1.4.1111.143","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"11","s":[{"value":["","valueset ","\"Observation Services\"",": ","'urn:oid:2.16.840.1.113762.1.4.1111.143'"]}]}}]},{"localId":"12","locator":"16:1-16:71","name":"Patient Expired","id":"2.16.840.1.113883.3.117.1.7.1.309","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"12","s":[{"value":["","valueset ","\"Patient Expired\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.309'"]}]}}]}]},"contexts":{"def":[{"locator":"20:1-20:15","name":"Patient"}]},"statements":{"def":[{"locator":"20:1-20:15","name":"Patient","context":"Patient","expression":{"type":"SingletonFrom","operand":{"locator":"20:1-20:15","dataType":"{urn:healthit-gov:qdm:v5_6}Patient","templateId":"Patient","type":"Retrieve"}}},{"localId":"31","locator":"41:1-44:85","name":"Non Elective Encounter with Age","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"31","s":[{"value":["","define ","\"Non Elective Encounter with Age\"",":\n  "]},{"r":"30","s":[{"s":[{"r":"17","s":[{"r":"16","s":[{"r":"16","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Nonelective Inpatient Encounter\""]}]},{"value":["]"]}]}]},{"value":[" ","NonElectiveEncounter"]}]}]},{"value":["\n    "]},{"r":"29","s":[{"value":["where "]},{"r":"29","s":[{"r":"24","s":[{"r":"22","s":[{"value":["AgeInYearsAt","("]},{"r":"21","s":[{"value":["date from "]},{"r":"20","s":[{"value":["start of "]},{"r":"19","s":[{"r":"18","s":[{"value":["NonElectiveEncounter"]}]},{"value":["."]},{"r":"19","s":[{"value":["relevantPeriod"]}]}]}]}]},{"value":[")"]}]},{"r":"23","value":[" ","\u003e="," ","18"]}]},{"value":["\n      and "]},{"r":"28","s":[{"r":"26","s":[{"r":"25","s":[{"value":["NonElectiveEncounter"]}]},{"value":["."]},{"r":"26","s":[{"value":["relevantPeriod"]}]}]},{"r":"28","value":[" ","ends during day of"," "]},{"r":"27","s":[{"value":["\"Measurement Period\""]}]}]}]}]}]}]}}],"expression":{"localId":"30","locator":"42:3-44:85","type":"Query","source":[{"localId":"17","locator":"42:3-42:82","alias":"NonElectiveEncounter","expression":{"localId":"16","locator":"42:3-42:61","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"42:28-42:60","name":"Nonelective Inpatient Encounter","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"29","locator":"43:5-44:85","type":"And","operand":[{"localId":"24","locator":"43:11-43:84","type":"GreaterOrEqual","operand":[{"localId":"22","locator":"43:11-43:78","precision":"Year","type":"CalculateAgeAt","operand":[{"type":"ToDate","operand":{"path":"birthDatetime","type":"Property","source":{"name":"Patient","type":"ExpressionRef"}}},{"localId":"21","locator":"43:24-43:77","type":"DateFrom","operand":{"localId":"20","locator":"43:34-43:77","type":"Start","operand":{"localId":"19","locator":"43:43-43:77","path":"relevantPeriod","scope":"NonElectiveEncounter","type":"Property"}}}]},{"localId":"23","locator":"43:83-43:84","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"18","type":"Literal"}]},{"localId":"28","locator":"44:11-44:85","precision":"Day","type":"In","operand":[{"locator":"44:47-44:50","type":"End","operand":{"localId":"26","locator":"44:11-44:45","path":"relevantPeriod","scope":"NonElectiveEncounter","type":"Property"}},{"localId":"27","locator":"44:66-44:85","name":"Measurement Period","type":"ParameterRef"}]}]}}},{"localId":"48","locator":"46:1-51:5","name":"Ischemic Stroke Encounter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"48","s":[{"value":["","define ","\"Ischemic Stroke Encounter\"",":\n  "]},{"r":"47","s":[{"s":[{"r":"33","s":[{"r":"32","s":[{"s":[{"value":["\"Non Elective Encounter with Age\""]}]}]},{"value":[" ","NonElectiveEncounterWithAge"]}]}]},{"value":["\n    "]},{"r":"46","s":[{"value":["where "]},{"r":"46","s":[{"value":["exists "]},{"r":"45","s":[{"value":["( "]},{"r":"45","s":[{"s":[{"r":"35","s":[{"r":"34","s":[{"s":[{"value":["NonElectiveEncounterWithAge",".","diagnoses"]}]}]},{"value":[" ","Diagnosis"]}]}]},{"value":["\n        "]},{"r":"44","s":[{"value":["where "]},{"r":"44","s":[{"r":"39","s":[{"r":"37","s":[{"r":"36","s":[{"value":["Diagnosis"]}]},{"value":["."]},{"r":"37","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"38","s":[{"value":["\"Ischemic Stroke\""]}]}]},{"value":["\n          and "]},{"r":"43","s":[{"r":"41","s":[{"r":"40","s":[{"value":["Diagnosis"]}]},{"value":["."]},{"r":"41","s":[{"value":["rank"]}]}]},{"r":"42","value":[" ","="," ","1"]}]}]}]}]},{"value":["\n    )"]}]}]}]}]}]}}],"expression":{"localId":"47","locator":"47:3-51:5","type":"Query","source":[{"localId":"33","locator":"47:3-47:63","alias":"NonElectiveEncounterWithAge","expression":{"localId":"32","locator":"47:3-47:35","name":"Non Elective Encounter with Age","type":"ExpressionRef"}}],"relationship":[],"where":{"localId":"46","locator":"48:5-51:5","type":"Exists","operand":{"localId":"45","locator":"48:18-51:5","type":"Query","source":[{"localId":"35","locator":"48:20-48:66","alias":"Diagnosis","expression":{"localId":"34","locator":"48:20-48:56","path":"diagnoses","scope":"NonElectiveEncounterWithAge","type":"Property"}}],"relationship":[],"where":{"localId":"44","locator":"49:9-50:32","type":"And","operand":[{"localId":"39","locator":"49:15-49:49","type":"InValueSet","code":{"localId":"37","locator":"49:15-49:28","path":"code","scope":"Diagnosis","type":"Property"},"valueset":{"localId":"38","locator":"49:33-49:49","name":"Ischemic Stroke","preserve":true}},{"localId":"43","locator":"50:15-50:32","type":"Equal","operand":[{"localId":"41","locator":"50:15-50:28","path":"rank","scope":"Diagnosis","type":"Property"},{"localId":"42","locator":"50:32","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"1","type":"Literal"}]}]}}}}},{"localId":"54","locator":"27:1-29:57","name":"Intervention Comfort Measures","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"54","s":[{"value":["","define ","\"Intervention Comfort Measures\"",":\n  "]},{"r":"53","s":[{"r":"51","s":[{"value":["[","\"Intervention, Order\"",": "]},{"s":[{"value":["\"Comfort Measures\""]}]},{"value":["]"]}]},{"value":["\n    union "]},{"r":"52","s":[{"value":["[","\"Intervention, Performed\"",": "]},{"s":[{"value":["\"Comfort Measures\""]}]},{"value":["]"]}]}]}]}}],"expression":{"localId":"53","locator":"28:3-29:57","type":"Union","operand":[{"type":"As","operand":{"localId":"51","locator":"28:3-28:45","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveInterventionOrder","templateId":"PositiveInterventionOrder","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"28:27-28:44","name":"Comfort Measures","preserve":true,"type":"ValueSetRef"}},"asTypeSpecifier":{"type":"ListTypeSpecifier","elementType":{"type":"ChoiceTypeSpecifier","choice":[{"name":"{urn:healthit-gov:qdm:v5_6}PositiveInterventionPerformed","type":"NamedTypeSpecifier"},{"name":"{urn:healthit-gov:qdm:v5_6}PositiveInterventionOrder","type":"NamedTypeSpecifier"}]}}},{"type":"As","operand":{"localId":"52","locator":"29:11-29:57","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveInterventionPerformed","templateId":"PositiveInterventionPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"29:39-29:56","name":"Comfort Measures","preserve":true,"type":"ValueSetRef"}},"asTypeSpecifier":{"type":"ListTypeSpecifier","elementType":{"type":"ChoiceTypeSpecifier","choice":[{"name":"{urn:healthit-gov:qdm:v5_6}PositiveInterventionPerformed","type":"NamedTypeSpecifier"},{"name":"{urn:healthit-gov:qdm:v5_6}PositiveInterventionOrder","type":"NamedTypeSpecifier"}]}}}]}},{"localId":"73","locator":"22:1-25:230","name":"Encounter with Comfort Measures during Hospitalization","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"73","s":[{"value":["","define ","\"Encounter with Comfort Measures during Hospitalization\"",":\n  "]},{"r":"72","s":[{"s":[{"r":"50","s":[{"r":"49","s":[{"s":[{"value":["\"Ischemic Stroke Encounter\""]}]}]},{"value":[" ","IschemicStrokeEncounter"]}]}]},{"value":["\n    "]},{"r":"71","s":[{"value":["with "]},{"r":"56","s":[{"r":"55","s":[{"s":[{"value":["\"Intervention Comfort Measures\""]}]}]},{"value":[" ","ComfortMeasure"]}]},{"value":["\n      such that "]},{"r":"70","s":[{"r":"66","s":[{"value":["Coalesce","("]},{"r":"63","s":[{"value":["start of "]},{"r":"62","s":[{"r":"57","s":[{"value":["Global"]}]},{"value":["."]},{"r":"62","s":[{"value":["\"NormalizeInterval\"","("]},{"r":"59","s":[{"r":"58","s":[{"value":["ComfortMeasure"]}]},{"value":["."]},{"r":"59","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"61","s":[{"r":"60","s":[{"value":["ComfortMeasure"]}]},{"value":["."]},{"r":"61","s":[{"value":["relevantPeriod"]}]}]},{"value":[")"]}]}]}]},{"value":[", "]},{"r":"65","s":[{"r":"64","s":[{"value":["ComfortMeasure"]}]},{"value":["."]},{"r":"65","s":[{"value":["authorDatetime"]}]}]},{"value":[")"]}]},{"r":"70","value":["during"," "]},{"r":"69","s":[{"r":"67","s":[{"value":["Global"]}]},{"value":["."]},{"r":"69","s":[{"value":["\"HospitalizationWithObservation\""," ( "]},{"r":"68","s":[{"value":["IschemicStrokeEncounter"]}]},{"value":[" )"]}]}]}]}]}]}]}}],"expression":{"localId":"72","locator":"23:3-25:230","type":"Query","source":[{"localId":"50","locator":"23:3-23:53","alias":"IschemicStrokeEncounter","expression":{"localId":"49","locator":"23:3-23:29","name":"Ischemic Stroke Encounter","type":"ExpressionRef"}}],"relationship":[{"localId":"71","locator":"24:5-25:230","alias":"ComfortMeasure","type":"With","expression":{"localId":"55","locator":"24:10-24:40","name":"Intervention Comfort Measures","type":"ExpressionRef"},"suchThat":{"localId":"70","locator":"25:17-25:230","type":"In","operand":[{"localId":"66","locator":"25:17-25:156","type":"Coalesce","operand":[{"localId":"63","locator":"25:26-25:124","type":"Start","operand":{"localId":"62","locator":"25:35-25:124","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"59","locator":"25:62-25:92","path":"relevantDatetime","scope":"ComfortMeasure","type":"Property"},{"localId":"61","locator":"25:95-25:123","path":"relevantPeriod","scope":"ComfortMeasure","type":"Property"}]}},{"localId":"65","locator":"25:127-25:155","path":"authorDatetime","scope":"ComfortMeasure","type":"Property"}]},{"localId":"69","locator":"25:164-25:230","name":"HospitalizationWithObservation","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"68","locator":"25:206-25:228","name":"IschemicStrokeEncounter","type":"AliasRef"}]}]}}]}},{"localId":"101","locator":"31:1-39:3","name":"Ischemic Stroke Encounters with Discharge Disposition","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"101","s":[{"value":["","define ","\"Ischemic Stroke Encounters with Discharge Disposition\"",":\n  "]},{"r":"100","s":[{"value":["( "]},{"r":"100","s":[{"value":["( "]},{"r":"100","s":[{"s":[{"r":"75","s":[{"r":"74","s":[{"s":[{"value":["\"Ischemic Stroke Encounter\""]}]}]},{"value":[" ","IschemicStrokeEncounter"]}]}]},{"value":["\n        "]},{"r":"99","s":[{"value":["where "]},{"r":"99","s":[{"r":"94","s":[{"r":"89","s":[{"r":"84","s":[{"r":"79","s":[{"r":"77","s":[{"r":"76","s":[{"value":["IschemicStrokeEncounter"]}]},{"value":["."]},{"r":"77","s":[{"value":["dischargeDisposition"]}]}]},{"value":[" in "]},{"r":"78","s":[{"value":["\"Discharge To Acute Care Facility\""]}]}]},{"value":["\n          or "]},{"r":"83","s":[{"r":"81","s":[{"r":"80","s":[{"value":["IschemicStrokeEncounter"]}]},{"value":["."]},{"r":"81","s":[{"value":["dischargeDisposition"]}]}]},{"value":[" in "]},{"r":"82","s":[{"value":["\"Left Against Medical Advice\""]}]}]}]},{"value":["\n          or "]},{"r":"88","s":[{"r":"86","s":[{"r":"85","s":[{"value":["IschemicStrokeEncounter"]}]},{"value":["."]},{"r":"86","s":[{"value":["dischargeDisposition"]}]}]},{"value":[" in "]},{"r":"87","s":[{"value":["\"Patient Expired\""]}]}]}]},{"value":["\n          or "]},{"r":"93","s":[{"r":"91","s":[{"r":"90","s":[{"value":["IschemicStrokeEncounter"]}]},{"value":["."]},{"r":"91","s":[{"value":["dischargeDisposition"]}]}]},{"value":[" in "]},{"r":"92","s":[{"value":["\"Discharged to Home for Hospice Care\""]}]}]}]},{"value":["\n          or "]},{"r":"98","s":[{"r":"96","s":[{"r":"95","s":[{"value":["IschemicStrokeEncounter"]}]},{"value":["."]},{"r":"96","s":[{"value":["dischargeDisposition"]}]}]},{"value":[" in "]},{"r":"97","s":[{"value":["\"Discharged to Health Care Facility for Hospice Care\""]}]}]}]}]}]},{"value":["\n    )"]}]},{"value":["\n  )"]}]}]}}],"expression":{"localId":"100","locator":"32:3-39:3","type":"Query","source":[{"localId":"75","locator":"32:7-32:57","alias":"IschemicStrokeEncounter","expression":{"localId":"74","locator":"32:7-32:33","name":"Ischemic Stroke Encounter","type":"ExpressionRef"}}],"relationship":[],"where":{"localId":"99","locator":"33:9-37:114","type":"Or","operand":[{"localId":"94","locator":"33:15-36:98","type":"Or","operand":[{"localId":"89","locator":"33:15-35:78","type":"Or","operand":[{"localId":"84","locator":"33:15-34:90","type":"Or","operand":[{"localId":"79","locator":"33:15-33:96","type":"InValueSet","code":{"localId":"77","locator":"33:15-33:58","path":"dischargeDisposition","scope":"IschemicStrokeEncounter","type":"Property"},"valueset":{"localId":"78","locator":"33:63-33:96","name":"Discharge To Acute Care Facility","preserve":true}},{"localId":"83","locator":"34:14-34:90","type":"InValueSet","code":{"localId":"81","locator":"34:14-34:57","path":"dischargeDisposition","scope":"IschemicStrokeEncounter","type":"Property"},"valueset":{"localId":"82","locator":"34:62-34:90","name":"Left Against Medical Advice","preserve":true}}]},{"localId":"88","locator":"35:14-35:78","type":"InValueSet","code":{"localId":"86","locator":"35:14-35:57","path":"dischargeDisposition","scope":"IschemicStrokeEncounter","type":"Property"},"valueset":{"localId":"87","locator":"35:62-35:78","name":"Patient Expired","preserve":true}}]},{"localId":"93","locator":"36:14-36:98","type":"InValueSet","code":{"localId":"91","locator":"36:14-36:57","path":"dischargeDisposition","scope":"IschemicStrokeEncounter","type":"Property"},"valueset":{"localId":"92","locator":"36:62-36:98","name":"Discharged to Home for Hospice Care","preserve":true}}]},{"localId":"98","locator":"37:14-37:114","type":"InValueSet","code":{"localId":"96","locator":"37:14-37:57","path":"dischargeDisposition","scope":"IschemicStrokeEncounter","type":"Property"},"valueset":{"localId":"97","locator":"37:62-37:114","name":"Discharged to Health Care Facility for Hospice Care","preserve":true}}]}}},{"localId":"108","locator":"53:1-54:81","name":"HospitalizationWithObservationLengthofStay","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"108","s":[{"value":["","define function ","\"HospitalizationWithObservationLengthofStay\"","(","Encounter"," "]},{"r":"102","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"107","s":[{"r":"107","s":[{"r":"103","s":[{"value":["Global"]}]},{"value":["."]},{"r":"107","s":[{"value":["\"LengthInDays\""," ( "]},{"r":"106","s":[{"r":"104","s":[{"value":["Global"]}]},{"value":["."]},{"r":"106","s":[{"value":["\"HospitalizationWithObservation\""," ( "]},{"r":"105","s":[{"value":["Encounter"]}]},{"value":[" )"]}]}]},{"value":[" )"]}]}]}]}]}}],"expression":{"localId":"107","locator":"54:3-54:81","name":"LengthInDays","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"106","locator":"54:27-54:79","name":"HospitalizationWithObservation","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"105","locator":"54:69-54:77","name":"Encounter","type":"OperandRef"}]}]},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"102","locator":"53:72-53:93","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"117","locator":"56:1-57:70","name":"CalendarDayOfOrDayAfter","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"117","s":[{"value":["","define function ","\"CalendarDayOfOrDayAfter\"","(","StartValue"," "]},{"r":"109","s":[{"value":["DateTime"]}]},{"value":[" ):\n  "]},{"r":"116","s":[{"r":"116","s":[{"value":["Interval["]},{"r":"111","s":[{"value":["date from "]},{"r":"110","s":[{"value":["( "]},{"r":"110","s":[{"value":["StartValue"]}]},{"value":[" )"]}]}]},{"value":[", "]},{"r":"115","s":[{"r":"113","s":[{"value":["date from "]},{"r":"112","s":[{"value":["( "]},{"r":"112","s":[{"value":["StartValue"]}]},{"value":[" )"]}]}]},{"value":[" + "]},{"r":"114","s":[{"value":["1 ","day"]}]}]},{"value":["]"]}]}]}]}}],"expression":{"localId":"116","locator":"57:3-57:70","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"111","locator":"57:12-57:35","type":"DateFrom","operand":{"localId":"110","locator":"57:22-57:35","name":"StartValue","type":"OperandRef"}},"high":{"localId":"115","locator":"57:38-57:69","type":"Add","operand":[{"localId":"113","locator":"57:38-57:61","type":"DateFrom","operand":{"localId":"112","locator":"57:48-57:61","name":"StartValue","type":"OperandRef"}},{"localId":"114","locator":"57:65-57:69","value":1,"unit":"day","type":"Quantity"}]}},"operand":[{"name":"StartValue","operandTypeSpecifier":{"localId":"109","locator":"56:54-56:61","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}]}]}}},"elm_annotations":{"statements":[{"children":[{"children":[{"children":[{"text":"define \"Non Elective Encounter with Age\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Nonelective Inpatient Encounter\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"16"}],"node_type":"Retrieve","ref_id":"16"},{"children":[{"text":" NonElectiveEncounter"}]}],"ref_id":"17"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"AgeInYearsAt("}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"NonElectiveEncounter"}]}],"ref_id":"18"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"19"}],"node_type":"Property","ref_id":"19"}],"node_type":"Start","ref_id":"20"}],"node_type":"DateFrom","ref_id":"21"},{"children":[{"text":")"}]}],"node_type":"CalculateAgeAt","ref_id":"22"},{"children":[{"text":" \u003e= 18"}],"node_type":"Literal","ref_id":"23"}],"node_type":"GreaterOrEqual","ref_id":"24"},{"children":[{"text":"\n      and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"NonElectiveEncounter"}]}],"ref_id":"25"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"26"}],"node_type":"Property","ref_id":"26"},{"children":[{"text":" ends during day of "}],"node_type":"In","ref_id":"28"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"27"}],"node_type":"In","ref_id":"28"}],"ref_id":"29"}],"ref_id":"29"}],"node_type":"Query","ref_id":"30"}],"ref_id":"31"}],"define_name":"Non Elective Encounter with Age"},{"children":[{"children":[{"children":[{"text":"define \"Ischemic Stroke Encounter\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Non Elective Encounter with Age\""}]}]}],"node_type":"ExpressionRef","ref_id":"32"},{"children":[{"text":" NonElectiveEncounterWithAge"}]}],"ref_id":"33"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"NonElectiveEncounterWithAge.diagnoses"}]}]}],"node_type":"Property","ref_id":"34"},{"children":[{"text":" Diagnosis"}]}],"ref_id":"35"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Diagnosis"}]}],"ref_id":"36"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"37"}],"ref_id":"37"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Ischemic Stroke\""}]}],"ref_id":"38"}],"node_type":"InValueSet","ref_id":"39"},{"children":[{"text":"\n          and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Diagnosis"}]}],"ref_id":"40"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"rank"}]}],"node_type":"Property","ref_id":"41"}],"node_type":"Property","ref_id":"41"},{"children":[{"text":" = 1"}],"node_type":"Literal","ref_id":"42"}],"node_type":"Equal","ref_id":"43"}],"ref_id":"44"}],"ref_id":"44"}],"node_type":"Query","ref_id":"45"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"45"}],"ref_id":"46"}],"ref_id":"46"}],"node_type":"Query","ref_id":"47"}],"ref_id":"48"}],"define_name":"Ischemic Stroke Encounter"},{"children":[{"children":[{"children":[{"text":"define \"Intervention Comfort Measures\":\n  "}]},{"children":[{"children":[{"children":[{"text":"[\"Intervention, Order\": "}]},{"children":[{"children":[{"text":"\"Comfort Measures\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"51"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"[\"Intervention, Performed\": "}]},{"children":[{"children":[{"text":"\"Comfort Measures\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"52"}],"node_type":"Union","ref_id":"53"}],"ref_id":"54"}],"define_name":"Intervention Comfort Measures"},{"children":[{"children":[{"children":[{"text":"define \"Encounter with Comfort Measures during Hospitalization\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Ischemic Stroke Encounter\""}]}]}],"node_type":"ExpressionRef","ref_id":"49"},{"children":[{"text":" IschemicStrokeEncounter"}]}],"ref_id":"50"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"Intervention Comfort Measures\""}]}]}],"node_type":"ExpressionRef","ref_id":"55"},{"children":[{"text":" ComfortMeasure"}]}],"ref_id":"56"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"57"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\"("}]},{"children":[{"children":[{"children":[{"text":"ComfortMeasure"}]}],"ref_id":"58"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"59"}],"node_type":"Property","ref_id":"59"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"ComfortMeasure"}]}],"ref_id":"60"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"61"}],"node_type":"Property","ref_id":"61"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"62"}],"node_type":"FunctionRef","ref_id":"62"}],"node_type":"Start","ref_id":"63"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"ComfortMeasure"}]}],"ref_id":"64"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"65"}],"node_type":"Property","ref_id":"65"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"66"},{"children":[{"text":"during "}],"node_type":"In","ref_id":"70"},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"67"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"HospitalizationWithObservation\" ( "}]},{"children":[{"children":[{"text":"IschemicStrokeEncounter"}]}],"node_type":"AliasRef","ref_id":"68"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"69"}],"node_type":"FunctionRef","ref_id":"69"}],"node_type":"In","ref_id":"70"}],"ref_id":"71"}],"node_type":"Query","ref_id":"72"}],"ref_id":"73"}],"define_name":"Encounter with Comfort Measures during Hospitalization"},{"children":[{"children":[{"children":[{"text":"define \"Ischemic Stroke Encounters with Discharge Disposition\":\n  "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Ischemic Stroke Encounter\""}]}]}],"node_type":"ExpressionRef","ref_id":"74"},{"children":[{"text":" IschemicStrokeEncounter"}]}],"ref_id":"75"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"IschemicStrokeEncounter"}]}],"ref_id":"76"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"dischargeDisposition"}]}],"ref_id":"77"}],"ref_id":"77"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Discharge To Acute Care Facility\""}]}],"ref_id":"78"}],"node_type":"InValueSet","ref_id":"79"},{"children":[{"text":"\n          or "}]},{"children":[{"children":[{"children":[{"children":[{"text":"IschemicStrokeEncounter"}]}],"ref_id":"80"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"dischargeDisposition"}]}],"ref_id":"81"}],"ref_id":"81"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Left Against Medical Advice\""}]}],"ref_id":"82"}],"node_type":"InValueSet","ref_id":"83"}],"node_type":"Or","ref_id":"84"},{"children":[{"text":"\n          or "}]},{"children":[{"children":[{"children":[{"children":[{"text":"IschemicStrokeEncounter"}]}],"ref_id":"85"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"dischargeDisposition"}]}],"ref_id":"86"}],"ref_id":"86"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Patient Expired\""}]}],"ref_id":"87"}],"node_type":"InValueSet","ref_id":"88"}],"node_type":"Or","ref_id":"89"},{"children":[{"text":"\n          or "}]},{"children":[{"children":[{"children":[{"children":[{"text":"IschemicStrokeEncounter"}]}],"ref_id":"90"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"dischargeDisposition"}]}],"ref_id":"91"}],"ref_id":"91"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Discharged to Home for Hospice Care\""}]}],"ref_id":"92"}],"node_type":"InValueSet","ref_id":"93"}],"node_type":"Or","ref_id":"94"},{"children":[{"text":"\n          or "}]},{"children":[{"children":[{"children":[{"children":[{"text":"IschemicStrokeEncounter"}]}],"ref_id":"95"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"dischargeDisposition"}]}],"ref_id":"96"}],"ref_id":"96"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Discharged to Health Care Facility for Hospice Care\""}]}],"ref_id":"97"}],"node_type":"InValueSet","ref_id":"98"}],"ref_id":"99"}],"ref_id":"99"}],"node_type":"Query","ref_id":"100"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"100"},{"children":[{"text":"\n  )"}]}],"node_type":"Query","ref_id":"100"}],"ref_id":"101"}],"define_name":"Ischemic Stroke Encounters with Discharge Disposition"},{"children":[{"children":[{"children":[{"text":"define function \"HospitalizationWithObservationLengthofStay\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"102"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"103"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"LengthInDays\" ( "}]},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"104"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"HospitalizationWithObservation\" ( "}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"105"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"106"}],"node_type":"FunctionRef","ref_id":"106"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"107"}],"node_type":"FunctionRef","ref_id":"107"}],"node_type":"FunctionRef","ref_id":"107"}],"ref_id":"108"}],"define_name":"HospitalizationWithObservationLengthofStay"},{"children":[{"children":[{"children":[{"text":"define function \"CalendarDayOfOrDayAfter\"(StartValue "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"109"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"StartValue"}]}],"node_type":"OperandRef","ref_id":"110"},{"children":[{"text":" )"}]}],"node_type":"OperandRef","ref_id":"110"}],"ref_id":"111"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"StartValue"}]}],"node_type":"OperandRef","ref_id":"112"},{"children":[{"text":" )"}]}],"node_type":"OperandRef","ref_id":"112"}],"node_type":"DateFrom","ref_id":"113"},{"children":[{"text":" + "}]},{"children":[{"children":[{"text":"1 day"}]}],"node_type":"Quantity","ref_id":"114"}],"ref_id":"115"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"116"}],"node_type":"Interval","ref_id":"116"}],"ref_id":"117"}],"define_name":"CalendarDayOfOrDayAfter"}],"identifier":{"id":"TJCOverallQDM","version":"8.0.000"}},"is_main_library":false,"is_top_level":true,"library_name":"TJCOverallQDM","library_version":"8.0.000","statement_dependencies":[{"_id":"68923f89a83e15671c2e4c9d","statement_name":"Ischemic Stroke Encounter","statement_references":[{"_id":"68923f90a83e15671c2e4e90","hqmf_id":null,"library_name":"TJCOverallQDM","statement_name":"Non Elective Encounter with Age"}]},{"_id":"68923f89a83e15671c2e4c9e","statement_name":"Non Elective Encounter with Age","statement_references":[{"_id":"68923f90a83e15671c2e4e91","hqmf_id":null,"library_name":"TJCOverallQDM","statement_name":"Patient"}]},{"_id":"68923f89a83e15671c2e4c9f","statement_name":"Patient"},{"_id":"68923f89a83e15671c2e4ca0","statement_name":"Intervention Comfort Measures"}]}],"created_at":null,"description":"Ischemic stroke patients with atrial fibrillation/flutter who are prescribed or continuing to take anticoagulation therapy at hospital discharge","hqmf_id":"2C928083-8907-CE68-0189-2656A1CC054B","hqmf_set_id":"03876D69-085B-415C-AE9D-9924171040C2","hqmf_version_number":"14.0.000","main_cql_library":"AnticoagulationTherapyforAtrialFibrillationFlutter","measure_attributes":[{"code":"OTH","value":"71","name":"eCQM Identifier (Measure Authoring Tool)","code_obj":{"type":"CD","null_flavor":"OTH","original_text":"eCQM Identifier (Measure Authoring Tool)"},"value_obj":{"type":"ED","value":"71","media_type":"text/plain"}},{"code":"OTH","value":"Not Applicable","name":"CBE Number","code_obj":{"type":"CD","null_flavor":"OTH","original_text":"CBE Number"},"value_obj":{"type":"ED","value":"Not Applicable","media_type":"text/plain"}},{"code":"COPY","value":"Measure specifications are in the Public Domain.\n\nLOINC(R) copyright 2004-2023 Regenstrief Institute, Inc. This material contains SNOMED Clinical Terms(R) (SNOMED CT[R]) copyright 2004-2023 International Health Terminology Standards Development Organisation. ICD-10 copyright 2023 World Health Organization. All Rights Reserved.","name":"Copyright","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"COPY","title":"Copyright"},"value_obj":{"type":"ED","value":"Measure specifications are in the Public Domain.\n\nLOINC(R) copyright 2004-2023 Regenstrief Institute, Inc. This material contains SNOMED Clinical Terms(R) (SNOMED CT[R]) copyright 2004-2023 International Health Terminology Standards Development Organisation. ICD-10 copyright 2023 World Health Organization. All Rights Reserved.","media_type":"text/plain"}},{"code":"DISC","value":"These performance measures are not clinical guidelines and do not establish a standard of medical care and have not been tested for all potential applications. The measures and specifications are provided without warranty.","name":"Disclaimer","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DISC","title":"Disclaimer"},"value_obj":{"type":"ED","value":"These performance measures are not clinical guidelines and do not establish a standard of medical care and have not been tested for all potential applications. The measures and specifications are provided without warranty.","media_type":"text/plain"}},{"code":"MSRSCORE","name":"Measure Scoring","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRSCORE","title":"Measure Scoring"},"value_obj":{"type":"CD","system":"2.16.840.1.113883.5.1063","code":"PROPOR","title":"Proportion"}},{"code":"MSRTYPE","name":"Measure Type","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRTYPE","title":"Measure Type"},"value_obj":{"type":"CD","system":"2.16.840.1.113883.5.1063","code":"PROCESS","title":"PROCESS"}},{"code":"STRAT","value":"None","name":"Stratification","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"STRAT","title":"Stratification"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"MSRADJ","value":"None","name":"Risk Adjustment","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRADJ","title":"Risk Adjustment"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"MSRAGG","value":"None","name":"Rate Aggregation","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRAGG","title":"Rate Aggregation"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"RAT","value":"Nonvalvular atrial fibrillation (NVAF) is a common arrhythmia and an important risk factor for stroke. It is one of several conditions and lifestyle factors that have been identified as risk factors for stroke. It has been estimated that over 2 million adults in the United States have NVAF. While the median age of patients with atrial fibrillation is 75 years, the incidence increases with advancing age. For example, The Framingham Heart Study noted a dramatic increase in stroke risk associated with atrial fibrillation with advancing age, from 1.5% for those 50 to 59 years of age to 23.5% for those 80 to 89 years of age. Furthermore, a prior stroke or transient ischemic attack (TIA) are among a limited number of predictors of high stroke risk within the population of patients with atrial fibrillation. Therefore, much emphasis has been placed on identifying methods for preventing recurrent ischemic stroke as well as preventing first stroke. Prevention strategies focus on the modifiable risk factors such as hypertension, smoking, and atrial fibrillation. Analysis of five placebo-controlled clinical trials investigating the efficacy of warfarin in the primary prevention of thromboembolic stroke, found the relative risk of thromboembolic stroke was reduced by 68% for atrial fibrillation patients treated with warfarin. The administration of anticoagulation therapy, unless there are contraindications, is an established effective strategy in preventing recurrent stroke in high stroke risk-atrial fibrillation patients with TIA or prior stroke.","name":"Rationale","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"RAT","title":"Rationale"},"value_obj":{"type":"ED","value":"Nonvalvular atrial fibrillation (NVAF) is a common arrhythmia and an important risk factor for stroke. It is one of several conditions and lifestyle factors that have been identified as risk factors for stroke. It has been estimated that over 2 million adults in the United States have NVAF. While the median age of patients with atrial fibrillation is 75 years, the incidence increases with advancing age. For example, The Framingham Heart Study noted a dramatic increase in stroke risk associated with atrial fibrillation with advancing age, from 1.5% for those 50 to 59 years of age to 23.5% for those 80 to 89 years of age. Furthermore, a prior stroke or transient ischemic attack (TIA) are among a limited number of predictors of high stroke risk within the population of patients with atrial fibrillation. Therefore, much emphasis has been placed on identifying methods for preventing recurrent ischemic stroke as well as preventing first stroke. Prevention strategies focus on the modifiable risk factors such as hypertension, smoking, and atrial fibrillation. Analysis of five placebo-controlled clinical trials investigating the efficacy of warfarin in the primary prevention of thromboembolic stroke, found the relative risk of thromboembolic stroke was reduced by 68% for atrial fibrillation patients treated with warfarin. The administration of anticoagulation therapy, unless there are contraindications, is an established effective strategy in preventing recurrent stroke in high stroke risk-atrial fibrillation patients with TIA or prior stroke.","media_type":"text/plain"}},{"code":"CRS","value":"The administration of anticoagulation therapy, unless there are contraindications, is an established effective strategy in preventing recurrent stroke in high stroke risk atrial fibrillation patients with TIA or prior stroke","name":"Clinical Recommendation Statement","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"CRS","title":"Clinical Recommendation Statement"},"value_obj":{"type":"ED","value":"The administration of anticoagulation therapy, unless there are contraindications, is an established effective strategy in preventing recurrent stroke in high stroke risk atrial fibrillation patients with TIA or prior stroke","media_type":"text/plain"}},{"code":"IDUR","value":"Improvement noted as an increase in rate","name":"Improvement Notation","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"IDUR","title":"Improvement Notation"},"value_obj":{"type":"ED","value":"Improvement noted as an increase in rate","media_type":"text/plain"}},{"code":"REF","value":"CITATIONBerge, E., Abdelnoor, M., Nakstad, P. H., \u0026 Sandset, P.M. (2000). Low molecular-weight heparin versus aspirin in patients with acute ischaemic stroke and atrial fibrillation: A double-blind randomised study. Lancet (London, England), 355(9211), 1205-1210. https://doi.org/10.1016/s0140-6736(00)02085-7","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONBerge, E., Abdelnoor, M., Nakstad, P. H., \u0026 Sandset, P.M. (2000). Low molecular-weight heparin versus aspirin in patients with acute ischaemic stroke and atrial fibrillation: A double-blind randomised study. Lancet (London, England), 355(9211), 1205-1210. https://doi.org/10.1016/s0140-6736(00)02085-7","media_type":"text/plain"}},{"code":"REF","value":"CITATIONCenters for Disease Control and Prevention (CDC) (2009). Prevalence and most common causes of disability among adults—United States, 2005. MMWR. Morbidity and mortality weekly report, 58(16), 421-426.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONCenters for Disease Control and Prevention (CDC) (2009). Prevalence and most common causes of disability among adults—United States, 2005. MMWR. Morbidity and mortality weekly report, 58(16), 421-426.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONConnolly, S. J., Ezekowitz, M. D., Yusuf, S., Eikelboom, J., Oldgren, J., Parekh, A., . . . RE-LY Steering Committee and Investigators (2009). Dabigatran versus warfarin in patients with atrial fibrillation. The New England journal of medicine, 361(12), 1139-1151. https://doi.org/10.1056/NEJMoa0905561","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONConnolly, S. J., Ezekowitz, M. D., Yusuf, S., Eikelboom, J., Oldgren, J., Parekh, A., . . . RE-LY Steering Committee and Investigators (2009). Dabigatran versus warfarin in patients with atrial fibrillation. The New England journal of medicine, 361(12), 1139-1151. https://doi.org/10.1056/NEJMoa0905561","media_type":"text/plain"}},{"code":"REF","value":"CITATIONFuster, V., Ryden, L. E., Asinger, R. W., Cannom, D. S., Crijns, H. J., Frye, R. L., . . .  American College of Cardiology/American Heart Association/European Society of Cardiology Board (2001). ACC/AHA/ESC guidelines for the management of patients with atrial fibrillation: Executive summary. A report of the American College of Cardiology/American Heart Association Task Force on Practice Guidelines and the European Society of Cardiology Committee for Practice Guidelines and Policy Conferences (Committee to Develop Guidelines for the Management of Patients with Atrial Fibrillation). Journal of the American College of Cardiology, 38(4), 1231-1266. https://doi.org/10.1016/s0735-1097(01)01587-x","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONFuster, V., Ryden, L. E., Asinger, R. W., Cannom, D. S., Crijns, H. J., Frye, R. L., . . .  American College of Cardiology/American Heart Association/European Society of Cardiology Board (2001). ACC/AHA/ESC guidelines for the management of patients with atrial fibrillation: Executive summary. A report of the American College of Cardiology/American Heart Association Task Force on Practice Guidelines and the European Society of Cardiology Committee for Practice Guidelines and Policy Conferences (Committee to Develop Guidelines for the Management of Patients with Atrial Fibrillation). Journal of the American College of Cardiology, 38(4), 1231-1266. https://doi.org/10.1016/s0735-1097(01)01587-x","media_type":"text/plain"}},{"code":"REF","value":"CITATIONFuster, V., Ryden, L. E., Cannom, D. S., Crijns, H. J., Curtis, A. B., Ellenbogen, K. A., . . . Heart Rhythm Society (2006). ACC/AHA/ESC 2006 guidelines for the management of patients with atrial fibrillation: A report of the American College of Cardiology/American Heart Association Task Force on Practice Guidelines and the European Society of Cardiology Committee for Practice Guidelines (writing committee to revise the 2001 guidelines for the management of patients with atrial fibrillation). Circulation, 114(7), e257-354. https://doi.org/10.1161/CIRCULATIONAHA.106.177292","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONFuster, V., Ryden, L. E., Cannom, D. S., Crijns, H. J., Curtis, A. B., Ellenbogen, K. A., . . . Heart Rhythm Society (2006). ACC/AHA/ESC 2006 guidelines for the management of patients with atrial fibrillation: A report of the American College of Cardiology/American Heart Association Task Force on Practice Guidelines and the European Society of Cardiology Committee for Practice Guidelines (writing committee to revise the 2001 guidelines for the management of patients with atrial fibrillation). Circulation, 114(7), e257-354. https://doi.org/10.1161/CIRCULATIONAHA.106.177292","media_type":"text/plain"}},{"code":"REF","value":"CITATIONGoldstein, L. B., Adams, R., Alberts, M. J., Appel, L. J., Brass, L. M., Bushnell, C. D., . . . American Academy of Neurology (2006). Primary prevention of ischemic stroke: A guideline from the American Heart Association/American Stroke Association Stroke Council: Cosponsored by the Atherosclerotic Peripheral Vascular Disease Interdisciplinary Working Group; Cardiovascular Nursing Council; Clinical Cardiology Council; Nutrition, Physical Activity, and Metabolism Council; and the Quality of Care and Outcomes Research Interdisciplinary Working Group: The American Academy of Neurology affirms the value of this guideline. Stroke, 37(6), 1583-1633. https://doi.org/10.1161/01.STR.0000223048.70103.F1","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONGoldstein, L. B., Adams, R., Alberts, M. J., Appel, L. J., Brass, L. M., Bushnell, C. D., . . . American Academy of Neurology (2006). Primary prevention of ischemic stroke: A guideline from the American Heart Association/American Stroke Association Stroke Council: Cosponsored by the Atherosclerotic Peripheral Vascular Disease Interdisciplinary Working Group; Cardiovascular Nursing Council; Clinical Cardiology Council; Nutrition, Physical Activity, and Metabolism Council; and the Quality of Care and Outcomes Research Interdisciplinary Working Group: The American Academy of Neurology affirms the value of this guideline. Stroke, 37(6), 1583-1633. https://doi.org/10.1161/01.STR.0000223048.70103.F1","media_type":"text/plain"}},{"code":"REF","value":"CITATIONGorelick, P. B., Sacco, R. L., Smith, D. B., Alberts, M., Mustone-Alexander, L., Rader, D., . . . Rhew, D. C. (1999). Prevention of a first stroke: A review of guidelines and a multidisciplinary consensus statement from the National Stroke Association. JAMA, 281(12), 1112-1120. https://doi.org/10.1001/jama.281.12.1112","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONGorelick, P. B., Sacco, R. L., Smith, D. B., Alberts, M., Mustone-Alexander, L., Rader, D., . . . Rhew, D. C. (1999). Prevention of a first stroke: A review of guidelines and a multidisciplinary consensus statement from the National Stroke Association. JAMA, 281(12), 1112-1120. https://doi.org/10.1001/jama.281.12.1112","media_type":"text/plain"}},{"code":"REF","value":"CITATIONHart, R. G., Benavente, O., McBride R., \u0026 Pearce, L. A. (1999). Antithrombotic therapy to prevent stroke in patients with atrial fibrillation: A meta-analysis. Annals of Internal Medicine, 131(7), 492-501. https://doi.org/10.7326/0003-4819-131-7-199910050-00003","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONHart, R. G., Benavente, O., McBride R., \u0026 Pearce, L. A. (1999). Antithrombotic therapy to prevent stroke in patients with atrial fibrillation: A meta-analysis. Annals of Internal Medicine, 131(7), 492-501. https://doi.org/10.7326/0003-4819-131-7-199910050-00003","media_type":"text/plain"}},{"code":"REF","value":"CITATIONJauch, E. C., Saver, J. L., Adams, H. P., Jr., Bruno, A., Connors, J. J., Demaerschalk, B. M., . . . Council on Clinical Cardiology (2013). Guidelines for the early management of patients with acute ischemic stroke: A guideline for health care professionals from the American Heart Association/American Stroke Association. Stroke, 44(3), 870-947. https://doi.org/10.1161/STR.0b013e318284056a","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONJauch, E. C., Saver, J. L., Adams, H. P., Jr., Bruno, A., Connors, J. J., Demaerschalk, B. M., . . . Council on Clinical Cardiology (2013). Guidelines for the early management of patients with acute ischemic stroke: A guideline for health care professionals from the American Heart Association/American Stroke Association. Stroke, 44(3), 870-947. https://doi.org/10.1161/STR.0b013e318284056a","media_type":"text/plain"}},{"code":"REF","value":"CITATIONKernan, W. N., Ovbiagele, B., Black, H. R., Bravata, D. M., Chimowitz, M. I., Ezekowitz, M. D., . . . Council on Peripheral Vascular Disease (2014). Guidelines for the prevention of stroke in patients with stroke and transient ischemic attack: A guideline for health care professionals from the American Heart Association/American Stroke Association. Stroke, 45(7), 2160-2236. https://doi.org/10.1161/STR.0000000000000024","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONKernan, W. N., Ovbiagele, B., Black, H. R., Bravata, D. M., Chimowitz, M. I., Ezekowitz, M. D., . . . Council on Peripheral Vascular Disease (2014). Guidelines for the prevention of stroke in patients with stroke and transient ischemic attack: A guideline for health care professionals from the American Heart Association/American Stroke Association. Stroke, 45(7), 2160-2236. https://doi.org/10.1161/STR.0000000000000024","media_type":"text/plain"}},{"code":"REF","value":"CITATIONKleindorfer, D. O., Towfighi, A., Chaturvedi, S., Cockroft, K. M., Gutierrez, J., Lombardi-Hill, D., ... Williams, L. S. (2021). 2021 guideline for the prevention of stroke in patients with stroke and transient ischemic attack: A guideline from the American Heart Association/American Stroke Association. Stroke, 52(7), e364-e467. https://doi.org/10.1161/STR.0000000000000375","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONKleindorfer, D. O., Towfighi, A., Chaturvedi, S., Cockroft, K. M., Gutierrez, J., Lombardi-Hill, D., ... Williams, L. S. (2021). 2021 guideline for the prevention of stroke in patients with stroke and transient ischemic attack: A guideline from the American Heart Association/American Stroke Association. Stroke, 52(7), e364-e467. https://doi.org/10.1161/STR.0000000000000375","media_type":"text/plain"}},{"code":"REF","value":"CITATIONLin, H. J., Wolf, P. A., Kelly-Hayes, M., Beiser, A. S., Kase, C. S., Benjamin, E. J., \u0026 D'Agostino, R. B. (1996). Stroke severity in atrial fibrillation: The Framingham Study. Stroke 27(10), 1760-1764. https://doi.org/10.1161/01.str.27.10.1760","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONLin, H. J., Wolf, P. A., Kelly-Hayes, M., Beiser, A. S., Kase, C. S., Benjamin, E. J., \u0026 D'Agostino, R. B. (1996). Stroke severity in atrial fibrillation: The Framingham Study. Stroke 27(10), 1760-1764. https://doi.org/10.1161/01.str.27.10.1760","media_type":"text/plain"}},{"code":"REF","value":"CITATIONPenado, S., Cano, M., Acha, O., Hernández, J. L., \u0026 Riancho, J. A. (2003). Atrial fibrillation as a risk factor for stroke recurrence. The American journal of medicine, 114(3), 206-210. https://doi.org/10.1016/s0002-9343(02)01479-1","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONPenado, S., Cano, M., Acha, O., Hernández, J. L., \u0026 Riancho, J. A. (2003). Atrial fibrillation as a risk factor for stroke recurrence. The American journal of medicine, 114(3), 206-210. https://doi.org/10.1016/s0002-9343(02)01479-1","media_type":"text/plain"}},{"code":"REF","value":"CITATIONPowers, W. J., Rabinstein, A. A., Ackerson, T., Adeoye, O. M., Bambakidis, N. C., Becker, K., . . . American Heart Association Stroke Council (2018). 2018 guidelines for the early management of patients with acute ischemic stroke: A guideline for health care professionals from the American Heart Association/American Stroke Association. Stroke, 49(3), e46-e110. https://doi.org/10.1161/STR.0000000000000158","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONPowers, W. J., Rabinstein, A. A., Ackerson, T., Adeoye, O. M., Bambakidis, N. C., Becker, K., . . . American Heart Association Stroke Council (2018). 2018 guidelines for the early management of patients with acute ischemic stroke: A guideline for health care professionals from the American Heart Association/American Stroke Association. Stroke, 49(3), e46-e110. https://doi.org/10.1161/STR.0000000000000158","media_type":"text/plain"}},{"code":"REF","value":"CITATIONRoger, V. L., Go, A. S., Lloyd-Jones, D. M., Benjamin, E. J., Berry, J. D., Borden, W. B., . . . American Heart Association Statistics Committee and Stroke Statistics Subcommittee (2012). Heart disease and stroke statistics—2012 update: A report from the American Heart Association. Circulation, 125(1), e2-e220. https://doi.org/10.1161/CIR.0b013e31823ac046","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONRoger, V. L., Go, A. S., Lloyd-Jones, D. M., Benjamin, E. J., Berry, J. D., Borden, W. B., . . . American Heart Association Statistics Committee and Stroke Statistics Subcommittee (2012). Heart disease and stroke statistics—2012 update: A report from the American Heart Association. Circulation, 125(1), e2-e220. https://doi.org/10.1161/CIR.0b013e31823ac046","media_type":"text/plain"}},{"code":"REF","value":"CITATIONSaxena, R., \u0026 Koudstaal, P. J. (2004). Anticoagulants for preventing stroke in patients with nonrheumatic atrial fibrillation and a history of stroke or transient ischemic attack (review). The Cochrane database of systematic reviews, (2), CD000185. https://doi.org/10.1002/14651858.CD000185.pub2","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONSaxena, R., \u0026 Koudstaal, P. J. (2004). Anticoagulants for preventing stroke in patients with nonrheumatic atrial fibrillation and a history of stroke or transient ischemic attack (review). The Cochrane database of systematic reviews, (2), CD000185. https://doi.org/10.1002/14651858.CD000185.pub2","media_type":"text/plain"}},{"code":"REF","value":"CITATIONSaxena, R., Lewis, S., Berge, E., Sandercock, P. A., \u0026 Koudstaal, P. J.  (2001). Risk of early death and recurrent stroke and effect of heparin in 3,169 patients with acute ischemic stroke and atrial fibrillation in the International Stroke Trial. Stroke, 32(10), 2333-2337.","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONSaxena, R., Lewis, S., Berge, E., Sandercock, P. A., \u0026 Koudstaal, P. J.  (2001). Risk of early death and recurrent stroke and effect of heparin in 3,169 patients with acute ischemic stroke and atrial fibrillation in the International Stroke Trial. Stroke, 32(10), 2333-2337.","media_type":"text/plain"}},{"code":"REF","value":"CITATIONVan Walraven, C., Hart, R. G., Singer, D. E., Laupacis, A., Connolly, S., Petersen, P., . . . Hellemons, B. (2002).Oral anticoagulants vs. aspirin in nonvalvular atrial fibrillation: An individual patient meta-analysis. JAMA, 288(19), 2441-2448. https://doi.org/10.1001/jama.288.19.2441","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONVan Walraven, C., Hart, R. G., Singer, D. E., Laupacis, A., Connolly, S., Petersen, P., . . . Hellemons, B. (2002).Oral anticoagulants vs. aspirin in nonvalvular atrial fibrillation: An individual patient meta-analysis. JAMA, 288(19), 2441-2448. https://doi.org/10.1001/jama.288.19.2441","media_type":"text/plain"}},{"code":"REF","value":"CITATIONWann, L. S., Curtis, A. B., Ellenbogen, K. A., Estes, N. A., 3rd, Ezekowitz, M. D., Jackman, W. M., . . . Tracy, C. M. (2011). 2011 ACCF/AHA/HRS focused update on the management of patients with atrial fibrillation (update on dabigatran): A report of the American College of Cardiology Foundation/American Heart Association Task Force on Practice Guidelines. Journal of the American College of Cardiology, 57(11), 1330-1337. https://doi.org/10.1016/j.jacc.2011.01.010","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONWann, L. S., Curtis, A. B., Ellenbogen, K. A., Estes, N. A., 3rd, Ezekowitz, M. D., Jackman, W. M., . . . Tracy, C. M. (2011). 2011 ACCF/AHA/HRS focused update on the management of patients with atrial fibrillation (update on dabigatran): A report of the American College of Cardiology Foundation/American Heart Association Task Force on Practice Guidelines. Journal of the American College of Cardiology, 57(11), 1330-1337. https://doi.org/10.1016/j.jacc.2011.01.010","media_type":"text/plain"}},{"code":"DEF","value":"None","name":"Definition","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DEF","title":"Definition"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"GUIDE","value":"The \"Nonelective Inpatient Encounter\" value set intends to capture all non-scheduled hospitalizations. This value set is a subset of the \"Inpatient Encounter\" value set, excluding concepts that specifically refer to elective hospital admissions. Non-elective Inpatient Encounters include emergency, urgent, and unplanned admissions.\n\nThe \"Medication, Discharge\" datatype refers to the discharge medication list and is intended to express medications ordered for post-discharge use.\n\nThe denominator population includes patients with inpatient hospitalizations and patients from Acute Hospital Care at Home programs, who are treated and billed as inpatients but receive care in their home.\n\nThis eCQM is an episode-based measure. An episode is defined as each inpatient hospitalization or encounter that ends during the measurement period.\n\nThis version of the eCQM uses QDM version 5.6. Please refer to the eCQI resource center (https://ecqi.healthit.gov/qdm) for more information on the QDM.","name":"Guidance","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"GUIDE","title":"Guidance"},"value_obj":{"type":"ED","value":"The \"Nonelective Inpatient Encounter\" value set intends to capture all non-scheduled hospitalizations. This value set is a subset of the \"Inpatient Encounter\" value set, excluding concepts that specifically refer to elective hospital admissions. Non-elective Inpatient Encounters include emergency, urgent, and unplanned admissions.\n\nThe \"Medication, Discharge\" datatype refers to the discharge medication list and is intended to express medications ordered for post-discharge use.\n\nThe denominator population includes patients with inpatient hospitalizations and patients from Acute Hospital Care at Home programs, who are treated and billed as inpatients but receive care in their home.\n\nThis eCQM is an episode-based measure. An episode is defined as each inpatient hospitalization or encounter that ends during the measurement period.\n\nThis version of the eCQM uses QDM version 5.6. Please refer to the eCQI resource center (https://ecqi.healthit.gov/qdm) for more information on the QDM.","media_type":"text/plain"}},{"code":"TRANF","value":"TBD","name":"Transmission Format","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"TRANF","title":"Transmission Format"},"value_obj":{"type":"ED","value":"TBD","media_type":"text/plain"}},{"code":"IPOP","value":"Inpatient hospitalizations (non-elective admissions) for patients age 18 and older, discharged from inpatient care with a principal diagnosis of ischemic stroke, ending during the measurement period","name":"Initial Population","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"IPOP","title":"Initial Population"},"value_obj":{"type":"ED","value":"Inpatient hospitalizations (non-elective admissions) for patients age 18 and older, discharged from inpatient care with a principal diagnosis of ischemic stroke, ending during the measurement period","media_type":"text/plain"}},{"code":"DENOM","value":"Inpatient hospitalizations for patients with a principal diagnosis of ischemic stroke, and a history of atrial ablation, or current or history of atrial fibrillation/flutter","name":"Denominator","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DENOM","title":"Denominator"},"value_obj":{"type":"ED","value":"Inpatient hospitalizations for patients with a principal diagnosis of ischemic stroke, and a history of atrial ablation, or current or history of atrial fibrillation/flutter","media_type":"text/plain"}},{"code":"DENEX","value":"- Inpatient hospitalizations for patients admitted for elective carotid intervention. This exclusion is implicitly modeled by only including non-elective hospitalizations.\n- Inpatient hospitalizations for patients discharged to another hospital\n- Inpatient hospitalizations for patients who left against medical advice\n- Inpatient hospitalizations for patients who expired\n- Inpatient hospitalizations for patients discharged to home for hospice care\n- Inpatient hospitalizations for patients discharged to a health care facility for hospice care\n- Inpatient hospitalizations for patients with comfort measures documented","name":"Denominator Exclusions","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DENEX","title":"Denominator Exclusions"},"value_obj":{"type":"ED","value":"- Inpatient hospitalizations for patients admitted for elective carotid intervention. This exclusion is implicitly modeled by only including non-elective hospitalizations.\n- Inpatient hospitalizations for patients discharged to another hospital\n- Inpatient hospitalizations for patients who left against medical advice\n- Inpatient hospitalizations for patients who expired\n- Inpatient hospitalizations for patients discharged to home for hospice care\n- Inpatient hospitalizations for patients discharged to a health care facility for hospice care\n- Inpatient hospitalizations for patients with comfort measures documented","media_type":"text/plain"}},{"code":"NUMER","value":"Inpatient hospitalizations for patients prescribed or continuing to take anticoagulation therapy at hospital discharge","name":"Numerator","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"NUMER","title":"Numerator"},"value_obj":{"type":"ED","value":"Inpatient hospitalizations for patients prescribed or continuing to take anticoagulation therapy at hospital discharge","media_type":"text/plain"}},{"code":"NUMEX","value":"Not Applicable","name":"Numerator Exclusions","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"NUMEX","title":"Numerator Exclusions"},"value_obj":{"type":"ED","value":"Not Applicable","media_type":"text/plain"}},{"code":"DENEXCEP","value":"Inpatient hospitalizations for patients with a documented reason for not prescribing anticoagulation therapy at discharge","name":"Denominator Exceptions","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DENEXCEP","title":"Denominator Exceptions"},"value_obj":{"type":"ED","value":"Inpatient hospitalizations for patients with a documented reason for not prescribing anticoagulation therapy at discharge","media_type":"text/plain"}},{"code":"SDE","value":"For every patient evaluated by this measure also identify payer, race, ethnicity and sex","name":"Supplemental Data Elements","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"SDE","title":"Supplemental Data Elements"},"value_obj":{"type":"ED","value":"For every patient evaluated by this measure also identify payer, race, ethnicity and sex","media_type":"text/plain"}}],"measure_period":{"type":"IVL_TS","low":{"type":"TS","value":"201201010000","inclusive?":true,"derived?":false},"high":{"type":"TS","value":"201212312359","inclusive?":true,"derived?":false},"width":{"type":"PQ","unit":"a","value":"1","inclusive?":true,"derived?":false}},"measure_scoring":"PROPORTION","population_criteria":{"IPP":{"conjunction?":true,"type":"IPP","hqmf_id":"EC318604-26BA-4A0B-9DE4-BDE1E13FC1C0","preconditions":[{"id":2,"preconditions":[{"id":1,"reference":"AnticoagulationTherapyforAtrialFibrillationFlutter__Initial_Population__945865BA_A034_46A9_AAE8_1E4FB2AC9F9F"}],"conjunction_code":"allTrue"}]},"DENOM":{"conjunction?":true,"type":"DENOM","hqmf_id":"ACD06CBB-1D22-4638-B712-85A985B9A9CD","preconditions":[{"id":4,"preconditions":[{"id":3,"reference":"AnticoagulationTherapyforAtrialFibrillationFlutter__Denominator__945865BA_A034_46A9_AAE8_1E4FB2AC9F9F"}],"conjunction_code":"allTrue"}]},"NUMER":{"conjunction?":true,"type":"NUMER","hqmf_id":"673943DD-31D9-4558-9467-55231F73B781","preconditions":[{"id":6,"preconditions":[{"id":5,"reference":"AnticoagulationTherapyforAtrialFibrillationFlutter__Numerator__945865BA_A034_46A9_AAE8_1E4FB2AC9F9F"}],"conjunction_code":"allTrue"}]},"DENEXCEP":{"conjunction?":true,"type":"DENEXCEP","hqmf_id":"0CF179E8-9885-4563-AE0F-FDA8044A0947","preconditions":[{"id":8,"preconditions":[{"id":7,"reference":"AnticoagulationTherapyforAtrialFibrillationFlutter__Denominator_Exceptions__945865BA_A034_46A9_AAE8_1E4FB2AC9F9F"}],"conjunction_code":"atLeastOneTrue"}]},"DENEX":{"conjunction?":true,"type":"DENEX","hqmf_id":"C004AFD2-2AAC-4FB3-9AE8-A1798028EC05","preconditions":[{"id":10,"preconditions":[{"id":9,"reference":"AnticoagulationTherapyforAtrialFibrillationFlutter__Denominator_Exclusions__945865BA_A034_46A9_AAE8_1E4FB2AC9F9F"}],"conjunction_code":"atLeastOneTrue"}]}},"population_sets":[{"_id":"68923f90a83e15671c2e4e92","population_set_id":"PopulationSet_1","populations":{"DENEX":{"_id":"68923f90a83e15671c2e4e93","hqmf_id":"C004AFD2-2AAC-4FB3-9AE8-A1798028EC05","library_name":"AnticoagulationTherapyforAtrialFibrillationFlutter","statement_name":"Denominator Exclusions"},"DENEXCEP":{"_id":"68923f90a83e15671c2e4e94","hqmf_id":"0CF179E8-9885-4563-AE0F-FDA8044A0947","library_name":"AnticoagulationTherapyforAtrialFibrillationFlutter","statement_name":"Denominator Exceptions"},"DENOM":{"_id":"68923f90a83e15671c2e4e95","hqmf_id":"ACD06CBB-1D22-4638-B712-85A985B9A9CD","library_name":"AnticoagulationTherapyforAtrialFibrillationFlutter","statement_name":"Denominator"},"IPP":{"_id":"68923f90a83e15671c2e4e96","hqmf_id":"EC318604-26BA-4A0B-9DE4-BDE1E13FC1C0","library_name":"AnticoagulationTherapyforAtrialFibrillationFlutter","statement_name":"Initial Population"},"NUMER":{"_id":"68923f90a83e15671c2e4e97","hqmf_id":"673943DD-31D9-4558-9467-55231F73B781","library_name":"AnticoagulationTherapyforAtrialFibrillationFlutter","statement_name":"Numerator"},"_id":"68923f90a83e15671c2e4e98","_type":"CQM::ProportionPopulationMap"},"supplemental_data_elements":[{"_id":"68923f89a83e15671c2e4c77","hqmf_id":"F2FD205B-B829-4904-AB96-326E458873F4","library_name":"AnticoagulationTherapyforAtrialFibrillationFlutter","statement_name":"SDE Ethnicity"},{"_id":"68923f89a83e15671c2e4c78","hqmf_id":"8EB7D04D-B7B5-4A40-88B4-A60B9592E2CF","library_name":"AnticoagulationTherapyforAtrialFibrillationFlutter","statement_name":"SDE Payer"},{"_id":"68923f89a83e15671c2e4c79","hqmf_id":"B652DB1A-A25C-405E-95B2-F7BB1934EDE9","library_name":"AnticoagulationTherapyforAtrialFibrillationFlutter","statement_name":"SDE Race"},{"_id":"68923f89a83e15671c2e4c7a","hqmf_id":"2529B0FC-8FC4-4E74-A910-A90BE39836A2","library_name":"AnticoagulationTherapyforAtrialFibrillationFlutter","statement_name":"SDE Sex"}],"title":"Population Criteria Section"}],"source_data_criteria":[{"_id":"68923f90a83e15671c2e4e99","_type":"QDM::ProcedurePerformed","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"2.16.840.1.113883.3.117.1.7.1.203","components":null,"dataElementCodes":[],"description":"Procedure, Performed: AtrialAblation","hqmfOid":"2.16.840.1.113883.10.20.28.4.67","id":"68923f90a83e15671c2e4e99","incisionDatetime":null,"method":null,"negationRationale":null,"qdmCategory":"procedure","qdmStatus":"performed","qdmTitle":"Procedure, Performed","qdmVersion":"5.6","rank":null,"reason":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null,"status":null},{"_id":"68923f89a83e15671c2e4ca4","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.117.1.7.1.424","dataElementCodes":[],"description":"Encounter, Performed: NonelectiveInpatientEncounter","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"68923f89a83e15671c2e4ca4","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"68923f90a83e15671c2e4e9a","_type":"QDM::PatientCharacteristicSex","codeListId":"2.16.840.1.113762.1.4.1","dataElementCodes":[],"description":"Patient Characteristic Sex: ONCAdministrativeSex","hqmfOid":"2.16.840.1.113883.10.20.28.4.55","id":"68923f90a83e15671c2e4e9a","qdmCategory":"patient_characteristic","qdmStatus":"gender","qdmTitle":"Patient Characteristic Sex","qdmVersion":"5.6"},{"_id":"68923f90a83e15671c2e4e9b","_type":"QDM::PatientCharacteristicEthnicity","codeListId":"2.16.840.1.114222.4.11.837","dataElementCodes":[],"description":"Patient Characteristic Ethnicity: Ethnicity","hqmfOid":"2.16.840.1.113883.10.20.28.4.56","id":"68923f90a83e15671c2e4e9b","qdmCategory":"patient_characteristic","qdmStatus":"ethnicity","qdmTitle":"Patient Characteristic Ethnicity","qdmVersion":"5.6"},{"_id":"68923f89a83e15671c2e4ca5","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.117.1.7.1.292","dataElementCodes":[],"description":"Encounter, Performed: EmergencyDepartmentVisit","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"68923f89a83e15671c2e4ca5","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"68923f90a83e15671c2e4e9c","_type":"QDM::MedicationDischarge","authorDatetime":null,"codeListId":"2.16.840.1.113883.3.117.1.7.1.200","dataElementCodes":[],"daysSupplied":null,"description":"Medication, Discharge: AnticoagulantTherapy","dosage":null,"frequency":null,"hqmfOid":"2.16.840.1.113883.10.20.28.4.48","id":"68923f90a83e15671c2e4e9c","negationRationale":null,"qdmCategory":"medication","qdmStatus":"discharge","qdmTitle":"Medication, Discharge","qdmVersion":"5.6","refills":null,"route":null,"supply":null},{"_id":"68923f90a83e15671c2e4e9d","_type":"QDM::AssessmentPerformed","authorDatetime":null,"codeListId":"2.16.840.1.113762.1.4.1110.76","components":null,"dataElementCodes":[],"description":"Assessment, Performed: HistoryofAtrialAblation","hqmfOid":"2.16.840.1.113883.10.20.28.4.117","id":"68923f90a83e15671c2e4e9d","interpretation":null,"method":null,"negationRationale":null,"qdmCategory":"assessment","qdmStatus":"performed","qdmTitle":"Assessment, Performed","qdmVersion":"5.6","reason":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null},{"_id":"68923f89a83e15671c2e4ca7","_type":"QDM::Diagnosis","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"2.16.840.1.113762.1.4.1110.76","dataElementCodes":[],"description":"Diagnosis: HistoryofAtrialAblation","hqmfOid":"2.16.840.1.113883.10.20.28.4.110","id":"68923f89a83e15671c2e4ca7","prevalencePeriod":null,"qdmCategory":"condition","qdmTitle":"Diagnosis","qdmVersion":"5.6","qrdaOid":"2.16.840.1.113883.10.20.24.3.135","severity":null},{"_id":"68923f89a83e15671c2e4ca6","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113762.1.4.1111.143","dataElementCodes":[],"description":"Encounter, Performed: ObservationServices","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"68923f89a83e15671c2e4ca6","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"68923f90a83e15671c2e4e9e","_type":"QDM::PatientCharacteristicRace","codeListId":"2.16.840.1.114222.4.11.836","dataElementCodes":[],"description":"Patient Characteristic Race: Race","hqmfOid":"2.16.840.1.113883.10.20.28.4.59","id":"68923f90a83e15671c2e4e9e","qdmCategory":"patient_characteristic","qdmStatus":"race","qdmTitle":"Patient Characteristic Race","qdmVersion":"5.6"},{"_id":"68923f89a83e15671c2e4ca8","_type":"QDM::Diagnosis","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"2.16.840.1.113883.3.117.1.7.1.202","dataElementCodes":[],"description":"Diagnosis: AtrialFibrillationorFlutter","hqmfOid":"2.16.840.1.113883.10.20.28.4.110","id":"68923f89a83e15671c2e4ca8","prevalencePeriod":null,"qdmCategory":"condition","qdmTitle":"Diagnosis","qdmVersion":"5.6","qrdaOid":"2.16.840.1.113883.10.20.24.3.135","severity":null},{"_id":"68923f90a83e15671c2e4e9f","_type":"QDM::InterventionOrder","authorDatetime":null,"codeListId":"1.3.6.1.4.1.33895.1.3.0.45","dataElementCodes":[],"description":"Intervention, Order: ComfortMeasures","hqmfOid":"2.16.840.1.113883.10.20.28.4.35","id":"68923f90a83e15671c2e4e9f","negationRationale":null,"qdmCategory":"intervention","qdmStatus":"order","qdmTitle":"Intervention, Order","qdmVersion":"5.6","reason":null},{"_id":"68923f90a83e15671c2e4ea0","_type":"QDM::InterventionPerformed","authorDatetime":null,"codeListId":"1.3.6.1.4.1.33895.1.3.0.45","dataElementCodes":[],"description":"Intervention, Performed: ComfortMeasures","hqmfOid":"2.16.840.1.113883.10.20.28.4.36","id":"68923f90a83e15671c2e4ea0","negationRationale":null,"qdmCategory":"intervention","qdmStatus":"performed","qdmTitle":"Intervention, Performed","qdmVersion":"5.6","reason":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null,"status":null},{"_id":"68923f90a83e15671c2e4ea1","_type":"QDM::PatientCharacteristicPayer","codeListId":"2.16.840.1.114222.4.11.3591","dataElementCodes":[],"description":"Patient Characteristic Payer: PayerType","hqmfOid":"2.16.840.1.113883.10.20.28.4.58","id":"68923f90a83e15671c2e4ea1","qdmCategory":"patient_characteristic","qdmStatus":"payer","qdmTitle":"Patient Characteristic Payer","qdmVersion":"5.6","relevantPeriod":null}],"title":"Anticoagulation Therapy for Atrial Fibrillation/Flutter","updated_at":null,"value_set_ids":["68923f90a83e15671c2e4e6d","68923f90a83e15671c2e4e6e","68923f90a83e15671c2e4e6f","68923f90a83e15671c2e4e70","68923f90a83e15671c2e4e71","68923f90a83e15671c2e4e72","68923f90a83e15671c2e4e73","68923f90a83e15671c2e4e74","68923f90a83e15671c2e4e75","68923f90a83e15671c2e4e76","68923f90a83e15671c2e4e77","68923f90a83e15671c2e4e78","68923f90a83e15671c2e4e79","68923f90a83e15671c2e4e7a","68923f90a83e15671c2e4e7b","68923f90a83e15671c2e4e7c","68923f90a83e15671c2e4e7d","68923f90a83e15671c2e4e7e","68923f90a83e15671c2e4e7f","68923f90a83e15671c2e4e80","68923f90a83e15671c2e4e81","68923f90a83e15671c2e4e82","68923f90a83e15671c2e4e83"]}