{"_id":"68923bc9a83e15671c2cc570","calculate_sdes":null,"calculation_method":"PATIENT","cms_id":"CMS135v13","component":false,"component_hqmf_set_ids":[],"composite":false,"composite_hqmf_set_id":null,"cql_libraries":[{"_id":"68923bbaa83e15671c2cbac0","cql":"library HFACEIorARBorARNIforLVSD version '13.4.000'\r\n\r\nusing QDM version '5.6'\r\n\r\ninclude HFCommonDefinitionsQDM version '3.0.000' called HeartFailure\r\ninclude MATGlobalCommonFunctionsQDM version '8.0.000' called Global\r\n\r\ncodesystem \"SNOMEDCT\": 'urn:oid:2.16.840.1.113883.6.96'\r\n\r\nvalueset \"ACE Inhibitor or ARB or ARNI\": 'urn:oid:2.16.840.1.113883.3.526.3.1139'\r\nvalueset \"ACE Inhibitor or ARB or ARNI Ingredient\": 'urn:oid:2.16.840.1.113883.3.526.3.1489'\r\nvalueset \"Allergy to ACE Inhibitor or ARB\": 'urn:oid:2.16.840.1.113883.3.526.3.1211'\r\nvalueset \"Ethnicity\": 'urn:oid:2.16.840.1.114222.4.11.837'\r\nvalueset \"Intolerance to ACE Inhibitor or ARB\": 'urn:oid:2.16.840.1.113883.3.526.3.1212'\r\nvalueset \"Medical Reason\": 'urn:oid:2.16.840.1.113883.3.526.3.1007'\r\nvalueset \"ONC Administrative Sex\": 'urn:oid:2.16.840.1.113762.1.4.1'\r\nvalueset \"Patient Reason\": 'urn:oid:2.16.840.1.113883.3.526.3.1008'\r\nvalueset \"Patient Reason for ACE Inhibitor or ARB Decline\": 'urn:oid:2.16.840.1.113883.3.526.3.1140'\r\nvalueset \"Payer Type\": 'urn:oid:2.16.840.1.114222.4.11.3591'\r\nvalueset \"Pregnancy\": 'urn:oid:2.16.840.1.113883.3.526.3.378'\r\nvalueset \"Race\": 'urn:oid:2.16.840.1.114222.4.11.836'\r\n\r\ncode \"Acute renal failure caused by angiotensin-converting-enzyme inhibitor (disorder)\": '422593004' from \"SNOMEDCT\" display 'Acute renal failure caused by angiotensin-converting-enzyme inhibitor (disorder)'\r\ncode \"Substance with angiotensin II receptor antagonist mechanism of action (substance)\": '372913009' from \"SNOMEDCT\" display 'Substance with angiotensin II receptor antagonist mechanism of action (substance)'\r\ncode \"Substance with angiotensin-converting enzyme inhibitor mechanism of action (substance)\": '372733002' from \"SNOMEDCT\" display 'Substance with angiotensin-converting enzyme inhibitor mechanism of action (substance)'\r\ncode \"Substance with neprilysin inhibitor mechanism of action (substance)\": '786886009' from \"SNOMEDCT\" display 'Substance with neprilysin inhibitor mechanism of action (substance)'\r\n\r\ncontext Patient\r\n\r\ndefine \"Denominator Exceptions\":\r\n  \"Has Medical or Patient Reason for Not Ordering ACEI or ARB or ARNI\"\r\n    or \"Has Allergy or Intolerance to ACEI or ARB or ARNI Ingredient\"\r\n    or \"Has Diagnosis of Allergy or Intolerance to ACEI or ARB\"\r\n    or \"Has Diagnosis of Pregnancy\"\r\n    or \"Has Diagnosis of Renal Failure Due to ACEI\"\r\n\r\ndefine \"Numerator\":\r\n  \"Has ACEI or ARB or ARNI Ordered\"\r\n    or \"Is Currently Taking ACEI or ARB or ARNI\"\r\n\r\ndefine \"SDE Ethnicity\":\r\n  [\"Patient Characteristic Ethnicity\": \"Ethnicity\"]\r\n\r\ndefine \"SDE Payer\":\r\n  [\"Patient Characteristic Payer\": \"Payer Type\"]\r\n\r\ndefine \"SDE Race\":\r\n  [\"Patient Characteristic Race\": \"Race\"]\r\n\r\ndefine \"SDE Sex\":\r\n  [\"Patient Characteristic Sex\": \"ONC Administrative Sex\"]\r\n\r\ndefine \"Denominator\":\r\n  \"Initial Population\"\r\n    and exists HeartFailure.\"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD\"\r\n\r\ndefine \"Has ACEI or ARB or ARNI Ordered\":\r\n  exists [\"Medication, Order\": \"ACE Inhibitor or ARB or ARNI\"] ACEIOrARBOrARNIOrdered\r\n    with HeartFailure.\"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD\" ModerateOrSevereLVSDHFOutpatientEncounter\r\n      such that ACEIOrARBOrARNIOrdered.authorDatetime during day of ModerateOrSevereLVSDHFOutpatientEncounter.relevantPeriod\r\n\r\ndefine \"Has Allergy or Intolerance to ACEI or ARB or ARNI Ingredient\":\r\n  exists ( [\"Allergy/Intolerance\": \"ACE Inhibitor or ARB or ARNI Ingredient\"]\r\n    union [\"Allergy/Intolerance\": \"Substance with angiotensin-converting enzyme inhibitor mechanism of action (substance)\"]\r\n    union [\"Allergy/Intolerance\": \"Substance with angiotensin II receptor antagonist mechanism of action (substance)\"]\r\n    union [\"Allergy/Intolerance\": \"Substance with neprilysin inhibitor mechanism of action (substance)\"] ) ACEIOrARBOrARNIAllergyIntolerance\r\n    with HeartFailure.\"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD\" ModerateOrSevereLVSDHFOutpatientEncounter\r\n      such that ACEIOrARBOrARNIAllergyIntolerance.prevalencePeriod overlaps after day of ModerateOrSevereLVSDHFOutpatientEncounter.relevantPeriod\r\n\r\ndefine \"Has Diagnosis of Allergy or Intolerance to ACEI or ARB\":\r\n  exists ( [\"Diagnosis\": \"Allergy to ACE Inhibitor or ARB\"]\r\n    union [\"Diagnosis\": \"Intolerance to ACE Inhibitor or ARB\"] ) ACEIOrARBAllergyOrIntoleranceDiagnosis\r\n    with HeartFailure.\"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD\" ModerateOrSevereLVSDHFOutpatientEncounter\r\n      such that ACEIOrARBAllergyOrIntoleranceDiagnosis.prevalencePeriod overlaps after day of ModerateOrSevereLVSDHFOutpatientEncounter.relevantPeriod\r\n\r\ndefine \"Has Diagnosis of Pregnancy\":\r\n  exists [\"Diagnosis\": \"Pregnancy\"] Pregnancy\r\n    with HeartFailure.\"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD\" ModerateOrSevereLVSDHFOutpatientEncounter\r\n      such that Pregnancy.prevalencePeriod starts 9 months or less before or on start ModerateOrSevereLVSDHFOutpatientEncounter.relevantPeriod\r\n\r\ndefine \"Has Diagnosis of Renal Failure Due to ACEI\":\r\n  exists [\"Diagnosis\": \"Acute renal failure caused by angiotensin-converting-enzyme inhibitor (disorder)\"] RenalFailureDueToACEI\r\n    with HeartFailure.\"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD\" ModerateOrSevereLVSDHFOutpatientEncounter\r\n      such that RenalFailureDueToACEI.prevalencePeriod overlaps day of ModerateOrSevereLVSDHFOutpatientEncounter.relevantPeriod\r\n\r\ndefine \"Is Currently Taking ACEI or ARB or ARNI\":\r\n  exists [\"Medication, Active\": \"ACE Inhibitor or ARB or ARNI\"] ActiveACEIOrARBOrARNI\r\n    with HeartFailure.\"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD\" ModerateOrSevereLVSDHFOutpatientEncounter\r\n      such that ActiveACEIOrARBOrARNI.relevantPeriod overlaps after day of ModerateOrSevereLVSDHFOutpatientEncounter.relevantPeriod\r\n\r\ndefine \"Denominator Exclusions\":\r\n  HeartFailure.\"Has Heart Transplant\"\r\n    or HeartFailure.\"Has Heart Transplant Complications\"\r\n    or HeartFailure.\"Has Left Ventricular Assist Device\"\r\n    or HeartFailure.\"Has Left Ventricular Assist Device Complications\"\r\n\r\ndefine \"Has Medical or Patient Reason for Not Ordering ACEI or ARB or ARNI\":\r\n  exists [\"Medication, Not Ordered\": \"ACE Inhibitor or ARB or ARNI\"] NoACEIOrARBOrARNIOrdered\r\n    with HeartFailure.\"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD\" ModerateOrSevereLVSDHFOutpatientEncounter\r\n      such that NoACEIOrARBOrARNIOrdered.authorDatetime during day of ModerateOrSevereLVSDHFOutpatientEncounter.relevantPeriod\r\n    where ( NoACEIOrARBOrARNIOrdered.negationRationale in \"Medical Reason\"\r\n        or NoACEIOrARBOrARNIOrdered.negationRationale in \"Patient Reason\"\r\n        or NoACEIOrARBOrARNIOrdered.negationRationale in \"Patient Reason for ACE Inhibitor or ARB Decline\"\r\n    )\r\n\r\ndefine \"Initial Population\":\r\n  HeartFailure.\"Is Adults With Two Qualifying Outpatient Encounters and One Heart Failure Outpatient Encounter During the Measurement Period\"","elm":{"library":{"annotation":[{"translatorOptions":"EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion,DisableMethodInvocation","type":"CqlToElmInfo"},{"type":"Annotation","s":{"r":"164","s":[{"value":["","library HFACEIorARBorARNIforLVSD version '13.4.000'"]}]}}],"identifier":{"id":"HFACEIorARBorARNIforLVSD","version":"13.4.000"},"schemaIdentifier":{"id":"urn:hl7-org:elm","version":"r1"},"usings":{"def":[{"localIdentifier":"System","uri":"urn:hl7-org:elm-types:r1"},{"localId":"1","locator":"3:1-3:23","localIdentifier":"QDM","uri":"urn:healthit-gov:qdm:v5_6","version":"5.6","annotation":[{"type":"Annotation","s":{"r":"1","s":[{"value":["","using "]},{"s":[{"value":["QDM"]}]},{"value":[" version ","'5.6'"]}]}}]}]},"includes":{"def":[{"localId":"2","locator":"5:1-5:68","localIdentifier":"HeartFailure","path":"HFCommonDefinitionsQDM","version":"3.0.000","annotation":[{"type":"Annotation","s":{"r":"2","s":[{"value":["","include "]},{"s":[{"value":["HFCommonDefinitionsQDM"]}]},{"value":[" version ","'3.0.000'"," called ","HeartFailure"]}]}}]},{"localId":"3","locator":"6:1-6:67","localIdentifier":"Global","path":"MATGlobalCommonFunctionsQDM","version":"8.0.000","annotation":[{"type":"Annotation","s":{"r":"3","s":[{"value":["","include "]},{"s":[{"value":["MATGlobalCommonFunctionsQDM"]}]},{"value":[" version ","'8.0.000'"," called ","Global"]}]}}]}]},"codeSystems":{"def":[{"localId":"4","locator":"8:1-8:55","name":"SNOMEDCT","id":"2.16.840.1.113883.6.96","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"4","s":[{"value":["","codesystem ","\"SNOMEDCT\"",": ","'urn:oid:2.16.840.1.113883.6.96'"]}]}}]}]},"valueSets":{"def":[{"localId":"5","locator":"10:1-10:81","name":"ACE Inhibitor or ARB or ARNI","id":"2.16.840.1.113883.3.526.3.1139","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"5","s":[{"value":["","valueset ","\"ACE Inhibitor or ARB or ARNI\"",": ","'urn:oid:2.16.840.1.113883.3.526.3.1139'"]}]}}]},{"localId":"6","locator":"11:1-11:92","name":"ACE Inhibitor or ARB or ARNI Ingredient","id":"2.16.840.1.113883.3.526.3.1489","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"6","s":[{"value":["","valueset ","\"ACE Inhibitor or ARB or ARNI Ingredient\"",": ","'urn:oid:2.16.840.1.113883.3.526.3.1489'"]}]}}]},{"localId":"7","locator":"12:1-12:84","name":"Allergy to ACE Inhibitor or ARB","id":"2.16.840.1.113883.3.526.3.1211","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"7","s":[{"value":["","valueset ","\"Allergy to ACE Inhibitor or ARB\"",": ","'urn:oid:2.16.840.1.113883.3.526.3.1211'"]}]}}]},{"localId":"8","locator":"13:1-13:58","name":"Ethnicity","id":"2.16.840.1.114222.4.11.837","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"8","s":[{"value":["","valueset ","\"Ethnicity\"",": ","'urn:oid:2.16.840.1.114222.4.11.837'"]}]}}]},{"localId":"9","locator":"14:1-14:88","name":"Intolerance to ACE Inhibitor or ARB","id":"2.16.840.1.113883.3.526.3.1212","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"9","s":[{"value":["","valueset ","\"Intolerance to ACE Inhibitor or ARB\"",": ","'urn:oid:2.16.840.1.113883.3.526.3.1212'"]}]}}]},{"localId":"10","locator":"15:1-15:67","name":"Medical Reason","id":"2.16.840.1.113883.3.526.3.1007","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"10","s":[{"value":["","valueset ","\"Medical Reason\"",": ","'urn:oid:2.16.840.1.113883.3.526.3.1007'"]}]}}]},{"localId":"11","locator":"16:1-16:68","name":"ONC Administrative Sex","id":"2.16.840.1.113762.1.4.1","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"11","s":[{"value":["","valueset ","\"ONC Administrative Sex\"",": ","'urn:oid:2.16.840.1.113762.1.4.1'"]}]}}]},{"localId":"12","locator":"17:1-17:67","name":"Patient Reason","id":"2.16.840.1.113883.3.526.3.1008","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"12","s":[{"value":["","valueset ","\"Patient Reason\"",": ","'urn:oid:2.16.840.1.113883.3.526.3.1008'"]}]}}]},{"localId":"13","locator":"18:1-18:100","name":"Patient Reason for ACE Inhibitor or ARB Decline","id":"2.16.840.1.113883.3.526.3.1140","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"13","s":[{"value":["","valueset ","\"Patient Reason for ACE Inhibitor or ARB Decline\"",": ","'urn:oid:2.16.840.1.113883.3.526.3.1140'"]}]}}]},{"localId":"14","locator":"19:1-19:60","name":"Payer Type","id":"2.16.840.1.114222.4.11.3591","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"14","s":[{"value":["","valueset ","\"Payer Type\"",": ","'urn:oid:2.16.840.1.114222.4.11.3591'"]}]}}]},{"localId":"15","locator":"20:1-20:61","name":"Pregnancy","id":"2.16.840.1.113883.3.526.3.378","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"15","s":[{"value":["","valueset ","\"Pregnancy\"",": ","'urn:oid:2.16.840.1.113883.3.526.3.378'"]}]}}]},{"localId":"16","locator":"21:1-21:53","name":"Race","id":"2.16.840.1.114222.4.11.836","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"16","s":[{"value":["","valueset ","\"Race\"",": ","'urn:oid:2.16.840.1.114222.4.11.836'"]}]}}]}]},"codes":{"def":[{"localId":"18","locator":"23:1-23:207","name":"Acute renal failure caused by angiotensin-converting-enzyme inhibitor (disorder)","id":"422593004","display":"Acute renal failure caused by angiotensin-converting-enzyme inhibitor (disorder)","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"18","s":[{"value":["","code ","\"Acute renal failure caused by angiotensin-converting-enzyme inhibitor (disorder)\"",": ","'422593004'"," from "]},{"r":"17","s":[{"value":["\"SNOMEDCT\""]}]},{"value":[" display ","'Acute renal failure caused by angiotensin-converting-enzyme inhibitor (disorder)'"]}]}}],"codeSystem":{"localId":"17","locator":"23:107-23:116","name":"SNOMEDCT"}},{"localId":"20","locator":"24:1-24:209","name":"Substance with angiotensin II receptor antagonist mechanism of action (substance)","id":"372913009","display":"Substance with angiotensin II receptor antagonist mechanism of action (substance)","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"20","s":[{"value":["","code ","\"Substance with angiotensin II receptor antagonist mechanism of action (substance)\"",": ","'372913009'"," from "]},{"r":"19","s":[{"value":["\"SNOMEDCT\""]}]},{"value":[" display ","'Substance with angiotensin II receptor antagonist mechanism of action (substance)'"]}]}}],"codeSystem":{"localId":"19","locator":"24:108-24:117","name":"SNOMEDCT"}},{"localId":"22","locator":"25:1-25:219","name":"Substance with angiotensin-converting enzyme inhibitor mechanism of action (substance)","id":"372733002","display":"Substance with angiotensin-converting enzyme inhibitor mechanism of action (substance)","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"22","s":[{"value":["","code ","\"Substance with angiotensin-converting enzyme inhibitor mechanism of action (substance)\"",": ","'372733002'"," from "]},{"r":"21","s":[{"value":["\"SNOMEDCT\""]}]},{"value":[" display ","'Substance with angiotensin-converting enzyme inhibitor mechanism of action (substance)'"]}]}}],"codeSystem":{"localId":"21","locator":"25:113-25:122","name":"SNOMEDCT"}},{"localId":"24","locator":"26:1-26:181","name":"Substance with neprilysin inhibitor mechanism of action (substance)","id":"786886009","display":"Substance with neprilysin inhibitor mechanism of action (substance)","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"24","s":[{"value":["","code ","\"Substance with neprilysin inhibitor mechanism of action (substance)\"",": ","'786886009'"," from "]},{"r":"23","s":[{"value":["\"SNOMEDCT\""]}]},{"value":[" display ","'Substance with neprilysin inhibitor mechanism of action (substance)'"]}]}}],"codeSystem":{"localId":"23","locator":"26:94-26:103","name":"SNOMEDCT"}}]},"contexts":{"def":[{"locator":"28:1-28:15","name":"Patient"}]},"statements":{"def":[{"locator":"28:1-28:15","name":"Patient","context":"Patient","expression":{"type":"SingletonFrom","operand":{"locator":"28:1-28:15","dataType":"{urn:healthit-gov:qdm:v5_6}Patient","templateId":"Patient","type":"Retrieve"}}},{"localId":"51","locator":"97:1-104:5","name":"Has Medical or Patient Reason for Not Ordering ACEI or ARB or ARNI","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"51","s":[{"value":["","define ","\"Has Medical or Patient Reason for Not Ordering ACEI or ARB or ARNI\"",":\n  "]},{"r":"50","s":[{"value":["exists "]},{"r":"49","s":[{"s":[{"r":"26","s":[{"r":"25","s":[{"r":"25","s":[{"value":["[","\"Medication, Not Ordered\"",": "]},{"s":[{"value":["\"ACE Inhibitor or ARB or ARNI\""]}]},{"value":["]"]}]}]},{"value":[" ","NoACEIOrARBOrARNIOrdered"]}]}]},{"value":["\n    "]},{"r":"34","s":[{"value":["with "]},{"r":"28","s":[{"r":"27","s":[{"s":[{"value":["HeartFailure",".","\"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD\""]}]}]},{"value":[" ","ModerateOrSevereLVSDHFOutpatientEncounter"]}]},{"value":["\n      such that "]},{"r":"33","s":[{"r":"30","s":[{"r":"29","s":[{"value":["NoACEIOrARBOrARNIOrdered"]}]},{"value":["."]},{"r":"30","s":[{"value":["authorDatetime"]}]}]},{"r":"33","value":[" ","during day of"," "]},{"r":"32","s":[{"r":"31","s":[{"value":["ModerateOrSevereLVSDHFOutpatientEncounter"]}]},{"value":["."]},{"r":"32","s":[{"value":["relevantPeriod"]}]}]}]}]},{"value":["\n    "]},{"r":"48","s":[{"value":["where "]},{"r":"48","s":[{"value":["( "]},{"r":"48","s":[{"r":"43","s":[{"r":"38","s":[{"r":"36","s":[{"r":"35","s":[{"value":["NoACEIOrARBOrARNIOrdered"]}]},{"value":["."]},{"r":"36","s":[{"value":["negationRationale"]}]}]},{"value":[" in "]},{"r":"37","s":[{"value":["\"Medical Reason\""]}]}]},{"value":["\n        or "]},{"r":"42","s":[{"r":"40","s":[{"r":"39","s":[{"value":["NoACEIOrARBOrARNIOrdered"]}]},{"value":["."]},{"r":"40","s":[{"value":["negationRationale"]}]}]},{"value":[" in "]},{"r":"41","s":[{"value":["\"Patient Reason\""]}]}]}]},{"value":["\n        or "]},{"r":"47","s":[{"r":"45","s":[{"r":"44","s":[{"value":["NoACEIOrARBOrARNIOrdered"]}]},{"value":["."]},{"r":"45","s":[{"value":["negationRationale"]}]}]},{"value":[" in "]},{"r":"46","s":[{"value":["\"Patient Reason for ACE Inhibitor or ARB Decline\""]}]}]}]},{"value":["\n    )"]}]}]}]}]}]}}],"expression":{"localId":"50","locator":"98:3-104:5","type":"Exists","operand":{"localId":"49","locator":"98:10-104:5","type":"Query","source":[{"localId":"26","locator":"98:10-98:93","alias":"NoACEIOrARBOrARNIOrdered","expression":{"localId":"25","locator":"98:10-98:68","dataType":"{urn:healthit-gov:qdm:v5_6}NegativeMedicationOrder","templateId":"NegativeMedicationOrder","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"98:38-98:67","name":"ACE Inhibitor or ARB or ARNI","preserve":true,"type":"ValueSetRef"}}}],"relationship":[{"localId":"34","locator":"99:5-100:126","alias":"ModerateOrSevereLVSDHFOutpatientEncounter","type":"With","expression":{"localId":"27","locator":"99:10-99:98","name":"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD","libraryName":"HeartFailure","type":"ExpressionRef"},"suchThat":{"localId":"33","locator":"100:17-100:126","precision":"Day","type":"In","operand":[{"localId":"30","locator":"100:17-100:55","path":"authorDatetime","scope":"NoACEIOrARBOrARNIOrdered","type":"Property"},{"localId":"32","locator":"100:71-100:126","path":"relevantPeriod","scope":"ModerateOrSevereLVSDHFOutpatientEncounter","type":"Property"}]}}],"where":{"localId":"48","locator":"101:5-104:5","type":"Or","operand":[{"localId":"43","locator":"101:13-102:73","type":"Or","operand":[{"localId":"38","locator":"101:13-101:74","type":"InValueSet","code":{"localId":"36","locator":"101:13-101:54","path":"negationRationale","scope":"NoACEIOrARBOrARNIOrdered","type":"Property"},"valueset":{"localId":"37","locator":"101:59-101:74","name":"Medical Reason","preserve":true}},{"localId":"42","locator":"102:12-102:73","type":"InValueSet","code":{"localId":"40","locator":"102:12-102:53","path":"negationRationale","scope":"NoACEIOrARBOrARNIOrdered","type":"Property"},"valueset":{"localId":"41","locator":"102:58-102:73","name":"Patient Reason","preserve":true}}]},{"localId":"47","locator":"103:12-103:106","type":"InValueSet","code":{"localId":"45","locator":"103:12-103:53","path":"negationRationale","scope":"NoACEIOrARBOrARNIOrdered","type":"Property"},"valueset":{"localId":"46","locator":"103:58-103:106","name":"Patient Reason for ACE Inhibitor or ARB Decline","preserve":true}}]}}}},{"localId":"72","locator":"62:1-68:145","name":"Has Allergy or Intolerance to ACEI or ARB or ARNI Ingredient","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"72","s":[{"value":["","define ","\"Has Allergy or Intolerance to ACEI or ARB or ARNI Ingredient\"",":\n  "]},{"r":"71","s":[{"value":["exists "]},{"r":"70","s":[{"s":[{"r":"61","s":[{"r":"60","s":[{"value":["( "]},{"r":"60","s":[{"r":"57","s":[{"r":"55","s":[{"r":"53","s":[{"value":["[","\"Allergy/Intolerance\"",": "]},{"s":[{"value":["\"ACE Inhibitor or ARB or ARNI Ingredient\""]}]},{"value":["]"]}]},{"value":["\n    union "]},{"r":"54","s":[{"value":["[","\"Allergy/Intolerance\"",": "]},{"s":[{"value":["\"Substance with angiotensin-converting enzyme inhibitor mechanism of action (substance)\""]}]},{"value":["]"]}]}]},{"value":["\n    union "]},{"r":"56","s":[{"value":["[","\"Allergy/Intolerance\"",": "]},{"s":[{"value":["\"Substance with angiotensin II receptor antagonist mechanism of action (substance)\""]}]},{"value":["]"]}]}]},{"value":["\n    union "]},{"r":"58","s":[{"value":["[","\"Allergy/Intolerance\"",": "]},{"s":[{"value":["\"Substance with neprilysin inhibitor mechanism of action (substance)\""]}]},{"value":["]"]}]}]},{"value":[" )"]}]},{"value":[" ","ACEIOrARBOrARNIAllergyIntolerance"]}]}]},{"value":["\n    "]},{"r":"69","s":[{"value":["with "]},{"r":"63","s":[{"r":"62","s":[{"s":[{"value":["HeartFailure",".","\"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD\""]}]}]},{"value":[" ","ModerateOrSevereLVSDHFOutpatientEncounter"]}]},{"value":["\n      such that "]},{"r":"68","s":[{"r":"65","s":[{"r":"64","s":[{"value":["ACEIOrARBOrARNIAllergyIntolerance"]}]},{"value":["."]},{"r":"65","s":[{"value":["prevalencePeriod"]}]}]},{"r":"68","value":[" ","overlaps after day of"," "]},{"r":"67","s":[{"r":"66","s":[{"value":["ModerateOrSevereLVSDHFOutpatientEncounter"]}]},{"value":["."]},{"r":"67","s":[{"value":["relevantPeriod"]}]}]}]}]}]}]}]}}],"expression":{"localId":"71","locator":"63:3-68:145","type":"Exists","operand":{"localId":"70","locator":"63:10-68:145","type":"Query","source":[{"localId":"61","locator":"63:10-66:140","alias":"ACEIOrARBOrARNIAllergyIntolerance","expression":{"localId":"60","locator":"63:10-66:106","type":"Union","operand":[{"localId":"55","locator":"63:12-64:123","type":"Union","operand":[{"localId":"53","locator":"63:12-63:77","dataType":"{urn:healthit-gov:qdm:v5_6}AllergyIntolerance","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"63:36-63:76","name":"ACE Inhibitor or ARB or ARNI Ingredient","preserve":true,"type":"ValueSetRef"}},{"localId":"54","locator":"64:11-64:123","dataType":"{urn:healthit-gov:qdm:v5_6}AllergyIntolerance","codeProperty":"code","codeComparator":"~","type":"Retrieve","codes":{"type":"ToList","operand":{"locator":"64:35-64:122","name":"Substance with angiotensin-converting enzyme inhibitor mechanism of action (substance)","type":"CodeRef"}}}]},{"localId":"59","type":"Union","operand":[{"localId":"56","locator":"65:11-65:118","dataType":"{urn:healthit-gov:qdm:v5_6}AllergyIntolerance","codeProperty":"code","codeComparator":"~","type":"Retrieve","codes":{"type":"ToList","operand":{"locator":"65:35-65:117","name":"Substance with angiotensin II receptor antagonist mechanism of action (substance)","type":"CodeRef"}}},{"localId":"58","locator":"66:11-66:104","dataType":"{urn:healthit-gov:qdm:v5_6}AllergyIntolerance","codeProperty":"code","codeComparator":"~","type":"Retrieve","codes":{"type":"ToList","operand":{"locator":"66:35-66:103","name":"Substance with neprilysin inhibitor mechanism of action (substance)","type":"CodeRef"}}}]}]}}],"relationship":[{"localId":"69","locator":"67:5-68:145","alias":"ModerateOrSevereLVSDHFOutpatientEncounter","type":"With","expression":{"localId":"62","locator":"67:10-67:98","name":"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD","libraryName":"HeartFailure","type":"ExpressionRef"},"suchThat":{"localId":"68","locator":"68:17-68:145","precision":"Day","type":"OverlapsAfter","operand":[{"localId":"65","locator":"68:17-68:66","path":"prevalencePeriod","scope":"ACEIOrARBOrARNIAllergyIntolerance","type":"Property"},{"localId":"67","locator":"68:90-68:145","path":"relevantPeriod","scope":"ModerateOrSevereLVSDHFOutpatientEncounter","type":"Property"}]}}]}}},{"localId":"89","locator":"70:1-74:150","name":"Has Diagnosis of Allergy or Intolerance to ACEI or ARB","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"89","s":[{"value":["","define ","\"Has Diagnosis of Allergy or Intolerance to ACEI or ARB\"",":\n  "]},{"r":"88","s":[{"value":["exists "]},{"r":"87","s":[{"s":[{"r":"78","s":[{"r":"77","s":[{"value":["( "]},{"r":"77","s":[{"r":"75","s":[{"value":["[","\"Diagnosis\"",": "]},{"s":[{"value":["\"Allergy to ACE Inhibitor or ARB\""]}]},{"value":["]"]}]},{"value":["\n    union "]},{"r":"76","s":[{"value":["[","\"Diagnosis\"",": "]},{"s":[{"value":["\"Intolerance to ACE Inhibitor or ARB\""]}]},{"value":["]"]}]}]},{"value":[" )"]}]},{"value":[" ","ACEIOrARBAllergyOrIntoleranceDiagnosis"]}]}]},{"value":["\n    "]},{"r":"86","s":[{"value":["with "]},{"r":"80","s":[{"r":"79","s":[{"s":[{"value":["HeartFailure",".","\"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD\""]}]}]},{"value":[" ","ModerateOrSevereLVSDHFOutpatientEncounter"]}]},{"value":["\n      such that "]},{"r":"85","s":[{"r":"82","s":[{"r":"81","s":[{"value":["ACEIOrARBAllergyOrIntoleranceDiagnosis"]}]},{"value":["."]},{"r":"82","s":[{"value":["prevalencePeriod"]}]}]},{"r":"85","value":[" ","overlaps after day of"," "]},{"r":"84","s":[{"r":"83","s":[{"value":["ModerateOrSevereLVSDHFOutpatientEncounter"]}]},{"value":["."]},{"r":"84","s":[{"value":["relevantPeriod"]}]}]}]}]}]}]}]}}],"expression":{"localId":"88","locator":"71:3-74:150","type":"Exists","operand":{"localId":"87","locator":"71:10-74:150","type":"Query","source":[{"localId":"78","locator":"71:10-72:103","alias":"ACEIOrARBAllergyOrIntoleranceDiagnosis","expression":{"localId":"77","locator":"71:10-72:64","type":"Union","operand":[{"localId":"75","locator":"71:12-71:59","dataType":"{urn:healthit-gov:qdm:v5_6}Diagnosis","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"71:26-71:58","name":"Allergy to ACE Inhibitor or ARB","preserve":true,"type":"ValueSetRef"}},{"localId":"76","locator":"72:11-72:62","dataType":"{urn:healthit-gov:qdm:v5_6}Diagnosis","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"72:25-72:61","name":"Intolerance to ACE Inhibitor or ARB","preserve":true,"type":"ValueSetRef"}}]}}],"relationship":[{"localId":"86","locator":"73:5-74:150","alias":"ModerateOrSevereLVSDHFOutpatientEncounter","type":"With","expression":{"localId":"79","locator":"73:10-73:98","name":"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD","libraryName":"HeartFailure","type":"ExpressionRef"},"suchThat":{"localId":"85","locator":"74:17-74:150","precision":"Day","type":"OverlapsAfter","operand":[{"localId":"82","locator":"74:17-74:71","path":"prevalencePeriod","scope":"ACEIOrARBAllergyOrIntoleranceDiagnosis","type":"Property"},{"localId":"84","locator":"74:95-74:150","path":"relevantPeriod","scope":"ModerateOrSevereLVSDHFOutpatientEncounter","type":"Property"}]}}]}}},{"localId":"105","locator":"76:1-79:142","name":"Has Diagnosis of Pregnancy","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"105","s":[{"value":["","define ","\"Has Diagnosis of Pregnancy\"",":\n  "]},{"r":"104","s":[{"value":["exists "]},{"r":"103","s":[{"s":[{"r":"93","s":[{"r":"92","s":[{"r":"92","s":[{"value":["[","\"Diagnosis\"",": "]},{"s":[{"value":["\"Pregnancy\""]}]},{"value":["]"]}]}]},{"value":[" ","Pregnancy"]}]}]},{"value":["\n    "]},{"r":"102","s":[{"value":["with "]},{"r":"95","s":[{"r":"94","s":[{"s":[{"value":["HeartFailure",".","\"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD\""]}]}]},{"value":[" ","ModerateOrSevereLVSDHFOutpatientEncounter"]}]},{"value":["\n      such that "]},{"r":"101","s":[{"r":"97","s":[{"r":"96","s":[{"value":["Pregnancy"]}]},{"value":["."]},{"r":"97","s":[{"value":["prevalencePeriod"]}]}]},{"value":[" "]},{"r":"101","s":[{"value":["starts "]},{"r":"100","s":[{"value":["9 ","months"]}]},{"value":[" or less before or on start"]}]},{"value":[" "]},{"r":"99","s":[{"r":"98","s":[{"value":["ModerateOrSevereLVSDHFOutpatientEncounter"]}]},{"value":["."]},{"r":"99","s":[{"value":["relevantPeriod"]}]}]}]}]}]}]}]}}],"expression":{"localId":"104","locator":"77:3-79:142","type":"Exists","operand":{"localId":"103","locator":"77:10-79:142","type":"Query","source":[{"localId":"93","locator":"77:10-77:45","alias":"Pregnancy","expression":{"localId":"92","locator":"77:10-77:35","dataType":"{urn:healthit-gov:qdm:v5_6}Diagnosis","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"77:24-77:34","name":"Pregnancy","preserve":true,"type":"ValueSetRef"}}}],"relationship":[{"localId":"102","locator":"78:5-79:142","alias":"ModerateOrSevereLVSDHFOutpatientEncounter","type":"With","expression":{"localId":"94","locator":"78:10-78:98","name":"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD","libraryName":"HeartFailure","type":"ExpressionRef"},"suchThat":{"localId":"101","locator":"79:17-79:142","type":"And","operand":[{"locator":"79:51-79:66","type":"In","operand":[{"locator":"79:44-79:49","type":"Start","operand":{"localId":"97","locator":"79:17-79:42","path":"prevalencePeriod","scope":"Pregnancy","type":"Property"}},{"locator":"79:51-79:66","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"79:81-79:85","type":"Subtract","operand":[{"locator":"79:81-79:85","type":"Start","operand":{"localId":"99","locator":"79:87-79:142","path":"relevantPeriod","scope":"ModerateOrSevereLVSDHFOutpatientEncounter","type":"Property"}},{"localId":"100","locator":"79:51-79:58","value":9,"unit":"months","type":"Quantity"}]},"high":{"locator":"79:81-79:85","type":"Start","operand":{"localId":"99","locator":"79:87-79:142","path":"relevantPeriod","scope":"ModerateOrSevereLVSDHFOutpatientEncounter","type":"Property"}}}]},{"locator":"79:51-79:66","type":"Not","operand":{"locator":"79:51-79:66","type":"IsNull","operand":{"locator":"79:81-79:85","type":"Start","operand":{"localId":"99","locator":"79:87-79:142","path":"relevantPeriod","scope":"ModerateOrSevereLVSDHFOutpatientEncounter","type":"Property"}}}}]}}]}}},{"localId":"120","locator":"81:1-84:127","name":"Has Diagnosis of Renal Failure Due to ACEI","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"120","s":[{"value":["","define ","\"Has Diagnosis of Renal Failure Due to ACEI\"",":\n  "]},{"r":"119","s":[{"value":["exists "]},{"r":"118","s":[{"s":[{"r":"109","s":[{"r":"108","s":[{"r":"108","s":[{"value":["[","\"Diagnosis\"",": "]},{"s":[{"value":["\"Acute renal failure caused by angiotensin-converting-enzyme inhibitor (disorder)\""]}]},{"value":["]"]}]}]},{"value":[" ","RenalFailureDueToACEI"]}]}]},{"value":["\n    "]},{"r":"117","s":[{"value":["with "]},{"r":"111","s":[{"r":"110","s":[{"s":[{"value":["HeartFailure",".","\"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD\""]}]}]},{"value":[" ","ModerateOrSevereLVSDHFOutpatientEncounter"]}]},{"value":["\n      such that "]},{"r":"116","s":[{"r":"113","s":[{"r":"112","s":[{"value":["RenalFailureDueToACEI"]}]},{"value":["."]},{"r":"113","s":[{"value":["prevalencePeriod"]}]}]},{"r":"116","value":[" ","overlaps day of"," "]},{"r":"115","s":[{"r":"114","s":[{"value":["ModerateOrSevereLVSDHFOutpatientEncounter"]}]},{"value":["."]},{"r":"115","s":[{"value":["relevantPeriod"]}]}]}]}]}]}]}]}}],"expression":{"localId":"119","locator":"82:3-84:127","type":"Exists","operand":{"localId":"118","locator":"82:10-84:127","type":"Query","source":[{"localId":"109","locator":"82:10-82:128","alias":"RenalFailureDueToACEI","expression":{"localId":"108","locator":"82:10-82:106","dataType":"{urn:healthit-gov:qdm:v5_6}Diagnosis","codeProperty":"code","codeComparator":"~","type":"Retrieve","codes":{"type":"ToList","operand":{"locator":"82:24-82:105","name":"Acute renal failure caused by angiotensin-converting-enzyme inhibitor (disorder)","type":"CodeRef"}}}}],"relationship":[{"localId":"117","locator":"83:5-84:127","alias":"ModerateOrSevereLVSDHFOutpatientEncounter","type":"With","expression":{"localId":"110","locator":"83:10-83:98","name":"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD","libraryName":"HeartFailure","type":"ExpressionRef"},"suchThat":{"localId":"116","locator":"84:17-84:127","precision":"Day","type":"Overlaps","operand":[{"localId":"113","locator":"84:17-84:54","path":"prevalencePeriod","scope":"RenalFailureDueToACEI","type":"Property"},{"localId":"115","locator":"84:72-84:127","path":"relevantPeriod","scope":"ModerateOrSevereLVSDHFOutpatientEncounter","type":"Property"}]}}]}}},{"localId":"123","locator":"30:1-35:51","name":"Denominator Exceptions","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"123","s":[{"value":["","define ","\"Denominator Exceptions\"",":\n  "]},{"r":"122","s":[{"r":"107","s":[{"r":"91","s":[{"r":"74","s":[{"r":"52","s":[{"value":["\"Has Medical or Patient Reason for Not Ordering ACEI or ARB or ARNI\""]}]},{"value":["\n    or "]},{"r":"73","s":[{"value":["\"Has Allergy or Intolerance to ACEI or ARB or ARNI Ingredient\""]}]}]},{"value":["\n    or "]},{"r":"90","s":[{"value":["\"Has Diagnosis of Allergy or Intolerance to ACEI or ARB\""]}]}]},{"value":["\n    or "]},{"r":"106","s":[{"value":["\"Has Diagnosis of Pregnancy\""]}]}]},{"value":["\n    or "]},{"r":"121","s":[{"value":["\"Has Diagnosis of Renal Failure Due to ACEI\""]}]}]}]}}],"expression":{"localId":"122","locator":"31:3-35:51","type":"Or","operand":[{"localId":"107","locator":"31:3-34:35","type":"Or","operand":[{"localId":"91","locator":"31:3-33:63","type":"Or","operand":[{"localId":"74","locator":"31:3-32:69","type":"Or","operand":[{"localId":"52","locator":"31:3-31:70","name":"Has Medical or Patient Reason for Not Ordering ACEI or ARB or ARNI","type":"ExpressionRef"},{"localId":"73","locator":"32:8-32:69","name":"Has Allergy or Intolerance to ACEI or ARB or ARNI Ingredient","type":"ExpressionRef"}]},{"localId":"90","locator":"33:8-33:63","name":"Has Diagnosis of Allergy or Intolerance to ACEI or ARB","type":"ExpressionRef"}]},{"localId":"106","locator":"34:8-34:35","name":"Has Diagnosis of Pregnancy","type":"ExpressionRef"}]},{"localId":"121","locator":"35:8-35:51","name":"Has Diagnosis of Renal Failure Due to ACEI","type":"ExpressionRef"}]}},{"localId":"136","locator":"57:1-60:124","name":"Has ACEI or ARB or ARNI Ordered","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"136","s":[{"value":["","define ","\"Has ACEI or ARB or ARNI Ordered\"",":\n  "]},{"r":"135","s":[{"value":["exists "]},{"r":"134","s":[{"s":[{"r":"125","s":[{"r":"124","s":[{"r":"124","s":[{"value":["[","\"Medication, Order\"",": "]},{"s":[{"value":["\"ACE Inhibitor or ARB or ARNI\""]}]},{"value":["]"]}]}]},{"value":[" ","ACEIOrARBOrARNIOrdered"]}]}]},{"value":["\n    "]},{"r":"133","s":[{"value":["with "]},{"r":"127","s":[{"r":"126","s":[{"s":[{"value":["HeartFailure",".","\"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD\""]}]}]},{"value":[" ","ModerateOrSevereLVSDHFOutpatientEncounter"]}]},{"value":["\n      such that "]},{"r":"132","s":[{"r":"129","s":[{"r":"128","s":[{"value":["ACEIOrARBOrARNIOrdered"]}]},{"value":["."]},{"r":"129","s":[{"value":["authorDatetime"]}]}]},{"r":"132","value":[" ","during day of"," "]},{"r":"131","s":[{"r":"130","s":[{"value":["ModerateOrSevereLVSDHFOutpatientEncounter"]}]},{"value":["."]},{"r":"131","s":[{"value":["relevantPeriod"]}]}]}]}]}]}]}]}}],"expression":{"localId":"135","locator":"58:3-60:124","type":"Exists","operand":{"localId":"134","locator":"58:10-60:124","type":"Query","source":[{"localId":"125","locator":"58:10-58:85","alias":"ACEIOrARBOrARNIOrdered","expression":{"localId":"124","locator":"58:10-58:62","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationOrder","templateId":"PositiveMedicationOrder","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"58:32-58:61","name":"ACE Inhibitor or ARB or ARNI","preserve":true,"type":"ValueSetRef"}}}],"relationship":[{"localId":"133","locator":"59:5-60:124","alias":"ModerateOrSevereLVSDHFOutpatientEncounter","type":"With","expression":{"localId":"126","locator":"59:10-59:98","name":"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD","libraryName":"HeartFailure","type":"ExpressionRef"},"suchThat":{"localId":"132","locator":"60:17-60:124","precision":"Day","type":"In","operand":[{"localId":"129","locator":"60:17-60:53","path":"authorDatetime","scope":"ACEIOrARBOrARNIOrdered","type":"Property"},{"localId":"131","locator":"60:69-60:124","path":"relevantPeriod","scope":"ModerateOrSevereLVSDHFOutpatientEncounter","type":"Property"}]}}]}}},{"localId":"150","locator":"86:1-89:131","name":"Is Currently Taking ACEI or ARB or ARNI","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"150","s":[{"value":["","define ","\"Is Currently Taking ACEI or ARB or ARNI\"",":\n  "]},{"r":"149","s":[{"value":["exists "]},{"r":"148","s":[{"s":[{"r":"139","s":[{"r":"138","s":[{"r":"138","s":[{"value":["[","\"Medication, Active\"",": "]},{"s":[{"value":["\"ACE Inhibitor or ARB or ARNI\""]}]},{"value":["]"]}]}]},{"value":[" ","ActiveACEIOrARBOrARNI"]}]}]},{"value":["\n    "]},{"r":"147","s":[{"value":["with "]},{"r":"141","s":[{"r":"140","s":[{"s":[{"value":["HeartFailure",".","\"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD\""]}]}]},{"value":[" ","ModerateOrSevereLVSDHFOutpatientEncounter"]}]},{"value":["\n      such that "]},{"r":"146","s":[{"r":"143","s":[{"r":"142","s":[{"value":["ActiveACEIOrARBOrARNI"]}]},{"value":["."]},{"r":"143","s":[{"value":["relevantPeriod"]}]}]},{"r":"146","value":[" ","overlaps after day of"," "]},{"r":"145","s":[{"r":"144","s":[{"value":["ModerateOrSevereLVSDHFOutpatientEncounter"]}]},{"value":["."]},{"r":"145","s":[{"value":["relevantPeriod"]}]}]}]}]}]}]}]}}],"expression":{"localId":"149","locator":"87:3-89:131","type":"Exists","operand":{"localId":"148","locator":"87:10-89:131","type":"Query","source":[{"localId":"139","locator":"87:10-87:85","alias":"ActiveACEIOrARBOrARNI","expression":{"localId":"138","locator":"87:10-87:63","dataType":"{urn:healthit-gov:qdm:v5_6}MedicationActive","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"87:33-87:62","name":"ACE Inhibitor or ARB or ARNI","preserve":true,"type":"ValueSetRef"}}}],"relationship":[{"localId":"147","locator":"88:5-89:131","alias":"ModerateOrSevereLVSDHFOutpatientEncounter","type":"With","expression":{"localId":"140","locator":"88:10-88:98","name":"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD","libraryName":"HeartFailure","type":"ExpressionRef"},"suchThat":{"localId":"146","locator":"89:17-89:131","precision":"Day","type":"OverlapsAfter","operand":[{"localId":"143","locator":"89:17-89:52","path":"relevantPeriod","scope":"ActiveACEIOrARBOrARNI","type":"Property"},{"localId":"145","locator":"89:76-89:131","path":"relevantPeriod","scope":"ModerateOrSevereLVSDHFOutpatientEncounter","type":"Property"}]}}]}}},{"localId":"153","locator":"37:1-39:48","name":"Numerator","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"153","s":[{"value":["","define ","\"Numerator\"",":\n  "]},{"r":"152","s":[{"r":"137","s":[{"value":["\"Has ACEI or ARB or ARNI Ordered\""]}]},{"value":["\n    or "]},{"r":"151","s":[{"value":["\"Is Currently Taking ACEI or ARB or ARNI\""]}]}]}]}}],"expression":{"localId":"152","locator":"38:3-39:48","type":"Or","operand":[{"localId":"137","locator":"38:3-38:35","name":"Has ACEI or ARB or ARNI Ordered","type":"ExpressionRef"},{"localId":"151","locator":"39:8-39:48","name":"Is Currently Taking ACEI or ARB or ARNI","type":"ExpressionRef"}]}},{"localId":"155","locator":"41:1-42:51","name":"SDE Ethnicity","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"155","s":[{"value":["","define ","\"SDE Ethnicity\"",":\n  "]},{"r":"154","s":[{"value":["[","\"Patient Characteristic Ethnicity\"",": "]},{"s":[{"value":["\"Ethnicity\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"154","locator":"42:3-42:51","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicEthnicity","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"42:40-42:50","name":"Ethnicity","preserve":true,"type":"ValueSetRef"}}},{"localId":"157","locator":"44:1-45:48","name":"SDE Payer","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"157","s":[{"value":["","define ","\"SDE Payer\"",":\n  "]},{"r":"156","s":[{"value":["[","\"Patient Characteristic Payer\"",": "]},{"s":[{"value":["\"Payer Type\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"156","locator":"45:3-45:48","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicPayer","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"45:36-45:47","name":"Payer Type","preserve":true,"type":"ValueSetRef"}}},{"localId":"159","locator":"47:1-48:41","name":"SDE Race","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"159","s":[{"value":["","define ","\"SDE Race\"",":\n  "]},{"r":"158","s":[{"value":["[","\"Patient Characteristic Race\"",": "]},{"s":[{"value":["\"Race\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"158","locator":"48:3-48:41","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicRace","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"48:35-48:40","name":"Race","preserve":true,"type":"ValueSetRef"}}},{"localId":"161","locator":"50:1-51:58","name":"SDE Sex","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"161","s":[{"value":["","define ","\"SDE Sex\"",":\n  "]},{"r":"160","s":[{"value":["[","\"Patient Characteristic Sex\"",": "]},{"s":[{"value":["\"ONC Administrative Sex\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"160","locator":"51:3-51:58","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicSex","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"51:34-51:57","name":"ONC Administrative Sex","preserve":true,"type":"ValueSetRef"}}},{"localId":"164","locator":"106:1-107:141","name":"Initial Population","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"164","s":[{"value":["","define ","\"Initial Population\"",":\n  "]},{"r":"163","s":[{"r":"162","s":[{"value":["HeartFailure"]}]},{"value":["."]},{"r":"163","s":[{"value":["\"Is Adults With Two Qualifying Outpatient Encounters and One Heart Failure Outpatient Encounter During the Measurement Period\""]}]}]}]}}],"expression":{"localId":"163","locator":"107:3-107:141","name":"Is Adults With Two Qualifying Outpatient Encounters and One Heart Failure Outpatient Encounter During the Measurement Period","libraryName":"HeartFailure","type":"ExpressionRef"}},{"localId":"170","locator":"53:1-55:104","name":"Denominator","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"170","s":[{"value":["","define ","\"Denominator\"",":\n  "]},{"r":"169","s":[{"r":"165","s":[{"value":["\"Initial Population\""]}]},{"value":["\n    and "]},{"r":"168","s":[{"value":["exists "]},{"r":"167","s":[{"r":"166","s":[{"value":["HeartFailure"]}]},{"value":["."]},{"r":"167","s":[{"value":["\"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD\""]}]}]}]}]}]}}],"expression":{"localId":"169","locator":"54:3-55:104","type":"And","operand":[{"localId":"165","locator":"54:3-54:22","name":"Initial Population","type":"ExpressionRef"},{"localId":"168","locator":"55:9-55:104","type":"Exists","operand":{"localId":"167","locator":"55:16-55:104","name":"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD","libraryName":"HeartFailure","type":"ExpressionRef"}}]}},{"localId":"182","locator":"91:1-95:70","name":"Denominator Exclusions","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"182","s":[{"value":["","define ","\"Denominator Exclusions\"",":\n  "]},{"r":"181","s":[{"r":"178","s":[{"r":"175","s":[{"r":"172","s":[{"r":"171","s":[{"value":["HeartFailure"]}]},{"value":["."]},{"r":"172","s":[{"value":["\"Has Heart Transplant\""]}]}]},{"value":["\n    or "]},{"r":"174","s":[{"r":"173","s":[{"value":["HeartFailure"]}]},{"value":["."]},{"r":"174","s":[{"value":["\"Has Heart Transplant Complications\""]}]}]}]},{"value":["\n    or "]},{"r":"177","s":[{"r":"176","s":[{"value":["HeartFailure"]}]},{"value":["."]},{"r":"177","s":[{"value":["\"Has Left Ventricular Assist Device\""]}]}]}]},{"value":["\n    or "]},{"r":"180","s":[{"r":"179","s":[{"value":["HeartFailure"]}]},{"value":["."]},{"r":"180","s":[{"value":["\"Has Left Ventricular Assist Device Complications\""]}]}]}]}]}}],"expression":{"localId":"181","locator":"92:3-95:70","type":"Or","operand":[{"localId":"178","locator":"92:3-94:56","type":"Or","operand":[{"localId":"175","locator":"92:3-93:56","type":"Or","operand":[{"localId":"172","locator":"92:3-92:37","name":"Has Heart Transplant","libraryName":"HeartFailure","type":"ExpressionRef"},{"localId":"174","locator":"93:8-93:56","name":"Has Heart Transplant Complications","libraryName":"HeartFailure","type":"ExpressionRef"}]},{"localId":"177","locator":"94:8-94:56","name":"Has Left Ventricular Assist Device","libraryName":"HeartFailure","type":"ExpressionRef"}]},{"localId":"180","locator":"95:8-95:70","name":"Has Left Ventricular Assist Device Complications","libraryName":"HeartFailure","type":"ExpressionRef"}]}}]}}},"elm_annotations":{"statements":[{"children":[{"children":[{"children":[{"text":"define \"Has Medical or Patient Reason for Not Ordering ACEI or ARB or ARNI\":\n  "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Medication, Not Ordered\": "}]},{"children":[{"children":[{"text":"\"ACE Inhibitor or ARB or ARNI\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"25"}],"node_type":"Retrieve","ref_id":"25"},{"children":[{"text":" NoACEIOrARBOrARNIOrdered"}]}],"ref_id":"26"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"HeartFailure.\"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD\""}]}]}],"node_type":"ExpressionRef","ref_id":"27"},{"children":[{"text":" ModerateOrSevereLVSDHFOutpatientEncounter"}]}],"ref_id":"28"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"NoACEIOrARBOrARNIOrdered"}]}],"ref_id":"29"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"30"}],"node_type":"Property","ref_id":"30"},{"children":[{"text":" during day of "}],"node_type":"In","ref_id":"33"},{"children":[{"children":[{"children":[{"text":"ModerateOrSevereLVSDHFOutpatientEncounter"}]}],"ref_id":"31"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"32"}],"node_type":"Property","ref_id":"32"}],"node_type":"In","ref_id":"33"}],"ref_id":"34"},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"NoACEIOrARBOrARNIOrdered"}]}],"ref_id":"35"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"negationRationale"}]}],"ref_id":"36"}],"ref_id":"36"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Medical Reason\""}]}],"ref_id":"37"}],"node_type":"InValueSet","ref_id":"38"},{"children":[{"text":"\n        or "}]},{"children":[{"children":[{"children":[{"children":[{"text":"NoACEIOrARBOrARNIOrdered"}]}],"ref_id":"39"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"negationRationale"}]}],"ref_id":"40"}],"ref_id":"40"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Patient Reason\""}]}],"ref_id":"41"}],"node_type":"InValueSet","ref_id":"42"}],"node_type":"Or","ref_id":"43"},{"children":[{"text":"\n        or "}]},{"children":[{"children":[{"children":[{"children":[{"text":"NoACEIOrARBOrARNIOrdered"}]}],"ref_id":"44"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"negationRationale"}]}],"ref_id":"45"}],"ref_id":"45"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Patient Reason for ACE Inhibitor or ARB Decline\""}]}],"ref_id":"46"}],"node_type":"InValueSet","ref_id":"47"}],"ref_id":"48"},{"children":[{"text":"\n    )"}]}],"ref_id":"48"}],"ref_id":"48"}],"node_type":"Query","ref_id":"49"}],"node_type":"Exists","ref_id":"50"}],"ref_id":"51"}],"define_name":"Has Medical or Patient Reason for Not Ordering ACEI or ARB or ARNI"},{"children":[{"children":[{"children":[{"text":"define \"Has Allergy or Intolerance to ACEI or ARB or ARNI Ingredient\":\n  "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Allergy/Intolerance\": "}]},{"children":[{"children":[{"text":"\"ACE Inhibitor or ARB or ARNI Ingredient\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"53"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"[\"Allergy/Intolerance\": "}]},{"children":[{"children":[{"text":"\"Substance with angiotensin-converting enzyme inhibitor mechanism of action (substance)\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"54"}],"node_type":"Union","ref_id":"55"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"[\"Allergy/Intolerance\": "}]},{"children":[{"children":[{"text":"\"Substance with angiotensin II receptor antagonist mechanism of action (substance)\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"56"}],"ref_id":"57"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"[\"Allergy/Intolerance\": "}]},{"children":[{"children":[{"text":"\"Substance with neprilysin inhibitor mechanism of action (substance)\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"58"}],"node_type":"Union","ref_id":"60"},{"children":[{"text":" )"}]}],"node_type":"Union","ref_id":"60"},{"children":[{"text":" ACEIOrARBOrARNIAllergyIntolerance"}]}],"ref_id":"61"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"HeartFailure.\"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD\""}]}]}],"node_type":"ExpressionRef","ref_id":"62"},{"children":[{"text":" ModerateOrSevereLVSDHFOutpatientEncounter"}]}],"ref_id":"63"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"ACEIOrARBOrARNIAllergyIntolerance"}]}],"ref_id":"64"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"prevalencePeriod"}]}],"node_type":"Property","ref_id":"65"}],"node_type":"Property","ref_id":"65"},{"children":[{"text":" overlaps after day of "}],"node_type":"OverlapsAfter","ref_id":"68"},{"children":[{"children":[{"children":[{"text":"ModerateOrSevereLVSDHFOutpatientEncounter"}]}],"ref_id":"66"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"67"}],"node_type":"Property","ref_id":"67"}],"node_type":"OverlapsAfter","ref_id":"68"}],"ref_id":"69"}],"node_type":"Query","ref_id":"70"}],"node_type":"Exists","ref_id":"71"}],"ref_id":"72"}],"define_name":"Has Allergy or Intolerance to ACEI or ARB or ARNI Ingredient"},{"children":[{"children":[{"children":[{"text":"define \"Has Diagnosis of Allergy or Intolerance to ACEI or ARB\":\n  "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"text":"[\"Diagnosis\": "}]},{"children":[{"children":[{"text":"\"Allergy to ACE Inhibitor or ARB\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"75"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"[\"Diagnosis\": "}]},{"children":[{"children":[{"text":"\"Intolerance to ACE Inhibitor or ARB\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"76"}],"node_type":"Union","ref_id":"77"},{"children":[{"text":" )"}]}],"node_type":"Union","ref_id":"77"},{"children":[{"text":" ACEIOrARBAllergyOrIntoleranceDiagnosis"}]}],"ref_id":"78"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"HeartFailure.\"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD\""}]}]}],"node_type":"ExpressionRef","ref_id":"79"},{"children":[{"text":" ModerateOrSevereLVSDHFOutpatientEncounter"}]}],"ref_id":"80"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"ACEIOrARBAllergyOrIntoleranceDiagnosis"}]}],"ref_id":"81"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"prevalencePeriod"}]}],"node_type":"Property","ref_id":"82"}],"node_type":"Property","ref_id":"82"},{"children":[{"text":" overlaps after day of "}],"node_type":"OverlapsAfter","ref_id":"85"},{"children":[{"children":[{"children":[{"text":"ModerateOrSevereLVSDHFOutpatientEncounter"}]}],"ref_id":"83"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"84"}],"node_type":"Property","ref_id":"84"}],"node_type":"OverlapsAfter","ref_id":"85"}],"ref_id":"86"}],"node_type":"Query","ref_id":"87"}],"node_type":"Exists","ref_id":"88"}],"ref_id":"89"}],"define_name":"Has Diagnosis of Allergy or Intolerance to ACEI or ARB"},{"children":[{"children":[{"children":[{"text":"define \"Has Diagnosis of Pregnancy\":\n  "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Diagnosis\": "}]},{"children":[{"children":[{"text":"\"Pregnancy\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"92"}],"node_type":"Retrieve","ref_id":"92"},{"children":[{"text":" Pregnancy"}]}],"ref_id":"93"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"HeartFailure.\"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD\""}]}]}],"node_type":"ExpressionRef","ref_id":"94"},{"children":[{"text":" ModerateOrSevereLVSDHFOutpatientEncounter"}]}],"ref_id":"95"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Pregnancy"}]}],"ref_id":"96"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"prevalencePeriod"}]}],"node_type":"Property","ref_id":"97"}],"node_type":"Property","ref_id":"97"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"starts "}]},{"children":[{"children":[{"text":"9 months"}]}],"node_type":"Quantity","ref_id":"100"},{"children":[{"text":" or less before or on start"}]}],"node_type":"And","ref_id":"101"},{"children":[{"text":" "}]},{"children":[{"children":[{"children":[{"text":"ModerateOrSevereLVSDHFOutpatientEncounter"}]}],"ref_id":"98"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"99"}],"node_type":"Property","ref_id":"99"}],"node_type":"And","ref_id":"101"}],"ref_id":"102"}],"node_type":"Query","ref_id":"103"}],"node_type":"Exists","ref_id":"104"}],"ref_id":"105"}],"define_name":"Has Diagnosis of Pregnancy"},{"children":[{"children":[{"children":[{"text":"define \"Has Diagnosis of Renal Failure Due to ACEI\":\n  "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Diagnosis\": "}]},{"children":[{"children":[{"text":"\"Acute renal failure caused by angiotensin-converting-enzyme inhibitor (disorder)\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"108"}],"node_type":"Retrieve","ref_id":"108"},{"children":[{"text":" RenalFailureDueToACEI"}]}],"ref_id":"109"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"HeartFailure.\"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD\""}]}]}],"node_type":"ExpressionRef","ref_id":"110"},{"children":[{"text":" ModerateOrSevereLVSDHFOutpatientEncounter"}]}],"ref_id":"111"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"RenalFailureDueToACEI"}]}],"ref_id":"112"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"prevalencePeriod"}]}],"node_type":"Property","ref_id":"113"}],"node_type":"Property","ref_id":"113"},{"children":[{"text":" overlaps day of "}],"node_type":"Overlaps","ref_id":"116"},{"children":[{"children":[{"children":[{"text":"ModerateOrSevereLVSDHFOutpatientEncounter"}]}],"ref_id":"114"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"115"}],"node_type":"Property","ref_id":"115"}],"node_type":"Overlaps","ref_id":"116"}],"ref_id":"117"}],"node_type":"Query","ref_id":"118"}],"node_type":"Exists","ref_id":"119"}],"ref_id":"120"}],"define_name":"Has Diagnosis of Renal Failure Due to ACEI"},{"children":[{"children":[{"children":[{"text":"define \"Denominator Exceptions\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Has Medical or Patient Reason for Not Ordering ACEI or ARB or ARNI\""}]}],"node_type":"ExpressionRef","ref_id":"52"},{"children":[{"text":"\n    or "}]},{"children":[{"children":[{"text":"\"Has Allergy or Intolerance to ACEI or ARB or ARNI Ingredient\""}]}],"node_type":"ExpressionRef","ref_id":"73"}],"node_type":"Or","ref_id":"74"},{"children":[{"text":"\n    or "}]},{"children":[{"children":[{"text":"\"Has Diagnosis of Allergy or Intolerance to ACEI or ARB\""}]}],"node_type":"ExpressionRef","ref_id":"90"}],"node_type":"Or","ref_id":"91"},{"children":[{"text":"\n    or "}]},{"children":[{"children":[{"text":"\"Has Diagnosis of Pregnancy\""}]}],"node_type":"ExpressionRef","ref_id":"106"}],"node_type":"Or","ref_id":"107"},{"children":[{"text":"\n    or "}]},{"children":[{"children":[{"text":"\"Has Diagnosis of Renal Failure Due to ACEI\""}]}],"node_type":"ExpressionRef","ref_id":"121"}],"node_type":"Or","ref_id":"122"}],"ref_id":"123"}],"define_name":"Denominator Exceptions"},{"children":[{"children":[{"children":[{"text":"define \"Has ACEI or ARB or ARNI Ordered\":\n  "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Medication, Order\": "}]},{"children":[{"children":[{"text":"\"ACE Inhibitor or ARB or ARNI\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"124"}],"node_type":"Retrieve","ref_id":"124"},{"children":[{"text":" ACEIOrARBOrARNIOrdered"}]}],"ref_id":"125"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"HeartFailure.\"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD\""}]}]}],"node_type":"ExpressionRef","ref_id":"126"},{"children":[{"text":" ModerateOrSevereLVSDHFOutpatientEncounter"}]}],"ref_id":"127"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"ACEIOrARBOrARNIOrdered"}]}],"ref_id":"128"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"129"}],"node_type":"Property","ref_id":"129"},{"children":[{"text":" during day of "}],"node_type":"In","ref_id":"132"},{"children":[{"children":[{"children":[{"text":"ModerateOrSevereLVSDHFOutpatientEncounter"}]}],"ref_id":"130"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"131"}],"node_type":"Property","ref_id":"131"}],"node_type":"In","ref_id":"132"}],"ref_id":"133"}],"node_type":"Query","ref_id":"134"}],"node_type":"Exists","ref_id":"135"}],"ref_id":"136"}],"define_name":"Has ACEI or ARB or ARNI Ordered"},{"children":[{"children":[{"children":[{"text":"define \"Is Currently Taking ACEI or ARB or ARNI\":\n  "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Medication, Active\": "}]},{"children":[{"children":[{"text":"\"ACE Inhibitor or ARB or ARNI\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"138"}],"node_type":"Retrieve","ref_id":"138"},{"children":[{"text":" ActiveACEIOrARBOrARNI"}]}],"ref_id":"139"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"HeartFailure.\"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD\""}]}]}],"node_type":"ExpressionRef","ref_id":"140"},{"children":[{"text":" ModerateOrSevereLVSDHFOutpatientEncounter"}]}],"ref_id":"141"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"ActiveACEIOrARBOrARNI"}]}],"ref_id":"142"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"143"}],"node_type":"Property","ref_id":"143"},{"children":[{"text":" overlaps after day of "}],"node_type":"OverlapsAfter","ref_id":"146"},{"children":[{"children":[{"children":[{"text":"ModerateOrSevereLVSDHFOutpatientEncounter"}]}],"ref_id":"144"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"145"}],"node_type":"Property","ref_id":"145"}],"node_type":"OverlapsAfter","ref_id":"146"}],"ref_id":"147"}],"node_type":"Query","ref_id":"148"}],"node_type":"Exists","ref_id":"149"}],"ref_id":"150"}],"define_name":"Is Currently Taking ACEI or ARB or ARNI"},{"children":[{"children":[{"children":[{"text":"define \"Numerator\":\n  "}]},{"children":[{"children":[{"children":[{"text":"\"Has ACEI or ARB or ARNI Ordered\""}]}],"node_type":"ExpressionRef","ref_id":"137"},{"children":[{"text":"\n    or "}]},{"children":[{"children":[{"text":"\"Is Currently Taking ACEI or ARB or ARNI\""}]}],"node_type":"ExpressionRef","ref_id":"151"}],"node_type":"Or","ref_id":"152"}],"ref_id":"153"}],"define_name":"Numerator"},{"children":[{"children":[{"children":[{"text":"define \"SDE Ethnicity\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Ethnicity\": "}]},{"children":[{"children":[{"text":"\"Ethnicity\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"154"}],"ref_id":"155"}],"define_name":"SDE Ethnicity"},{"children":[{"children":[{"children":[{"text":"define \"SDE Payer\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Payer\": "}]},{"children":[{"children":[{"text":"\"Payer Type\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"156"}],"ref_id":"157"}],"define_name":"SDE Payer"},{"children":[{"children":[{"children":[{"text":"define \"SDE Race\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Race\": "}]},{"children":[{"children":[{"text":"\"Race\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"158"}],"ref_id":"159"}],"define_name":"SDE Race"},{"children":[{"children":[{"children":[{"text":"define \"SDE Sex\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Sex\": "}]},{"children":[{"children":[{"text":"\"ONC Administrative Sex\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"160"}],"ref_id":"161"}],"define_name":"SDE Sex"},{"children":[{"children":[{"children":[{"text":"define \"Initial Population\":\n  "}]},{"children":[{"children":[{"children":[{"text":"HeartFailure"}]}],"ref_id":"162"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"Is Adults With Two Qualifying Outpatient Encounters and One Heart Failure Outpatient Encounter During the Measurement Period\""}]}],"node_type":"ExpressionRef","ref_id":"163"}],"node_type":"ExpressionRef","ref_id":"163"}],"ref_id":"164"}],"define_name":"Initial Population"},{"children":[{"children":[{"children":[{"text":"define \"Denominator\":\n  "}]},{"children":[{"children":[{"children":[{"text":"\"Initial Population\""}]}],"node_type":"ExpressionRef","ref_id":"165"},{"children":[{"text":"\n    and "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"children":[{"text":"HeartFailure"}]}],"ref_id":"166"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD\""}]}],"node_type":"ExpressionRef","ref_id":"167"}],"node_type":"ExpressionRef","ref_id":"167"}],"node_type":"Exists","ref_id":"168"}],"node_type":"And","ref_id":"169"}],"ref_id":"170"}],"define_name":"Denominator"},{"children":[{"children":[{"children":[{"text":"define \"Denominator Exclusions\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"HeartFailure"}]}],"ref_id":"171"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"Has Heart Transplant\""}]}],"node_type":"ExpressionRef","ref_id":"172"}],"node_type":"ExpressionRef","ref_id":"172"},{"children":[{"text":"\n    or "}]},{"children":[{"children":[{"children":[{"text":"HeartFailure"}]}],"ref_id":"173"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"Has Heart Transplant Complications\""}]}],"node_type":"ExpressionRef","ref_id":"174"}],"node_type":"ExpressionRef","ref_id":"174"}],"node_type":"Or","ref_id":"175"},{"children":[{"text":"\n    or "}]},{"children":[{"children":[{"children":[{"text":"HeartFailure"}]}],"ref_id":"176"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"Has Left Ventricular Assist Device\""}]}],"node_type":"ExpressionRef","ref_id":"177"}],"node_type":"ExpressionRef","ref_id":"177"}],"node_type":"Or","ref_id":"178"},{"children":[{"text":"\n    or "}]},{"children":[{"children":[{"children":[{"text":"HeartFailure"}]}],"ref_id":"179"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"Has Left Ventricular Assist Device Complications\""}]}],"node_type":"ExpressionRef","ref_id":"180"}],"node_type":"ExpressionRef","ref_id":"180"}],"node_type":"Or","ref_id":"181"}],"ref_id":"182"}],"define_name":"Denominator Exclusions"}],"identifier":{"id":"HFACEIorARBorARNIforLVSD","version":"13.4.000"}},"is_main_library":true,"is_top_level":true,"library_name":"HFACEIorARBorARNIforLVSD","library_version":"13.4.000","statement_dependencies":[{"_id":"68923bbaa83e15671c2cba97","statement_name":"Patient"},{"_id":"68923bbaa83e15671c2cba98","statement_name":"Has Medical or Patient Reason for Not Ordering ACEI or ARB or ARNI","statement_references":[{"_id":"68923bc9a83e15671c2cc578","hqmf_id":null,"library_name":"HFCommonDefinitionsQDM","statement_name":"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD"}]},{"_id":"68923bbaa83e15671c2cba99","statement_name":"Has Allergy or Intolerance to ACEI or ARB or ARNI Ingredient","statement_references":[{"_id":"68923bc9a83e15671c2cc579","hqmf_id":null,"library_name":"HFCommonDefinitionsQDM","statement_name":"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD"}]},{"_id":"68923bbaa83e15671c2cba9a","statement_name":"Has Diagnosis of Allergy or Intolerance to ACEI or ARB","statement_references":[{"_id":"68923bc9a83e15671c2cc57a","hqmf_id":null,"library_name":"HFCommonDefinitionsQDM","statement_name":"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD"}]},{"_id":"68923bbaa83e15671c2cba9b","statement_name":"Has Diagnosis of Pregnancy","statement_references":[{"_id":"68923bc9a83e15671c2cc57b","hqmf_id":null,"library_name":"HFCommonDefinitionsQDM","statement_name":"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD"}]},{"_id":"68923bbaa83e15671c2cba9c","statement_name":"Has Diagnosis of Renal Failure Due to ACEI","statement_references":[{"_id":"68923bc9a83e15671c2cc57c","hqmf_id":null,"library_name":"HFCommonDefinitionsQDM","statement_name":"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD"}]},{"_id":"68923bbaa83e15671c2cba9d","statement_name":"Denominator Exceptions","statement_references":[{"_id":"68923bbaa83e15671c2cba8a","hqmf_id":null,"library_name":"HFACEIorARBorARNIforLVSD","statement_name":"Has Medical or Patient Reason for Not Ordering ACEI or ARB or ARNI"},{"_id":"68923bbaa83e15671c2cba8b","hqmf_id":null,"library_name":"HFACEIorARBorARNIforLVSD","statement_name":"Has Allergy or Intolerance to ACEI or ARB or ARNI Ingredient"},{"_id":"68923bbaa83e15671c2cba8c","hqmf_id":null,"library_name":"HFACEIorARBorARNIforLVSD","statement_name":"Has Diagnosis of Allergy or Intolerance to ACEI or ARB"},{"_id":"68923bbaa83e15671c2cba8d","hqmf_id":null,"library_name":"HFACEIorARBorARNIforLVSD","statement_name":"Has Diagnosis of Pregnancy"},{"_id":"68923bbaa83e15671c2cba8e","hqmf_id":null,"library_name":"HFACEIorARBorARNIforLVSD","statement_name":"Has Diagnosis of Renal Failure Due to ACEI"}]},{"_id":"68923bbaa83e15671c2cba9e","statement_name":"Has ACEI or ARB or ARNI Ordered","statement_references":[{"_id":"68923bc9a83e15671c2cc57d","hqmf_id":null,"library_name":"HFCommonDefinitionsQDM","statement_name":"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD"}]},{"_id":"68923bbaa83e15671c2cba9f","statement_name":"Is Currently Taking ACEI or ARB or ARNI","statement_references":[{"_id":"68923bc9a83e15671c2cc57e","hqmf_id":null,"library_name":"HFCommonDefinitionsQDM","statement_name":"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD"}]},{"_id":"68923bbaa83e15671c2cbaa0","statement_name":"Numerator","statement_references":[{"_id":"68923bbaa83e15671c2cba8f","hqmf_id":null,"library_name":"HFACEIorARBorARNIforLVSD","statement_name":"Has ACEI or ARB or ARNI Ordered"},{"_id":"68923bbaa83e15671c2cba90","hqmf_id":null,"library_name":"HFACEIorARBorARNIforLVSD","statement_name":"Is Currently Taking ACEI or ARB or ARNI"}]},{"_id":"68923bbaa83e15671c2cbaa1","statement_name":"SDE Ethnicity"},{"_id":"68923bbaa83e15671c2cbaa2","statement_name":"SDE Payer"},{"_id":"68923bbaa83e15671c2cbaa3","statement_name":"SDE Race"},{"_id":"68923bbaa83e15671c2cbaa4","statement_name":"SDE Sex"},{"_id":"68923bbaa83e15671c2cbaa5","statement_name":"Initial Population","statement_references":[{"_id":"68923bc9a83e15671c2cc57f","hqmf_id":null,"library_name":"HFCommonDefinitionsQDM","statement_name":"Is Adults With Two Qualifying Outpatient Encounters and One Heart Failure Outpatient Encounter During the Measurement Period"}]},{"_id":"68923bbaa83e15671c2cbaa6","statement_name":"Denominator","statement_references":[{"_id":"68923bbaa83e15671c2cba91","hqmf_id":null,"library_name":"HFACEIorARBorARNIforLVSD","statement_name":"Initial Population"},{"_id":"68923bbaa83e15671c2cba92","hqmf_id":null,"library_name":"HFCommonDefinitionsQDM","statement_name":"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD"}]},{"_id":"68923bbaa83e15671c2cbaa7","statement_name":"Denominator Exclusions","statement_references":[{"_id":"68923bbaa83e15671c2cba93","hqmf_id":null,"library_name":"HFCommonDefinitionsQDM","statement_name":"Has Heart Transplant"},{"_id":"68923bbaa83e15671c2cba94","hqmf_id":null,"library_name":"HFCommonDefinitionsQDM","statement_name":"Has Heart Transplant Complications"},{"_id":"68923bbaa83e15671c2cba95","hqmf_id":null,"library_name":"HFCommonDefinitionsQDM","statement_name":"Has Left Ventricular Assist Device"},{"_id":"68923bbaa83e15671c2cba96","hqmf_id":null,"library_name":"HFCommonDefinitionsQDM","statement_name":"Has Left Ventricular Assist Device Complications"}]}]},{"_id":"68923bbaa83e15671c2cbac1","cql":"library HFCommonDefinitionsQDM version '3.0.000'\n\nusing QDM version '5.6'\n\ninclude MATGlobalCommonFunctionsQDM version '8.0.000' called Global\n\ncodesystem \"SNOMEDCT\": 'urn:oid:2.16.840.1.113883.6.96' \n\nvalueset \"Care Services in Long Term Residential Facility\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1014' \nvalueset \"Ejection Fraction\": 'urn:oid:2.16.840.1.113883.3.526.3.1134' \nvalueset \"Heart Failure\": 'urn:oid:2.16.840.1.113883.3.526.3.376' \nvalueset \"Heart Transplant\": 'urn:oid:2.16.840.1.113762.1.4.1178.33' \nvalueset \"Heart Transplant Complications\": 'urn:oid:2.16.840.1.113762.1.4.1178.56' \nvalueset \"Home Healthcare Services\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1016' \nvalueset \"Left Ventricular Assist Device Complications\": 'urn:oid:2.16.840.1.113762.1.4.1178.58' \nvalueset \"Left Ventricular Assist Device Placement\": 'urn:oid:2.16.840.1.113762.1.4.1178.61' \nvalueset \"Moderate or Severe\": 'urn:oid:2.16.840.1.113883.3.526.3.1092' \nvalueset \"Moderate or Severe LVSD\": 'urn:oid:2.16.840.1.113883.3.526.3.1090' \nvalueset \"Nursing Facility Visit\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1012' \nvalueset \"Office Visit\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1001' \nvalueset \"Outpatient Consultation\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1008' \nvalueset \"Patient Provider Interaction\": 'urn:oid:2.16.840.1.113883.3.526.3.1012' \n\ncode \"Left ventricular systolic dysfunction (disorder)\": '134401001' from \"SNOMEDCT\" display 'Left ventricular systolic dysfunction (disorder)'\n\nparameter \"Measurement Period\" Interval\u003cDateTime\u003e\n\ncontext Patient\n\ndefine \"Heart Failure Outpatient Encounter\":\n  ( [\"Encounter, Performed\": \"Care Services in Long Term Residential Facility\"]\n    union [\"Encounter, Performed\": \"Home Healthcare Services\"]\n    union [\"Encounter, Performed\": \"Nursing Facility Visit\"]\n    union [\"Encounter, Performed\": \"Office Visit\"]\n    union [\"Encounter, Performed\": \"Outpatient Consultation\"] ) QualifyingEncounter\n    with [\"Diagnosis\": \"Heart Failure\"] HeartFailure\n      such that HeartFailure.prevalencePeriod overlaps QualifyingEncounter.relevantPeriod\n    where QualifyingEncounter.relevantPeriod during day of \"Measurement Period\"\n\ndefine \"Has Heart Transplant Complications\":\n  exists [\"Diagnosis\": \"Heart Transplant Complications\"] HeartTransplantComplications\n    with \"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD\" ModerateOrSevereLVSDHFOutpatientEncounter\n      such that ( Global.\"NormalizeInterval\" ( HeartTransplantComplications.authorDatetime, HeartTransplantComplications.prevalencePeriod ) ) starts before \n      end of ModerateOrSevereLVSDHFOutpatientEncounter.relevantPeriod\n\ndefine \"Has Left Ventricular Assist Device\":\n  exists [\"Procedure, Performed\": \"Left Ventricular Assist Device Placement\"] LVADOutpatient\n    with \"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD\" ModerateOrSevereLVSDHFOutpatientEncounter\n      such that ( Global.\"NormalizeInterval\" ( LVADOutpatient.relevantDatetime, LVADOutpatient.relevantPeriod ) ) starts before \n      end of ModerateOrSevereLVSDHFOutpatientEncounter.relevantPeriod\n\ndefine \"Has Left Ventricular Assist Device Complications\":\n  exists [\"Diagnosis\": \"Left Ventricular Assist Device Complications\"] LVADComplications\n    with \"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD\" ModerateOrSevereLVSDHFOutpatientEncounter\n      such that ( Global.\"NormalizeInterval\" ( LVADComplications.authorDatetime, LVADComplications.prevalencePeriod ) ) starts before \n      end of ModerateOrSevereLVSDHFOutpatientEncounter.relevantPeriod\n\ndefine \"Qualifying Outpatient Encounter During Measurement Period\":\n  ( [\"Encounter, Performed\": \"Office Visit\"]\n    union [\"Encounter, Performed\": \"Outpatient Consultation\"]\n    union [\"Encounter, Performed\": \"Nursing Facility Visit\"]\n    union [\"Encounter, Performed\": \"Care Services in Long Term Residential Facility\"]\n    union [\"Encounter, Performed\": \"Home Healthcare Services\"]\n    union [\"Encounter, Performed\": \"Patient Provider Interaction\"] ) ValidEncounter\n    where ValidEncounter.relevantPeriod during day of \"Measurement Period\"\n\ndefine \"Has Heart Transplant\":\n  exists [\"Procedure, Performed\": \"Heart Transplant\"] HeartTransplant\n    with \"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD\" ModerateOrSevereLVSDHFOutpatientEncounter\n      such that ( Global.\"NormalizeInterval\" ( HeartTransplant.relevantDatetime, HeartTransplant.relevantPeriod ) ) starts before \n      end of ModerateOrSevereLVSDHFOutpatientEncounter.relevantPeriod\n\ndefine \"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD\":\n  \"Heart Failure Outpatient Encounter\" HFOutpatientEncounter\n    with \"Moderate or Severe LVSD Findings\" LVSDFindings\n      such that Coalesce(LVSDFindings.prevalencePeriod, Global.\"NormalizeInterval\"(LVSDFindings.relevantDatetime, LVSDFindings.relevantPeriod)) starts before end of HFOutpatientEncounter.relevantPeriod\n\ndefine \"Moderate or Severe LVSD Findings\":\n  ( [\"Diagnostic Study, Performed\": \"Ejection Fraction\"] EjectionFraction\n      where EjectionFraction.result \u003c= 40 '%'\n  )\n    union [\"Diagnosis\": \"Moderate or Severe LVSD\"]\n    union ( [\"Diagnosis\": \"Left ventricular systolic dysfunction (disorder)\"] LVSD\n        where LVSD.severity in \"Moderate or Severe\"\n    )\n\ndefine \"Is Adults With Two Qualifying Outpatient Encounters and One Heart Failure Outpatient Encounter During the Measurement Period\":\n  AgeInYearsAt(date from start of \"Measurement Period\") \u003e= 18\n    and exists ( \"Qualifying Outpatient Encounter During Measurement Period\" Encounter1\n        with \"Qualifying Outpatient Encounter During Measurement Period\" Encounter2\n          such that Encounter2.id !~ Encounter1.id\n    )\n    and exists \"Heart Failure Outpatient Encounter\"\n\n","elm":{"library":{"annotation":[{"translatorOptions":"EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion,DisableMethodInvocation","type":"CqlToElmInfo"},{"type":"Annotation","s":{"r":"201","s":[{"value":["","library HFCommonDefinitionsQDM version '3.0.000'"]}]}}],"identifier":{"id":"HFCommonDefinitionsQDM","version":"3.0.000"},"schemaIdentifier":{"id":"urn:hl7-org:elm","version":"r1"},"usings":{"def":[{"localIdentifier":"System","uri":"urn:hl7-org:elm-types:r1"},{"localId":"1","locator":"3:1-3:23","localIdentifier":"QDM","uri":"urn:healthit-gov:qdm:v5_6","version":"5.6","annotation":[{"type":"Annotation","s":{"r":"1","s":[{"value":["","using "]},{"s":[{"value":["QDM"]}]},{"value":[" version ","'5.6'"]}]}}]}]},"includes":{"def":[{"localId":"2","locator":"5:1-5:67","localIdentifier":"Global","path":"MATGlobalCommonFunctionsQDM","version":"8.0.000","annotation":[{"type":"Annotation","s":{"r":"2","s":[{"value":["","include "]},{"s":[{"value":["MATGlobalCommonFunctionsQDM"]}]},{"value":[" version ","'8.0.000'"," called ","Global"]}]}}]}]},"parameters":{"def":[{"localId":"22","locator":"26:1-26:49","name":"Measurement Period","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"22","s":[{"value":["","parameter ","\"Measurement Period\""," "]},{"r":"21","s":[{"value":["Interval\u003c"]},{"r":"20","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}}],"parameterTypeSpecifier":{"localId":"21","locator":"26:32-26:49","type":"IntervalTypeSpecifier","pointType":{"localId":"20","locator":"26:41-26:48","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},"codeSystems":{"def":[{"localId":"3","locator":"7:1-7:55","name":"SNOMEDCT","id":"2.16.840.1.113883.6.96","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"3","s":[{"value":["","codesystem ","\"SNOMEDCT\"",": ","'urn:oid:2.16.840.1.113883.6.96'"]}]}}]}]},"valueSets":{"def":[{"localId":"4","locator":"9:1-9:110","name":"Care Services in Long Term Residential Facility","id":"2.16.840.1.113883.3.464.1003.101.12.1014","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"4","s":[{"value":["","valueset ","\"Care Services in Long Term Residential Facility\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1014'"]}]}}]},{"localId":"5","locator":"10:1-10:70","name":"Ejection Fraction","id":"2.16.840.1.113883.3.526.3.1134","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"5","s":[{"value":["","valueset ","\"Ejection Fraction\"",": ","'urn:oid:2.16.840.1.113883.3.526.3.1134'"]}]}}]},{"localId":"6","locator":"11:1-11:65","name":"Heart Failure","id":"2.16.840.1.113883.3.526.3.376","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"6","s":[{"value":["","valueset ","\"Heart Failure\"",": ","'urn:oid:2.16.840.1.113883.3.526.3.376'"]}]}}]},{"localId":"7","locator":"12:1-12:68","name":"Heart Transplant","id":"2.16.840.1.113762.1.4.1178.33","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"7","s":[{"value":["","valueset ","\"Heart Transplant\"",": ","'urn:oid:2.16.840.1.113762.1.4.1178.33'"]}]}}]},{"localId":"8","locator":"13:1-13:82","name":"Heart Transplant Complications","id":"2.16.840.1.113762.1.4.1178.56","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"8","s":[{"value":["","valueset ","\"Heart Transplant Complications\"",": ","'urn:oid:2.16.840.1.113762.1.4.1178.56'"]}]}}]},{"localId":"9","locator":"14:1-14:87","name":"Home Healthcare Services","id":"2.16.840.1.113883.3.464.1003.101.12.1016","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"9","s":[{"value":["","valueset ","\"Home Healthcare Services\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1016'"]}]}}]},{"localId":"10","locator":"15:1-15:96","name":"Left Ventricular Assist Device Complications","id":"2.16.840.1.113762.1.4.1178.58","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"10","s":[{"value":["","valueset ","\"Left Ventricular Assist Device Complications\"",": ","'urn:oid:2.16.840.1.113762.1.4.1178.58'"]}]}}]},{"localId":"11","locator":"16:1-16:92","name":"Left Ventricular Assist Device Placement","id":"2.16.840.1.113762.1.4.1178.61","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"11","s":[{"value":["","valueset ","\"Left Ventricular Assist Device Placement\"",": ","'urn:oid:2.16.840.1.113762.1.4.1178.61'"]}]}}]},{"localId":"12","locator":"17:1-17:71","name":"Moderate or Severe","id":"2.16.840.1.113883.3.526.3.1092","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"12","s":[{"value":["","valueset ","\"Moderate or Severe\"",": ","'urn:oid:2.16.840.1.113883.3.526.3.1092'"]}]}}]},{"localId":"13","locator":"18:1-18:76","name":"Moderate or Severe LVSD","id":"2.16.840.1.113883.3.526.3.1090","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"13","s":[{"value":["","valueset ","\"Moderate or Severe LVSD\"",": ","'urn:oid:2.16.840.1.113883.3.526.3.1090'"]}]}}]},{"localId":"14","locator":"19:1-19:85","name":"Nursing Facility Visit","id":"2.16.840.1.113883.3.464.1003.101.12.1012","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"14","s":[{"value":["","valueset ","\"Nursing Facility Visit\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1012'"]}]}}]},{"localId":"15","locator":"20:1-20:75","name":"Office Visit","id":"2.16.840.1.113883.3.464.1003.101.12.1001","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"15","s":[{"value":["","valueset ","\"Office Visit\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1001'"]}]}}]},{"localId":"16","locator":"21:1-21:86","name":"Outpatient Consultation","id":"2.16.840.1.113883.3.464.1003.101.12.1008","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"16","s":[{"value":["","valueset ","\"Outpatient Consultation\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1008'"]}]}}]},{"localId":"17","locator":"22:1-22:81","name":"Patient Provider Interaction","id":"2.16.840.1.113883.3.526.3.1012","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"17","s":[{"value":["","valueset ","\"Patient Provider Interaction\"",": ","'urn:oid:2.16.840.1.113883.3.526.3.1012'"]}]}}]}]},"codes":{"def":[{"localId":"19","locator":"24:1-24:143","name":"Left ventricular systolic dysfunction (disorder)","id":"134401001","display":"Left ventricular systolic dysfunction (disorder)","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"19","s":[{"value":["","code ","\"Left ventricular systolic dysfunction (disorder)\"",": ","'134401001'"," from "]},{"r":"18","s":[{"value":["\"SNOMEDCT\""]}]},{"value":[" display ","'Left ventricular systolic dysfunction (disorder)'"]}]}}],"codeSystem":{"localId":"18","locator":"24:75-24:84","name":"SNOMEDCT"}}]},"contexts":{"def":[{"locator":"28:1-28:15","name":"Patient"}]},"statements":{"def":[{"locator":"28:1-28:15","name":"Patient","context":"Patient","expression":{"type":"SingletonFrom","operand":{"locator":"28:1-28:15","dataType":"{urn:healthit-gov:qdm:v5_6}Patient","templateId":"Patient","type":"Retrieve"}}},{"localId":"47","locator":"30:1-38:79","name":"Heart Failure Outpatient Encounter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"47","s":[{"value":["","define ","\"Heart Failure Outpatient Encounter\"",":\n  "]},{"r":"46","s":[{"s":[{"r":"33","s":[{"r":"32","s":[{"value":["( "]},{"r":"32","s":[{"r":"30","s":[{"r":"27","s":[{"r":"25","s":[{"r":"23","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Care Services in Long Term Residential Facility\""]}]},{"value":["]"]}]},{"value":["\n    union "]},{"r":"24","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Home Healthcare Services\""]}]},{"value":["]"]}]}]},{"value":["\n    union "]},{"r":"26","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Nursing Facility Visit\""]}]},{"value":["]"]}]}]},{"value":["\n    union "]},{"r":"28","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Office Visit\""]}]},{"value":["]"]}]}]},{"value":["\n    union "]},{"r":"31","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Outpatient Consultation\""]}]},{"value":["]"]}]}]},{"value":[" )"]}]},{"value":[" ","QualifyingEncounter"]}]}]},{"value":["\n    "]},{"r":"41","s":[{"value":["with "]},{"r":"35","s":[{"r":"34","s":[{"r":"34","s":[{"value":["[","\"Diagnosis\"",": "]},{"s":[{"value":["\"Heart Failure\""]}]},{"value":["]"]}]}]},{"value":[" ","HeartFailure"]}]},{"value":["\n      such that "]},{"r":"40","s":[{"r":"37","s":[{"r":"36","s":[{"value":["HeartFailure"]}]},{"value":["."]},{"r":"37","s":[{"value":["prevalencePeriod"]}]}]},{"r":"40","value":[" ","overlaps"," "]},{"r":"39","s":[{"r":"38","s":[{"value":["QualifyingEncounter"]}]},{"value":["."]},{"r":"39","s":[{"value":["relevantPeriod"]}]}]}]}]},{"value":["\n    "]},{"r":"45","s":[{"value":["where "]},{"r":"45","s":[{"r":"43","s":[{"r":"42","s":[{"value":["QualifyingEncounter"]}]},{"value":["."]},{"r":"43","s":[{"value":["relevantPeriod"]}]}]},{"r":"45","value":[" ","during day of"," "]},{"r":"44","s":[{"value":["\"Measurement Period\""]}]}]}]}]}]}}],"expression":{"localId":"46","locator":"31:3-38:79","type":"Query","source":[{"localId":"33","locator":"31:3-35:83","alias":"QualifyingEncounter","expression":{"localId":"32","locator":"31:3-35:63","type":"Union","operand":[{"localId":"30","locator":"31:5-34:50","type":"Union","operand":[{"localId":"25","locator":"31:5-32:62","type":"Union","operand":[{"localId":"23","locator":"31:5-31:79","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"31:30-31:78","name":"Care Services in Long Term Residential Facility","preserve":true,"type":"ValueSetRef"}},{"localId":"24","locator":"32:11-32:62","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"32:36-32:61","name":"Home Healthcare Services","preserve":true,"type":"ValueSetRef"}}]},{"localId":"29","type":"Union","operand":[{"localId":"26","locator":"33:11-33:60","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"33:36-33:59","name":"Nursing Facility Visit","preserve":true,"type":"ValueSetRef"}},{"localId":"28","locator":"34:11-34:50","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"34:36-34:49","name":"Office Visit","preserve":true,"type":"ValueSetRef"}}]}]},{"localId":"31","locator":"35:11-35:61","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"35:36-35:60","name":"Outpatient Consultation","preserve":true,"type":"ValueSetRef"}}]}}],"relationship":[{"localId":"41","locator":"36:5-37:89","alias":"HeartFailure","type":"With","expression":{"localId":"34","locator":"36:10-36:39","dataType":"{urn:healthit-gov:qdm:v5_6}Diagnosis","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"36:24-36:38","name":"Heart Failure","preserve":true,"type":"ValueSetRef"}},"suchThat":{"localId":"40","locator":"37:17-37:89","type":"Overlaps","operand":[{"localId":"37","locator":"37:17-37:45","path":"prevalencePeriod","scope":"HeartFailure","type":"Property"},{"localId":"39","locator":"37:56-37:89","path":"relevantPeriod","scope":"QualifyingEncounter","type":"Property"}]}}],"where":{"localId":"45","locator":"38:5-38:79","precision":"Day","type":"IncludedIn","operand":[{"localId":"43","locator":"38:11-38:44","path":"relevantPeriod","scope":"QualifyingEncounter","type":"Property"},{"localId":"44","locator":"38:60-38:79","name":"Measurement Period","type":"ParameterRef"}]}}},{"localId":"69","locator":"78:1-85:5","name":"Moderate or Severe LVSD Findings","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"69","s":[{"value":["","define ","\"Moderate or Severe LVSD Findings\"",":\n  "]},{"r":"68","s":[{"r":"60","s":[{"r":"58","s":[{"value":["( "]},{"r":"58","s":[{"s":[{"r":"53","s":[{"r":"52","s":[{"r":"52","s":[{"value":["[","\"Diagnostic Study, Performed\"",": "]},{"s":[{"value":["\"Ejection Fraction\""]}]},{"value":["]"]}]}]},{"value":[" ","EjectionFraction"]}]}]},{"value":["\n      "]},{"r":"57","s":[{"value":["where "]},{"r":"57","s":[{"r":"55","s":[{"r":"54","s":[{"value":["EjectionFraction"]}]},{"value":["."]},{"r":"55","s":[{"value":["result"]}]}]},{"value":[" ","\u003c="," "]},{"r":"56","s":[{"value":["40 ","'%'"]}]}]}]}]},{"value":["\n  )"]}]},{"value":["\n    union "]},{"r":"59","s":[{"value":["[","\"Diagnosis\"",": "]},{"s":[{"value":["\"Moderate or Severe LVSD\""]}]},{"value":["]"]}]}]},{"value":["\n    union "]},{"r":"67","s":[{"value":["( "]},{"r":"67","s":[{"s":[{"r":"62","s":[{"r":"61","s":[{"r":"61","s":[{"value":["[","\"Diagnosis\"",": "]},{"s":[{"value":["\"Left ventricular systolic dysfunction (disorder)\""]}]},{"value":["]"]}]}]},{"value":[" ","LVSD"]}]}]},{"value":["\n        "]},{"r":"66","s":[{"value":["where "]},{"r":"66","s":[{"r":"64","s":[{"r":"63","s":[{"value":["LVSD"]}]},{"value":["."]},{"r":"64","s":[{"value":["severity"]}]}]},{"value":[" in "]},{"r":"65","s":[{"value":["\"Moderate or Severe\""]}]}]}]}]},{"value":["\n    )"]}]}]}]}}],"expression":{"localId":"68","locator":"79:3-85:5","type":"Union","operand":[{"type":"As","operand":{"localId":"60","locator":"79:3-82:50","type":"Union","operand":[{"type":"As","operand":{"localId":"58","locator":"79:3-81:3","type":"Query","source":[{"localId":"53","locator":"79:5-79:73","alias":"EjectionFraction","expression":{"localId":"52","locator":"79:5-79:56","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveDiagnosticStudyPerformed","templateId":"PositiveDiagnosticStudyPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"79:37-79:55","name":"Ejection Fraction","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"57","locator":"80:7-80:45","type":"LessOrEqual","operand":[{"asType":"{urn:hl7-org:elm-types:r1}Quantity","type":"As","operand":{"localId":"55","locator":"80:13-80:35","path":"result","scope":"EjectionFraction","type":"Property"}},{"localId":"56","locator":"80:40-80:45","value":40,"unit":"%","type":"Quantity"}]}},"asTypeSpecifier":{"type":"ListTypeSpecifier","elementType":{"type":"ChoiceTypeSpecifier","choice":[{"name":"{urn:healthit-gov:qdm:v5_6}Diagnosis","type":"NamedTypeSpecifier"},{"name":"{urn:healthit-gov:qdm:v5_6}PositiveDiagnosticStudyPerformed","type":"NamedTypeSpecifier"}]}}},{"type":"As","operand":{"localId":"59","locator":"82:11-82:50","dataType":"{urn:healthit-gov:qdm:v5_6}Diagnosis","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"82:25-82:49","name":"Moderate or Severe LVSD","preserve":true,"type":"ValueSetRef"}},"asTypeSpecifier":{"type":"ListTypeSpecifier","elementType":{"type":"ChoiceTypeSpecifier","choice":[{"name":"{urn:healthit-gov:qdm:v5_6}Diagnosis","type":"NamedTypeSpecifier"},{"name":"{urn:healthit-gov:qdm:v5_6}PositiveDiagnosticStudyPerformed","type":"NamedTypeSpecifier"}]}}}]},"asTypeSpecifier":{"type":"ListTypeSpecifier","elementType":{"type":"ChoiceTypeSpecifier","choice":[{"name":"{urn:healthit-gov:qdm:v5_6}Diagnosis","type":"NamedTypeSpecifier"},{"name":"{urn:healthit-gov:qdm:v5_6}PositiveDiagnosticStudyPerformed","type":"NamedTypeSpecifier"}]}}},{"type":"As","operand":{"localId":"67","locator":"83:11-85:5","type":"Query","source":[{"localId":"62","locator":"83:13-83:82","alias":"LVSD","expression":{"localId":"61","locator":"83:13-83:77","dataType":"{urn:healthit-gov:qdm:v5_6}Diagnosis","codeProperty":"code","codeComparator":"~","type":"Retrieve","codes":{"type":"ToList","operand":{"locator":"83:27-83:76","name":"Left ventricular systolic dysfunction (disorder)","type":"CodeRef"}}}}],"relationship":[],"where":{"localId":"66","locator":"84:9-84:51","type":"InValueSet","code":{"localId":"64","locator":"84:15-84:27","path":"severity","scope":"LVSD","type":"Property"},"valueset":{"localId":"65","locator":"84:32-84:51","name":"Moderate or Severe","preserve":true}}},"asTypeSpecifier":{"type":"ListTypeSpecifier","elementType":{"type":"ChoiceTypeSpecifier","choice":[{"name":"{urn:healthit-gov:qdm:v5_6}Diagnosis","type":"NamedTypeSpecifier"},{"name":"{urn:healthit-gov:qdm:v5_6}PositiveDiagnosticStudyPerformed","type":"NamedTypeSpecifier"}]}}}]}},{"localId":"87","locator":"73:1-76:201","name":"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"87","s":[{"value":["","define ","\"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD\"",":\n  "]},{"r":"86","s":[{"s":[{"r":"51","s":[{"r":"50","s":[{"s":[{"value":["\"Heart Failure Outpatient Encounter\""]}]}]},{"value":[" ","HFOutpatientEncounter"]}]}]},{"value":["\n    "]},{"r":"85","s":[{"value":["with "]},{"r":"71","s":[{"r":"70","s":[{"s":[{"value":["\"Moderate or Severe LVSD Findings\""]}]}]},{"value":[" ","LVSDFindings"]}]},{"value":["\n      such that "]},{"r":"84","s":[{"r":"80","s":[{"value":["Coalesce","("]},{"r":"73","s":[{"r":"72","s":[{"value":["LVSDFindings"]}]},{"value":["."]},{"r":"73","s":[{"value":["prevalencePeriod"]}]}]},{"value":[", "]},{"r":"79","s":[{"r":"74","s":[{"value":["Global"]}]},{"value":["."]},{"r":"79","s":[{"value":["\"NormalizeInterval\"","("]},{"r":"76","s":[{"r":"75","s":[{"value":["LVSDFindings"]}]},{"value":["."]},{"r":"76","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"78","s":[{"r":"77","s":[{"value":["LVSDFindings"]}]},{"value":["."]},{"r":"78","s":[{"value":["relevantPeriod"]}]}]},{"value":[")"]}]}]},{"value":[")"]}]},{"r":"84","value":[" ","starts before"," "]},{"r":"83","s":[{"value":["end of "]},{"r":"82","s":[{"r":"81","s":[{"value":["HFOutpatientEncounter"]}]},{"value":["."]},{"r":"82","s":[{"value":["relevantPeriod"]}]}]}]}]}]}]}]}}],"expression":{"localId":"86","locator":"74:3-76:201","type":"Query","source":[{"localId":"51","locator":"74:3-74:60","alias":"HFOutpatientEncounter","expression":{"localId":"50","locator":"74:3-74:38","name":"Heart Failure Outpatient Encounter","type":"ExpressionRef"}}],"relationship":[{"localId":"85","locator":"75:5-76:201","alias":"LVSDFindings","type":"With","expression":{"localId":"70","locator":"75:10-75:43","name":"Moderate or Severe LVSD Findings","type":"ExpressionRef"},"suchThat":{"localId":"84","locator":"76:17-76:201","type":"Before","operand":[{"locator":"76:145-76:150","type":"Start","operand":{"localId":"80","locator":"76:17-76:143","type":"Coalesce","operand":[{"localId":"73","locator":"76:26-76:54","path":"prevalencePeriod","scope":"LVSDFindings","type":"Property"},{"localId":"79","locator":"76:57-76:142","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"76","locator":"76:84-76:112","path":"relevantDatetime","scope":"LVSDFindings","type":"Property"},{"localId":"78","locator":"76:115-76:141","path":"relevantPeriod","scope":"LVSDFindings","type":"Property"}]}]}},{"localId":"83","locator":"76:159-76:201","type":"End","operand":{"localId":"82","locator":"76:166-76:201","path":"relevantPeriod","scope":"HFOutpatientEncounter","type":"Property"}}]}}]}},{"localId":"103","locator":"40:1-44:69","name":"Has Heart Transplant Complications","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"103","s":[{"value":["","define ","\"Has Heart Transplant Complications\"",":\n  "]},{"r":"102","s":[{"value":["exists "]},{"r":"101","s":[{"s":[{"r":"49","s":[{"r":"48","s":[{"r":"48","s":[{"value":["[","\"Diagnosis\"",": "]},{"s":[{"value":["\"Heart Transplant Complications\""]}]},{"value":["]"]}]}]},{"value":[" ","HeartTransplantComplications"]}]}]},{"value":["\n    "]},{"r":"100","s":[{"value":["with "]},{"r":"89","s":[{"r":"88","s":[{"s":[{"value":["\"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD\""]}]}]},{"value":[" ","ModerateOrSevereLVSDHFOutpatientEncounter"]}]},{"value":["\n      such that "]},{"r":"99","s":[{"r":"95","s":[{"value":["( "]},{"r":"95","s":[{"r":"90","s":[{"value":["Global"]}]},{"value":["."]},{"r":"95","s":[{"value":["\"NormalizeInterval\""," ( "]},{"r":"92","s":[{"r":"91","s":[{"value":["HeartTransplantComplications"]}]},{"value":["."]},{"r":"92","s":[{"value":["authorDatetime"]}]}]},{"value":[", "]},{"r":"94","s":[{"r":"93","s":[{"value":["HeartTransplantComplications"]}]},{"value":["."]},{"r":"94","s":[{"value":["prevalencePeriod"]}]}]},{"value":[" )"]}]}]},{"value":[" )"]}]},{"r":"99","value":[" ","starts before"," \n      "]},{"r":"98","s":[{"value":["end of "]},{"r":"97","s":[{"r":"96","s":[{"value":["ModerateOrSevereLVSDHFOutpatientEncounter"]}]},{"value":["."]},{"r":"97","s":[{"value":["relevantPeriod"]}]}]}]}]}]}]}]}]}}],"expression":{"localId":"102","locator":"41:3-44:69","type":"Exists","operand":{"localId":"101","locator":"41:10-44:69","type":"Query","source":[{"localId":"49","locator":"41:10-41:85","alias":"HeartTransplantComplications","expression":{"localId":"48","locator":"41:10-41:56","dataType":"{urn:healthit-gov:qdm:v5_6}Diagnosis","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"41:24-41:55","name":"Heart Transplant Complications","preserve":true,"type":"ValueSetRef"}}}],"relationship":[{"localId":"100","locator":"42:5-44:69","alias":"ModerateOrSevereLVSDHFOutpatientEncounter","type":"With","expression":{"localId":"88","locator":"42:10-42:85","name":"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD","type":"ExpressionRef"},"suchThat":{"localId":"99","locator":"43:17-44:69","type":"Before","operand":[{"locator":"43:143-43:148","type":"Start","operand":{"localId":"95","locator":"43:17-43:141","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"92","locator":"43:48-43:90","path":"authorDatetime","scope":"HeartTransplantComplications","type":"Property"},{"localId":"94","locator":"43:93-43:137","path":"prevalencePeriod","scope":"HeartTransplantComplications","type":"Property"}]}},{"localId":"98","locator":"44:7-44:69","type":"End","operand":{"localId":"97","locator":"44:14-44:69","path":"relevantPeriod","scope":"ModerateOrSevereLVSDHFOutpatientEncounter","type":"Property"}}]}}]}}},{"localId":"121","locator":"46:1-50:69","name":"Has Left Ventricular Assist Device","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"121","s":[{"value":["","define ","\"Has Left Ventricular Assist Device\"",":\n  "]},{"r":"120","s":[{"value":["exists "]},{"r":"119","s":[{"s":[{"r":"105","s":[{"r":"104","s":[{"r":"104","s":[{"value":["[","\"Procedure, Performed\"",": "]},{"s":[{"value":["\"Left Ventricular Assist Device Placement\""]}]},{"value":["]"]}]}]},{"value":[" ","LVADOutpatient"]}]}]},{"value":["\n    "]},{"r":"118","s":[{"value":["with "]},{"r":"107","s":[{"r":"106","s":[{"s":[{"value":["\"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD\""]}]}]},{"value":[" ","ModerateOrSevereLVSDHFOutpatientEncounter"]}]},{"value":["\n      such that "]},{"r":"117","s":[{"r":"113","s":[{"value":["( "]},{"r":"113","s":[{"r":"108","s":[{"value":["Global"]}]},{"value":["."]},{"r":"113","s":[{"value":["\"NormalizeInterval\""," ( "]},{"r":"110","s":[{"r":"109","s":[{"value":["LVADOutpatient"]}]},{"value":["."]},{"r":"110","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"112","s":[{"r":"111","s":[{"value":["LVADOutpatient"]}]},{"value":["."]},{"r":"112","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]},{"value":[" )"]}]},{"r":"117","value":[" ","starts before"," \n      "]},{"r":"116","s":[{"value":["end of "]},{"r":"115","s":[{"r":"114","s":[{"value":["ModerateOrSevereLVSDHFOutpatientEncounter"]}]},{"value":["."]},{"r":"115","s":[{"value":["relevantPeriod"]}]}]}]}]}]}]}]}]}}],"expression":{"localId":"120","locator":"47:3-50:69","type":"Exists","operand":{"localId":"119","locator":"47:10-50:69","type":"Query","source":[{"localId":"105","locator":"47:10-47:92","alias":"LVADOutpatient","expression":{"localId":"104","locator":"47:10-47:77","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveProcedurePerformed","templateId":"PositiveProcedurePerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"47:35-47:76","name":"Left Ventricular Assist Device Placement","preserve":true,"type":"ValueSetRef"}}}],"relationship":[{"localId":"118","locator":"48:5-50:69","alias":"ModerateOrSevereLVSDHFOutpatientEncounter","type":"With","expression":{"localId":"106","locator":"48:10-48:85","name":"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD","type":"ExpressionRef"},"suchThat":{"localId":"117","locator":"49:17-50:69","type":"Before","operand":[{"locator":"49:115-49:120","type":"Start","operand":{"localId":"113","locator":"49:17-49:113","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"110","locator":"49:48-49:78","path":"relevantDatetime","scope":"LVADOutpatient","type":"Property"},{"localId":"112","locator":"49:81-49:109","path":"relevantPeriod","scope":"LVADOutpatient","type":"Property"}]}},{"localId":"116","locator":"50:7-50:69","type":"End","operand":{"localId":"115","locator":"50:14-50:69","path":"relevantPeriod","scope":"ModerateOrSevereLVSDHFOutpatientEncounter","type":"Property"}}]}}]}}},{"localId":"139","locator":"52:1-56:69","name":"Has Left Ventricular Assist Device Complications","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"139","s":[{"value":["","define ","\"Has Left Ventricular Assist Device Complications\"",":\n  "]},{"r":"138","s":[{"value":["exists "]},{"r":"137","s":[{"s":[{"r":"123","s":[{"r":"122","s":[{"r":"122","s":[{"value":["[","\"Diagnosis\"",": "]},{"s":[{"value":["\"Left Ventricular Assist Device Complications\""]}]},{"value":["]"]}]}]},{"value":[" ","LVADComplications"]}]}]},{"value":["\n    "]},{"r":"136","s":[{"value":["with "]},{"r":"125","s":[{"r":"124","s":[{"s":[{"value":["\"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD\""]}]}]},{"value":[" ","ModerateOrSevereLVSDHFOutpatientEncounter"]}]},{"value":["\n      such that "]},{"r":"135","s":[{"r":"131","s":[{"value":["( "]},{"r":"131","s":[{"r":"126","s":[{"value":["Global"]}]},{"value":["."]},{"r":"131","s":[{"value":["\"NormalizeInterval\""," ( "]},{"r":"128","s":[{"r":"127","s":[{"value":["LVADComplications"]}]},{"value":["."]},{"r":"128","s":[{"value":["authorDatetime"]}]}]},{"value":[", "]},{"r":"130","s":[{"r":"129","s":[{"value":["LVADComplications"]}]},{"value":["."]},{"r":"130","s":[{"value":["prevalencePeriod"]}]}]},{"value":[" )"]}]}]},{"value":[" )"]}]},{"r":"135","value":[" ","starts before"," \n      "]},{"r":"134","s":[{"value":["end of "]},{"r":"133","s":[{"r":"132","s":[{"value":["ModerateOrSevereLVSDHFOutpatientEncounter"]}]},{"value":["."]},{"r":"133","s":[{"value":["relevantPeriod"]}]}]}]}]}]}]}]}]}}],"expression":{"localId":"138","locator":"53:3-56:69","type":"Exists","operand":{"localId":"137","locator":"53:10-56:69","type":"Query","source":[{"localId":"123","locator":"53:10-53:88","alias":"LVADComplications","expression":{"localId":"122","locator":"53:10-53:70","dataType":"{urn:healthit-gov:qdm:v5_6}Diagnosis","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"53:24-53:69","name":"Left Ventricular Assist Device Complications","preserve":true,"type":"ValueSetRef"}}}],"relationship":[{"localId":"136","locator":"54:5-56:69","alias":"ModerateOrSevereLVSDHFOutpatientEncounter","type":"With","expression":{"localId":"124","locator":"54:10-54:85","name":"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD","type":"ExpressionRef"},"suchThat":{"localId":"135","locator":"55:17-56:69","type":"Before","operand":[{"locator":"55:121-55:126","type":"Start","operand":{"localId":"131","locator":"55:17-55:119","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"128","locator":"55:48-55:79","path":"authorDatetime","scope":"LVADComplications","type":"Property"},{"localId":"130","locator":"55:82-55:115","path":"prevalencePeriod","scope":"LVADComplications","type":"Property"}]}},{"localId":"134","locator":"56:7-56:69","type":"End","operand":{"localId":"133","locator":"56:14-56:69","path":"relevantPeriod","scope":"ModerateOrSevereLVSDHFOutpatientEncounter","type":"Property"}}]}}]}}},{"localId":"159","locator":"58:1-65:74","name":"Qualifying Outpatient Encounter During Measurement Period","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"159","s":[{"value":["","define ","\"Qualifying Outpatient Encounter During Measurement Period\"",":\n  "]},{"r":"158","s":[{"s":[{"r":"153","s":[{"r":"152","s":[{"value":["( "]},{"r":"152","s":[{"r":"149","s":[{"r":"147","s":[{"r":"144","s":[{"r":"142","s":[{"r":"140","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Office Visit\""]}]},{"value":["]"]}]},{"value":["\n    union "]},{"r":"141","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Outpatient Consultation\""]}]},{"value":["]"]}]}]},{"value":["\n    union "]},{"r":"143","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Nursing Facility Visit\""]}]},{"value":["]"]}]}]},{"value":["\n    union "]},{"r":"145","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Care Services in Long Term Residential Facility\""]}]},{"value":["]"]}]}]},{"value":["\n    union "]},{"r":"148","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Home Healthcare Services\""]}]},{"value":["]"]}]}]},{"value":["\n    union "]},{"r":"150","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Patient Provider Interaction\""]}]},{"value":["]"]}]}]},{"value":[" )"]}]},{"value":[" ","ValidEncounter"]}]}]},{"value":["\n    "]},{"r":"157","s":[{"value":["where "]},{"r":"157","s":[{"r":"155","s":[{"r":"154","s":[{"value":["ValidEncounter"]}]},{"value":["."]},{"r":"155","s":[{"value":["relevantPeriod"]}]}]},{"r":"157","value":[" ","during day of"," "]},{"r":"156","s":[{"value":["\"Measurement Period\""]}]}]}]}]}]}}],"expression":{"localId":"158","locator":"59:3-65:74","type":"Query","source":[{"localId":"153","locator":"59:3-64:83","alias":"ValidEncounter","expression":{"localId":"152","locator":"59:3-64:68","type":"Union","operand":[{"localId":"147","locator":"59:5-62:85","type":"Union","operand":[{"localId":"142","locator":"59:5-60:61","type":"Union","operand":[{"localId":"140","locator":"59:5-59:44","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"59:30-59:43","name":"Office Visit","preserve":true,"type":"ValueSetRef"}},{"localId":"141","locator":"60:11-60:61","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"60:36-60:60","name":"Outpatient Consultation","preserve":true,"type":"ValueSetRef"}}]},{"localId":"146","type":"Union","operand":[{"localId":"143","locator":"61:11-61:60","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"61:36-61:59","name":"Nursing Facility Visit","preserve":true,"type":"ValueSetRef"}},{"localId":"145","locator":"62:11-62:85","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"62:36-62:84","name":"Care Services in Long Term Residential Facility","preserve":true,"type":"ValueSetRef"}}]}]},{"localId":"151","type":"Union","operand":[{"localId":"148","locator":"63:11-63:62","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"63:36-63:61","name":"Home Healthcare Services","preserve":true,"type":"ValueSetRef"}},{"localId":"150","locator":"64:11-64:66","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"64:36-64:65","name":"Patient Provider Interaction","preserve":true,"type":"ValueSetRef"}}]}]}}],"relationship":[],"where":{"localId":"157","locator":"65:5-65:74","precision":"Day","type":"IncludedIn","operand":[{"localId":"155","locator":"65:11-65:39","path":"relevantPeriod","scope":"ValidEncounter","type":"Property"},{"localId":"156","locator":"65:55-65:74","name":"Measurement Period","type":"ParameterRef"}]}}},{"localId":"177","locator":"67:1-71:69","name":"Has Heart Transplant","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"177","s":[{"value":["","define ","\"Has Heart Transplant\"",":\n  "]},{"r":"176","s":[{"value":["exists "]},{"r":"175","s":[{"s":[{"r":"161","s":[{"r":"160","s":[{"r":"160","s":[{"value":["[","\"Procedure, Performed\"",": "]},{"s":[{"value":["\"Heart Transplant\""]}]},{"value":["]"]}]}]},{"value":[" ","HeartTransplant"]}]}]},{"value":["\n    "]},{"r":"174","s":[{"value":["with "]},{"r":"163","s":[{"r":"162","s":[{"s":[{"value":["\"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD\""]}]}]},{"value":[" ","ModerateOrSevereLVSDHFOutpatientEncounter"]}]},{"value":["\n      such that "]},{"r":"173","s":[{"r":"169","s":[{"value":["( "]},{"r":"169","s":[{"r":"164","s":[{"value":["Global"]}]},{"value":["."]},{"r":"169","s":[{"value":["\"NormalizeInterval\""," ( "]},{"r":"166","s":[{"r":"165","s":[{"value":["HeartTransplant"]}]},{"value":["."]},{"r":"166","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"168","s":[{"r":"167","s":[{"value":["HeartTransplant"]}]},{"value":["."]},{"r":"168","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]},{"value":[" )"]}]},{"r":"173","value":[" ","starts before"," \n      "]},{"r":"172","s":[{"value":["end of "]},{"r":"171","s":[{"r":"170","s":[{"value":["ModerateOrSevereLVSDHFOutpatientEncounter"]}]},{"value":["."]},{"r":"171","s":[{"value":["relevantPeriod"]}]}]}]}]}]}]}]}]}}],"expression":{"localId":"176","locator":"68:3-71:69","type":"Exists","operand":{"localId":"175","locator":"68:10-71:69","type":"Query","source":[{"localId":"161","locator":"68:10-68:69","alias":"HeartTransplant","expression":{"localId":"160","locator":"68:10-68:53","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveProcedurePerformed","templateId":"PositiveProcedurePerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"68:35-68:52","name":"Heart Transplant","preserve":true,"type":"ValueSetRef"}}}],"relationship":[{"localId":"174","locator":"69:5-71:69","alias":"ModerateOrSevereLVSDHFOutpatientEncounter","type":"With","expression":{"localId":"162","locator":"69:10-69:85","name":"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD","type":"ExpressionRef"},"suchThat":{"localId":"173","locator":"70:17-71:69","type":"Before","operand":[{"locator":"70:117-70:122","type":"Start","operand":{"localId":"169","locator":"70:17-70:115","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"166","locator":"70:48-70:79","path":"relevantDatetime","scope":"HeartTransplant","type":"Property"},{"localId":"168","locator":"70:82-70:111","path":"relevantPeriod","scope":"HeartTransplant","type":"Property"}]}},{"localId":"172","locator":"71:7-71:69","type":"End","operand":{"localId":"171","locator":"71:14-71:69","path":"relevantPeriod","scope":"ModerateOrSevereLVSDHFOutpatientEncounter","type":"Property"}}]}}]}}},{"localId":"201","locator":"87:1-93:51","name":"Is Adults With Two Qualifying Outpatient Encounters and One Heart Failure Outpatient Encounter During the Measurement Period","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"201","s":[{"value":["","define ","\"Is Adults With Two Qualifying Outpatient Encounters and One Heart Failure Outpatient Encounter During the Measurement Period\"",":\n  "]},{"r":"200","s":[{"r":"197","s":[{"r":"183","s":[{"r":"181","s":[{"value":["AgeInYearsAt","("]},{"r":"180","s":[{"value":["date from "]},{"r":"179","s":[{"value":["start of "]},{"r":"178","s":[{"value":["\"Measurement Period\""]}]}]}]},{"value":[")"]}]},{"r":"182","value":[" ","\u003e="," ","18"]}]},{"value":["\n    and "]},{"r":"196","s":[{"value":["exists "]},{"r":"195","s":[{"value":["( "]},{"r":"195","s":[{"s":[{"r":"185","s":[{"r":"184","s":[{"s":[{"value":["\"Qualifying Outpatient Encounter During Measurement Period\""]}]}]},{"value":[" ","Encounter1"]}]}]},{"value":["\n        "]},{"r":"194","s":[{"value":["with "]},{"r":"187","s":[{"r":"186","s":[{"s":[{"value":["\"Qualifying Outpatient Encounter During Measurement Period\""]}]}]},{"value":[" ","Encounter2"]}]},{"value":["\n          such that "]},{"r":"193","s":[{"r":"189","s":[{"r":"188","s":[{"value":["Encounter2"]}]},{"value":["."]},{"r":"189","s":[{"value":["id"]}]}]},{"value":[" ","!~"," "]},{"r":"191","s":[{"r":"190","s":[{"value":["Encounter1"]}]},{"value":["."]},{"r":"191","s":[{"value":["id"]}]}]}]}]}]},{"value":["\n    )"]}]}]}]},{"value":["\n    and "]},{"r":"199","s":[{"value":["exists "]},{"r":"198","s":[{"value":["\"Heart Failure Outpatient Encounter\""]}]}]}]}]}}],"expression":{"localId":"200","locator":"88:3-93:51","type":"And","operand":[{"localId":"197","locator":"88:3-92:5","type":"And","operand":[{"localId":"183","locator":"88:3-88:61","type":"GreaterOrEqual","operand":[{"localId":"181","locator":"88:3-88:55","precision":"Year","type":"CalculateAgeAt","operand":[{"type":"ToDate","operand":{"path":"birthDatetime","type":"Property","source":{"name":"Patient","type":"ExpressionRef"}}},{"localId":"180","locator":"88:16-88:54","type":"DateFrom","operand":{"localId":"179","locator":"88:26-88:54","type":"Start","operand":{"localId":"178","locator":"88:35-88:54","name":"Measurement Period","type":"ParameterRef"}}}]},{"localId":"182","locator":"88:60-88:61","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"18","type":"Literal"}]},{"localId":"196","locator":"89:9-92:5","type":"Exists","operand":{"localId":"195","locator":"89:16-92:5","type":"Query","source":[{"localId":"185","locator":"89:18-89:87","alias":"Encounter1","expression":{"localId":"184","locator":"89:18-89:76","name":"Qualifying Outpatient Encounter During Measurement Period","type":"ExpressionRef"}}],"relationship":[{"localId":"194","locator":"90:9-91:50","alias":"Encounter2","type":"With","expression":{"localId":"186","locator":"90:14-90:72","name":"Qualifying Outpatient Encounter During Measurement Period","type":"ExpressionRef"},"suchThat":{"localId":"193","locator":"91:21-91:50","type":"Not","operand":{"localId":"192","locator":"91:21-91:50","type":"Equivalent","operand":[{"localId":"189","locator":"91:21-91:33","path":"id","scope":"Encounter2","type":"Property"},{"localId":"191","locator":"91:38-91:50","path":"id","scope":"Encounter1","type":"Property"}]}}}]}}]},{"localId":"199","locator":"93:9-93:51","type":"Exists","operand":{"localId":"198","locator":"93:16-93:51","name":"Heart Failure Outpatient Encounter","type":"ExpressionRef"}}]}}]}}},"elm_annotations":{"statements":[{"children":[{"children":[{"children":[{"text":"define \"Heart Failure Outpatient Encounter\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Care Services in Long Term Residential Facility\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"23"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Home Healthcare Services\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"24"}],"node_type":"Union","ref_id":"25"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Nursing Facility Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"26"}],"ref_id":"27"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Office Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"28"}],"node_type":"Union","ref_id":"30"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Outpatient Consultation\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"31"}],"node_type":"Union","ref_id":"32"},{"children":[{"text":" )"}]}],"node_type":"Union","ref_id":"32"},{"children":[{"text":" QualifyingEncounter"}]}],"ref_id":"33"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"[\"Diagnosis\": "}]},{"children":[{"children":[{"text":"\"Heart Failure\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"34"}],"node_type":"Retrieve","ref_id":"34"},{"children":[{"text":" HeartFailure"}]}],"ref_id":"35"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"HeartFailure"}]}],"ref_id":"36"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"prevalencePeriod"}]}],"node_type":"Property","ref_id":"37"}],"node_type":"Property","ref_id":"37"},{"children":[{"text":" overlaps "}],"node_type":"Overlaps","ref_id":"40"},{"children":[{"children":[{"children":[{"text":"QualifyingEncounter"}]}],"ref_id":"38"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"39"}],"node_type":"Property","ref_id":"39"}],"node_type":"Overlaps","ref_id":"40"}],"ref_id":"41"},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"QualifyingEncounter"}]}],"ref_id":"42"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"43"}],"node_type":"Property","ref_id":"43"},{"children":[{"text":" during day of "}],"ref_id":"45"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"44"}],"ref_id":"45"}],"ref_id":"45"}],"node_type":"Query","ref_id":"46"}],"ref_id":"47"}],"define_name":"Heart Failure Outpatient Encounter"},{"children":[{"children":[{"children":[{"text":"define \"Moderate or Severe LVSD Findings\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Diagnostic Study, Performed\": "}]},{"children":[{"children":[{"text":"\"Ejection Fraction\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"52"}],"node_type":"Retrieve","ref_id":"52"},{"children":[{"text":" EjectionFraction"}]}],"ref_id":"53"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"EjectionFraction"}]}],"ref_id":"54"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"result"}]}],"node_type":"Property","ref_id":"55"}],"node_type":"Property","ref_id":"55"},{"children":[{"text":" \u003c= "}]},{"children":[{"children":[{"text":"40 '%'"}]}],"node_type":"Quantity","ref_id":"56"}],"ref_id":"57"}],"ref_id":"57"}],"node_type":"Query","ref_id":"58"},{"children":[{"text":"\n  )"}]}],"node_type":"Query","ref_id":"58"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"[\"Diagnosis\": "}]},{"children":[{"children":[{"text":"\"Moderate or Severe LVSD\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"59"}],"node_type":"Union","ref_id":"60"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Diagnosis\": "}]},{"children":[{"children":[{"text":"\"Left ventricular systolic dysfunction (disorder)\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"61"}],"node_type":"Retrieve","ref_id":"61"},{"children":[{"text":" LVSD"}]}],"ref_id":"62"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LVSD"}]}],"ref_id":"63"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"severity"}]}],"ref_id":"64"}],"ref_id":"64"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Moderate or Severe\""}]}],"ref_id":"65"}],"ref_id":"66"}],"ref_id":"66"}],"node_type":"Query","ref_id":"67"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"67"}],"node_type":"Union","ref_id":"68"}],"ref_id":"69"}],"define_name":"Moderate or Severe LVSD Findings"},{"children":[{"children":[{"children":[{"text":"define \"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Heart Failure Outpatient Encounter\""}]}]}],"node_type":"ExpressionRef","ref_id":"50"},{"children":[{"text":" HFOutpatientEncounter"}]}],"ref_id":"51"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"Moderate or Severe LVSD Findings\""}]}]}],"node_type":"ExpressionRef","ref_id":"70"},{"children":[{"text":" LVSDFindings"}]}],"ref_id":"71"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"children":[{"text":"LVSDFindings"}]}],"ref_id":"72"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"prevalencePeriod"}]}],"node_type":"Property","ref_id":"73"}],"node_type":"Property","ref_id":"73"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"74"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\"("}]},{"children":[{"children":[{"children":[{"text":"LVSDFindings"}]}],"ref_id":"75"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"76"}],"node_type":"Property","ref_id":"76"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"LVSDFindings"}]}],"ref_id":"77"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"78"}],"node_type":"Property","ref_id":"78"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"79"}],"node_type":"FunctionRef","ref_id":"79"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"80"},{"children":[{"text":" starts before "}],"node_type":"Before","ref_id":"84"},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"HFOutpatientEncounter"}]}],"ref_id":"81"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"82"}],"node_type":"Property","ref_id":"82"}],"node_type":"End","ref_id":"83"}],"node_type":"Before","ref_id":"84"}],"ref_id":"85"}],"node_type":"Query","ref_id":"86"}],"ref_id":"87"}],"define_name":"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD"},{"children":[{"children":[{"children":[{"text":"define \"Has Heart Transplant Complications\":\n  "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Diagnosis\": "}]},{"children":[{"children":[{"text":"\"Heart Transplant Complications\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"48"}],"node_type":"Retrieve","ref_id":"48"},{"children":[{"text":" HeartTransplantComplications"}]}],"ref_id":"49"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD\""}]}]}],"node_type":"ExpressionRef","ref_id":"88"},{"children":[{"text":" ModerateOrSevereLVSDHFOutpatientEncounter"}]}],"ref_id":"89"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"90"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\" ( "}]},{"children":[{"children":[{"children":[{"text":"HeartTransplantComplications"}]}],"ref_id":"91"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"92"}],"node_type":"Property","ref_id":"92"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"HeartTransplantComplications"}]}],"ref_id":"93"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"prevalencePeriod"}]}],"node_type":"Property","ref_id":"94"}],"node_type":"Property","ref_id":"94"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"95"}],"node_type":"FunctionRef","ref_id":"95"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"95"},{"children":[{"text":" starts before \n      "}],"node_type":"Before","ref_id":"99"},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"ModerateOrSevereLVSDHFOutpatientEncounter"}]}],"ref_id":"96"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"97"}],"node_type":"Property","ref_id":"97"}],"node_type":"End","ref_id":"98"}],"node_type":"Before","ref_id":"99"}],"ref_id":"100"}],"node_type":"Query","ref_id":"101"}],"node_type":"Exists","ref_id":"102"}],"ref_id":"103"}],"define_name":"Has Heart Transplant Complications"},{"children":[{"children":[{"children":[{"text":"define \"Has Left Ventricular Assist Device\":\n  "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Procedure, Performed\": "}]},{"children":[{"children":[{"text":"\"Left Ventricular Assist Device Placement\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"104"}],"node_type":"Retrieve","ref_id":"104"},{"children":[{"text":" LVADOutpatient"}]}],"ref_id":"105"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD\""}]}]}],"node_type":"ExpressionRef","ref_id":"106"},{"children":[{"text":" ModerateOrSevereLVSDHFOutpatientEncounter"}]}],"ref_id":"107"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"108"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\" ( "}]},{"children":[{"children":[{"children":[{"text":"LVADOutpatient"}]}],"ref_id":"109"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"110"}],"node_type":"Property","ref_id":"110"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"LVADOutpatient"}]}],"ref_id":"111"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"112"}],"node_type":"Property","ref_id":"112"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"113"}],"node_type":"FunctionRef","ref_id":"113"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"113"},{"children":[{"text":" starts before \n      "}],"node_type":"Before","ref_id":"117"},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"ModerateOrSevereLVSDHFOutpatientEncounter"}]}],"ref_id":"114"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"115"}],"node_type":"Property","ref_id":"115"}],"node_type":"End","ref_id":"116"}],"node_type":"Before","ref_id":"117"}],"ref_id":"118"}],"node_type":"Query","ref_id":"119"}],"node_type":"Exists","ref_id":"120"}],"ref_id":"121"}],"define_name":"Has Left Ventricular Assist Device"},{"children":[{"children":[{"children":[{"text":"define \"Has Left Ventricular Assist Device Complications\":\n  "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Diagnosis\": "}]},{"children":[{"children":[{"text":"\"Left Ventricular Assist Device Complications\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"122"}],"node_type":"Retrieve","ref_id":"122"},{"children":[{"text":" LVADComplications"}]}],"ref_id":"123"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD\""}]}]}],"node_type":"ExpressionRef","ref_id":"124"},{"children":[{"text":" ModerateOrSevereLVSDHFOutpatientEncounter"}]}],"ref_id":"125"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"126"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\" ( "}]},{"children":[{"children":[{"children":[{"text":"LVADComplications"}]}],"ref_id":"127"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"128"}],"node_type":"Property","ref_id":"128"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"LVADComplications"}]}],"ref_id":"129"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"prevalencePeriod"}]}],"node_type":"Property","ref_id":"130"}],"node_type":"Property","ref_id":"130"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"131"}],"node_type":"FunctionRef","ref_id":"131"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"131"},{"children":[{"text":" starts before \n      "}],"node_type":"Before","ref_id":"135"},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"ModerateOrSevereLVSDHFOutpatientEncounter"}]}],"ref_id":"132"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"133"}],"node_type":"Property","ref_id":"133"}],"node_type":"End","ref_id":"134"}],"node_type":"Before","ref_id":"135"}],"ref_id":"136"}],"node_type":"Query","ref_id":"137"}],"node_type":"Exists","ref_id":"138"}],"ref_id":"139"}],"define_name":"Has Left Ventricular Assist Device Complications"},{"children":[{"children":[{"children":[{"text":"define \"Qualifying Outpatient Encounter During Measurement Period\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Office Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"140"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Outpatient Consultation\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"141"}],"node_type":"Union","ref_id":"142"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Nursing Facility Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"143"}],"ref_id":"144"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Care Services in Long Term Residential Facility\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"145"}],"node_type":"Union","ref_id":"147"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Home Healthcare Services\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"148"}],"ref_id":"149"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Patient Provider Interaction\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"150"}],"node_type":"Union","ref_id":"152"},{"children":[{"text":" )"}]}],"node_type":"Union","ref_id":"152"},{"children":[{"text":" ValidEncounter"}]}],"ref_id":"153"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"ValidEncounter"}]}],"ref_id":"154"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"155"}],"node_type":"Property","ref_id":"155"},{"children":[{"text":" during day of "}],"ref_id":"157"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"156"}],"ref_id":"157"}],"ref_id":"157"}],"node_type":"Query","ref_id":"158"}],"ref_id":"159"}],"define_name":"Qualifying Outpatient Encounter During Measurement Period"},{"children":[{"children":[{"children":[{"text":"define \"Has Heart Transplant\":\n  "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Procedure, Performed\": "}]},{"children":[{"children":[{"text":"\"Heart Transplant\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"160"}],"node_type":"Retrieve","ref_id":"160"},{"children":[{"text":" HeartTransplant"}]}],"ref_id":"161"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD\""}]}]}],"node_type":"ExpressionRef","ref_id":"162"},{"children":[{"text":" ModerateOrSevereLVSDHFOutpatientEncounter"}]}],"ref_id":"163"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"164"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\" ( "}]},{"children":[{"children":[{"children":[{"text":"HeartTransplant"}]}],"ref_id":"165"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"166"}],"node_type":"Property","ref_id":"166"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"HeartTransplant"}]}],"ref_id":"167"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"168"}],"node_type":"Property","ref_id":"168"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"169"}],"node_type":"FunctionRef","ref_id":"169"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"169"},{"children":[{"text":" starts before \n      "}],"node_type":"Before","ref_id":"173"},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"ModerateOrSevereLVSDHFOutpatientEncounter"}]}],"ref_id":"170"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"171"}],"node_type":"Property","ref_id":"171"}],"node_type":"End","ref_id":"172"}],"node_type":"Before","ref_id":"173"}],"ref_id":"174"}],"node_type":"Query","ref_id":"175"}],"node_type":"Exists","ref_id":"176"}],"ref_id":"177"}],"define_name":"Has Heart Transplant"},{"children":[{"children":[{"children":[{"text":"define \"Is Adults With Two Qualifying Outpatient Encounters and One Heart Failure Outpatient Encounter During the Measurement Period\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"AgeInYearsAt("}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"178"}],"node_type":"Start","ref_id":"179"}],"node_type":"DateFrom","ref_id":"180"},{"children":[{"text":")"}]}],"node_type":"CalculateAgeAt","ref_id":"181"},{"children":[{"text":" \u003e= 18"}],"node_type":"Literal","ref_id":"182"}],"node_type":"GreaterOrEqual","ref_id":"183"},{"children":[{"text":"\n    and "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Qualifying Outpatient Encounter During Measurement Period\""}]}]}],"node_type":"ExpressionRef","ref_id":"184"},{"children":[{"text":" Encounter1"}]}],"ref_id":"185"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"Qualifying Outpatient Encounter During Measurement Period\""}]}]}],"node_type":"ExpressionRef","ref_id":"186"},{"children":[{"text":" Encounter2"}]}],"ref_id":"187"},{"children":[{"text":"\n          such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Encounter2"}]}],"ref_id":"188"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"id"}]}],"node_type":"Property","ref_id":"189"}],"node_type":"Property","ref_id":"189"},{"children":[{"text":" !~ "}]},{"children":[{"children":[{"children":[{"text":"Encounter1"}]}],"ref_id":"190"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"id"}]}],"node_type":"Property","ref_id":"191"}],"node_type":"Property","ref_id":"191"}],"node_type":"Not","ref_id":"193"}],"ref_id":"194"}],"node_type":"Query","ref_id":"195"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"195"}],"node_type":"Exists","ref_id":"196"}],"node_type":"And","ref_id":"197"},{"children":[{"text":"\n    and "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"\"Heart Failure Outpatient Encounter\""}]}],"node_type":"ExpressionRef","ref_id":"198"}],"node_type":"Exists","ref_id":"199"}],"node_type":"And","ref_id":"200"}],"ref_id":"201"}],"define_name":"Is Adults With Two Qualifying Outpatient Encounters and One Heart Failure Outpatient Encounter During the Measurement Period"}],"identifier":{"id":"HFCommonDefinitionsQDM","version":"3.0.000"}},"is_main_library":false,"is_top_level":true,"library_name":"HFCommonDefinitionsQDM","library_version":"3.0.000","statement_dependencies":[{"_id":"68923bbaa83e15671c2cbab6","statement_name":"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD","statement_references":[{"_id":"68923bbaa83e15671c2cbaa8","hqmf_id":null,"library_name":"HFCommonDefinitionsQDM","statement_name":"Heart Failure Outpatient Encounter"},{"_id":"68923bbaa83e15671c2cbaa9","hqmf_id":null,"library_name":"HFCommonDefinitionsQDM","statement_name":"Moderate or Severe LVSD Findings"},{"_id":"68923bbaa83e15671c2cbaaa","hqmf_id":null,"library_name":"MATGlobalCommonFunctionsQDM","statement_name":"NormalizeInterval"}]},{"_id":"68923bbaa83e15671c2cbab7","statement_name":"Heart Failure Outpatient Encounter"},{"_id":"68923bbaa83e15671c2cbab8","statement_name":"Moderate or Severe LVSD Findings"},{"_id":"68923bbaa83e15671c2cbab9","statement_name":"Is Adults With Two Qualifying Outpatient Encounters and One Heart Failure Outpatient Encounter During the Measurement Period","statement_references":[{"_id":"68923bbaa83e15671c2cbaab","hqmf_id":null,"library_name":"HFCommonDefinitionsQDM","statement_name":"Patient"},{"_id":"68923bbaa83e15671c2cbaac","hqmf_id":null,"library_name":"HFCommonDefinitionsQDM","statement_name":"Qualifying Outpatient Encounter During Measurement Period"},{"_id":"68923bbaa83e15671c2cbaad","hqmf_id":null,"library_name":"HFCommonDefinitionsQDM","statement_name":"Heart Failure Outpatient Encounter"}]},{"_id":"68923bbaa83e15671c2cbaba","statement_name":"Patient"},{"_id":"68923bbaa83e15671c2cbabb","statement_name":"Qualifying Outpatient Encounter During Measurement Period"},{"_id":"68923bbaa83e15671c2cbabc","statement_name":"Has Heart Transplant","statement_references":[{"_id":"68923bbaa83e15671c2cbaae","hqmf_id":null,"library_name":"HFCommonDefinitionsQDM","statement_name":"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD"},{"_id":"68923bbaa83e15671c2cbaaf","hqmf_id":null,"library_name":"MATGlobalCommonFunctionsQDM","statement_name":"NormalizeInterval"}]},{"_id":"68923bbaa83e15671c2cbabd","statement_name":"Has Heart Transplant Complications","statement_references":[{"_id":"68923bbaa83e15671c2cbab0","hqmf_id":null,"library_name":"HFCommonDefinitionsQDM","statement_name":"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD"},{"_id":"68923bbaa83e15671c2cbab1","hqmf_id":null,"library_name":"MATGlobalCommonFunctionsQDM","statement_name":"NormalizeInterval"}]},{"_id":"68923bbaa83e15671c2cbabe","statement_name":"Has Left Ventricular Assist Device","statement_references":[{"_id":"68923bbaa83e15671c2cbab2","hqmf_id":null,"library_name":"HFCommonDefinitionsQDM","statement_name":"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD"},{"_id":"68923bbaa83e15671c2cbab3","hqmf_id":null,"library_name":"MATGlobalCommonFunctionsQDM","statement_name":"NormalizeInterval"}]},{"_id":"68923bbaa83e15671c2cbabf","statement_name":"Has Left Ventricular Assist Device Complications","statement_references":[{"_id":"68923bbaa83e15671c2cbab4","hqmf_id":null,"library_name":"HFCommonDefinitionsQDM","statement_name":"Heart Failure Outpatient Encounter with History of Moderate or Severe LVSD"},{"_id":"68923bbaa83e15671c2cbab5","hqmf_id":null,"library_name":"MATGlobalCommonFunctionsQDM","statement_name":"NormalizeInterval"}]}]},{"_id":"68923bbaa83e15671c2cbac2","cql":"library MATGlobalCommonFunctionsQDM version '8.0.000'\n\n/*1. Upversion to 8.0.000 to support 2024 AU efforts.  No content changes were made from version 7.2.000 to this version 8.0.000*/\n\nusing QDM version '5.6'\n\nvalueset \"Emergency Department Visit\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.292' \nvalueset \"Encounter Inpatient\": 'urn:oid:2.16.840.1.113883.3.666.5.307' \nvalueset \"Intensive Care Unit\": 'urn:oid:2.16.840.1.113762.1.4.1029.206' \nvalueset \"Observation Services\": 'urn:oid:2.16.840.1.113762.1.4.1111.143' \nvalueset \"Outpatient Surgery Service\": 'urn:oid:2.16.840.1.113762.1.4.1110.38' \n\nparameter \"Measurement Period\" Interval\u003cDateTime\u003e\n\ncontext Patient\n\ndefine \"ED Encounter\":\n  [\"Encounter, Performed\": \"Emergency Department Visit\"]\n\ndefine \"Inpatient Encounter\":\n  [\"Encounter, Performed\": \"Encounter Inpatient\"] EncounterInpatient\n    where EncounterInpatient.relevantPeriod ends during day of \"Measurement Period\"\n\n/*@description: Returns an interval of date values extracted from the input interval of date-time values\n@comment: This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability.*/\ndefine function \"ToDateInterval\"(period Interval\u003cDateTime\u003e ):\n  Interval[date from start of period, date from end of period]\n\n/*calculates the difference in calendar days between the start and end of the given interval.*/\ndefine function \"LengthInDays\"(Value Interval\u003cDateTime\u003e ):\n  difference in days between start of Value and end of Value\n\n/*returns list of all locations within an encounter, including locations for immediately prior ED visit.*/\ndefine function \"HospitalizationLocations\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet EDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn if EDVisit is null then Visit.facilityLocations \n  \t\telse flatten { EDVisit.facilityLocations, Visit.facilityLocations }\n\n/*Returns the arrival time in the ED for the encounter.*/\ndefine function \"EmergencyDepartmentArrivalTime\"(Encounter \"Encounter, Performed\" ):\n  start of First((\"HospitalizationLocations\"(Encounter))HospitalLocation\n  \t\twhere HospitalLocation.code in \"Emergency Department Visit\"\n  \t\tsort by start of locationPeriod\n  ).locationPeriod\n\n/*Returns admission time for an encounter or for immediately prior emergency department visit.*/\ndefine function \"HospitalAdmissionTime\"(Encounter \"Encounter, Performed\" ):\n  start of \"Hospitalization\"(Encounter)\n\n/*Returns earliest arrival time for an encounter including any prior ED visit.*/\ndefine function \"HospitalArrivalTime\"(Encounter \"Encounter, Performed\" ):\n  start of First((\"HospitalizationLocations\"(Encounter))HospitalLocation\n  \t\tsort by start of locationPeriod\n  ).locationPeriod\n\n/*Hospitalization returns the total interval for admission to discharge for the given encounter, or for the admission of any immediately prior emergency department visit to the discharge of the given encounter.*/\ndefine function \"Hospitalization\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet EDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn Interval[Coalesce(start of EDVisit.relevantPeriod, start of Visit.relevantPeriod), \n  \tend of Visit.relevantPeriod]\n\n/*Returns the length of stay in days (i.e. the number of days between admission and discharge) for the given encounter, or from the admission of any immediately prior emergency department visit to the discharge of the encounter*/\ndefine function \"HospitalizationLengthofStay\"(Encounter \"Encounter, Performed\" ):\n  LengthInDays(\"Hospitalization\"(Encounter))\n\n/*Returns the latest departure time for encounter including any prior ED visit.*/\ndefine function \"HospitalDepartureTime\"(Encounter \"Encounter, Performed\" ):\n  end of Last((\"HospitalizationLocations\"(Encounter))HospitalLocation\n  \t\tsort by start of locationPeriod\n  ).locationPeriod\n\n/*Hospital Discharge Time returns the discharge time for an encounter*/\ndefine function \"HospitalDischargeTime\"(Encounter \"Encounter, Performed\" ):\n  end of Encounter.relevantPeriod\n\n/*Hospitalization with Observation and Outpatient Surgery Service returns the total interval from the start of any immediately prior emergency department visit, outpatient surgery visit or observation visit to the discharge of the given encounter.*/\ndefine function \"HospitalizationWithObservationAndOutpatientSurgeryService\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet ObsVisit: Last([\"Encounter, Performed\": \"Observation Services\"] LastObs\n  \t\t\twhere LastObs.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t),\n  \tVisitStart: Coalesce(start of ObsVisit.relevantPeriod, start of Visit.relevantPeriod),\n  \tEDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before VisitStart\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t),\n  \tVisitStartWithED: Coalesce(start of EDVisit.relevantPeriod, VisitStart),\n  \tOutpatientSurgeryVisit: Last([\"Encounter, Performed\": \"Outpatient Surgery Service\"] LastSurgeryOP\n  \t\t\twhere LastSurgeryOP.relevantPeriod ends 1 hour or less on or before VisitStartWithED\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn Interval[Coalesce(start of OutpatientSurgeryVisit.relevantPeriod, VisitStartWithED), \n  \tend of Visit.relevantPeriod]\n\n/*Hospitalization with Observation returns the total interval from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\ndefine function \"HospitalizationWithObservation\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet ObsVisit: Last([\"Encounter, Performed\": \"Observation Services\"] LastObs\n  \t\t\twhere LastObs.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t),\n  \tVisitStart: Coalesce(start of ObsVisit.relevantPeriod, start of Visit.relevantPeriod),\n  \tEDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before VisitStart\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn Interval[Coalesce(start of EDVisit.relevantPeriod, VisitStart), \n  \tend of Visit.relevantPeriod]\n\n/*Hospitalization with Observation Length of Stay returns the length in days from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\ndefine function \"HospitalizationWithObservationLengthofStay\"(Encounter \"Encounter, Performed\" ):\n  \"LengthInDays\"(\"HospitalizationWithObservation\"(Encounter))\n\n/*First Inpatient Intensive Care Unit returns the first intensive care unit for the given encounter, without considering any immediately prior emergency department visit.*/\ndefine function \"FirstInpatientIntensiveCareUnit\"(Encounter \"Encounter, Performed\" ):\n  First((Encounter.facilityLocations)HospitalLocation\n      where HospitalLocation.code in \"Intensive Care Unit\"\n        and HospitalLocation.locationPeriod during Encounter.relevantPeriod\n      sort by start of locationPeriod\n  )\n\n/*Given a datetime and a period, returns the period (if a period is provided) or the interval beginning and ending on the datetime (if a datetime is provided)*/\ndefine function \"NormalizeInterval\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  if pointInTime is not null then Interval[pointInTime, pointInTime]\n    else if period is not null then period \n    else null as Interval\u003cDateTime\u003e\n\n/*Given an interval, return true if the interval has a starting boundary specified (i.e. the start of the interval is not null and not the minimum DateTime value)*/\ndefine function \"HasStart\"(period Interval\u003cDateTime\u003e ):\n  not ( start of period is null\n      or start of period = minimum DateTime\n  )\n\n/*Given an interval, return true if the interval has an ending boundary specified (i.e. the end of the interval is not null and not the maximum DateTime value)*/\ndefine function \"HasEnd\"(period Interval\u003cDateTime\u003e ):\n  not ( \n    end of period is null\n      or \n      end of period = maximum DateTime\n  )\n\n/*Given an interval, return the ending point if the interval has an ending boundary specified, otherwise, return the starting point*/\ndefine function \"Latest\"(period Interval\u003cDateTime\u003e ):\n  if ( HasEnd(period)) then \n  end of period \n    else start of period\n\n/*Given an interval, return the starting point if the interval has a starting boundary specified, otherwise, return the ending point*/\ndefine function \"Earliest\"(period Interval\u003cDateTime\u003e ):\n  if ( HasStart(period)) then start of period \n    else \n  end of period\n\n/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the ending point of the period if the period has an ending boundary specified, otherwise returns the starting point of the interval*/\ndefine function \"LatestOf\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  Latest(NormalizeInterval(pointInTime, period))\n\n/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the starting point of the period if the period has a starting boundary specified, otherwise returns the ending point of the period*/\ndefine function \"EarliestOf\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  Earliest(NormalizeInterval(pointInTime, period))\n\n","elm":{"library":{"annotation":[{"translatorOptions":"EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion,DisableMethodInvocation","type":"CqlToElmInfo"},{"type":"Annotation","s":{"r":"395","s":[{"value":["","library MATGlobalCommonFunctionsQDM version '8.0.000'"]}]}}],"identifier":{"id":"MATGlobalCommonFunctionsQDM","version":"8.0.000"},"schemaIdentifier":{"id":"urn:hl7-org:elm","version":"r1"},"usings":{"def":[{"localIdentifier":"System","uri":"urn:hl7-org:elm-types:r1"},{"localId":"1","locator":"5:1-5:23","localIdentifier":"QDM","uri":"urn:healthit-gov:qdm:v5_6","version":"5.6","annotation":[{"type":"Annotation","s":{"r":"1","s":[{"value":["/*1. Upversion to 8.0.000 to support 2024 AU efforts.  No content changes were made from version 7.2.000 to this version 8.0.000*/\n","using "]},{"s":[{"value":["QDM"]}]},{"value":[" version ","'5.6'"]}]}}]}]},"parameters":{"def":[{"localId":"9","locator":"13:1-13:49","name":"Measurement Period","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"9","s":[{"value":["","parameter ","\"Measurement Period\""," "]},{"r":"8","s":[{"value":["Interval\u003c"]},{"r":"7","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}}],"parameterTypeSpecifier":{"localId":"8","locator":"13:32-13:49","type":"IntervalTypeSpecifier","pointType":{"localId":"7","locator":"13:41-13:48","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},"valueSets":{"def":[{"localId":"2","locator":"7:1-7:82","name":"Emergency Department Visit","id":"2.16.840.1.113883.3.117.1.7.1.292","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"2","s":[{"value":["","valueset ","\"Emergency Department Visit\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.292'"]}]}}]},{"localId":"3","locator":"8:1-8:71","name":"Encounter Inpatient","id":"2.16.840.1.113883.3.666.5.307","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"3","s":[{"value":["","valueset ","\"Encounter Inpatient\"",": ","'urn:oid:2.16.840.1.113883.3.666.5.307'"]}]}}]},{"localId":"4","locator":"9:1-9:72","name":"Intensive Care Unit","id":"2.16.840.1.113762.1.4.1029.206","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"4","s":[{"value":["","valueset ","\"Intensive Care Unit\"",": ","'urn:oid:2.16.840.1.113762.1.4.1029.206'"]}]}}]},{"localId":"5","locator":"10:1-10:73","name":"Observation Services","id":"2.16.840.1.113762.1.4.1111.143","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"5","s":[{"value":["","valueset ","\"Observation Services\"",": ","'urn:oid:2.16.840.1.113762.1.4.1111.143'"]}]}}]},{"localId":"6","locator":"11:1-11:78","name":"Outpatient Surgery Service","id":"2.16.840.1.113762.1.4.1110.38","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"6","s":[{"value":["","valueset ","\"Outpatient Surgery Service\"",": ","'urn:oid:2.16.840.1.113762.1.4.1110.38'"]}]}}]}]},"contexts":{"def":[{"locator":"15:1-15:15","name":"Patient"}]},"statements":{"def":[{"locator":"15:1-15:15","name":"Patient","context":"Patient","expression":{"type":"SingletonFrom","operand":{"locator":"15:1-15:15","dataType":"{urn:healthit-gov:qdm:v5_6}Patient","templateId":"Patient","type":"Retrieve"}}},{"localId":"11","locator":"17:1-18:56","name":"ED Encounter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"11","s":[{"value":["","define ","\"ED Encounter\"",":\n  "]},{"r":"10","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"10","locator":"18:3-18:56","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"18:28-18:55","name":"Emergency Department Visit","preserve":true,"type":"ValueSetRef"}}},{"localId":"19","locator":"20:1-22:83","name":"Inpatient Encounter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"19","s":[{"value":["","define ","\"Inpatient Encounter\"",":\n  "]},{"r":"18","s":[{"s":[{"r":"13","s":[{"r":"12","s":[{"r":"12","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Encounter Inpatient\""]}]},{"value":["]"]}]}]},{"value":[" ","EncounterInpatient"]}]}]},{"value":["\n    "]},{"r":"17","s":[{"value":["where "]},{"r":"17","s":[{"r":"15","s":[{"r":"14","s":[{"value":["EncounterInpatient"]}]},{"value":["."]},{"r":"15","s":[{"value":["relevantPeriod"]}]}]},{"r":"17","value":[" ","ends during day of"," "]},{"r":"16","s":[{"value":["\"Measurement Period\""]}]}]}]}]}]}}],"expression":{"localId":"18","locator":"21:3-22:83","type":"Query","source":[{"localId":"13","locator":"21:3-21:68","alias":"EncounterInpatient","expression":{"localId":"12","locator":"21:3-21:49","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"21:28-21:48","name":"Encounter Inpatient","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"17","locator":"22:5-22:83","precision":"Day","type":"In","operand":[{"locator":"22:45-22:48","type":"End","operand":{"localId":"15","locator":"22:11-22:43","path":"relevantPeriod","scope":"EncounterInpatient","type":"Property"}},{"localId":"16","locator":"22:64-22:83","name":"Measurement Period","type":"ParameterRef"}]}}},{"localId":"29","locator":"29:1-30:62","name":"ToDateInterval","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","t":[{"name":"description","value":"Returns an interval of date values extracted from the input interval of date-time values"},{"name":"description","value":"Returns an interval of date values extracted from the input interval of date-time values"},{"name":"comment","value":"This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability."}],"s":{"r":"29","s":[{"value":["/*@description: Returns an interval of date values extracted from the input interval of date-time values\n@comment: This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability.*/\n","define function ","\"ToDateInterval\"","(","period"," "]},{"r":"21","s":[{"value":["Interval\u003c"]},{"r":"20","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"28","s":[{"r":"28","s":[{"value":["Interval["]},{"r":"24","s":[{"value":["date from "]},{"r":"23","s":[{"value":["start of "]},{"r":"22","s":[{"value":["period"]}]}]}]},{"value":[", "]},{"r":"27","s":[{"value":["date from "]},{"r":"26","s":[{"value":["end of "]},{"r":"25","s":[{"value":["period"]}]}]}]},{"value":["]"]}]}]}]}}],"expression":{"localId":"28","locator":"30:3-30:62","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"24","locator":"30:12-30:36","type":"DateFrom","operand":{"localId":"23","locator":"30:22-30:36","type":"Start","operand":{"localId":"22","locator":"30:31-30:36","name":"period","type":"OperandRef"}}},"high":{"localId":"27","locator":"30:39-30:61","type":"DateFrom","operand":{"localId":"26","locator":"30:49-30:61","type":"End","operand":{"localId":"25","locator":"30:56-30:61","name":"period","type":"OperandRef"}}}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"21","locator":"29:41-29:58","type":"IntervalTypeSpecifier","pointType":{"localId":"20","locator":"29:50-29:57","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"37","locator":"33:1-34:60","name":"LengthInDays","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"37","s":[{"value":["/*calculates the difference in calendar days between the start and end of the given interval.*/\n","define function ","\"LengthInDays\"","(","Value"," "]},{"r":"31","s":[{"value":["Interval\u003c"]},{"r":"30","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"36","s":[{"r":"36","s":[{"value":["difference in days between "]},{"r":"33","s":[{"value":["start of "]},{"r":"32","s":[{"value":["Value"]}]}]},{"value":[" and "]},{"r":"35","s":[{"value":["end of "]},{"r":"34","s":[{"value":["Value"]}]}]}]}]}]}}],"expression":{"localId":"36","locator":"34:3-34:60","precision":"Day","type":"DifferenceBetween","operand":[{"localId":"33","locator":"34:30-34:43","type":"Start","operand":{"localId":"32","locator":"34:39-34:43","name":"Value","type":"OperandRef"}},{"localId":"35","locator":"34:49-34:60","type":"End","operand":{"localId":"34","locator":"34:56-34:60","name":"Value","type":"OperandRef"}}]},"operand":[{"name":"Value","operandTypeSpecifier":{"localId":"31","locator":"33:38-33:55","type":"IntervalTypeSpecifier","pointType":{"localId":"30","locator":"33:47-33:54","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"70","locator":"37:1-45:71","name":"HospitalizationLocations","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"70","s":[{"value":["/*returns list of all locations within an encounter, including locations for immediately prior ED visit.*/\n","define function ","\"HospitalizationLocations\"","(","Encounter"," "]},{"r":"38","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"69","s":[{"r":"69","s":[{"s":[{"r":"40","s":[{"r":"39","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"56","s":[{"value":["EDVisit",": "]},{"r":"55","s":[{"value":["Last","("]},{"r":"54","s":[{"s":[{"r":"42","s":[{"r":"41","s":[{"r":"41","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"49","s":[{"value":["where "]},{"r":"49","s":[{"r":"44","s":[{"r":"43","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"44","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"49","s":[{"value":["ends "]},{"r":"48","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"47","s":[{"value":["start of "]},{"r":"46","s":[{"r":"45","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"46","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"53","s":[{"value":["sort by \n  \t\t\t"]},{"r":"52","s":[{"r":"51","s":[{"value":["end of "]},{"r":"50","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"68","s":[{"value":["return "]},{"r":"67","s":[{"value":["if "]},{"r":"58","s":[{"r":"57","s":[{"value":["EDVisit"]}]},{"value":[" is null"]}]},{"value":[" then "]},{"r":"60","s":[{"r":"59","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"60","s":[{"value":["facilityLocations"]}]}]},{"value":[" \n  \t\telse "]},{"r":"66","s":[{"value":["flatten "]},{"r":"65","s":[{"value":["{ "]},{"r":"62","s":[{"r":"61","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"62","s":[{"value":["facilityLocations"]}]}]},{"value":[", "]},{"r":"64","s":[{"r":"63","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"64","s":[{"value":["facilityLocations"]}]}]},{"value":[" }"]}]}]}]}]}]}]}]}}],"expression":{"localId":"69","locator":"38:3-45:71","type":"Query","source":[{"localId":"40","locator":"38:3-38:17","alias":"Visit","expression":{"localId":"39","locator":"38:3-38:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"56","locator":"39:8-43:4","identifier":"EDVisit","expression":{"localId":"55","locator":"39:17-43:4","type":"Last","source":{"localId":"54","locator":"39:22-42:26","type":"Query","source":[{"localId":"42","locator":"39:22-39:82","alias":"LastED","expression":{"localId":"41","locator":"39:22-39:75","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"39:47-39:74","name":"Emergency Department Visit","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"49","locator":"40:6-40:95","type":"And","operand":[{"locator":"40:39-40:52","type":"In","operand":[{"locator":"40:34-40:37","type":"End","operand":{"localId":"44","locator":"40:12-40:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"40:39-40:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"40:67-40:95","type":"Subtract","operand":[{"localId":"47","locator":"40:67-40:95","type":"Start","operand":{"localId":"46","locator":"40:76-40:95","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"48","locator":"40:39-40:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"47","locator":"40:67-40:95","type":"Start","operand":{"localId":"46","locator":"40:76-40:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"40:39-40:52","type":"Not","operand":{"locator":"40:39-40:52","type":"IsNull","operand":{"localId":"47","locator":"40:67-40:95","type":"Start","operand":{"localId":"46","locator":"40:76-40:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"53","locator":"41:6-42:26","by":[{"localId":"52","locator":"42:6-42:26","direction":"asc","type":"ByExpression","expression":{"localId":"51","locator":"42:6-42:26","type":"End","operand":{"localId":"50","locator":"42:13-42:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"68","locator":"44:4-45:71","expression":{"localId":"67","locator":"44:11-45:71","type":"If","condition":{"localId":"58","locator":"44:14-44:28","type":"IsNull","operand":{"localId":"57","locator":"44:14-44:20","name":"EDVisit","type":"QueryLetRef"}},"then":{"localId":"60","locator":"44:35-44:57","path":"facilityLocations","scope":"Visit","type":"Property"},"else":{"localId":"66","locator":"45:10-45:71","type":"Flatten","operand":{"localId":"65","locator":"45:18-45:71","type":"List","element":[{"localId":"62","locator":"45:20-45:44","path":"facilityLocations","type":"Property","source":{"localId":"61","locator":"45:20-45:26","name":"EDVisit","type":"QueryLetRef"}},{"localId":"64","locator":"45:47-45:69","path":"facilityLocations","scope":"Visit","type":"Property"}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"38","locator":"37:54-37:75","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"87","locator":"48:1-52:18","name":"EmergencyDepartmentArrivalTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"87","s":[{"value":["/*Returns the arrival time in the ED for the encounter.*/\n","define function ","\"EmergencyDepartmentArrivalTime\"","(","Encounter"," "]},{"r":"71","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"86","s":[{"r":"86","s":[{"value":["start of "]},{"r":"85","s":[{"r":"84","s":[{"value":["First","("]},{"r":"83","s":[{"s":[{"r":"74","s":[{"r":"73","s":[{"value":["("]},{"r":"73","s":[{"value":["\"HospitalizationLocations\"","("]},{"r":"72","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n  \t\t"]},{"r":"78","s":[{"value":["where "]},{"r":"78","s":[{"r":"76","s":[{"r":"75","s":[{"value":["HospitalLocation"]}]},{"value":["."]},{"r":"76","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"77","s":[{"value":["\"Emergency Department Visit\""]}]}]}]},{"value":["\n  \t\t"]},{"r":"82","s":[{"value":["sort by "]},{"r":"81","s":[{"r":"80","s":[{"value":["start of "]},{"r":"79","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"85","s":[{"value":["locationPeriod"]}]}]}]}]}]}}],"expression":{"localId":"86","locator":"49:3-52:18","type":"Start","operand":{"localId":"85","locator":"49:12-52:18","path":"locationPeriod","type":"Property","source":{"localId":"84","locator":"49:12-52:3","type":"First","source":{"localId":"83","locator":"49:18-51:35","type":"Query","source":[{"localId":"74","locator":"49:18-49:72","alias":"HospitalLocation","expression":{"localId":"73","locator":"49:18-49:56","name":"HospitalizationLocations","type":"FunctionRef","operand":[{"localId":"72","locator":"49:46-49:54","name":"Encounter","type":"OperandRef"}]}}],"relationship":[],"where":{"localId":"78","locator":"50:5-50:63","type":"InValueSet","code":{"localId":"76","locator":"50:11-50:31","path":"code","scope":"HospitalLocation","type":"Property"},"valueset":{"localId":"77","locator":"50:36-50:63","name":"Emergency Department Visit","preserve":true}},"sort":{"localId":"82","locator":"51:5-51:35","by":[{"localId":"81","locator":"51:13-51:35","direction":"asc","type":"ByExpression","expression":{"localId":"80","locator":"51:13-51:35","type":"Start","operand":{"localId":"79","locator":"51:22-51:35","name":"locationPeriod","type":"IdentifierRef"}}}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"71","locator":"48:60-48:81","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"122","locator":"65:1-73:31","name":"Hospitalization","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"122","s":[{"value":["/*Hospitalization returns the total interval for admission to discharge for the given encounter, or for the admission of any immediately prior emergency department visit to the discharge of the given encounter.*/\n","define function ","\"Hospitalization\"","(","Encounter"," "]},{"r":"90","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"121","s":[{"r":"121","s":[{"s":[{"r":"92","s":[{"r":"91","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"108","s":[{"value":["EDVisit",": "]},{"r":"107","s":[{"value":["Last","("]},{"r":"106","s":[{"s":[{"r":"94","s":[{"r":"93","s":[{"r":"93","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"101","s":[{"value":["where "]},{"r":"101","s":[{"r":"96","s":[{"r":"95","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"96","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"101","s":[{"value":["ends "]},{"r":"100","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"99","s":[{"value":["start of "]},{"r":"98","s":[{"r":"97","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"98","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"105","s":[{"value":["sort by \n  \t\t\t"]},{"r":"104","s":[{"r":"103","s":[{"value":["end of "]},{"r":"102","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"120","s":[{"value":["return "]},{"r":"119","s":[{"value":["Interval["]},{"r":"115","s":[{"value":["Coalesce","("]},{"r":"111","s":[{"value":["start of "]},{"r":"110","s":[{"r":"109","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"110","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"114","s":[{"value":["start of "]},{"r":"113","s":[{"r":"112","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"113","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]},{"value":[", \n  \t"]},{"r":"118","s":[{"value":["end of "]},{"r":"117","s":[{"r":"116","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"117","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["]"]}]}]}]}]}]}}],"expression":{"localId":"121","locator":"66:3-73:31","type":"Query","source":[{"localId":"92","locator":"66:3-66:17","alias":"Visit","expression":{"localId":"91","locator":"66:3-66:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"108","locator":"67:8-71:4","identifier":"EDVisit","expression":{"localId":"107","locator":"67:17-71:4","type":"Last","source":{"localId":"106","locator":"67:22-70:26","type":"Query","source":[{"localId":"94","locator":"67:22-67:82","alias":"LastED","expression":{"localId":"93","locator":"67:22-67:75","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"67:47-67:74","name":"Emergency Department Visit","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"101","locator":"68:6-68:95","type":"And","operand":[{"locator":"68:39-68:52","type":"In","operand":[{"locator":"68:34-68:37","type":"End","operand":{"localId":"96","locator":"68:12-68:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"68:39-68:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"68:67-68:95","type":"Subtract","operand":[{"localId":"99","locator":"68:67-68:95","type":"Start","operand":{"localId":"98","locator":"68:76-68:95","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"100","locator":"68:39-68:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"99","locator":"68:67-68:95","type":"Start","operand":{"localId":"98","locator":"68:76-68:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"68:39-68:52","type":"Not","operand":{"locator":"68:39-68:52","type":"IsNull","operand":{"localId":"99","locator":"68:67-68:95","type":"Start","operand":{"localId":"98","locator":"68:76-68:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"105","locator":"69:6-70:26","by":[{"localId":"104","locator":"70:6-70:26","direction":"asc","type":"ByExpression","expression":{"localId":"103","locator":"70:6-70:26","type":"End","operand":{"localId":"102","locator":"70:13-70:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"120","locator":"72:4-73:31","expression":{"localId":"119","locator":"72:11-73:31","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"115","locator":"72:20-72:91","type":"Coalesce","operand":[{"localId":"111","locator":"72:29-72:59","type":"Start","operand":{"localId":"110","locator":"72:38-72:59","path":"relevantPeriod","type":"Property","source":{"localId":"109","locator":"72:38-72:44","name":"EDVisit","type":"QueryLetRef"}}},{"localId":"114","locator":"72:62-72:90","type":"Start","operand":{"localId":"113","locator":"72:71-72:90","path":"relevantPeriod","scope":"Visit","type":"Property"}}]},"high":{"localId":"118","locator":"73:4-73:30","type":"End","operand":{"localId":"117","locator":"73:11-73:30","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"90","locator":"65:45-65:66","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"125","locator":"55:1-56:39","name":"HospitalAdmissionTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"125","s":[{"value":["/*Returns admission time for an encounter or for immediately prior emergency department visit.*/\n","define function ","\"HospitalAdmissionTime\"","(","Encounter"," "]},{"r":"88","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"124","s":[{"r":"124","s":[{"value":["start of "]},{"r":"123","s":[{"value":["\"Hospitalization\"","("]},{"r":"89","s":[{"value":["Encounter"]}]},{"value":[")"]}]}]}]}]}}],"expression":{"localId":"124","locator":"56:3-56:39","type":"Start","operand":{"localId":"123","locator":"56:12-56:39","name":"Hospitalization","type":"FunctionRef","operand":[{"localId":"89","locator":"56:30-56:38","name":"Encounter","type":"OperandRef"}]}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"88","locator":"55:51-55:72","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"138","locator":"59:1-62:18","name":"HospitalArrivalTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"138","s":[{"value":["/*Returns earliest arrival time for an encounter including any prior ED visit.*/\n","define function ","\"HospitalArrivalTime\"","(","Encounter"," "]},{"r":"126","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"137","s":[{"r":"137","s":[{"value":["start of "]},{"r":"136","s":[{"r":"135","s":[{"value":["First","("]},{"r":"134","s":[{"s":[{"r":"129","s":[{"r":"128","s":[{"value":["("]},{"r":"128","s":[{"value":["\"HospitalizationLocations\"","("]},{"r":"127","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n  \t\t"]},{"r":"133","s":[{"value":["sort by "]},{"r":"132","s":[{"r":"131","s":[{"value":["start of "]},{"r":"130","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"136","s":[{"value":["locationPeriod"]}]}]}]}]}]}}],"expression":{"localId":"137","locator":"60:3-62:18","type":"Start","operand":{"localId":"136","locator":"60:12-62:18","path":"locationPeriod","type":"Property","source":{"localId":"135","locator":"60:12-62:3","type":"First","source":{"localId":"134","locator":"60:18-61:35","type":"Query","source":[{"localId":"129","locator":"60:18-60:72","alias":"HospitalLocation","expression":{"localId":"128","locator":"60:18-60:56","name":"HospitalizationLocations","type":"FunctionRef","operand":[{"localId":"127","locator":"60:46-60:54","name":"Encounter","type":"OperandRef"}]}}],"relationship":[],"sort":{"localId":"133","locator":"61:5-61:35","by":[{"localId":"132","locator":"61:13-61:35","direction":"asc","type":"ByExpression","expression":{"localId":"131","locator":"61:13-61:35","type":"Start","operand":{"localId":"130","locator":"61:22-61:35","name":"locationPeriod","type":"IdentifierRef"}}}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"126","locator":"59:49-59:70","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"145","locator":"76:1-77:44","name":"HospitalizationLengthofStay","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"145","s":[{"value":["/*Returns the length of stay in days (i.e. the number of days between admission and discharge) for the given encounter, or from the admission of any immediately prior emergency department visit to the discharge of the encounter*/\n","define function ","\"HospitalizationLengthofStay\"","(","Encounter"," "]},{"r":"141","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"144","s":[{"r":"144","s":[{"value":["LengthInDays","("]},{"r":"143","s":[{"value":["\"Hospitalization\"","("]},{"r":"142","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"144","locator":"77:3-77:44","name":"LengthInDays","type":"FunctionRef","operand":[{"localId":"143","locator":"77:16-77:43","name":"Hospitalization","type":"FunctionRef","operand":[{"localId":"142","locator":"77:34-77:42","name":"Encounter","type":"OperandRef"}]}]},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"141","locator":"76:57-76:78","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"158","locator":"80:1-83:18","name":"HospitalDepartureTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"158","s":[{"value":["/*Returns the latest departure time for encounter including any prior ED visit.*/\n","define function ","\"HospitalDepartureTime\"","(","Encounter"," "]},{"r":"146","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"157","s":[{"r":"157","s":[{"value":["end of "]},{"r":"156","s":[{"r":"155","s":[{"value":["Last","("]},{"r":"154","s":[{"s":[{"r":"149","s":[{"r":"148","s":[{"value":["("]},{"r":"148","s":[{"value":["\"HospitalizationLocations\"","("]},{"r":"147","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n  \t\t"]},{"r":"153","s":[{"value":["sort by "]},{"r":"152","s":[{"r":"151","s":[{"value":["start of "]},{"r":"150","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"156","s":[{"value":["locationPeriod"]}]}]}]}]}]}}],"expression":{"localId":"157","locator":"81:3-83:18","type":"End","operand":{"localId":"156","locator":"81:10-83:18","path":"locationPeriod","type":"Property","source":{"localId":"155","locator":"81:10-83:3","type":"Last","source":{"localId":"154","locator":"81:15-82:35","type":"Query","source":[{"localId":"149","locator":"81:15-81:69","alias":"HospitalLocation","expression":{"localId":"148","locator":"81:15-81:53","name":"HospitalizationLocations","type":"FunctionRef","operand":[{"localId":"147","locator":"81:43-81:51","name":"Encounter","type":"OperandRef"}]}}],"relationship":[],"sort":{"localId":"153","locator":"82:5-82:35","by":[{"localId":"152","locator":"82:13-82:35","direction":"asc","type":"ByExpression","expression":{"localId":"151","locator":"82:13-82:35","type":"Start","operand":{"localId":"150","locator":"82:22-82:35","name":"locationPeriod","type":"IdentifierRef"}}}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"146","locator":"80:51-80:72","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"163","locator":"86:1-87:33","name":"HospitalDischargeTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"163","s":[{"value":["/*Hospital Discharge Time returns the discharge time for an encounter*/\n","define function ","\"HospitalDischargeTime\"","(","Encounter"," "]},{"r":"159","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"162","s":[{"r":"162","s":[{"value":["end of "]},{"r":"161","s":[{"r":"160","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"161","s":[{"value":["relevantPeriod"]}]}]}]}]}]}}],"expression":{"localId":"162","locator":"87:3-87:33","type":"End","operand":{"localId":"161","locator":"87:10-87:33","path":"relevantPeriod","type":"Property","source":{"localId":"160","locator":"87:10-87:18","name":"Encounter","type":"OperandRef"}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"159","locator":"86:51-86:72","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"236","locator":"90:1-110:31","name":"HospitalizationWithObservationAndOutpatientSurgeryService","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"236","s":[{"value":["/*Hospitalization with Observation and Outpatient Surgery Service returns the total interval from the start of any immediately prior emergency department visit, outpatient surgery visit or observation visit to the discharge of the given encounter.*/\n","define function ","\"HospitalizationWithObservationAndOutpatientSurgeryService\"","(","Encounter"," "]},{"r":"164","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"235","s":[{"r":"235","s":[{"s":[{"r":"166","s":[{"r":"165","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"182","s":[{"value":["ObsVisit",": "]},{"r":"181","s":[{"value":["Last","("]},{"r":"180","s":[{"s":[{"r":"168","s":[{"r":"167","s":[{"r":"167","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Observation Services\""]}]},{"value":["]"]}]}]},{"value":[" ","LastObs"]}]}]},{"value":["\n  \t\t\t"]},{"r":"175","s":[{"value":["where "]},{"r":"175","s":[{"r":"170","s":[{"r":"169","s":[{"value":["LastObs"]}]},{"value":["."]},{"r":"170","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"175","s":[{"value":["ends "]},{"r":"174","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"173","s":[{"value":["start of "]},{"r":"172","s":[{"r":"171","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"172","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"179","s":[{"value":["sort by \n  \t\t\t"]},{"r":"178","s":[{"r":"177","s":[{"value":["end of "]},{"r":"176","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]},{"value":[",\n  \t"]},{"r":"190","s":[{"value":["VisitStart",": "]},{"r":"189","s":[{"value":["Coalesce","("]},{"r":"185","s":[{"value":["start of "]},{"r":"184","s":[{"r":"183","s":[{"value":["ObsVisit"]}]},{"value":["."]},{"r":"184","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"188","s":[{"value":["start of "]},{"r":"187","s":[{"r":"186","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"187","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]}]},{"value":[",\n  \t"]},{"r":"204","s":[{"value":["EDVisit",": "]},{"r":"203","s":[{"value":["Last","("]},{"r":"202","s":[{"s":[{"r":"192","s":[{"r":"191","s":[{"r":"191","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"197","s":[{"value":["where "]},{"r":"197","s":[{"r":"194","s":[{"r":"193","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"194","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"197","s":[{"value":["ends "]},{"r":"196","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"195","s":[{"value":["VisitStart"]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"201","s":[{"value":["sort by \n  \t\t\t"]},{"r":"200","s":[{"r":"199","s":[{"value":["end of "]},{"r":"198","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]},{"value":[",\n  \t"]},{"r":"210","s":[{"value":["VisitStartWithED",": "]},{"r":"209","s":[{"value":["Coalesce","("]},{"r":"207","s":[{"value":["start of "]},{"r":"206","s":[{"r":"205","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"206","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"208","s":[{"value":["VisitStart"]}]},{"value":[")"]}]}]},{"value":[",\n  \t"]},{"r":"224","s":[{"value":["OutpatientSurgeryVisit",": "]},{"r":"223","s":[{"value":["Last","("]},{"r":"222","s":[{"s":[{"r":"212","s":[{"r":"211","s":[{"r":"211","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Outpatient Surgery Service\""]}]},{"value":["]"]}]}]},{"value":[" ","LastSurgeryOP"]}]}]},{"value":["\n  \t\t\t"]},{"r":"217","s":[{"value":["where "]},{"r":"217","s":[{"r":"214","s":[{"r":"213","s":[{"value":["LastSurgeryOP"]}]},{"value":["."]},{"r":"214","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"217","s":[{"value":["ends "]},{"r":"216","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"215","s":[{"value":["VisitStartWithED"]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"221","s":[{"value":["sort by \n  \t\t\t"]},{"r":"220","s":[{"r":"219","s":[{"value":["end of "]},{"r":"218","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"234","s":[{"value":["return "]},{"r":"233","s":[{"value":["Interval["]},{"r":"229","s":[{"value":["Coalesce","("]},{"r":"227","s":[{"value":["start of "]},{"r":"226","s":[{"r":"225","s":[{"value":["OutpatientSurgeryVisit"]}]},{"value":["."]},{"r":"226","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"228","s":[{"value":["VisitStartWithED"]}]},{"value":[")"]}]},{"value":[", \n  \t"]},{"r":"232","s":[{"value":["end of "]},{"r":"231","s":[{"r":"230","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"231","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["]"]}]}]}]}]}]}}],"expression":{"localId":"235","locator":"91:3-110:31","type":"Query","source":[{"localId":"166","locator":"91:3-91:17","alias":"Visit","expression":{"localId":"165","locator":"91:3-91:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"182","locator":"92:8-96:4","identifier":"ObsVisit","expression":{"localId":"181","locator":"92:18-96:4","type":"Last","source":{"localId":"180","locator":"92:23-95:26","type":"Query","source":[{"localId":"168","locator":"92:23-92:78","alias":"LastObs","expression":{"localId":"167","locator":"92:23-92:70","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"92:48-92:69","name":"Observation Services","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"175","locator":"93:6-93:96","type":"And","operand":[{"locator":"93:40-93:53","type":"In","operand":[{"locator":"93:35-93:38","type":"End","operand":{"localId":"170","locator":"93:12-93:33","path":"relevantPeriod","scope":"LastObs","type":"Property"}},{"locator":"93:40-93:53","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"93:68-93:96","type":"Subtract","operand":[{"localId":"173","locator":"93:68-93:96","type":"Start","operand":{"localId":"172","locator":"93:77-93:96","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"174","locator":"93:40-93:45","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"173","locator":"93:68-93:96","type":"Start","operand":{"localId":"172","locator":"93:77-93:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"93:40-93:53","type":"Not","operand":{"locator":"93:40-93:53","type":"IsNull","operand":{"localId":"173","locator":"93:68-93:96","type":"Start","operand":{"localId":"172","locator":"93:77-93:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"179","locator":"94:6-95:26","by":[{"localId":"178","locator":"95:6-95:26","direction":"asc","type":"ByExpression","expression":{"localId":"177","locator":"95:6-95:26","type":"End","operand":{"localId":"176","locator":"95:13-95:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}},{"localId":"190","locator":"97:4-97:88","identifier":"VisitStart","expression":{"localId":"189","locator":"97:16-97:88","type":"Coalesce","operand":[{"localId":"185","locator":"97:25-97:56","type":"Start","operand":{"localId":"184","locator":"97:34-97:56","path":"relevantPeriod","type":"Property","source":{"localId":"183","locator":"97:34-97:41","name":"ObsVisit","type":"QueryLetRef"}}},{"localId":"188","locator":"97:59-97:87","type":"Start","operand":{"localId":"187","locator":"97:68-97:87","path":"relevantPeriod","scope":"Visit","type":"Property"}}]}},{"localId":"204","locator":"98:4-102:4","identifier":"EDVisit","expression":{"localId":"203","locator":"98:13-102:4","type":"Last","source":{"localId":"202","locator":"98:18-101:26","type":"Query","source":[{"localId":"192","locator":"98:18-98:78","alias":"LastED","expression":{"localId":"191","locator":"98:18-98:71","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"98:43-98:70","name":"Emergency Department Visit","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"197","locator":"99:6-99:76","type":"And","operand":[{"locator":"99:39-99:52","type":"In","operand":[{"locator":"99:34-99:37","type":"End","operand":{"localId":"194","locator":"99:12-99:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"99:39-99:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"99:67-99:76","type":"Subtract","operand":[{"localId":"195","locator":"99:67-99:76","name":"VisitStart","type":"QueryLetRef"},{"localId":"196","locator":"99:39-99:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"195","locator":"99:67-99:76","name":"VisitStart","type":"QueryLetRef"}}]},{"locator":"99:39-99:52","type":"Not","operand":{"locator":"99:39-99:52","type":"IsNull","operand":{"localId":"195","locator":"99:67-99:76","name":"VisitStart","type":"QueryLetRef"}}}]},"sort":{"localId":"201","locator":"100:6-101:26","by":[{"localId":"200","locator":"101:6-101:26","direction":"asc","type":"ByExpression","expression":{"localId":"199","locator":"101:6-101:26","type":"End","operand":{"localId":"198","locator":"101:13-101:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}},{"localId":"210","locator":"103:4-103:74","identifier":"VisitStartWithED","expression":{"localId":"209","locator":"103:22-103:74","type":"Coalesce","operand":[{"localId":"207","locator":"103:31-103:61","type":"Start","operand":{"localId":"206","locator":"103:40-103:61","path":"relevantPeriod","type":"Property","source":{"localId":"205","locator":"103:40-103:46","name":"EDVisit","type":"QueryLetRef"}}},{"localId":"208","locator":"103:64-103:73","name":"VisitStart","type":"QueryLetRef"}]}},{"localId":"224","locator":"104:4-108:4","identifier":"OutpatientSurgeryVisit","expression":{"localId":"223","locator":"104:28-108:4","type":"Last","source":{"localId":"222","locator":"104:33-107:26","type":"Query","source":[{"localId":"212","locator":"104:33-104:100","alias":"LastSurgeryOP","expression":{"localId":"211","locator":"104:33-104:86","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"104:58-104:85","name":"Outpatient Surgery Service","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"217","locator":"105:6-105:89","type":"And","operand":[{"locator":"105:46-105:59","type":"In","operand":[{"locator":"105:41-105:44","type":"End","operand":{"localId":"214","locator":"105:12-105:39","path":"relevantPeriod","scope":"LastSurgeryOP","type":"Property"}},{"locator":"105:46-105:59","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"105:74-105:89","type":"Subtract","operand":[{"localId":"215","locator":"105:74-105:89","name":"VisitStartWithED","type":"QueryLetRef"},{"localId":"216","locator":"105:46-105:51","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"215","locator":"105:74-105:89","name":"VisitStartWithED","type":"QueryLetRef"}}]},{"locator":"105:46-105:59","type":"Not","operand":{"locator":"105:46-105:59","type":"IsNull","operand":{"localId":"215","locator":"105:74-105:89","name":"VisitStartWithED","type":"QueryLetRef"}}}]},"sort":{"localId":"221","locator":"106:6-107:26","by":[{"localId":"220","locator":"107:6-107:26","direction":"asc","type":"ByExpression","expression":{"localId":"219","locator":"107:6-107:26","type":"End","operand":{"localId":"218","locator":"107:13-107:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"234","locator":"109:4-110:31","expression":{"localId":"233","locator":"109:11-110:31","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"229","locator":"109:20-109:93","type":"Coalesce","operand":[{"localId":"227","locator":"109:29-109:74","type":"Start","operand":{"localId":"226","locator":"109:38-109:74","path":"relevantPeriod","type":"Property","source":{"localId":"225","locator":"109:38-109:59","name":"OutpatientSurgeryVisit","type":"QueryLetRef"}}},{"localId":"228","locator":"109:77-109:92","name":"VisitStartWithED","type":"QueryLetRef"}]},"high":{"localId":"232","locator":"110:4-110:30","type":"End","operand":{"localId":"231","locator":"110:11-110:30","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"164","locator":"90:87-90:108","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"289","locator":"113:1-127:31","name":"HospitalizationWithObservation","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"289","s":[{"value":["/*Hospitalization with Observation returns the total interval from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\n","define function ","\"HospitalizationWithObservation\"","(","Encounter"," "]},{"r":"237","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"288","s":[{"r":"288","s":[{"s":[{"r":"239","s":[{"r":"238","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"255","s":[{"value":["ObsVisit",": "]},{"r":"254","s":[{"value":["Last","("]},{"r":"253","s":[{"s":[{"r":"241","s":[{"r":"240","s":[{"r":"240","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Observation Services\""]}]},{"value":["]"]}]}]},{"value":[" ","LastObs"]}]}]},{"value":["\n  \t\t\t"]},{"r":"248","s":[{"value":["where "]},{"r":"248","s":[{"r":"243","s":[{"r":"242","s":[{"value":["LastObs"]}]},{"value":["."]},{"r":"243","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"248","s":[{"value":["ends "]},{"r":"247","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"246","s":[{"value":["start of "]},{"r":"245","s":[{"r":"244","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"245","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"252","s":[{"value":["sort by \n  \t\t\t"]},{"r":"251","s":[{"r":"250","s":[{"value":["end of "]},{"r":"249","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]},{"value":[",\n  \t"]},{"r":"263","s":[{"value":["VisitStart",": "]},{"r":"262","s":[{"value":["Coalesce","("]},{"r":"258","s":[{"value":["start of "]},{"r":"257","s":[{"r":"256","s":[{"value":["ObsVisit"]}]},{"value":["."]},{"r":"257","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"261","s":[{"value":["start of "]},{"r":"260","s":[{"r":"259","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"260","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]}]},{"value":[",\n  \t"]},{"r":"277","s":[{"value":["EDVisit",": "]},{"r":"276","s":[{"value":["Last","("]},{"r":"275","s":[{"s":[{"r":"265","s":[{"r":"264","s":[{"r":"264","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"270","s":[{"value":["where "]},{"r":"270","s":[{"r":"267","s":[{"r":"266","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"267","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"270","s":[{"value":["ends "]},{"r":"269","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"268","s":[{"value":["VisitStart"]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"274","s":[{"value":["sort by \n  \t\t\t"]},{"r":"273","s":[{"r":"272","s":[{"value":["end of "]},{"r":"271","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"287","s":[{"value":["return "]},{"r":"286","s":[{"value":["Interval["]},{"r":"282","s":[{"value":["Coalesce","("]},{"r":"280","s":[{"value":["start of "]},{"r":"279","s":[{"r":"278","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"279","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"281","s":[{"value":["VisitStart"]}]},{"value":[")"]}]},{"value":[", \n  \t"]},{"r":"285","s":[{"value":["end of "]},{"r":"284","s":[{"r":"283","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"284","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["]"]}]}]}]}]}]}}],"expression":{"localId":"288","locator":"114:3-127:31","type":"Query","source":[{"localId":"239","locator":"114:3-114:17","alias":"Visit","expression":{"localId":"238","locator":"114:3-114:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"255","locator":"115:8-119:4","identifier":"ObsVisit","expression":{"localId":"254","locator":"115:18-119:4","type":"Last","source":{"localId":"253","locator":"115:23-118:26","type":"Query","source":[{"localId":"241","locator":"115:23-115:78","alias":"LastObs","expression":{"localId":"240","locator":"115:23-115:70","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"115:48-115:69","name":"Observation Services","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"248","locator":"116:6-116:96","type":"And","operand":[{"locator":"116:40-116:53","type":"In","operand":[{"locator":"116:35-116:38","type":"End","operand":{"localId":"243","locator":"116:12-116:33","path":"relevantPeriod","scope":"LastObs","type":"Property"}},{"locator":"116:40-116:53","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"116:68-116:96","type":"Subtract","operand":[{"localId":"246","locator":"116:68-116:96","type":"Start","operand":{"localId":"245","locator":"116:77-116:96","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"247","locator":"116:40-116:45","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"246","locator":"116:68-116:96","type":"Start","operand":{"localId":"245","locator":"116:77-116:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"116:40-116:53","type":"Not","operand":{"locator":"116:40-116:53","type":"IsNull","operand":{"localId":"246","locator":"116:68-116:96","type":"Start","operand":{"localId":"245","locator":"116:77-116:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"252","locator":"117:6-118:26","by":[{"localId":"251","locator":"118:6-118:26","direction":"asc","type":"ByExpression","expression":{"localId":"250","locator":"118:6-118:26","type":"End","operand":{"localId":"249","locator":"118:13-118:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}},{"localId":"263","locator":"120:4-120:88","identifier":"VisitStart","expression":{"localId":"262","locator":"120:16-120:88","type":"Coalesce","operand":[{"localId":"258","locator":"120:25-120:56","type":"Start","operand":{"localId":"257","locator":"120:34-120:56","path":"relevantPeriod","type":"Property","source":{"localId":"256","locator":"120:34-120:41","name":"ObsVisit","type":"QueryLetRef"}}},{"localId":"261","locator":"120:59-120:87","type":"Start","operand":{"localId":"260","locator":"120:68-120:87","path":"relevantPeriod","scope":"Visit","type":"Property"}}]}},{"localId":"277","locator":"121:4-125:4","identifier":"EDVisit","expression":{"localId":"276","locator":"121:13-125:4","type":"Last","source":{"localId":"275","locator":"121:18-124:26","type":"Query","source":[{"localId":"265","locator":"121:18-121:78","alias":"LastED","expression":{"localId":"264","locator":"121:18-121:71","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"121:43-121:70","name":"Emergency Department Visit","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"270","locator":"122:6-122:76","type":"And","operand":[{"locator":"122:39-122:52","type":"In","operand":[{"locator":"122:34-122:37","type":"End","operand":{"localId":"267","locator":"122:12-122:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"122:39-122:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"122:67-122:76","type":"Subtract","operand":[{"localId":"268","locator":"122:67-122:76","name":"VisitStart","type":"QueryLetRef"},{"localId":"269","locator":"122:39-122:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"268","locator":"122:67-122:76","name":"VisitStart","type":"QueryLetRef"}}]},{"locator":"122:39-122:52","type":"Not","operand":{"locator":"122:39-122:52","type":"IsNull","operand":{"localId":"268","locator":"122:67-122:76","name":"VisitStart","type":"QueryLetRef"}}}]},"sort":{"localId":"274","locator":"123:6-124:26","by":[{"localId":"273","locator":"124:6-124:26","direction":"asc","type":"ByExpression","expression":{"localId":"272","locator":"124:6-124:26","type":"End","operand":{"localId":"271","locator":"124:13-124:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"287","locator":"126:4-127:31","expression":{"localId":"286","locator":"126:11-127:31","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"282","locator":"126:20-126:72","type":"Coalesce","operand":[{"localId":"280","locator":"126:29-126:59","type":"Start","operand":{"localId":"279","locator":"126:38-126:59","path":"relevantPeriod","type":"Property","source":{"localId":"278","locator":"126:38-126:44","name":"EDVisit","type":"QueryLetRef"}}},{"localId":"281","locator":"126:62-126:71","name":"VisitStart","type":"QueryLetRef"}]},"high":{"localId":"285","locator":"127:4-127:30","type":"End","operand":{"localId":"284","locator":"127:11-127:30","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"237","locator":"113:60-113:81","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"294","locator":"130:1-131:61","name":"HospitalizationWithObservationLengthofStay","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"294","s":[{"value":["/*Hospitalization with Observation Length of Stay returns the length in days from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\n","define function ","\"HospitalizationWithObservationLengthofStay\"","(","Encounter"," "]},{"r":"290","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"293","s":[{"r":"293","s":[{"value":["\"LengthInDays\"","("]},{"r":"292","s":[{"value":["\"HospitalizationWithObservation\"","("]},{"r":"291","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"293","locator":"131:3-131:61","name":"LengthInDays","type":"FunctionRef","operand":[{"localId":"292","locator":"131:18-131:60","name":"HospitalizationWithObservation","type":"FunctionRef","operand":[{"localId":"291","locator":"131:51-131:59","name":"Encounter","type":"OperandRef"}]}]},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"290","locator":"130:72-130:93","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"315","locator":"134:1-139:3","name":"FirstInpatientIntensiveCareUnit","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"315","s":[{"value":["/*First Inpatient Intensive Care Unit returns the first intensive care unit for the given encounter, without considering any immediately prior emergency department visit.*/\n","define function ","\"FirstInpatientIntensiveCareUnit\"","(","Encounter"," "]},{"r":"295","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"314","s":[{"r":"314","s":[{"value":["First","("]},{"r":"313","s":[{"s":[{"r":"298","s":[{"r":"297","s":[{"value":["("]},{"r":"297","s":[{"r":"296","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"297","s":[{"value":["facilityLocations"]}]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n      "]},{"r":"308","s":[{"value":["where "]},{"r":"308","s":[{"r":"302","s":[{"r":"300","s":[{"r":"299","s":[{"value":["HospitalLocation"]}]},{"value":["."]},{"r":"300","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"301","s":[{"value":["\"Intensive Care Unit\""]}]}]},{"value":["\n        and "]},{"r":"307","s":[{"r":"304","s":[{"r":"303","s":[{"value":["HospitalLocation"]}]},{"value":["."]},{"r":"304","s":[{"value":["locationPeriod"]}]}]},{"r":"307","value":[" ","during"," "]},{"r":"306","s":[{"r":"305","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"306","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n      "]},{"r":"312","s":[{"value":["sort by "]},{"r":"311","s":[{"r":"310","s":[{"value":["start of "]},{"r":"309","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]}]}]}}],"expression":{"localId":"314","locator":"135:3-139:3","type":"First","source":{"localId":"313","locator":"135:9-138:37","type":"Query","source":[{"localId":"298","locator":"135:9-135:53","alias":"HospitalLocation","expression":{"localId":"297","locator":"135:9-135:37","path":"facilityLocations","type":"Property","source":{"localId":"296","locator":"135:10-135:18","name":"Encounter","type":"OperandRef"}}}],"relationship":[],"where":{"localId":"308","locator":"136:7-137:75","type":"And","operand":[{"localId":"302","locator":"136:13-136:58","type":"InValueSet","code":{"localId":"300","locator":"136:13-136:33","path":"code","scope":"HospitalLocation","type":"Property"},"valueset":{"localId":"301","locator":"136:38-136:58","name":"Intensive Care Unit","preserve":true}},{"localId":"307","locator":"137:13-137:75","type":"IncludedIn","operand":[{"localId":"304","locator":"137:13-137:43","path":"locationPeriod","scope":"HospitalLocation","type":"Property"},{"localId":"306","locator":"137:52-137:75","path":"relevantPeriod","type":"Property","source":{"localId":"305","locator":"137:52-137:60","name":"Encounter","type":"OperandRef"}}]}]},"sort":{"localId":"312","locator":"138:7-138:37","by":[{"localId":"311","locator":"138:15-138:37","direction":"asc","type":"ByExpression","expression":{"localId":"310","locator":"138:15-138:37","type":"Start","operand":{"localId":"309","locator":"138:24-138:37","name":"locationPeriod","type":"IdentifierRef"}}}]}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"295","locator":"134:61-134:82","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"333","locator":"142:1-145:35","name":"NormalizeInterval","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"333","s":[{"value":["/*Given a datetime and a period, returns the period (if a period is provided) or the interval beginning and ending on the datetime (if a datetime is provided)*/\n","define function ","\"NormalizeInterval\"","(","pointInTime"," "]},{"r":"316","s":[{"value":["DateTime"]}]},{"value":[", ","period"," "]},{"r":"318","s":[{"value":["Interval\u003c"]},{"r":"317","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"332","s":[{"r":"332","s":[{"value":["if "]},{"r":"320","s":[{"r":"319","s":[{"value":["pointInTime"]}]},{"value":[" is not null"]}]},{"value":[" then "]},{"r":"323","s":[{"value":["Interval["]},{"r":"321","s":[{"value":["pointInTime"]}]},{"value":[", "]},{"r":"322","s":[{"value":["pointInTime"]}]},{"value":["]"]}]},{"value":["\n    else "]},{"r":"331","s":[{"value":["if "]},{"r":"325","s":[{"r":"324","s":[{"value":["period"]}]},{"value":[" is not null"]}]},{"value":[" then "]},{"r":"326","s":[{"value":["period"]}]},{"value":[" \n    else "]},{"r":"330","s":[{"r":"327","value":["null"," as "]},{"r":"329","s":[{"value":["Interval\u003c"]},{"r":"328","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}]}]}]}]}}],"expression":{"localId":"332","locator":"143:3-145:35","type":"If","condition":{"localId":"320","locator":"143:6-143:28","type":"Not","operand":{"locator":"143:6-143:28","type":"IsNull","operand":{"localId":"319","locator":"143:6-143:16","name":"pointInTime","type":"OperandRef"}}},"then":{"localId":"323","locator":"143:35-143:68","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"321","locator":"143:44-143:54","name":"pointInTime","type":"OperandRef"},"high":{"localId":"322","locator":"143:57-143:67","name":"pointInTime","type":"OperandRef"}},"else":{"localId":"331","locator":"144:10-145:35","type":"If","condition":{"localId":"325","locator":"144:13-144:30","type":"Not","operand":{"locator":"144:13-144:30","type":"IsNull","operand":{"localId":"324","locator":"144:13-144:18","name":"period","type":"OperandRef"}}},"then":{"localId":"326","locator":"144:37-144:42","name":"period","type":"OperandRef"},"else":{"localId":"330","locator":"145:10-145:35","strict":false,"type":"As","operand":{"localId":"327","locator":"145:10-145:13","type":"Null"},"asTypeSpecifier":{"localId":"329","locator":"145:18-145:35","type":"IntervalTypeSpecifier","pointType":{"localId":"328","locator":"145:27-145:34","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}},"operand":[{"name":"pointInTime","operandTypeSpecifier":{"localId":"316","locator":"142:49-142:56","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"name":"period","operandTypeSpecifier":{"localId":"318","locator":"142:66-142:83","type":"IntervalTypeSpecifier","pointType":{"localId":"317","locator":"142:75-142:82","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"346","locator":"148:1-151:3","name":"HasStart","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"346","s":[{"value":["/*Given an interval, return true if the interval has a starting boundary specified (i.e. the start of the interval is not null and not the minimum DateTime value)*/\n","define function ","\"HasStart\"","(","period"," "]},{"r":"335","s":[{"value":["Interval\u003c"]},{"r":"334","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"345","s":[{"r":"345","s":[{"value":["not "]},{"r":"344","s":[{"value":["( "]},{"r":"344","s":[{"r":"338","s":[{"r":"337","s":[{"value":["start of "]},{"r":"336","s":[{"value":["period"]}]}]},{"value":[" is null"]}]},{"value":["\n      or "]},{"r":"343","s":[{"r":"340","s":[{"value":["start of "]},{"r":"339","s":[{"value":["period"]}]}]},{"value":[" ","="," "]},{"r":"342","s":[{"value":["minimum"," "]},{"r":"341","s":[{"value":["DateTime"]}]}]}]}]},{"value":["\n  )"]}]}]}]}]}}],"expression":{"localId":"345","locator":"149:3-151:3","type":"Not","operand":{"localId":"344","locator":"149:7-151:3","type":"Or","operand":[{"localId":"338","locator":"149:9-149:31","type":"IsNull","operand":{"localId":"337","locator":"149:9-149:23","type":"Start","operand":{"localId":"336","locator":"149:18-149:23","name":"period","type":"OperandRef"}}},{"localId":"343","locator":"150:10-150:43","type":"Equal","operand":[{"localId":"340","locator":"150:10-150:24","type":"Start","operand":{"localId":"339","locator":"150:19-150:24","name":"period","type":"OperandRef"}},{"localId":"342","locator":"150:28-150:43","valueType":"{urn:hl7-org:elm-types:r1}DateTime","type":"MinValue"}]}]}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"335","locator":"148:35-148:52","type":"IntervalTypeSpecifier","pointType":{"localId":"334","locator":"148:44-148:51","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"359","locator":"154:1-159:3","name":"HasEnd","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"359","s":[{"value":["/*Given an interval, return true if the interval has an ending boundary specified (i.e. the end of the interval is not null and not the maximum DateTime value)*/\n","define function ","\"HasEnd\"","(","period"," "]},{"r":"348","s":[{"value":["Interval\u003c"]},{"r":"347","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"358","s":[{"r":"358","s":[{"value":["not "]},{"r":"357","s":[{"value":["( \n    "]},{"r":"357","s":[{"r":"351","s":[{"r":"350","s":[{"value":["end of "]},{"r":"349","s":[{"value":["period"]}]}]},{"value":[" is null"]}]},{"value":["\n      or \n      "]},{"r":"356","s":[{"r":"353","s":[{"value":["end of "]},{"r":"352","s":[{"value":["period"]}]}]},{"value":[" ","="," "]},{"r":"355","s":[{"value":["maximum"," "]},{"r":"354","s":[{"value":["DateTime"]}]}]}]}]},{"value":["\n  )"]}]}]}]}]}}],"expression":{"localId":"358","locator":"155:3-159:3","type":"Not","operand":{"localId":"357","locator":"155:7-159:3","type":"Or","operand":[{"localId":"351","locator":"156:5-156:25","type":"IsNull","operand":{"localId":"350","locator":"156:5-156:17","type":"End","operand":{"localId":"349","locator":"156:12-156:17","name":"period","type":"OperandRef"}}},{"localId":"356","locator":"158:7-158:38","type":"Equal","operand":[{"localId":"353","locator":"158:7-158:19","type":"End","operand":{"localId":"352","locator":"158:14-158:19","name":"period","type":"OperandRef"}},{"localId":"355","locator":"158:23-158:38","valueType":"{urn:hl7-org:elm-types:r1}DateTime","type":"MaxValue"}]}]}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"348","locator":"154:33-154:50","type":"IntervalTypeSpecifier","pointType":{"localId":"347","locator":"154:42-154:49","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"369","locator":"162:1-165:24","name":"Latest","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"369","s":[{"value":["/*Given an interval, return the ending point if the interval has an ending boundary specified, otherwise, return the starting point*/\n","define function ","\"Latest\"","(","period"," "]},{"r":"361","s":[{"value":["Interval\u003c"]},{"r":"360","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"368","s":[{"r":"368","s":[{"value":["if "]},{"r":"363","s":[{"value":["( "]},{"r":"363","s":[{"value":["HasEnd","("]},{"r":"362","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":[" then \n  "]},{"r":"365","s":[{"value":["end of "]},{"r":"364","s":[{"value":["period"]}]}]},{"value":[" \n    else "]},{"r":"367","s":[{"value":["start of "]},{"r":"366","s":[{"value":["period"]}]}]}]}]}]}}],"expression":{"localId":"368","locator":"163:3-165:24","type":"If","condition":{"localId":"363","locator":"163:6-163:22","name":"HasEnd","type":"FunctionRef","operand":[{"localId":"362","locator":"163:15-163:20","name":"period","type":"OperandRef"}]},"then":{"localId":"365","locator":"164:3-164:15","type":"End","operand":{"localId":"364","locator":"164:10-164:15","name":"period","type":"OperandRef"}},"else":{"localId":"367","locator":"165:10-165:24","type":"Start","operand":{"localId":"366","locator":"165:19-165:24","name":"period","type":"OperandRef"}}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"361","locator":"162:33-162:50","type":"IntervalTypeSpecifier","pointType":{"localId":"360","locator":"162:42-162:49","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"379","locator":"168:1-171:15","name":"Earliest","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"379","s":[{"value":["/*Given an interval, return the starting point if the interval has a starting boundary specified, otherwise, return the ending point*/\n","define function ","\"Earliest\"","(","period"," "]},{"r":"371","s":[{"value":["Interval\u003c"]},{"r":"370","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"378","s":[{"r":"378","s":[{"value":["if "]},{"r":"373","s":[{"value":["( "]},{"r":"373","s":[{"value":["HasStart","("]},{"r":"372","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":[" then "]},{"r":"375","s":[{"value":["start of "]},{"r":"374","s":[{"value":["period"]}]}]},{"value":[" \n    else \n  "]},{"r":"377","s":[{"value":["end of "]},{"r":"376","s":[{"value":["period"]}]}]}]}]}]}}],"expression":{"localId":"378","locator":"169:3-171:15","type":"If","condition":{"localId":"373","locator":"169:6-169:24","name":"HasStart","type":"FunctionRef","operand":[{"localId":"372","locator":"169:17-169:22","name":"period","type":"OperandRef"}]},"then":{"localId":"375","locator":"169:31-169:45","type":"Start","operand":{"localId":"374","locator":"169:40-169:45","name":"period","type":"OperandRef"}},"else":{"localId":"377","locator":"171:3-171:15","type":"End","operand":{"localId":"376","locator":"171:10-171:15","name":"period","type":"OperandRef"}}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"371","locator":"168:35-168:52","type":"IntervalTypeSpecifier","pointType":{"localId":"370","locator":"168:44-168:51","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"387","locator":"174:1-175:48","name":"LatestOf","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"387","s":[{"value":["/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the ending point of the period if the period has an ending boundary specified, otherwise returns the starting point of the interval*/\n","define function ","\"LatestOf\"","(","pointInTime"," "]},{"r":"380","s":[{"value":["DateTime"]}]},{"value":[", ","period"," "]},{"r":"382","s":[{"value":["Interval\u003c"]},{"r":"381","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"386","s":[{"r":"386","s":[{"value":["Latest","("]},{"r":"385","s":[{"value":["NormalizeInterval","("]},{"r":"383","s":[{"value":["pointInTime"]}]},{"value":[", "]},{"r":"384","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"386","locator":"175:3-175:48","name":"Latest","type":"FunctionRef","operand":[{"localId":"385","locator":"175:10-175:47","name":"NormalizeInterval","type":"FunctionRef","operand":[{"localId":"383","locator":"175:28-175:38","name":"pointInTime","type":"OperandRef"},{"localId":"384","locator":"175:41-175:46","name":"period","type":"OperandRef"}]}]},"operand":[{"name":"pointInTime","operandTypeSpecifier":{"localId":"380","locator":"174:40-174:47","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"name":"period","operandTypeSpecifier":{"localId":"382","locator":"174:57-174:74","type":"IntervalTypeSpecifier","pointType":{"localId":"381","locator":"174:66-174:73","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"395","locator":"178:1-179:50","name":"EarliestOf","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"395","s":[{"value":["/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the starting point of the period if the period has a starting boundary specified, otherwise returns the ending point of the period*/\n","define function ","\"EarliestOf\"","(","pointInTime"," "]},{"r":"388","s":[{"value":["DateTime"]}]},{"value":[", ","period"," "]},{"r":"390","s":[{"value":["Interval\u003c"]},{"r":"389","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"394","s":[{"r":"394","s":[{"value":["Earliest","("]},{"r":"393","s":[{"value":["NormalizeInterval","("]},{"r":"391","s":[{"value":["pointInTime"]}]},{"value":[", "]},{"r":"392","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"394","locator":"179:3-179:50","name":"Earliest","type":"FunctionRef","operand":[{"localId":"393","locator":"179:12-179:49","name":"NormalizeInterval","type":"FunctionRef","operand":[{"localId":"391","locator":"179:30-179:40","name":"pointInTime","type":"OperandRef"},{"localId":"392","locator":"179:43-179:48","name":"period","type":"OperandRef"}]}]},"operand":[{"name":"pointInTime","operandTypeSpecifier":{"localId":"388","locator":"178:42-178:49","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"name":"period","operandTypeSpecifier":{"localId":"390","locator":"178:59-178:76","type":"IntervalTypeSpecifier","pointType":{"localId":"389","locator":"178:68-178:75","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]}]}}},"elm_annotations":{"statements":[{"children":[{"children":[{"children":[{"text":"define \"ED Encounter\":\n  "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"10"}],"ref_id":"11"}],"define_name":"ED Encounter"},{"children":[{"children":[{"children":[{"text":"define \"Inpatient Encounter\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Encounter Inpatient\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"12"}],"node_type":"Retrieve","ref_id":"12"},{"children":[{"text":" EncounterInpatient"}]}],"ref_id":"13"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"EncounterInpatient"}]}],"ref_id":"14"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"15"}],"node_type":"Property","ref_id":"15"},{"children":[{"text":" ends during day of "}],"ref_id":"17"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"16"}],"ref_id":"17"}],"ref_id":"17"}],"node_type":"Query","ref_id":"18"}],"ref_id":"19"}],"define_name":"Inpatient Encounter"},{"children":[{"children":[]},{"children":[]},{"children":[]},{"children":[{"children":[{"text":"/*@description: Returns an interval of date values extracted from the input interval of date-time values\n@comment: This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability.*/\ndefine function \"ToDateInterval\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"20"},{"children":[{"text":"\u003e"}]}],"ref_id":"21"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"22"}],"node_type":"Start","ref_id":"23"}],"ref_id":"24"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"25"}],"node_type":"End","ref_id":"26"}],"ref_id":"27"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"28"}],"node_type":"Interval","ref_id":"28"}],"ref_id":"29"}],"define_name":"ToDateInterval"},{"children":[{"children":[{"children":[{"text":"/*calculates the difference in calendar days between the start and end of the given interval.*/\ndefine function \"LengthInDays\"(Value "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"30"},{"children":[{"text":"\u003e"}]}],"ref_id":"31"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"difference in days between "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"Value"}]}],"node_type":"OperandRef","ref_id":"32"}],"node_type":"Start","ref_id":"33"},{"children":[{"text":" and "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"Value"}]}],"node_type":"OperandRef","ref_id":"34"}],"node_type":"End","ref_id":"35"}],"node_type":"DifferenceBetween","ref_id":"36"}],"node_type":"DifferenceBetween","ref_id":"36"}],"ref_id":"37"}],"define_name":"LengthInDays"},{"children":[{"children":[{"children":[{"text":"/*returns list of all locations within an encounter, including locations for immediately prior ED visit.*/\ndefine function \"HospitalizationLocations\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"38"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"39"},{"children":[{"text":" Visit"}]}],"ref_id":"40"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"41"}],"node_type":"Retrieve","ref_id":"41"},{"children":[{"text":" LastED"}]}],"ref_id":"42"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"43"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"44"}],"node_type":"Property","ref_id":"44"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"48"},{"children":[{"text":" or less on or before"}]}],"ref_id":"49"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"45"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"46"}],"node_type":"Property","ref_id":"46"}],"node_type":"Start","ref_id":"47"}],"ref_id":"49"}],"ref_id":"49"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"50"}],"node_type":"End","ref_id":"51"}],"ref_id":"52"}],"ref_id":"53"}],"ref_id":"54"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"55"}],"ref_id":"56"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"node_type":"QueryLetRef","ref_id":"57"},{"children":[{"text":" is null"}]}],"ref_id":"58"},{"children":[{"text":" then "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"59"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"ref_id":"60"}],"ref_id":"60"},{"children":[{"text":" \n      else "}]},{"children":[{"children":[{"text":"flatten "}]},{"children":[{"children":[{"text":"{ "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"61"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"ref_id":"62"}],"ref_id":"62"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"63"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"ref_id":"64"}],"ref_id":"64"},{"children":[{"text":" }"}]}],"node_type":"List","ref_id":"65"}],"ref_id":"66"}],"node_type":"If","ref_id":"67"}],"ref_id":"68"}],"node_type":"Query","ref_id":"69"}],"node_type":"Query","ref_id":"69"}],"ref_id":"70"}],"define_name":"HospitalizationLocations"},{"children":[{"children":[{"children":[{"text":"/*Returns the arrival time in the ED for the encounter.*/\ndefine function \"EmergencyDepartmentArrivalTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"71"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"\"HospitalizationLocations\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"72"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"73"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"73"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"74"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"HospitalLocation"}]}],"ref_id":"75"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"76"}],"ref_id":"76"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}],"ref_id":"77"}],"ref_id":"78"}],"ref_id":"78"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"79"}],"node_type":"Start","ref_id":"80"}],"ref_id":"81"}],"ref_id":"82"}],"ref_id":"83"},{"children":[{"text":"\n  )"}]}],"ref_id":"84"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"85"}],"node_type":"Property","ref_id":"85"}],"node_type":"Start","ref_id":"86"}],"node_type":"Start","ref_id":"86"}],"ref_id":"87"}],"define_name":"EmergencyDepartmentArrivalTime"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization returns the total interval for admission to discharge for the given encounter, or for the admission of any immediately prior emergency department visit to the discharge of the given encounter.*/\ndefine function \"Hospitalization\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"90"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"91"},{"children":[{"text":" Visit"}]}],"ref_id":"92"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"93"}],"node_type":"Retrieve","ref_id":"93"},{"children":[{"text":" LastED"}]}],"ref_id":"94"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"95"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"96"}],"node_type":"Property","ref_id":"96"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"100"},{"children":[{"text":" or less on or before"}]}],"ref_id":"101"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"97"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"98"}],"node_type":"Property","ref_id":"98"}],"node_type":"Start","ref_id":"99"}],"ref_id":"101"}],"ref_id":"101"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"102"}],"node_type":"End","ref_id":"103"}],"ref_id":"104"}],"ref_id":"105"}],"ref_id":"106"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"107"}],"ref_id":"108"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"109"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"110"}],"node_type":"Property","ref_id":"110"}],"node_type":"Start","ref_id":"111"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"112"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"113"}],"node_type":"Property","ref_id":"113"}],"node_type":"Start","ref_id":"114"},{"children":[{"text":")"}]}],"ref_id":"115"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"116"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"117"}],"node_type":"Property","ref_id":"117"}],"ref_id":"118"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"119"}],"ref_id":"120"}],"node_type":"Query","ref_id":"121"}],"node_type":"Query","ref_id":"121"}],"ref_id":"122"}],"define_name":"Hospitalization"},{"children":[{"children":[{"children":[{"text":"/*Returns admission time for an encounter or for immediately prior emergency department visit.*/\ndefine function \"HospitalAdmissionTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"88"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"\"Hospitalization\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"89"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"123"}],"node_type":"Start","ref_id":"124"}],"node_type":"Start","ref_id":"124"}],"ref_id":"125"}],"define_name":"HospitalAdmissionTime"},{"children":[{"children":[{"children":[{"text":"/*Returns earliest arrival time for an encounter including any prior ED visit.*/\ndefine function \"HospitalArrivalTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"126"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"\"HospitalizationLocations\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"127"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"128"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"128"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"129"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"130"}],"node_type":"Start","ref_id":"131"}],"ref_id":"132"}],"ref_id":"133"}],"ref_id":"134"},{"children":[{"text":"\n  )"}]}],"ref_id":"135"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"136"}],"node_type":"Property","ref_id":"136"}],"node_type":"Start","ref_id":"137"}],"node_type":"Start","ref_id":"137"}],"ref_id":"138"}],"define_name":"HospitalArrivalTime"},{"children":[{"children":[{"children":[{"text":"/*Returns the length of stay in days (i.e. the number of days between admission and discharge) for the given encounter, or from the admission of any immediately prior emergency department visit to the discharge of the encounter*/\ndefine function \"HospitalizationLengthofStay\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"141"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"LengthInDays("}]},{"children":[{"children":[{"text":"\"Hospitalization\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"142"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"143"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"144"}],"node_type":"FunctionRef","ref_id":"144"}],"ref_id":"145"}],"define_name":"HospitalizationLengthofStay"},{"children":[{"children":[{"children":[{"text":"/*Returns the latest departure time for encounter including any prior ED visit.*/\ndefine function \"HospitalDepartureTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"146"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"\"HospitalizationLocations\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"147"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"148"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"148"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"149"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"150"}],"node_type":"Start","ref_id":"151"}],"ref_id":"152"}],"ref_id":"153"}],"ref_id":"154"},{"children":[{"text":"\n  )"}]}],"ref_id":"155"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"156"}],"node_type":"Property","ref_id":"156"}],"node_type":"End","ref_id":"157"}],"node_type":"End","ref_id":"157"}],"ref_id":"158"}],"define_name":"HospitalDepartureTime"},{"children":[{"children":[{"children":[{"text":"/*Hospital Discharge Time returns the discharge time for an encounter*/\ndefine function \"HospitalDischargeTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"159"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"160"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"161"}],"node_type":"Property","ref_id":"161"}],"node_type":"End","ref_id":"162"}],"node_type":"End","ref_id":"162"}],"ref_id":"163"}],"define_name":"HospitalDischargeTime"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization with Observation and Outpatient Surgery Service returns the total interval from the start of any immediately prior emergency department visit, outpatient surgery visit or observation visit to the discharge of the given encounter.*/\ndefine function \"HospitalizationWithObservationAndOutpatientSurgeryService\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"164"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"165"},{"children":[{"text":" Visit"}]}],"ref_id":"166"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"ObsVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Observation Services\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"167"}],"node_type":"Retrieve","ref_id":"167"},{"children":[{"text":" LastObs"}]}],"ref_id":"168"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastObs"}]}],"ref_id":"169"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"170"}],"node_type":"Property","ref_id":"170"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"174"},{"children":[{"text":" or less on or before"}]}],"ref_id":"175"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"171"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"172"}],"node_type":"Property","ref_id":"172"}],"node_type":"Start","ref_id":"173"}],"ref_id":"175"}],"ref_id":"175"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"176"}],"node_type":"End","ref_id":"177"}],"ref_id":"178"}],"ref_id":"179"}],"ref_id":"180"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"181"}],"ref_id":"182"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"VisitStart: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"ObsVisit"}]}],"ref_id":"183"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"184"}],"node_type":"Property","ref_id":"184"}],"node_type":"Start","ref_id":"185"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"186"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"187"}],"node_type":"Property","ref_id":"187"}],"node_type":"Start","ref_id":"188"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"189"}],"ref_id":"190"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"191"}],"node_type":"Retrieve","ref_id":"191"},{"children":[{"text":" LastED"}]}],"ref_id":"192"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"193"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"194"}],"node_type":"Property","ref_id":"194"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"196"},{"children":[{"text":" or less on or before"}]}],"ref_id":"197"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"195"}],"ref_id":"197"}],"ref_id":"197"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"198"}],"node_type":"End","ref_id":"199"}],"ref_id":"200"}],"ref_id":"201"}],"ref_id":"202"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"203"}],"ref_id":"204"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"VisitStartWithED: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"205"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"206"}],"node_type":"Property","ref_id":"206"}],"node_type":"Start","ref_id":"207"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"208"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"209"}],"ref_id":"210"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"OutpatientSurgeryVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Outpatient Surgery Service\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"211"}],"node_type":"Retrieve","ref_id":"211"},{"children":[{"text":" LastSurgeryOP"}]}],"ref_id":"212"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastSurgeryOP"}]}],"ref_id":"213"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"214"}],"node_type":"Property","ref_id":"214"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"216"},{"children":[{"text":" or less on or before"}]}],"ref_id":"217"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"VisitStartWithED"}]}],"node_type":"QueryLetRef","ref_id":"215"}],"ref_id":"217"}],"ref_id":"217"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"218"}],"node_type":"End","ref_id":"219"}],"ref_id":"220"}],"ref_id":"221"}],"ref_id":"222"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"223"}],"ref_id":"224"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"OutpatientSurgeryVisit"}]}],"ref_id":"225"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"226"}],"node_type":"Property","ref_id":"226"}],"node_type":"Start","ref_id":"227"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"VisitStartWithED"}]}],"node_type":"QueryLetRef","ref_id":"228"},{"children":[{"text":")"}]}],"ref_id":"229"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"230"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"231"}],"node_type":"Property","ref_id":"231"}],"ref_id":"232"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"233"}],"ref_id":"234"}],"node_type":"Query","ref_id":"235"}],"node_type":"Query","ref_id":"235"}],"ref_id":"236"}],"define_name":"HospitalizationWithObservationAndOutpatientSurgeryService"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization with Observation returns the total interval from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\ndefine function \"HospitalizationWithObservation\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"237"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"238"},{"children":[{"text":" Visit"}]}],"ref_id":"239"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"ObsVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Observation Services\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"240"}],"node_type":"Retrieve","ref_id":"240"},{"children":[{"text":" LastObs"}]}],"ref_id":"241"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastObs"}]}],"ref_id":"242"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"243"}],"node_type":"Property","ref_id":"243"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"247"},{"children":[{"text":" or less on or before"}]}],"ref_id":"248"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"244"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"245"}],"node_type":"Property","ref_id":"245"}],"node_type":"Start","ref_id":"246"}],"ref_id":"248"}],"ref_id":"248"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"249"}],"node_type":"End","ref_id":"250"}],"ref_id":"251"}],"ref_id":"252"}],"ref_id":"253"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"254"}],"ref_id":"255"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"VisitStart: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"ObsVisit"}]}],"ref_id":"256"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"257"}],"node_type":"Property","ref_id":"257"}],"node_type":"Start","ref_id":"258"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"259"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"260"}],"node_type":"Property","ref_id":"260"}],"node_type":"Start","ref_id":"261"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"262"}],"ref_id":"263"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"264"}],"node_type":"Retrieve","ref_id":"264"},{"children":[{"text":" LastED"}]}],"ref_id":"265"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"266"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"267"}],"node_type":"Property","ref_id":"267"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"269"},{"children":[{"text":" or less on or before"}]}],"ref_id":"270"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"268"}],"ref_id":"270"}],"ref_id":"270"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"271"}],"node_type":"End","ref_id":"272"}],"ref_id":"273"}],"ref_id":"274"}],"ref_id":"275"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"276"}],"ref_id":"277"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"278"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"279"}],"node_type":"Property","ref_id":"279"}],"node_type":"Start","ref_id":"280"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"281"},{"children":[{"text":")"}]}],"ref_id":"282"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"283"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"284"}],"node_type":"Property","ref_id":"284"}],"ref_id":"285"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"286"}],"ref_id":"287"}],"node_type":"Query","ref_id":"288"}],"node_type":"Query","ref_id":"288"}],"ref_id":"289"}],"define_name":"HospitalizationWithObservation"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization with Observation Length of Stay returns the length in days from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\ndefine function \"HospitalizationWithObservationLengthofStay\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"290"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"\"LengthInDays\"("}]},{"children":[{"children":[{"text":"\"HospitalizationWithObservation\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"291"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"292"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"293"}],"node_type":"FunctionRef","ref_id":"293"}],"ref_id":"294"}],"define_name":"HospitalizationWithObservationLengthofStay"},{"children":[{"children":[{"children":[{"text":"/*First Inpatient Intensive Care Unit returns the first intensive care unit for the given encounter, without considering any immediately prior emergency department visit.*/\ndefine function \"FirstInpatientIntensiveCareUnit\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"295"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"296"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"node_type":"Property","ref_id":"297"}],"node_type":"Property","ref_id":"297"},{"children":[{"text":")"}]}],"node_type":"Property","ref_id":"297"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"298"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"HospitalLocation"}]}],"ref_id":"299"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"300"}],"ref_id":"300"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Intensive Care Unit\""}]}],"ref_id":"301"}],"node_type":"InValueSet","ref_id":"302"},{"children":[{"text":"\n        and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"HospitalLocation"}]}],"ref_id":"303"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"304"}],"node_type":"Property","ref_id":"304"},{"children":[{"text":" during "}],"node_type":"IncludedIn","ref_id":"307"},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"305"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"306"}],"node_type":"Property","ref_id":"306"}],"node_type":"IncludedIn","ref_id":"307"}],"ref_id":"308"}],"ref_id":"308"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"309"}],"node_type":"Start","ref_id":"310"}],"ref_id":"311"}],"ref_id":"312"}],"ref_id":"313"},{"children":[{"text":"\n  )"}]}],"node_type":"First","ref_id":"314"}],"node_type":"First","ref_id":"314"}],"ref_id":"315"}],"define_name":"FirstInpatientIntensiveCareUnit"},{"children":[{"children":[{"children":[{"text":"/*Given a datetime and a period, returns the period (if a period is provided) or the interval beginning and ending on the datetime (if a datetime is provided)*/\ndefine function \"NormalizeInterval\"(pointInTime "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"316"},{"children":[{"text":", period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"317"},{"children":[{"text":"\u003e"}]}],"ref_id":"318"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"pointInTime"}]}],"node_type":"OperandRef","ref_id":"319"},{"children":[{"text":" is not null"}]}],"ref_id":"320"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"pointInTime"}]}],"ref_id":"321"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"pointInTime"}]}],"ref_id":"322"},{"children":[{"text":"]"}]}],"ref_id":"323"},{"children":[{"text":"\n    else "}]},{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"324"},{"children":[{"text":" is not null"}]}],"ref_id":"325"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"period"}]}],"ref_id":"326"},{"children":[{"text":" \n    else "}]},{"children":[{"children":[{"text":"null as "}],"node_type":"Null","ref_id":"327"},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"328"},{"children":[{"text":"\u003e"}]}],"ref_id":"329"}],"ref_id":"330"}],"ref_id":"331"}],"node_type":"If","ref_id":"332"}],"node_type":"If","ref_id":"332"}],"ref_id":"333"}],"define_name":"NormalizeInterval"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return true if the interval has a starting boundary specified (i.e. the start of the interval is not null and not the minimum DateTime value)*/\ndefine function \"HasStart\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"334"},{"children":[{"text":"\u003e"}]}],"ref_id":"335"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"not "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"336"}],"node_type":"Start","ref_id":"337"},{"children":[{"text":" is null"}]}],"node_type":"IsNull","ref_id":"338"},{"children":[{"text":"\n      or "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"339"}],"node_type":"Start","ref_id":"340"},{"children":[{"text":" = "}]},{"children":[{"children":[{"text":"minimum "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"341"}],"node_type":"MinValue","ref_id":"342"}],"node_type":"Equal","ref_id":"343"}],"node_type":"Or","ref_id":"344"},{"children":[{"text":"\n  )"}]}],"node_type":"Or","ref_id":"344"}],"node_type":"Not","ref_id":"345"}],"node_type":"Not","ref_id":"345"}],"ref_id":"346"}],"define_name":"HasStart"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return true if the interval has an ending boundary specified (i.e. the end of the interval is not null and not the maximum DateTime value)*/\ndefine function \"HasEnd\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"347"},{"children":[{"text":"\u003e"}]}],"ref_id":"348"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"not "}]},{"children":[{"children":[{"text":"( \n    "}]},{"children":[{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"349"}],"node_type":"End","ref_id":"350"},{"children":[{"text":" is null"}]}],"node_type":"IsNull","ref_id":"351"},{"children":[{"text":"\n      or \n      "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"352"}],"node_type":"End","ref_id":"353"},{"children":[{"text":" = "}]},{"children":[{"children":[{"text":"maximum "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"354"}],"node_type":"MaxValue","ref_id":"355"}],"node_type":"Equal","ref_id":"356"}],"node_type":"Or","ref_id":"357"},{"children":[{"text":"\n  )"}]}],"node_type":"Or","ref_id":"357"}],"node_type":"Not","ref_id":"358"}],"node_type":"Not","ref_id":"358"}],"ref_id":"359"}],"define_name":"HasEnd"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return the ending point if the interval has an ending boundary specified, otherwise, return the starting point*/\ndefine function \"Latest\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"360"},{"children":[{"text":"\u003e"}]}],"ref_id":"361"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"HasEnd("}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"362"},{"children":[{"text":")"}]}],"ref_id":"363"},{"children":[{"text":")"}]}],"ref_id":"363"},{"children":[{"text":" then \n  "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"364"}],"ref_id":"365"},{"children":[{"text":" \n    else "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"366"}],"ref_id":"367"}],"node_type":"If","ref_id":"368"}],"node_type":"If","ref_id":"368"}],"ref_id":"369"}],"define_name":"Latest"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return the starting point if the interval has a starting boundary specified, otherwise, return the ending point*/\ndefine function \"Earliest\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"370"},{"children":[{"text":"\u003e"}]}],"ref_id":"371"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"HasStart("}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"372"},{"children":[{"text":")"}]}],"ref_id":"373"},{"children":[{"text":")"}]}],"ref_id":"373"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"374"}],"ref_id":"375"},{"children":[{"text":" \n    else \n  "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"376"}],"ref_id":"377"}],"node_type":"If","ref_id":"378"}],"node_type":"If","ref_id":"378"}],"ref_id":"379"}],"define_name":"Earliest"},{"children":[{"children":[{"children":[{"text":"/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the ending point of the period if the period has an ending boundary specified, otherwise returns the starting point of the interval*/\ndefine function \"LatestOf\"(pointInTime "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"380"},{"children":[{"text":", period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"381"},{"children":[{"text":"\u003e"}]}],"ref_id":"382"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Latest("}]},{"children":[{"children":[{"text":"NormalizeInterval("}]},{"children":[{"children":[{"text":"pointInTime"}]}],"node_type":"OperandRef","ref_id":"383"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"384"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"385"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"386"}],"node_type":"FunctionRef","ref_id":"386"}],"ref_id":"387"}],"define_name":"LatestOf"},{"children":[{"children":[{"children":[{"text":"/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the starting point of the period if the period has a starting boundary specified, otherwise returns the ending point of the period*/\ndefine function \"EarliestOf\"(pointInTime "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"388"},{"children":[{"text":", period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"389"},{"children":[{"text":"\u003e"}]}],"ref_id":"390"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Earliest("}]},{"children":[{"children":[{"text":"NormalizeInterval("}]},{"children":[{"children":[{"text":"pointInTime"}]}],"node_type":"OperandRef","ref_id":"391"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"392"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"393"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"394"}],"node_type":"FunctionRef","ref_id":"394"}],"ref_id":"395"}],"define_name":"EarliestOf"}],"identifier":{"id":"MATGlobalCommonFunctionsQDM","version":"8.0.000"}},"is_main_library":false,"is_top_level":true,"library_name":"MATGlobalCommonFunctionsQDM","library_version":"8.0.000","statement_dependencies":[{"_id":"68923bc9a83e15671c2cc580","statement_name":"NormalizeInterval"}]}],"created_at":null,"description":"Percentage of patients aged 18 years and older with a diagnosis of heart failure (HF) with a current or prior left ventricular ejection fraction (LVEF) \u003c=40% who were prescribed or already taking ACE inhibitor or ARB or ARNI therapy during the measurement period","hqmf_id":"8A6D0454-8DF0-2D9F-018E-38A211A320A6","hqmf_set_id":"430FFC53-4122-4421-88CC-2EDD8117BB3C","hqmf_version_number":"13.4.000","main_cql_library":"HFACEIorARBorARNIforLVSD","measure_attributes":[{"code":"OTH","value":"135","name":"eCQM Identifier (Measure Authoring Tool)","code_obj":{"type":"CD","null_flavor":"OTH","original_text":"eCQM Identifier (Measure Authoring Tool)"},"value_obj":{"type":"ED","value":"135","media_type":"text/plain"}},{"code":"OTH","value":"0081e","name":"CBE Number","code_obj":{"type":"CD","null_flavor":"OTH","original_text":"CBE Number"},"value_obj":{"type":"ED","value":"0081e","media_type":"text/plain"}},{"code":"COPY","value":"Copyright 2024 American College of Cardiology and American Heart Association. All Rights Reserved.","name":"Copyright","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"COPY","title":"Copyright"},"value_obj":{"type":"ED","value":"Copyright 2024 American College of Cardiology and American Heart Association. All Rights Reserved.","media_type":"text/plain"}},{"code":"DISC","value":"The Measure is not a clinical guideline, does not establish a standard of medical care, and has not been tested for all potential applications. \n\nThe Measure, while copyrighted, can be reproduced and distributed, without modification, for noncommercial purposes, e.g., use by health care providers in connection with their practices. Commercial use is defined as the sale, license, or distribution of the Measure for commercial gain, or incorporation of the Measure into a product or service that is sold, licensed or distributed for commercial gain.\n \nCommercial uses of the Measure require a license agreement between the user and the American College of Cardiology (ACC) or the American Heart Association (AHA). Neither the ACC, nor AHA, nor their members shall be responsible for any use of the Measure.\n\nACC and AHA encourage use of the Measure by other health care professionals, where appropriate.\n\nTHE MEASURE AND SPECIFICATIONS ARE PROVIDED \"AS IS\" WITHOUT WARRANTY OF ANY KIND.\n\nLimited proprietary coding is contained in the Measure specifications for convenience. Users of the proprietary code sets should obtain all necessary licenses from the owners of these code sets. The ACC and AHA and their members disclaim all liability for use or accuracy of any Current Procedural Terminology (CPT[R]) or other coding contained in the specifications.\n\nCPT(R) contained in the Measure specifications is copyright 2004-2023 American Medical Association. LOINC(R) is copyright 2004-2023 Regenstrief Institute, Inc. This material contains SNOMED Clinical Terms(R) (SNOMED CT[R]) copyright 2004-2023 International Health Terminology Standards Development Organisation. ICD-10 is copyright 2023 World Health Organization. All Rights Reserved.\n\nThe American Medical Association’s and the PCPI(R) Foundation’s significant past efforts and contributions to the performance measure are gratefully acknowledged.\n\nDue to technical limitations, registered trademarks are indicated by (R) or [R].","name":"Disclaimer","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DISC","title":"Disclaimer"},"value_obj":{"type":"ED","value":"The Measure is not a clinical guideline, does not establish a standard of medical care, and has not been tested for all potential applications. \n\nThe Measure, while copyrighted, can be reproduced and distributed, without modification, for noncommercial purposes, e.g., use by health care providers in connection with their practices. Commercial use is defined as the sale, license, or distribution of the Measure for commercial gain, or incorporation of the Measure into a product or service that is sold, licensed or distributed for commercial gain.\n \nCommercial uses of the Measure require a license agreement between the user and the American College of Cardiology (ACC) or the American Heart Association (AHA). Neither the ACC, nor AHA, nor their members shall be responsible for any use of the Measure.\n\nACC and AHA encourage use of the Measure by other health care professionals, where appropriate.\n\nTHE MEASURE AND SPECIFICATIONS ARE PROVIDED \"AS IS\" WITHOUT WARRANTY OF ANY KIND.\n\nLimited proprietary coding is contained in the Measure specifications for convenience. Users of the proprietary code sets should obtain all necessary licenses from the owners of these code sets. The ACC and AHA and their members disclaim all liability for use or accuracy of any Current Procedural Terminology (CPT[R]) or other coding contained in the specifications.\n\nCPT(R) contained in the Measure specifications is copyright 2004-2023 American Medical Association. LOINC(R) is copyright 2004-2023 Regenstrief Institute, Inc. This material contains SNOMED Clinical Terms(R) (SNOMED CT[R]) copyright 2004-2023 International Health Terminology Standards Development Organisation. ICD-10 is copyright 2023 World Health Organization. All Rights Reserved.\n\nThe American Medical Association’s and the PCPI(R) Foundation’s significant past efforts and contributions to the performance measure are gratefully acknowledged.\n\nDue to technical limitations, registered trademarks are indicated by (R) or [R].","media_type":"text/plain"}},{"code":"MSRSCORE","name":"Measure Scoring","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRSCORE","title":"Measure Scoring"},"value_obj":{"type":"CD","system":"2.16.840.1.113883.5.1063","code":"PROPOR","title":"Proportion"}},{"code":"MSRTYPE","name":"Measure Type","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRTYPE","title":"Measure Type"},"value_obj":{"type":"CD","system":"2.16.840.1.113883.5.1063","code":"PROCESS","title":"PROCESS"}},{"code":"STRAT","value":"None","name":"Stratification","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"STRAT","title":"Stratification"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"MSRADJ","value":"None","name":"Risk Adjustment","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRADJ","title":"Risk Adjustment"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"MSRAGG","value":"None","name":"Rate Aggregation","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRAGG","title":"Rate Aggregation"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"RAT","value":"Use of ACE inhibitor, ARB, or ARNI therapy has been associated with improved outcomes in patients with reduced LVEF. Long-term therapy with ARBs have also been shown to reduce morbidity and mortality, especially in ACE inhibitor–intolerant patients. More recently, ARNI therapy has also been shown to more significantly improve outcomes, such that the newest guidelines recommend replacement of ACE inhibitors or ARBs with ARNI therapy in eligible patients. However, despite the benefits of these drugs, use of ACE inhibitor, ARB, or ARNI remains suboptimal.","name":"Rationale","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"RAT","title":"Rationale"},"value_obj":{"type":"ED","value":"Use of ACE inhibitor, ARB, or ARNI therapy has been associated with improved outcomes in patients with reduced LVEF. Long-term therapy with ARBs have also been shown to reduce morbidity and mortality, especially in ACE inhibitor–intolerant patients. More recently, ARNI therapy has also been shown to more significantly improve outcomes, such that the newest guidelines recommend replacement of ACE inhibitors or ARBs with ARNI therapy in eligible patients. However, despite the benefits of these drugs, use of ACE inhibitor, ARB, or ARNI remains suboptimal.","media_type":"text/plain"}},{"code":"CRS","value":"In patients with Heart Failure with Reduced Ejection Fraction (HFrEF) and New York Heart Association (NYHA) class II to III symptoms, the use of ARNI is recommended to reduce morbidity and mortality (Class I, Level of Evidence A) (Heidenreich et al., 2022). \n\nIn patients with previous or current symptoms of chronic HFrEF, the use of angiotension-converting enzyme inhibitors (ACEi) is beneficial to reduce morbidity and mortality when the use of ARNI is not feasible (Class I, Level of Evidence A) (Heidenreich et al., 2022). \n\nIn patients with previous or current symptoms of chronic HFrEF who are intolerant to ACEi because of cough or angioedema and when the use of ARNI is not feasible, the use of ARB is recommended to reduce morbidity and mortality. (Class I, Level of Evidence A) (Heidenreich et al., 2022). \n\nIn patients with chronic symptomatic HFrEF NYHA class II or III who tolerate an ACEi or ARB, replacement by an ARNI is recommended to further reduce morbidity and mortality (Class I, Level of Evidence B-R) (Heidenreich et al., 2022). \n\nARNI should not be administered concomitantly with ACEi or within 36 hours of the last dose of an ACEi (Class II: Harm, Level of Evidence B-R) (Heidenreich et al., 2022). \n\nARNI should not be administered to patients with any history of angioedema (Class III: Harm, Level of Evidence C-LD) (Heidenreich et al., 2022). \n\nACEi should not be administered to patients with any history of angioedema (Class III: Harm, Level of Evidence C-LD) (Heidenreich et al., 2022).\n\nDrugs Commonly Used for Stage C HFrEF (abbreviated to align with focus of measure to include only ACE inhibitors, ARB and ARNI therapy)\n\nDrug                       Initial Daily Dose(s)                     Target Dose(s)               Mean Doses Achieved in \n                                                                                                                        Clinical Trials\nACEi \n   Captopril            6.25 mg 3 times                           50 mg 3 times               122.7 mg total daily\n   Enalapril             2.5 mg twice                                10 to 20 mg twice          16.6 mg total daily\n   Fosinopril            5 to 10 mg once                           40 mg once                   N/A\n   Lisinopril             2.5 to 5 mg once                          20 to 40 mg once           32.5 to 35.0 mg total daily\n   Perindopril          2 mg once                                    8 to 16 mg once             N/A\n   Quinapril             5 mg twice                                   20 mg twice                   N/A\n   Ramipril              1.25 to 2.5 mg once                      10 mg once                   N/A\n   Trandolapril          1 mg once                                    4 mg once                    N/A\nARB\n   Candesartan       4 to 8 mg once                               32 mg once                   24 mg total daily\n   Losartan             25 to 50 mg once                           50 to 150 mg once         129 mg total daily\n   Valsartan            20 to 40 mg twice                          160 mg twice                 254 mg total daily\nARNI\n   Sacubitril-           49/51 mg twice                               97/103 mg twice           182/193 mg \n   valsartan             (sacubitril/valsartan)                         (sacubitril/valsartan)      (sacubitril/valsartan) total\n                             (therapy may be initiated                                                     daily\n                               at 24/26 mg twice)","name":"Clinical Recommendation Statement","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"CRS","title":"Clinical Recommendation Statement"},"value_obj":{"type":"ED","value":"In patients with Heart Failure with Reduced Ejection Fraction (HFrEF) and New York Heart Association (NYHA) class II to III symptoms, the use of ARNI is recommended to reduce morbidity and mortality (Class I, Level of Evidence A) (Heidenreich et al., 2022). \n\nIn patients with previous or current symptoms of chronic HFrEF, the use of angiotension-converting enzyme inhibitors (ACEi) is beneficial to reduce morbidity and mortality when the use of ARNI is not feasible (Class I, Level of Evidence A) (Heidenreich et al., 2022). \n\nIn patients with previous or current symptoms of chronic HFrEF who are intolerant to ACEi because of cough or angioedema and when the use of ARNI is not feasible, the use of ARB is recommended to reduce morbidity and mortality. (Class I, Level of Evidence A) (Heidenreich et al., 2022). \n\nIn patients with chronic symptomatic HFrEF NYHA class II or III who tolerate an ACEi or ARB, replacement by an ARNI is recommended to further reduce morbidity and mortality (Class I, Level of Evidence B-R) (Heidenreich et al., 2022). \n\nARNI should not be administered concomitantly with ACEi or within 36 hours of the last dose of an ACEi (Class II: Harm, Level of Evidence B-R) (Heidenreich et al., 2022). \n\nARNI should not be administered to patients with any history of angioedema (Class III: Harm, Level of Evidence C-LD) (Heidenreich et al., 2022). \n\nACEi should not be administered to patients with any history of angioedema (Class III: Harm, Level of Evidence C-LD) (Heidenreich et al., 2022).\n\nDrugs Commonly Used for Stage C HFrEF (abbreviated to align with focus of measure to include only ACE inhibitors, ARB and ARNI therapy)\n\nDrug                       Initial Daily Dose(s)                     Target Dose(s)               Mean Doses Achieved in \n                                                                                                                        Clinical Trials\nACEi \n   Captopril            6.25 mg 3 times                           50 mg 3 times               122.7 mg total daily\n   Enalapril             2.5 mg twice                                10 to 20 mg twice          16.6 mg total daily\n   Fosinopril            5 to 10 mg once                           40 mg once                   N/A\n   Lisinopril             2.5 to 5 mg once                          20 to 40 mg once           32.5 to 35.0 mg total daily\n   Perindopril          2 mg once                                    8 to 16 mg once             N/A\n   Quinapril             5 mg twice                                   20 mg twice                   N/A\n   Ramipril              1.25 to 2.5 mg once                      10 mg once                   N/A\n   Trandolapril          1 mg once                                    4 mg once                    N/A\nARB\n   Candesartan       4 to 8 mg once                               32 mg once                   24 mg total daily\n   Losartan             25 to 50 mg once                           50 to 150 mg once         129 mg total daily\n   Valsartan            20 to 40 mg twice                          160 mg twice                 254 mg total daily\nARNI\n   Sacubitril-           49/51 mg twice                               97/103 mg twice           182/193 mg \n   valsartan             (sacubitril/valsartan)                         (sacubitril/valsartan)      (sacubitril/valsartan) total\n                             (therapy may be initiated                                                     daily\n                               at 24/26 mg twice)","media_type":"text/plain"}},{"code":"IDUR","value":"Higher score indicates better quality","name":"Improvement Notation","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"IDUR","title":"Improvement Notation"},"value_obj":{"type":"ED","value":"Higher score indicates better quality","media_type":"text/plain"}},{"code":"REF","value":"CITATIONHeidenreich, P.A., Bozkurt, B, Aguilar, D., ... Allen, L. A. (2022). 2022 AHA/ACC/HFSA Guideline for the Management of Heart Failure A report of the American College of Cardiology/American Heart Association Joint Committee on Clinical Practice Guidelines. Circulation, 145(18), e895-e1032. doi: 10.1161/CIR.0000000000001063","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONHeidenreich, P.A., Bozkurt, B, Aguilar, D., ... Allen, L. A. (2022). 2022 AHA/ACC/HFSA Guideline for the Management of Heart Failure A report of the American College of Cardiology/American Heart Association Joint Committee on Clinical Practice Guidelines. Circulation, 145(18), e895-e1032. doi: 10.1161/CIR.0000000000001063","media_type":"text/plain"}},{"code":"DEF","value":"Prescribed - prescription given to the patient for ACE inhibitor or ARB or ARNI therapy at one or more visits in the measurement period OR patient already taking ACE inhibitor or ARB or ARNI therapy as documented in current medication list.\n\nLVEF \u003c=40% corresponds to qualitative documentation of moderate dysfunction or severe dysfunction (LVSD). The LVSD may be determined by quantitative or qualitative assessment, which may be current or historical. Examples of a quantitative or qualitative assessment may include an echocardiogram:\n1) that provides a numerical value of LVSD or 2) that uses descriptive terms such as moderately or severely depressed left ventricular systolic function. Any current or prior ejection fraction study documenting LVSD can be used to identify patients.","name":"Definition","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DEF","title":"Definition"},"value_obj":{"type":"ED","value":"Prescribed - prescription given to the patient for ACE inhibitor or ARB or ARNI therapy at one or more visits in the measurement period OR patient already taking ACE inhibitor or ARB or ARNI therapy as documented in current medication list.\n\nLVEF \u003c=40% corresponds to qualitative documentation of moderate dysfunction or severe dysfunction (LVSD). The LVSD may be determined by quantitative or qualitative assessment, which may be current or historical. Examples of a quantitative or qualitative assessment may include an echocardiogram:\n1) that provides a numerical value of LVSD or 2) that uses descriptive terms such as moderately or severely depressed left ventricular systolic function. Any current or prior ejection fraction study documenting LVSD can be used to identify patients.","media_type":"text/plain"}},{"code":"GUIDE","value":"This eCQM is to be reported as patient-based. To satisfy this measure, it must be reported for all heart failure patients at least once during the measurement period. \n\nThe requirement of two or more visits is used to establish that the eligible clinician has an existing relationship with the patient. \n\nA range value should satisfy the logic requirement for 'Ejection Fraction' as long as the ranged observation value clearly meets the less than or equal to 40% threshold noted in the denominator logic. A range that is greater than 40% would not meet the measure requirement. \n\nIn order for the Ejection Fraction result pathway to be recognized as below 40%, the result must be reported as a number with unit of %. A text string of \"below 40%\" or \"ejection fraction between 35 and 40%\" will not be recognized through electronic data capture. Although, this criteria can also be met using the Diagnosis pathway if specified as \"Moderate or Severe.\"\n\nEligible clinicians who have given a prescription for or whose patient is already taking an Angiotensin-Converting Enzyme Inhibitor (ACEI) or Angiotensin Receptor Blocker (ARB) would meet performance for this measure. Other combination therapies that consist of an ACEI plus diuretic, ARB + neprilysin inhibitor (ARNI), ARB plus diuretic, ACEI plus calcium channel blocker, ARB plus calcium channel blocker, or ARB plus calcium channel blocker plus diuretic would also meet performance for this measure.\n\nThis version of the eCQM uses QDM version 5.6. Please refer to the eCQI resource center (https://ecqi.healthit.gov/qdm) for more information on the QDM.","name":"Guidance","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"GUIDE","title":"Guidance"},"value_obj":{"type":"ED","value":"This eCQM is to be reported as patient-based. To satisfy this measure, it must be reported for all heart failure patients at least once during the measurement period. \n\nThe requirement of two or more visits is used to establish that the eligible clinician has an existing relationship with the patient. \n\nA range value should satisfy the logic requirement for 'Ejection Fraction' as long as the ranged observation value clearly meets the less than or equal to 40% threshold noted in the denominator logic. A range that is greater than 40% would not meet the measure requirement. \n\nIn order for the Ejection Fraction result pathway to be recognized as below 40%, the result must be reported as a number with unit of %. A text string of \"below 40%\" or \"ejection fraction between 35 and 40%\" will not be recognized through electronic data capture. Although, this criteria can also be met using the Diagnosis pathway if specified as \"Moderate or Severe.\"\n\nEligible clinicians who have given a prescription for or whose patient is already taking an Angiotensin-Converting Enzyme Inhibitor (ACEI) or Angiotensin Receptor Blocker (ARB) would meet performance for this measure. Other combination therapies that consist of an ACEI plus diuretic, ARB + neprilysin inhibitor (ARNI), ARB plus diuretic, ACEI plus calcium channel blocker, ARB plus calcium channel blocker, or ARB plus calcium channel blocker plus diuretic would also meet performance for this measure.\n\nThis version of the eCQM uses QDM version 5.6. Please refer to the eCQI resource center (https://ecqi.healthit.gov/qdm) for more information on the QDM.","media_type":"text/plain"}},{"code":"TRANF","value":"TBD","name":"Transmission Format","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"TRANF","title":"Transmission Format"},"value_obj":{"type":"ED","value":"TBD","media_type":"text/plain"}},{"code":"IPOP","value":"All patients aged 18 years and older with two qualifying encounters during the measurement period and a diagnosis of heart failure on or before at least one qualifying encounter","name":"Initial Population","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"IPOP","title":"Initial Population"},"value_obj":{"type":"ED","value":"All patients aged 18 years and older with two qualifying encounters during the measurement period and a diagnosis of heart failure on or before at least one qualifying encounter","media_type":"text/plain"}},{"code":"DENOM","value":"Equals Initial Population with a current or prior LVEF \u003c= 40%","name":"Denominator","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DENOM","title":"Denominator"},"value_obj":{"type":"ED","value":"Equals Initial Population with a current or prior LVEF \u003c= 40%","media_type":"text/plain"}},{"code":"DENEX","value":"Patients with a history of heart transplant or with a Left Ventricular Assist Device (LVAD) prior to the end of the outpatient encounter with Moderate or Severe LVSD","name":"Denominator Exclusions","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DENEX","title":"Denominator Exclusions"},"value_obj":{"type":"ED","value":"Patients with a history of heart transplant or with a Left Ventricular Assist Device (LVAD) prior to the end of the outpatient encounter with Moderate or Severe LVSD","media_type":"text/plain"}},{"code":"NUMER","value":"Patients who were prescribed or already taking ACE inhibitor or ARB or ARNI therapy during the measurement period","name":"Numerator","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"NUMER","title":"Numerator"},"value_obj":{"type":"ED","value":"Patients who were prescribed or already taking ACE inhibitor or ARB or ARNI therapy during the measurement period","media_type":"text/plain"}},{"code":"NUMEX","value":"Not Applicable","name":"Numerator Exclusions","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"NUMEX","title":"Numerator Exclusions"},"value_obj":{"type":"ED","value":"Not Applicable","media_type":"text/plain"}},{"code":"DENEXCEP","value":"Documentation of medical reason(s) for not prescribing ACE inhibitor or ARB or ARNI therapy (e.g., pregnancy, renal failure due to ACEI, allergy, intolerance, other medical reasons).\n\nDocumentation of patient reason(s) for not prescribing ACE inhibitor or ARB or ARNI therapy (e.g., patient declined, other patient reasons).","name":"Denominator Exceptions","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DENEXCEP","title":"Denominator Exceptions"},"value_obj":{"type":"ED","value":"Documentation of medical reason(s) for not prescribing ACE inhibitor or ARB or ARNI therapy (e.g., pregnancy, renal failure due to ACEI, allergy, intolerance, other medical reasons).\n\nDocumentation of patient reason(s) for not prescribing ACE inhibitor or ARB or ARNI therapy (e.g., patient declined, other patient reasons).","media_type":"text/plain"}},{"code":"SDE","value":"For every patient evaluated by this measure also identify payer, race, ethnicity and sex","name":"Supplemental Data Elements","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"SDE","title":"Supplemental Data Elements"},"value_obj":{"type":"ED","value":"For every patient evaluated by this measure also identify payer, race, ethnicity and sex","media_type":"text/plain"}}],"measure_period":{"type":"IVL_TS","low":{"type":"TS","value":"201201010000","inclusive?":true,"derived?":false},"high":{"type":"TS","value":"201212312359","inclusive?":true,"derived?":false},"width":{"type":"PQ","unit":"a","value":"1","inclusive?":true,"derived?":false}},"measure_scoring":"PROPORTION","population_criteria":{"IPP":{"conjunction?":true,"type":"IPP","hqmf_id":"387A9670-3826-437F-99C6-436D51ECA38B","preconditions":[{"id":2,"preconditions":[{"id":1,"reference":"HFACEIorARBorARNIforLVSD__Initial_Population__AB8E29E5_1289_423B_A7B5_A51EACF8CB07"}],"conjunction_code":"allTrue"}]},"DENOM":{"conjunction?":true,"type":"DENOM","hqmf_id":"7F599BDC-FDC8-4139-BE0C-9DE81B1FA01B","preconditions":[{"id":4,"preconditions":[{"id":3,"reference":"HFACEIorARBorARNIforLVSD__Denominator__AB8E29E5_1289_423B_A7B5_A51EACF8CB07"}],"conjunction_code":"allTrue"}]},"NUMER":{"conjunction?":true,"type":"NUMER","hqmf_id":"19BD56A6-3838-4888-9780-1B284DFE6C45","preconditions":[{"id":6,"preconditions":[{"id":5,"reference":"HFACEIorARBorARNIforLVSD__Numerator__AB8E29E5_1289_423B_A7B5_A51EACF8CB07"}],"conjunction_code":"allTrue"}]},"DENEXCEP":{"conjunction?":true,"type":"DENEXCEP","hqmf_id":"D3887622-BD0C-4965-B2E4-3C58A3F2550F","preconditions":[{"id":8,"preconditions":[{"id":7,"reference":"HFACEIorARBorARNIforLVSD__Denominator_Exceptions__AB8E29E5_1289_423B_A7B5_A51EACF8CB07"}],"conjunction_code":"atLeastOneTrue"}]},"DENEX":{"conjunction?":true,"type":"DENEX","hqmf_id":"F2B96014-C3D2-4F0B-BA16-8B93747A04E8","preconditions":[{"id":10,"preconditions":[{"id":9,"reference":"HFACEIorARBorARNIforLVSD__Denominator_Exclusions__AB8E29E5_1289_423B_A7B5_A51EACF8CB07"}],"conjunction_code":"atLeastOneTrue"}]}},"population_sets":[{"_id":"68923bc9a83e15671c2cc581","population_set_id":"PopulationSet_1","populations":{"DENEX":{"_id":"68923bc9a83e15671c2cc582","hqmf_id":"F2B96014-C3D2-4F0B-BA16-8B93747A04E8","library_name":"HFACEIorARBorARNIforLVSD","statement_name":"Denominator Exclusions"},"DENEXCEP":{"_id":"68923bc9a83e15671c2cc583","hqmf_id":"D3887622-BD0C-4965-B2E4-3C58A3F2550F","library_name":"HFACEIorARBorARNIforLVSD","statement_name":"Denominator Exceptions"},"DENOM":{"_id":"68923bc9a83e15671c2cc584","hqmf_id":"7F599BDC-FDC8-4139-BE0C-9DE81B1FA01B","library_name":"HFACEIorARBorARNIforLVSD","statement_name":"Denominator"},"IPP":{"_id":"68923bc9a83e15671c2cc585","hqmf_id":"387A9670-3826-437F-99C6-436D51ECA38B","library_name":"HFACEIorARBorARNIforLVSD","statement_name":"Initial Population"},"NUMER":{"_id":"68923bc9a83e15671c2cc586","hqmf_id":"19BD56A6-3838-4888-9780-1B284DFE6C45","library_name":"HFACEIorARBorARNIforLVSD","statement_name":"Numerator"},"_id":"68923bc9a83e15671c2cc587","_type":"CQM::ProportionPopulationMap"},"supplemental_data_elements":[{"_id":"68923bbaa83e15671c2cba86","hqmf_id":"9AADBF33-BB08-4B7B-AB34-08470BE2CF1D","library_name":"HFACEIorARBorARNIforLVSD","statement_name":"SDE Ethnicity"},{"_id":"68923bbaa83e15671c2cba87","hqmf_id":"41009B53-2DE1-4BCA-A3B3-8BED673E3656","library_name":"HFACEIorARBorARNIforLVSD","statement_name":"SDE Payer"},{"_id":"68923bbaa83e15671c2cba88","hqmf_id":"080D2CB0-CD9B-40AE-AE74-26C25D87B8ED","library_name":"HFACEIorARBorARNIforLVSD","statement_name":"SDE Race"},{"_id":"68923bbaa83e15671c2cba89","hqmf_id":"2405B690-4C10-482D-A4B7-C28271F6C5E3","library_name":"HFACEIorARBorARNIforLVSD","statement_name":"SDE Sex"}],"title":"Population Criteria Section"}],"source_data_criteria":[{"_id":"68923bbaa83e15671c2cbac3","_type":"QDM::Diagnosis","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"2.16.840.1.113883.3.526.3.1212","dataElementCodes":[],"description":"Diagnosis: IntolerancetoACEInhibitororARB","hqmfOid":"2.16.840.1.113883.10.20.28.4.110","id":"68923bbaa83e15671c2cbac3","prevalencePeriod":null,"qdmCategory":"condition","qdmTitle":"Diagnosis","qdmVersion":"5.6","qrdaOid":"2.16.840.1.113883.10.20.24.3.135","severity":null},{"_id":"68923bc9a83e15671c2cc588","_type":"QDM::PatientCharacteristicSex","codeListId":"2.16.840.1.113762.1.4.1","dataElementCodes":[],"description":"Patient Characteristic Sex: ONCAdministrativeSex","hqmfOid":"2.16.840.1.113883.10.20.28.4.55","id":"68923bc9a83e15671c2cc588","qdmCategory":"patient_characteristic","qdmStatus":"gender","qdmTitle":"Patient Characteristic Sex","qdmVersion":"5.6"},{"_id":"68923bbaa83e15671c2cbac4","_type":"QDM::Diagnosis","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"2.16.840.1.113762.1.4.1178.56","dataElementCodes":[],"description":"Diagnosis: HeartTransplantComplications","hqmfOid":"2.16.840.1.113883.10.20.28.4.110","id":"68923bbaa83e15671c2cbac4","prevalencePeriod":null,"qdmCategory":"condition","qdmTitle":"Diagnosis","qdmVersion":"5.6","qrdaOid":"2.16.840.1.113883.10.20.24.3.135","severity":null},{"_id":"68923bbaa83e15671c2cbac5","_type":"QDM::Diagnosis","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"2.16.840.1.113883.3.526.3.1090","dataElementCodes":[],"description":"Diagnosis: ModerateorSevereLVSD","hqmfOid":"2.16.840.1.113883.10.20.28.4.110","id":"68923bbaa83e15671c2cbac5","prevalencePeriod":null,"qdmCategory":"condition","qdmTitle":"Diagnosis","qdmVersion":"5.6","qrdaOid":"2.16.840.1.113883.10.20.24.3.135","severity":null},{"_id":"68923bbaa83e15671c2cbacd","_type":"QDM::ProcedurePerformed","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"2.16.840.1.113762.1.4.1178.61","components":null,"dataElementCodes":[],"description":"Procedure, Performed: LeftVentricularAssistDevicePlacement","hqmfOid":"2.16.840.1.113883.10.20.28.4.67","id":"68923bbaa83e15671c2cbacd","incisionDatetime":null,"method":null,"negationRationale":null,"qdmCategory":"procedure","qdmStatus":"performed","qdmTitle":"Procedure, Performed","qdmVersion":"5.6","rank":null,"reason":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null,"status":null},{"_id":"68923bbaa83e15671c2cbac7","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.464.1003.101.12.1014","dataElementCodes":[],"description":"Encounter, Performed: CareServicesinLongTermResidentialFacility","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"68923bbaa83e15671c2cbac7","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"68923bbaa83e15671c2cbac6","_type":"QDM::Diagnosis","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"2.16.840.1.113883.3.526.3.1211","dataElementCodes":[],"description":"Diagnosis: AllergytoACEInhibitororARB","hqmfOid":"2.16.840.1.113883.10.20.28.4.110","id":"68923bbaa83e15671c2cbac6","prevalencePeriod":null,"qdmCategory":"condition","qdmTitle":"Diagnosis","qdmVersion":"5.6","qrdaOid":"2.16.840.1.113883.10.20.24.3.135","severity":null},{"_id":"68923bbaa83e15671c2cbad3","_type":"QDM::AllergyIntolerance","authorDatetime":null,"codeListId":"2.16.840.1.113883.3.526.3.1489","dataElementCodes":[],"description":"Allergy/Intolerance: ACEInhibitororARBorARNIIngredient","hqmfOid":"2.16.840.1.113883.10.20.28.4.119","id":"68923bbaa83e15671c2cbad3","prevalencePeriod":null,"qdmCategory":"allergy","qdmStatus":"intolerance","qdmTitle":"Allergy/Intolerance","qdmVersion":"5.6","severity":null,"type":null},{"_id":"68923bbaa83e15671c2cbac8","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.464.1003.101.12.1012","dataElementCodes":[],"description":"Encounter, Performed: NursingFacilityVisit","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"68923bbaa83e15671c2cbac8","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"68923bbaa83e15671c2cbac9","_type":"QDM::Diagnosis","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"2.16.840.1.113883.3.526.3.378","dataElementCodes":[],"description":"Diagnosis: Pregnancy","hqmfOid":"2.16.840.1.113883.10.20.28.4.110","id":"68923bbaa83e15671c2cbac9","prevalencePeriod":null,"qdmCategory":"condition","qdmTitle":"Diagnosis","qdmVersion":"5.6","qrdaOid":"2.16.840.1.113883.10.20.24.3.135","severity":null},{"_id":"68923bbaa83e15671c2cbaca","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.464.1003.101.12.1016","dataElementCodes":[],"description":"Encounter, Performed: HomeHealthcareServices","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"68923bbaa83e15671c2cbaca","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"68923bc9a83e15671c2cc589","_type":"QDM::PatientCharacteristicEthnicity","codeListId":"2.16.840.1.114222.4.11.837","dataElementCodes":[],"description":"Patient Characteristic Ethnicity: Ethnicity","hqmfOid":"2.16.840.1.113883.10.20.28.4.56","id":"68923bc9a83e15671c2cc589","qdmCategory":"patient_characteristic","qdmStatus":"ethnicity","qdmTitle":"Patient Characteristic Ethnicity","qdmVersion":"5.6"},{"_id":"68923bbaa83e15671c2cbacb","_type":"QDM::Diagnosis","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"2.16.840.1.113883.3.526.3.376","dataElementCodes":[],"description":"Diagnosis: HeartFailure","hqmfOid":"2.16.840.1.113883.10.20.28.4.110","id":"68923bbaa83e15671c2cbacb","prevalencePeriod":null,"qdmCategory":"condition","qdmTitle":"Diagnosis","qdmVersion":"5.6","qrdaOid":"2.16.840.1.113883.10.20.24.3.135","severity":null},{"_id":"68923bbaa83e15671c2cbacc","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.526.3.1012","dataElementCodes":[],"description":"Encounter, Performed: PatientProviderInteraction","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"68923bbaa83e15671c2cbacc","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"68923bbaa83e15671c2cbace","_type":"QDM::ProcedurePerformed","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"2.16.840.1.113762.1.4.1178.33","components":null,"dataElementCodes":[],"description":"Procedure, Performed: HeartTransplant","hqmfOid":"2.16.840.1.113883.10.20.28.4.67","id":"68923bbaa83e15671c2cbace","incisionDatetime":null,"method":null,"negationRationale":null,"qdmCategory":"procedure","qdmStatus":"performed","qdmTitle":"Procedure, Performed","qdmVersion":"5.6","rank":null,"reason":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null,"status":null},{"_id":"68923bc9a83e15671c2cc58a","_type":"QDM::PatientCharacteristicRace","codeListId":"2.16.840.1.114222.4.11.836","dataElementCodes":[],"description":"Patient Characteristic Race: Race","hqmfOid":"2.16.840.1.113883.10.20.28.4.59","id":"68923bc9a83e15671c2cc58a","qdmCategory":"patient_characteristic","qdmStatus":"race","qdmTitle":"Patient Characteristic Race","qdmVersion":"5.6"},{"_id":"68923bc9a83e15671c2cc58b","_type":"QDM::DiagnosticStudyPerformed","authorDatetime":null,"codeListId":"2.16.840.1.113883.3.526.3.1134","components":null,"dataElementCodes":[],"description":"Diagnostic Study, Performed: EjectionFraction","facilityLocation":null,"hqmfOid":"2.16.840.1.113883.10.20.28.4.23","id":"68923bc9a83e15671c2cc58b","interpretation":null,"method":null,"negationRationale":null,"qdmCategory":"diagnostic_study","qdmStatus":"performed","qdmTitle":"Diagnostic Study, Performed","qdmVersion":"5.6","reason":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null,"resultDatetime":null,"status":null},{"_id":"68923bbaa83e15671c2cbacf","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.464.1003.101.12.1008","dataElementCodes":[],"description":"Encounter, Performed: OutpatientConsultation","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"68923bbaa83e15671c2cbacf","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"68923bbaa83e15671c2cbad0","_type":"QDM::Diagnosis","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"2.16.840.1.113762.1.4.1178.58","dataElementCodes":[],"description":"Diagnosis: LeftVentricularAssistDeviceComplications","hqmfOid":"2.16.840.1.113883.10.20.28.4.110","id":"68923bbaa83e15671c2cbad0","prevalencePeriod":null,"qdmCategory":"condition","qdmTitle":"Diagnosis","qdmVersion":"5.6","qrdaOid":"2.16.840.1.113883.10.20.24.3.135","severity":null},{"_id":"68923bc9a83e15671c2cc58c","_type":"QDM::MedicationActive","codeListId":"2.16.840.1.113883.3.526.3.1139","dataElementCodes":[],"description":"Medication, Active: ACEInhibitororARBorARNI","dosage":null,"frequency":null,"hqmfOid":"2.16.840.1.113883.10.20.28.4.44","id":"68923bc9a83e15671c2cc58c","qdmCategory":"medication","qdmStatus":"active","qdmTitle":"Medication, Active","qdmVersion":"5.6","relevantDatetime":null,"relevantPeriod":null,"route":null},{"_id":"68923bc9a83e15671c2cc58d","_type":"QDM::MedicationOrder","authorDatetime":null,"codeListId":"2.16.840.1.113883.3.526.3.1139","dataElementCodes":[],"daysSupplied":null,"description":"Medication, Order: ACEInhibitororARBorARNI","dosage":null,"frequency":null,"hqmfOid":"2.16.840.1.113883.10.20.28.4.51","id":"68923bc9a83e15671c2cc58d","negationRationale":null,"qdmCategory":"medication","qdmStatus":"order","qdmTitle":"Medication, Order","qdmVersion":"5.6","reason":null,"refills":null,"relatedTo":null,"relevantPeriod":null,"route":null,"setting":null,"supply":null},{"_id":"68923bbaa83e15671c2cbad1","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.464.1003.101.12.1001","dataElementCodes":[],"description":"Encounter, Performed: OfficeVisit","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"68923bbaa83e15671c2cbad1","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"68923bc9a83e15671c2cc58e","_type":"QDM::PatientCharacteristicPayer","codeListId":"2.16.840.1.114222.4.11.3591","dataElementCodes":[],"description":"Patient Characteristic Payer: PayerType","hqmfOid":"2.16.840.1.113883.10.20.28.4.58","id":"68923bc9a83e15671c2cc58e","qdmCategory":"patient_characteristic","qdmStatus":"payer","qdmTitle":"Patient Characteristic Payer","qdmVersion":"5.6","relevantPeriod":null},{"_id":"68923bbaa83e15671c2cbad2","_type":"QDM::Diagnosis","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"drc-658a9ab8cb0b6d0f913c9826ba149a3d3648308005ef8f2ac164b9799775e05f","dataElementCodes":[],"description":"Diagnosis: Acute renal failure caused by angiotensin-converting-enzyme inhibitor (disorder)","hqmfOid":"2.16.840.1.113883.10.20.28.4.110","id":"68923bbaa83e15671c2cbad2","prevalencePeriod":null,"qdmCategory":"condition","qdmTitle":"Diagnosis","qdmVersion":"5.6","qrdaOid":"2.16.840.1.113883.10.20.24.3.135","severity":null},{"_id":"68923bbaa83e15671c2cbad4","_type":"QDM::AllergyIntolerance","authorDatetime":null,"codeListId":"drc-d58cd78385c98ecc37ad691ae38ec2e0cead3f8b068347958d5bf24644c26a3d","dataElementCodes":[],"description":"Allergy/Intolerance: Substance with neprilysin inhibitor mechanism of action (substance)","hqmfOid":"2.16.840.1.113883.10.20.28.4.119","id":"68923bbaa83e15671c2cbad4","prevalencePeriod":null,"qdmCategory":"allergy","qdmStatus":"intolerance","qdmTitle":"Allergy/Intolerance","qdmVersion":"5.6","severity":null,"type":null},{"_id":"68923bbaa83e15671c2cbad5","_type":"QDM::AllergyIntolerance","authorDatetime":null,"codeListId":"drc-c503f260db26e985a71135dec87067ecc8be42286825989e035e87d32c2bb7a8","dataElementCodes":[],"description":"Allergy/Intolerance: Substance with angiotensin-converting enzyme inhibitor mechanism of action (substance)","hqmfOid":"2.16.840.1.113883.10.20.28.4.119","id":"68923bbaa83e15671c2cbad5","prevalencePeriod":null,"qdmCategory":"allergy","qdmStatus":"intolerance","qdmTitle":"Allergy/Intolerance","qdmVersion":"5.6","severity":null,"type":null},{"_id":"68923bbaa83e15671c2cbad6","_type":"QDM::AllergyIntolerance","authorDatetime":null,"codeListId":"drc-d287131ecd005e79332420080e4874a6567ec820d4670cd3bc1bd0d5b6beea61","dataElementCodes":[],"description":"Allergy/Intolerance: Substance with angiotensin II receptor antagonist mechanism of action (substance)","hqmfOid":"2.16.840.1.113883.10.20.28.4.119","id":"68923bbaa83e15671c2cbad6","prevalencePeriod":null,"qdmCategory":"allergy","qdmStatus":"intolerance","qdmTitle":"Allergy/Intolerance","qdmVersion":"5.6","severity":null,"type":null},{"_id":"68923bbaa83e15671c2cbad7","_type":"QDM::Diagnosis","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"drc-6c1bdcd47568e8c9154d6fb664e50e9f101cfd349258a8fc1483098e590f9683","dataElementCodes":[],"description":"Diagnosis: Left ventricular systolic dysfunction (disorder)","hqmfOid":"2.16.840.1.113883.10.20.28.4.110","id":"68923bbaa83e15671c2cbad7","prevalencePeriod":null,"qdmCategory":"condition","qdmTitle":"Diagnosis","qdmVersion":"5.6","qrdaOid":"2.16.840.1.113883.10.20.24.3.135","severity":null}],"title":"Heart Failure (HF): Angiotensin-Converting Enzyme (ACE) Inhibitor or Angiotensin Receptor Blocker (ARB) or Angiotensin Receptor-Neprilysin Inhibitor (ARNI) Therapy for Left Ventricular Systolic Dysfunction (LVSD)","updated_at":null,"value_set_ids":["68923bbaa83e15671c2cbad8","68923bbaa83e15671c2cbad9","68923bbaa83e15671c2cbada","68923bbaa83e15671c2cbadb","68923bbaa83e15671c2cbadc","68923bc9a83e15671c2cc550","68923bc9a83e15671c2cc551","68923bc9a83e15671c2cc552","68923bc9a83e15671c2cc553","68923bc9a83e15671c2cc554","68923bc9a83e15671c2cc555","68923bc9a83e15671c2cc556","68923bc9a83e15671c2cc557","68923bc9a83e15671c2cc558","68923bc9a83e15671c2cc559","68923bc9a83e15671c2cc55a","68923bc9a83e15671c2cc55b","68923bc9a83e15671c2cc55c","68923bc9a83e15671c2cc55d","68923bc9a83e15671c2cc55e","68923bc9a83e15671c2cc55f","68923bc9a83e15671c2cc560","68923bc9a83e15671c2cc561","68923bc9a83e15671c2cc562","68923bc9a83e15671c2cc563","68923bc9a83e15671c2cc564","68923bc9a83e15671c2cc565","68923bc9a83e15671c2cc566","68923bc9a83e15671c2cc567","68923bc9a83e15671c2cc568","68923bc9a83e15671c2cc569","68923bc9a83e15671c2cc56a","68923bc9a83e15671c2cc56b","68923bc9a83e15671c2cc56c","68923bc9a83e15671c2cc56d","68923bc9a83e15671c2cc56e"]}