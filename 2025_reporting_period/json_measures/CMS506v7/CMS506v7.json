{"_id":"68923eeea83e15671c2e10de","calculate_sdes":null,"calculation_method":"PATIENT","cms_id":"CMS506v7","component":false,"component_hqmf_set_ids":[],"composite":false,"composite_hqmf_set_id":null,"cql_libraries":[{"_id":"68923ee8a83e15671c2e0dae","cql":"library SafeUseofOpioidsConcurrentPrescribing version '7.0.000'\r\n\r\nusing QDM version '5.6'\r\n\r\ninclude MATGlobalCommonFunctionsQDM version '8.0.000' called Global\r\n\r\nvalueset \"Cancer Related Pain\": 'urn:oid:2.16.840.1.113762.1.4.1111.180'\r\nvalueset \"Discharge To Acute Care Facility\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.87'\r\nvalueset \"Ethnicity\": 'urn:oid:2.16.840.1.114222.4.11.837'\r\nvalueset \"Hospice Care Referral or Admission\": 'urn:oid:2.16.840.1.113762.1.4.1116.365'\r\nvalueset \"Left Against Medical Advice\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.308'\r\nvalueset \"Medications for Opioid Use Disorder (MOUD)\": 'urn:oid:2.16.840.1.113762.1.4.1046.269'\r\nvalueset \"ONC Administrative Sex\": 'urn:oid:2.16.840.1.113762.1.4.1'\r\nvalueset \"Opioid Medication Assisted Treatment (MAT)\": 'urn:oid:2.16.840.1.113762.1.4.1111.177'\r\nvalueset \"Opioid Use Disorder\": 'urn:oid:2.16.840.1.113762.1.4.1111.171'\r\nvalueset \"Palliative or Hospice Care\": 'urn:oid:2.16.840.1.113883.3.600.1.1579'\r\nvalueset \"Patient Expired\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.309'\r\nvalueset \"Payer Type\": 'urn:oid:2.16.840.1.114222.4.11.3591'\r\nvalueset \"Race\": 'urn:oid:2.16.840.1.114222.4.11.836'\r\nvalueset \"Schedule II, III and IV Opioid Medications\": 'urn:oid:2.16.840.1.113762.1.4.1046.241'\r\nvalueset \"Schedule IV Benzodiazepines\": 'urn:oid:2.16.840.1.113762.1.4.1125.1'\r\nvalueset \"Sickle Cell Disease with and without Crisis\": 'urn:oid:2.16.840.1.113762.1.4.1111.175'\r\n\r\nparameter \"Measurement Period\" Interval\u003cDateTime\u003e\r\n\r\ncontext Patient\r\n\r\ndefine \"Denominator\":\r\n  \"Initial Population\"\r\n\r\ndefine \"Inpatient Encounter with Age Greater than or Equal to 18\":\r\n  Global.\"Inpatient Encounter\" InpatientHospitalEncounter\r\n    where AgeInYearsAt(date from start of InpatientHospitalEncounter.relevantPeriod) \u003e= 18\r\n\r\ndefine \"Intervention Palliative or Hospice Care\":\r\n  [\"Intervention, Order\": \"Palliative or Hospice Care\"]\r\n    union [\"Intervention, Performed\": \"Palliative or Hospice Care\"]\r\n\r\ndefine \"Initial Population\":\r\n  \"Inpatient Encounters with an Opioid or Benzodiazepine at Discharge\"\r\n\r\ndefine \"Treatment for Opioid Use Disorders\":\r\n  ( [\"Medication, Active\": \"Medications for Opioid Use Disorder (MOUD)\"]\r\n    union [\"Medication, Order\": \"Medications for Opioid Use Disorder (MOUD)\"] ) MedicationTreatment\r\n    with [\"Intervention, Performed\": \"Opioid Medication Assisted Treatment (MAT)\"] MAT\r\n      such that Coalesce(start of Global.\"NormalizeInterval\"(MedicationTreatment.relevantDatetime, MedicationTreatment.relevantPeriod), MedicationTreatment.authorDatetime) during day of Global.\"NormalizeInterval\" ( MAT.relevantDatetime, MAT.relevantPeriod )\r\n        and Coalesce(start of Global.\"NormalizeInterval\"(MedicationTreatment.relevantDatetime, MedicationTreatment.relevantPeriod), MedicationTreatment.authorDatetime) during day of \"Measurement Period\"\r\n\r\ndefine \"SDE Ethnicity\":\r\n  [\"Patient Characteristic Ethnicity\": \"Ethnicity\"]\r\n\r\ndefine \"SDE Race\":\r\n  [\"Patient Characteristic Race\": \"Race\"]\r\n\r\ndefine \"SDE Sex\":\r\n  [\"Patient Characteristic Sex\": \"ONC Administrative Sex\"]\r\n\r\ndefine \"SDE Payer\":\r\n  [\"Patient Characteristic Payer\": \"Payer Type\"]\r\n\r\ndefine \"Denominator Exclusion\":\n  /*Excludes encounters of patients with cancer pain or who are receiving palliative or hospice care at the time of the encounter or who are receiving medication for opioid use disorder, have sickle cell disease, or who are discharged to another inpatient care facility or discharged against medical advice, or expire during the inpatient stay*/\r\n  \r\n  \"Inpatient Encounters with an Opioid or Benzodiazepine at Discharge\" InpatientEncounter\r\n    where exists ( [\"Diagnosis\": \"Cancer Related Pain\"] Cancer\r\n        where Cancer.prevalencePeriod overlaps day of InpatientEncounter.relevantPeriod\r\n    )\r\n      or exists ( [\"Diagnosis\": \"Sickle Cell Disease with and without Crisis\"] SickleCellDisease\r\n          where SickleCellDisease.prevalencePeriod overlaps InpatientEncounter.relevantPeriod\r\n      )\r\n      or exists ( InpatientEncounter.diagnoses Diagnosis\r\n          where Diagnosis.code in \"Cancer Related Pain\"\r\n      )\r\n      or exists ( [\"Diagnosis\": \"Opioid Use Disorder\"] OUD\r\n          where start of OUD.prevalencePeriod before day of end of InpatientEncounter.relevantPeriod\r\n      )\r\n      or exists ( \"Treatment for Opioid Use Disorders\" OUDTreatment\r\n          where Coalesce(start of Global.\"NormalizeInterval\"(OUDTreatment.relevantDatetime, OUDTreatment.relevantPeriod), OUDTreatment.authorDatetime) during day of InpatientEncounter.relevantPeriod\r\n      )\r\n      or exists ( \"Intervention Palliative or Hospice Care\" PalliativeOrHospiceCare\r\n          where Coalesce(start of Global.\"NormalizeInterval\"(PalliativeOrHospiceCare.relevantDatetime, PalliativeOrHospiceCare.relevantPeriod), PalliativeOrHospiceCare.authorDatetime) during Global.\"HospitalizationWithObservation\" ( InpatientEncounter )\r\n      )\r\n      or ( InpatientEncounter.dischargeDisposition in \"Discharge To Acute Care Facility\"\r\n          or InpatientEncounter.dischargeDisposition in \"Hospice Care Referral or Admission\"\r\n          or InpatientEncounter.dischargeDisposition in \"Patient Expired\"\r\n          or InpatientEncounter.dischargeDisposition in \"Left Against Medical Advice\"\r\n      )\r\n\r\ndefine \"Inpatient Encounters with an Opioid or Benzodiazepine at Discharge\":\n  /*Captures encounters of patients with an opioid(s), benzodiazepine, or a combination of these medications at discharge*/\r\n  \r\n  \"Inpatient Encounter with Age Greater than or Equal to 18\" InpatientEncounter\r\n    with ( [\"Medication, Discharge\": \"Schedule II, III and IV Opioid Medications\"]\r\n      union [\"Medication, Discharge\": \"Schedule IV Benzodiazepines\"] ) OpioidOrBenzodiazepineDischargeMedication\r\n      such that OpioidOrBenzodiazepineDischargeMedication.authorDatetime during day of InpatientEncounter.relevantPeriod\r\n\r\ndefine \"Numerator\":\n  /*Encounters of patients prescribed two or more opioids or an opioid and benzodiazepine at discharge.\n  */\r\n  \r\n  ( \"Inpatient Encounters with an Opioid or Benzodiazepine at Discharge\" InpatientEncounter\r\n      where ( Count([\"Medication, Discharge\": \"Schedule II, III and IV Opioid Medications\"] Opioids\r\n            where Opioids.authorDatetime during day of InpatientEncounter.relevantPeriod\r\n            return distinct Opioids.code\r\n        ) \u003e= 2\r\n      )\r\n        or exists ( [\"Medication, Discharge\": \"Schedule II, III and IV Opioid Medications\"] OpioidsDischarge\r\n            where OpioidsDischarge.authorDatetime during day of InpatientEncounter.relevantPeriod\r\n              and exists [\"Medication, Discharge\": \"Schedule IV Benzodiazepines\"] BenzodiazepinesDischarge\r\n                where BenzodiazepinesDischarge.authorDatetime during day of InpatientEncounter.relevantPeriod\r\n        )\r\n  )","elm":{"library":{"annotation":[{"translatorOptions":"EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion,DisableMethodInvocation","type":"CqlToElmInfo"},{"type":"Annotation","s":{"r":"240","s":[{"value":["","library SafeUseofOpioidsConcurrentPrescribing version '7.0.000'"]}]}}],"identifier":{"id":"SafeUseofOpioidsConcurrentPrescribing","version":"7.0.000"},"schemaIdentifier":{"id":"urn:hl7-org:elm","version":"r1"},"usings":{"def":[{"localIdentifier":"System","uri":"urn:hl7-org:elm-types:r1"},{"localId":"1","locator":"3:1-3:23","localIdentifier":"QDM","uri":"urn:healthit-gov:qdm:v5_6","version":"5.6","annotation":[{"type":"Annotation","s":{"r":"1","s":[{"value":["","using "]},{"s":[{"value":["QDM"]}]},{"value":[" version ","'5.6'"]}]}}]}]},"includes":{"def":[{"localId":"2","locator":"5:1-5:67","localIdentifier":"Global","path":"MATGlobalCommonFunctionsQDM","version":"8.0.000","annotation":[{"type":"Annotation","s":{"r":"2","s":[{"value":["","include "]},{"s":[{"value":["MATGlobalCommonFunctionsQDM"]}]},{"value":[" version ","'8.0.000'"," called ","Global"]}]}}]}]},"parameters":{"def":[{"localId":"21","locator":"24:1-24:49","name":"Measurement Period","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"21","s":[{"value":["","parameter ","\"Measurement Period\""," "]},{"r":"20","s":[{"value":["Interval\u003c"]},{"r":"19","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}}],"parameterTypeSpecifier":{"localId":"20","locator":"24:32-24:49","type":"IntervalTypeSpecifier","pointType":{"localId":"19","locator":"24:41-24:48","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},"valueSets":{"def":[{"localId":"3","locator":"7:1-7:72","name":"Cancer Related Pain","id":"2.16.840.1.113762.1.4.1111.180","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"3","s":[{"value":["","valueset ","\"Cancer Related Pain\"",": ","'urn:oid:2.16.840.1.113762.1.4.1111.180'"]}]}}]},{"localId":"4","locator":"8:1-8:87","name":"Discharge To Acute Care Facility","id":"2.16.840.1.113883.3.117.1.7.1.87","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"4","s":[{"value":["","valueset ","\"Discharge To Acute Care Facility\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.87'"]}]}}]},{"localId":"5","locator":"9:1-9:58","name":"Ethnicity","id":"2.16.840.1.114222.4.11.837","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"5","s":[{"value":["","valueset ","\"Ethnicity\"",": ","'urn:oid:2.16.840.1.114222.4.11.837'"]}]}}]},{"localId":"6","locator":"10:1-10:87","name":"Hospice Care Referral or Admission","id":"2.16.840.1.113762.1.4.1116.365","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"6","s":[{"value":["","valueset ","\"Hospice Care Referral or Admission\"",": ","'urn:oid:2.16.840.1.113762.1.4.1116.365'"]}]}}]},{"localId":"7","locator":"11:1-11:83","name":"Left Against Medical Advice","id":"2.16.840.1.113883.3.117.1.7.1.308","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"7","s":[{"value":["","valueset ","\"Left Against Medical Advice\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.308'"]}]}}]},{"localId":"8","locator":"12:1-12:95","name":"Medications for Opioid Use Disorder (MOUD)","id":"2.16.840.1.113762.1.4.1046.269","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"8","s":[{"value":["","valueset ","\"Medications for Opioid Use Disorder (MOUD)\"",": ","'urn:oid:2.16.840.1.113762.1.4.1046.269'"]}]}}]},{"localId":"9","locator":"13:1-13:68","name":"ONC Administrative Sex","id":"2.16.840.1.113762.1.4.1","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"9","s":[{"value":["","valueset ","\"ONC Administrative Sex\"",": ","'urn:oid:2.16.840.1.113762.1.4.1'"]}]}}]},{"localId":"10","locator":"14:1-14:95","name":"Opioid Medication Assisted Treatment (MAT)","id":"2.16.840.1.113762.1.4.1111.177","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"10","s":[{"value":["","valueset ","\"Opioid Medication Assisted Treatment (MAT)\"",": ","'urn:oid:2.16.840.1.113762.1.4.1111.177'"]}]}}]},{"localId":"11","locator":"15:1-15:72","name":"Opioid Use Disorder","id":"2.16.840.1.113762.1.4.1111.171","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"11","s":[{"value":["","valueset ","\"Opioid Use Disorder\"",": ","'urn:oid:2.16.840.1.113762.1.4.1111.171'"]}]}}]},{"localId":"12","locator":"16:1-16:79","name":"Palliative or Hospice Care","id":"2.16.840.1.113883.3.600.1.1579","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"12","s":[{"value":["","valueset ","\"Palliative or Hospice Care\"",": ","'urn:oid:2.16.840.1.113883.3.600.1.1579'"]}]}}]},{"localId":"13","locator":"17:1-17:71","name":"Patient Expired","id":"2.16.840.1.113883.3.117.1.7.1.309","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"13","s":[{"value":["","valueset ","\"Patient Expired\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.309'"]}]}}]},{"localId":"14","locator":"18:1-18:60","name":"Payer Type","id":"2.16.840.1.114222.4.11.3591","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"14","s":[{"value":["","valueset ","\"Payer Type\"",": ","'urn:oid:2.16.840.1.114222.4.11.3591'"]}]}}]},{"localId":"15","locator":"19:1-19:53","name":"Race","id":"2.16.840.1.114222.4.11.836","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"15","s":[{"value":["","valueset ","\"Race\"",": ","'urn:oid:2.16.840.1.114222.4.11.836'"]}]}}]},{"localId":"16","locator":"20:1-20:95","name":"Schedule II, III and IV Opioid Medications","id":"2.16.840.1.113762.1.4.1046.241","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"16","s":[{"value":["","valueset ","\"Schedule II, III and IV Opioid Medications\"",": ","'urn:oid:2.16.840.1.113762.1.4.1046.241'"]}]}}]},{"localId":"17","locator":"21:1-21:78","name":"Schedule IV Benzodiazepines","id":"2.16.840.1.113762.1.4.1125.1","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"17","s":[{"value":["","valueset ","\"Schedule IV Benzodiazepines\"",": ","'urn:oid:2.16.840.1.113762.1.4.1125.1'"]}]}}]},{"localId":"18","locator":"22:1-22:96","name":"Sickle Cell Disease with and without Crisis","id":"2.16.840.1.113762.1.4.1111.175","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"18","s":[{"value":["","valueset ","\"Sickle Cell Disease with and without Crisis\"",": ","'urn:oid:2.16.840.1.113762.1.4.1111.175'"]}]}}]}]},"contexts":{"def":[{"locator":"26:1-26:15","name":"Patient"}]},"statements":{"def":[{"locator":"26:1-26:15","name":"Patient","context":"Patient","expression":{"type":"SingletonFrom","operand":{"locator":"26:1-26:15","dataType":"{urn:healthit-gov:qdm:v5_6}Patient","templateId":"Patient","type":"Retrieve"}}},{"localId":"32","locator":"31:1-33:90","name":"Inpatient Encounter with Age Greater than or Equal to 18","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"32","s":[{"value":["","define ","\"Inpatient Encounter with Age Greater than or Equal to 18\"",":\n  "]},{"r":"31","s":[{"s":[{"r":"23","s":[{"r":"22","s":[{"s":[{"value":["Global",".","\"Inpatient Encounter\""]}]}]},{"value":[" ","InpatientHospitalEncounter"]}]}]},{"value":["\n    "]},{"r":"30","s":[{"value":["where "]},{"r":"30","s":[{"r":"28","s":[{"value":["AgeInYearsAt","("]},{"r":"27","s":[{"value":["date from "]},{"r":"26","s":[{"value":["start of "]},{"r":"25","s":[{"r":"24","s":[{"value":["InpatientHospitalEncounter"]}]},{"value":["."]},{"r":"25","s":[{"value":["relevantPeriod"]}]}]}]}]},{"value":[")"]}]},{"r":"29","value":[" ","\u003e="," ","18"]}]}]}]}]}}],"expression":{"localId":"31","locator":"32:3-33:90","type":"Query","source":[{"localId":"23","locator":"32:3-32:57","alias":"InpatientHospitalEncounter","expression":{"localId":"22","locator":"32:3-32:30","name":"Inpatient Encounter","libraryName":"Global","type":"ExpressionRef"}}],"relationship":[],"where":{"localId":"30","locator":"33:5-33:90","type":"GreaterOrEqual","operand":[{"localId":"28","locator":"33:11-33:84","precision":"Year","type":"CalculateAgeAt","operand":[{"type":"ToDate","operand":{"path":"birthDatetime","type":"Property","source":{"name":"Patient","type":"ExpressionRef"}}},{"localId":"27","locator":"33:24-33:83","type":"DateFrom","operand":{"localId":"26","locator":"33:34-33:83","type":"Start","operand":{"localId":"25","locator":"33:43-33:83","path":"relevantPeriod","scope":"InpatientHospitalEncounter","type":"Property"}}}]},{"localId":"29","locator":"33:89-33:90","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"18","type":"Literal"}]}}},{"localId":"46","locator":"89:1-95:120","name":"Inpatient Encounters with an Opioid or Benzodiazepine at Discharge","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"46","s":[{"value":["","define ","\"Inpatient Encounters with an Opioid or Benzodiazepine at Discharge\"",":\n  /*Captures encounters of patients with an opioid(s), benzodiazepine, or a combination of these medications at discharge*/\n  \n  "]},{"r":"45","s":[{"s":[{"r":"34","s":[{"r":"33","s":[{"s":[{"value":["\"Inpatient Encounter with Age Greater than or Equal to 18\""]}]}]},{"value":[" ","InpatientEncounter"]}]}]},{"value":["\n    "]},{"r":"44","s":[{"value":["with "]},{"r":"38","s":[{"r":"37","s":[{"value":["( "]},{"r":"37","s":[{"r":"35","s":[{"value":["[","\"Medication, Discharge\"",": "]},{"s":[{"value":["\"Schedule II, III and IV Opioid Medications\""]}]},{"value":["]"]}]},{"value":["\n      union "]},{"r":"36","s":[{"value":["[","\"Medication, Discharge\"",": "]},{"s":[{"value":["\"Schedule IV Benzodiazepines\""]}]},{"value":["]"]}]}]},{"value":[" )"]}]},{"value":[" ","OpioidOrBenzodiazepineDischargeMedication"]}]},{"value":["\n      such that "]},{"r":"43","s":[{"r":"40","s":[{"r":"39","s":[{"value":["OpioidOrBenzodiazepineDischargeMedication"]}]},{"value":["."]},{"r":"40","s":[{"value":["authorDatetime"]}]}]},{"r":"43","value":[" ","during day of"," "]},{"r":"42","s":[{"r":"41","s":[{"value":["InpatientEncounter"]}]},{"value":["."]},{"r":"42","s":[{"value":["relevantPeriod"]}]}]}]}]}]}]}}],"expression":{"localId":"45","locator":"92:3-95:120","type":"Query","source":[{"localId":"34","locator":"92:3-92:79","alias":"InpatientEncounter","expression":{"localId":"33","locator":"92:3-92:60","name":"Inpatient Encounter with Age Greater than or Equal to 18","type":"ExpressionRef"}}],"relationship":[{"localId":"44","locator":"93:5-95:120","alias":"OpioidOrBenzodiazepineDischargeMedication","type":"With","expression":{"localId":"37","locator":"93:10-94:70","type":"Union","operand":[{"localId":"35","locator":"93:12-93:82","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationDischarge","templateId":"PositiveMedicationDischarge","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"93:38-93:81","name":"Schedule II, III and IV Opioid Medications","preserve":true,"type":"ValueSetRef"}},{"localId":"36","locator":"94:13-94:68","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationDischarge","templateId":"PositiveMedicationDischarge","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"94:39-94:67","name":"Schedule IV Benzodiazepines","preserve":true,"type":"ValueSetRef"}}]},"suchThat":{"localId":"43","locator":"95:17-95:120","precision":"Day","type":"In","operand":[{"localId":"40","locator":"95:17-95:72","path":"authorDatetime","scope":"OpioidOrBenzodiazepineDischargeMedication","type":"Property"},{"localId":"42","locator":"95:88-95:120","path":"relevantPeriod","scope":"InpatientEncounter","type":"Property"}]}}]}},{"localId":"48","locator":"39:1-40:70","name":"Initial Population","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"48","s":[{"value":["","define ","\"Initial Population\"",":\n  "]},{"r":"47","s":[{"value":["\"Inpatient Encounters with an Opioid or Benzodiazepine at Discharge\""]}]}]}}],"expression":{"localId":"47","locator":"40:3-40:70","name":"Inpatient Encounters with an Opioid or Benzodiazepine at Discharge","type":"ExpressionRef"}},{"localId":"50","locator":"28:1-29:22","name":"Denominator","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"50","s":[{"value":["","define ","\"Denominator\"",":\n  "]},{"r":"49","s":[{"value":["\"Initial Population\""]}]}]}}],"expression":{"localId":"49","locator":"29:3-29:22","name":"Initial Population","type":"ExpressionRef"}},{"localId":"54","locator":"35:1-37:67","name":"Intervention Palliative or Hospice Care","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"54","s":[{"value":["","define ","\"Intervention Palliative or Hospice Care\"",":\n  "]},{"r":"53","s":[{"r":"51","s":[{"value":["[","\"Intervention, Order\"",": "]},{"s":[{"value":["\"Palliative or Hospice Care\""]}]},{"value":["]"]}]},{"value":["\n    union "]},{"r":"52","s":[{"value":["[","\"Intervention, Performed\"",": "]},{"s":[{"value":["\"Palliative or Hospice Care\""]}]},{"value":["]"]}]}]}]}}],"expression":{"localId":"53","locator":"36:3-37:67","type":"Union","operand":[{"type":"As","operand":{"localId":"51","locator":"36:3-36:55","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveInterventionOrder","templateId":"PositiveInterventionOrder","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"36:27-36:54","name":"Palliative or Hospice Care","preserve":true,"type":"ValueSetRef"}},"asTypeSpecifier":{"type":"ListTypeSpecifier","elementType":{"type":"ChoiceTypeSpecifier","choice":[{"name":"{urn:healthit-gov:qdm:v5_6}PositiveInterventionPerformed","type":"NamedTypeSpecifier"},{"name":"{urn:healthit-gov:qdm:v5_6}PositiveInterventionOrder","type":"NamedTypeSpecifier"}]}}},{"type":"As","operand":{"localId":"52","locator":"37:11-37:67","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveInterventionPerformed","templateId":"PositiveInterventionPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"37:39-37:66","name":"Palliative or Hospice Care","preserve":true,"type":"ValueSetRef"}},"asTypeSpecifier":{"type":"ListTypeSpecifier","elementType":{"type":"ChoiceTypeSpecifier","choice":[{"name":"{urn:healthit-gov:qdm:v5_6}PositiveInterventionPerformed","type":"NamedTypeSpecifier"},{"name":"{urn:healthit-gov:qdm:v5_6}PositiveInterventionOrder","type":"NamedTypeSpecifier"}]}}}]}},{"localId":"93","locator":"42:1-47:202","name":"Treatment for Opioid Use Disorders","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"93","s":[{"value":["","define ","\"Treatment for Opioid Use Disorders\"",":\n  "]},{"r":"92","s":[{"s":[{"r":"58","s":[{"r":"57","s":[{"value":["( "]},{"r":"57","s":[{"r":"55","s":[{"value":["[","\"Medication, Active\"",": "]},{"s":[{"value":["\"Medications for Opioid Use Disorder (MOUD)\""]}]},{"value":["]"]}]},{"value":["\n    union "]},{"r":"56","s":[{"value":["[","\"Medication, Order\"",": "]},{"s":[{"value":["\"Medications for Opioid Use Disorder (MOUD)\""]}]},{"value":["]"]}]}]},{"value":[" )"]}]},{"value":[" ","MedicationTreatment"]}]}]},{"value":["\n    "]},{"r":"91","s":[{"value":["with "]},{"r":"60","s":[{"r":"59","s":[{"r":"59","s":[{"value":["[","\"Intervention, Performed\"",": "]},{"s":[{"value":["\"Opioid Medication Assisted Treatment (MAT)\""]}]},{"value":["]"]}]}]},{"value":[" ","MAT"]}]},{"value":["\n      such that "]},{"r":"90","s":[{"r":"77","s":[{"r":"70","s":[{"value":["Coalesce","("]},{"r":"67","s":[{"value":["start of "]},{"r":"66","s":[{"r":"61","s":[{"value":["Global"]}]},{"value":["."]},{"r":"66","s":[{"value":["\"NormalizeInterval\"","("]},{"r":"63","s":[{"r":"62","s":[{"value":["MedicationTreatment"]}]},{"value":["."]},{"r":"63","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"65","s":[{"r":"64","s":[{"value":["MedicationTreatment"]}]},{"value":["."]},{"r":"65","s":[{"value":["relevantPeriod"]}]}]},{"value":[")"]}]}]}]},{"value":[", "]},{"r":"69","s":[{"r":"68","s":[{"value":["MedicationTreatment"]}]},{"value":["."]},{"r":"69","s":[{"value":["authorDatetime"]}]}]},{"value":[")"]}]},{"r":"77","value":[" ","during day of"," "]},{"r":"76","s":[{"r":"71","s":[{"value":["Global"]}]},{"value":["."]},{"r":"76","s":[{"value":["\"NormalizeInterval\""," ( "]},{"r":"73","s":[{"r":"72","s":[{"value":["MAT"]}]},{"value":["."]},{"r":"73","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"75","s":[{"r":"74","s":[{"value":["MAT"]}]},{"value":["."]},{"r":"75","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]}]},{"value":["\n        and "]},{"r":"89","s":[{"r":"87","s":[{"value":["Coalesce","("]},{"r":"84","s":[{"value":["start of "]},{"r":"83","s":[{"r":"78","s":[{"value":["Global"]}]},{"value":["."]},{"r":"83","s":[{"value":["\"NormalizeInterval\"","("]},{"r":"80","s":[{"r":"79","s":[{"value":["MedicationTreatment"]}]},{"value":["."]},{"r":"80","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"82","s":[{"r":"81","s":[{"value":["MedicationTreatment"]}]},{"value":["."]},{"r":"82","s":[{"value":["relevantPeriod"]}]}]},{"value":[")"]}]}]}]},{"value":[", "]},{"r":"86","s":[{"r":"85","s":[{"value":["MedicationTreatment"]}]},{"value":["."]},{"r":"86","s":[{"value":["authorDatetime"]}]}]},{"value":[")"]}]},{"r":"89","value":[" ","during day of"," "]},{"r":"88","s":[{"value":["\"Measurement Period\""]}]}]}]}]}]}]}}],"expression":{"localId":"92","locator":"43:3-47:202","type":"Query","source":[{"localId":"58","locator":"43:3-44:99","alias":"MedicationTreatment","expression":{"localId":"57","locator":"43:3-44:79","type":"Union","operand":[{"type":"As","operand":{"localId":"55","locator":"43:5-43:72","dataType":"{urn:healthit-gov:qdm:v5_6}MedicationActive","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"43:28-43:71","name":"Medications for Opioid Use Disorder (MOUD)","preserve":true,"type":"ValueSetRef"}},"asTypeSpecifier":{"type":"ListTypeSpecifier","elementType":{"type":"ChoiceTypeSpecifier","choice":[{"name":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationOrder","type":"NamedTypeSpecifier"},{"name":"{urn:healthit-gov:qdm:v5_6}MedicationActive","type":"NamedTypeSpecifier"}]}}},{"type":"As","operand":{"localId":"56","locator":"44:11-44:77","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationOrder","templateId":"PositiveMedicationOrder","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"44:33-44:76","name":"Medications for Opioid Use Disorder (MOUD)","preserve":true,"type":"ValueSetRef"}},"asTypeSpecifier":{"type":"ListTypeSpecifier","elementType":{"type":"ChoiceTypeSpecifier","choice":[{"name":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationOrder","type":"NamedTypeSpecifier"},{"name":"{urn:healthit-gov:qdm:v5_6}MedicationActive","type":"NamedTypeSpecifier"}]}}}]}}],"relationship":[{"localId":"91","locator":"45:5-47:202","alias":"MAT","type":"With","expression":{"localId":"59","locator":"45:10-45:82","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveInterventionPerformed","templateId":"PositiveInterventionPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"45:38-45:81","name":"Opioid Medication Assisted Treatment (MAT)","preserve":true,"type":"ValueSetRef"}},"suchThat":{"localId":"90","locator":"46:17-47:202","type":"And","operand":[{"localId":"77","locator":"46:17-46:257","precision":"Day","type":"In","operand":[{"localId":"70","locator":"46:17-46:171","type":"Coalesce","operand":[{"localId":"67","locator":"46:26-46:134","type":"Start","operand":{"localId":"66","locator":"46:35-46:134","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"63","locator":"46:62-46:97","path":"relevantDatetime","scope":"MedicationTreatment","type":"Property"},{"localId":"65","locator":"46:100-46:133","path":"relevantPeriod","scope":"MedicationTreatment","type":"Property"}]}},{"localId":"69","locator":"46:137-46:170","path":"authorDatetime","scope":"MedicationTreatment","type":"Property"}]},{"localId":"76","locator":"46:187-46:257","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"73","locator":"46:216-46:235","path":"relevantDatetime","scope":"MAT","type":"Property"},{"localId":"75","locator":"46:238-46:255","path":"relevantPeriod","scope":"MAT","type":"Property"}]}]},{"localId":"89","locator":"47:13-47:202","precision":"Day","type":"In","operand":[{"localId":"87","locator":"47:13-47:167","type":"Coalesce","operand":[{"localId":"84","locator":"47:22-47:130","type":"Start","operand":{"localId":"83","locator":"47:31-47:130","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"80","locator":"47:58-47:93","path":"relevantDatetime","scope":"MedicationTreatment","type":"Property"},{"localId":"82","locator":"47:96-47:129","path":"relevantPeriod","scope":"MedicationTreatment","type":"Property"}]}},{"localId":"86","locator":"47:133-47:166","path":"authorDatetime","scope":"MedicationTreatment","type":"Property"}]},{"localId":"88","locator":"47:183-47:202","name":"Measurement Period","type":"ParameterRef"}]}]}}]}},{"localId":"95","locator":"49:1-50:51","name":"SDE Ethnicity","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"95","s":[{"value":["","define ","\"SDE Ethnicity\"",":\n  "]},{"r":"94","s":[{"value":["[","\"Patient Characteristic Ethnicity\"",": "]},{"s":[{"value":["\"Ethnicity\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"94","locator":"50:3-50:51","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicEthnicity","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"50:40-50:50","name":"Ethnicity","preserve":true,"type":"ValueSetRef"}}},{"localId":"97","locator":"52:1-53:41","name":"SDE Race","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"97","s":[{"value":["","define ","\"SDE Race\"",":\n  "]},{"r":"96","s":[{"value":["[","\"Patient Characteristic Race\"",": "]},{"s":[{"value":["\"Race\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"96","locator":"53:3-53:41","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicRace","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"53:35-53:40","name":"Race","preserve":true,"type":"ValueSetRef"}}},{"localId":"99","locator":"55:1-56:58","name":"SDE Sex","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"99","s":[{"value":["","define ","\"SDE Sex\"",":\n  "]},{"r":"98","s":[{"value":["[","\"Patient Characteristic Sex\"",": "]},{"s":[{"value":["\"ONC Administrative Sex\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"98","locator":"56:3-56:58","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicSex","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"56:34-56:57","name":"ONC Administrative Sex","preserve":true,"type":"ValueSetRef"}}},{"localId":"101","locator":"58:1-59:48","name":"SDE Payer","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"101","s":[{"value":["","define ","\"SDE Payer\"",":\n  "]},{"r":"100","s":[{"value":["[","\"Patient Characteristic Payer\"",": "]},{"s":[{"value":["\"Payer Type\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"100","locator":"59:3-59:48","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicPayer","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"59:36-59:47","name":"Payer Type","preserve":true,"type":"ValueSetRef"}}},{"localId":"202","locator":"61:1-87:7","name":"Denominator Exclusion","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"202","s":[{"value":["","define ","\"Denominator Exclusion\"",":\n  /*Excludes encounters of patients with cancer pain or who are receiving palliative or hospice care at the time of the encounter or who are receiving medication for opioid use disorder, have sickle cell disease, or who are discharged to another inpatient care facility or discharged against medical advice, or expire during the inpatient stay*/\n  \n  "]},{"r":"201","s":[{"s":[{"r":"103","s":[{"r":"102","s":[{"s":[{"value":["\"Inpatient Encounters with an Opioid or Benzodiazepine at Discharge\""]}]}]},{"value":[" ","InpatientEncounter"]}]}]},{"value":["\n    "]},{"r":"200","s":[{"value":["where "]},{"r":"200","s":[{"r":"180","s":[{"r":"161","s":[{"r":"143","s":[{"r":"131","s":[{"r":"122","s":[{"r":"112","s":[{"value":["exists "]},{"r":"111","s":[{"value":["( "]},{"r":"111","s":[{"s":[{"r":"105","s":[{"r":"104","s":[{"r":"104","s":[{"value":["[","\"Diagnosis\"",": "]},{"s":[{"value":["\"Cancer Related Pain\""]}]},{"value":["]"]}]}]},{"value":[" ","Cancer"]}]}]},{"value":["\n        "]},{"r":"110","s":[{"value":["where "]},{"r":"110","s":[{"r":"107","s":[{"r":"106","s":[{"value":["Cancer"]}]},{"value":["."]},{"r":"107","s":[{"value":["prevalencePeriod"]}]}]},{"r":"110","value":[" ","overlaps day of"," "]},{"r":"109","s":[{"r":"108","s":[{"value":["InpatientEncounter"]}]},{"value":["."]},{"r":"109","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n    )"]}]}]},{"value":["\n      or "]},{"r":"121","s":[{"value":["exists "]},{"r":"120","s":[{"value":["( "]},{"r":"120","s":[{"s":[{"r":"114","s":[{"r":"113","s":[{"r":"113","s":[{"value":["[","\"Diagnosis\"",": "]},{"s":[{"value":["\"Sickle Cell Disease with and without Crisis\""]}]},{"value":["]"]}]}]},{"value":[" ","SickleCellDisease"]}]}]},{"value":["\n          "]},{"r":"119","s":[{"value":["where "]},{"r":"119","s":[{"r":"116","s":[{"r":"115","s":[{"value":["SickleCellDisease"]}]},{"value":["."]},{"r":"116","s":[{"value":["prevalencePeriod"]}]}]},{"r":"119","value":[" ","overlaps"," "]},{"r":"118","s":[{"r":"117","s":[{"value":["InpatientEncounter"]}]},{"value":["."]},{"r":"118","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n      )"]}]}]}]},{"value":["\n      or "]},{"r":"130","s":[{"value":["exists "]},{"r":"129","s":[{"value":["( "]},{"r":"129","s":[{"s":[{"r":"124","s":[{"r":"123","s":[{"s":[{"value":["InpatientEncounter",".","diagnoses"]}]}]},{"value":[" ","Diagnosis"]}]}]},{"value":["\n          "]},{"r":"128","s":[{"value":["where "]},{"r":"128","s":[{"r":"126","s":[{"r":"125","s":[{"value":["Diagnosis"]}]},{"value":["."]},{"r":"126","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"127","s":[{"value":["\"Cancer Related Pain\""]}]}]}]}]},{"value":["\n      )"]}]}]}]},{"value":["\n      or "]},{"r":"142","s":[{"value":["exists "]},{"r":"141","s":[{"value":["( "]},{"r":"141","s":[{"s":[{"r":"133","s":[{"r":"132","s":[{"r":"132","s":[{"value":["[","\"Diagnosis\"",": "]},{"s":[{"value":["\"Opioid Use Disorder\""]}]},{"value":["]"]}]}]},{"value":[" ","OUD"]}]}]},{"value":["\n          "]},{"r":"140","s":[{"value":["where "]},{"r":"140","s":[{"r":"136","s":[{"value":["start of "]},{"r":"135","s":[{"r":"134","s":[{"value":["OUD"]}]},{"value":["."]},{"r":"135","s":[{"value":["prevalencePeriod"]}]}]}]},{"r":"140","value":[" ","before day of"," "]},{"r":"139","s":[{"value":["end of "]},{"r":"138","s":[{"r":"137","s":[{"value":["InpatientEncounter"]}]},{"value":["."]},{"r":"138","s":[{"value":["relevantPeriod"]}]}]}]}]}]}]},{"value":["\n      )"]}]}]}]},{"value":["\n      or "]},{"r":"160","s":[{"value":["exists "]},{"r":"159","s":[{"value":["( "]},{"r":"159","s":[{"s":[{"r":"145","s":[{"r":"144","s":[{"s":[{"value":["\"Treatment for Opioid Use Disorders\""]}]}]},{"value":[" ","OUDTreatment"]}]}]},{"value":["\n          "]},{"r":"158","s":[{"value":["where "]},{"r":"158","s":[{"r":"155","s":[{"value":["Coalesce","("]},{"r":"152","s":[{"value":["start of "]},{"r":"151","s":[{"r":"146","s":[{"value":["Global"]}]},{"value":["."]},{"r":"151","s":[{"value":["\"NormalizeInterval\"","("]},{"r":"148","s":[{"r":"147","s":[{"value":["OUDTreatment"]}]},{"value":["."]},{"r":"148","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"150","s":[{"r":"149","s":[{"value":["OUDTreatment"]}]},{"value":["."]},{"r":"150","s":[{"value":["relevantPeriod"]}]}]},{"value":[")"]}]}]}]},{"value":[", "]},{"r":"154","s":[{"r":"153","s":[{"value":["OUDTreatment"]}]},{"value":["."]},{"r":"154","s":[{"value":["authorDatetime"]}]}]},{"value":[")"]}]},{"r":"158","value":[" ","during day of"," "]},{"r":"157","s":[{"r":"156","s":[{"value":["InpatientEncounter"]}]},{"value":["."]},{"r":"157","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n      )"]}]}]}]},{"value":["\n      or "]},{"r":"179","s":[{"value":["exists "]},{"r":"178","s":[{"value":["( "]},{"r":"178","s":[{"s":[{"r":"163","s":[{"r":"162","s":[{"s":[{"value":["\"Intervention Palliative or Hospice Care\""]}]}]},{"value":[" ","PalliativeOrHospiceCare"]}]}]},{"value":["\n          "]},{"r":"177","s":[{"value":["where "]},{"r":"177","s":[{"r":"173","s":[{"value":["Coalesce","("]},{"r":"170","s":[{"value":["start of "]},{"r":"169","s":[{"r":"164","s":[{"value":["Global"]}]},{"value":["."]},{"r":"169","s":[{"value":["\"NormalizeInterval\"","("]},{"r":"166","s":[{"r":"165","s":[{"value":["PalliativeOrHospiceCare"]}]},{"value":["."]},{"r":"166","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"168","s":[{"r":"167","s":[{"value":["PalliativeOrHospiceCare"]}]},{"value":["."]},{"r":"168","s":[{"value":["relevantPeriod"]}]}]},{"value":[")"]}]}]}]},{"value":[", "]},{"r":"172","s":[{"r":"171","s":[{"value":["PalliativeOrHospiceCare"]}]},{"value":["."]},{"r":"172","s":[{"value":["authorDatetime"]}]}]},{"value":[")"]}]},{"r":"177","value":[" ","during"," "]},{"r":"176","s":[{"r":"174","s":[{"value":["Global"]}]},{"value":["."]},{"r":"176","s":[{"value":["\"HospitalizationWithObservation\""," ( "]},{"r":"175","s":[{"value":["InpatientEncounter"]}]},{"value":[" )"]}]}]}]}]}]},{"value":["\n      )"]}]}]}]},{"value":["\n      or "]},{"r":"199","s":[{"value":["( "]},{"r":"199","s":[{"r":"194","s":[{"r":"189","s":[{"r":"184","s":[{"r":"182","s":[{"r":"181","s":[{"value":["InpatientEncounter"]}]},{"value":["."]},{"r":"182","s":[{"value":["dischargeDisposition"]}]}]},{"value":[" in "]},{"r":"183","s":[{"value":["\"Discharge To Acute Care Facility\""]}]}]},{"value":["\n          or "]},{"r":"188","s":[{"r":"186","s":[{"r":"185","s":[{"value":["InpatientEncounter"]}]},{"value":["."]},{"r":"186","s":[{"value":["dischargeDisposition"]}]}]},{"value":[" in "]},{"r":"187","s":[{"value":["\"Hospice Care Referral or Admission\""]}]}]}]},{"value":["\n          or "]},{"r":"193","s":[{"r":"191","s":[{"r":"190","s":[{"value":["InpatientEncounter"]}]},{"value":["."]},{"r":"191","s":[{"value":["dischargeDisposition"]}]}]},{"value":[" in "]},{"r":"192","s":[{"value":["\"Patient Expired\""]}]}]}]},{"value":["\n          or "]},{"r":"198","s":[{"r":"196","s":[{"r":"195","s":[{"value":["InpatientEncounter"]}]},{"value":["."]},{"r":"196","s":[{"value":["dischargeDisposition"]}]}]},{"value":[" in "]},{"r":"197","s":[{"value":["\"Left Against Medical Advice\""]}]}]}]},{"value":["\n      )"]}]}]}]}]}]}}],"expression":{"localId":"201","locator":"64:3-87:7","type":"Query","source":[{"localId":"103","locator":"64:3-64:89","alias":"InpatientEncounter","expression":{"localId":"102","locator":"64:3-64:70","name":"Inpatient Encounters with an Opioid or Benzodiazepine at Discharge","type":"ExpressionRef"}}],"relationship":[],"where":{"localId":"200","locator":"65:5-87:7","type":"Or","operand":[{"localId":"180","locator":"65:11-82:7","type":"Or","operand":[{"localId":"161","locator":"65:11-79:7","type":"Or","operand":[{"localId":"143","locator":"65:11-76:7","type":"Or","operand":[{"localId":"131","locator":"65:11-73:7","type":"Or","operand":[{"localId":"122","locator":"65:11-70:7","type":"Or","operand":[{"localId":"112","locator":"65:11-67:5","type":"Exists","operand":{"localId":"111","locator":"65:18-67:5","type":"Query","source":[{"localId":"105","locator":"65:20-65:62","alias":"Cancer","expression":{"localId":"104","locator":"65:20-65:55","dataType":"{urn:healthit-gov:qdm:v5_6}Diagnosis","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"65:34-65:54","name":"Cancer Related Pain","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"110","locator":"66:9-66:87","precision":"Day","type":"Overlaps","operand":[{"localId":"107","locator":"66:15-66:37","path":"prevalencePeriod","scope":"Cancer","type":"Property"},{"localId":"109","locator":"66:55-66:87","path":"relevantPeriod","scope":"InpatientEncounter","type":"Property"}]}}},{"localId":"121","locator":"68:10-70:7","type":"Exists","operand":{"localId":"120","locator":"68:17-70:7","type":"Query","source":[{"localId":"114","locator":"68:19-68:96","alias":"SickleCellDisease","expression":{"localId":"113","locator":"68:19-68:78","dataType":"{urn:healthit-gov:qdm:v5_6}Diagnosis","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"68:33-68:77","name":"Sickle Cell Disease with and without Crisis","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"119","locator":"69:11-69:93","type":"Overlaps","operand":[{"localId":"116","locator":"69:17-69:50","path":"prevalencePeriod","scope":"SickleCellDisease","type":"Property"},{"localId":"118","locator":"69:61-69:93","path":"relevantPeriod","scope":"InpatientEncounter","type":"Property"}]}}}]},{"localId":"130","locator":"71:10-73:7","type":"Exists","operand":{"localId":"129","locator":"71:17-73:7","type":"Query","source":[{"localId":"124","locator":"71:19-71:56","alias":"Diagnosis","expression":{"localId":"123","locator":"71:19-71:46","path":"diagnoses","scope":"InpatientEncounter","type":"Property"}}],"relationship":[],"where":{"localId":"128","locator":"72:11-72:55","type":"InValueSet","code":{"localId":"126","locator":"72:17-72:30","path":"code","scope":"Diagnosis","type":"Property"},"valueset":{"localId":"127","locator":"72:35-72:55","name":"Cancer Related Pain","preserve":true}}}}]},{"localId":"142","locator":"74:10-76:7","type":"Exists","operand":{"localId":"141","locator":"74:17-76:7","type":"Query","source":[{"localId":"133","locator":"74:19-74:58","alias":"OUD","expression":{"localId":"132","locator":"74:19-74:54","dataType":"{urn:healthit-gov:qdm:v5_6}Diagnosis","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"74:33-74:53","name":"Opioid Use Disorder","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"140","locator":"75:11-75:100","precision":"Day","type":"Before","operand":[{"localId":"136","locator":"75:17-75:45","type":"Start","operand":{"localId":"135","locator":"75:26-75:45","path":"prevalencePeriod","scope":"OUD","type":"Property"}},{"localId":"139","locator":"75:61-75:100","type":"End","operand":{"localId":"138","locator":"75:68-75:100","path":"relevantPeriod","scope":"InpatientEncounter","type":"Property"}}]}}}]},{"localId":"160","locator":"77:10-79:7","type":"Exists","operand":{"localId":"159","locator":"77:17-79:7","type":"Query","source":[{"localId":"145","locator":"77:19-77:67","alias":"OUDTreatment","expression":{"localId":"144","locator":"77:19-77:54","name":"Treatment for Opioid Use Disorders","type":"ExpressionRef"}}],"relationship":[],"where":{"localId":"158","locator":"78:11-78:198","precision":"Day","type":"In","operand":[{"localId":"155","locator":"78:17-78:150","type":"Coalesce","operand":[{"localId":"152","locator":"78:26-78:120","type":"Start","operand":{"localId":"151","locator":"78:35-78:120","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"148","locator":"78:62-78:90","path":"relevantDatetime","scope":"OUDTreatment","type":"Property"},{"localId":"150","locator":"78:93-78:119","path":"relevantPeriod","scope":"OUDTreatment","type":"Property"}]}},{"localId":"154","locator":"78:123-78:149","path":"authorDatetime","scope":"OUDTreatment","type":"Property"}]},{"localId":"157","locator":"78:166-78:198","path":"relevantPeriod","scope":"InpatientEncounter","type":"Property"}]}}}]},{"localId":"179","locator":"80:10-82:7","type":"Exists","operand":{"localId":"178","locator":"80:17-82:7","type":"Query","source":[{"localId":"163","locator":"80:19-80:83","alias":"PalliativeOrHospiceCare","expression":{"localId":"162","locator":"80:19-80:59","name":"Intervention Palliative or Hospice Care","type":"ExpressionRef"}}],"relationship":[],"where":{"localId":"177","locator":"81:11-81:253","type":"In","operand":[{"localId":"173","locator":"81:17-81:183","type":"Coalesce","operand":[{"localId":"170","locator":"81:26-81:142","type":"Start","operand":{"localId":"169","locator":"81:35-81:142","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"166","locator":"81:62-81:101","path":"relevantDatetime","scope":"PalliativeOrHospiceCare","type":"Property"},{"localId":"168","locator":"81:104-81:141","path":"relevantPeriod","scope":"PalliativeOrHospiceCare","type":"Property"}]}},{"localId":"172","locator":"81:145-81:182","path":"authorDatetime","scope":"PalliativeOrHospiceCare","type":"Property"}]},{"localId":"176","locator":"81:192-81:253","name":"HospitalizationWithObservation","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"175","locator":"81:234-81:251","name":"InpatientEncounter","type":"AliasRef"}]}]}}}]},{"localId":"199","locator":"83:10-87:7","type":"Or","operand":[{"localId":"194","locator":"83:12-85:73","type":"Or","operand":[{"localId":"189","locator":"83:12-84:92","type":"Or","operand":[{"localId":"184","locator":"83:12-83:88","type":"InValueSet","code":{"localId":"182","locator":"83:12-83:50","path":"dischargeDisposition","scope":"InpatientEncounter","type":"Property"},"valueset":{"localId":"183","locator":"83:55-83:88","name":"Discharge To Acute Care Facility","preserve":true}},{"localId":"188","locator":"84:14-84:92","type":"InValueSet","code":{"localId":"186","locator":"84:14-84:52","path":"dischargeDisposition","scope":"InpatientEncounter","type":"Property"},"valueset":{"localId":"187","locator":"84:57-84:92","name":"Hospice Care Referral or Admission","preserve":true}}]},{"localId":"193","locator":"85:14-85:73","type":"InValueSet","code":{"localId":"191","locator":"85:14-85:52","path":"dischargeDisposition","scope":"InpatientEncounter","type":"Property"},"valueset":{"localId":"192","locator":"85:57-85:73","name":"Patient Expired","preserve":true}}]},{"localId":"198","locator":"86:14-86:85","type":"InValueSet","code":{"localId":"196","locator":"86:14-86:52","path":"dischargeDisposition","scope":"InpatientEncounter","type":"Property"},"valueset":{"localId":"197","locator":"86:57-86:85","name":"Left Against Medical Advice","preserve":true}}]}]}}},{"localId":"240","locator":"97:1-112:3","name":"Numerator","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"240","s":[{"value":["","define ","\"Numerator\"",":\n  /*Encounters of patients prescribed two or more opioids or an opioid and benzodiazepine at discharge.\n  */\n  \n  "]},{"r":"239","s":[{"value":["( "]},{"r":"239","s":[{"s":[{"r":"204","s":[{"r":"203","s":[{"s":[{"value":["\"Inpatient Encounters with an Opioid or Benzodiazepine at Discharge\""]}]}]},{"value":[" ","InpatientEncounter"]}]}]},{"value":["\n      "]},{"r":"238","s":[{"value":["where "]},{"r":"238","s":[{"r":"218","s":[{"value":["( "]},{"r":"218","s":[{"r":"216","s":[{"value":["Count","("]},{"r":"215","s":[{"s":[{"r":"206","s":[{"r":"205","s":[{"r":"205","s":[{"value":["[","\"Medication, Discharge\"",": "]},{"s":[{"value":["\"Schedule II, III and IV Opioid Medications\""]}]},{"value":["]"]}]}]},{"value":[" ","Opioids"]}]}]},{"value":["\n            "]},{"r":"211","s":[{"value":["where "]},{"r":"211","s":[{"r":"208","s":[{"r":"207","s":[{"value":["Opioids"]}]},{"value":["."]},{"r":"208","s":[{"value":["authorDatetime"]}]}]},{"r":"211","value":[" ","during day of"," "]},{"r":"210","s":[{"r":"209","s":[{"value":["InpatientEncounter"]}]},{"value":["."]},{"r":"210","s":[{"value":["relevantPeriod"]}]}]}]}]},{"value":["\n            "]},{"r":"214","s":[{"value":["return distinct "]},{"r":"213","s":[{"r":"212","s":[{"value":["Opioids"]}]},{"value":["."]},{"r":"213","s":[{"value":["code"]}]}]}]}]},{"value":["\n        )"]}]},{"r":"217","value":[" ","\u003e="," ","2"]}]},{"value":["\n      )"]}]},{"value":["\n        or "]},{"r":"237","s":[{"value":["exists "]},{"r":"236","s":[{"value":["( "]},{"r":"236","s":[{"s":[{"r":"220","s":[{"r":"219","s":[{"r":"219","s":[{"value":["[","\"Medication, Discharge\"",": "]},{"s":[{"value":["\"Schedule II, III and IV Opioid Medications\""]}]},{"value":["]"]}]}]},{"value":[" ","OpioidsDischarge"]}]}]},{"value":["\n            "]},{"r":"235","s":[{"value":["where "]},{"r":"235","s":[{"r":"225","s":[{"r":"222","s":[{"r":"221","s":[{"value":["OpioidsDischarge"]}]},{"value":["."]},{"r":"222","s":[{"value":["authorDatetime"]}]}]},{"r":"225","value":[" ","during day of"," "]},{"r":"224","s":[{"r":"223","s":[{"value":["InpatientEncounter"]}]},{"value":["."]},{"r":"224","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["\n              and "]},{"r":"234","s":[{"value":["exists "]},{"r":"233","s":[{"s":[{"r":"227","s":[{"r":"226","s":[{"r":"226","s":[{"value":["[","\"Medication, Discharge\"",": "]},{"s":[{"value":["\"Schedule IV Benzodiazepines\""]}]},{"value":["]"]}]}]},{"value":[" ","BenzodiazepinesDischarge"]}]}]},{"value":["\n                "]},{"r":"232","s":[{"value":["where "]},{"r":"232","s":[{"r":"229","s":[{"r":"228","s":[{"value":["BenzodiazepinesDischarge"]}]},{"value":["."]},{"r":"229","s":[{"value":["authorDatetime"]}]}]},{"r":"232","value":[" ","during day of"," "]},{"r":"231","s":[{"r":"230","s":[{"value":["InpatientEncounter"]}]},{"value":["."]},{"r":"231","s":[{"value":["relevantPeriod"]}]}]}]}]}]}]}]}]}]},{"value":["\n        )"]}]}]}]}]}]},{"value":["\n  )"]}]}]}}],"expression":{"localId":"239","locator":"101:3-112:3","type":"Query","source":[{"localId":"204","locator":"101:5-101:91","alias":"InpatientEncounter","expression":{"localId":"203","locator":"101:5-101:72","name":"Inpatient Encounters with an Opioid or Benzodiazepine at Discharge","type":"ExpressionRef"}}],"relationship":[],"where":{"localId":"238","locator":"102:7-111:9","type":"Or","operand":[{"localId":"218","locator":"102:13-106:7","type":"GreaterOrEqual","operand":[{"localId":"216","locator":"102:15-105:9","type":"Count","source":{"localId":"215","locator":"102:21-104:40","type":"Query","source":[{"localId":"206","locator":"102:21-102:99","alias":"Opioids","expression":{"localId":"205","locator":"102:21-102:91","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationDischarge","templateId":"PositiveMedicationDischarge","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"102:47-102:90","name":"Schedule II, III and IV Opioid Medications","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"211","locator":"103:13-103:88","precision":"Day","type":"In","operand":[{"localId":"208","locator":"103:19-103:40","path":"authorDatetime","scope":"Opioids","type":"Property"},{"localId":"210","locator":"103:56-103:88","path":"relevantPeriod","scope":"InpatientEncounter","type":"Property"}]},"return":{"localId":"214","locator":"104:13-104:40","distinct":true,"expression":{"localId":"213","locator":"104:29-104:40","path":"code","scope":"Opioids","type":"Property"}}}},{"localId":"217","locator":"105:14","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"2","type":"Literal"}]},{"localId":"237","locator":"107:12-111:9","type":"Exists","operand":{"localId":"236","locator":"107:19-111:9","type":"Query","source":[{"localId":"220","locator":"107:21-107:108","alias":"OpioidsDischarge","expression":{"localId":"219","locator":"107:21-107:91","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationDischarge","templateId":"PositiveMedicationDischarge","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"107:47-107:90","name":"Schedule II, III and IV Opioid Medications","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"235","locator":"108:13-110:109","type":"And","operand":[{"localId":"225","locator":"108:19-108:97","precision":"Day","type":"In","operand":[{"localId":"222","locator":"108:19-108:49","path":"authorDatetime","scope":"OpioidsDischarge","type":"Property"},{"localId":"224","locator":"108:65-108:97","path":"relevantPeriod","scope":"InpatientEncounter","type":"Property"}]},{"localId":"234","locator":"109:19-110:109","type":"Exists","operand":{"localId":"233","locator":"109:26-110:109","type":"Query","source":[{"localId":"227","locator":"109:26-109:106","alias":"BenzodiazepinesDischarge","expression":{"localId":"226","locator":"109:26-109:81","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationDischarge","templateId":"PositiveMedicationDischarge","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"109:52-109:80","name":"Schedule IV Benzodiazepines","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"232","locator":"110:17-110:109","precision":"Day","type":"In","operand":[{"localId":"229","locator":"110:23-110:61","path":"authorDatetime","scope":"BenzodiazepinesDischarge","type":"Property"},{"localId":"231","locator":"110:77-110:109","path":"relevantPeriod","scope":"InpatientEncounter","type":"Property"}]}}}]}}}]}}}]}}},"elm_annotations":{"statements":[{"children":[{"children":[{"children":[{"text":"define \"Inpatient Encounter with Age Greater than or Equal to 18\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Global.\"Inpatient Encounter\""}]}]}],"node_type":"ExpressionRef","ref_id":"22"},{"children":[{"text":" InpatientHospitalEncounter"}]}],"ref_id":"23"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"text":"AgeInYearsAt("}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"InpatientHospitalEncounter"}]}],"ref_id":"24"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"25"}],"node_type":"Property","ref_id":"25"}],"node_type":"Start","ref_id":"26"}],"node_type":"DateFrom","ref_id":"27"},{"children":[{"text":")"}]}],"node_type":"CalculateAgeAt","ref_id":"28"},{"children":[{"text":" \u003e= 18"}],"node_type":"Literal","ref_id":"29"}],"ref_id":"30"}],"ref_id":"30"}],"node_type":"Query","ref_id":"31"}],"ref_id":"32"}],"define_name":"Inpatient Encounter with Age Greater than or Equal to 18"},{"children":[{"children":[{"children":[{"text":"define \"Inpatient Encounters with an Opioid or Benzodiazepine at Discharge\":\n  /*Captures encounters of patients with an opioid(s), benzodiazepine, or a combination of these medications at discharge*/\n  \n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Inpatient Encounter with Age Greater than or Equal to 18\""}]}]}],"node_type":"ExpressionRef","ref_id":"33"},{"children":[{"text":" InpatientEncounter"}]}],"ref_id":"34"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"text":"[\"Medication, Discharge\": "}]},{"children":[{"children":[{"text":"\"Schedule II, III and IV Opioid Medications\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"35"},{"children":[{"text":"\n      union "}]},{"children":[{"children":[{"text":"[\"Medication, Discharge\": "}]},{"children":[{"children":[{"text":"\"Schedule IV Benzodiazepines\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"36"}],"node_type":"Union","ref_id":"37"},{"children":[{"text":" )"}]}],"node_type":"Union","ref_id":"37"},{"children":[{"text":" OpioidOrBenzodiazepineDischargeMedication"}]}],"ref_id":"38"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"OpioidOrBenzodiazepineDischargeMedication"}]}],"ref_id":"39"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"40"}],"node_type":"Property","ref_id":"40"},{"children":[{"text":" during day of "}],"node_type":"In","ref_id":"43"},{"children":[{"children":[{"children":[{"text":"InpatientEncounter"}]}],"ref_id":"41"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"42"}],"node_type":"Property","ref_id":"42"}],"node_type":"In","ref_id":"43"}],"ref_id":"44"}],"node_type":"Query","ref_id":"45"}],"ref_id":"46"}],"define_name":"Inpatient Encounters with an Opioid or Benzodiazepine at Discharge"},{"children":[{"children":[{"children":[{"text":"define \"Initial Population\":\n  "}]},{"children":[{"children":[{"text":"\"Inpatient Encounters with an Opioid or Benzodiazepine at Discharge\""}]}],"node_type":"ExpressionRef","ref_id":"47"}],"ref_id":"48"}],"define_name":"Initial Population"},{"children":[{"children":[{"children":[{"text":"define \"Denominator\":\n  "}]},{"children":[{"children":[{"text":"\"Initial Population\""}]}],"node_type":"ExpressionRef","ref_id":"49"}],"ref_id":"50"}],"define_name":"Denominator"},{"children":[{"children":[{"children":[{"text":"define \"Intervention Palliative or Hospice Care\":\n  "}]},{"children":[{"children":[{"children":[{"text":"[\"Intervention, Order\": "}]},{"children":[{"children":[{"text":"\"Palliative or Hospice Care\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"51"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"[\"Intervention, Performed\": "}]},{"children":[{"children":[{"text":"\"Palliative or Hospice Care\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"52"}],"node_type":"Union","ref_id":"53"}],"ref_id":"54"}],"define_name":"Intervention Palliative or Hospice Care"},{"children":[{"children":[{"children":[{"text":"define \"Treatment for Opioid Use Disorders\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"text":"[\"Medication, Active\": "}]},{"children":[{"children":[{"text":"\"Medications for Opioid Use Disorder (MOUD)\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"55"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"[\"Medication, Order\": "}]},{"children":[{"children":[{"text":"\"Medications for Opioid Use Disorder (MOUD)\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"56"}],"node_type":"Union","ref_id":"57"},{"children":[{"text":" )"}]}],"node_type":"Union","ref_id":"57"},{"children":[{"text":" MedicationTreatment"}]}],"ref_id":"58"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"[\"Intervention, Performed\": "}]},{"children":[{"children":[{"text":"\"Opioid Medication Assisted Treatment (MAT)\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"59"}],"node_type":"Retrieve","ref_id":"59"},{"children":[{"text":" MAT"}]}],"ref_id":"60"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"61"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\"("}]},{"children":[{"children":[{"children":[{"text":"MedicationTreatment"}]}],"ref_id":"62"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"63"}],"node_type":"Property","ref_id":"63"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"MedicationTreatment"}]}],"ref_id":"64"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"65"}],"node_type":"Property","ref_id":"65"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"66"}],"node_type":"FunctionRef","ref_id":"66"}],"node_type":"Start","ref_id":"67"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"MedicationTreatment"}]}],"ref_id":"68"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"69"}],"node_type":"Property","ref_id":"69"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"70"},{"children":[{"text":" during day of "}],"node_type":"In","ref_id":"77"},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"71"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\" ( "}]},{"children":[{"children":[{"children":[{"text":"MAT"}]}],"ref_id":"72"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"73"}],"node_type":"Property","ref_id":"73"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"MAT"}]}],"ref_id":"74"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"75"}],"node_type":"Property","ref_id":"75"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"76"}],"node_type":"FunctionRef","ref_id":"76"}],"node_type":"In","ref_id":"77"},{"children":[{"text":"\n        and "}]},{"children":[{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"78"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\"("}]},{"children":[{"children":[{"children":[{"text":"MedicationTreatment"}]}],"ref_id":"79"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"80"}],"node_type":"Property","ref_id":"80"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"MedicationTreatment"}]}],"ref_id":"81"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"82"}],"node_type":"Property","ref_id":"82"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"83"}],"node_type":"FunctionRef","ref_id":"83"}],"node_type":"Start","ref_id":"84"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"MedicationTreatment"}]}],"ref_id":"85"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"86"}],"node_type":"Property","ref_id":"86"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"87"},{"children":[{"text":" during day of "}],"node_type":"In","ref_id":"89"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"88"}],"node_type":"In","ref_id":"89"}],"node_type":"And","ref_id":"90"}],"ref_id":"91"}],"node_type":"Query","ref_id":"92"}],"ref_id":"93"}],"define_name":"Treatment for Opioid Use Disorders"},{"children":[{"children":[{"children":[{"text":"define \"SDE Ethnicity\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Ethnicity\": "}]},{"children":[{"children":[{"text":"\"Ethnicity\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"94"}],"ref_id":"95"}],"define_name":"SDE Ethnicity"},{"children":[{"children":[{"children":[{"text":"define \"SDE Race\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Race\": "}]},{"children":[{"children":[{"text":"\"Race\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"96"}],"ref_id":"97"}],"define_name":"SDE Race"},{"children":[{"children":[{"children":[{"text":"define \"SDE Sex\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Sex\": "}]},{"children":[{"children":[{"text":"\"ONC Administrative Sex\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"98"}],"ref_id":"99"}],"define_name":"SDE Sex"},{"children":[{"children":[{"children":[{"text":"define \"SDE Payer\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Payer\": "}]},{"children":[{"children":[{"text":"\"Payer Type\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"100"}],"ref_id":"101"}],"define_name":"SDE Payer"},{"children":[{"children":[{"children":[{"text":"define \"Denominator Exclusion\":\n  /*Excludes encounters of patients with cancer pain or who are receiving palliative or hospice care at the time of the encounter or who are receiving medication for opioid use disorder, have sickle cell disease, or who are discharged to another inpatient care facility or discharged against medical advice, or expire during the inpatient stay*/\n  \n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Inpatient Encounters with an Opioid or Benzodiazepine at Discharge\""}]}]}],"node_type":"ExpressionRef","ref_id":"102"},{"children":[{"text":" InpatientEncounter"}]}],"ref_id":"103"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Diagnosis\": "}]},{"children":[{"children":[{"text":"\"Cancer Related Pain\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"104"}],"node_type":"Retrieve","ref_id":"104"},{"children":[{"text":" Cancer"}]}],"ref_id":"105"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Cancer"}]}],"ref_id":"106"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"prevalencePeriod"}]}],"node_type":"Property","ref_id":"107"}],"node_type":"Property","ref_id":"107"},{"children":[{"text":" overlaps day of "}],"ref_id":"110"},{"children":[{"children":[{"children":[{"text":"InpatientEncounter"}]}],"ref_id":"108"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"109"}],"node_type":"Property","ref_id":"109"}],"ref_id":"110"}],"ref_id":"110"}],"node_type":"Query","ref_id":"111"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"111"}],"node_type":"Exists","ref_id":"112"},{"children":[{"text":"\n      or "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Diagnosis\": "}]},{"children":[{"children":[{"text":"\"Sickle Cell Disease with and without Crisis\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"113"}],"node_type":"Retrieve","ref_id":"113"},{"children":[{"text":" SickleCellDisease"}]}],"ref_id":"114"}]},{"children":[{"text":"\n          "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"SickleCellDisease"}]}],"ref_id":"115"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"prevalencePeriod"}]}],"node_type":"Property","ref_id":"116"}],"node_type":"Property","ref_id":"116"},{"children":[{"text":" overlaps "}],"ref_id":"119"},{"children":[{"children":[{"children":[{"text":"InpatientEncounter"}]}],"ref_id":"117"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"118"}],"node_type":"Property","ref_id":"118"}],"ref_id":"119"}],"ref_id":"119"}],"node_type":"Query","ref_id":"120"},{"children":[{"text":"\n      )"}]}],"node_type":"Query","ref_id":"120"}],"node_type":"Exists","ref_id":"121"}],"node_type":"Or","ref_id":"122"},{"children":[{"text":"\n      or "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"InpatientEncounter.diagnoses"}]}]}],"node_type":"Property","ref_id":"123"},{"children":[{"text":" Diagnosis"}]}],"ref_id":"124"}]},{"children":[{"text":"\n          "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Diagnosis"}]}],"ref_id":"125"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"126"}],"ref_id":"126"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Cancer Related Pain\""}]}],"ref_id":"127"}],"ref_id":"128"}],"ref_id":"128"}],"node_type":"Query","ref_id":"129"},{"children":[{"text":"\n      )"}]}],"node_type":"Query","ref_id":"129"}],"node_type":"Exists","ref_id":"130"}],"node_type":"Or","ref_id":"131"},{"children":[{"text":"\n      or "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Diagnosis\": "}]},{"children":[{"children":[{"text":"\"Opioid Use Disorder\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"132"}],"node_type":"Retrieve","ref_id":"132"},{"children":[{"text":" OUD"}]}],"ref_id":"133"}]},{"children":[{"text":"\n          "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"OUD"}]}],"ref_id":"134"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"prevalencePeriod"}]}],"node_type":"Property","ref_id":"135"}],"node_type":"Property","ref_id":"135"}],"node_type":"Start","ref_id":"136"},{"children":[{"text":" before day of "}],"ref_id":"140"},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"InpatientEncounter"}]}],"ref_id":"137"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"138"}],"node_type":"Property","ref_id":"138"}],"node_type":"End","ref_id":"139"}],"ref_id":"140"}],"ref_id":"140"}],"node_type":"Query","ref_id":"141"},{"children":[{"text":"\n      )"}]}],"node_type":"Query","ref_id":"141"}],"node_type":"Exists","ref_id":"142"}],"node_type":"Or","ref_id":"143"},{"children":[{"text":"\n      or "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Treatment for Opioid Use Disorders\""}]}]}],"node_type":"ExpressionRef","ref_id":"144"},{"children":[{"text":" OUDTreatment"}]}],"ref_id":"145"}]},{"children":[{"text":"\n          "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"146"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\"("}]},{"children":[{"children":[{"children":[{"text":"OUDTreatment"}]}],"ref_id":"147"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"148"}],"node_type":"Property","ref_id":"148"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"OUDTreatment"}]}],"ref_id":"149"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"150"}],"node_type":"Property","ref_id":"150"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"151"}],"node_type":"FunctionRef","ref_id":"151"}],"node_type":"Start","ref_id":"152"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"OUDTreatment"}]}],"ref_id":"153"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"154"}],"node_type":"Property","ref_id":"154"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"155"},{"children":[{"text":" during day of "}],"ref_id":"158"},{"children":[{"children":[{"children":[{"text":"InpatientEncounter"}]}],"ref_id":"156"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"157"}],"node_type":"Property","ref_id":"157"}],"ref_id":"158"}],"ref_id":"158"}],"node_type":"Query","ref_id":"159"},{"children":[{"text":"\n      )"}]}],"node_type":"Query","ref_id":"159"}],"node_type":"Exists","ref_id":"160"}],"node_type":"Or","ref_id":"161"},{"children":[{"text":"\n      or "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Intervention Palliative or Hospice Care\""}]}]}],"node_type":"ExpressionRef","ref_id":"162"},{"children":[{"text":" PalliativeOrHospiceCare"}]}],"ref_id":"163"}]},{"children":[{"text":"\n          "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"164"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\"("}]},{"children":[{"children":[{"children":[{"text":"PalliativeOrHospiceCare"}]}],"ref_id":"165"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"166"}],"node_type":"Property","ref_id":"166"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"PalliativeOrHospiceCare"}]}],"ref_id":"167"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"168"}],"node_type":"Property","ref_id":"168"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"169"}],"node_type":"FunctionRef","ref_id":"169"}],"node_type":"Start","ref_id":"170"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"PalliativeOrHospiceCare"}]}],"ref_id":"171"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"172"}],"node_type":"Property","ref_id":"172"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"173"},{"children":[{"text":" during "}],"ref_id":"177"},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"174"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"HospitalizationWithObservation\" ( "}]},{"children":[{"children":[{"text":"InpatientEncounter"}]}],"node_type":"AliasRef","ref_id":"175"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"176"}],"node_type":"FunctionRef","ref_id":"176"}],"ref_id":"177"}],"ref_id":"177"}],"node_type":"Query","ref_id":"178"},{"children":[{"text":"\n      )"}]}],"node_type":"Query","ref_id":"178"}],"node_type":"Exists","ref_id":"179"}],"node_type":"Or","ref_id":"180"},{"children":[{"text":"\n      or "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"InpatientEncounter"}]}],"ref_id":"181"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"dischargeDisposition"}]}],"ref_id":"182"}],"ref_id":"182"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Discharge To Acute Care Facility\""}]}],"ref_id":"183"}],"node_type":"InValueSet","ref_id":"184"},{"children":[{"text":"\n          or "}]},{"children":[{"children":[{"children":[{"children":[{"text":"InpatientEncounter"}]}],"ref_id":"185"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"dischargeDisposition"}]}],"ref_id":"186"}],"ref_id":"186"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Hospice Care Referral or Admission\""}]}],"ref_id":"187"}],"node_type":"InValueSet","ref_id":"188"}],"node_type":"Or","ref_id":"189"},{"children":[{"text":"\n          or "}]},{"children":[{"children":[{"children":[{"children":[{"text":"InpatientEncounter"}]}],"ref_id":"190"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"dischargeDisposition"}]}],"ref_id":"191"}],"ref_id":"191"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Patient Expired\""}]}],"ref_id":"192"}],"node_type":"InValueSet","ref_id":"193"}],"node_type":"Or","ref_id":"194"},{"children":[{"text":"\n          or "}]},{"children":[{"children":[{"children":[{"children":[{"text":"InpatientEncounter"}]}],"ref_id":"195"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"dischargeDisposition"}]}],"ref_id":"196"}],"ref_id":"196"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Left Against Medical Advice\""}]}],"ref_id":"197"}],"node_type":"InValueSet","ref_id":"198"}],"node_type":"Or","ref_id":"199"},{"children":[{"text":"\n      )"}]}],"node_type":"Or","ref_id":"199"}],"ref_id":"200"}],"ref_id":"200"}],"node_type":"Query","ref_id":"201"}],"ref_id":"202"}],"define_name":"Denominator Exclusion"},{"children":[{"children":[{"children":[{"text":"define \"Numerator\":\n  /*Encounters of patients prescribed two or more opioids or an opioid and benzodiazepine at discharge.\n  */\n  \n  "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Inpatient Encounters with an Opioid or Benzodiazepine at Discharge\""}]}]}],"node_type":"ExpressionRef","ref_id":"203"},{"children":[{"text":" InpatientEncounter"}]}],"ref_id":"204"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"text":"Count("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Medication, Discharge\": "}]},{"children":[{"children":[{"text":"\"Schedule II, III and IV Opioid Medications\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"205"}],"node_type":"Retrieve","ref_id":"205"},{"children":[{"text":" Opioids"}]}],"ref_id":"206"}]},{"children":[{"text":"\n            "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Opioids"}]}],"ref_id":"207"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"208"}],"node_type":"Property","ref_id":"208"},{"children":[{"text":" during day of "}],"ref_id":"211"},{"children":[{"children":[{"children":[{"text":"InpatientEncounter"}]}],"ref_id":"209"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"210"}],"node_type":"Property","ref_id":"210"}],"ref_id":"211"}],"ref_id":"211"},{"children":[{"text":"\n            "}]},{"children":[{"children":[{"text":"return distinct "}]},{"children":[{"children":[{"children":[{"text":"Opioids"}]}],"ref_id":"212"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"node_type":"Property","ref_id":"213"}],"node_type":"Property","ref_id":"213"}],"ref_id":"214"}],"ref_id":"215"},{"children":[{"text":"\n        )"}]}],"node_type":"Count","ref_id":"216"},{"children":[{"text":" \u003e= 2"}],"node_type":"Literal","ref_id":"217"}],"node_type":"GreaterOrEqual","ref_id":"218"},{"children":[{"text":"\n      )"}]}],"node_type":"GreaterOrEqual","ref_id":"218"},{"children":[{"text":"\n        or "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Medication, Discharge\": "}]},{"children":[{"children":[{"text":"\"Schedule II, III and IV Opioid Medications\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"219"}],"node_type":"Retrieve","ref_id":"219"},{"children":[{"text":" OpioidsDischarge"}]}],"ref_id":"220"}]},{"children":[{"text":"\n            "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"OpioidsDischarge"}]}],"ref_id":"221"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"222"}],"node_type":"Property","ref_id":"222"},{"children":[{"text":" during day of "}],"node_type":"In","ref_id":"225"},{"children":[{"children":[{"children":[{"text":"InpatientEncounter"}]}],"ref_id":"223"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"224"}],"node_type":"Property","ref_id":"224"}],"node_type":"In","ref_id":"225"},{"children":[{"text":"\n              and "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Medication, Discharge\": "}]},{"children":[{"children":[{"text":"\"Schedule IV Benzodiazepines\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"226"}],"node_type":"Retrieve","ref_id":"226"},{"children":[{"text":" BenzodiazepinesDischarge"}]}],"ref_id":"227"}]},{"children":[{"text":"\n                "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"BenzodiazepinesDischarge"}]}],"ref_id":"228"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"229"}],"node_type":"Property","ref_id":"229"},{"children":[{"text":" during day of "}],"ref_id":"232"},{"children":[{"children":[{"children":[{"text":"InpatientEncounter"}]}],"ref_id":"230"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"231"}],"node_type":"Property","ref_id":"231"}],"ref_id":"232"}],"ref_id":"232"}],"node_type":"Query","ref_id":"233"}],"node_type":"Exists","ref_id":"234"}],"ref_id":"235"}],"ref_id":"235"}],"node_type":"Query","ref_id":"236"},{"children":[{"text":"\n        )"}]}],"node_type":"Query","ref_id":"236"}],"node_type":"Exists","ref_id":"237"}],"ref_id":"238"}],"ref_id":"238"}],"node_type":"Query","ref_id":"239"},{"children":[{"text":"\n  )"}]}],"node_type":"Query","ref_id":"239"}],"ref_id":"240"}],"define_name":"Numerator"}],"identifier":{"id":"SafeUseofOpioidsConcurrentPrescribing","version":"7.0.000"}},"is_main_library":true,"is_top_level":true,"library_name":"SafeUseofOpioidsConcurrentPrescribing","library_version":"7.0.000","statement_dependencies":[{"_id":"68923ee8a83e15671c2e0d9e","statement_name":"Patient"},{"_id":"68923ee8a83e15671c2e0d9f","statement_name":"Inpatient Encounter with Age Greater than or Equal to 18","statement_references":[{"_id":"68923ee8a83e15671c2e0d97","hqmf_id":null,"library_name":"MATGlobalCommonFunctionsQDM","statement_name":"Inpatient Encounter"},{"_id":"68923ee8a83e15671c2e0d98","hqmf_id":null,"library_name":"SafeUseofOpioidsConcurrentPrescribing","statement_name":"Patient"}]},{"_id":"68923ee8a83e15671c2e0da0","statement_name":"Inpatient Encounters with an Opioid or Benzodiazepine at Discharge","statement_references":[{"_id":"68923eeea83e15671c2e10e3","hqmf_id":null,"library_name":"SafeUseofOpioidsConcurrentPrescribing","statement_name":"Inpatient Encounter with Age Greater than or Equal to 18"}]},{"_id":"68923ee8a83e15671c2e0da1","statement_name":"Initial Population","statement_references":[{"_id":"68923eeea83e15671c2e10e4","hqmf_id":null,"library_name":"SafeUseofOpioidsConcurrentPrescribing","statement_name":"Inpatient Encounters with an Opioid or Benzodiazepine at Discharge"}]},{"_id":"68923ee8a83e15671c2e0da2","statement_name":"Denominator","statement_references":[{"_id":"68923eeea83e15671c2e10e5","hqmf_id":null,"library_name":"SafeUseofOpioidsConcurrentPrescribing","statement_name":"Initial Population"}]},{"_id":"68923ee8a83e15671c2e0da3","statement_name":"Intervention Palliative or Hospice Care"},{"_id":"68923ee8a83e15671c2e0da4","statement_name":"Treatment for Opioid Use Disorders","statement_references":[{"_id":"68923eeea83e15671c2e10e6","hqmf_id":null,"library_name":"MATGlobalCommonFunctionsQDM","statement_name":"NormalizeInterval"}]},{"_id":"68923ee8a83e15671c2e0da5","statement_name":"SDE Ethnicity"},{"_id":"68923ee8a83e15671c2e0da6","statement_name":"SDE Race"},{"_id":"68923ee8a83e15671c2e0da7","statement_name":"SDE Sex"},{"_id":"68923ee8a83e15671c2e0da8","statement_name":"SDE Payer"},{"_id":"68923ee8a83e15671c2e0da9","statement_name":"Denominator Exclusion","statement_references":[{"_id":"68923ee8a83e15671c2e0d99","hqmf_id":null,"library_name":"SafeUseofOpioidsConcurrentPrescribing","statement_name":"Inpatient Encounters with an Opioid or Benzodiazepine at Discharge"},{"_id":"68923ee8a83e15671c2e0d9a","hqmf_id":null,"library_name":"SafeUseofOpioidsConcurrentPrescribing","statement_name":"Treatment for Opioid Use Disorders"},{"_id":"68923ee8a83e15671c2e0d9b","hqmf_id":null,"library_name":"MATGlobalCommonFunctionsQDM","statement_name":"NormalizeInterval"},{"_id":"68923ee8a83e15671c2e0d9c","hqmf_id":null,"library_name":"SafeUseofOpioidsConcurrentPrescribing","statement_name":"Intervention Palliative or Hospice Care"},{"_id":"68923ee8a83e15671c2e0d9d","hqmf_id":null,"library_name":"MATGlobalCommonFunctionsQDM","statement_name":"HospitalizationWithObservation"}]},{"_id":"68923ee8a83e15671c2e0daa","statement_name":"Numerator","statement_references":[{"_id":"68923eeea83e15671c2e10e7","hqmf_id":null,"library_name":"SafeUseofOpioidsConcurrentPrescribing","statement_name":"Inpatient Encounters with an Opioid or Benzodiazepine at Discharge"}]}]},{"_id":"68923ee8a83e15671c2e0daf","cql":"library MATGlobalCommonFunctionsQDM version '8.0.000'\n\n/*1. Upversion to 8.0.000 to support 2024 AU efforts.  No content changes were made from version 7.2.000 to this version 8.0.000*/\n\nusing QDM version '5.6'\n\nvalueset \"Emergency Department Visit\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.292' \nvalueset \"Encounter Inpatient\": 'urn:oid:2.16.840.1.113883.3.666.5.307' \nvalueset \"Intensive Care Unit\": 'urn:oid:2.16.840.1.113762.1.4.1029.206' \nvalueset \"Observation Services\": 'urn:oid:2.16.840.1.113762.1.4.1111.143' \nvalueset \"Outpatient Surgery Service\": 'urn:oid:2.16.840.1.113762.1.4.1110.38' \n\nparameter \"Measurement Period\" Interval\u003cDateTime\u003e\n\ncontext Patient\n\ndefine \"ED Encounter\":\n  [\"Encounter, Performed\": \"Emergency Department Visit\"]\n\ndefine \"Inpatient Encounter\":\n  [\"Encounter, Performed\": \"Encounter Inpatient\"] EncounterInpatient\n    where EncounterInpatient.relevantPeriod ends during day of \"Measurement Period\"\n\n/*@description: Returns an interval of date values extracted from the input interval of date-time values\n@comment: This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability.*/\ndefine function \"ToDateInterval\"(period Interval\u003cDateTime\u003e ):\n  Interval[date from start of period, date from end of period]\n\n/*calculates the difference in calendar days between the start and end of the given interval.*/\ndefine function \"LengthInDays\"(Value Interval\u003cDateTime\u003e ):\n  difference in days between start of Value and end of Value\n\n/*returns list of all locations within an encounter, including locations for immediately prior ED visit.*/\ndefine function \"HospitalizationLocations\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet EDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn if EDVisit is null then Visit.facilityLocations \n  \t\telse flatten { EDVisit.facilityLocations, Visit.facilityLocations }\n\n/*Returns the arrival time in the ED for the encounter.*/\ndefine function \"EmergencyDepartmentArrivalTime\"(Encounter \"Encounter, Performed\" ):\n  start of First((\"HospitalizationLocations\"(Encounter))HospitalLocation\n  \t\twhere HospitalLocation.code in \"Emergency Department Visit\"\n  \t\tsort by start of locationPeriod\n  ).locationPeriod\n\n/*Returns admission time for an encounter or for immediately prior emergency department visit.*/\ndefine function \"HospitalAdmissionTime\"(Encounter \"Encounter, Performed\" ):\n  start of \"Hospitalization\"(Encounter)\n\n/*Returns earliest arrival time for an encounter including any prior ED visit.*/\ndefine function \"HospitalArrivalTime\"(Encounter \"Encounter, Performed\" ):\n  start of First((\"HospitalizationLocations\"(Encounter))HospitalLocation\n  \t\tsort by start of locationPeriod\n  ).locationPeriod\n\n/*Hospitalization returns the total interval for admission to discharge for the given encounter, or for the admission of any immediately prior emergency department visit to the discharge of the given encounter.*/\ndefine function \"Hospitalization\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet EDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn Interval[Coalesce(start of EDVisit.relevantPeriod, start of Visit.relevantPeriod), \n  \tend of Visit.relevantPeriod]\n\n/*Returns the length of stay in days (i.e. the number of days between admission and discharge) for the given encounter, or from the admission of any immediately prior emergency department visit to the discharge of the encounter*/\ndefine function \"HospitalizationLengthofStay\"(Encounter \"Encounter, Performed\" ):\n  LengthInDays(\"Hospitalization\"(Encounter))\n\n/*Returns the latest departure time for encounter including any prior ED visit.*/\ndefine function \"HospitalDepartureTime\"(Encounter \"Encounter, Performed\" ):\n  end of Last((\"HospitalizationLocations\"(Encounter))HospitalLocation\n  \t\tsort by start of locationPeriod\n  ).locationPeriod\n\n/*Hospital Discharge Time returns the discharge time for an encounter*/\ndefine function \"HospitalDischargeTime\"(Encounter \"Encounter, Performed\" ):\n  end of Encounter.relevantPeriod\n\n/*Hospitalization with Observation and Outpatient Surgery Service returns the total interval from the start of any immediately prior emergency department visit, outpatient surgery visit or observation visit to the discharge of the given encounter.*/\ndefine function \"HospitalizationWithObservationAndOutpatientSurgeryService\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet ObsVisit: Last([\"Encounter, Performed\": \"Observation Services\"] LastObs\n  \t\t\twhere LastObs.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t),\n  \tVisitStart: Coalesce(start of ObsVisit.relevantPeriod, start of Visit.relevantPeriod),\n  \tEDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before VisitStart\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t),\n  \tVisitStartWithED: Coalesce(start of EDVisit.relevantPeriod, VisitStart),\n  \tOutpatientSurgeryVisit: Last([\"Encounter, Performed\": \"Outpatient Surgery Service\"] LastSurgeryOP\n  \t\t\twhere LastSurgeryOP.relevantPeriod ends 1 hour or less on or before VisitStartWithED\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn Interval[Coalesce(start of OutpatientSurgeryVisit.relevantPeriod, VisitStartWithED), \n  \tend of Visit.relevantPeriod]\n\n/*Hospitalization with Observation returns the total interval from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\ndefine function \"HospitalizationWithObservation\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet ObsVisit: Last([\"Encounter, Performed\": \"Observation Services\"] LastObs\n  \t\t\twhere LastObs.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t),\n  \tVisitStart: Coalesce(start of ObsVisit.relevantPeriod, start of Visit.relevantPeriod),\n  \tEDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before VisitStart\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn Interval[Coalesce(start of EDVisit.relevantPeriod, VisitStart), \n  \tend of Visit.relevantPeriod]\n\n/*Hospitalization with Observation Length of Stay returns the length in days from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\ndefine function \"HospitalizationWithObservationLengthofStay\"(Encounter \"Encounter, Performed\" ):\n  \"LengthInDays\"(\"HospitalizationWithObservation\"(Encounter))\n\n/*First Inpatient Intensive Care Unit returns the first intensive care unit for the given encounter, without considering any immediately prior emergency department visit.*/\ndefine function \"FirstInpatientIntensiveCareUnit\"(Encounter \"Encounter, Performed\" ):\n  First((Encounter.facilityLocations)HospitalLocation\n      where HospitalLocation.code in \"Intensive Care Unit\"\n        and HospitalLocation.locationPeriod during Encounter.relevantPeriod\n      sort by start of locationPeriod\n  )\n\n/*Given a datetime and a period, returns the period (if a period is provided) or the interval beginning and ending on the datetime (if a datetime is provided)*/\ndefine function \"NormalizeInterval\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  if pointInTime is not null then Interval[pointInTime, pointInTime]\n    else if period is not null then period \n    else null as Interval\u003cDateTime\u003e\n\n/*Given an interval, return true if the interval has a starting boundary specified (i.e. the start of the interval is not null and not the minimum DateTime value)*/\ndefine function \"HasStart\"(period Interval\u003cDateTime\u003e ):\n  not ( start of period is null\n      or start of period = minimum DateTime\n  )\n\n/*Given an interval, return true if the interval has an ending boundary specified (i.e. the end of the interval is not null and not the maximum DateTime value)*/\ndefine function \"HasEnd\"(period Interval\u003cDateTime\u003e ):\n  not ( \n    end of period is null\n      or \n      end of period = maximum DateTime\n  )\n\n/*Given an interval, return the ending point if the interval has an ending boundary specified, otherwise, return the starting point*/\ndefine function \"Latest\"(period Interval\u003cDateTime\u003e ):\n  if ( HasEnd(period)) then \n  end of period \n    else start of period\n\n/*Given an interval, return the starting point if the interval has a starting boundary specified, otherwise, return the ending point*/\ndefine function \"Earliest\"(period Interval\u003cDateTime\u003e ):\n  if ( HasStart(period)) then start of period \n    else \n  end of period\n\n/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the ending point of the period if the period has an ending boundary specified, otherwise returns the starting point of the interval*/\ndefine function \"LatestOf\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  Latest(NormalizeInterval(pointInTime, period))\n\n/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the starting point of the period if the period has a starting boundary specified, otherwise returns the ending point of the period*/\ndefine function \"EarliestOf\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  Earliest(NormalizeInterval(pointInTime, period))\n\n","elm":{"library":{"annotation":[{"translatorOptions":"EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion,DisableMethodInvocation","type":"CqlToElmInfo"},{"type":"Annotation","s":{"r":"395","s":[{"value":["","library MATGlobalCommonFunctionsQDM version '8.0.000'"]}]}}],"identifier":{"id":"MATGlobalCommonFunctionsQDM","version":"8.0.000"},"schemaIdentifier":{"id":"urn:hl7-org:elm","version":"r1"},"usings":{"def":[{"localIdentifier":"System","uri":"urn:hl7-org:elm-types:r1"},{"localId":"1","locator":"5:1-5:23","localIdentifier":"QDM","uri":"urn:healthit-gov:qdm:v5_6","version":"5.6","annotation":[{"type":"Annotation","s":{"r":"1","s":[{"value":["/*1. Upversion to 8.0.000 to support 2024 AU efforts.  No content changes were made from version 7.2.000 to this version 8.0.000*/\n","using "]},{"s":[{"value":["QDM"]}]},{"value":[" version ","'5.6'"]}]}}]}]},"parameters":{"def":[{"localId":"9","locator":"13:1-13:49","name":"Measurement Period","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"9","s":[{"value":["","parameter ","\"Measurement Period\""," "]},{"r":"8","s":[{"value":["Interval\u003c"]},{"r":"7","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}}],"parameterTypeSpecifier":{"localId":"8","locator":"13:32-13:49","type":"IntervalTypeSpecifier","pointType":{"localId":"7","locator":"13:41-13:48","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},"valueSets":{"def":[{"localId":"2","locator":"7:1-7:82","name":"Emergency Department Visit","id":"2.16.840.1.113883.3.117.1.7.1.292","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"2","s":[{"value":["","valueset ","\"Emergency Department Visit\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.292'"]}]}}]},{"localId":"3","locator":"8:1-8:71","name":"Encounter Inpatient","id":"2.16.840.1.113883.3.666.5.307","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"3","s":[{"value":["","valueset ","\"Encounter Inpatient\"",": ","'urn:oid:2.16.840.1.113883.3.666.5.307'"]}]}}]},{"localId":"4","locator":"9:1-9:72","name":"Intensive Care Unit","id":"2.16.840.1.113762.1.4.1029.206","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"4","s":[{"value":["","valueset ","\"Intensive Care Unit\"",": ","'urn:oid:2.16.840.1.113762.1.4.1029.206'"]}]}}]},{"localId":"5","locator":"10:1-10:73","name":"Observation Services","id":"2.16.840.1.113762.1.4.1111.143","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"5","s":[{"value":["","valueset ","\"Observation Services\"",": ","'urn:oid:2.16.840.1.113762.1.4.1111.143'"]}]}}]},{"localId":"6","locator":"11:1-11:78","name":"Outpatient Surgery Service","id":"2.16.840.1.113762.1.4.1110.38","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"6","s":[{"value":["","valueset ","\"Outpatient Surgery Service\"",": ","'urn:oid:2.16.840.1.113762.1.4.1110.38'"]}]}}]}]},"contexts":{"def":[{"locator":"15:1-15:15","name":"Patient"}]},"statements":{"def":[{"locator":"15:1-15:15","name":"Patient","context":"Patient","expression":{"type":"SingletonFrom","operand":{"locator":"15:1-15:15","dataType":"{urn:healthit-gov:qdm:v5_6}Patient","templateId":"Patient","type":"Retrieve"}}},{"localId":"11","locator":"17:1-18:56","name":"ED Encounter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"11","s":[{"value":["","define ","\"ED Encounter\"",":\n  "]},{"r":"10","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"10","locator":"18:3-18:56","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"18:28-18:55","name":"Emergency Department Visit","preserve":true,"type":"ValueSetRef"}}},{"localId":"19","locator":"20:1-22:83","name":"Inpatient Encounter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"19","s":[{"value":["","define ","\"Inpatient Encounter\"",":\n  "]},{"r":"18","s":[{"s":[{"r":"13","s":[{"r":"12","s":[{"r":"12","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Encounter Inpatient\""]}]},{"value":["]"]}]}]},{"value":[" ","EncounterInpatient"]}]}]},{"value":["\n    "]},{"r":"17","s":[{"value":["where "]},{"r":"17","s":[{"r":"15","s":[{"r":"14","s":[{"value":["EncounterInpatient"]}]},{"value":["."]},{"r":"15","s":[{"value":["relevantPeriod"]}]}]},{"r":"17","value":[" ","ends during day of"," "]},{"r":"16","s":[{"value":["\"Measurement Period\""]}]}]}]}]}]}}],"expression":{"localId":"18","locator":"21:3-22:83","type":"Query","source":[{"localId":"13","locator":"21:3-21:68","alias":"EncounterInpatient","expression":{"localId":"12","locator":"21:3-21:49","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"21:28-21:48","name":"Encounter Inpatient","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"17","locator":"22:5-22:83","precision":"Day","type":"In","operand":[{"locator":"22:45-22:48","type":"End","operand":{"localId":"15","locator":"22:11-22:43","path":"relevantPeriod","scope":"EncounterInpatient","type":"Property"}},{"localId":"16","locator":"22:64-22:83","name":"Measurement Period","type":"ParameterRef"}]}}},{"localId":"29","locator":"29:1-30:62","name":"ToDateInterval","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","t":[{"name":"description","value":"Returns an interval of date values extracted from the input interval of date-time values"},{"name":"description","value":"Returns an interval of date values extracted from the input interval of date-time values"},{"name":"comment","value":"This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability."}],"s":{"r":"29","s":[{"value":["/*@description: Returns an interval of date values extracted from the input interval of date-time values\n@comment: This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability.*/\n","define function ","\"ToDateInterval\"","(","period"," "]},{"r":"21","s":[{"value":["Interval\u003c"]},{"r":"20","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"28","s":[{"r":"28","s":[{"value":["Interval["]},{"r":"24","s":[{"value":["date from "]},{"r":"23","s":[{"value":["start of "]},{"r":"22","s":[{"value":["period"]}]}]}]},{"value":[", "]},{"r":"27","s":[{"value":["date from "]},{"r":"26","s":[{"value":["end of "]},{"r":"25","s":[{"value":["period"]}]}]}]},{"value":["]"]}]}]}]}}],"expression":{"localId":"28","locator":"30:3-30:62","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"24","locator":"30:12-30:36","type":"DateFrom","operand":{"localId":"23","locator":"30:22-30:36","type":"Start","operand":{"localId":"22","locator":"30:31-30:36","name":"period","type":"OperandRef"}}},"high":{"localId":"27","locator":"30:39-30:61","type":"DateFrom","operand":{"localId":"26","locator":"30:49-30:61","type":"End","operand":{"localId":"25","locator":"30:56-30:61","name":"period","type":"OperandRef"}}}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"21","locator":"29:41-29:58","type":"IntervalTypeSpecifier","pointType":{"localId":"20","locator":"29:50-29:57","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"37","locator":"33:1-34:60","name":"LengthInDays","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"37","s":[{"value":["/*calculates the difference in calendar days between the start and end of the given interval.*/\n","define function ","\"LengthInDays\"","(","Value"," "]},{"r":"31","s":[{"value":["Interval\u003c"]},{"r":"30","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"36","s":[{"r":"36","s":[{"value":["difference in days between "]},{"r":"33","s":[{"value":["start of "]},{"r":"32","s":[{"value":["Value"]}]}]},{"value":[" and "]},{"r":"35","s":[{"value":["end of "]},{"r":"34","s":[{"value":["Value"]}]}]}]}]}]}}],"expression":{"localId":"36","locator":"34:3-34:60","precision":"Day","type":"DifferenceBetween","operand":[{"localId":"33","locator":"34:30-34:43","type":"Start","operand":{"localId":"32","locator":"34:39-34:43","name":"Value","type":"OperandRef"}},{"localId":"35","locator":"34:49-34:60","type":"End","operand":{"localId":"34","locator":"34:56-34:60","name":"Value","type":"OperandRef"}}]},"operand":[{"name":"Value","operandTypeSpecifier":{"localId":"31","locator":"33:38-33:55","type":"IntervalTypeSpecifier","pointType":{"localId":"30","locator":"33:47-33:54","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"70","locator":"37:1-45:71","name":"HospitalizationLocations","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"70","s":[{"value":["/*returns list of all locations within an encounter, including locations for immediately prior ED visit.*/\n","define function ","\"HospitalizationLocations\"","(","Encounter"," "]},{"r":"38","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"69","s":[{"r":"69","s":[{"s":[{"r":"40","s":[{"r":"39","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"56","s":[{"value":["EDVisit",": "]},{"r":"55","s":[{"value":["Last","("]},{"r":"54","s":[{"s":[{"r":"42","s":[{"r":"41","s":[{"r":"41","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"49","s":[{"value":["where "]},{"r":"49","s":[{"r":"44","s":[{"r":"43","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"44","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"49","s":[{"value":["ends "]},{"r":"48","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"47","s":[{"value":["start of "]},{"r":"46","s":[{"r":"45","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"46","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"53","s":[{"value":["sort by \n  \t\t\t"]},{"r":"52","s":[{"r":"51","s":[{"value":["end of "]},{"r":"50","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"68","s":[{"value":["return "]},{"r":"67","s":[{"value":["if "]},{"r":"58","s":[{"r":"57","s":[{"value":["EDVisit"]}]},{"value":[" is null"]}]},{"value":[" then "]},{"r":"60","s":[{"r":"59","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"60","s":[{"value":["facilityLocations"]}]}]},{"value":[" \n  \t\telse "]},{"r":"66","s":[{"value":["flatten "]},{"r":"65","s":[{"value":["{ "]},{"r":"62","s":[{"r":"61","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"62","s":[{"value":["facilityLocations"]}]}]},{"value":[", "]},{"r":"64","s":[{"r":"63","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"64","s":[{"value":["facilityLocations"]}]}]},{"value":[" }"]}]}]}]}]}]}]}]}}],"expression":{"localId":"69","locator":"38:3-45:71","type":"Query","source":[{"localId":"40","locator":"38:3-38:17","alias":"Visit","expression":{"localId":"39","locator":"38:3-38:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"56","locator":"39:8-43:4","identifier":"EDVisit","expression":{"localId":"55","locator":"39:17-43:4","type":"Last","source":{"localId":"54","locator":"39:22-42:26","type":"Query","source":[{"localId":"42","locator":"39:22-39:82","alias":"LastED","expression":{"localId":"41","locator":"39:22-39:75","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"39:47-39:74","name":"Emergency Department Visit","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"49","locator":"40:6-40:95","type":"And","operand":[{"locator":"40:39-40:52","type":"In","operand":[{"locator":"40:34-40:37","type":"End","operand":{"localId":"44","locator":"40:12-40:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"40:39-40:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"40:67-40:95","type":"Subtract","operand":[{"localId":"47","locator":"40:67-40:95","type":"Start","operand":{"localId":"46","locator":"40:76-40:95","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"48","locator":"40:39-40:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"47","locator":"40:67-40:95","type":"Start","operand":{"localId":"46","locator":"40:76-40:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"40:39-40:52","type":"Not","operand":{"locator":"40:39-40:52","type":"IsNull","operand":{"localId":"47","locator":"40:67-40:95","type":"Start","operand":{"localId":"46","locator":"40:76-40:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"53","locator":"41:6-42:26","by":[{"localId":"52","locator":"42:6-42:26","direction":"asc","type":"ByExpression","expression":{"localId":"51","locator":"42:6-42:26","type":"End","operand":{"localId":"50","locator":"42:13-42:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"68","locator":"44:4-45:71","expression":{"localId":"67","locator":"44:11-45:71","type":"If","condition":{"localId":"58","locator":"44:14-44:28","type":"IsNull","operand":{"localId":"57","locator":"44:14-44:20","name":"EDVisit","type":"QueryLetRef"}},"then":{"localId":"60","locator":"44:35-44:57","path":"facilityLocations","scope":"Visit","type":"Property"},"else":{"localId":"66","locator":"45:10-45:71","type":"Flatten","operand":{"localId":"65","locator":"45:18-45:71","type":"List","element":[{"localId":"62","locator":"45:20-45:44","path":"facilityLocations","type":"Property","source":{"localId":"61","locator":"45:20-45:26","name":"EDVisit","type":"QueryLetRef"}},{"localId":"64","locator":"45:47-45:69","path":"facilityLocations","scope":"Visit","type":"Property"}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"38","locator":"37:54-37:75","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"87","locator":"48:1-52:18","name":"EmergencyDepartmentArrivalTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"87","s":[{"value":["/*Returns the arrival time in the ED for the encounter.*/\n","define function ","\"EmergencyDepartmentArrivalTime\"","(","Encounter"," "]},{"r":"71","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"86","s":[{"r":"86","s":[{"value":["start of "]},{"r":"85","s":[{"r":"84","s":[{"value":["First","("]},{"r":"83","s":[{"s":[{"r":"74","s":[{"r":"73","s":[{"value":["("]},{"r":"73","s":[{"value":["\"HospitalizationLocations\"","("]},{"r":"72","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n  \t\t"]},{"r":"78","s":[{"value":["where "]},{"r":"78","s":[{"r":"76","s":[{"r":"75","s":[{"value":["HospitalLocation"]}]},{"value":["."]},{"r":"76","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"77","s":[{"value":["\"Emergency Department Visit\""]}]}]}]},{"value":["\n  \t\t"]},{"r":"82","s":[{"value":["sort by "]},{"r":"81","s":[{"r":"80","s":[{"value":["start of "]},{"r":"79","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"85","s":[{"value":["locationPeriod"]}]}]}]}]}]}}],"expression":{"localId":"86","locator":"49:3-52:18","type":"Start","operand":{"localId":"85","locator":"49:12-52:18","path":"locationPeriod","type":"Property","source":{"localId":"84","locator":"49:12-52:3","type":"First","source":{"localId":"83","locator":"49:18-51:35","type":"Query","source":[{"localId":"74","locator":"49:18-49:72","alias":"HospitalLocation","expression":{"localId":"73","locator":"49:18-49:56","name":"HospitalizationLocations","type":"FunctionRef","operand":[{"localId":"72","locator":"49:46-49:54","name":"Encounter","type":"OperandRef"}]}}],"relationship":[],"where":{"localId":"78","locator":"50:5-50:63","type":"InValueSet","code":{"localId":"76","locator":"50:11-50:31","path":"code","scope":"HospitalLocation","type":"Property"},"valueset":{"localId":"77","locator":"50:36-50:63","name":"Emergency Department Visit","preserve":true}},"sort":{"localId":"82","locator":"51:5-51:35","by":[{"localId":"81","locator":"51:13-51:35","direction":"asc","type":"ByExpression","expression":{"localId":"80","locator":"51:13-51:35","type":"Start","operand":{"localId":"79","locator":"51:22-51:35","name":"locationPeriod","type":"IdentifierRef"}}}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"71","locator":"48:60-48:81","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"122","locator":"65:1-73:31","name":"Hospitalization","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"122","s":[{"value":["/*Hospitalization returns the total interval for admission to discharge for the given encounter, or for the admission of any immediately prior emergency department visit to the discharge of the given encounter.*/\n","define function ","\"Hospitalization\"","(","Encounter"," "]},{"r":"90","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"121","s":[{"r":"121","s":[{"s":[{"r":"92","s":[{"r":"91","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"108","s":[{"value":["EDVisit",": "]},{"r":"107","s":[{"value":["Last","("]},{"r":"106","s":[{"s":[{"r":"94","s":[{"r":"93","s":[{"r":"93","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"101","s":[{"value":["where "]},{"r":"101","s":[{"r":"96","s":[{"r":"95","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"96","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"101","s":[{"value":["ends "]},{"r":"100","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"99","s":[{"value":["start of "]},{"r":"98","s":[{"r":"97","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"98","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"105","s":[{"value":["sort by \n  \t\t\t"]},{"r":"104","s":[{"r":"103","s":[{"value":["end of "]},{"r":"102","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"120","s":[{"value":["return "]},{"r":"119","s":[{"value":["Interval["]},{"r":"115","s":[{"value":["Coalesce","("]},{"r":"111","s":[{"value":["start of "]},{"r":"110","s":[{"r":"109","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"110","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"114","s":[{"value":["start of "]},{"r":"113","s":[{"r":"112","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"113","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]},{"value":[", \n  \t"]},{"r":"118","s":[{"value":["end of "]},{"r":"117","s":[{"r":"116","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"117","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["]"]}]}]}]}]}]}}],"expression":{"localId":"121","locator":"66:3-73:31","type":"Query","source":[{"localId":"92","locator":"66:3-66:17","alias":"Visit","expression":{"localId":"91","locator":"66:3-66:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"108","locator":"67:8-71:4","identifier":"EDVisit","expression":{"localId":"107","locator":"67:17-71:4","type":"Last","source":{"localId":"106","locator":"67:22-70:26","type":"Query","source":[{"localId":"94","locator":"67:22-67:82","alias":"LastED","expression":{"localId":"93","locator":"67:22-67:75","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"67:47-67:74","name":"Emergency Department Visit","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"101","locator":"68:6-68:95","type":"And","operand":[{"locator":"68:39-68:52","type":"In","operand":[{"locator":"68:34-68:37","type":"End","operand":{"localId":"96","locator":"68:12-68:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"68:39-68:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"68:67-68:95","type":"Subtract","operand":[{"localId":"99","locator":"68:67-68:95","type":"Start","operand":{"localId":"98","locator":"68:76-68:95","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"100","locator":"68:39-68:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"99","locator":"68:67-68:95","type":"Start","operand":{"localId":"98","locator":"68:76-68:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"68:39-68:52","type":"Not","operand":{"locator":"68:39-68:52","type":"IsNull","operand":{"localId":"99","locator":"68:67-68:95","type":"Start","operand":{"localId":"98","locator":"68:76-68:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"105","locator":"69:6-70:26","by":[{"localId":"104","locator":"70:6-70:26","direction":"asc","type":"ByExpression","expression":{"localId":"103","locator":"70:6-70:26","type":"End","operand":{"localId":"102","locator":"70:13-70:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"120","locator":"72:4-73:31","expression":{"localId":"119","locator":"72:11-73:31","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"115","locator":"72:20-72:91","type":"Coalesce","operand":[{"localId":"111","locator":"72:29-72:59","type":"Start","operand":{"localId":"110","locator":"72:38-72:59","path":"relevantPeriod","type":"Property","source":{"localId":"109","locator":"72:38-72:44","name":"EDVisit","type":"QueryLetRef"}}},{"localId":"114","locator":"72:62-72:90","type":"Start","operand":{"localId":"113","locator":"72:71-72:90","path":"relevantPeriod","scope":"Visit","type":"Property"}}]},"high":{"localId":"118","locator":"73:4-73:30","type":"End","operand":{"localId":"117","locator":"73:11-73:30","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"90","locator":"65:45-65:66","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"125","locator":"55:1-56:39","name":"HospitalAdmissionTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"125","s":[{"value":["/*Returns admission time for an encounter or for immediately prior emergency department visit.*/\n","define function ","\"HospitalAdmissionTime\"","(","Encounter"," "]},{"r":"88","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"124","s":[{"r":"124","s":[{"value":["start of "]},{"r":"123","s":[{"value":["\"Hospitalization\"","("]},{"r":"89","s":[{"value":["Encounter"]}]},{"value":[")"]}]}]}]}]}}],"expression":{"localId":"124","locator":"56:3-56:39","type":"Start","operand":{"localId":"123","locator":"56:12-56:39","name":"Hospitalization","type":"FunctionRef","operand":[{"localId":"89","locator":"56:30-56:38","name":"Encounter","type":"OperandRef"}]}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"88","locator":"55:51-55:72","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"138","locator":"59:1-62:18","name":"HospitalArrivalTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"138","s":[{"value":["/*Returns earliest arrival time for an encounter including any prior ED visit.*/\n","define function ","\"HospitalArrivalTime\"","(","Encounter"," "]},{"r":"126","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"137","s":[{"r":"137","s":[{"value":["start of "]},{"r":"136","s":[{"r":"135","s":[{"value":["First","("]},{"r":"134","s":[{"s":[{"r":"129","s":[{"r":"128","s":[{"value":["("]},{"r":"128","s":[{"value":["\"HospitalizationLocations\"","("]},{"r":"127","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n  \t\t"]},{"r":"133","s":[{"value":["sort by "]},{"r":"132","s":[{"r":"131","s":[{"value":["start of "]},{"r":"130","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"136","s":[{"value":["locationPeriod"]}]}]}]}]}]}}],"expression":{"localId":"137","locator":"60:3-62:18","type":"Start","operand":{"localId":"136","locator":"60:12-62:18","path":"locationPeriod","type":"Property","source":{"localId":"135","locator":"60:12-62:3","type":"First","source":{"localId":"134","locator":"60:18-61:35","type":"Query","source":[{"localId":"129","locator":"60:18-60:72","alias":"HospitalLocation","expression":{"localId":"128","locator":"60:18-60:56","name":"HospitalizationLocations","type":"FunctionRef","operand":[{"localId":"127","locator":"60:46-60:54","name":"Encounter","type":"OperandRef"}]}}],"relationship":[],"sort":{"localId":"133","locator":"61:5-61:35","by":[{"localId":"132","locator":"61:13-61:35","direction":"asc","type":"ByExpression","expression":{"localId":"131","locator":"61:13-61:35","type":"Start","operand":{"localId":"130","locator":"61:22-61:35","name":"locationPeriod","type":"IdentifierRef"}}}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"126","locator":"59:49-59:70","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"145","locator":"76:1-77:44","name":"HospitalizationLengthofStay","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"145","s":[{"value":["/*Returns the length of stay in days (i.e. the number of days between admission and discharge) for the given encounter, or from the admission of any immediately prior emergency department visit to the discharge of the encounter*/\n","define function ","\"HospitalizationLengthofStay\"","(","Encounter"," "]},{"r":"141","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"144","s":[{"r":"144","s":[{"value":["LengthInDays","("]},{"r":"143","s":[{"value":["\"Hospitalization\"","("]},{"r":"142","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"144","locator":"77:3-77:44","name":"LengthInDays","type":"FunctionRef","operand":[{"localId":"143","locator":"77:16-77:43","name":"Hospitalization","type":"FunctionRef","operand":[{"localId":"142","locator":"77:34-77:42","name":"Encounter","type":"OperandRef"}]}]},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"141","locator":"76:57-76:78","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"158","locator":"80:1-83:18","name":"HospitalDepartureTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"158","s":[{"value":["/*Returns the latest departure time for encounter including any prior ED visit.*/\n","define function ","\"HospitalDepartureTime\"","(","Encounter"," "]},{"r":"146","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"157","s":[{"r":"157","s":[{"value":["end of "]},{"r":"156","s":[{"r":"155","s":[{"value":["Last","("]},{"r":"154","s":[{"s":[{"r":"149","s":[{"r":"148","s":[{"value":["("]},{"r":"148","s":[{"value":["\"HospitalizationLocations\"","("]},{"r":"147","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n  \t\t"]},{"r":"153","s":[{"value":["sort by "]},{"r":"152","s":[{"r":"151","s":[{"value":["start of "]},{"r":"150","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"156","s":[{"value":["locationPeriod"]}]}]}]}]}]}}],"expression":{"localId":"157","locator":"81:3-83:18","type":"End","operand":{"localId":"156","locator":"81:10-83:18","path":"locationPeriod","type":"Property","source":{"localId":"155","locator":"81:10-83:3","type":"Last","source":{"localId":"154","locator":"81:15-82:35","type":"Query","source":[{"localId":"149","locator":"81:15-81:69","alias":"HospitalLocation","expression":{"localId":"148","locator":"81:15-81:53","name":"HospitalizationLocations","type":"FunctionRef","operand":[{"localId":"147","locator":"81:43-81:51","name":"Encounter","type":"OperandRef"}]}}],"relationship":[],"sort":{"localId":"153","locator":"82:5-82:35","by":[{"localId":"152","locator":"82:13-82:35","direction":"asc","type":"ByExpression","expression":{"localId":"151","locator":"82:13-82:35","type":"Start","operand":{"localId":"150","locator":"82:22-82:35","name":"locationPeriod","type":"IdentifierRef"}}}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"146","locator":"80:51-80:72","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"163","locator":"86:1-87:33","name":"HospitalDischargeTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"163","s":[{"value":["/*Hospital Discharge Time returns the discharge time for an encounter*/\n","define function ","\"HospitalDischargeTime\"","(","Encounter"," "]},{"r":"159","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"162","s":[{"r":"162","s":[{"value":["end of "]},{"r":"161","s":[{"r":"160","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"161","s":[{"value":["relevantPeriod"]}]}]}]}]}]}}],"expression":{"localId":"162","locator":"87:3-87:33","type":"End","operand":{"localId":"161","locator":"87:10-87:33","path":"relevantPeriod","type":"Property","source":{"localId":"160","locator":"87:10-87:18","name":"Encounter","type":"OperandRef"}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"159","locator":"86:51-86:72","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"236","locator":"90:1-110:31","name":"HospitalizationWithObservationAndOutpatientSurgeryService","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"236","s":[{"value":["/*Hospitalization with Observation and Outpatient Surgery Service returns the total interval from the start of any immediately prior emergency department visit, outpatient surgery visit or observation visit to the discharge of the given encounter.*/\n","define function ","\"HospitalizationWithObservationAndOutpatientSurgeryService\"","(","Encounter"," "]},{"r":"164","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"235","s":[{"r":"235","s":[{"s":[{"r":"166","s":[{"r":"165","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"182","s":[{"value":["ObsVisit",": "]},{"r":"181","s":[{"value":["Last","("]},{"r":"180","s":[{"s":[{"r":"168","s":[{"r":"167","s":[{"r":"167","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Observation Services\""]}]},{"value":["]"]}]}]},{"value":[" ","LastObs"]}]}]},{"value":["\n  \t\t\t"]},{"r":"175","s":[{"value":["where "]},{"r":"175","s":[{"r":"170","s":[{"r":"169","s":[{"value":["LastObs"]}]},{"value":["."]},{"r":"170","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"175","s":[{"value":["ends "]},{"r":"174","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"173","s":[{"value":["start of "]},{"r":"172","s":[{"r":"171","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"172","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"179","s":[{"value":["sort by \n  \t\t\t"]},{"r":"178","s":[{"r":"177","s":[{"value":["end of "]},{"r":"176","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]},{"value":[",\n  \t"]},{"r":"190","s":[{"value":["VisitStart",": "]},{"r":"189","s":[{"value":["Coalesce","("]},{"r":"185","s":[{"value":["start of "]},{"r":"184","s":[{"r":"183","s":[{"value":["ObsVisit"]}]},{"value":["."]},{"r":"184","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"188","s":[{"value":["start of "]},{"r":"187","s":[{"r":"186","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"187","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]}]},{"value":[",\n  \t"]},{"r":"204","s":[{"value":["EDVisit",": "]},{"r":"203","s":[{"value":["Last","("]},{"r":"202","s":[{"s":[{"r":"192","s":[{"r":"191","s":[{"r":"191","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"197","s":[{"value":["where "]},{"r":"197","s":[{"r":"194","s":[{"r":"193","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"194","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"197","s":[{"value":["ends "]},{"r":"196","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"195","s":[{"value":["VisitStart"]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"201","s":[{"value":["sort by \n  \t\t\t"]},{"r":"200","s":[{"r":"199","s":[{"value":["end of "]},{"r":"198","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]},{"value":[",\n  \t"]},{"r":"210","s":[{"value":["VisitStartWithED",": "]},{"r":"209","s":[{"value":["Coalesce","("]},{"r":"207","s":[{"value":["start of "]},{"r":"206","s":[{"r":"205","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"206","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"208","s":[{"value":["VisitStart"]}]},{"value":[")"]}]}]},{"value":[",\n  \t"]},{"r":"224","s":[{"value":["OutpatientSurgeryVisit",": "]},{"r":"223","s":[{"value":["Last","("]},{"r":"222","s":[{"s":[{"r":"212","s":[{"r":"211","s":[{"r":"211","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Outpatient Surgery Service\""]}]},{"value":["]"]}]}]},{"value":[" ","LastSurgeryOP"]}]}]},{"value":["\n  \t\t\t"]},{"r":"217","s":[{"value":["where "]},{"r":"217","s":[{"r":"214","s":[{"r":"213","s":[{"value":["LastSurgeryOP"]}]},{"value":["."]},{"r":"214","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"217","s":[{"value":["ends "]},{"r":"216","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"215","s":[{"value":["VisitStartWithED"]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"221","s":[{"value":["sort by \n  \t\t\t"]},{"r":"220","s":[{"r":"219","s":[{"value":["end of "]},{"r":"218","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"234","s":[{"value":["return "]},{"r":"233","s":[{"value":["Interval["]},{"r":"229","s":[{"value":["Coalesce","("]},{"r":"227","s":[{"value":["start of "]},{"r":"226","s":[{"r":"225","s":[{"value":["OutpatientSurgeryVisit"]}]},{"value":["."]},{"r":"226","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"228","s":[{"value":["VisitStartWithED"]}]},{"value":[")"]}]},{"value":[", \n  \t"]},{"r":"232","s":[{"value":["end of "]},{"r":"231","s":[{"r":"230","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"231","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["]"]}]}]}]}]}]}}],"expression":{"localId":"235","locator":"91:3-110:31","type":"Query","source":[{"localId":"166","locator":"91:3-91:17","alias":"Visit","expression":{"localId":"165","locator":"91:3-91:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"182","locator":"92:8-96:4","identifier":"ObsVisit","expression":{"localId":"181","locator":"92:18-96:4","type":"Last","source":{"localId":"180","locator":"92:23-95:26","type":"Query","source":[{"localId":"168","locator":"92:23-92:78","alias":"LastObs","expression":{"localId":"167","locator":"92:23-92:70","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"92:48-92:69","name":"Observation Services","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"175","locator":"93:6-93:96","type":"And","operand":[{"locator":"93:40-93:53","type":"In","operand":[{"locator":"93:35-93:38","type":"End","operand":{"localId":"170","locator":"93:12-93:33","path":"relevantPeriod","scope":"LastObs","type":"Property"}},{"locator":"93:40-93:53","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"93:68-93:96","type":"Subtract","operand":[{"localId":"173","locator":"93:68-93:96","type":"Start","operand":{"localId":"172","locator":"93:77-93:96","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"174","locator":"93:40-93:45","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"173","locator":"93:68-93:96","type":"Start","operand":{"localId":"172","locator":"93:77-93:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"93:40-93:53","type":"Not","operand":{"locator":"93:40-93:53","type":"IsNull","operand":{"localId":"173","locator":"93:68-93:96","type":"Start","operand":{"localId":"172","locator":"93:77-93:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"179","locator":"94:6-95:26","by":[{"localId":"178","locator":"95:6-95:26","direction":"asc","type":"ByExpression","expression":{"localId":"177","locator":"95:6-95:26","type":"End","operand":{"localId":"176","locator":"95:13-95:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}},{"localId":"190","locator":"97:4-97:88","identifier":"VisitStart","expression":{"localId":"189","locator":"97:16-97:88","type":"Coalesce","operand":[{"localId":"185","locator":"97:25-97:56","type":"Start","operand":{"localId":"184","locator":"97:34-97:56","path":"relevantPeriod","type":"Property","source":{"localId":"183","locator":"97:34-97:41","name":"ObsVisit","type":"QueryLetRef"}}},{"localId":"188","locator":"97:59-97:87","type":"Start","operand":{"localId":"187","locator":"97:68-97:87","path":"relevantPeriod","scope":"Visit","type":"Property"}}]}},{"localId":"204","locator":"98:4-102:4","identifier":"EDVisit","expression":{"localId":"203","locator":"98:13-102:4","type":"Last","source":{"localId":"202","locator":"98:18-101:26","type":"Query","source":[{"localId":"192","locator":"98:18-98:78","alias":"LastED","expression":{"localId":"191","locator":"98:18-98:71","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"98:43-98:70","name":"Emergency Department Visit","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"197","locator":"99:6-99:76","type":"And","operand":[{"locator":"99:39-99:52","type":"In","operand":[{"locator":"99:34-99:37","type":"End","operand":{"localId":"194","locator":"99:12-99:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"99:39-99:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"99:67-99:76","type":"Subtract","operand":[{"localId":"195","locator":"99:67-99:76","name":"VisitStart","type":"QueryLetRef"},{"localId":"196","locator":"99:39-99:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"195","locator":"99:67-99:76","name":"VisitStart","type":"QueryLetRef"}}]},{"locator":"99:39-99:52","type":"Not","operand":{"locator":"99:39-99:52","type":"IsNull","operand":{"localId":"195","locator":"99:67-99:76","name":"VisitStart","type":"QueryLetRef"}}}]},"sort":{"localId":"201","locator":"100:6-101:26","by":[{"localId":"200","locator":"101:6-101:26","direction":"asc","type":"ByExpression","expression":{"localId":"199","locator":"101:6-101:26","type":"End","operand":{"localId":"198","locator":"101:13-101:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}},{"localId":"210","locator":"103:4-103:74","identifier":"VisitStartWithED","expression":{"localId":"209","locator":"103:22-103:74","type":"Coalesce","operand":[{"localId":"207","locator":"103:31-103:61","type":"Start","operand":{"localId":"206","locator":"103:40-103:61","path":"relevantPeriod","type":"Property","source":{"localId":"205","locator":"103:40-103:46","name":"EDVisit","type":"QueryLetRef"}}},{"localId":"208","locator":"103:64-103:73","name":"VisitStart","type":"QueryLetRef"}]}},{"localId":"224","locator":"104:4-108:4","identifier":"OutpatientSurgeryVisit","expression":{"localId":"223","locator":"104:28-108:4","type":"Last","source":{"localId":"222","locator":"104:33-107:26","type":"Query","source":[{"localId":"212","locator":"104:33-104:100","alias":"LastSurgeryOP","expression":{"localId":"211","locator":"104:33-104:86","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"104:58-104:85","name":"Outpatient Surgery Service","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"217","locator":"105:6-105:89","type":"And","operand":[{"locator":"105:46-105:59","type":"In","operand":[{"locator":"105:41-105:44","type":"End","operand":{"localId":"214","locator":"105:12-105:39","path":"relevantPeriod","scope":"LastSurgeryOP","type":"Property"}},{"locator":"105:46-105:59","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"105:74-105:89","type":"Subtract","operand":[{"localId":"215","locator":"105:74-105:89","name":"VisitStartWithED","type":"QueryLetRef"},{"localId":"216","locator":"105:46-105:51","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"215","locator":"105:74-105:89","name":"VisitStartWithED","type":"QueryLetRef"}}]},{"locator":"105:46-105:59","type":"Not","operand":{"locator":"105:46-105:59","type":"IsNull","operand":{"localId":"215","locator":"105:74-105:89","name":"VisitStartWithED","type":"QueryLetRef"}}}]},"sort":{"localId":"221","locator":"106:6-107:26","by":[{"localId":"220","locator":"107:6-107:26","direction":"asc","type":"ByExpression","expression":{"localId":"219","locator":"107:6-107:26","type":"End","operand":{"localId":"218","locator":"107:13-107:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"234","locator":"109:4-110:31","expression":{"localId":"233","locator":"109:11-110:31","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"229","locator":"109:20-109:93","type":"Coalesce","operand":[{"localId":"227","locator":"109:29-109:74","type":"Start","operand":{"localId":"226","locator":"109:38-109:74","path":"relevantPeriod","type":"Property","source":{"localId":"225","locator":"109:38-109:59","name":"OutpatientSurgeryVisit","type":"QueryLetRef"}}},{"localId":"228","locator":"109:77-109:92","name":"VisitStartWithED","type":"QueryLetRef"}]},"high":{"localId":"232","locator":"110:4-110:30","type":"End","operand":{"localId":"231","locator":"110:11-110:30","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"164","locator":"90:87-90:108","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"289","locator":"113:1-127:31","name":"HospitalizationWithObservation","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"289","s":[{"value":["/*Hospitalization with Observation returns the total interval from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\n","define function ","\"HospitalizationWithObservation\"","(","Encounter"," "]},{"r":"237","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"288","s":[{"r":"288","s":[{"s":[{"r":"239","s":[{"r":"238","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"255","s":[{"value":["ObsVisit",": "]},{"r":"254","s":[{"value":["Last","("]},{"r":"253","s":[{"s":[{"r":"241","s":[{"r":"240","s":[{"r":"240","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Observation Services\""]}]},{"value":["]"]}]}]},{"value":[" ","LastObs"]}]}]},{"value":["\n  \t\t\t"]},{"r":"248","s":[{"value":["where "]},{"r":"248","s":[{"r":"243","s":[{"r":"242","s":[{"value":["LastObs"]}]},{"value":["."]},{"r":"243","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"248","s":[{"value":["ends "]},{"r":"247","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"246","s":[{"value":["start of "]},{"r":"245","s":[{"r":"244","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"245","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"252","s":[{"value":["sort by \n  \t\t\t"]},{"r":"251","s":[{"r":"250","s":[{"value":["end of "]},{"r":"249","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]},{"value":[",\n  \t"]},{"r":"263","s":[{"value":["VisitStart",": "]},{"r":"262","s":[{"value":["Coalesce","("]},{"r":"258","s":[{"value":["start of "]},{"r":"257","s":[{"r":"256","s":[{"value":["ObsVisit"]}]},{"value":["."]},{"r":"257","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"261","s":[{"value":["start of "]},{"r":"260","s":[{"r":"259","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"260","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]}]},{"value":[",\n  \t"]},{"r":"277","s":[{"value":["EDVisit",": "]},{"r":"276","s":[{"value":["Last","("]},{"r":"275","s":[{"s":[{"r":"265","s":[{"r":"264","s":[{"r":"264","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"270","s":[{"value":["where "]},{"r":"270","s":[{"r":"267","s":[{"r":"266","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"267","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"270","s":[{"value":["ends "]},{"r":"269","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"268","s":[{"value":["VisitStart"]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"274","s":[{"value":["sort by \n  \t\t\t"]},{"r":"273","s":[{"r":"272","s":[{"value":["end of "]},{"r":"271","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"287","s":[{"value":["return "]},{"r":"286","s":[{"value":["Interval["]},{"r":"282","s":[{"value":["Coalesce","("]},{"r":"280","s":[{"value":["start of "]},{"r":"279","s":[{"r":"278","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"279","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"281","s":[{"value":["VisitStart"]}]},{"value":[")"]}]},{"value":[", \n  \t"]},{"r":"285","s":[{"value":["end of "]},{"r":"284","s":[{"r":"283","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"284","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["]"]}]}]}]}]}]}}],"expression":{"localId":"288","locator":"114:3-127:31","type":"Query","source":[{"localId":"239","locator":"114:3-114:17","alias":"Visit","expression":{"localId":"238","locator":"114:3-114:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"255","locator":"115:8-119:4","identifier":"ObsVisit","expression":{"localId":"254","locator":"115:18-119:4","type":"Last","source":{"localId":"253","locator":"115:23-118:26","type":"Query","source":[{"localId":"241","locator":"115:23-115:78","alias":"LastObs","expression":{"localId":"240","locator":"115:23-115:70","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"115:48-115:69","name":"Observation Services","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"248","locator":"116:6-116:96","type":"And","operand":[{"locator":"116:40-116:53","type":"In","operand":[{"locator":"116:35-116:38","type":"End","operand":{"localId":"243","locator":"116:12-116:33","path":"relevantPeriod","scope":"LastObs","type":"Property"}},{"locator":"116:40-116:53","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"116:68-116:96","type":"Subtract","operand":[{"localId":"246","locator":"116:68-116:96","type":"Start","operand":{"localId":"245","locator":"116:77-116:96","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"247","locator":"116:40-116:45","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"246","locator":"116:68-116:96","type":"Start","operand":{"localId":"245","locator":"116:77-116:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"116:40-116:53","type":"Not","operand":{"locator":"116:40-116:53","type":"IsNull","operand":{"localId":"246","locator":"116:68-116:96","type":"Start","operand":{"localId":"245","locator":"116:77-116:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"252","locator":"117:6-118:26","by":[{"localId":"251","locator":"118:6-118:26","direction":"asc","type":"ByExpression","expression":{"localId":"250","locator":"118:6-118:26","type":"End","operand":{"localId":"249","locator":"118:13-118:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}},{"localId":"263","locator":"120:4-120:88","identifier":"VisitStart","expression":{"localId":"262","locator":"120:16-120:88","type":"Coalesce","operand":[{"localId":"258","locator":"120:25-120:56","type":"Start","operand":{"localId":"257","locator":"120:34-120:56","path":"relevantPeriod","type":"Property","source":{"localId":"256","locator":"120:34-120:41","name":"ObsVisit","type":"QueryLetRef"}}},{"localId":"261","locator":"120:59-120:87","type":"Start","operand":{"localId":"260","locator":"120:68-120:87","path":"relevantPeriod","scope":"Visit","type":"Property"}}]}},{"localId":"277","locator":"121:4-125:4","identifier":"EDVisit","expression":{"localId":"276","locator":"121:13-125:4","type":"Last","source":{"localId":"275","locator":"121:18-124:26","type":"Query","source":[{"localId":"265","locator":"121:18-121:78","alias":"LastED","expression":{"localId":"264","locator":"121:18-121:71","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"121:43-121:70","name":"Emergency Department Visit","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"270","locator":"122:6-122:76","type":"And","operand":[{"locator":"122:39-122:52","type":"In","operand":[{"locator":"122:34-122:37","type":"End","operand":{"localId":"267","locator":"122:12-122:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"122:39-122:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"122:67-122:76","type":"Subtract","operand":[{"localId":"268","locator":"122:67-122:76","name":"VisitStart","type":"QueryLetRef"},{"localId":"269","locator":"122:39-122:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"268","locator":"122:67-122:76","name":"VisitStart","type":"QueryLetRef"}}]},{"locator":"122:39-122:52","type":"Not","operand":{"locator":"122:39-122:52","type":"IsNull","operand":{"localId":"268","locator":"122:67-122:76","name":"VisitStart","type":"QueryLetRef"}}}]},"sort":{"localId":"274","locator":"123:6-124:26","by":[{"localId":"273","locator":"124:6-124:26","direction":"asc","type":"ByExpression","expression":{"localId":"272","locator":"124:6-124:26","type":"End","operand":{"localId":"271","locator":"124:13-124:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"287","locator":"126:4-127:31","expression":{"localId":"286","locator":"126:11-127:31","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"282","locator":"126:20-126:72","type":"Coalesce","operand":[{"localId":"280","locator":"126:29-126:59","type":"Start","operand":{"localId":"279","locator":"126:38-126:59","path":"relevantPeriod","type":"Property","source":{"localId":"278","locator":"126:38-126:44","name":"EDVisit","type":"QueryLetRef"}}},{"localId":"281","locator":"126:62-126:71","name":"VisitStart","type":"QueryLetRef"}]},"high":{"localId":"285","locator":"127:4-127:30","type":"End","operand":{"localId":"284","locator":"127:11-127:30","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"237","locator":"113:60-113:81","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"294","locator":"130:1-131:61","name":"HospitalizationWithObservationLengthofStay","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"294","s":[{"value":["/*Hospitalization with Observation Length of Stay returns the length in days from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\n","define function ","\"HospitalizationWithObservationLengthofStay\"","(","Encounter"," "]},{"r":"290","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"293","s":[{"r":"293","s":[{"value":["\"LengthInDays\"","("]},{"r":"292","s":[{"value":["\"HospitalizationWithObservation\"","("]},{"r":"291","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"293","locator":"131:3-131:61","name":"LengthInDays","type":"FunctionRef","operand":[{"localId":"292","locator":"131:18-131:60","name":"HospitalizationWithObservation","type":"FunctionRef","operand":[{"localId":"291","locator":"131:51-131:59","name":"Encounter","type":"OperandRef"}]}]},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"290","locator":"130:72-130:93","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"315","locator":"134:1-139:3","name":"FirstInpatientIntensiveCareUnit","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"315","s":[{"value":["/*First Inpatient Intensive Care Unit returns the first intensive care unit for the given encounter, without considering any immediately prior emergency department visit.*/\n","define function ","\"FirstInpatientIntensiveCareUnit\"","(","Encounter"," "]},{"r":"295","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"314","s":[{"r":"314","s":[{"value":["First","("]},{"r":"313","s":[{"s":[{"r":"298","s":[{"r":"297","s":[{"value":["("]},{"r":"297","s":[{"r":"296","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"297","s":[{"value":["facilityLocations"]}]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n      "]},{"r":"308","s":[{"value":["where "]},{"r":"308","s":[{"r":"302","s":[{"r":"300","s":[{"r":"299","s":[{"value":["HospitalLocation"]}]},{"value":["."]},{"r":"300","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"301","s":[{"value":["\"Intensive Care Unit\""]}]}]},{"value":["\n        and "]},{"r":"307","s":[{"r":"304","s":[{"r":"303","s":[{"value":["HospitalLocation"]}]},{"value":["."]},{"r":"304","s":[{"value":["locationPeriod"]}]}]},{"r":"307","value":[" ","during"," "]},{"r":"306","s":[{"r":"305","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"306","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n      "]},{"r":"312","s":[{"value":["sort by "]},{"r":"311","s":[{"r":"310","s":[{"value":["start of "]},{"r":"309","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]}]}]}}],"expression":{"localId":"314","locator":"135:3-139:3","type":"First","source":{"localId":"313","locator":"135:9-138:37","type":"Query","source":[{"localId":"298","locator":"135:9-135:53","alias":"HospitalLocation","expression":{"localId":"297","locator":"135:9-135:37","path":"facilityLocations","type":"Property","source":{"localId":"296","locator":"135:10-135:18","name":"Encounter","type":"OperandRef"}}}],"relationship":[],"where":{"localId":"308","locator":"136:7-137:75","type":"And","operand":[{"localId":"302","locator":"136:13-136:58","type":"InValueSet","code":{"localId":"300","locator":"136:13-136:33","path":"code","scope":"HospitalLocation","type":"Property"},"valueset":{"localId":"301","locator":"136:38-136:58","name":"Intensive Care Unit","preserve":true}},{"localId":"307","locator":"137:13-137:75","type":"IncludedIn","operand":[{"localId":"304","locator":"137:13-137:43","path":"locationPeriod","scope":"HospitalLocation","type":"Property"},{"localId":"306","locator":"137:52-137:75","path":"relevantPeriod","type":"Property","source":{"localId":"305","locator":"137:52-137:60","name":"Encounter","type":"OperandRef"}}]}]},"sort":{"localId":"312","locator":"138:7-138:37","by":[{"localId":"311","locator":"138:15-138:37","direction":"asc","type":"ByExpression","expression":{"localId":"310","locator":"138:15-138:37","type":"Start","operand":{"localId":"309","locator":"138:24-138:37","name":"locationPeriod","type":"IdentifierRef"}}}]}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"295","locator":"134:61-134:82","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"333","locator":"142:1-145:35","name":"NormalizeInterval","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"333","s":[{"value":["/*Given a datetime and a period, returns the period (if a period is provided) or the interval beginning and ending on the datetime (if a datetime is provided)*/\n","define function ","\"NormalizeInterval\"","(","pointInTime"," "]},{"r":"316","s":[{"value":["DateTime"]}]},{"value":[", ","period"," "]},{"r":"318","s":[{"value":["Interval\u003c"]},{"r":"317","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"332","s":[{"r":"332","s":[{"value":["if "]},{"r":"320","s":[{"r":"319","s":[{"value":["pointInTime"]}]},{"value":[" is not null"]}]},{"value":[" then "]},{"r":"323","s":[{"value":["Interval["]},{"r":"321","s":[{"value":["pointInTime"]}]},{"value":[", "]},{"r":"322","s":[{"value":["pointInTime"]}]},{"value":["]"]}]},{"value":["\n    else "]},{"r":"331","s":[{"value":["if "]},{"r":"325","s":[{"r":"324","s":[{"value":["period"]}]},{"value":[" is not null"]}]},{"value":[" then "]},{"r":"326","s":[{"value":["period"]}]},{"value":[" \n    else "]},{"r":"330","s":[{"r":"327","value":["null"," as "]},{"r":"329","s":[{"value":["Interval\u003c"]},{"r":"328","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}]}]}]}]}}],"expression":{"localId":"332","locator":"143:3-145:35","type":"If","condition":{"localId":"320","locator":"143:6-143:28","type":"Not","operand":{"locator":"143:6-143:28","type":"IsNull","operand":{"localId":"319","locator":"143:6-143:16","name":"pointInTime","type":"OperandRef"}}},"then":{"localId":"323","locator":"143:35-143:68","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"321","locator":"143:44-143:54","name":"pointInTime","type":"OperandRef"},"high":{"localId":"322","locator":"143:57-143:67","name":"pointInTime","type":"OperandRef"}},"else":{"localId":"331","locator":"144:10-145:35","type":"If","condition":{"localId":"325","locator":"144:13-144:30","type":"Not","operand":{"locator":"144:13-144:30","type":"IsNull","operand":{"localId":"324","locator":"144:13-144:18","name":"period","type":"OperandRef"}}},"then":{"localId":"326","locator":"144:37-144:42","name":"period","type":"OperandRef"},"else":{"localId":"330","locator":"145:10-145:35","strict":false,"type":"As","operand":{"localId":"327","locator":"145:10-145:13","type":"Null"},"asTypeSpecifier":{"localId":"329","locator":"145:18-145:35","type":"IntervalTypeSpecifier","pointType":{"localId":"328","locator":"145:27-145:34","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}},"operand":[{"name":"pointInTime","operandTypeSpecifier":{"localId":"316","locator":"142:49-142:56","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"name":"period","operandTypeSpecifier":{"localId":"318","locator":"142:66-142:83","type":"IntervalTypeSpecifier","pointType":{"localId":"317","locator":"142:75-142:82","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"346","locator":"148:1-151:3","name":"HasStart","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"346","s":[{"value":["/*Given an interval, return true if the interval has a starting boundary specified (i.e. the start of the interval is not null and not the minimum DateTime value)*/\n","define function ","\"HasStart\"","(","period"," "]},{"r":"335","s":[{"value":["Interval\u003c"]},{"r":"334","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"345","s":[{"r":"345","s":[{"value":["not "]},{"r":"344","s":[{"value":["( "]},{"r":"344","s":[{"r":"338","s":[{"r":"337","s":[{"value":["start of "]},{"r":"336","s":[{"value":["period"]}]}]},{"value":[" is null"]}]},{"value":["\n      or "]},{"r":"343","s":[{"r":"340","s":[{"value":["start of "]},{"r":"339","s":[{"value":["period"]}]}]},{"value":[" ","="," "]},{"r":"342","s":[{"value":["minimum"," "]},{"r":"341","s":[{"value":["DateTime"]}]}]}]}]},{"value":["\n  )"]}]}]}]}]}}],"expression":{"localId":"345","locator":"149:3-151:3","type":"Not","operand":{"localId":"344","locator":"149:7-151:3","type":"Or","operand":[{"localId":"338","locator":"149:9-149:31","type":"IsNull","operand":{"localId":"337","locator":"149:9-149:23","type":"Start","operand":{"localId":"336","locator":"149:18-149:23","name":"period","type":"OperandRef"}}},{"localId":"343","locator":"150:10-150:43","type":"Equal","operand":[{"localId":"340","locator":"150:10-150:24","type":"Start","operand":{"localId":"339","locator":"150:19-150:24","name":"period","type":"OperandRef"}},{"localId":"342","locator":"150:28-150:43","valueType":"{urn:hl7-org:elm-types:r1}DateTime","type":"MinValue"}]}]}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"335","locator":"148:35-148:52","type":"IntervalTypeSpecifier","pointType":{"localId":"334","locator":"148:44-148:51","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"359","locator":"154:1-159:3","name":"HasEnd","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"359","s":[{"value":["/*Given an interval, return true if the interval has an ending boundary specified (i.e. the end of the interval is not null and not the maximum DateTime value)*/\n","define function ","\"HasEnd\"","(","period"," "]},{"r":"348","s":[{"value":["Interval\u003c"]},{"r":"347","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"358","s":[{"r":"358","s":[{"value":["not "]},{"r":"357","s":[{"value":["( \n    "]},{"r":"357","s":[{"r":"351","s":[{"r":"350","s":[{"value":["end of "]},{"r":"349","s":[{"value":["period"]}]}]},{"value":[" is null"]}]},{"value":["\n      or \n      "]},{"r":"356","s":[{"r":"353","s":[{"value":["end of "]},{"r":"352","s":[{"value":["period"]}]}]},{"value":[" ","="," "]},{"r":"355","s":[{"value":["maximum"," "]},{"r":"354","s":[{"value":["DateTime"]}]}]}]}]},{"value":["\n  )"]}]}]}]}]}}],"expression":{"localId":"358","locator":"155:3-159:3","type":"Not","operand":{"localId":"357","locator":"155:7-159:3","type":"Or","operand":[{"localId":"351","locator":"156:5-156:25","type":"IsNull","operand":{"localId":"350","locator":"156:5-156:17","type":"End","operand":{"localId":"349","locator":"156:12-156:17","name":"period","type":"OperandRef"}}},{"localId":"356","locator":"158:7-158:38","type":"Equal","operand":[{"localId":"353","locator":"158:7-158:19","type":"End","operand":{"localId":"352","locator":"158:14-158:19","name":"period","type":"OperandRef"}},{"localId":"355","locator":"158:23-158:38","valueType":"{urn:hl7-org:elm-types:r1}DateTime","type":"MaxValue"}]}]}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"348","locator":"154:33-154:50","type":"IntervalTypeSpecifier","pointType":{"localId":"347","locator":"154:42-154:49","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"369","locator":"162:1-165:24","name":"Latest","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"369","s":[{"value":["/*Given an interval, return the ending point if the interval has an ending boundary specified, otherwise, return the starting point*/\n","define function ","\"Latest\"","(","period"," "]},{"r":"361","s":[{"value":["Interval\u003c"]},{"r":"360","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"368","s":[{"r":"368","s":[{"value":["if "]},{"r":"363","s":[{"value":["( "]},{"r":"363","s":[{"value":["HasEnd","("]},{"r":"362","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":[" then \n  "]},{"r":"365","s":[{"value":["end of "]},{"r":"364","s":[{"value":["period"]}]}]},{"value":[" \n    else "]},{"r":"367","s":[{"value":["start of "]},{"r":"366","s":[{"value":["period"]}]}]}]}]}]}}],"expression":{"localId":"368","locator":"163:3-165:24","type":"If","condition":{"localId":"363","locator":"163:6-163:22","name":"HasEnd","type":"FunctionRef","operand":[{"localId":"362","locator":"163:15-163:20","name":"period","type":"OperandRef"}]},"then":{"localId":"365","locator":"164:3-164:15","type":"End","operand":{"localId":"364","locator":"164:10-164:15","name":"period","type":"OperandRef"}},"else":{"localId":"367","locator":"165:10-165:24","type":"Start","operand":{"localId":"366","locator":"165:19-165:24","name":"period","type":"OperandRef"}}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"361","locator":"162:33-162:50","type":"IntervalTypeSpecifier","pointType":{"localId":"360","locator":"162:42-162:49","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"379","locator":"168:1-171:15","name":"Earliest","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"379","s":[{"value":["/*Given an interval, return the starting point if the interval has a starting boundary specified, otherwise, return the ending point*/\n","define function ","\"Earliest\"","(","period"," "]},{"r":"371","s":[{"value":["Interval\u003c"]},{"r":"370","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"378","s":[{"r":"378","s":[{"value":["if "]},{"r":"373","s":[{"value":["( "]},{"r":"373","s":[{"value":["HasStart","("]},{"r":"372","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":[" then "]},{"r":"375","s":[{"value":["start of "]},{"r":"374","s":[{"value":["period"]}]}]},{"value":[" \n    else \n  "]},{"r":"377","s":[{"value":["end of "]},{"r":"376","s":[{"value":["period"]}]}]}]}]}]}}],"expression":{"localId":"378","locator":"169:3-171:15","type":"If","condition":{"localId":"373","locator":"169:6-169:24","name":"HasStart","type":"FunctionRef","operand":[{"localId":"372","locator":"169:17-169:22","name":"period","type":"OperandRef"}]},"then":{"localId":"375","locator":"169:31-169:45","type":"Start","operand":{"localId":"374","locator":"169:40-169:45","name":"period","type":"OperandRef"}},"else":{"localId":"377","locator":"171:3-171:15","type":"End","operand":{"localId":"376","locator":"171:10-171:15","name":"period","type":"OperandRef"}}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"371","locator":"168:35-168:52","type":"IntervalTypeSpecifier","pointType":{"localId":"370","locator":"168:44-168:51","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"387","locator":"174:1-175:48","name":"LatestOf","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"387","s":[{"value":["/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the ending point of the period if the period has an ending boundary specified, otherwise returns the starting point of the interval*/\n","define function ","\"LatestOf\"","(","pointInTime"," "]},{"r":"380","s":[{"value":["DateTime"]}]},{"value":[", ","period"," "]},{"r":"382","s":[{"value":["Interval\u003c"]},{"r":"381","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"386","s":[{"r":"386","s":[{"value":["Latest","("]},{"r":"385","s":[{"value":["NormalizeInterval","("]},{"r":"383","s":[{"value":["pointInTime"]}]},{"value":[", "]},{"r":"384","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"386","locator":"175:3-175:48","name":"Latest","type":"FunctionRef","operand":[{"localId":"385","locator":"175:10-175:47","name":"NormalizeInterval","type":"FunctionRef","operand":[{"localId":"383","locator":"175:28-175:38","name":"pointInTime","type":"OperandRef"},{"localId":"384","locator":"175:41-175:46","name":"period","type":"OperandRef"}]}]},"operand":[{"name":"pointInTime","operandTypeSpecifier":{"localId":"380","locator":"174:40-174:47","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"name":"period","operandTypeSpecifier":{"localId":"382","locator":"174:57-174:74","type":"IntervalTypeSpecifier","pointType":{"localId":"381","locator":"174:66-174:73","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"395","locator":"178:1-179:50","name":"EarliestOf","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"395","s":[{"value":["/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the starting point of the period if the period has a starting boundary specified, otherwise returns the ending point of the period*/\n","define function ","\"EarliestOf\"","(","pointInTime"," "]},{"r":"388","s":[{"value":["DateTime"]}]},{"value":[", ","period"," "]},{"r":"390","s":[{"value":["Interval\u003c"]},{"r":"389","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"394","s":[{"r":"394","s":[{"value":["Earliest","("]},{"r":"393","s":[{"value":["NormalizeInterval","("]},{"r":"391","s":[{"value":["pointInTime"]}]},{"value":[", "]},{"r":"392","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"394","locator":"179:3-179:50","name":"Earliest","type":"FunctionRef","operand":[{"localId":"393","locator":"179:12-179:49","name":"NormalizeInterval","type":"FunctionRef","operand":[{"localId":"391","locator":"179:30-179:40","name":"pointInTime","type":"OperandRef"},{"localId":"392","locator":"179:43-179:48","name":"period","type":"OperandRef"}]}]},"operand":[{"name":"pointInTime","operandTypeSpecifier":{"localId":"388","locator":"178:42-178:49","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"name":"period","operandTypeSpecifier":{"localId":"390","locator":"178:59-178:76","type":"IntervalTypeSpecifier","pointType":{"localId":"389","locator":"178:68-178:75","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]}]}}},"elm_annotations":{"statements":[{"children":[{"children":[{"children":[{"text":"define \"ED Encounter\":\n  "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"10"}],"ref_id":"11"}],"define_name":"ED Encounter"},{"children":[{"children":[{"children":[{"text":"define \"Inpatient Encounter\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Encounter Inpatient\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"12"}],"node_type":"Retrieve","ref_id":"12"},{"children":[{"text":" EncounterInpatient"}]}],"ref_id":"13"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"EncounterInpatient"}]}],"ref_id":"14"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"15"}],"node_type":"Property","ref_id":"15"},{"children":[{"text":" ends during day of "}],"ref_id":"17"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"16"}],"ref_id":"17"}],"ref_id":"17"}],"node_type":"Query","ref_id":"18"}],"ref_id":"19"}],"define_name":"Inpatient Encounter"},{"children":[{"children":[]},{"children":[]},{"children":[]},{"children":[{"children":[{"text":"/*@description: Returns an interval of date values extracted from the input interval of date-time values\n@comment: This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability.*/\ndefine function \"ToDateInterval\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"20"},{"children":[{"text":"\u003e"}]}],"ref_id":"21"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"22"}],"node_type":"Start","ref_id":"23"}],"ref_id":"24"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"25"}],"node_type":"End","ref_id":"26"}],"ref_id":"27"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"28"}],"node_type":"Interval","ref_id":"28"}],"ref_id":"29"}],"define_name":"ToDateInterval"},{"children":[{"children":[{"children":[{"text":"/*calculates the difference in calendar days between the start and end of the given interval.*/\ndefine function \"LengthInDays\"(Value "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"30"},{"children":[{"text":"\u003e"}]}],"ref_id":"31"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"difference in days between "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"Value"}]}],"node_type":"OperandRef","ref_id":"32"}],"node_type":"Start","ref_id":"33"},{"children":[{"text":" and "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"Value"}]}],"node_type":"OperandRef","ref_id":"34"}],"node_type":"End","ref_id":"35"}],"node_type":"DifferenceBetween","ref_id":"36"}],"node_type":"DifferenceBetween","ref_id":"36"}],"ref_id":"37"}],"define_name":"LengthInDays"},{"children":[{"children":[{"children":[{"text":"/*returns list of all locations within an encounter, including locations for immediately prior ED visit.*/\ndefine function \"HospitalizationLocations\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"38"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"39"},{"children":[{"text":" Visit"}]}],"ref_id":"40"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"41"}],"node_type":"Retrieve","ref_id":"41"},{"children":[{"text":" LastED"}]}],"ref_id":"42"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"43"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"44"}],"node_type":"Property","ref_id":"44"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"48"},{"children":[{"text":" or less on or before"}]}],"ref_id":"49"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"45"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"46"}],"node_type":"Property","ref_id":"46"}],"node_type":"Start","ref_id":"47"}],"ref_id":"49"}],"ref_id":"49"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"50"}],"node_type":"End","ref_id":"51"}],"ref_id":"52"}],"ref_id":"53"}],"ref_id":"54"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"55"}],"ref_id":"56"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"node_type":"QueryLetRef","ref_id":"57"},{"children":[{"text":" is null"}]}],"ref_id":"58"},{"children":[{"text":" then "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"59"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"ref_id":"60"}],"ref_id":"60"},{"children":[{"text":" \n      else "}]},{"children":[{"children":[{"text":"flatten "}]},{"children":[{"children":[{"text":"{ "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"61"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"ref_id":"62"}],"ref_id":"62"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"63"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"ref_id":"64"}],"ref_id":"64"},{"children":[{"text":" }"}]}],"node_type":"List","ref_id":"65"}],"ref_id":"66"}],"node_type":"If","ref_id":"67"}],"ref_id":"68"}],"node_type":"Query","ref_id":"69"}],"node_type":"Query","ref_id":"69"}],"ref_id":"70"}],"define_name":"HospitalizationLocations"},{"children":[{"children":[{"children":[{"text":"/*Returns the arrival time in the ED for the encounter.*/\ndefine function \"EmergencyDepartmentArrivalTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"71"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"\"HospitalizationLocations\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"72"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"73"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"73"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"74"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"HospitalLocation"}]}],"ref_id":"75"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"76"}],"ref_id":"76"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}],"ref_id":"77"}],"ref_id":"78"}],"ref_id":"78"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"79"}],"node_type":"Start","ref_id":"80"}],"ref_id":"81"}],"ref_id":"82"}],"ref_id":"83"},{"children":[{"text":"\n  )"}]}],"ref_id":"84"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"85"}],"node_type":"Property","ref_id":"85"}],"node_type":"Start","ref_id":"86"}],"node_type":"Start","ref_id":"86"}],"ref_id":"87"}],"define_name":"EmergencyDepartmentArrivalTime"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization returns the total interval for admission to discharge for the given encounter, or for the admission of any immediately prior emergency department visit to the discharge of the given encounter.*/\ndefine function \"Hospitalization\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"90"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"91"},{"children":[{"text":" Visit"}]}],"ref_id":"92"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"93"}],"node_type":"Retrieve","ref_id":"93"},{"children":[{"text":" LastED"}]}],"ref_id":"94"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"95"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"96"}],"node_type":"Property","ref_id":"96"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"100"},{"children":[{"text":" or less on or before"}]}],"ref_id":"101"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"97"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"98"}],"node_type":"Property","ref_id":"98"}],"node_type":"Start","ref_id":"99"}],"ref_id":"101"}],"ref_id":"101"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"102"}],"node_type":"End","ref_id":"103"}],"ref_id":"104"}],"ref_id":"105"}],"ref_id":"106"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"107"}],"ref_id":"108"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"109"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"110"}],"node_type":"Property","ref_id":"110"}],"node_type":"Start","ref_id":"111"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"112"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"113"}],"node_type":"Property","ref_id":"113"}],"node_type":"Start","ref_id":"114"},{"children":[{"text":")"}]}],"ref_id":"115"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"116"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"117"}],"node_type":"Property","ref_id":"117"}],"ref_id":"118"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"119"}],"ref_id":"120"}],"node_type":"Query","ref_id":"121"}],"node_type":"Query","ref_id":"121"}],"ref_id":"122"}],"define_name":"Hospitalization"},{"children":[{"children":[{"children":[{"text":"/*Returns admission time for an encounter or for immediately prior emergency department visit.*/\ndefine function \"HospitalAdmissionTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"88"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"\"Hospitalization\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"89"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"123"}],"node_type":"Start","ref_id":"124"}],"node_type":"Start","ref_id":"124"}],"ref_id":"125"}],"define_name":"HospitalAdmissionTime"},{"children":[{"children":[{"children":[{"text":"/*Returns earliest arrival time for an encounter including any prior ED visit.*/\ndefine function \"HospitalArrivalTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"126"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"\"HospitalizationLocations\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"127"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"128"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"128"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"129"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"130"}],"node_type":"Start","ref_id":"131"}],"ref_id":"132"}],"ref_id":"133"}],"ref_id":"134"},{"children":[{"text":"\n  )"}]}],"ref_id":"135"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"136"}],"node_type":"Property","ref_id":"136"}],"node_type":"Start","ref_id":"137"}],"node_type":"Start","ref_id":"137"}],"ref_id":"138"}],"define_name":"HospitalArrivalTime"},{"children":[{"children":[{"children":[{"text":"/*Returns the length of stay in days (i.e. the number of days between admission and discharge) for the given encounter, or from the admission of any immediately prior emergency department visit to the discharge of the encounter*/\ndefine function \"HospitalizationLengthofStay\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"141"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"LengthInDays("}]},{"children":[{"children":[{"text":"\"Hospitalization\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"142"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"143"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"144"}],"node_type":"FunctionRef","ref_id":"144"}],"ref_id":"145"}],"define_name":"HospitalizationLengthofStay"},{"children":[{"children":[{"children":[{"text":"/*Returns the latest departure time for encounter including any prior ED visit.*/\ndefine function \"HospitalDepartureTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"146"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"\"HospitalizationLocations\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"147"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"148"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"148"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"149"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"150"}],"node_type":"Start","ref_id":"151"}],"ref_id":"152"}],"ref_id":"153"}],"ref_id":"154"},{"children":[{"text":"\n  )"}]}],"ref_id":"155"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"156"}],"node_type":"Property","ref_id":"156"}],"node_type":"End","ref_id":"157"}],"node_type":"End","ref_id":"157"}],"ref_id":"158"}],"define_name":"HospitalDepartureTime"},{"children":[{"children":[{"children":[{"text":"/*Hospital Discharge Time returns the discharge time for an encounter*/\ndefine function \"HospitalDischargeTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"159"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"160"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"161"}],"node_type":"Property","ref_id":"161"}],"node_type":"End","ref_id":"162"}],"node_type":"End","ref_id":"162"}],"ref_id":"163"}],"define_name":"HospitalDischargeTime"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization with Observation and Outpatient Surgery Service returns the total interval from the start of any immediately prior emergency department visit, outpatient surgery visit or observation visit to the discharge of the given encounter.*/\ndefine function \"HospitalizationWithObservationAndOutpatientSurgeryService\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"164"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"165"},{"children":[{"text":" Visit"}]}],"ref_id":"166"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"ObsVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Observation Services\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"167"}],"node_type":"Retrieve","ref_id":"167"},{"children":[{"text":" LastObs"}]}],"ref_id":"168"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastObs"}]}],"ref_id":"169"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"170"}],"node_type":"Property","ref_id":"170"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"174"},{"children":[{"text":" or less on or before"}]}],"ref_id":"175"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"171"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"172"}],"node_type":"Property","ref_id":"172"}],"node_type":"Start","ref_id":"173"}],"ref_id":"175"}],"ref_id":"175"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"176"}],"node_type":"End","ref_id":"177"}],"ref_id":"178"}],"ref_id":"179"}],"ref_id":"180"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"181"}],"ref_id":"182"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"VisitStart: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"ObsVisit"}]}],"ref_id":"183"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"184"}],"node_type":"Property","ref_id":"184"}],"node_type":"Start","ref_id":"185"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"186"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"187"}],"node_type":"Property","ref_id":"187"}],"node_type":"Start","ref_id":"188"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"189"}],"ref_id":"190"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"191"}],"node_type":"Retrieve","ref_id":"191"},{"children":[{"text":" LastED"}]}],"ref_id":"192"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"193"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"194"}],"node_type":"Property","ref_id":"194"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"196"},{"children":[{"text":" or less on or before"}]}],"ref_id":"197"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"195"}],"ref_id":"197"}],"ref_id":"197"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"198"}],"node_type":"End","ref_id":"199"}],"ref_id":"200"}],"ref_id":"201"}],"ref_id":"202"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"203"}],"ref_id":"204"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"VisitStartWithED: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"205"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"206"}],"node_type":"Property","ref_id":"206"}],"node_type":"Start","ref_id":"207"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"208"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"209"}],"ref_id":"210"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"OutpatientSurgeryVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Outpatient Surgery Service\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"211"}],"node_type":"Retrieve","ref_id":"211"},{"children":[{"text":" LastSurgeryOP"}]}],"ref_id":"212"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastSurgeryOP"}]}],"ref_id":"213"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"214"}],"node_type":"Property","ref_id":"214"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"216"},{"children":[{"text":" or less on or before"}]}],"ref_id":"217"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"VisitStartWithED"}]}],"node_type":"QueryLetRef","ref_id":"215"}],"ref_id":"217"}],"ref_id":"217"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"218"}],"node_type":"End","ref_id":"219"}],"ref_id":"220"}],"ref_id":"221"}],"ref_id":"222"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"223"}],"ref_id":"224"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"OutpatientSurgeryVisit"}]}],"ref_id":"225"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"226"}],"node_type":"Property","ref_id":"226"}],"node_type":"Start","ref_id":"227"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"VisitStartWithED"}]}],"node_type":"QueryLetRef","ref_id":"228"},{"children":[{"text":")"}]}],"ref_id":"229"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"230"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"231"}],"node_type":"Property","ref_id":"231"}],"ref_id":"232"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"233"}],"ref_id":"234"}],"node_type":"Query","ref_id":"235"}],"node_type":"Query","ref_id":"235"}],"ref_id":"236"}],"define_name":"HospitalizationWithObservationAndOutpatientSurgeryService"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization with Observation returns the total interval from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\ndefine function \"HospitalizationWithObservation\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"237"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"238"},{"children":[{"text":" Visit"}]}],"ref_id":"239"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"ObsVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Observation Services\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"240"}],"node_type":"Retrieve","ref_id":"240"},{"children":[{"text":" LastObs"}]}],"ref_id":"241"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastObs"}]}],"ref_id":"242"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"243"}],"node_type":"Property","ref_id":"243"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"247"},{"children":[{"text":" or less on or before"}]}],"ref_id":"248"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"244"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"245"}],"node_type":"Property","ref_id":"245"}],"node_type":"Start","ref_id":"246"}],"ref_id":"248"}],"ref_id":"248"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"249"}],"node_type":"End","ref_id":"250"}],"ref_id":"251"}],"ref_id":"252"}],"ref_id":"253"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"254"}],"ref_id":"255"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"VisitStart: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"ObsVisit"}]}],"ref_id":"256"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"257"}],"node_type":"Property","ref_id":"257"}],"node_type":"Start","ref_id":"258"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"259"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"260"}],"node_type":"Property","ref_id":"260"}],"node_type":"Start","ref_id":"261"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"262"}],"ref_id":"263"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"264"}],"node_type":"Retrieve","ref_id":"264"},{"children":[{"text":" LastED"}]}],"ref_id":"265"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"266"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"267"}],"node_type":"Property","ref_id":"267"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"269"},{"children":[{"text":" or less on or before"}]}],"ref_id":"270"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"268"}],"ref_id":"270"}],"ref_id":"270"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"271"}],"node_type":"End","ref_id":"272"}],"ref_id":"273"}],"ref_id":"274"}],"ref_id":"275"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"276"}],"ref_id":"277"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"278"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"279"}],"node_type":"Property","ref_id":"279"}],"node_type":"Start","ref_id":"280"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"281"},{"children":[{"text":")"}]}],"ref_id":"282"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"283"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"284"}],"node_type":"Property","ref_id":"284"}],"ref_id":"285"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"286"}],"ref_id":"287"}],"node_type":"Query","ref_id":"288"}],"node_type":"Query","ref_id":"288"}],"ref_id":"289"}],"define_name":"HospitalizationWithObservation"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization with Observation Length of Stay returns the length in days from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\ndefine function \"HospitalizationWithObservationLengthofStay\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"290"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"\"LengthInDays\"("}]},{"children":[{"children":[{"text":"\"HospitalizationWithObservation\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"291"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"292"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"293"}],"node_type":"FunctionRef","ref_id":"293"}],"ref_id":"294"}],"define_name":"HospitalizationWithObservationLengthofStay"},{"children":[{"children":[{"children":[{"text":"/*First Inpatient Intensive Care Unit returns the first intensive care unit for the given encounter, without considering any immediately prior emergency department visit.*/\ndefine function \"FirstInpatientIntensiveCareUnit\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"295"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"296"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"node_type":"Property","ref_id":"297"}],"node_type":"Property","ref_id":"297"},{"children":[{"text":")"}]}],"node_type":"Property","ref_id":"297"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"298"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"HospitalLocation"}]}],"ref_id":"299"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"300"}],"ref_id":"300"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Intensive Care Unit\""}]}],"ref_id":"301"}],"node_type":"InValueSet","ref_id":"302"},{"children":[{"text":"\n        and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"HospitalLocation"}]}],"ref_id":"303"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"304"}],"node_type":"Property","ref_id":"304"},{"children":[{"text":" during "}],"node_type":"IncludedIn","ref_id":"307"},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"305"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"306"}],"node_type":"Property","ref_id":"306"}],"node_type":"IncludedIn","ref_id":"307"}],"ref_id":"308"}],"ref_id":"308"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"309"}],"node_type":"Start","ref_id":"310"}],"ref_id":"311"}],"ref_id":"312"}],"ref_id":"313"},{"children":[{"text":"\n  )"}]}],"node_type":"First","ref_id":"314"}],"node_type":"First","ref_id":"314"}],"ref_id":"315"}],"define_name":"FirstInpatientIntensiveCareUnit"},{"children":[{"children":[{"children":[{"text":"/*Given a datetime and a period, returns the period (if a period is provided) or the interval beginning and ending on the datetime (if a datetime is provided)*/\ndefine function \"NormalizeInterval\"(pointInTime "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"316"},{"children":[{"text":", period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"317"},{"children":[{"text":"\u003e"}]}],"ref_id":"318"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"pointInTime"}]}],"node_type":"OperandRef","ref_id":"319"},{"children":[{"text":" is not null"}]}],"ref_id":"320"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"pointInTime"}]}],"ref_id":"321"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"pointInTime"}]}],"ref_id":"322"},{"children":[{"text":"]"}]}],"ref_id":"323"},{"children":[{"text":"\n    else "}]},{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"324"},{"children":[{"text":" is not null"}]}],"ref_id":"325"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"period"}]}],"ref_id":"326"},{"children":[{"text":" \n    else "}]},{"children":[{"children":[{"text":"null as "}],"node_type":"Null","ref_id":"327"},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"328"},{"children":[{"text":"\u003e"}]}],"ref_id":"329"}],"ref_id":"330"}],"ref_id":"331"}],"node_type":"If","ref_id":"332"}],"node_type":"If","ref_id":"332"}],"ref_id":"333"}],"define_name":"NormalizeInterval"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return true if the interval has a starting boundary specified (i.e. the start of the interval is not null and not the minimum DateTime value)*/\ndefine function \"HasStart\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"334"},{"children":[{"text":"\u003e"}]}],"ref_id":"335"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"not "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"336"}],"node_type":"Start","ref_id":"337"},{"children":[{"text":" is null"}]}],"node_type":"IsNull","ref_id":"338"},{"children":[{"text":"\n      or "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"339"}],"node_type":"Start","ref_id":"340"},{"children":[{"text":" = "}]},{"children":[{"children":[{"text":"minimum "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"341"}],"node_type":"MinValue","ref_id":"342"}],"node_type":"Equal","ref_id":"343"}],"node_type":"Or","ref_id":"344"},{"children":[{"text":"\n  )"}]}],"node_type":"Or","ref_id":"344"}],"node_type":"Not","ref_id":"345"}],"node_type":"Not","ref_id":"345"}],"ref_id":"346"}],"define_name":"HasStart"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return true if the interval has an ending boundary specified (i.e. the end of the interval is not null and not the maximum DateTime value)*/\ndefine function \"HasEnd\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"347"},{"children":[{"text":"\u003e"}]}],"ref_id":"348"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"not "}]},{"children":[{"children":[{"text":"( \n    "}]},{"children":[{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"349"}],"node_type":"End","ref_id":"350"},{"children":[{"text":" is null"}]}],"node_type":"IsNull","ref_id":"351"},{"children":[{"text":"\n      or \n      "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"352"}],"node_type":"End","ref_id":"353"},{"children":[{"text":" = "}]},{"children":[{"children":[{"text":"maximum "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"354"}],"node_type":"MaxValue","ref_id":"355"}],"node_type":"Equal","ref_id":"356"}],"node_type":"Or","ref_id":"357"},{"children":[{"text":"\n  )"}]}],"node_type":"Or","ref_id":"357"}],"node_type":"Not","ref_id":"358"}],"node_type":"Not","ref_id":"358"}],"ref_id":"359"}],"define_name":"HasEnd"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return the ending point if the interval has an ending boundary specified, otherwise, return the starting point*/\ndefine function \"Latest\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"360"},{"children":[{"text":"\u003e"}]}],"ref_id":"361"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"HasEnd("}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"362"},{"children":[{"text":")"}]}],"ref_id":"363"},{"children":[{"text":")"}]}],"ref_id":"363"},{"children":[{"text":" then \n  "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"364"}],"ref_id":"365"},{"children":[{"text":" \n    else "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"366"}],"ref_id":"367"}],"node_type":"If","ref_id":"368"}],"node_type":"If","ref_id":"368"}],"ref_id":"369"}],"define_name":"Latest"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return the starting point if the interval has a starting boundary specified, otherwise, return the ending point*/\ndefine function \"Earliest\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"370"},{"children":[{"text":"\u003e"}]}],"ref_id":"371"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"HasStart("}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"372"},{"children":[{"text":")"}]}],"ref_id":"373"},{"children":[{"text":")"}]}],"ref_id":"373"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"374"}],"ref_id":"375"},{"children":[{"text":" \n    else \n  "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"376"}],"ref_id":"377"}],"node_type":"If","ref_id":"378"}],"node_type":"If","ref_id":"378"}],"ref_id":"379"}],"define_name":"Earliest"},{"children":[{"children":[{"children":[{"text":"/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the ending point of the period if the period has an ending boundary specified, otherwise returns the starting point of the interval*/\ndefine function \"LatestOf\"(pointInTime "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"380"},{"children":[{"text":", period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"381"},{"children":[{"text":"\u003e"}]}],"ref_id":"382"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Latest("}]},{"children":[{"children":[{"text":"NormalizeInterval("}]},{"children":[{"children":[{"text":"pointInTime"}]}],"node_type":"OperandRef","ref_id":"383"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"384"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"385"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"386"}],"node_type":"FunctionRef","ref_id":"386"}],"ref_id":"387"}],"define_name":"LatestOf"},{"children":[{"children":[{"children":[{"text":"/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the starting point of the period if the period has a starting boundary specified, otherwise returns the ending point of the period*/\ndefine function \"EarliestOf\"(pointInTime "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"388"},{"children":[{"text":", period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"389"},{"children":[{"text":"\u003e"}]}],"ref_id":"390"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Earliest("}]},{"children":[{"children":[{"text":"NormalizeInterval("}]},{"children":[{"children":[{"text":"pointInTime"}]}],"node_type":"OperandRef","ref_id":"391"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"392"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"393"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"394"}],"node_type":"FunctionRef","ref_id":"394"}],"ref_id":"395"}],"define_name":"EarliestOf"}],"identifier":{"id":"MATGlobalCommonFunctionsQDM","version":"8.0.000"}},"is_main_library":false,"is_top_level":true,"library_name":"MATGlobalCommonFunctionsQDM","library_version":"8.0.000","statement_dependencies":[{"_id":"68923ee8a83e15671c2e0dab","statement_name":"Inpatient Encounter"},{"_id":"68923ee8a83e15671c2e0dac","statement_name":"NormalizeInterval"},{"_id":"68923ee8a83e15671c2e0dad","statement_name":"HospitalizationWithObservation"}]}],"created_at":null,"description":"Proportion of inpatient hospitalizations for patients 18 years of age and older prescribed, or continued on, two or more opioids or an opioid and benzodiazepine concurrently at discharge","hqmf_id":"2C928082-894A-3FB9-0189-98B58F4B0F06","hqmf_set_id":"33B40C00-909A-4490-8093-999FBCDC3480","hqmf_version_number":"7.0.000","main_cql_library":"SafeUseofOpioidsConcurrentPrescribing","measure_attributes":[{"code":"OTH","value":"506","name":"eCQM Identifier (Measure Authoring Tool)","code_obj":{"type":"CD","null_flavor":"OTH","original_text":"eCQM Identifier (Measure Authoring Tool)"},"value_obj":{"type":"ED","value":"506","media_type":"text/plain"}},{"code":"OTH","value":"3316e","name":"CBE Number","code_obj":{"type":"CD","null_flavor":"OTH","original_text":"CBE Number"},"value_obj":{"type":"ED","value":"3316e","media_type":"text/plain"}},{"code":"COPY","value":"Limited proprietary coding is contained in the Measure specifications for user convenience. Users of proprietary code sets should obtain all necessary licenses from the owners of the code sets. Mathematica disclaims all liability for use or accuracy of any third-party codes contained in the specifications.\n\nCPT(R) contained in the measure specifications is copyright 2004-2023 American Medical Association. LOINC(R) copyright 2004-2023 Regenstrief Institute, Inc. This material contains SNOMED Clinical Terms(R) (SNOMED CT[R]) copyright 2004-2023 International Health Terminology Standards Development Organisation. ICD-10 copyright 2023 World Health Organization. All Rights Reserved.","name":"Copyright","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"COPY","title":"Copyright"},"value_obj":{"type":"ED","value":"Limited proprietary coding is contained in the Measure specifications for user convenience. Users of proprietary code sets should obtain all necessary licenses from the owners of the code sets. Mathematica disclaims all liability for use or accuracy of any third-party codes contained in the specifications.\n\nCPT(R) contained in the measure specifications is copyright 2004-2023 American Medical Association. LOINC(R) copyright 2004-2023 Regenstrief Institute, Inc. This material contains SNOMED Clinical Terms(R) (SNOMED CT[R]) copyright 2004-2023 International Health Terminology Standards Development Organisation. ICD-10 copyright 2023 World Health Organization. All Rights Reserved.","media_type":"text/plain"}},{"code":"DISC","value":"These performance measures are not clinical guidelines, do not establish a standard of medical care, and have not been tested for all potential applications.\n\nTHE MEASURES AND SPECIFICATION ARE PROVIDED AS IS WITHOUT WARRANTY OF ANY KIND.\n\nDue to technical limitations, registered trademarks are indicated by (R) or [R] and unregistered trademarks are indicated by (TM) or [TM].","name":"Disclaimer","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DISC","title":"Disclaimer"},"value_obj":{"type":"ED","value":"These performance measures are not clinical guidelines, do not establish a standard of medical care, and have not been tested for all potential applications.\n\nTHE MEASURES AND SPECIFICATION ARE PROVIDED AS IS WITHOUT WARRANTY OF ANY KIND.\n\nDue to technical limitations, registered trademarks are indicated by (R) or [R] and unregistered trademarks are indicated by (TM) or [TM].","media_type":"text/plain"}},{"code":"MSRSCORE","name":"Measure Scoring","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRSCORE","title":"Measure Scoring"},"value_obj":{"type":"CD","system":"2.16.840.1.113883.5.1063","code":"PROPOR","title":"Proportion"}},{"code":"MSRTYPE","name":"Measure Type","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRTYPE","title":"Measure Type"},"value_obj":{"type":"CD","system":"2.16.840.1.113883.5.1063","code":"PROCESS","title":"PROCESS"}},{"code":"STRAT","value":"None","name":"Stratification","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"STRAT","title":"Stratification"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"MSRADJ","value":"None","name":"Risk Adjustment","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRADJ","title":"Risk Adjustment"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"MSRAGG","value":"None","name":"Rate Aggregation","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRAGG","title":"Rate Aggregation"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"RAT","value":"Unintentional opioid overdose fatalities have become a major public health concern in the United States (Rudd et al., 2016). Reducing the number of unintentional overdoses has become a priority for numerous federal organizations including, but not limited to, the Centers for Disease Control and Prevention (CDC), the Federal Interagency Workgroup for Opioid Adverse Drug Events, and the Substance Abuse and Mental Health Services Administration. \n\nConcurrent prescriptions of opioids or opioids and benzodiazepines places patients at a greater risk of unintentional overdose due to the increased risk of respiratory depression (Dowell, Haegerich, \u0026 Chou, 2016; Dowell, Ragan, Jones, Baldwin, \u0026 Chou, 2022). An analysis of national prescribing patterns shows that more than half of patients who received an opioid prescription in 2009 had filled another opioid prescription within the previous 30 days (National Institute on Drug Abuse, 2011). Studies of multiple claims and prescription databases have shown that between 5%-15% of patients receive concurrent opioid prescriptions and 5%-20% of patients receive concurrent opioid and benzodiazepine prescriptions across various settings (Liu et al., 2013; Mack et al., 2015, Park et al., 2015). Patients who have multiple opioid prescriptions have an increased risk for overdose (Jena et al., 2014). Rates of fatal overdose are ten times higher in patients who are co-dispensed opioid analgesics and benzodiazepines than opioids alone (Dasgupta et al., 2015). The number of opioid overdose deaths involving benzodiazepines increased 14% on average each year from 2006 to 2011, while the number of opioid analgesic overdose deaths not involving benzodiazepines did not change significantly (Jones \u0026 McAninch, 2015). Furthermore, concurrent use of benzodiazepines with opioids was prevalent in 31%-51% of fatal overdoses (Dowell, Haegerich, \u0026 Chou, 2016). One study found that eliminating concurrent use of opioids and benzodiazepines could reduce the risk of opioid overdose-related emergency department (ED) and inpatient visits by 15% and potentially could have prevented an estimated 2,630 deaths related to opioid painkiller overdoses in 2015 (Sun et al., 2017). \n\nA study on The Opioid Safety Initiative in the Veterans Health Administration (VHA), which includes an opioid and benzodiazepine concurrent prescribing measure that this measure is based on, was associated with a decrease of 20.67% overall and 0.86% patients per month (781 patients per month) receiving concurrent benzodiazepine with an opioid among all adult VHA patients who filled outpatient opioid prescriptions from October 2012 to September 2014 (Lin et al., 2017).\n\nAdopting a measure that calculates the proportion of patients with two or more opioids or opioids and benzodiazepines concurrently has the potential to reduce preventable mortality and reduce the costs associated with adverse events related to opioid use by (1) encouraging providers to identify patients with concurrent prescriptions of opioids or opioids and benzodiazepines and (2) discouraging providers from prescribing two or more opioids or opioids and benzodiazepines concurrently.","name":"Rationale","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"RAT","title":"Rationale"},"value_obj":{"type":"ED","value":"Unintentional opioid overdose fatalities have become a major public health concern in the United States (Rudd et al., 2016). Reducing the number of unintentional overdoses has become a priority for numerous federal organizations including, but not limited to, the Centers for Disease Control and Prevention (CDC), the Federal Interagency Workgroup for Opioid Adverse Drug Events, and the Substance Abuse and Mental Health Services Administration. \n\nConcurrent prescriptions of opioids or opioids and benzodiazepines places patients at a greater risk of unintentional overdose due to the increased risk of respiratory depression (Dowell, Haegerich, \u0026 Chou, 2016; Dowell, Ragan, Jones, Baldwin, \u0026 Chou, 2022). An analysis of national prescribing patterns shows that more than half of patients who received an opioid prescription in 2009 had filled another opioid prescription within the previous 30 days (National Institute on Drug Abuse, 2011). Studies of multiple claims and prescription databases have shown that between 5%-15% of patients receive concurrent opioid prescriptions and 5%-20% of patients receive concurrent opioid and benzodiazepine prescriptions across various settings (Liu et al., 2013; Mack et al., 2015, Park et al., 2015). Patients who have multiple opioid prescriptions have an increased risk for overdose (Jena et al., 2014). Rates of fatal overdose are ten times higher in patients who are co-dispensed opioid analgesics and benzodiazepines than opioids alone (Dasgupta et al., 2015). The number of opioid overdose deaths involving benzodiazepines increased 14% on average each year from 2006 to 2011, while the number of opioid analgesic overdose deaths not involving benzodiazepines did not change significantly (Jones \u0026 McAninch, 2015). Furthermore, concurrent use of benzodiazepines with opioids was prevalent in 31%-51% of fatal overdoses (Dowell, Haegerich, \u0026 Chou, 2016). One study found that eliminating concurrent use of opioids and benzodiazepines could reduce the risk of opioid overdose-related emergency department (ED) and inpatient visits by 15% and potentially could have prevented an estimated 2,630 deaths related to opioid painkiller overdoses in 2015 (Sun et al., 2017). \n\nA study on The Opioid Safety Initiative in the Veterans Health Administration (VHA), which includes an opioid and benzodiazepine concurrent prescribing measure that this measure is based on, was associated with a decrease of 20.67% overall and 0.86% patients per month (781 patients per month) receiving concurrent benzodiazepine with an opioid among all adult VHA patients who filled outpatient opioid prescriptions from October 2012 to September 2014 (Lin et al., 2017).\n\nAdopting a measure that calculates the proportion of patients with two or more opioids or opioids and benzodiazepines concurrently has the potential to reduce preventable mortality and reduce the costs associated with adverse events related to opioid use by (1) encouraging providers to identify patients with concurrent prescriptions of opioids or opioids and benzodiazepines and (2) discouraging providers from prescribing two or more opioids or opioids and benzodiazepines concurrently.","media_type":"text/plain"}},{"code":"CRS","value":"The CDC Clinical Practice Guideline for Prescribing Opioids for Pain  United States, 2022 recommends that clinicians should:\n- [Use strategies minimizing] opioid usefor both opioid-nave and opioid-tolerant patients with acute pain when possible. If patients receiving long-term opioid therapy require additional medication for acute pain, nonopioid medications should be used when possible.\n- Use particular caution when prescribing opioid pain medication and benzodiazepines concurrently.\"\n- Review increased risks for respiratory depression when opioids are taken with benzodiazepines, other sedatives, alcohol, nonprescribed or illicit drugs (e.g., heroin), or other opioids (see Recommendations 8 and 11)\n- Closely monitor patients who are unable to taper and who continue on high-dose or otherwise high-risk opioid regimens (e.g., opioids prescribed concurrently with benzodiazepines) and should work with patients to mitigate overdose risk (e.g., by providing overdose education and naloxone) (see Recommendation 8).\n- \"Discuss information from the PDMP with the patient and confirm that the patient is aware of any additional prescriptions.\n- Discuss safety concerns, including increased risk for respiratory depression and overdose, with patients found to be receiving overlapping prescription opioids from multiple clinicians who are not coordinating the patients care or patients who are receiving medications that increase risk when combined with opioids (e.g., benzodiazepines) (see Recommendation 11), and offer naloxone (see Recommendation 8).\"\n- \"Discuss safety concerns with other clinicians who are prescribing controlled substances for the patient. Ideally, clinicians should first discuss concerns with the patient and inform them that they plan to coordinate care with their other clinicians to improve the patients safety.\n\nIn addition to the 2022 CDC Clinical Practice Guideline for Prescribing Opioids for Pain, opioid prescribing guidelines issued by various state agencies and professional societies for various settings agree with the recommendation to avoid concurrently prescribing opioids  (American Academy of Emergency Medicine (AAEM), 2013; and Washington Agency Medical Directors Group (WAMDG), 2015), and opioids and benzodiazepines (WAMDG, 2015; American Society of Interventional Pain Physicians (ASIPP), 2012;, and New York City Department Of Health and Mental Hygiene (NYC DPOMH), 2013) whenever possible as the combination of these medications may potentiate opioid-induced respiratory depression.","name":"Clinical Recommendation Statement","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"CRS","title":"Clinical Recommendation Statement"},"value_obj":{"type":"ED","value":"The CDC Clinical Practice Guideline for Prescribing Opioids for Pain  United States, 2022 recommends that clinicians should:\n- [Use strategies minimizing] opioid usefor both opioid-nave and opioid-tolerant patients with acute pain when possible. If patients receiving long-term opioid therapy require additional medication for acute pain, nonopioid medications should be used when possible.\n- Use particular caution when prescribing opioid pain medication and benzodiazepines concurrently.\"\n- Review increased risks for respiratory depression when opioids are taken with benzodiazepines, other sedatives, alcohol, nonprescribed or illicit drugs (e.g., heroin), or other opioids (see Recommendations 8 and 11)\n- Closely monitor patients who are unable to taper and who continue on high-dose or otherwise high-risk opioid regimens (e.g., opioids prescribed concurrently with benzodiazepines) and should work with patients to mitigate overdose risk (e.g., by providing overdose education and naloxone) (see Recommendation 8).\n- \"Discuss information from the PDMP with the patient and confirm that the patient is aware of any additional prescriptions.\n- Discuss safety concerns, including increased risk for respiratory depression and overdose, with patients found to be receiving overlapping prescription opioids from multiple clinicians who are not coordinating the patients care or patients who are receiving medications that increase risk when combined with opioids (e.g., benzodiazepines) (see Recommendation 11), and offer naloxone (see Recommendation 8).\"\n- \"Discuss safety concerns with other clinicians who are prescribing controlled substances for the patient. Ideally, clinicians should first discuss concerns with the patient and inform them that they plan to coordinate care with their other clinicians to improve the patients safety.\n\nIn addition to the 2022 CDC Clinical Practice Guideline for Prescribing Opioids for Pain, opioid prescribing guidelines issued by various state agencies and professional societies for various settings agree with the recommendation to avoid concurrently prescribing opioids  (American Academy of Emergency Medicine (AAEM), 2013; and Washington Agency Medical Directors Group (WAMDG), 2015), and opioids and benzodiazepines (WAMDG, 2015; American Society of Interventional Pain Physicians (ASIPP), 2012;, and New York City Department Of Health and Mental Hygiene (NYC DPOMH), 2013) whenever possible as the combination of these medications may potentiate opioid-induced respiratory depression.","media_type":"text/plain"}},{"code":"IDUR","value":"Improvement noted as a decrease in the rate","name":"Improvement Notation","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"IDUR","title":"Improvement Notation"},"value_obj":{"type":"ED","value":"Improvement noted as a decrease in the rate","media_type":"text/plain"}},{"code":"REF","value":"CITATIONAmerican Academy of Emergency Medicine (AAEM). (2013). Emergency department opioid-prescribing guidelines for the treatment of non-cancer-related pain. Retrieved from https://www.aaem.org/UserFiles/file/Emergency-Department-Opoid-Prescribing-Guidelines.pdf","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONAmerican Academy of Emergency Medicine (AAEM). (2013). Emergency department opioid-prescribing guidelines for the treatment of non-cancer-related pain. Retrieved from https://www.aaem.org/UserFiles/file/Emergency-Department-Opoid-Prescribing-Guidelines.pdf","media_type":"text/plain"}},{"code":"REF","value":"CITATIONAmerican Society of Interventional Pain Physicians (ASIPP). (2012). Guidelines for responsible opioid prescribing in chronic non-cancer pain; Part 2-guidance. Retrieved from https://pubmed.ncbi.nlm.nih.gov/22786449/","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONAmerican Society of Interventional Pain Physicians (ASIPP). (2012). Guidelines for responsible opioid prescribing in chronic non-cancer pain; Part 2-guidance. Retrieved from https://pubmed.ncbi.nlm.nih.gov/22786449/","media_type":"text/plain"}},{"code":"REF","value":"CITATIONDasgupta, N., Jonsson Funk, M., Proescholdbell, S., et al. (2015, September). Cohort study of the impact of high-dose opioid analgesics on overdose mortality. Pain Medicine. Retrieved from http://onlinelibrary.wiley.com/doi/10.1111/pme.12907/abstract","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONDasgupta, N., Jonsson Funk, M., Proescholdbell, S., et al. (2015, September). Cohort study of the impact of high-dose opioid analgesics on overdose mortality. Pain Medicine. Retrieved from http://onlinelibrary.wiley.com/doi/10.1111/pme.12907/abstract","media_type":"text/plain"}},{"code":"REF","value":"CITATIONDowell, D., Haegerich, T., \u0026 Chou, R. (2016). CDC guideline for prescribing opioids for chronic painUnited States, 2016. Morbidity and Mortality Weekly Report (MMWR) Recommendations and Reports, 65. Retrieved from CDC Guideline for prescribing opioids for chronic painUnited States, 2016 | MWWR","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONDowell, D., Haegerich, T., \u0026 Chou, R. (2016). CDC guideline for prescribing opioids for chronic painUnited States, 2016. Morbidity and Mortality Weekly Report (MMWR) Recommendations and Reports, 65. Retrieved from CDC Guideline for prescribing opioids for chronic painUnited States, 2016 | MWWR","media_type":"text/plain"}},{"code":"REF","value":"CITATIONDowell D., Ragan K., Jones C., Baldwin G., Chou R. (2022), CDC Clinical Practice Guideline for Prescribing Opioids for Pain  United States, 2022. Morbidity and Mortality Weekly Report (MMWR) Recomm Rep 2022;71(No. RR-3):195. DOI: http://dx.doi.org/10.15585/mmwr.rr7103a1","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONDowell D., Ragan K., Jones C., Baldwin G., Chou R. (2022), CDC Clinical Practice Guideline for Prescribing Opioids for Pain  United States, 2022. Morbidity and Mortality Weekly Report (MMWR) Recomm Rep 2022;71(No. RR-3):195. DOI: http://dx.doi.org/10.15585/mmwr.rr7103a1","media_type":"text/plain"}},{"code":"REF","value":"CITATIONJena, A., Goldman, D., Schaeffer, L. D., et al. (2014). Opioid prescribing by multiple providers in Medicare: Retrospective observational study of insurance claims. BMJ, 348, g1393. DOI: 10.1136/bmj.g1393","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONJena, A., Goldman, D., Schaeffer, L. D., et al. (2014). Opioid prescribing by multiple providers in Medicare: Retrospective observational study of insurance claims. BMJ, 348, g1393. DOI: 10.1136/bmj.g1393","media_type":"text/plain"}},{"code":"REF","value":"CITATIONJones, C., \u0026 McAninch, J. (2015). Emergency department visits and overdose deaths from combined use of opioids and benzodiazepines. American Journal of Preventive Medicine, 49(4), pp. 493-501. Retrieved from https://www.sciencedirect.com/science/article/pii/S0749379715001634?via%3Dihub","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONJones, C., \u0026 McAninch, J. (2015). Emergency department visits and overdose deaths from combined use of opioids and benzodiazepines. American Journal of Preventive Medicine, 49(4), pp. 493-501. Retrieved from https://www.sciencedirect.com/science/article/pii/S0749379715001634?via%3Dihub","media_type":"text/plain"}},{"code":"REF","value":"CITATIONLin, L. A., Bohnert, A. S., Kerns, R. D., et al. (2017). Impact of the opioid safety initiative on opioid-related prescribing in veterans. Pain, 158(5), 833839. Retrieved from https://www.ncbi.nlm.nih.gov/pubmed/28240996","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONLin, L. A., Bohnert, A. S., Kerns, R. D., et al. (2017). Impact of the opioid safety initiative on opioid-related prescribing in veterans. Pain, 158(5), 833839. Retrieved from https://www.ncbi.nlm.nih.gov/pubmed/28240996","media_type":"text/plain"}},{"code":"REF","value":"CITATIONLiu, Y., Logan, J., Paulozzi, L., et al. (2013). Potential misuse and inappropriate prescription practices involving opioid analgesics. American Journal of Managed Care, 19(8), 648665. Retrieved from http://www.ajmc.com/journals/issue/2013/2013-1-vol19-n8/Potential-Misuse-and-Inappropriate-Prescription-Practices-Involving-Opioid-Analgesics/","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONLiu, Y., Logan, J., Paulozzi, L., et al. (2013). Potential misuse and inappropriate prescription practices involving opioid analgesics. American Journal of Managed Care, 19(8), 648665. Retrieved from http://www.ajmc.com/journals/issue/2013/2013-1-vol19-n8/Potential-Misuse-and-Inappropriate-Prescription-Practices-Involving-Opioid-Analgesics/","media_type":"text/plain"}},{"code":"REF","value":"CITATIONMack, K., Zhang, K., Paulozzi, L., et al. (2015, February). Prescription practices involving opioid analgesics among Americans with Medicaid, 2010. Journal of Health Care for the Poor and Underserved, 26(1), 182198. Retrieved from http://www.ncbi.nlm.nih.gov/pmc/articles/PMC4365785","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONMack, K., Zhang, K., Paulozzi, L., et al. (2015, February). Prescription practices involving opioid analgesics among Americans with Medicaid, 2010. Journal of Health Care for the Poor and Underserved, 26(1), 182198. Retrieved from http://www.ncbi.nlm.nih.gov/pmc/articles/PMC4365785","media_type":"text/plain"}},{"code":"REF","value":"CITATIONNational Institute on Drug Abuse. (2011). Analysis of opioid prescription  practices finds areas of concern. Retrieved from https://www.nih.gov/news-events/news-releases/analysis-opioid-prescription-practices-finds-areas-concern","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONNational Institute on Drug Abuse. (2011). Analysis of opioid prescription  practices finds areas of concern. Retrieved from https://www.nih.gov/news-events/news-releases/analysis-opioid-prescription-practices-finds-areas-concern","media_type":"text/plain"}},{"code":"REF","value":"CITATIONNew York City (NYC) Department of Health and Mental Hygiene (NYC DOHMH). (2013). Opioid prescribing resource for emergency department. Retrieved from https://www1.nyc.gov/site/doh/providers/health-topics/opioid-prescribing-resources-for-emergency-departments.page","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONNew York City (NYC) Department of Health and Mental Hygiene (NYC DOHMH). (2013). Opioid prescribing resource for emergency department. Retrieved from https://www1.nyc.gov/site/doh/providers/health-topics/opioid-prescribing-resources-for-emergency-departments.page","media_type":"text/plain"}},{"code":"REF","value":"CITATIONPark, T., Saitz, R., Ganoczy, D., et al. (2015). Benzodiazepine-prescribing patterns and deaths from drug overdose among U.S. veterans receiving opioid analgesics: Case-cohort study. BMJ, 350, h2698. Retrieved from http://www.bmj.com/content/350/bmj.h2698","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONPark, T., Saitz, R., Ganoczy, D., et al. (2015). Benzodiazepine-prescribing patterns and deaths from drug overdose among U.S. veterans receiving opioid analgesics: Case-cohort study. BMJ, 350, h2698. Retrieved from http://www.bmj.com/content/350/bmj.h2698","media_type":"text/plain"}},{"code":"REF","value":"CITATIONRudd, R., Aleshire, N., Zibbell, J., et al. (2016, January). Increases in drug and opioid overdose deathsUnited States, 20002014. Morbidity and Mortality Weekly Report, 64(50), 13781382. Retrieved from http://www.cdc.gov/mmwr/preview/mmwrhtml/mm6450a3.htm","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONRudd, R., Aleshire, N., Zibbell, J., et al. (2016, January). Increases in drug and opioid overdose deathsUnited States, 20002014. Morbidity and Mortality Weekly Report, 64(50), 13781382. Retrieved from http://www.cdc.gov/mmwr/preview/mmwrhtml/mm6450a3.htm","media_type":"text/plain"}},{"code":"REF","value":"CITATIONSun, E., Dixit, A., Humphreys, K., et al. (2017). Association between concurrent use of prescription opioids and benzodiazepines and overdose: Retrospective analysis. BMJ, 356, j760. Retrieved from\nhttp://www.bmj.com/content/356/bmj.j760","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONSun, E., Dixit, A., Humphreys, K., et al. (2017). Association between concurrent use of prescription opioids and benzodiazepines and overdose: Retrospective analysis. BMJ, 356, j760. Retrieved from\nhttp://www.bmj.com/content/356/bmj.j760","media_type":"text/plain"}},{"code":"REF","value":"CITATIONWashington Agency Medical Directors Group (WAMDG). (2015). Interagency guideline on prescribing opioids for pain, Part II: Prescribing opioids in the acute and subacute phase. Retrieved from http://www.agencymeddirectors.wa.gov/Files/2015AMDGOpioidGuideline.pdf","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONWashington Agency Medical Directors Group (WAMDG). (2015). Interagency guideline on prescribing opioids for pain, Part II: Prescribing opioids in the acute and subacute phase. Retrieved from http://www.agencymeddirectors.wa.gov/Files/2015AMDGOpioidGuideline.pdf","media_type":"text/plain"}},{"code":"DEF","value":"For the purpose of this measure, the following are defined as:\n\n- Opioid: Schedule II, III and IV Opioid Medications that do not include naloxone. \n\n- Benzodiazepine: Schedule IV benzodiazepine medications.\n\n- Medications for Opioid Use Disorder: Methadone, buprenorphine and buprenorphine in combination with naloxone. \n\n- Prescribed: The intent of the measure is to capture opioid and/or benzodiazepine medications continued or ordered at discharge\n\n- Numerator criteria: Two or more unique orders for opioids, or an opioid and benzodiazepine at discharge","name":"Definition","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DEF","title":"Definition"},"value_obj":{"type":"ED","value":"For the purpose of this measure, the following are defined as:\n\n- Opioid: Schedule II, III and IV Opioid Medications that do not include naloxone. \n\n- Benzodiazepine: Schedule IV benzodiazepine medications.\n\n- Medications for Opioid Use Disorder: Methadone, buprenorphine and buprenorphine in combination with naloxone. \n\n- Prescribed: The intent of the measure is to capture opioid and/or benzodiazepine medications continued or ordered at discharge\n\n- Numerator criteria: Two or more unique orders for opioids, or an opioid and benzodiazepine at discharge","media_type":"text/plain"}},{"code":"GUIDE","value":"Clinician judgement, clinical appropriateness, or both may indicate concurrent prescribing of two unique opioids or an opioid and benzodiazepine is medically necessary, thus the measure is not expected to have a zero rate. \n\nInpatient hospitalizations with discharge medications of a new or continuing opioid or a new or continuing benzodiazepine prescription should be included in the initial population. \n\nInpatient hospitalizations with discharge medications of two or more new or continuing opioids or new or continuing opioid and benzodiazepine resulting in concurrent therapy at discharge should be included in the numerator. Each benzodiazepine and opioid included on the medication discharge list is considered a unique prescription.\n\nThe denominator population includes patients with inpatient hospitalizations and patients from Acute Hospital Care at Home programs, who are treated and billed as inpatients but receive care in their home.\n\nThis eCQM is an episode-based measure. An episode is defined as each inpatient hospitalization or encounter that ends during the measurement period.\n\nThis version of the eCQM uses QDM version 5.6. Please refer to the eCQI Resource Center (https://ecqi.healthit.gov/qdm) for more information on the QDM.","name":"Guidance","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"GUIDE","title":"Guidance"},"value_obj":{"type":"ED","value":"Clinician judgement, clinical appropriateness, or both may indicate concurrent prescribing of two unique opioids or an opioid and benzodiazepine is medically necessary, thus the measure is not expected to have a zero rate. \n\nInpatient hospitalizations with discharge medications of a new or continuing opioid or a new or continuing benzodiazepine prescription should be included in the initial population. \n\nInpatient hospitalizations with discharge medications of two or more new or continuing opioids or new or continuing opioid and benzodiazepine resulting in concurrent therapy at discharge should be included in the numerator. Each benzodiazepine and opioid included on the medication discharge list is considered a unique prescription.\n\nThe denominator population includes patients with inpatient hospitalizations and patients from Acute Hospital Care at Home programs, who are treated and billed as inpatients but receive care in their home.\n\nThis eCQM is an episode-based measure. An episode is defined as each inpatient hospitalization or encounter that ends during the measurement period.\n\nThis version of the eCQM uses QDM version 5.6. Please refer to the eCQI Resource Center (https://ecqi.healthit.gov/qdm) for more information on the QDM.","media_type":"text/plain"}},{"code":"TRANF","value":"TBD","name":"Transmission Format","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"TRANF","title":"Transmission Format"},"value_obj":{"type":"ED","value":"TBD","media_type":"text/plain"}},{"code":"IPOP","value":"Inpatient hospitalizations that end during the measurement period, where the patient is 18 years of age and older at the start of the encounter and prescribed one or more new or continuing opioid or benzodiazepine at discharge","name":"Initial Population","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"IPOP","title":"Initial Population"},"value_obj":{"type":"ED","value":"Inpatient hospitalizations that end during the measurement period, where the patient is 18 years of age and older at the start of the encounter and prescribed one or more new or continuing opioid or benzodiazepine at discharge","media_type":"text/plain"}},{"code":"DENOM","value":"Equals Initial Population","name":"Denominator","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DENOM","title":"Denominator"},"value_obj":{"type":"ED","value":"Equals Initial Population","media_type":"text/plain"}},{"code":"DENEX","value":"Inpatient hospitalizations where patients have cancer pain that begins prior to or during the encounter or are ordered or are receiving palliative or hospice care (including comfort measures, terminal care, and dying care) during the hospitalization or in an emergency department encounter or observation stay immediately prior to hospitalization, patients receiving medication for opioid use disorder, patients with sickle cell disease, patients discharged to another inpatient care facility or left against medical advice, and patients who expire during the inpatient stay","name":"Denominator Exclusions","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DENEX","title":"Denominator Exclusions"},"value_obj":{"type":"ED","value":"Inpatient hospitalizations where patients have cancer pain that begins prior to or during the encounter or are ordered or are receiving palliative or hospice care (including comfort measures, terminal care, and dying care) during the hospitalization or in an emergency department encounter or observation stay immediately prior to hospitalization, patients receiving medication for opioid use disorder, patients with sickle cell disease, patients discharged to another inpatient care facility or left against medical advice, and patients who expire during the inpatient stay","media_type":"text/plain"}},{"code":"NUMER","value":"Inpatient hospitalizations where the patient is prescribed or continuing to take two or more opioids or an opioid and benzodiazepine at discharge","name":"Numerator","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"NUMER","title":"Numerator"},"value_obj":{"type":"ED","value":"Inpatient hospitalizations where the patient is prescribed or continuing to take two or more opioids or an opioid and benzodiazepine at discharge","media_type":"text/plain"}},{"code":"NUMEX","value":"Not Applicable","name":"Numerator Exclusions","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"NUMEX","title":"Numerator Exclusions"},"value_obj":{"type":"ED","value":"Not Applicable","media_type":"text/plain"}},{"code":"DENEXCEP","value":"None","name":"Denominator Exceptions","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DENEXCEP","title":"Denominator Exceptions"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"SDE","value":"For every patient evaluated by this measure also identify payer, race, ethnicity and sex","name":"Supplemental Data Elements","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"SDE","title":"Supplemental Data Elements"},"value_obj":{"type":"ED","value":"For every patient evaluated by this measure also identify payer, race, ethnicity and sex","media_type":"text/plain"}}],"measure_period":{"type":"IVL_TS","low":{"type":"TS","value":"201201010000","inclusive?":true,"derived?":false},"high":{"type":"TS","value":"201212312359","inclusive?":true,"derived?":false},"width":{"type":"PQ","unit":"a","value":"1","inclusive?":true,"derived?":false}},"measure_scoring":"PROPORTION","population_criteria":{"IPP":{"conjunction?":true,"type":"IPP","hqmf_id":"062F953F-F0BA-4FF5-8A4A-1FBE40001DF1","preconditions":[{"id":2,"preconditions":[{"id":1,"reference":"SafeUseofOpioidsConcurrentPrescribing__Initial_Population__C81AEBEF_F83D_4BFF_89AA_374E6BC3E336"}],"conjunction_code":"allTrue"}]},"DENOM":{"conjunction?":true,"type":"DENOM","hqmf_id":"EF6E2AD8-693F-431E-BC01-0AE627B101BF","preconditions":[{"id":4,"preconditions":[{"id":3,"reference":"SafeUseofOpioidsConcurrentPrescribing__Denominator__C81AEBEF_F83D_4BFF_89AA_374E6BC3E336"}],"conjunction_code":"allTrue"}]},"NUMER":{"conjunction?":true,"type":"NUMER","hqmf_id":"C920F16A-B0EF-418C-99F3-853393783797","preconditions":[{"id":6,"preconditions":[{"id":5,"reference":"SafeUseofOpioidsConcurrentPrescribing__Numerator__C81AEBEF_F83D_4BFF_89AA_374E6BC3E336"}],"conjunction_code":"allTrue"}]},"DENEX":{"conjunction?":true,"type":"DENEX","hqmf_id":"91F42BC6-FECA-4DD1-BA7D-B8CCD265D10B","preconditions":[{"id":8,"preconditions":[{"id":7,"reference":"SafeUseofOpioidsConcurrentPrescribing__Denominator_Exclusion__C81AEBEF_F83D_4BFF_89AA_374E6BC3E336"}],"conjunction_code":"atLeastOneTrue"}]}},"population_sets":[{"_id":"68923eeea83e15671c2e10e8","population_set_id":"PopulationSet_1","populations":{"DENEX":{"_id":"68923eeea83e15671c2e10e9","hqmf_id":"91F42BC6-FECA-4DD1-BA7D-B8CCD265D10B","library_name":"SafeUseofOpioidsConcurrentPrescribing","statement_name":"Denominator Exclusion"},"DENOM":{"_id":"68923eeea83e15671c2e10ea","hqmf_id":"EF6E2AD8-693F-431E-BC01-0AE627B101BF","library_name":"SafeUseofOpioidsConcurrentPrescribing","statement_name":"Denominator"},"IPP":{"_id":"68923eeea83e15671c2e10eb","hqmf_id":"062F953F-F0BA-4FF5-8A4A-1FBE40001DF1","library_name":"SafeUseofOpioidsConcurrentPrescribing","statement_name":"Initial Population"},"NUMER":{"_id":"68923eeea83e15671c2e10ec","hqmf_id":"C920F16A-B0EF-418C-99F3-853393783797","library_name":"SafeUseofOpioidsConcurrentPrescribing","statement_name":"Numerator"},"_id":"68923eeea83e15671c2e10ed","_type":"CQM::ProportionPopulationMap"},"supplemental_data_elements":[{"_id":"68923ee8a83e15671c2e0d93","hqmf_id":"7C51A185-C670-4B48-8DCB-5590E16F75DA","library_name":"SafeUseofOpioidsConcurrentPrescribing","statement_name":"SDE Ethnicity"},{"_id":"68923ee8a83e15671c2e0d94","hqmf_id":"15DDAD65-C776-42E0-B5C9-C75276FF22A0","library_name":"SafeUseofOpioidsConcurrentPrescribing","statement_name":"SDE Race"},{"_id":"68923ee8a83e15671c2e0d95","hqmf_id":"ED42DF5E-4987-4449-ABC7-FEC87DBB2FD7","library_name":"SafeUseofOpioidsConcurrentPrescribing","statement_name":"SDE Sex"},{"_id":"68923ee8a83e15671c2e0d96","hqmf_id":"38FF6C66-E2D7-4DA6-BAFF-03F45B31D5F1","library_name":"SafeUseofOpioidsConcurrentPrescribing","statement_name":"SDE Payer"}],"title":"Population Criteria Section"}],"source_data_criteria":[{"_id":"68923ee8a83e15671c2e0db0","_type":"QDM::MedicationDischarge","authorDatetime":null,"codeListId":"2.16.840.1.113762.1.4.1125.1","dataElementCodes":[],"daysSupplied":null,"description":"Medication, Discharge: ScheduleIVBenzodiazepines","dosage":null,"frequency":null,"hqmfOid":"2.16.840.1.113883.10.20.28.4.48","id":"68923ee8a83e15671c2e0db0","negationRationale":null,"qdmCategory":"medication","qdmStatus":"discharge","qdmTitle":"Medication, Discharge","qdmVersion":"5.6","refills":null,"route":null,"supply":null},{"_id":"68923eeea83e15671c2e10ee","_type":"QDM::PatientCharacteristicSex","codeListId":"2.16.840.1.113762.1.4.1","dataElementCodes":[],"description":"Patient Characteristic Sex: ONCAdministrativeSex","hqmfOid":"2.16.840.1.113883.10.20.28.4.55","id":"68923eeea83e15671c2e10ee","qdmCategory":"patient_characteristic","qdmStatus":"gender","qdmTitle":"Patient Characteristic Sex","qdmVersion":"5.6"},{"_id":"68923ee8a83e15671c2e0db4","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113762.1.4.1111.143","dataElementCodes":[],"description":"Encounter, Performed: ObservationServices","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"68923ee8a83e15671c2e0db4","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"68923ee8a83e15671c2e0db1","_type":"QDM::MedicationDischarge","authorDatetime":null,"codeListId":"2.16.840.1.113762.1.4.1046.241","dataElementCodes":[],"daysSupplied":null,"description":"Medication, Discharge: ScheduleIIIIIandIVOpioidMedications","dosage":null,"frequency":null,"hqmfOid":"2.16.840.1.113883.10.20.28.4.48","id":"68923ee8a83e15671c2e0db1","negationRationale":null,"qdmCategory":"medication","qdmStatus":"discharge","qdmTitle":"Medication, Discharge","qdmVersion":"5.6","refills":null,"route":null,"supply":null},{"_id":"68923ee8a83e15671c2e0db6","_type":"QDM::Diagnosis","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"2.16.840.1.113762.1.4.1111.175","dataElementCodes":[],"description":"Diagnosis: SickleCellDiseasewithandwithoutCrisis","hqmfOid":"2.16.840.1.113883.10.20.28.4.110","id":"68923ee8a83e15671c2e0db6","prevalencePeriod":null,"qdmCategory":"condition","qdmTitle":"Diagnosis","qdmVersion":"5.6","qrdaOid":"2.16.840.1.113883.10.20.24.3.135","severity":null},{"_id":"68923eeea83e15671c2e10ef","_type":"QDM::PatientCharacteristicEthnicity","codeListId":"2.16.840.1.114222.4.11.837","dataElementCodes":[],"description":"Patient Characteristic Ethnicity: Ethnicity","hqmfOid":"2.16.840.1.113883.10.20.28.4.56","id":"68923eeea83e15671c2e10ef","qdmCategory":"patient_characteristic","qdmStatus":"ethnicity","qdmTitle":"Patient Characteristic Ethnicity","qdmVersion":"5.6"},{"_id":"68923eeea83e15671c2e10f0","_type":"QDM::InterventionOrder","authorDatetime":null,"codeListId":"2.16.840.1.113883.3.600.1.1579","dataElementCodes":[],"description":"Intervention, Order: PalliativeorHospiceCare","hqmfOid":"2.16.840.1.113883.10.20.28.4.35","id":"68923eeea83e15671c2e10f0","negationRationale":null,"qdmCategory":"intervention","qdmStatus":"order","qdmTitle":"Intervention, Order","qdmVersion":"5.6","reason":null},{"_id":"68923ee8a83e15671c2e0db2","_type":"QDM::InterventionPerformed","authorDatetime":null,"codeListId":"2.16.840.1.113883.3.600.1.1579","dataElementCodes":[],"description":"Intervention, Performed: PalliativeorHospiceCare","hqmfOid":"2.16.840.1.113883.10.20.28.4.36","id":"68923ee8a83e15671c2e0db2","negationRationale":null,"qdmCategory":"intervention","qdmStatus":"performed","qdmTitle":"Intervention, Performed","qdmVersion":"5.6","reason":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null,"status":null},{"_id":"68923eeea83e15671c2e10f1","_type":"QDM::MedicationActive","codeListId":"2.16.840.1.113762.1.4.1046.269","dataElementCodes":[],"description":"Medication, Active: MedicationsforOpioidUseDisorder(MOUD)","dosage":null,"frequency":null,"hqmfOid":"2.16.840.1.113883.10.20.28.4.44","id":"68923eeea83e15671c2e10f1","qdmCategory":"medication","qdmStatus":"active","qdmTitle":"Medication, Active","qdmVersion":"5.6","relevantDatetime":null,"relevantPeriod":null,"route":null},{"_id":"68923eeea83e15671c2e10f2","_type":"QDM::MedicationOrder","authorDatetime":null,"codeListId":"2.16.840.1.113762.1.4.1046.269","dataElementCodes":[],"daysSupplied":null,"description":"Medication, Order: MedicationsforOpioidUseDisorder(MOUD)","dosage":null,"frequency":null,"hqmfOid":"2.16.840.1.113883.10.20.28.4.51","id":"68923eeea83e15671c2e10f2","negationRationale":null,"qdmCategory":"medication","qdmStatus":"order","qdmTitle":"Medication, Order","qdmVersion":"5.6","reason":null,"refills":null,"relatedTo":null,"relevantPeriod":null,"route":null,"setting":null,"supply":null},{"_id":"68923ee8a83e15671c2e0db3","_type":"QDM::InterventionPerformed","authorDatetime":null,"codeListId":"2.16.840.1.113762.1.4.1111.177","dataElementCodes":[],"description":"Intervention, Performed: OpioidMedicationAssistedTreatment(MAT)","hqmfOid":"2.16.840.1.113883.10.20.28.4.36","id":"68923ee8a83e15671c2e0db3","negationRationale":null,"qdmCategory":"intervention","qdmStatus":"performed","qdmTitle":"Intervention, Performed","qdmVersion":"5.6","reason":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null,"status":null},{"_id":"68923ee8a83e15671c2e0db5","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.117.1.7.1.292","dataElementCodes":[],"description":"Encounter, Performed: EmergencyDepartmentVisit","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"68923ee8a83e15671c2e0db5","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"68923ee8a83e15671c2e0db7","_type":"QDM::Diagnosis","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"2.16.840.1.113762.1.4.1111.171","dataElementCodes":[],"description":"Diagnosis: OpioidUseDisorder","hqmfOid":"2.16.840.1.113883.10.20.28.4.110","id":"68923ee8a83e15671c2e0db7","prevalencePeriod":null,"qdmCategory":"condition","qdmTitle":"Diagnosis","qdmVersion":"5.6","qrdaOid":"2.16.840.1.113883.10.20.24.3.135","severity":null},{"_id":"68923eeea83e15671c2e10f3","_type":"QDM::PatientCharacteristicRace","codeListId":"2.16.840.1.114222.4.11.836","dataElementCodes":[],"description":"Patient Characteristic Race: Race","hqmfOid":"2.16.840.1.113883.10.20.28.4.59","id":"68923eeea83e15671c2e10f3","qdmCategory":"patient_characteristic","qdmStatus":"race","qdmTitle":"Patient Characteristic Race","qdmVersion":"5.6"},{"_id":"68923ee8a83e15671c2e0db8","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.666.5.307","dataElementCodes":[],"description":"Encounter, Performed: EncounterInpatient","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"68923ee8a83e15671c2e0db8","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"68923ee8a83e15671c2e0db9","_type":"QDM::Diagnosis","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"2.16.840.1.113762.1.4.1111.180","dataElementCodes":[],"description":"Diagnosis: CancerRelatedPain","hqmfOid":"2.16.840.1.113883.10.20.28.4.110","id":"68923ee8a83e15671c2e0db9","prevalencePeriod":null,"qdmCategory":"condition","qdmTitle":"Diagnosis","qdmVersion":"5.6","qrdaOid":"2.16.840.1.113883.10.20.24.3.135","severity":null},{"_id":"68923eeea83e15671c2e10f4","_type":"QDM::PatientCharacteristicPayer","codeListId":"2.16.840.1.114222.4.11.3591","dataElementCodes":[],"description":"Patient Characteristic Payer: PayerType","hqmfOid":"2.16.840.1.113883.10.20.28.4.58","id":"68923eeea83e15671c2e10f4","qdmCategory":"patient_characteristic","qdmStatus":"payer","qdmTitle":"Patient Characteristic Payer","qdmVersion":"5.6","relevantPeriod":null}],"title":"Safe Use of Opioids - Concurrent Prescribing","updated_at":null,"value_set_ids":["68923eeea83e15671c2e10c8","68923eeea83e15671c2e10c9","68923eeea83e15671c2e10ca","68923eeea83e15671c2e10cb","68923eeea83e15671c2e10cc","68923eeea83e15671c2e10cd","68923eeea83e15671c2e10ce","68923eeea83e15671c2e10cf","68923eeea83e15671c2e10d0","68923eeea83e15671c2e10d1","68923eeea83e15671c2e10d2","68923eeea83e15671c2e10d3","68923eeea83e15671c2e10d4","68923eeea83e15671c2e10d5","68923eeea83e15671c2e10d6","68923eeea83e15671c2e10d7","68923eeea83e15671c2e10d8","68923eeea83e15671c2e10d9","68923eeea83e15671c2e10da","68923eeea83e15671c2e10db","68923eeea83e15671c2e10dc"]}