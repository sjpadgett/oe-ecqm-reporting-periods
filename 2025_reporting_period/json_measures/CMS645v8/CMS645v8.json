{"_id":"68923f6fa83e15671c2e3903","calculate_sdes":null,"calculation_method":"PATIENT","cms_id":"CMS645v8","component":false,"component_hqmf_set_ids":[],"composite":false,"composite_hqmf_set_id":null,"cql_libraries":[{"_id":"68923f6aa83e15671c2e380d","cql":"library BoneDensityProstateCancerAndrogenDeprivationTherapy version '8.2.000'\r\n\r\nusing QDM version '5.6'\r\n\r\ninclude MATGlobalCommonFunctionsQDM version '8.0.000' called Global\r\n\r\ncodesystem \"SNOMEDCT\": 'urn:oid:2.16.840.1.113883.6.96'\r\n\r\nvalueset \"Androgen deprivation therapy for Urology Care\": 'urn:oid:2.16.840.1.113762.1.4.1151.48'\r\nvalueset \"DEXA Dual Energy Xray Absorptiometry, Bone Density for Urology Care\": 'urn:oid:2.16.840.1.113762.1.4.1151.38'\r\nvalueset \"Ethnicity\": 'urn:oid:2.16.840.1.114222.4.11.837'\r\nvalueset \"Office Visit\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1001'\r\nvalueset \"ONC Administrative Sex\": 'urn:oid:2.16.840.1.113762.1.4.1'\r\nvalueset \"Patient Declined\": 'urn:oid:2.16.840.1.113883.3.526.3.1582'\r\nvalueset \"Payer Type\": 'urn:oid:2.16.840.1.114222.4.11.3591'\r\nvalueset \"Prostate Cancer\": 'urn:oid:2.16.840.1.113883.3.526.3.319'\r\nvalueset \"Race\": 'urn:oid:2.16.840.1.114222.4.11.836'\r\n\r\ncode \"Injection of leuprolide acetate for twelve month period (regime/therapy)\": '456381000124102' from \"SNOMEDCT\" display 'Injection of leuprolide acetate for twelve month period (regime/therapy)'\r\n\r\nparameter \"Measurement Period\" Interval\u003cDateTime\u003e\r\n\r\ncontext Patient\r\n\r\ndefine \"Denominator\":\r\n  \"Initial Population\"\r\n\r\ndefine \"Denominator Exception\":\r\n  exists ( \"No Bone Density Scan Ordered Due to Patient Refusal\" )\r\n    or exists ( \"No Bone Density Scan Performed Due to Patient Refusal\" )\r\n\r\ndefine \"Numerator\":\r\n  \"Has Baseline DEXA Scan Two Years Prior to the Start of or Less than Three Months After the Start of ADT\"\r\n\r\ndefine \"SDE Ethnicity\":\r\n  [\"Patient Characteristic Ethnicity\": \"Ethnicity\"]\r\n\r\ndefine \"SDE Payer\":\r\n  [\"Patient Characteristic Payer\": \"Payer Type\"]\r\n\r\ndefine \"SDE Race\":\r\n  [\"Patient Characteristic Race\": \"Race\"]\r\n\r\ndefine \"SDE Sex\":\r\n  [\"Patient Characteristic Sex\": \"ONC Administrative Sex\"]\r\n\r\ndefine \"Has Baseline DEXA Scan Two Years Prior to the Start of or Less than Three Months After the Start of ADT\":\r\n  exists ( ( [\"Diagnostic Study, Order\": \"DEXA Dual Energy Xray Absorptiometry, Bone Density for Urology Care\"] DEXAOrdered\r\n        with \"Order for 12 Months of ADT in 3 Months Before to 9 Months After Start of Measurement Period\" OrderTwelveMonthsADT\r\n          such that DEXAOrdered.authorDatetime 3 months or less on or after day of OrderTwelveMonthsADT.authorDatetime\r\n            or DEXAOrdered.authorDatetime 2 years or less before day of OrderTwelveMonthsADT.authorDatetime\r\n    )\r\n      union ( [\"Diagnostic Study, Performed\": \"DEXA Dual Energy Xray Absorptiometry, Bone Density for Urology Care\"] DEXAPerformed\r\n          with \"Order for 12 Months of ADT in 3 Months Before to 9 Months After Start of Measurement Period\" OrderTwelveMonthsADT\r\n            such that Global.\"NormalizeInterval\" ( DEXAPerformed.relevantDatetime, DEXAPerformed.relevantPeriod ) 3 months or less on or after day of OrderTwelveMonthsADT.authorDatetime\r\n              or Global.\"NormalizeInterval\" ( DEXAPerformed.relevantDatetime, DEXAPerformed.relevantPeriod ) 2 years or less before day of OrderTwelveMonthsADT.authorDatetime\r\n      )\r\n  )\r\n\r\ndefine \"No Bone Density Scan Ordered Due to Patient Refusal\":\r\n  [\"Diagnostic Study, Not Ordered\": \"DEXA Dual Energy Xray Absorptiometry, Bone Density for Urology Care\"] DEXANotOrdered\r\n    with \"Order for 12 Months of ADT in 3 Months Before to 9 Months After Start of Measurement Period\" OrderTwelveMonthsADT\r\n      such that DEXANotOrdered.authorDatetime 3 months or less on or after day of OrderTwelveMonthsADT.authorDatetime\r\n        and DEXANotOrdered.negationRationale in \"Patient Declined\"\r\n\r\ndefine \"No Bone Density Scan Performed Due to Patient Refusal\":\r\n  [\"Diagnostic Study, Not Performed\": \"DEXA Dual Energy Xray Absorptiometry, Bone Density for Urology Care\"] DEXANotPerformed\r\n    with \"Order for 12 Months of ADT in 3 Months Before to 9 Months After Start of Measurement Period\" OrderTwelveMonthsADT\r\n      such that DEXANotPerformed.authorDatetime 3 months or less on or after day of OrderTwelveMonthsADT.authorDatetime\r\n        and DEXANotPerformed.negationRationale in \"Patient Declined\"\r\n\r\ndefine \"First ADT in 3 Months Before to 9 Months After Start of Measurement Period\":\r\n  First((\"Androgen Deprivation Therapy for Urology Care Medication Active Start Dates\"\r\n      union \"Androgen Deprivation Therapy for Urology Care Medication Order Start Dates\") ADTDate\r\n      with \"Prostate Cancer Diagnosis\" ProstateCancer\r\n        such that ADTDate during ProstateCancer.prevalencePeriod\r\n          and ADTDate during Interval[start of \"Measurement Period\" - 3 months, start of \"Measurement Period\" + 9 months]\r\n      sort ascending\r\n  )\r\n\r\ndefine \"Order for 12 Months of ADT in 3 Months Before to 9 Months After Start of Measurement Period\":\r\n  [\"Procedure, Order\": \"Injection of leuprolide acetate for twelve month period (regime/therapy)\"] OrderTwelveMonthADT\r\n    with \"First ADT in 3 Months Before to 9 Months After Start of Measurement Period\" FirstADTMP\r\n      such that OrderTwelveMonthADT.authorDatetime on or after FirstADTMP\r\n        and OrderTwelveMonthADT.authorDatetime during Interval[start of \"Measurement Period\" - 3 months, start of \"Measurement Period\" + 9 months]\r\n\r\ndefine \"Androgen Deprivation Therapy for Urology Care Medication Active Start Dates\":\r\n  [\"Medication, Active\": \"Androgen deprivation therapy for Urology Care\"] ADTActive\r\n    return Global.EarliestOf ( ADTActive.relevantDatetime, ADTActive.relevantPeriod )\r\n\r\ndefine \"Androgen Deprivation Therapy for Urology Care Medication Order Start Dates\":\r\n  [\"Medication, Order\": \"Androgen deprivation therapy for Urology Care\"] ADTOrder\r\n    return Global.EarliestOf ( ADTOrder.authorDatetime, ADTOrder.relevantPeriod )\r\n\r\ndefine \"Initial Population\":\r\n  \"Has Qualifying Encounter\"\r\n    and exists \"Order for 12 Months of ADT in 3 Months Before to 9 Months After Start of Measurement Period\"\r\n\r\ndefine \"Has Qualifying Encounter\":\r\n  exists [\"Encounter, Performed\": \"Office Visit\"] Encounter\r\n    where Encounter.relevantPeriod during day of \"Measurement Period\"\r\n\r\ndefine \"Prostate Cancer Diagnosis\":\r\n  [\"Diagnosis\": \"Prostate Cancer\"] ProstateCancer\r\n    where ProstateCancer.prevalencePeriod overlaps day of \"Measurement Period\"","elm":{"library":{"annotation":[{"translatorOptions":"EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion,DisableMethodInvocation","type":"CqlToElmInfo"},{"type":"Annotation","s":{"r":"63","s":[{"value":["","library BoneDensityProstateCancerAndrogenDeprivationTherapy version '8.2.000'"]}]}}],"identifier":{"id":"BoneDensityProstateCancerAndrogenDeprivationTherapy","version":"8.2.000"},"schemaIdentifier":{"id":"urn:hl7-org:elm","version":"r1"},"usings":{"def":[{"localIdentifier":"System","uri":"urn:hl7-org:elm-types:r1"},{"localId":"1","locator":"3:1-3:23","localIdentifier":"QDM","uri":"urn:healthit-gov:qdm:v5_6","version":"5.6","annotation":[{"type":"Annotation","s":{"r":"1","s":[{"value":["","using "]},{"s":[{"value":["QDM"]}]},{"value":[" version ","'5.6'"]}]}}]}]},"includes":{"def":[{"localId":"2","locator":"5:1-5:67","localIdentifier":"Global","path":"MATGlobalCommonFunctionsQDM","version":"8.0.000","annotation":[{"type":"Annotation","s":{"r":"2","s":[{"value":["","include "]},{"s":[{"value":["MATGlobalCommonFunctionsQDM"]}]},{"value":[" version ","'8.0.000'"," called ","Global"]}]}}]}]},"parameters":{"def":[{"localId":"17","locator":"21:1-21:49","name":"Measurement Period","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"17","s":[{"value":["","parameter ","\"Measurement Period\""," "]},{"r":"16","s":[{"value":["Interval\u003c"]},{"r":"15","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}}],"parameterTypeSpecifier":{"localId":"16","locator":"21:32-21:49","type":"IntervalTypeSpecifier","pointType":{"localId":"15","locator":"21:41-21:48","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},"codeSystems":{"def":[{"localId":"3","locator":"7:1-7:55","name":"SNOMEDCT","id":"2.16.840.1.113883.6.96","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"3","s":[{"value":["","codesystem ","\"SNOMEDCT\"",": ","'urn:oid:2.16.840.1.113883.6.96'"]}]}}]}]},"valueSets":{"def":[{"localId":"4","locator":"9:1-9:97","name":"Androgen deprivation therapy for Urology Care","id":"2.16.840.1.113762.1.4.1151.48","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"4","s":[{"value":["","valueset ","\"Androgen deprivation therapy for Urology Care\"",": ","'urn:oid:2.16.840.1.113762.1.4.1151.48'"]}]}}]},{"localId":"5","locator":"10:1-10:119","name":"DEXA Dual Energy Xray Absorptiometry, Bone Density for Urology Care","id":"2.16.840.1.113762.1.4.1151.38","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"5","s":[{"value":["","valueset ","\"DEXA Dual Energy Xray Absorptiometry, Bone Density for Urology Care\"",": ","'urn:oid:2.16.840.1.113762.1.4.1151.38'"]}]}}]},{"localId":"6","locator":"11:1-11:58","name":"Ethnicity","id":"2.16.840.1.114222.4.11.837","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"6","s":[{"value":["","valueset ","\"Ethnicity\"",": ","'urn:oid:2.16.840.1.114222.4.11.837'"]}]}}]},{"localId":"7","locator":"12:1-12:75","name":"Office Visit","id":"2.16.840.1.113883.3.464.1003.101.12.1001","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"7","s":[{"value":["","valueset ","\"Office Visit\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1001'"]}]}}]},{"localId":"8","locator":"13:1-13:68","name":"ONC Administrative Sex","id":"2.16.840.1.113762.1.4.1","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"8","s":[{"value":["","valueset ","\"ONC Administrative Sex\"",": ","'urn:oid:2.16.840.1.113762.1.4.1'"]}]}}]},{"localId":"9","locator":"14:1-14:69","name":"Patient Declined","id":"2.16.840.1.113883.3.526.3.1582","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"9","s":[{"value":["","valueset ","\"Patient Declined\"",": ","'urn:oid:2.16.840.1.113883.3.526.3.1582'"]}]}}]},{"localId":"10","locator":"15:1-15:60","name":"Payer Type","id":"2.16.840.1.114222.4.11.3591","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"10","s":[{"value":["","valueset ","\"Payer Type\"",": ","'urn:oid:2.16.840.1.114222.4.11.3591'"]}]}}]},{"localId":"11","locator":"16:1-16:67","name":"Prostate Cancer","id":"2.16.840.1.113883.3.526.3.319","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"11","s":[{"value":["","valueset ","\"Prostate Cancer\"",": ","'urn:oid:2.16.840.1.113883.3.526.3.319'"]}]}}]},{"localId":"12","locator":"17:1-17:53","name":"Race","id":"2.16.840.1.114222.4.11.836","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"12","s":[{"value":["","valueset ","\"Race\"",": ","'urn:oid:2.16.840.1.114222.4.11.836'"]}]}}]}]},"codes":{"def":[{"localId":"14","locator":"19:1-19:197","name":"Injection of leuprolide acetate for twelve month period (regime/therapy)","id":"456381000124102","display":"Injection of leuprolide acetate for twelve month period (regime/therapy)","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"14","s":[{"value":["","code ","\"Injection of leuprolide acetate for twelve month period (regime/therapy)\"",": ","'456381000124102'"," from "]},{"r":"13","s":[{"value":["\"SNOMEDCT\""]}]},{"value":[" display ","'Injection of leuprolide acetate for twelve month period (regime/therapy)'"]}]}}],"codeSystem":{"localId":"13","locator":"19:105-19:114","name":"SNOMEDCT"}}]},"contexts":{"def":[{"locator":"23:1-23:15","name":"Patient"}]},"statements":{"def":[{"locator":"23:1-23:15","name":"Patient","context":"Patient","expression":{"type":"SingletonFrom","operand":{"locator":"23:1-23:15","dataType":"{urn:healthit-gov:qdm:v5_6}Patient","templateId":"Patient","type":"Retrieve"}}},{"localId":"26","locator":"99:1-101:69","name":"Has Qualifying Encounter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"26","s":[{"value":["","define ","\"Has Qualifying Encounter\"",":\n  "]},{"r":"25","s":[{"value":["exists "]},{"r":"24","s":[{"s":[{"r":"19","s":[{"r":"18","s":[{"r":"18","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Office Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","Encounter"]}]}]},{"value":["\n    "]},{"r":"23","s":[{"value":["where "]},{"r":"23","s":[{"r":"21","s":[{"r":"20","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"21","s":[{"value":["relevantPeriod"]}]}]},{"r":"23","value":[" ","during day of"," "]},{"r":"22","s":[{"value":["\"Measurement Period\""]}]}]}]}]}]}]}}],"expression":{"localId":"25","locator":"100:3-101:69","type":"Exists","operand":{"localId":"24","locator":"100:10-101:69","type":"Query","source":[{"localId":"19","locator":"100:10-100:59","alias":"Encounter","expression":{"localId":"18","locator":"100:10-100:49","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"100:35-100:48","name":"Office Visit","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"23","locator":"101:5-101:69","precision":"Day","type":"IncludedIn","operand":[{"localId":"21","locator":"101:11-101:34","path":"relevantPeriod","scope":"Encounter","type":"Property"},{"localId":"22","locator":"101:50-101:69","name":"Measurement Period","type":"ParameterRef"}]}}}},{"localId":"40","locator":"87:1-89:85","name":"Androgen Deprivation Therapy for Urology Care Medication Active Start Dates","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"40","s":[{"value":["","define ","\"Androgen Deprivation Therapy for Urology Care Medication Active Start Dates\"",":\n  "]},{"r":"39","s":[{"s":[{"r":"31","s":[{"r":"30","s":[{"r":"30","s":[{"value":["[","\"Medication, Active\"",": "]},{"s":[{"value":["\"Androgen deprivation therapy for Urology Care\""]}]},{"value":["]"]}]}]},{"value":[" ","ADTActive"]}]}]},{"value":["\n    "]},{"r":"38","s":[{"value":["return "]},{"r":"37","s":[{"r":"32","s":[{"value":["Global"]}]},{"value":["."]},{"r":"37","s":[{"value":["EarliestOf"," ( "]},{"r":"34","s":[{"r":"33","s":[{"value":["ADTActive"]}]},{"value":["."]},{"r":"34","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"36","s":[{"r":"35","s":[{"value":["ADTActive"]}]},{"value":["."]},{"r":"36","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]}]}]}]}}],"expression":{"localId":"39","locator":"88:3-89:85","type":"Query","source":[{"localId":"31","locator":"88:3-88:83","alias":"ADTActive","expression":{"localId":"30","locator":"88:3-88:73","dataType":"{urn:healthit-gov:qdm:v5_6}MedicationActive","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"88:26-88:72","name":"Androgen deprivation therapy for Urology Care","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"return":{"localId":"38","locator":"89:5-89:85","expression":{"localId":"37","locator":"89:12-89:85","name":"EarliestOf","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"34","locator":"89:32-89:57","path":"relevantDatetime","scope":"ADTActive","type":"Property"},{"localId":"36","locator":"89:60-89:83","path":"relevantPeriod","scope":"ADTActive","type":"Property"}]}}}},{"localId":"52","locator":"91:1-93:81","name":"Androgen Deprivation Therapy for Urology Care Medication Order Start Dates","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"52","s":[{"value":["","define ","\"Androgen Deprivation Therapy for Urology Care Medication Order Start Dates\"",":\n  "]},{"r":"51","s":[{"s":[{"r":"43","s":[{"r":"42","s":[{"r":"42","s":[{"value":["[","\"Medication, Order\"",": "]},{"s":[{"value":["\"Androgen deprivation therapy for Urology Care\""]}]},{"value":["]"]}]}]},{"value":[" ","ADTOrder"]}]}]},{"value":["\n    "]},{"r":"50","s":[{"value":["return "]},{"r":"49","s":[{"r":"44","s":[{"value":["Global"]}]},{"value":["."]},{"r":"49","s":[{"value":["EarliestOf"," ( "]},{"r":"46","s":[{"r":"45","s":[{"value":["ADTOrder"]}]},{"value":["."]},{"r":"46","s":[{"value":["authorDatetime"]}]}]},{"value":[", "]},{"r":"48","s":[{"r":"47","s":[{"value":["ADTOrder"]}]},{"value":["."]},{"r":"48","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]}]}]}]}}],"expression":{"localId":"51","locator":"92:3-93:81","type":"Query","source":[{"localId":"43","locator":"92:3-92:81","alias":"ADTOrder","expression":{"localId":"42","locator":"92:3-92:72","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationOrder","templateId":"PositiveMedicationOrder","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"92:25-92:71","name":"Androgen deprivation therapy for Urology Care","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"return":{"localId":"50","locator":"93:5-93:81","expression":{"localId":"49","locator":"93:12-93:81","name":"EarliestOf","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"46","locator":"93:32-93:54","path":"authorDatetime","scope":"ADTOrder","type":"Property"},{"localId":"48","locator":"93:57-93:79","path":"relevantPeriod","scope":"ADTOrder","type":"Property"}]}}}},{"localId":"63","locator":"103:1-105:78","name":"Prostate Cancer Diagnosis","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"63","s":[{"value":["","define ","\"Prostate Cancer Diagnosis\"",":\n  "]},{"r":"62","s":[{"s":[{"r":"57","s":[{"r":"56","s":[{"r":"56","s":[{"value":["[","\"Diagnosis\"",": "]},{"s":[{"value":["\"Prostate Cancer\""]}]},{"value":["]"]}]}]},{"value":[" ","ProstateCancer"]}]}]},{"value":["\n    "]},{"r":"61","s":[{"value":["where "]},{"r":"61","s":[{"r":"59","s":[{"r":"58","s":[{"value":["ProstateCancer"]}]},{"value":["."]},{"r":"59","s":[{"value":["prevalencePeriod"]}]}]},{"r":"61","value":[" ","overlaps day of"," "]},{"r":"60","s":[{"value":["\"Measurement Period\""]}]}]}]}]}]}}],"expression":{"localId":"62","locator":"104:3-105:78","type":"Query","source":[{"localId":"57","locator":"104:3-104:49","alias":"ProstateCancer","expression":{"localId":"56","locator":"104:3-104:34","dataType":"{urn:healthit-gov:qdm:v5_6}Diagnosis","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"104:17-104:33","name":"Prostate Cancer","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"61","locator":"105:5-105:78","precision":"Day","type":"Overlaps","operand":[{"localId":"59","locator":"105:11-105:41","path":"prevalencePeriod","scope":"ProstateCancer","type":"Property"},{"localId":"60","locator":"105:59-105:78","name":"Measurement Period","type":"ParameterRef"}]}}},{"localId":"86","locator":"72:1-79:3","name":"First ADT in 3 Months Before to 9 Months After Start of Measurement Period","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"86","s":[{"value":["","define ","\"First ADT in 3 Months Before to 9 Months After Start of Measurement Period\"",":\n  "]},{"r":"85","s":[{"value":["First","("]},{"r":"84","s":[{"s":[{"r":"55","s":[{"r":"54","s":[{"value":["("]},{"r":"54","s":[{"r":"41","s":[{"value":["\"Androgen Deprivation Therapy for Urology Care Medication Active Start Dates\""]}]},{"value":["\n      union "]},{"r":"53","s":[{"value":["\"Androgen Deprivation Therapy for Urology Care Medication Order Start Dates\""]}]}]},{"value":[")"]}]},{"value":[" ","ADTDate"]}]}]},{"value":["\n      "]},{"r":"82","s":[{"value":["with "]},{"r":"65","s":[{"r":"64","s":[{"s":[{"value":["\"Prostate Cancer Diagnosis\""]}]}]},{"value":[" ","ProstateCancer"]}]},{"value":["\n        such that "]},{"r":"81","s":[{"r":"69","s":[{"r":"66","s":[{"value":["ADTDate"]}]},{"r":"69","value":[" ","during"," "]},{"r":"68","s":[{"r":"67","s":[{"value":["ProstateCancer"]}]},{"value":["."]},{"r":"68","s":[{"value":["prevalencePeriod"]}]}]}]},{"value":["\n          and "]},{"r":"80","s":[{"r":"70","s":[{"value":["ADTDate"]}]},{"r":"80","value":[" ","during"," "]},{"r":"79","s":[{"value":["Interval["]},{"r":"74","s":[{"r":"72","s":[{"value":["start of "]},{"r":"71","s":[{"value":["\"Measurement Period\""]}]}]},{"value":[" - "]},{"r":"73","s":[{"value":["3 ","months"]}]}]},{"value":[", "]},{"r":"78","s":[{"r":"76","s":[{"value":["start of "]},{"r":"75","s":[{"value":["\"Measurement Period\""]}]}]},{"value":[" + "]},{"r":"77","s":[{"value":["9 ","months"]}]}]},{"value":["]"]}]}]}]}]},{"r":"83","value":["\n      ","sort ascending"]}]},{"value":["\n  )"]}]}]}}],"expression":{"localId":"85","locator":"73:3-79:3","type":"First","source":{"localId":"84","locator":"73:9-78:20","type":"Query","source":[{"localId":"55","locator":"73:9-74:97","alias":"ADTDate","expression":{"localId":"54","locator":"73:9-74:89","type":"Union","operand":[{"localId":"41","locator":"73:10-73:86","name":"Androgen Deprivation Therapy for Urology Care Medication Active Start Dates","type":"ExpressionRef"},{"localId":"53","locator":"74:13-74:88","name":"Androgen Deprivation Therapy for Urology Care Medication Order Start Dates","type":"ExpressionRef"}]}}],"relationship":[{"localId":"82","locator":"75:7-77:121","alias":"ProstateCancer","type":"With","expression":{"localId":"64","locator":"75:12-75:38","name":"Prostate Cancer Diagnosis","type":"ExpressionRef"},"suchThat":{"localId":"81","locator":"76:19-77:121","type":"And","operand":[{"localId":"69","locator":"76:19-76:64","type":"In","operand":[{"localId":"66","locator":"76:19-76:25","name":"ADTDate","type":"AliasRef"},{"localId":"68","locator":"76:34-76:64","path":"prevalencePeriod","scope":"ProstateCancer","type":"Property"}]},{"localId":"80","locator":"77:15-77:121","type":"In","operand":[{"localId":"70","locator":"77:15-77:21","name":"ADTDate","type":"AliasRef"},{"localId":"79","locator":"77:30-77:121","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"74","locator":"77:39-77:78","type":"Subtract","operand":[{"localId":"72","locator":"77:39-77:67","type":"Start","operand":{"localId":"71","locator":"77:48-77:67","name":"Measurement Period","type":"ParameterRef"}},{"localId":"73","locator":"77:71-77:78","value":3,"unit":"months","type":"Quantity"}]},"high":{"localId":"78","locator":"77:81-77:120","type":"Add","operand":[{"localId":"76","locator":"77:81-77:109","type":"Start","operand":{"localId":"75","locator":"77:90-77:109","name":"Measurement Period","type":"ParameterRef"}},{"localId":"77","locator":"77:113-77:120","value":9,"unit":"months","type":"Quantity"}]}}]}]}}],"sort":{"localId":"83","locator":"78:7-78:20","by":[{"direction":"ascending","type":"ByDirection"}]}}}},{"localId":"108","locator":"81:1-85:146","name":"Order for 12 Months of ADT in 3 Months Before to 9 Months After Start of Measurement Period","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"108","s":[{"value":["","define ","\"Order for 12 Months of ADT in 3 Months Before to 9 Months After Start of Measurement Period\"",":\n  "]},{"r":"107","s":[{"s":[{"r":"29","s":[{"r":"28","s":[{"r":"28","s":[{"value":["[","\"Procedure, Order\"",": "]},{"s":[{"value":["\"Injection of leuprolide acetate for twelve month period (regime/therapy)\""]}]},{"value":["]"]}]}]},{"value":[" ","OrderTwelveMonthADT"]}]}]},{"value":["\n    "]},{"r":"106","s":[{"value":["with "]},{"r":"88","s":[{"r":"87","s":[{"s":[{"value":["\"First ADT in 3 Months Before to 9 Months After Start of Measurement Period\""]}]}]},{"value":[" ","FirstADTMP"]}]},{"value":["\n      such that "]},{"r":"105","s":[{"r":"92","s":[{"r":"90","s":[{"r":"89","s":[{"value":["OrderTwelveMonthADT"]}]},{"value":["."]},{"r":"90","s":[{"value":["authorDatetime"]}]}]},{"r":"92","value":[" ","on or after"," "]},{"r":"91","s":[{"value":["FirstADTMP"]}]}]},{"value":["\n        and "]},{"r":"104","s":[{"r":"94","s":[{"r":"93","s":[{"value":["OrderTwelveMonthADT"]}]},{"value":["."]},{"r":"94","s":[{"value":["authorDatetime"]}]}]},{"r":"104","value":[" ","during"," "]},{"r":"103","s":[{"value":["Interval["]},{"r":"98","s":[{"r":"96","s":[{"value":["start of "]},{"r":"95","s":[{"value":["\"Measurement Period\""]}]}]},{"value":[" - "]},{"r":"97","s":[{"value":["3 ","months"]}]}]},{"value":[", "]},{"r":"102","s":[{"r":"100","s":[{"value":["start of "]},{"r":"99","s":[{"value":["\"Measurement Period\""]}]}]},{"value":[" + "]},{"r":"101","s":[{"value":["9 ","months"]}]}]},{"value":["]"]}]}]}]}]}]}]}}],"expression":{"localId":"107","locator":"82:3-85:146","type":"Query","source":[{"localId":"29","locator":"82:3-82:118","alias":"OrderTwelveMonthADT","expression":{"localId":"28","locator":"82:3-82:98","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveProcedureOrder","templateId":"PositiveProcedureOrder","codeProperty":"code","codeComparator":"~","type":"Retrieve","codes":{"type":"ToList","operand":{"locator":"82:24-82:97","name":"Injection of leuprolide acetate for twelve month period (regime/therapy)","type":"CodeRef"}}}}],"relationship":[{"localId":"106","locator":"83:5-85:146","alias":"FirstADTMP","type":"With","expression":{"localId":"87","locator":"83:10-83:85","name":"First ADT in 3 Months Before to 9 Months After Start of Measurement Period","type":"ExpressionRef"},"suchThat":{"localId":"105","locator":"84:17-85:146","type":"And","operand":[{"localId":"92","locator":"84:17-84:73","type":"SameOrAfter","operand":[{"localId":"90","locator":"84:17-84:50","path":"authorDatetime","scope":"OrderTwelveMonthADT","type":"Property"},{"localId":"91","locator":"84:64-84:73","name":"FirstADTMP","type":"AliasRef"}]},{"localId":"104","locator":"85:13-85:146","type":"In","operand":[{"localId":"94","locator":"85:13-85:46","path":"authorDatetime","scope":"OrderTwelveMonthADT","type":"Property"},{"localId":"103","locator":"85:55-85:146","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"98","locator":"85:64-85:103","type":"Subtract","operand":[{"localId":"96","locator":"85:64-85:92","type":"Start","operand":{"localId":"95","locator":"85:73-85:92","name":"Measurement Period","type":"ParameterRef"}},{"localId":"97","locator":"85:96-85:103","value":3,"unit":"months","type":"Quantity"}]},"high":{"localId":"102","locator":"85:106-85:145","type":"Add","operand":[{"localId":"100","locator":"85:106-85:134","type":"Start","operand":{"localId":"99","locator":"85:115-85:134","name":"Measurement Period","type":"ParameterRef"}},{"localId":"101","locator":"85:138-85:145","value":9,"unit":"months","type":"Quantity"}]}}]}]}}]}},{"localId":"112","locator":"95:1-97:108","name":"Initial Population","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"112","s":[{"value":["","define ","\"Initial Population\"",":\n  "]},{"r":"111","s":[{"r":"27","s":[{"value":["\"Has Qualifying Encounter\""]}]},{"value":["\n    and "]},{"r":"110","s":[{"value":["exists "]},{"r":"109","s":[{"value":["\"Order for 12 Months of ADT in 3 Months Before to 9 Months After Start of Measurement Period\""]}]}]}]}]}}],"expression":{"localId":"111","locator":"96:3-97:108","type":"And","operand":[{"localId":"27","locator":"96:3-96:28","name":"Has Qualifying Encounter","type":"ExpressionRef"},{"localId":"110","locator":"97:9-97:108","type":"Exists","operand":{"localId":"109","locator":"97:16-97:108","name":"Order for 12 Months of ADT in 3 Months Before to 9 Months After Start of Measurement Period","type":"ExpressionRef"}}]}},{"localId":"114","locator":"25:1-26:22","name":"Denominator","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"114","s":[{"value":["","define ","\"Denominator\"",":\n  "]},{"r":"113","s":[{"value":["\"Initial Population\""]}]}]}}],"expression":{"localId":"113","locator":"26:3-26:22","name":"Initial Population","type":"ExpressionRef"}},{"localId":"132","locator":"60:1-64:66","name":"No Bone Density Scan Ordered Due to Patient Refusal","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"132","s":[{"value":["","define ","\"No Bone Density Scan Ordered Due to Patient Refusal\"",":\n  "]},{"r":"131","s":[{"s":[{"r":"116","s":[{"r":"115","s":[{"r":"115","s":[{"value":["[","\"Diagnostic Study, Not Ordered\"",": "]},{"s":[{"value":["\"DEXA Dual Energy Xray Absorptiometry, Bone Density for Urology Care\""]}]},{"value":["]"]}]}]},{"value":[" ","DEXANotOrdered"]}]}]},{"value":["\n    "]},{"r":"130","s":[{"value":["with "]},{"r":"118","s":[{"r":"117","s":[{"s":[{"value":["\"Order for 12 Months of ADT in 3 Months Before to 9 Months After Start of Measurement Period\""]}]}]},{"value":[" ","OrderTwelveMonthsADT"]}]},{"value":["\n      such that "]},{"r":"129","s":[{"r":"124","s":[{"r":"120","s":[{"r":"119","s":[{"value":["DEXANotOrdered"]}]},{"value":["."]},{"r":"120","s":[{"value":["authorDatetime"]}]}]},{"value":[" "]},{"r":"124","s":[{"r":"123","s":[{"value":["3 ","months"]}]},{"value":[" or less on or after day of"]}]},{"value":[" "]},{"r":"122","s":[{"r":"121","s":[{"value":["OrderTwelveMonthsADT"]}]},{"value":["."]},{"r":"122","s":[{"value":["authorDatetime"]}]}]}]},{"value":["\n        and "]},{"r":"128","s":[{"r":"126","s":[{"r":"125","s":[{"value":["DEXANotOrdered"]}]},{"value":["."]},{"r":"126","s":[{"value":["negationRationale"]}]}]},{"value":[" in "]},{"r":"127","s":[{"value":["\"Patient Declined\""]}]}]}]}]}]}]}}],"expression":{"localId":"131","locator":"61:3-64:66","type":"Query","source":[{"localId":"116","locator":"61:3-61:121","alias":"DEXANotOrdered","expression":{"localId":"115","locator":"61:3-61:106","dataType":"{urn:healthit-gov:qdm:v5_6}NegativeDiagnosticStudyOrder","templateId":"NegativeDiagnosticStudyOrder","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"61:37-61:105","name":"DEXA Dual Energy Xray Absorptiometry, Bone Density for Urology Care","preserve":true,"type":"ValueSetRef"}}}],"relationship":[{"localId":"130","locator":"62:5-64:66","alias":"OrderTwelveMonthsADT","type":"With","expression":{"localId":"117","locator":"62:10-62:102","name":"Order for 12 Months of ADT in 3 Months Before to 9 Months After Start of Measurement Period","type":"ExpressionRef"},"suchThat":{"localId":"129","locator":"63:17-64:66","type":"And","operand":[{"localId":"124","locator":"63:17-63:117","type":"And","operand":[{"locator":"63:47-63:62","precision":"Day","type":"In","operand":[{"localId":"120","locator":"63:17-63:45","path":"authorDatetime","scope":"DEXANotOrdered","type":"Property"},{"locator":"63:47-63:62","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"122","locator":"63:83-63:117","path":"authorDatetime","scope":"OrderTwelveMonthsADT","type":"Property"},"high":{"locator":"63:104-63:117","type":"Add","operand":[{"localId":"122","locator":"63:83-63:117","path":"authorDatetime","scope":"OrderTwelveMonthsADT","type":"Property"},{"localId":"123","locator":"63:47-63:54","value":3,"unit":"months","type":"Quantity"}]}}]},{"locator":"63:47-63:62","type":"Not","operand":{"locator":"63:47-63:62","type":"IsNull","operand":{"localId":"122","locator":"63:83-63:117","path":"authorDatetime","scope":"OrderTwelveMonthsADT","type":"Property"}}}]},{"localId":"128","locator":"64:13-64:66","type":"InValueSet","code":{"localId":"126","locator":"64:13-64:44","path":"negationRationale","scope":"DEXANotOrdered","type":"Property"},"valueset":{"localId":"127","locator":"64:49-64:66","name":"Patient Declined","preserve":true}}]}}]}},{"localId":"152","locator":"66:1-70:68","name":"No Bone Density Scan Performed Due to Patient Refusal","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"152","s":[{"value":["","define ","\"No Bone Density Scan Performed Due to Patient Refusal\"",":\n  "]},{"r":"151","s":[{"s":[{"r":"136","s":[{"r":"135","s":[{"r":"135","s":[{"value":["[","\"Diagnostic Study, Not Performed\"",": "]},{"s":[{"value":["\"DEXA Dual Energy Xray Absorptiometry, Bone Density for Urology Care\""]}]},{"value":["]"]}]}]},{"value":[" ","DEXANotPerformed"]}]}]},{"value":["\n    "]},{"r":"150","s":[{"value":["with "]},{"r":"138","s":[{"r":"137","s":[{"s":[{"value":["\"Order for 12 Months of ADT in 3 Months Before to 9 Months After Start of Measurement Period\""]}]}]},{"value":[" ","OrderTwelveMonthsADT"]}]},{"value":["\n      such that "]},{"r":"149","s":[{"r":"144","s":[{"r":"140","s":[{"r":"139","s":[{"value":["DEXANotPerformed"]}]},{"value":["."]},{"r":"140","s":[{"value":["authorDatetime"]}]}]},{"value":[" "]},{"r":"144","s":[{"r":"143","s":[{"value":["3 ","months"]}]},{"value":[" or less on or after day of"]}]},{"value":[" "]},{"r":"142","s":[{"r":"141","s":[{"value":["OrderTwelveMonthsADT"]}]},{"value":["."]},{"r":"142","s":[{"value":["authorDatetime"]}]}]}]},{"value":["\n        and "]},{"r":"148","s":[{"r":"146","s":[{"r":"145","s":[{"value":["DEXANotPerformed"]}]},{"value":["."]},{"r":"146","s":[{"value":["negationRationale"]}]}]},{"value":[" in "]},{"r":"147","s":[{"value":["\"Patient Declined\""]}]}]}]}]}]}]}}],"expression":{"localId":"151","locator":"67:3-70:68","type":"Query","source":[{"localId":"136","locator":"67:3-67:125","alias":"DEXANotPerformed","expression":{"localId":"135","locator":"67:3-67:108","dataType":"{urn:healthit-gov:qdm:v5_6}NegativeDiagnosticStudyPerformed","templateId":"NegativeDiagnosticStudyPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"67:39-67:107","name":"DEXA Dual Energy Xray Absorptiometry, Bone Density for Urology Care","preserve":true,"type":"ValueSetRef"}}}],"relationship":[{"localId":"150","locator":"68:5-70:68","alias":"OrderTwelveMonthsADT","type":"With","expression":{"localId":"137","locator":"68:10-68:102","name":"Order for 12 Months of ADT in 3 Months Before to 9 Months After Start of Measurement Period","type":"ExpressionRef"},"suchThat":{"localId":"149","locator":"69:17-70:68","type":"And","operand":[{"localId":"144","locator":"69:17-69:119","type":"And","operand":[{"locator":"69:49-69:64","precision":"Day","type":"In","operand":[{"localId":"140","locator":"69:17-69:47","path":"authorDatetime","scope":"DEXANotPerformed","type":"Property"},{"locator":"69:49-69:64","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"142","locator":"69:85-69:119","path":"authorDatetime","scope":"OrderTwelveMonthsADT","type":"Property"},"high":{"locator":"69:106-69:119","type":"Add","operand":[{"localId":"142","locator":"69:85-69:119","path":"authorDatetime","scope":"OrderTwelveMonthsADT","type":"Property"},{"localId":"143","locator":"69:49-69:56","value":3,"unit":"months","type":"Quantity"}]}}]},{"locator":"69:49-69:64","type":"Not","operand":{"locator":"69:49-69:64","type":"IsNull","operand":{"localId":"142","locator":"69:85-69:119","path":"authorDatetime","scope":"OrderTwelveMonthsADT","type":"Property"}}}]},{"localId":"148","locator":"70:13-70:68","type":"InValueSet","code":{"localId":"146","locator":"70:13-70:46","path":"negationRationale","scope":"DEXANotPerformed","type":"Property"},"valueset":{"localId":"147","locator":"70:51-70:68","name":"Patient Declined","preserve":true}}]}}]}},{"localId":"156","locator":"28:1-30:73","name":"Denominator Exception","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"156","s":[{"value":["","define ","\"Denominator Exception\"",":\n  "]},{"r":"155","s":[{"r":"134","s":[{"value":["exists "]},{"r":"133","s":[{"value":["( "]},{"r":"133","s":[{"value":["\"No Bone Density Scan Ordered Due to Patient Refusal\""]}]},{"value":[" )"]}]}]},{"value":["\n    or "]},{"r":"154","s":[{"value":["exists "]},{"r":"153","s":[{"value":["( "]},{"r":"153","s":[{"value":["\"No Bone Density Scan Performed Due to Patient Refusal\""]}]},{"value":[" )"]}]}]}]}]}}],"expression":{"localId":"155","locator":"29:3-30:73","type":"Or","operand":[{"localId":"134","locator":"29:3-29:66","type":"Exists","operand":{"localId":"133","locator":"29:10-29:66","name":"No Bone Density Scan Ordered Due to Patient Refusal","type":"ExpressionRef"}},{"localId":"154","locator":"30:8-30:73","type":"Exists","operand":{"localId":"153","locator":"30:15-30:73","name":"No Bone Density Scan Performed Due to Patient Refusal","type":"ExpressionRef"}}]}},{"localId":"205","locator":"47:1-58:3","name":"Has Baseline DEXA Scan Two Years Prior to the Start of or Less than Three Months After the Start of ADT","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"205","s":[{"value":["","define ","\"Has Baseline DEXA Scan Two Years Prior to the Start of or Less than Three Months After the Start of ADT\"",":\n  "]},{"r":"204","s":[{"value":["exists "]},{"r":"203","s":[{"value":["( "]},{"r":"203","s":[{"r":"175","s":[{"value":["( "]},{"r":"175","s":[{"s":[{"r":"158","s":[{"r":"157","s":[{"r":"157","s":[{"value":["[","\"Diagnostic Study, Order\"",": "]},{"s":[{"value":["\"DEXA Dual Energy Xray Absorptiometry, Bone Density for Urology Care\""]}]},{"value":["]"]}]}]},{"value":[" ","DEXAOrdered"]}]}]},{"value":["\n        "]},{"r":"174","s":[{"value":["with "]},{"r":"160","s":[{"r":"159","s":[{"s":[{"value":["\"Order for 12 Months of ADT in 3 Months Before to 9 Months After Start of Measurement Period\""]}]}]},{"value":[" ","OrderTwelveMonthsADT"]}]},{"value":["\n          such that "]},{"r":"173","s":[{"r":"166","s":[{"r":"162","s":[{"r":"161","s":[{"value":["DEXAOrdered"]}]},{"value":["."]},{"r":"162","s":[{"value":["authorDatetime"]}]}]},{"value":[" "]},{"r":"166","s":[{"r":"165","s":[{"value":["3 ","months"]}]},{"value":[" or less on or after day of"]}]},{"value":[" "]},{"r":"164","s":[{"r":"163","s":[{"value":["OrderTwelveMonthsADT"]}]},{"value":["."]},{"r":"164","s":[{"value":["authorDatetime"]}]}]}]},{"value":["\n            or "]},{"r":"172","s":[{"r":"168","s":[{"r":"167","s":[{"value":["DEXAOrdered"]}]},{"value":["."]},{"r":"168","s":[{"value":["authorDatetime"]}]}]},{"value":[" "]},{"r":"172","s":[{"r":"171","s":[{"value":["2 ","years"]}]},{"value":[" or less before day of"]}]},{"value":[" "]},{"r":"170","s":[{"r":"169","s":[{"value":["OrderTwelveMonthsADT"]}]},{"value":["."]},{"r":"170","s":[{"value":["authorDatetime"]}]}]}]}]}]}]},{"value":["\n    )"]}]},{"value":["\n      union "]},{"r":"202","s":[{"value":["( "]},{"r":"202","s":[{"s":[{"r":"177","s":[{"r":"176","s":[{"r":"176","s":[{"value":["[","\"Diagnostic Study, Performed\"",": "]},{"s":[{"value":["\"DEXA Dual Energy Xray Absorptiometry, Bone Density for Urology Care\""]}]},{"value":["]"]}]}]},{"value":[" ","DEXAPerformed"]}]}]},{"value":["\n          "]},{"r":"201","s":[{"value":["with "]},{"r":"179","s":[{"r":"178","s":[{"s":[{"value":["\"Order for 12 Months of ADT in 3 Months Before to 9 Months After Start of Measurement Period\""]}]}]},{"value":[" ","OrderTwelveMonthsADT"]}]},{"value":["\n            such that "]},{"r":"200","s":[{"r":"189","s":[{"r":"185","s":[{"r":"180","s":[{"value":["Global"]}]},{"value":["."]},{"r":"185","s":[{"value":["\"NormalizeInterval\""," ( "]},{"r":"182","s":[{"r":"181","s":[{"value":["DEXAPerformed"]}]},{"value":["."]},{"r":"182","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"184","s":[{"r":"183","s":[{"value":["DEXAPerformed"]}]},{"value":["."]},{"r":"184","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]},{"value":[" "]},{"r":"189","s":[{"r":"188","s":[{"value":["3 ","months"]}]},{"value":[" or less on or after day of"]}]},{"value":[" "]},{"r":"187","s":[{"r":"186","s":[{"value":["OrderTwelveMonthsADT"]}]},{"value":["."]},{"r":"187","s":[{"value":["authorDatetime"]}]}]}]},{"value":["\n              or "]},{"r":"199","s":[{"r":"195","s":[{"r":"190","s":[{"value":["Global"]}]},{"value":["."]},{"r":"195","s":[{"value":["\"NormalizeInterval\""," ( "]},{"r":"192","s":[{"r":"191","s":[{"value":["DEXAPerformed"]}]},{"value":["."]},{"r":"192","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"194","s":[{"r":"193","s":[{"value":["DEXAPerformed"]}]},{"value":["."]},{"r":"194","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]},{"value":[" "]},{"r":"199","s":[{"r":"198","s":[{"value":["2 ","years"]}]},{"value":[" or less before day of"]}]},{"value":[" "]},{"r":"197","s":[{"r":"196","s":[{"value":["OrderTwelveMonthsADT"]}]},{"value":["."]},{"r":"197","s":[{"value":["authorDatetime"]}]}]}]}]}]}]},{"value":["\n      )"]}]}]},{"value":["\n  )"]}]}]}]}}],"expression":{"localId":"204","locator":"48:3-58:3","type":"Exists","operand":{"localId":"203","locator":"48:10-58:3","type":"Union","operand":[{"type":"As","operand":{"localId":"175","locator":"48:12-52:5","type":"Query","source":[{"localId":"158","locator":"48:14-48:123","alias":"DEXAOrdered","expression":{"localId":"157","locator":"48:14-48:111","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveDiagnosticStudyOrder","templateId":"PositiveDiagnosticStudyOrder","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"48:42-48:110","name":"DEXA Dual Energy Xray Absorptiometry, Bone Density for Urology Care","preserve":true,"type":"ValueSetRef"}}}],"relationship":[{"localId":"174","locator":"49:9-51:107","alias":"OrderTwelveMonthsADT","type":"With","expression":{"localId":"159","locator":"49:14-49:106","name":"Order for 12 Months of ADT in 3 Months Before to 9 Months After Start of Measurement Period","type":"ExpressionRef"},"suchThat":{"localId":"173","locator":"50:21-51:107","type":"Or","operand":[{"localId":"166","locator":"50:21-50:118","type":"And","operand":[{"locator":"50:48-50:63","precision":"Day","type":"In","operand":[{"localId":"162","locator":"50:21-50:46","path":"authorDatetime","scope":"DEXAOrdered","type":"Property"},{"locator":"50:48-50:63","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"164","locator":"50:84-50:118","path":"authorDatetime","scope":"OrderTwelveMonthsADT","type":"Property"},"high":{"locator":"50:105-50:118","type":"Add","operand":[{"localId":"164","locator":"50:84-50:118","path":"authorDatetime","scope":"OrderTwelveMonthsADT","type":"Property"},{"localId":"165","locator":"50:48-50:55","value":3,"unit":"months","type":"Quantity"}]}}]},{"locator":"50:48-50:63","type":"Not","operand":{"locator":"50:48-50:63","type":"IsNull","operand":{"localId":"164","locator":"50:84-50:118","path":"authorDatetime","scope":"OrderTwelveMonthsADT","type":"Property"}}}]},{"localId":"172","locator":"51:16-51:107","type":"And","operand":[{"locator":"51:43-51:57","precision":"Day","type":"In","operand":[{"localId":"168","locator":"51:16-51:41","path":"authorDatetime","scope":"DEXAOrdered","type":"Property"},{"locator":"51:43-51:57","lowClosed":true,"highClosed":false,"type":"Interval","low":{"locator":"51:94-51:107","type":"Subtract","operand":[{"localId":"170","locator":"51:73-51:107","path":"authorDatetime","scope":"OrderTwelveMonthsADT","type":"Property"},{"localId":"171","locator":"51:43-51:49","value":2,"unit":"years","type":"Quantity"}]},"high":{"localId":"170","locator":"51:73-51:107","path":"authorDatetime","scope":"OrderTwelveMonthsADT","type":"Property"}}]},{"locator":"51:43-51:57","type":"Not","operand":{"locator":"51:43-51:57","type":"IsNull","operand":{"localId":"170","locator":"51:73-51:107","path":"authorDatetime","scope":"OrderTwelveMonthsADT","type":"Property"}}}]}]}}]},"asTypeSpecifier":{"type":"ListTypeSpecifier","elementType":{"type":"ChoiceTypeSpecifier","choice":[{"name":"{urn:healthit-gov:qdm:v5_6}PositiveDiagnosticStudyPerformed","type":"NamedTypeSpecifier"},{"name":"{urn:healthit-gov:qdm:v5_6}PositiveDiagnosticStudyOrder","type":"NamedTypeSpecifier"}]}}},{"type":"As","operand":{"localId":"202","locator":"53:13-57:7","type":"Query","source":[{"localId":"177","locator":"53:15-53:130","alias":"DEXAPerformed","expression":{"localId":"176","locator":"53:15-53:116","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveDiagnosticStudyPerformed","templateId":"PositiveDiagnosticStudyPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"53:47-53:115","name":"DEXA Dual Energy Xray Absorptiometry, Bone Density for Urology Care","preserve":true,"type":"ValueSetRef"}}}],"relationship":[{"localId":"201","locator":"54:11-56:174","alias":"OrderTwelveMonthsADT","type":"With","expression":{"localId":"178","locator":"54:16-54:108","name":"Order for 12 Months of ADT in 3 Months Before to 9 Months After Start of Measurement Period","type":"ExpressionRef"},"suchThat":{"localId":"200","locator":"55:23-56:174","type":"Or","operand":[{"localId":"189","locator":"55:23-55:185","type":"And","operand":[{"locator":"55:115-55:130","precision":"Day","type":"In","operand":[{"locator":"55:30-55:113","type":"Start","operand":{"localId":"185","locator":"55:23-55:113","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"182","locator":"55:52-55:81","path":"relevantDatetime","scope":"DEXAPerformed","type":"Property"},{"localId":"184","locator":"55:84-55:111","path":"relevantPeriod","scope":"DEXAPerformed","type":"Property"}]}},{"locator":"55:115-55:130","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"187","locator":"55:151-55:185","path":"authorDatetime","scope":"OrderTwelveMonthsADT","type":"Property"},"high":{"locator":"55:172-55:185","type":"Add","operand":[{"localId":"187","locator":"55:151-55:185","path":"authorDatetime","scope":"OrderTwelveMonthsADT","type":"Property"},{"localId":"188","locator":"55:115-55:122","value":3,"unit":"months","type":"Quantity"}]}}]},{"locator":"55:115-55:130","type":"Not","operand":{"locator":"55:115-55:130","type":"IsNull","operand":{"localId":"187","locator":"55:151-55:185","path":"authorDatetime","scope":"OrderTwelveMonthsADT","type":"Property"}}}]},{"localId":"199","locator":"56:18-56:174","type":"And","operand":[{"locator":"56:110-56:124","precision":"Day","type":"In","operand":[{"locator":"56:25-56:108","type":"End","operand":{"localId":"195","locator":"56:18-56:108","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"192","locator":"56:47-56:76","path":"relevantDatetime","scope":"DEXAPerformed","type":"Property"},{"localId":"194","locator":"56:79-56:106","path":"relevantPeriod","scope":"DEXAPerformed","type":"Property"}]}},{"locator":"56:110-56:124","lowClosed":true,"highClosed":false,"type":"Interval","low":{"locator":"56:161-56:174","type":"Subtract","operand":[{"localId":"197","locator":"56:140-56:174","path":"authorDatetime","scope":"OrderTwelveMonthsADT","type":"Property"},{"localId":"198","locator":"56:110-56:116","value":2,"unit":"years","type":"Quantity"}]},"high":{"localId":"197","locator":"56:140-56:174","path":"authorDatetime","scope":"OrderTwelveMonthsADT","type":"Property"}}]},{"locator":"56:110-56:124","type":"Not","operand":{"locator":"56:110-56:124","type":"IsNull","operand":{"localId":"197","locator":"56:140-56:174","path":"authorDatetime","scope":"OrderTwelveMonthsADT","type":"Property"}}}]}]}}]},"asTypeSpecifier":{"type":"ListTypeSpecifier","elementType":{"type":"ChoiceTypeSpecifier","choice":[{"name":"{urn:healthit-gov:qdm:v5_6}PositiveDiagnosticStudyPerformed","type":"NamedTypeSpecifier"},{"name":"{urn:healthit-gov:qdm:v5_6}PositiveDiagnosticStudyOrder","type":"NamedTypeSpecifier"}]}}}]}}},{"localId":"207","locator":"32:1-33:107","name":"Numerator","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"207","s":[{"value":["","define ","\"Numerator\"",":\n  "]},{"r":"206","s":[{"value":["\"Has Baseline DEXA Scan Two Years Prior to the Start of or Less than Three Months After the Start of ADT\""]}]}]}}],"expression":{"localId":"206","locator":"33:3-33:107","name":"Has Baseline DEXA Scan Two Years Prior to the Start of or Less than Three Months After the Start of ADT","type":"ExpressionRef"}},{"localId":"209","locator":"35:1-36:51","name":"SDE Ethnicity","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"209","s":[{"value":["","define ","\"SDE Ethnicity\"",":\n  "]},{"r":"208","s":[{"value":["[","\"Patient Characteristic Ethnicity\"",": "]},{"s":[{"value":["\"Ethnicity\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"208","locator":"36:3-36:51","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicEthnicity","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"36:40-36:50","name":"Ethnicity","preserve":true,"type":"ValueSetRef"}}},{"localId":"211","locator":"38:1-39:48","name":"SDE Payer","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"211","s":[{"value":["","define ","\"SDE Payer\"",":\n  "]},{"r":"210","s":[{"value":["[","\"Patient Characteristic Payer\"",": "]},{"s":[{"value":["\"Payer Type\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"210","locator":"39:3-39:48","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicPayer","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"39:36-39:47","name":"Payer Type","preserve":true,"type":"ValueSetRef"}}},{"localId":"213","locator":"41:1-42:41","name":"SDE Race","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"213","s":[{"value":["","define ","\"SDE Race\"",":\n  "]},{"r":"212","s":[{"value":["[","\"Patient Characteristic Race\"",": "]},{"s":[{"value":["\"Race\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"212","locator":"42:3-42:41","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicRace","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"42:35-42:40","name":"Race","preserve":true,"type":"ValueSetRef"}}},{"localId":"215","locator":"44:1-45:58","name":"SDE Sex","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"215","s":[{"value":["","define ","\"SDE Sex\"",":\n  "]},{"r":"214","s":[{"value":["[","\"Patient Characteristic Sex\"",": "]},{"s":[{"value":["\"ONC Administrative Sex\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"214","locator":"45:3-45:58","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicSex","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"45:34-45:57","name":"ONC Administrative Sex","preserve":true,"type":"ValueSetRef"}}}]}}},"elm_annotations":{"statements":[{"children":[{"children":[{"children":[{"text":"define \"Has Qualifying Encounter\":\n  "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Office Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"18"}],"node_type":"Retrieve","ref_id":"18"},{"children":[{"text":" Encounter"}]}],"ref_id":"19"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"20"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"21"}],"node_type":"Property","ref_id":"21"},{"children":[{"text":" during day of "}],"ref_id":"23"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"22"}],"ref_id":"23"}],"ref_id":"23"}],"node_type":"Query","ref_id":"24"}],"node_type":"Exists","ref_id":"25"}],"ref_id":"26"}],"define_name":"Has Qualifying Encounter"},{"children":[{"children":[{"children":[{"text":"define \"Androgen Deprivation Therapy for Urology Care Medication Active Start Dates\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Medication, Active\": "}]},{"children":[{"children":[{"text":"\"Androgen deprivation therapy for Urology Care\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"30"}],"node_type":"Retrieve","ref_id":"30"},{"children":[{"text":" ADTActive"}]}],"ref_id":"31"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"32"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"EarliestOf ( "}]},{"children":[{"children":[{"children":[{"text":"ADTActive"}]}],"ref_id":"33"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"34"}],"node_type":"Property","ref_id":"34"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"ADTActive"}]}],"ref_id":"35"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"36"}],"node_type":"Property","ref_id":"36"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"37"}],"node_type":"FunctionRef","ref_id":"37"}],"ref_id":"38"}],"node_type":"Query","ref_id":"39"}],"ref_id":"40"}],"define_name":"Androgen Deprivation Therapy for Urology Care Medication Active Start Dates"},{"children":[{"children":[{"children":[{"text":"define \"Androgen Deprivation Therapy for Urology Care Medication Order Start Dates\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Medication, Order\": "}]},{"children":[{"children":[{"text":"\"Androgen deprivation therapy for Urology Care\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"42"}],"node_type":"Retrieve","ref_id":"42"},{"children":[{"text":" ADTOrder"}]}],"ref_id":"43"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"44"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"EarliestOf ( "}]},{"children":[{"children":[{"children":[{"text":"ADTOrder"}]}],"ref_id":"45"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"46"}],"node_type":"Property","ref_id":"46"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"ADTOrder"}]}],"ref_id":"47"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"48"}],"node_type":"Property","ref_id":"48"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"49"}],"node_type":"FunctionRef","ref_id":"49"}],"ref_id":"50"}],"node_type":"Query","ref_id":"51"}],"ref_id":"52"}],"define_name":"Androgen Deprivation Therapy for Urology Care Medication Order Start Dates"},{"children":[{"children":[{"children":[{"text":"define \"Prostate Cancer Diagnosis\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Diagnosis\": "}]},{"children":[{"children":[{"text":"\"Prostate Cancer\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"56"}],"node_type":"Retrieve","ref_id":"56"},{"children":[{"text":" ProstateCancer"}]}],"ref_id":"57"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"ProstateCancer"}]}],"ref_id":"58"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"prevalencePeriod"}]}],"node_type":"Property","ref_id":"59"}],"node_type":"Property","ref_id":"59"},{"children":[{"text":" overlaps day of "}],"ref_id":"61"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"60"}],"ref_id":"61"}],"ref_id":"61"}],"node_type":"Query","ref_id":"62"}],"ref_id":"63"}],"define_name":"Prostate Cancer Diagnosis"},{"children":[{"children":[{"children":[{"text":"define \"First ADT in 3 Months Before to 9 Months After Start of Measurement Period\":\n  "}]},{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"children":[{"text":"\"Androgen Deprivation Therapy for Urology Care Medication Active Start Dates\""}]}],"node_type":"ExpressionRef","ref_id":"41"},{"children":[{"text":"\n      union "}]},{"children":[{"children":[{"text":"\"Androgen Deprivation Therapy for Urology Care Medication Order Start Dates\""}]}],"node_type":"ExpressionRef","ref_id":"53"}],"node_type":"Union","ref_id":"54"},{"children":[{"text":")"}]}],"node_type":"Union","ref_id":"54"},{"children":[{"text":" ADTDate"}]}],"ref_id":"55"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"Prostate Cancer Diagnosis\""}]}]}],"node_type":"ExpressionRef","ref_id":"64"},{"children":[{"text":" ProstateCancer"}]}],"ref_id":"65"},{"children":[{"text":"\n        such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"ADTDate"}]}],"node_type":"AliasRef","ref_id":"66"},{"children":[{"text":" during "}],"node_type":"In","ref_id":"69"},{"children":[{"children":[{"children":[{"text":"ProstateCancer"}]}],"ref_id":"67"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"prevalencePeriod"}]}],"node_type":"Property","ref_id":"68"}],"node_type":"Property","ref_id":"68"}],"node_type":"In","ref_id":"69"},{"children":[{"text":"\n          and "}]},{"children":[{"children":[{"children":[{"text":"ADTDate"}]}],"node_type":"AliasRef","ref_id":"70"},{"children":[{"text":" during "}],"node_type":"In","ref_id":"80"},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"71"}],"node_type":"Start","ref_id":"72"},{"children":[{"text":" - "}]},{"children":[{"children":[{"text":"3 months"}]}],"node_type":"Quantity","ref_id":"73"}],"ref_id":"74"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"75"}],"node_type":"Start","ref_id":"76"},{"children":[{"text":" + "}]},{"children":[{"children":[{"text":"9 months"}]}],"node_type":"Quantity","ref_id":"77"}],"ref_id":"78"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"79"}],"node_type":"In","ref_id":"80"}],"node_type":"And","ref_id":"81"}],"ref_id":"82"},{"children":[{"text":"\n      sort ascending"}],"ref_id":"83"}],"ref_id":"84"},{"children":[{"text":"\n  )"}]}],"node_type":"First","ref_id":"85"}],"ref_id":"86"}],"define_name":"First ADT in 3 Months Before to 9 Months After Start of Measurement Period"},{"children":[{"children":[{"children":[{"text":"define \"Order for 12 Months of ADT in 3 Months Before to 9 Months After Start of Measurement Period\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Procedure, Order\": "}]},{"children":[{"children":[{"text":"\"Injection of leuprolide acetate for twelve month period (regime/therapy)\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"28"}],"node_type":"Retrieve","ref_id":"28"},{"children":[{"text":" OrderTwelveMonthADT"}]}],"ref_id":"29"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"First ADT in 3 Months Before to 9 Months After Start of Measurement Period\""}]}]}],"node_type":"ExpressionRef","ref_id":"87"},{"children":[{"text":" FirstADTMP"}]}],"ref_id":"88"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"OrderTwelveMonthADT"}]}],"ref_id":"89"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"90"}],"node_type":"Property","ref_id":"90"},{"children":[{"text":" on or after "}],"node_type":"SameOrAfter","ref_id":"92"},{"children":[{"children":[{"text":"FirstADTMP"}]}],"node_type":"AliasRef","ref_id":"91"}],"node_type":"SameOrAfter","ref_id":"92"},{"children":[{"text":"\n        and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"OrderTwelveMonthADT"}]}],"ref_id":"93"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"94"}],"node_type":"Property","ref_id":"94"},{"children":[{"text":" during "}],"node_type":"In","ref_id":"104"},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"95"}],"node_type":"Start","ref_id":"96"},{"children":[{"text":" - "}]},{"children":[{"children":[{"text":"3 months"}]}],"node_type":"Quantity","ref_id":"97"}],"ref_id":"98"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"99"}],"node_type":"Start","ref_id":"100"},{"children":[{"text":" + "}]},{"children":[{"children":[{"text":"9 months"}]}],"node_type":"Quantity","ref_id":"101"}],"ref_id":"102"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"103"}],"node_type":"In","ref_id":"104"}],"node_type":"And","ref_id":"105"}],"ref_id":"106"}],"node_type":"Query","ref_id":"107"}],"ref_id":"108"}],"define_name":"Order for 12 Months of ADT in 3 Months Before to 9 Months After Start of Measurement Period"},{"children":[{"children":[{"children":[{"text":"define \"Initial Population\":\n  "}]},{"children":[{"children":[{"children":[{"text":"\"Has Qualifying Encounter\""}]}],"node_type":"ExpressionRef","ref_id":"27"},{"children":[{"text":"\n    and "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"\"Order for 12 Months of ADT in 3 Months Before to 9 Months After Start of Measurement Period\""}]}],"node_type":"ExpressionRef","ref_id":"109"}],"node_type":"Exists","ref_id":"110"}],"node_type":"And","ref_id":"111"}],"ref_id":"112"}],"define_name":"Initial Population"},{"children":[{"children":[{"children":[{"text":"define \"Denominator\":\n  "}]},{"children":[{"children":[{"text":"\"Initial Population\""}]}],"node_type":"ExpressionRef","ref_id":"113"}],"ref_id":"114"}],"define_name":"Denominator"},{"children":[{"children":[{"children":[{"text":"define \"No Bone Density Scan Ordered Due to Patient Refusal\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Diagnostic Study, Not Ordered\": "}]},{"children":[{"children":[{"text":"\"DEXA Dual Energy Xray Absorptiometry, Bone Density for Urology Care\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"115"}],"node_type":"Retrieve","ref_id":"115"},{"children":[{"text":" DEXANotOrdered"}]}],"ref_id":"116"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"Order for 12 Months of ADT in 3 Months Before to 9 Months After Start of Measurement Period\""}]}]}],"node_type":"ExpressionRef","ref_id":"117"},{"children":[{"text":" OrderTwelveMonthsADT"}]}],"ref_id":"118"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"DEXANotOrdered"}]}],"ref_id":"119"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"120"}],"node_type":"Property","ref_id":"120"},{"children":[{"text":" "}]},{"children":[{"children":[{"children":[{"text":"3 months"}]}],"node_type":"Quantity","ref_id":"123"},{"children":[{"text":" or less on or after day of"}]}],"node_type":"And","ref_id":"124"},{"children":[{"text":" "}]},{"children":[{"children":[{"children":[{"text":"OrderTwelveMonthsADT"}]}],"ref_id":"121"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"122"}],"node_type":"Property","ref_id":"122"}],"node_type":"And","ref_id":"124"},{"children":[{"text":"\n        and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"DEXANotOrdered"}]}],"ref_id":"125"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"negationRationale"}]}],"ref_id":"126"}],"ref_id":"126"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Patient Declined\""}]}],"ref_id":"127"}],"node_type":"InValueSet","ref_id":"128"}],"node_type":"And","ref_id":"129"}],"ref_id":"130"}],"node_type":"Query","ref_id":"131"}],"ref_id":"132"}],"define_name":"No Bone Density Scan Ordered Due to Patient Refusal"},{"children":[{"children":[{"children":[{"text":"define \"No Bone Density Scan Performed Due to Patient Refusal\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Diagnostic Study, Not Performed\": "}]},{"children":[{"children":[{"text":"\"DEXA Dual Energy Xray Absorptiometry, Bone Density for Urology Care\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"135"}],"node_type":"Retrieve","ref_id":"135"},{"children":[{"text":" DEXANotPerformed"}]}],"ref_id":"136"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"Order for 12 Months of ADT in 3 Months Before to 9 Months After Start of Measurement Period\""}]}]}],"node_type":"ExpressionRef","ref_id":"137"},{"children":[{"text":" OrderTwelveMonthsADT"}]}],"ref_id":"138"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"DEXANotPerformed"}]}],"ref_id":"139"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"140"}],"node_type":"Property","ref_id":"140"},{"children":[{"text":" "}]},{"children":[{"children":[{"children":[{"text":"3 months"}]}],"node_type":"Quantity","ref_id":"143"},{"children":[{"text":" or less on or after day of"}]}],"node_type":"And","ref_id":"144"},{"children":[{"text":" "}]},{"children":[{"children":[{"children":[{"text":"OrderTwelveMonthsADT"}]}],"ref_id":"141"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"142"}],"node_type":"Property","ref_id":"142"}],"node_type":"And","ref_id":"144"},{"children":[{"text":"\n        and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"DEXANotPerformed"}]}],"ref_id":"145"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"negationRationale"}]}],"ref_id":"146"}],"ref_id":"146"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Patient Declined\""}]}],"ref_id":"147"}],"node_type":"InValueSet","ref_id":"148"}],"node_type":"And","ref_id":"149"}],"ref_id":"150"}],"node_type":"Query","ref_id":"151"}],"ref_id":"152"}],"define_name":"No Bone Density Scan Performed Due to Patient Refusal"},{"children":[{"children":[{"children":[{"text":"define \"Denominator Exception\":\n  "}]},{"children":[{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"\"No Bone Density Scan Ordered Due to Patient Refusal\""}]}],"node_type":"ExpressionRef","ref_id":"133"},{"children":[{"text":" )"}]}],"node_type":"ExpressionRef","ref_id":"133"}],"node_type":"Exists","ref_id":"134"},{"children":[{"text":"\n    or "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"\"No Bone Density Scan Performed Due to Patient Refusal\""}]}],"node_type":"ExpressionRef","ref_id":"153"},{"children":[{"text":" )"}]}],"node_type":"ExpressionRef","ref_id":"153"}],"node_type":"Exists","ref_id":"154"}],"node_type":"Or","ref_id":"155"}],"ref_id":"156"}],"define_name":"Denominator Exception"},{"children":[{"children":[{"children":[{"text":"define \"Has Baseline DEXA Scan Two Years Prior to the Start of or Less than Three Months After the Start of ADT\":\n  "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Diagnostic Study, Order\": "}]},{"children":[{"children":[{"text":"\"DEXA Dual Energy Xray Absorptiometry, Bone Density for Urology Care\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"157"}],"node_type":"Retrieve","ref_id":"157"},{"children":[{"text":" DEXAOrdered"}]}],"ref_id":"158"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"Order for 12 Months of ADT in 3 Months Before to 9 Months After Start of Measurement Period\""}]}]}],"node_type":"ExpressionRef","ref_id":"159"},{"children":[{"text":" OrderTwelveMonthsADT"}]}],"ref_id":"160"},{"children":[{"text":"\n          such that "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"DEXAOrdered"}]}],"ref_id":"161"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"162"}],"node_type":"Property","ref_id":"162"},{"children":[{"text":" "}]},{"children":[{"children":[{"children":[{"text":"3 months"}]}],"node_type":"Quantity","ref_id":"165"},{"children":[{"text":" or less on or after day of"}]}],"node_type":"And","ref_id":"166"},{"children":[{"text":" "}]},{"children":[{"children":[{"children":[{"text":"OrderTwelveMonthsADT"}]}],"ref_id":"163"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"164"}],"node_type":"Property","ref_id":"164"}],"node_type":"And","ref_id":"166"},{"children":[{"text":"\n            or "}]},{"children":[{"children":[{"children":[{"children":[{"text":"DEXAOrdered"}]}],"ref_id":"167"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"168"}],"node_type":"Property","ref_id":"168"},{"children":[{"text":" "}]},{"children":[{"children":[{"children":[{"text":"2 years"}]}],"node_type":"Quantity","ref_id":"171"},{"children":[{"text":" or less before day of"}]}],"node_type":"And","ref_id":"172"},{"children":[{"text":" "}]},{"children":[{"children":[{"children":[{"text":"OrderTwelveMonthsADT"}]}],"ref_id":"169"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"170"}],"node_type":"Property","ref_id":"170"}],"node_type":"And","ref_id":"172"}],"node_type":"Or","ref_id":"173"}],"ref_id":"174"}],"node_type":"Query","ref_id":"175"},{"children":[{"text":"\n    )"}]}],"node_type":"Query","ref_id":"175"},{"children":[{"text":"\n      union "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Diagnostic Study, Performed\": "}]},{"children":[{"children":[{"text":"\"DEXA Dual Energy Xray Absorptiometry, Bone Density for Urology Care\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"176"}],"node_type":"Retrieve","ref_id":"176"},{"children":[{"text":" DEXAPerformed"}]}],"ref_id":"177"}]},{"children":[{"text":"\n          "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"Order for 12 Months of ADT in 3 Months Before to 9 Months After Start of Measurement Period\""}]}]}],"node_type":"ExpressionRef","ref_id":"178"},{"children":[{"text":" OrderTwelveMonthsADT"}]}],"ref_id":"179"},{"children":[{"text":"\n            such that "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"180"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\" ( "}]},{"children":[{"children":[{"children":[{"text":"DEXAPerformed"}]}],"ref_id":"181"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"182"}],"node_type":"Property","ref_id":"182"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"DEXAPerformed"}]}],"ref_id":"183"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"184"}],"node_type":"Property","ref_id":"184"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"185"}],"node_type":"FunctionRef","ref_id":"185"},{"children":[{"text":" "}]},{"children":[{"children":[{"children":[{"text":"3 months"}]}],"node_type":"Quantity","ref_id":"188"},{"children":[{"text":" or less on or after day of"}]}],"node_type":"And","ref_id":"189"},{"children":[{"text":" "}]},{"children":[{"children":[{"children":[{"text":"OrderTwelveMonthsADT"}]}],"ref_id":"186"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"187"}],"node_type":"Property","ref_id":"187"}],"node_type":"And","ref_id":"189"},{"children":[{"text":"\n              or "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"190"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\" ( "}]},{"children":[{"children":[{"children":[{"text":"DEXAPerformed"}]}],"ref_id":"191"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"192"}],"node_type":"Property","ref_id":"192"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"DEXAPerformed"}]}],"ref_id":"193"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"194"}],"node_type":"Property","ref_id":"194"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"195"}],"node_type":"FunctionRef","ref_id":"195"},{"children":[{"text":" "}]},{"children":[{"children":[{"children":[{"text":"2 years"}]}],"node_type":"Quantity","ref_id":"198"},{"children":[{"text":" or less before day of"}]}],"node_type":"And","ref_id":"199"},{"children":[{"text":" "}]},{"children":[{"children":[{"children":[{"text":"OrderTwelveMonthsADT"}]}],"ref_id":"196"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"197"}],"node_type":"Property","ref_id":"197"}],"node_type":"And","ref_id":"199"}],"node_type":"Or","ref_id":"200"}],"ref_id":"201"}],"node_type":"Query","ref_id":"202"},{"children":[{"text":"\n      )"}]}],"node_type":"Query","ref_id":"202"}],"node_type":"Union","ref_id":"203"},{"children":[{"text":"\n  )"}]}],"node_type":"Union","ref_id":"203"}],"node_type":"Exists","ref_id":"204"}],"ref_id":"205"}],"define_name":"Has Baseline DEXA Scan Two Years Prior to the Start of or Less than Three Months After the Start of ADT"},{"children":[{"children":[{"children":[{"text":"define \"Numerator\":\n  "}]},{"children":[{"children":[{"text":"\"Has Baseline DEXA Scan Two Years Prior to the Start of or Less than Three Months After the Start of ADT\""}]}],"node_type":"ExpressionRef","ref_id":"206"}],"ref_id":"207"}],"define_name":"Numerator"},{"children":[{"children":[{"children":[{"text":"define \"SDE Ethnicity\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Ethnicity\": "}]},{"children":[{"children":[{"text":"\"Ethnicity\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"208"}],"ref_id":"209"}],"define_name":"SDE Ethnicity"},{"children":[{"children":[{"children":[{"text":"define \"SDE Payer\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Payer\": "}]},{"children":[{"children":[{"text":"\"Payer Type\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"210"}],"ref_id":"211"}],"define_name":"SDE Payer"},{"children":[{"children":[{"children":[{"text":"define \"SDE Race\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Race\": "}]},{"children":[{"children":[{"text":"\"Race\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"212"}],"ref_id":"213"}],"define_name":"SDE Race"},{"children":[{"children":[{"children":[{"text":"define \"SDE Sex\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Sex\": "}]},{"children":[{"children":[{"text":"\"ONC Administrative Sex\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"214"}],"ref_id":"215"}],"define_name":"SDE Sex"}],"identifier":{"id":"BoneDensityProstateCancerAndrogenDeprivationTherapy","version":"8.2.000"}},"is_main_library":true,"is_top_level":true,"library_name":"BoneDensityProstateCancerAndrogenDeprivationTherapy","library_version":"8.2.000","statement_dependencies":[{"_id":"68923f6aa83e15671c2e37f5","statement_name":"Patient"},{"_id":"68923f6aa83e15671c2e37f6","statement_name":"Has Qualifying Encounter"},{"_id":"68923f6aa83e15671c2e37f7","statement_name":"Androgen Deprivation Therapy for Urology Care Medication Active Start Dates","statement_references":[{"_id":"68923f6fa83e15671c2e3907","hqmf_id":null,"library_name":"MATGlobalCommonFunctionsQDM","statement_name":"EarliestOf"}]},{"_id":"68923f6aa83e15671c2e37f8","statement_name":"Androgen Deprivation Therapy for Urology Care Medication Order Start Dates","statement_references":[{"_id":"68923f6fa83e15671c2e3908","hqmf_id":null,"library_name":"MATGlobalCommonFunctionsQDM","statement_name":"EarliestOf"}]},{"_id":"68923f6aa83e15671c2e37f9","statement_name":"Prostate Cancer Diagnosis"},{"_id":"68923f6aa83e15671c2e37fa","statement_name":"First ADT in 3 Months Before to 9 Months After Start of Measurement Period","statement_references":[{"_id":"68923f6aa83e15671c2e37ec","hqmf_id":null,"library_name":"BoneDensityProstateCancerAndrogenDeprivationTherapy","statement_name":"Androgen Deprivation Therapy for Urology Care Medication Active Start Dates"},{"_id":"68923f6aa83e15671c2e37ed","hqmf_id":null,"library_name":"BoneDensityProstateCancerAndrogenDeprivationTherapy","statement_name":"Androgen Deprivation Therapy for Urology Care Medication Order Start Dates"},{"_id":"68923f6aa83e15671c2e37ee","hqmf_id":null,"library_name":"BoneDensityProstateCancerAndrogenDeprivationTherapy","statement_name":"Prostate Cancer Diagnosis"}]},{"_id":"68923f6aa83e15671c2e37fb","statement_name":"Order for 12 Months of ADT in 3 Months Before to 9 Months After Start of Measurement Period","statement_references":[{"_id":"68923f6fa83e15671c2e3909","hqmf_id":null,"library_name":"BoneDensityProstateCancerAndrogenDeprivationTherapy","statement_name":"First ADT in 3 Months Before to 9 Months After Start of Measurement Period"}]},{"_id":"68923f6aa83e15671c2e37fc","statement_name":"Initial Population","statement_references":[{"_id":"68923f6aa83e15671c2e37ef","hqmf_id":null,"library_name":"BoneDensityProstateCancerAndrogenDeprivationTherapy","statement_name":"Has Qualifying Encounter"},{"_id":"68923f6aa83e15671c2e37f0","hqmf_id":null,"library_name":"BoneDensityProstateCancerAndrogenDeprivationTherapy","statement_name":"Order for 12 Months of ADT in 3 Months Before to 9 Months After Start of Measurement Period"}]},{"_id":"68923f6aa83e15671c2e37fd","statement_name":"Denominator","statement_references":[{"_id":"68923f6fa83e15671c2e390a","hqmf_id":null,"library_name":"BoneDensityProstateCancerAndrogenDeprivationTherapy","statement_name":"Initial Population"}]},{"_id":"68923f6aa83e15671c2e37fe","statement_name":"No Bone Density Scan Ordered Due to Patient Refusal","statement_references":[{"_id":"68923f6fa83e15671c2e390b","hqmf_id":null,"library_name":"BoneDensityProstateCancerAndrogenDeprivationTherapy","statement_name":"Order for 12 Months of ADT in 3 Months Before to 9 Months After Start of Measurement Period"}]},{"_id":"68923f6aa83e15671c2e37ff","statement_name":"No Bone Density Scan Performed Due to Patient Refusal","statement_references":[{"_id":"68923f6fa83e15671c2e390c","hqmf_id":null,"library_name":"BoneDensityProstateCancerAndrogenDeprivationTherapy","statement_name":"Order for 12 Months of ADT in 3 Months Before to 9 Months After Start of Measurement Period"}]},{"_id":"68923f6aa83e15671c2e3800","statement_name":"Denominator Exception","statement_references":[{"_id":"68923f6aa83e15671c2e37f1","hqmf_id":null,"library_name":"BoneDensityProstateCancerAndrogenDeprivationTherapy","statement_name":"No Bone Density Scan Ordered Due to Patient Refusal"},{"_id":"68923f6aa83e15671c2e37f2","hqmf_id":null,"library_name":"BoneDensityProstateCancerAndrogenDeprivationTherapy","statement_name":"No Bone Density Scan Performed Due to Patient Refusal"}]},{"_id":"68923f6aa83e15671c2e3801","statement_name":"Has Baseline DEXA Scan Two Years Prior to the Start of or Less than Three Months After the Start of ADT","statement_references":[{"_id":"68923f6aa83e15671c2e37f3","hqmf_id":null,"library_name":"BoneDensityProstateCancerAndrogenDeprivationTherapy","statement_name":"Order for 12 Months of ADT in 3 Months Before to 9 Months After Start of Measurement Period"},{"_id":"68923f6aa83e15671c2e37f4","hqmf_id":null,"library_name":"MATGlobalCommonFunctionsQDM","statement_name":"NormalizeInterval"}]},{"_id":"68923f6aa83e15671c2e3802","statement_name":"Numerator","statement_references":[{"_id":"68923f6fa83e15671c2e390d","hqmf_id":null,"library_name":"BoneDensityProstateCancerAndrogenDeprivationTherapy","statement_name":"Has Baseline DEXA Scan Two Years Prior to the Start of or Less than Three Months After the Start of ADT"}]},{"_id":"68923f6aa83e15671c2e3803","statement_name":"SDE Ethnicity"},{"_id":"68923f6aa83e15671c2e3804","statement_name":"SDE Payer"},{"_id":"68923f6aa83e15671c2e3805","statement_name":"SDE Race"},{"_id":"68923f6aa83e15671c2e3806","statement_name":"SDE Sex"}]},{"_id":"68923f6aa83e15671c2e380e","cql":"library MATGlobalCommonFunctionsQDM version '8.0.000'\n\n/*1. Upversion to 8.0.000 to support 2024 AU efforts.  No content changes were made from version 7.2.000 to this version 8.0.000*/\n\nusing QDM version '5.6'\n\nvalueset \"Emergency Department Visit\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.292' \nvalueset \"Encounter Inpatient\": 'urn:oid:2.16.840.1.113883.3.666.5.307' \nvalueset \"Intensive Care Unit\": 'urn:oid:2.16.840.1.113762.1.4.1029.206' \nvalueset \"Observation Services\": 'urn:oid:2.16.840.1.113762.1.4.1111.143' \nvalueset \"Outpatient Surgery Service\": 'urn:oid:2.16.840.1.113762.1.4.1110.38' \n\nparameter \"Measurement Period\" Interval\u003cDateTime\u003e\n\ncontext Patient\n\ndefine \"ED Encounter\":\n  [\"Encounter, Performed\": \"Emergency Department Visit\"]\n\ndefine \"Inpatient Encounter\":\n  [\"Encounter, Performed\": \"Encounter Inpatient\"] EncounterInpatient\n    where EncounterInpatient.relevantPeriod ends during day of \"Measurement Period\"\n\n/*@description: Returns an interval of date values extracted from the input interval of date-time values\n@comment: This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability.*/\ndefine function \"ToDateInterval\"(period Interval\u003cDateTime\u003e ):\n  Interval[date from start of period, date from end of period]\n\n/*calculates the difference in calendar days between the start and end of the given interval.*/\ndefine function \"LengthInDays\"(Value Interval\u003cDateTime\u003e ):\n  difference in days between start of Value and end of Value\n\n/*returns list of all locations within an encounter, including locations for immediately prior ED visit.*/\ndefine function \"HospitalizationLocations\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet EDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn if EDVisit is null then Visit.facilityLocations \n  \t\telse flatten { EDVisit.facilityLocations, Visit.facilityLocations }\n\n/*Returns the arrival time in the ED for the encounter.*/\ndefine function \"EmergencyDepartmentArrivalTime\"(Encounter \"Encounter, Performed\" ):\n  start of First((\"HospitalizationLocations\"(Encounter))HospitalLocation\n  \t\twhere HospitalLocation.code in \"Emergency Department Visit\"\n  \t\tsort by start of locationPeriod\n  ).locationPeriod\n\n/*Returns admission time for an encounter or for immediately prior emergency department visit.*/\ndefine function \"HospitalAdmissionTime\"(Encounter \"Encounter, Performed\" ):\n  start of \"Hospitalization\"(Encounter)\n\n/*Returns earliest arrival time for an encounter including any prior ED visit.*/\ndefine function \"HospitalArrivalTime\"(Encounter \"Encounter, Performed\" ):\n  start of First((\"HospitalizationLocations\"(Encounter))HospitalLocation\n  \t\tsort by start of locationPeriod\n  ).locationPeriod\n\n/*Hospitalization returns the total interval for admission to discharge for the given encounter, or for the admission of any immediately prior emergency department visit to the discharge of the given encounter.*/\ndefine function \"Hospitalization\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet EDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn Interval[Coalesce(start of EDVisit.relevantPeriod, start of Visit.relevantPeriod), \n  \tend of Visit.relevantPeriod]\n\n/*Returns the length of stay in days (i.e. the number of days between admission and discharge) for the given encounter, or from the admission of any immediately prior emergency department visit to the discharge of the encounter*/\ndefine function \"HospitalizationLengthofStay\"(Encounter \"Encounter, Performed\" ):\n  LengthInDays(\"Hospitalization\"(Encounter))\n\n/*Returns the latest departure time for encounter including any prior ED visit.*/\ndefine function \"HospitalDepartureTime\"(Encounter \"Encounter, Performed\" ):\n  end of Last((\"HospitalizationLocations\"(Encounter))HospitalLocation\n  \t\tsort by start of locationPeriod\n  ).locationPeriod\n\n/*Hospital Discharge Time returns the discharge time for an encounter*/\ndefine function \"HospitalDischargeTime\"(Encounter \"Encounter, Performed\" ):\n  end of Encounter.relevantPeriod\n\n/*Hospitalization with Observation and Outpatient Surgery Service returns the total interval from the start of any immediately prior emergency department visit, outpatient surgery visit or observation visit to the discharge of the given encounter.*/\ndefine function \"HospitalizationWithObservationAndOutpatientSurgeryService\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet ObsVisit: Last([\"Encounter, Performed\": \"Observation Services\"] LastObs\n  \t\t\twhere LastObs.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t),\n  \tVisitStart: Coalesce(start of ObsVisit.relevantPeriod, start of Visit.relevantPeriod),\n  \tEDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before VisitStart\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t),\n  \tVisitStartWithED: Coalesce(start of EDVisit.relevantPeriod, VisitStart),\n  \tOutpatientSurgeryVisit: Last([\"Encounter, Performed\": \"Outpatient Surgery Service\"] LastSurgeryOP\n  \t\t\twhere LastSurgeryOP.relevantPeriod ends 1 hour or less on or before VisitStartWithED\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn Interval[Coalesce(start of OutpatientSurgeryVisit.relevantPeriod, VisitStartWithED), \n  \tend of Visit.relevantPeriod]\n\n/*Hospitalization with Observation returns the total interval from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\ndefine function \"HospitalizationWithObservation\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet ObsVisit: Last([\"Encounter, Performed\": \"Observation Services\"] LastObs\n  \t\t\twhere LastObs.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t),\n  \tVisitStart: Coalesce(start of ObsVisit.relevantPeriod, start of Visit.relevantPeriod),\n  \tEDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before VisitStart\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn Interval[Coalesce(start of EDVisit.relevantPeriod, VisitStart), \n  \tend of Visit.relevantPeriod]\n\n/*Hospitalization with Observation Length of Stay returns the length in days from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\ndefine function \"HospitalizationWithObservationLengthofStay\"(Encounter \"Encounter, Performed\" ):\n  \"LengthInDays\"(\"HospitalizationWithObservation\"(Encounter))\n\n/*First Inpatient Intensive Care Unit returns the first intensive care unit for the given encounter, without considering any immediately prior emergency department visit.*/\ndefine function \"FirstInpatientIntensiveCareUnit\"(Encounter \"Encounter, Performed\" ):\n  First((Encounter.facilityLocations)HospitalLocation\n      where HospitalLocation.code in \"Intensive Care Unit\"\n        and HospitalLocation.locationPeriod during Encounter.relevantPeriod\n      sort by start of locationPeriod\n  )\n\n/*Given a datetime and a period, returns the period (if a period is provided) or the interval beginning and ending on the datetime (if a datetime is provided)*/\ndefine function \"NormalizeInterval\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  if pointInTime is not null then Interval[pointInTime, pointInTime]\n    else if period is not null then period \n    else null as Interval\u003cDateTime\u003e\n\n/*Given an interval, return true if the interval has a starting boundary specified (i.e. the start of the interval is not null and not the minimum DateTime value)*/\ndefine function \"HasStart\"(period Interval\u003cDateTime\u003e ):\n  not ( start of period is null\n      or start of period = minimum DateTime\n  )\n\n/*Given an interval, return true if the interval has an ending boundary specified (i.e. the end of the interval is not null and not the maximum DateTime value)*/\ndefine function \"HasEnd\"(period Interval\u003cDateTime\u003e ):\n  not ( \n    end of period is null\n      or \n      end of period = maximum DateTime\n  )\n\n/*Given an interval, return the ending point if the interval has an ending boundary specified, otherwise, return the starting point*/\ndefine function \"Latest\"(period Interval\u003cDateTime\u003e ):\n  if ( HasEnd(period)) then \n  end of period \n    else start of period\n\n/*Given an interval, return the starting point if the interval has a starting boundary specified, otherwise, return the ending point*/\ndefine function \"Earliest\"(period Interval\u003cDateTime\u003e ):\n  if ( HasStart(period)) then start of period \n    else \n  end of period\n\n/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the ending point of the period if the period has an ending boundary specified, otherwise returns the starting point of the interval*/\ndefine function \"LatestOf\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  Latest(NormalizeInterval(pointInTime, period))\n\n/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the starting point of the period if the period has a starting boundary specified, otherwise returns the ending point of the period*/\ndefine function \"EarliestOf\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  Earliest(NormalizeInterval(pointInTime, period))\n\n","elm":{"library":{"annotation":[{"translatorOptions":"EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion,DisableMethodInvocation","type":"CqlToElmInfo"},{"type":"Annotation","s":{"r":"395","s":[{"value":["","library MATGlobalCommonFunctionsQDM version '8.0.000'"]}]}}],"identifier":{"id":"MATGlobalCommonFunctionsQDM","version":"8.0.000"},"schemaIdentifier":{"id":"urn:hl7-org:elm","version":"r1"},"usings":{"def":[{"localIdentifier":"System","uri":"urn:hl7-org:elm-types:r1"},{"localId":"1","locator":"5:1-5:23","localIdentifier":"QDM","uri":"urn:healthit-gov:qdm:v5_6","version":"5.6","annotation":[{"type":"Annotation","s":{"r":"1","s":[{"value":["/*1. Upversion to 8.0.000 to support 2024 AU efforts.  No content changes were made from version 7.2.000 to this version 8.0.000*/\n","using "]},{"s":[{"value":["QDM"]}]},{"value":[" version ","'5.6'"]}]}}]}]},"parameters":{"def":[{"localId":"9","locator":"13:1-13:49","name":"Measurement Period","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"9","s":[{"value":["","parameter ","\"Measurement Period\""," "]},{"r":"8","s":[{"value":["Interval\u003c"]},{"r":"7","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}}],"parameterTypeSpecifier":{"localId":"8","locator":"13:32-13:49","type":"IntervalTypeSpecifier","pointType":{"localId":"7","locator":"13:41-13:48","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},"valueSets":{"def":[{"localId":"2","locator":"7:1-7:82","name":"Emergency Department Visit","id":"2.16.840.1.113883.3.117.1.7.1.292","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"2","s":[{"value":["","valueset ","\"Emergency Department Visit\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.292'"]}]}}]},{"localId":"3","locator":"8:1-8:71","name":"Encounter Inpatient","id":"2.16.840.1.113883.3.666.5.307","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"3","s":[{"value":["","valueset ","\"Encounter Inpatient\"",": ","'urn:oid:2.16.840.1.113883.3.666.5.307'"]}]}}]},{"localId":"4","locator":"9:1-9:72","name":"Intensive Care Unit","id":"2.16.840.1.113762.1.4.1029.206","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"4","s":[{"value":["","valueset ","\"Intensive Care Unit\"",": ","'urn:oid:2.16.840.1.113762.1.4.1029.206'"]}]}}]},{"localId":"5","locator":"10:1-10:73","name":"Observation Services","id":"2.16.840.1.113762.1.4.1111.143","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"5","s":[{"value":["","valueset ","\"Observation Services\"",": ","'urn:oid:2.16.840.1.113762.1.4.1111.143'"]}]}}]},{"localId":"6","locator":"11:1-11:78","name":"Outpatient Surgery Service","id":"2.16.840.1.113762.1.4.1110.38","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"6","s":[{"value":["","valueset ","\"Outpatient Surgery Service\"",": ","'urn:oid:2.16.840.1.113762.1.4.1110.38'"]}]}}]}]},"contexts":{"def":[{"locator":"15:1-15:15","name":"Patient"}]},"statements":{"def":[{"locator":"15:1-15:15","name":"Patient","context":"Patient","expression":{"type":"SingletonFrom","operand":{"locator":"15:1-15:15","dataType":"{urn:healthit-gov:qdm:v5_6}Patient","templateId":"Patient","type":"Retrieve"}}},{"localId":"11","locator":"17:1-18:56","name":"ED Encounter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"11","s":[{"value":["","define ","\"ED Encounter\"",":\n  "]},{"r":"10","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"10","locator":"18:3-18:56","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"18:28-18:55","name":"Emergency Department Visit","preserve":true,"type":"ValueSetRef"}}},{"localId":"19","locator":"20:1-22:83","name":"Inpatient Encounter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"19","s":[{"value":["","define ","\"Inpatient Encounter\"",":\n  "]},{"r":"18","s":[{"s":[{"r":"13","s":[{"r":"12","s":[{"r":"12","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Encounter Inpatient\""]}]},{"value":["]"]}]}]},{"value":[" ","EncounterInpatient"]}]}]},{"value":["\n    "]},{"r":"17","s":[{"value":["where "]},{"r":"17","s":[{"r":"15","s":[{"r":"14","s":[{"value":["EncounterInpatient"]}]},{"value":["."]},{"r":"15","s":[{"value":["relevantPeriod"]}]}]},{"r":"17","value":[" ","ends during day of"," "]},{"r":"16","s":[{"value":["\"Measurement Period\""]}]}]}]}]}]}}],"expression":{"localId":"18","locator":"21:3-22:83","type":"Query","source":[{"localId":"13","locator":"21:3-21:68","alias":"EncounterInpatient","expression":{"localId":"12","locator":"21:3-21:49","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"21:28-21:48","name":"Encounter Inpatient","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"17","locator":"22:5-22:83","precision":"Day","type":"In","operand":[{"locator":"22:45-22:48","type":"End","operand":{"localId":"15","locator":"22:11-22:43","path":"relevantPeriod","scope":"EncounterInpatient","type":"Property"}},{"localId":"16","locator":"22:64-22:83","name":"Measurement Period","type":"ParameterRef"}]}}},{"localId":"29","locator":"29:1-30:62","name":"ToDateInterval","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","t":[{"name":"description","value":"Returns an interval of date values extracted from the input interval of date-time values"},{"name":"description","value":"Returns an interval of date values extracted from the input interval of date-time values"},{"name":"comment","value":"This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability."}],"s":{"r":"29","s":[{"value":["/*@description: Returns an interval of date values extracted from the input interval of date-time values\n@comment: This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability.*/\n","define function ","\"ToDateInterval\"","(","period"," "]},{"r":"21","s":[{"value":["Interval\u003c"]},{"r":"20","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"28","s":[{"r":"28","s":[{"value":["Interval["]},{"r":"24","s":[{"value":["date from "]},{"r":"23","s":[{"value":["start of "]},{"r":"22","s":[{"value":["period"]}]}]}]},{"value":[", "]},{"r":"27","s":[{"value":["date from "]},{"r":"26","s":[{"value":["end of "]},{"r":"25","s":[{"value":["period"]}]}]}]},{"value":["]"]}]}]}]}}],"expression":{"localId":"28","locator":"30:3-30:62","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"24","locator":"30:12-30:36","type":"DateFrom","operand":{"localId":"23","locator":"30:22-30:36","type":"Start","operand":{"localId":"22","locator":"30:31-30:36","name":"period","type":"OperandRef"}}},"high":{"localId":"27","locator":"30:39-30:61","type":"DateFrom","operand":{"localId":"26","locator":"30:49-30:61","type":"End","operand":{"localId":"25","locator":"30:56-30:61","name":"period","type":"OperandRef"}}}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"21","locator":"29:41-29:58","type":"IntervalTypeSpecifier","pointType":{"localId":"20","locator":"29:50-29:57","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"37","locator":"33:1-34:60","name":"LengthInDays","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"37","s":[{"value":["/*calculates the difference in calendar days between the start and end of the given interval.*/\n","define function ","\"LengthInDays\"","(","Value"," "]},{"r":"31","s":[{"value":["Interval\u003c"]},{"r":"30","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"36","s":[{"r":"36","s":[{"value":["difference in days between "]},{"r":"33","s":[{"value":["start of "]},{"r":"32","s":[{"value":["Value"]}]}]},{"value":[" and "]},{"r":"35","s":[{"value":["end of "]},{"r":"34","s":[{"value":["Value"]}]}]}]}]}]}}],"expression":{"localId":"36","locator":"34:3-34:60","precision":"Day","type":"DifferenceBetween","operand":[{"localId":"33","locator":"34:30-34:43","type":"Start","operand":{"localId":"32","locator":"34:39-34:43","name":"Value","type":"OperandRef"}},{"localId":"35","locator":"34:49-34:60","type":"End","operand":{"localId":"34","locator":"34:56-34:60","name":"Value","type":"OperandRef"}}]},"operand":[{"name":"Value","operandTypeSpecifier":{"localId":"31","locator":"33:38-33:55","type":"IntervalTypeSpecifier","pointType":{"localId":"30","locator":"33:47-33:54","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"70","locator":"37:1-45:71","name":"HospitalizationLocations","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"70","s":[{"value":["/*returns list of all locations within an encounter, including locations for immediately prior ED visit.*/\n","define function ","\"HospitalizationLocations\"","(","Encounter"," "]},{"r":"38","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"69","s":[{"r":"69","s":[{"s":[{"r":"40","s":[{"r":"39","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"56","s":[{"value":["EDVisit",": "]},{"r":"55","s":[{"value":["Last","("]},{"r":"54","s":[{"s":[{"r":"42","s":[{"r":"41","s":[{"r":"41","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"49","s":[{"value":["where "]},{"r":"49","s":[{"r":"44","s":[{"r":"43","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"44","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"49","s":[{"value":["ends "]},{"r":"48","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"47","s":[{"value":["start of "]},{"r":"46","s":[{"r":"45","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"46","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"53","s":[{"value":["sort by \n  \t\t\t"]},{"r":"52","s":[{"r":"51","s":[{"value":["end of "]},{"r":"50","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"68","s":[{"value":["return "]},{"r":"67","s":[{"value":["if "]},{"r":"58","s":[{"r":"57","s":[{"value":["EDVisit"]}]},{"value":[" is null"]}]},{"value":[" then "]},{"r":"60","s":[{"r":"59","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"60","s":[{"value":["facilityLocations"]}]}]},{"value":[" \n  \t\telse "]},{"r":"66","s":[{"value":["flatten "]},{"r":"65","s":[{"value":["{ "]},{"r":"62","s":[{"r":"61","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"62","s":[{"value":["facilityLocations"]}]}]},{"value":[", "]},{"r":"64","s":[{"r":"63","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"64","s":[{"value":["facilityLocations"]}]}]},{"value":[" }"]}]}]}]}]}]}]}]}}],"expression":{"localId":"69","locator":"38:3-45:71","type":"Query","source":[{"localId":"40","locator":"38:3-38:17","alias":"Visit","expression":{"localId":"39","locator":"38:3-38:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"56","locator":"39:8-43:4","identifier":"EDVisit","expression":{"localId":"55","locator":"39:17-43:4","type":"Last","source":{"localId":"54","locator":"39:22-42:26","type":"Query","source":[{"localId":"42","locator":"39:22-39:82","alias":"LastED","expression":{"localId":"41","locator":"39:22-39:75","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"39:47-39:74","name":"Emergency Department Visit","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"49","locator":"40:6-40:95","type":"And","operand":[{"locator":"40:39-40:52","type":"In","operand":[{"locator":"40:34-40:37","type":"End","operand":{"localId":"44","locator":"40:12-40:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"40:39-40:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"40:67-40:95","type":"Subtract","operand":[{"localId":"47","locator":"40:67-40:95","type":"Start","operand":{"localId":"46","locator":"40:76-40:95","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"48","locator":"40:39-40:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"47","locator":"40:67-40:95","type":"Start","operand":{"localId":"46","locator":"40:76-40:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"40:39-40:52","type":"Not","operand":{"locator":"40:39-40:52","type":"IsNull","operand":{"localId":"47","locator":"40:67-40:95","type":"Start","operand":{"localId":"46","locator":"40:76-40:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"53","locator":"41:6-42:26","by":[{"localId":"52","locator":"42:6-42:26","direction":"asc","type":"ByExpression","expression":{"localId":"51","locator":"42:6-42:26","type":"End","operand":{"localId":"50","locator":"42:13-42:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"68","locator":"44:4-45:71","expression":{"localId":"67","locator":"44:11-45:71","type":"If","condition":{"localId":"58","locator":"44:14-44:28","type":"IsNull","operand":{"localId":"57","locator":"44:14-44:20","name":"EDVisit","type":"QueryLetRef"}},"then":{"localId":"60","locator":"44:35-44:57","path":"facilityLocations","scope":"Visit","type":"Property"},"else":{"localId":"66","locator":"45:10-45:71","type":"Flatten","operand":{"localId":"65","locator":"45:18-45:71","type":"List","element":[{"localId":"62","locator":"45:20-45:44","path":"facilityLocations","type":"Property","source":{"localId":"61","locator":"45:20-45:26","name":"EDVisit","type":"QueryLetRef"}},{"localId":"64","locator":"45:47-45:69","path":"facilityLocations","scope":"Visit","type":"Property"}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"38","locator":"37:54-37:75","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"87","locator":"48:1-52:18","name":"EmergencyDepartmentArrivalTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"87","s":[{"value":["/*Returns the arrival time in the ED for the encounter.*/\n","define function ","\"EmergencyDepartmentArrivalTime\"","(","Encounter"," "]},{"r":"71","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"86","s":[{"r":"86","s":[{"value":["start of "]},{"r":"85","s":[{"r":"84","s":[{"value":["First","("]},{"r":"83","s":[{"s":[{"r":"74","s":[{"r":"73","s":[{"value":["("]},{"r":"73","s":[{"value":["\"HospitalizationLocations\"","("]},{"r":"72","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n  \t\t"]},{"r":"78","s":[{"value":["where "]},{"r":"78","s":[{"r":"76","s":[{"r":"75","s":[{"value":["HospitalLocation"]}]},{"value":["."]},{"r":"76","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"77","s":[{"value":["\"Emergency Department Visit\""]}]}]}]},{"value":["\n  \t\t"]},{"r":"82","s":[{"value":["sort by "]},{"r":"81","s":[{"r":"80","s":[{"value":["start of "]},{"r":"79","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"85","s":[{"value":["locationPeriod"]}]}]}]}]}]}}],"expression":{"localId":"86","locator":"49:3-52:18","type":"Start","operand":{"localId":"85","locator":"49:12-52:18","path":"locationPeriod","type":"Property","source":{"localId":"84","locator":"49:12-52:3","type":"First","source":{"localId":"83","locator":"49:18-51:35","type":"Query","source":[{"localId":"74","locator":"49:18-49:72","alias":"HospitalLocation","expression":{"localId":"73","locator":"49:18-49:56","name":"HospitalizationLocations","type":"FunctionRef","operand":[{"localId":"72","locator":"49:46-49:54","name":"Encounter","type":"OperandRef"}]}}],"relationship":[],"where":{"localId":"78","locator":"50:5-50:63","type":"InValueSet","code":{"localId":"76","locator":"50:11-50:31","path":"code","scope":"HospitalLocation","type":"Property"},"valueset":{"localId":"77","locator":"50:36-50:63","name":"Emergency Department Visit","preserve":true}},"sort":{"localId":"82","locator":"51:5-51:35","by":[{"localId":"81","locator":"51:13-51:35","direction":"asc","type":"ByExpression","expression":{"localId":"80","locator":"51:13-51:35","type":"Start","operand":{"localId":"79","locator":"51:22-51:35","name":"locationPeriod","type":"IdentifierRef"}}}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"71","locator":"48:60-48:81","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"122","locator":"65:1-73:31","name":"Hospitalization","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"122","s":[{"value":["/*Hospitalization returns the total interval for admission to discharge for the given encounter, or for the admission of any immediately prior emergency department visit to the discharge of the given encounter.*/\n","define function ","\"Hospitalization\"","(","Encounter"," "]},{"r":"90","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"121","s":[{"r":"121","s":[{"s":[{"r":"92","s":[{"r":"91","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"108","s":[{"value":["EDVisit",": "]},{"r":"107","s":[{"value":["Last","("]},{"r":"106","s":[{"s":[{"r":"94","s":[{"r":"93","s":[{"r":"93","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"101","s":[{"value":["where "]},{"r":"101","s":[{"r":"96","s":[{"r":"95","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"96","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"101","s":[{"value":["ends "]},{"r":"100","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"99","s":[{"value":["start of "]},{"r":"98","s":[{"r":"97","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"98","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"105","s":[{"value":["sort by \n  \t\t\t"]},{"r":"104","s":[{"r":"103","s":[{"value":["end of "]},{"r":"102","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"120","s":[{"value":["return "]},{"r":"119","s":[{"value":["Interval["]},{"r":"115","s":[{"value":["Coalesce","("]},{"r":"111","s":[{"value":["start of "]},{"r":"110","s":[{"r":"109","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"110","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"114","s":[{"value":["start of "]},{"r":"113","s":[{"r":"112","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"113","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]},{"value":[", \n  \t"]},{"r":"118","s":[{"value":["end of "]},{"r":"117","s":[{"r":"116","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"117","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["]"]}]}]}]}]}]}}],"expression":{"localId":"121","locator":"66:3-73:31","type":"Query","source":[{"localId":"92","locator":"66:3-66:17","alias":"Visit","expression":{"localId":"91","locator":"66:3-66:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"108","locator":"67:8-71:4","identifier":"EDVisit","expression":{"localId":"107","locator":"67:17-71:4","type":"Last","source":{"localId":"106","locator":"67:22-70:26","type":"Query","source":[{"localId":"94","locator":"67:22-67:82","alias":"LastED","expression":{"localId":"93","locator":"67:22-67:75","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"67:47-67:74","name":"Emergency Department Visit","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"101","locator":"68:6-68:95","type":"And","operand":[{"locator":"68:39-68:52","type":"In","operand":[{"locator":"68:34-68:37","type":"End","operand":{"localId":"96","locator":"68:12-68:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"68:39-68:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"68:67-68:95","type":"Subtract","operand":[{"localId":"99","locator":"68:67-68:95","type":"Start","operand":{"localId":"98","locator":"68:76-68:95","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"100","locator":"68:39-68:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"99","locator":"68:67-68:95","type":"Start","operand":{"localId":"98","locator":"68:76-68:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"68:39-68:52","type":"Not","operand":{"locator":"68:39-68:52","type":"IsNull","operand":{"localId":"99","locator":"68:67-68:95","type":"Start","operand":{"localId":"98","locator":"68:76-68:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"105","locator":"69:6-70:26","by":[{"localId":"104","locator":"70:6-70:26","direction":"asc","type":"ByExpression","expression":{"localId":"103","locator":"70:6-70:26","type":"End","operand":{"localId":"102","locator":"70:13-70:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"120","locator":"72:4-73:31","expression":{"localId":"119","locator":"72:11-73:31","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"115","locator":"72:20-72:91","type":"Coalesce","operand":[{"localId":"111","locator":"72:29-72:59","type":"Start","operand":{"localId":"110","locator":"72:38-72:59","path":"relevantPeriod","type":"Property","source":{"localId":"109","locator":"72:38-72:44","name":"EDVisit","type":"QueryLetRef"}}},{"localId":"114","locator":"72:62-72:90","type":"Start","operand":{"localId":"113","locator":"72:71-72:90","path":"relevantPeriod","scope":"Visit","type":"Property"}}]},"high":{"localId":"118","locator":"73:4-73:30","type":"End","operand":{"localId":"117","locator":"73:11-73:30","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"90","locator":"65:45-65:66","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"125","locator":"55:1-56:39","name":"HospitalAdmissionTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"125","s":[{"value":["/*Returns admission time for an encounter or for immediately prior emergency department visit.*/\n","define function ","\"HospitalAdmissionTime\"","(","Encounter"," "]},{"r":"88","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"124","s":[{"r":"124","s":[{"value":["start of "]},{"r":"123","s":[{"value":["\"Hospitalization\"","("]},{"r":"89","s":[{"value":["Encounter"]}]},{"value":[")"]}]}]}]}]}}],"expression":{"localId":"124","locator":"56:3-56:39","type":"Start","operand":{"localId":"123","locator":"56:12-56:39","name":"Hospitalization","type":"FunctionRef","operand":[{"localId":"89","locator":"56:30-56:38","name":"Encounter","type":"OperandRef"}]}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"88","locator":"55:51-55:72","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"138","locator":"59:1-62:18","name":"HospitalArrivalTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"138","s":[{"value":["/*Returns earliest arrival time for an encounter including any prior ED visit.*/\n","define function ","\"HospitalArrivalTime\"","(","Encounter"," "]},{"r":"126","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"137","s":[{"r":"137","s":[{"value":["start of "]},{"r":"136","s":[{"r":"135","s":[{"value":["First","("]},{"r":"134","s":[{"s":[{"r":"129","s":[{"r":"128","s":[{"value":["("]},{"r":"128","s":[{"value":["\"HospitalizationLocations\"","("]},{"r":"127","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n  \t\t"]},{"r":"133","s":[{"value":["sort by "]},{"r":"132","s":[{"r":"131","s":[{"value":["start of "]},{"r":"130","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"136","s":[{"value":["locationPeriod"]}]}]}]}]}]}}],"expression":{"localId":"137","locator":"60:3-62:18","type":"Start","operand":{"localId":"136","locator":"60:12-62:18","path":"locationPeriod","type":"Property","source":{"localId":"135","locator":"60:12-62:3","type":"First","source":{"localId":"134","locator":"60:18-61:35","type":"Query","source":[{"localId":"129","locator":"60:18-60:72","alias":"HospitalLocation","expression":{"localId":"128","locator":"60:18-60:56","name":"HospitalizationLocations","type":"FunctionRef","operand":[{"localId":"127","locator":"60:46-60:54","name":"Encounter","type":"OperandRef"}]}}],"relationship":[],"sort":{"localId":"133","locator":"61:5-61:35","by":[{"localId":"132","locator":"61:13-61:35","direction":"asc","type":"ByExpression","expression":{"localId":"131","locator":"61:13-61:35","type":"Start","operand":{"localId":"130","locator":"61:22-61:35","name":"locationPeriod","type":"IdentifierRef"}}}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"126","locator":"59:49-59:70","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"145","locator":"76:1-77:44","name":"HospitalizationLengthofStay","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"145","s":[{"value":["/*Returns the length of stay in days (i.e. the number of days between admission and discharge) for the given encounter, or from the admission of any immediately prior emergency department visit to the discharge of the encounter*/\n","define function ","\"HospitalizationLengthofStay\"","(","Encounter"," "]},{"r":"141","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"144","s":[{"r":"144","s":[{"value":["LengthInDays","("]},{"r":"143","s":[{"value":["\"Hospitalization\"","("]},{"r":"142","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"144","locator":"77:3-77:44","name":"LengthInDays","type":"FunctionRef","operand":[{"localId":"143","locator":"77:16-77:43","name":"Hospitalization","type":"FunctionRef","operand":[{"localId":"142","locator":"77:34-77:42","name":"Encounter","type":"OperandRef"}]}]},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"141","locator":"76:57-76:78","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"158","locator":"80:1-83:18","name":"HospitalDepartureTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"158","s":[{"value":["/*Returns the latest departure time for encounter including any prior ED visit.*/\n","define function ","\"HospitalDepartureTime\"","(","Encounter"," "]},{"r":"146","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"157","s":[{"r":"157","s":[{"value":["end of "]},{"r":"156","s":[{"r":"155","s":[{"value":["Last","("]},{"r":"154","s":[{"s":[{"r":"149","s":[{"r":"148","s":[{"value":["("]},{"r":"148","s":[{"value":["\"HospitalizationLocations\"","("]},{"r":"147","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n  \t\t"]},{"r":"153","s":[{"value":["sort by "]},{"r":"152","s":[{"r":"151","s":[{"value":["start of "]},{"r":"150","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"156","s":[{"value":["locationPeriod"]}]}]}]}]}]}}],"expression":{"localId":"157","locator":"81:3-83:18","type":"End","operand":{"localId":"156","locator":"81:10-83:18","path":"locationPeriod","type":"Property","source":{"localId":"155","locator":"81:10-83:3","type":"Last","source":{"localId":"154","locator":"81:15-82:35","type":"Query","source":[{"localId":"149","locator":"81:15-81:69","alias":"HospitalLocation","expression":{"localId":"148","locator":"81:15-81:53","name":"HospitalizationLocations","type":"FunctionRef","operand":[{"localId":"147","locator":"81:43-81:51","name":"Encounter","type":"OperandRef"}]}}],"relationship":[],"sort":{"localId":"153","locator":"82:5-82:35","by":[{"localId":"152","locator":"82:13-82:35","direction":"asc","type":"ByExpression","expression":{"localId":"151","locator":"82:13-82:35","type":"Start","operand":{"localId":"150","locator":"82:22-82:35","name":"locationPeriod","type":"IdentifierRef"}}}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"146","locator":"80:51-80:72","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"163","locator":"86:1-87:33","name":"HospitalDischargeTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"163","s":[{"value":["/*Hospital Discharge Time returns the discharge time for an encounter*/\n","define function ","\"HospitalDischargeTime\"","(","Encounter"," "]},{"r":"159","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"162","s":[{"r":"162","s":[{"value":["end of "]},{"r":"161","s":[{"r":"160","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"161","s":[{"value":["relevantPeriod"]}]}]}]}]}]}}],"expression":{"localId":"162","locator":"87:3-87:33","type":"End","operand":{"localId":"161","locator":"87:10-87:33","path":"relevantPeriod","type":"Property","source":{"localId":"160","locator":"87:10-87:18","name":"Encounter","type":"OperandRef"}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"159","locator":"86:51-86:72","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"236","locator":"90:1-110:31","name":"HospitalizationWithObservationAndOutpatientSurgeryService","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"236","s":[{"value":["/*Hospitalization with Observation and Outpatient Surgery Service returns the total interval from the start of any immediately prior emergency department visit, outpatient surgery visit or observation visit to the discharge of the given encounter.*/\n","define function ","\"HospitalizationWithObservationAndOutpatientSurgeryService\"","(","Encounter"," "]},{"r":"164","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"235","s":[{"r":"235","s":[{"s":[{"r":"166","s":[{"r":"165","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"182","s":[{"value":["ObsVisit",": "]},{"r":"181","s":[{"value":["Last","("]},{"r":"180","s":[{"s":[{"r":"168","s":[{"r":"167","s":[{"r":"167","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Observation Services\""]}]},{"value":["]"]}]}]},{"value":[" ","LastObs"]}]}]},{"value":["\n  \t\t\t"]},{"r":"175","s":[{"value":["where "]},{"r":"175","s":[{"r":"170","s":[{"r":"169","s":[{"value":["LastObs"]}]},{"value":["."]},{"r":"170","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"175","s":[{"value":["ends "]},{"r":"174","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"173","s":[{"value":["start of "]},{"r":"172","s":[{"r":"171","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"172","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"179","s":[{"value":["sort by \n  \t\t\t"]},{"r":"178","s":[{"r":"177","s":[{"value":["end of "]},{"r":"176","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]},{"value":[",\n  \t"]},{"r":"190","s":[{"value":["VisitStart",": "]},{"r":"189","s":[{"value":["Coalesce","("]},{"r":"185","s":[{"value":["start of "]},{"r":"184","s":[{"r":"183","s":[{"value":["ObsVisit"]}]},{"value":["."]},{"r":"184","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"188","s":[{"value":["start of "]},{"r":"187","s":[{"r":"186","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"187","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]}]},{"value":[",\n  \t"]},{"r":"204","s":[{"value":["EDVisit",": "]},{"r":"203","s":[{"value":["Last","("]},{"r":"202","s":[{"s":[{"r":"192","s":[{"r":"191","s":[{"r":"191","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"197","s":[{"value":["where "]},{"r":"197","s":[{"r":"194","s":[{"r":"193","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"194","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"197","s":[{"value":["ends "]},{"r":"196","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"195","s":[{"value":["VisitStart"]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"201","s":[{"value":["sort by \n  \t\t\t"]},{"r":"200","s":[{"r":"199","s":[{"value":["end of "]},{"r":"198","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]},{"value":[",\n  \t"]},{"r":"210","s":[{"value":["VisitStartWithED",": "]},{"r":"209","s":[{"value":["Coalesce","("]},{"r":"207","s":[{"value":["start of "]},{"r":"206","s":[{"r":"205","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"206","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"208","s":[{"value":["VisitStart"]}]},{"value":[")"]}]}]},{"value":[",\n  \t"]},{"r":"224","s":[{"value":["OutpatientSurgeryVisit",": "]},{"r":"223","s":[{"value":["Last","("]},{"r":"222","s":[{"s":[{"r":"212","s":[{"r":"211","s":[{"r":"211","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Outpatient Surgery Service\""]}]},{"value":["]"]}]}]},{"value":[" ","LastSurgeryOP"]}]}]},{"value":["\n  \t\t\t"]},{"r":"217","s":[{"value":["where "]},{"r":"217","s":[{"r":"214","s":[{"r":"213","s":[{"value":["LastSurgeryOP"]}]},{"value":["."]},{"r":"214","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"217","s":[{"value":["ends "]},{"r":"216","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"215","s":[{"value":["VisitStartWithED"]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"221","s":[{"value":["sort by \n  \t\t\t"]},{"r":"220","s":[{"r":"219","s":[{"value":["end of "]},{"r":"218","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"234","s":[{"value":["return "]},{"r":"233","s":[{"value":["Interval["]},{"r":"229","s":[{"value":["Coalesce","("]},{"r":"227","s":[{"value":["start of "]},{"r":"226","s":[{"r":"225","s":[{"value":["OutpatientSurgeryVisit"]}]},{"value":["."]},{"r":"226","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"228","s":[{"value":["VisitStartWithED"]}]},{"value":[")"]}]},{"value":[", \n  \t"]},{"r":"232","s":[{"value":["end of "]},{"r":"231","s":[{"r":"230","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"231","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["]"]}]}]}]}]}]}}],"expression":{"localId":"235","locator":"91:3-110:31","type":"Query","source":[{"localId":"166","locator":"91:3-91:17","alias":"Visit","expression":{"localId":"165","locator":"91:3-91:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"182","locator":"92:8-96:4","identifier":"ObsVisit","expression":{"localId":"181","locator":"92:18-96:4","type":"Last","source":{"localId":"180","locator":"92:23-95:26","type":"Query","source":[{"localId":"168","locator":"92:23-92:78","alias":"LastObs","expression":{"localId":"167","locator":"92:23-92:70","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"92:48-92:69","name":"Observation Services","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"175","locator":"93:6-93:96","type":"And","operand":[{"locator":"93:40-93:53","type":"In","operand":[{"locator":"93:35-93:38","type":"End","operand":{"localId":"170","locator":"93:12-93:33","path":"relevantPeriod","scope":"LastObs","type":"Property"}},{"locator":"93:40-93:53","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"93:68-93:96","type":"Subtract","operand":[{"localId":"173","locator":"93:68-93:96","type":"Start","operand":{"localId":"172","locator":"93:77-93:96","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"174","locator":"93:40-93:45","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"173","locator":"93:68-93:96","type":"Start","operand":{"localId":"172","locator":"93:77-93:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"93:40-93:53","type":"Not","operand":{"locator":"93:40-93:53","type":"IsNull","operand":{"localId":"173","locator":"93:68-93:96","type":"Start","operand":{"localId":"172","locator":"93:77-93:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"179","locator":"94:6-95:26","by":[{"localId":"178","locator":"95:6-95:26","direction":"asc","type":"ByExpression","expression":{"localId":"177","locator":"95:6-95:26","type":"End","operand":{"localId":"176","locator":"95:13-95:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}},{"localId":"190","locator":"97:4-97:88","identifier":"VisitStart","expression":{"localId":"189","locator":"97:16-97:88","type":"Coalesce","operand":[{"localId":"185","locator":"97:25-97:56","type":"Start","operand":{"localId":"184","locator":"97:34-97:56","path":"relevantPeriod","type":"Property","source":{"localId":"183","locator":"97:34-97:41","name":"ObsVisit","type":"QueryLetRef"}}},{"localId":"188","locator":"97:59-97:87","type":"Start","operand":{"localId":"187","locator":"97:68-97:87","path":"relevantPeriod","scope":"Visit","type":"Property"}}]}},{"localId":"204","locator":"98:4-102:4","identifier":"EDVisit","expression":{"localId":"203","locator":"98:13-102:4","type":"Last","source":{"localId":"202","locator":"98:18-101:26","type":"Query","source":[{"localId":"192","locator":"98:18-98:78","alias":"LastED","expression":{"localId":"191","locator":"98:18-98:71","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"98:43-98:70","name":"Emergency Department Visit","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"197","locator":"99:6-99:76","type":"And","operand":[{"locator":"99:39-99:52","type":"In","operand":[{"locator":"99:34-99:37","type":"End","operand":{"localId":"194","locator":"99:12-99:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"99:39-99:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"99:67-99:76","type":"Subtract","operand":[{"localId":"195","locator":"99:67-99:76","name":"VisitStart","type":"QueryLetRef"},{"localId":"196","locator":"99:39-99:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"195","locator":"99:67-99:76","name":"VisitStart","type":"QueryLetRef"}}]},{"locator":"99:39-99:52","type":"Not","operand":{"locator":"99:39-99:52","type":"IsNull","operand":{"localId":"195","locator":"99:67-99:76","name":"VisitStart","type":"QueryLetRef"}}}]},"sort":{"localId":"201","locator":"100:6-101:26","by":[{"localId":"200","locator":"101:6-101:26","direction":"asc","type":"ByExpression","expression":{"localId":"199","locator":"101:6-101:26","type":"End","operand":{"localId":"198","locator":"101:13-101:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}},{"localId":"210","locator":"103:4-103:74","identifier":"VisitStartWithED","expression":{"localId":"209","locator":"103:22-103:74","type":"Coalesce","operand":[{"localId":"207","locator":"103:31-103:61","type":"Start","operand":{"localId":"206","locator":"103:40-103:61","path":"relevantPeriod","type":"Property","source":{"localId":"205","locator":"103:40-103:46","name":"EDVisit","type":"QueryLetRef"}}},{"localId":"208","locator":"103:64-103:73","name":"VisitStart","type":"QueryLetRef"}]}},{"localId":"224","locator":"104:4-108:4","identifier":"OutpatientSurgeryVisit","expression":{"localId":"223","locator":"104:28-108:4","type":"Last","source":{"localId":"222","locator":"104:33-107:26","type":"Query","source":[{"localId":"212","locator":"104:33-104:100","alias":"LastSurgeryOP","expression":{"localId":"211","locator":"104:33-104:86","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"104:58-104:85","name":"Outpatient Surgery Service","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"217","locator":"105:6-105:89","type":"And","operand":[{"locator":"105:46-105:59","type":"In","operand":[{"locator":"105:41-105:44","type":"End","operand":{"localId":"214","locator":"105:12-105:39","path":"relevantPeriod","scope":"LastSurgeryOP","type":"Property"}},{"locator":"105:46-105:59","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"105:74-105:89","type":"Subtract","operand":[{"localId":"215","locator":"105:74-105:89","name":"VisitStartWithED","type":"QueryLetRef"},{"localId":"216","locator":"105:46-105:51","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"215","locator":"105:74-105:89","name":"VisitStartWithED","type":"QueryLetRef"}}]},{"locator":"105:46-105:59","type":"Not","operand":{"locator":"105:46-105:59","type":"IsNull","operand":{"localId":"215","locator":"105:74-105:89","name":"VisitStartWithED","type":"QueryLetRef"}}}]},"sort":{"localId":"221","locator":"106:6-107:26","by":[{"localId":"220","locator":"107:6-107:26","direction":"asc","type":"ByExpression","expression":{"localId":"219","locator":"107:6-107:26","type":"End","operand":{"localId":"218","locator":"107:13-107:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"234","locator":"109:4-110:31","expression":{"localId":"233","locator":"109:11-110:31","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"229","locator":"109:20-109:93","type":"Coalesce","operand":[{"localId":"227","locator":"109:29-109:74","type":"Start","operand":{"localId":"226","locator":"109:38-109:74","path":"relevantPeriod","type":"Property","source":{"localId":"225","locator":"109:38-109:59","name":"OutpatientSurgeryVisit","type":"QueryLetRef"}}},{"localId":"228","locator":"109:77-109:92","name":"VisitStartWithED","type":"QueryLetRef"}]},"high":{"localId":"232","locator":"110:4-110:30","type":"End","operand":{"localId":"231","locator":"110:11-110:30","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"164","locator":"90:87-90:108","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"289","locator":"113:1-127:31","name":"HospitalizationWithObservation","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"289","s":[{"value":["/*Hospitalization with Observation returns the total interval from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\n","define function ","\"HospitalizationWithObservation\"","(","Encounter"," "]},{"r":"237","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"288","s":[{"r":"288","s":[{"s":[{"r":"239","s":[{"r":"238","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"255","s":[{"value":["ObsVisit",": "]},{"r":"254","s":[{"value":["Last","("]},{"r":"253","s":[{"s":[{"r":"241","s":[{"r":"240","s":[{"r":"240","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Observation Services\""]}]},{"value":["]"]}]}]},{"value":[" ","LastObs"]}]}]},{"value":["\n  \t\t\t"]},{"r":"248","s":[{"value":["where "]},{"r":"248","s":[{"r":"243","s":[{"r":"242","s":[{"value":["LastObs"]}]},{"value":["."]},{"r":"243","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"248","s":[{"value":["ends "]},{"r":"247","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"246","s":[{"value":["start of "]},{"r":"245","s":[{"r":"244","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"245","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"252","s":[{"value":["sort by \n  \t\t\t"]},{"r":"251","s":[{"r":"250","s":[{"value":["end of "]},{"r":"249","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]},{"value":[",\n  \t"]},{"r":"263","s":[{"value":["VisitStart",": "]},{"r":"262","s":[{"value":["Coalesce","("]},{"r":"258","s":[{"value":["start of "]},{"r":"257","s":[{"r":"256","s":[{"value":["ObsVisit"]}]},{"value":["."]},{"r":"257","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"261","s":[{"value":["start of "]},{"r":"260","s":[{"r":"259","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"260","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]}]},{"value":[",\n  \t"]},{"r":"277","s":[{"value":["EDVisit",": "]},{"r":"276","s":[{"value":["Last","("]},{"r":"275","s":[{"s":[{"r":"265","s":[{"r":"264","s":[{"r":"264","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"270","s":[{"value":["where "]},{"r":"270","s":[{"r":"267","s":[{"r":"266","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"267","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"270","s":[{"value":["ends "]},{"r":"269","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"268","s":[{"value":["VisitStart"]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"274","s":[{"value":["sort by \n  \t\t\t"]},{"r":"273","s":[{"r":"272","s":[{"value":["end of "]},{"r":"271","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"287","s":[{"value":["return "]},{"r":"286","s":[{"value":["Interval["]},{"r":"282","s":[{"value":["Coalesce","("]},{"r":"280","s":[{"value":["start of "]},{"r":"279","s":[{"r":"278","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"279","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"281","s":[{"value":["VisitStart"]}]},{"value":[")"]}]},{"value":[", \n  \t"]},{"r":"285","s":[{"value":["end of "]},{"r":"284","s":[{"r":"283","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"284","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["]"]}]}]}]}]}]}}],"expression":{"localId":"288","locator":"114:3-127:31","type":"Query","source":[{"localId":"239","locator":"114:3-114:17","alias":"Visit","expression":{"localId":"238","locator":"114:3-114:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"255","locator":"115:8-119:4","identifier":"ObsVisit","expression":{"localId":"254","locator":"115:18-119:4","type":"Last","source":{"localId":"253","locator":"115:23-118:26","type":"Query","source":[{"localId":"241","locator":"115:23-115:78","alias":"LastObs","expression":{"localId":"240","locator":"115:23-115:70","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"115:48-115:69","name":"Observation Services","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"248","locator":"116:6-116:96","type":"And","operand":[{"locator":"116:40-116:53","type":"In","operand":[{"locator":"116:35-116:38","type":"End","operand":{"localId":"243","locator":"116:12-116:33","path":"relevantPeriod","scope":"LastObs","type":"Property"}},{"locator":"116:40-116:53","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"116:68-116:96","type":"Subtract","operand":[{"localId":"246","locator":"116:68-116:96","type":"Start","operand":{"localId":"245","locator":"116:77-116:96","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"247","locator":"116:40-116:45","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"246","locator":"116:68-116:96","type":"Start","operand":{"localId":"245","locator":"116:77-116:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"116:40-116:53","type":"Not","operand":{"locator":"116:40-116:53","type":"IsNull","operand":{"localId":"246","locator":"116:68-116:96","type":"Start","operand":{"localId":"245","locator":"116:77-116:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"252","locator":"117:6-118:26","by":[{"localId":"251","locator":"118:6-118:26","direction":"asc","type":"ByExpression","expression":{"localId":"250","locator":"118:6-118:26","type":"End","operand":{"localId":"249","locator":"118:13-118:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}},{"localId":"263","locator":"120:4-120:88","identifier":"VisitStart","expression":{"localId":"262","locator":"120:16-120:88","type":"Coalesce","operand":[{"localId":"258","locator":"120:25-120:56","type":"Start","operand":{"localId":"257","locator":"120:34-120:56","path":"relevantPeriod","type":"Property","source":{"localId":"256","locator":"120:34-120:41","name":"ObsVisit","type":"QueryLetRef"}}},{"localId":"261","locator":"120:59-120:87","type":"Start","operand":{"localId":"260","locator":"120:68-120:87","path":"relevantPeriod","scope":"Visit","type":"Property"}}]}},{"localId":"277","locator":"121:4-125:4","identifier":"EDVisit","expression":{"localId":"276","locator":"121:13-125:4","type":"Last","source":{"localId":"275","locator":"121:18-124:26","type":"Query","source":[{"localId":"265","locator":"121:18-121:78","alias":"LastED","expression":{"localId":"264","locator":"121:18-121:71","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"121:43-121:70","name":"Emergency Department Visit","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"270","locator":"122:6-122:76","type":"And","operand":[{"locator":"122:39-122:52","type":"In","operand":[{"locator":"122:34-122:37","type":"End","operand":{"localId":"267","locator":"122:12-122:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"122:39-122:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"122:67-122:76","type":"Subtract","operand":[{"localId":"268","locator":"122:67-122:76","name":"VisitStart","type":"QueryLetRef"},{"localId":"269","locator":"122:39-122:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"268","locator":"122:67-122:76","name":"VisitStart","type":"QueryLetRef"}}]},{"locator":"122:39-122:52","type":"Not","operand":{"locator":"122:39-122:52","type":"IsNull","operand":{"localId":"268","locator":"122:67-122:76","name":"VisitStart","type":"QueryLetRef"}}}]},"sort":{"localId":"274","locator":"123:6-124:26","by":[{"localId":"273","locator":"124:6-124:26","direction":"asc","type":"ByExpression","expression":{"localId":"272","locator":"124:6-124:26","type":"End","operand":{"localId":"271","locator":"124:13-124:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"287","locator":"126:4-127:31","expression":{"localId":"286","locator":"126:11-127:31","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"282","locator":"126:20-126:72","type":"Coalesce","operand":[{"localId":"280","locator":"126:29-126:59","type":"Start","operand":{"localId":"279","locator":"126:38-126:59","path":"relevantPeriod","type":"Property","source":{"localId":"278","locator":"126:38-126:44","name":"EDVisit","type":"QueryLetRef"}}},{"localId":"281","locator":"126:62-126:71","name":"VisitStart","type":"QueryLetRef"}]},"high":{"localId":"285","locator":"127:4-127:30","type":"End","operand":{"localId":"284","locator":"127:11-127:30","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"237","locator":"113:60-113:81","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"294","locator":"130:1-131:61","name":"HospitalizationWithObservationLengthofStay","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"294","s":[{"value":["/*Hospitalization with Observation Length of Stay returns the length in days from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\n","define function ","\"HospitalizationWithObservationLengthofStay\"","(","Encounter"," "]},{"r":"290","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"293","s":[{"r":"293","s":[{"value":["\"LengthInDays\"","("]},{"r":"292","s":[{"value":["\"HospitalizationWithObservation\"","("]},{"r":"291","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"293","locator":"131:3-131:61","name":"LengthInDays","type":"FunctionRef","operand":[{"localId":"292","locator":"131:18-131:60","name":"HospitalizationWithObservation","type":"FunctionRef","operand":[{"localId":"291","locator":"131:51-131:59","name":"Encounter","type":"OperandRef"}]}]},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"290","locator":"130:72-130:93","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"315","locator":"134:1-139:3","name":"FirstInpatientIntensiveCareUnit","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"315","s":[{"value":["/*First Inpatient Intensive Care Unit returns the first intensive care unit for the given encounter, without considering any immediately prior emergency department visit.*/\n","define function ","\"FirstInpatientIntensiveCareUnit\"","(","Encounter"," "]},{"r":"295","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"314","s":[{"r":"314","s":[{"value":["First","("]},{"r":"313","s":[{"s":[{"r":"298","s":[{"r":"297","s":[{"value":["("]},{"r":"297","s":[{"r":"296","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"297","s":[{"value":["facilityLocations"]}]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n      "]},{"r":"308","s":[{"value":["where "]},{"r":"308","s":[{"r":"302","s":[{"r":"300","s":[{"r":"299","s":[{"value":["HospitalLocation"]}]},{"value":["."]},{"r":"300","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"301","s":[{"value":["\"Intensive Care Unit\""]}]}]},{"value":["\n        and "]},{"r":"307","s":[{"r":"304","s":[{"r":"303","s":[{"value":["HospitalLocation"]}]},{"value":["."]},{"r":"304","s":[{"value":["locationPeriod"]}]}]},{"r":"307","value":[" ","during"," "]},{"r":"306","s":[{"r":"305","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"306","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n      "]},{"r":"312","s":[{"value":["sort by "]},{"r":"311","s":[{"r":"310","s":[{"value":["start of "]},{"r":"309","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]}]}]}}],"expression":{"localId":"314","locator":"135:3-139:3","type":"First","source":{"localId":"313","locator":"135:9-138:37","type":"Query","source":[{"localId":"298","locator":"135:9-135:53","alias":"HospitalLocation","expression":{"localId":"297","locator":"135:9-135:37","path":"facilityLocations","type":"Property","source":{"localId":"296","locator":"135:10-135:18","name":"Encounter","type":"OperandRef"}}}],"relationship":[],"where":{"localId":"308","locator":"136:7-137:75","type":"And","operand":[{"localId":"302","locator":"136:13-136:58","type":"InValueSet","code":{"localId":"300","locator":"136:13-136:33","path":"code","scope":"HospitalLocation","type":"Property"},"valueset":{"localId":"301","locator":"136:38-136:58","name":"Intensive Care Unit","preserve":true}},{"localId":"307","locator":"137:13-137:75","type":"IncludedIn","operand":[{"localId":"304","locator":"137:13-137:43","path":"locationPeriod","scope":"HospitalLocation","type":"Property"},{"localId":"306","locator":"137:52-137:75","path":"relevantPeriod","type":"Property","source":{"localId":"305","locator":"137:52-137:60","name":"Encounter","type":"OperandRef"}}]}]},"sort":{"localId":"312","locator":"138:7-138:37","by":[{"localId":"311","locator":"138:15-138:37","direction":"asc","type":"ByExpression","expression":{"localId":"310","locator":"138:15-138:37","type":"Start","operand":{"localId":"309","locator":"138:24-138:37","name":"locationPeriod","type":"IdentifierRef"}}}]}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"295","locator":"134:61-134:82","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"333","locator":"142:1-145:35","name":"NormalizeInterval","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"333","s":[{"value":["/*Given a datetime and a period, returns the period (if a period is provided) or the interval beginning and ending on the datetime (if a datetime is provided)*/\n","define function ","\"NormalizeInterval\"","(","pointInTime"," "]},{"r":"316","s":[{"value":["DateTime"]}]},{"value":[", ","period"," "]},{"r":"318","s":[{"value":["Interval\u003c"]},{"r":"317","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"332","s":[{"r":"332","s":[{"value":["if "]},{"r":"320","s":[{"r":"319","s":[{"value":["pointInTime"]}]},{"value":[" is not null"]}]},{"value":[" then "]},{"r":"323","s":[{"value":["Interval["]},{"r":"321","s":[{"value":["pointInTime"]}]},{"value":[", "]},{"r":"322","s":[{"value":["pointInTime"]}]},{"value":["]"]}]},{"value":["\n    else "]},{"r":"331","s":[{"value":["if "]},{"r":"325","s":[{"r":"324","s":[{"value":["period"]}]},{"value":[" is not null"]}]},{"value":[" then "]},{"r":"326","s":[{"value":["period"]}]},{"value":[" \n    else "]},{"r":"330","s":[{"r":"327","value":["null"," as "]},{"r":"329","s":[{"value":["Interval\u003c"]},{"r":"328","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}]}]}]}]}}],"expression":{"localId":"332","locator":"143:3-145:35","type":"If","condition":{"localId":"320","locator":"143:6-143:28","type":"Not","operand":{"locator":"143:6-143:28","type":"IsNull","operand":{"localId":"319","locator":"143:6-143:16","name":"pointInTime","type":"OperandRef"}}},"then":{"localId":"323","locator":"143:35-143:68","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"321","locator":"143:44-143:54","name":"pointInTime","type":"OperandRef"},"high":{"localId":"322","locator":"143:57-143:67","name":"pointInTime","type":"OperandRef"}},"else":{"localId":"331","locator":"144:10-145:35","type":"If","condition":{"localId":"325","locator":"144:13-144:30","type":"Not","operand":{"locator":"144:13-144:30","type":"IsNull","operand":{"localId":"324","locator":"144:13-144:18","name":"period","type":"OperandRef"}}},"then":{"localId":"326","locator":"144:37-144:42","name":"period","type":"OperandRef"},"else":{"localId":"330","locator":"145:10-145:35","strict":false,"type":"As","operand":{"localId":"327","locator":"145:10-145:13","type":"Null"},"asTypeSpecifier":{"localId":"329","locator":"145:18-145:35","type":"IntervalTypeSpecifier","pointType":{"localId":"328","locator":"145:27-145:34","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}},"operand":[{"name":"pointInTime","operandTypeSpecifier":{"localId":"316","locator":"142:49-142:56","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"name":"period","operandTypeSpecifier":{"localId":"318","locator":"142:66-142:83","type":"IntervalTypeSpecifier","pointType":{"localId":"317","locator":"142:75-142:82","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"346","locator":"148:1-151:3","name":"HasStart","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"346","s":[{"value":["/*Given an interval, return true if the interval has a starting boundary specified (i.e. the start of the interval is not null and not the minimum DateTime value)*/\n","define function ","\"HasStart\"","(","period"," "]},{"r":"335","s":[{"value":["Interval\u003c"]},{"r":"334","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"345","s":[{"r":"345","s":[{"value":["not "]},{"r":"344","s":[{"value":["( "]},{"r":"344","s":[{"r":"338","s":[{"r":"337","s":[{"value":["start of "]},{"r":"336","s":[{"value":["period"]}]}]},{"value":[" is null"]}]},{"value":["\n      or "]},{"r":"343","s":[{"r":"340","s":[{"value":["start of "]},{"r":"339","s":[{"value":["period"]}]}]},{"value":[" ","="," "]},{"r":"342","s":[{"value":["minimum"," "]},{"r":"341","s":[{"value":["DateTime"]}]}]}]}]},{"value":["\n  )"]}]}]}]}]}}],"expression":{"localId":"345","locator":"149:3-151:3","type":"Not","operand":{"localId":"344","locator":"149:7-151:3","type":"Or","operand":[{"localId":"338","locator":"149:9-149:31","type":"IsNull","operand":{"localId":"337","locator":"149:9-149:23","type":"Start","operand":{"localId":"336","locator":"149:18-149:23","name":"period","type":"OperandRef"}}},{"localId":"343","locator":"150:10-150:43","type":"Equal","operand":[{"localId":"340","locator":"150:10-150:24","type":"Start","operand":{"localId":"339","locator":"150:19-150:24","name":"period","type":"OperandRef"}},{"localId":"342","locator":"150:28-150:43","valueType":"{urn:hl7-org:elm-types:r1}DateTime","type":"MinValue"}]}]}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"335","locator":"148:35-148:52","type":"IntervalTypeSpecifier","pointType":{"localId":"334","locator":"148:44-148:51","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"359","locator":"154:1-159:3","name":"HasEnd","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"359","s":[{"value":["/*Given an interval, return true if the interval has an ending boundary specified (i.e. the end of the interval is not null and not the maximum DateTime value)*/\n","define function ","\"HasEnd\"","(","period"," "]},{"r":"348","s":[{"value":["Interval\u003c"]},{"r":"347","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"358","s":[{"r":"358","s":[{"value":["not "]},{"r":"357","s":[{"value":["( \n    "]},{"r":"357","s":[{"r":"351","s":[{"r":"350","s":[{"value":["end of "]},{"r":"349","s":[{"value":["period"]}]}]},{"value":[" is null"]}]},{"value":["\n      or \n      "]},{"r":"356","s":[{"r":"353","s":[{"value":["end of "]},{"r":"352","s":[{"value":["period"]}]}]},{"value":[" ","="," "]},{"r":"355","s":[{"value":["maximum"," "]},{"r":"354","s":[{"value":["DateTime"]}]}]}]}]},{"value":["\n  )"]}]}]}]}]}}],"expression":{"localId":"358","locator":"155:3-159:3","type":"Not","operand":{"localId":"357","locator":"155:7-159:3","type":"Or","operand":[{"localId":"351","locator":"156:5-156:25","type":"IsNull","operand":{"localId":"350","locator":"156:5-156:17","type":"End","operand":{"localId":"349","locator":"156:12-156:17","name":"period","type":"OperandRef"}}},{"localId":"356","locator":"158:7-158:38","type":"Equal","operand":[{"localId":"353","locator":"158:7-158:19","type":"End","operand":{"localId":"352","locator":"158:14-158:19","name":"period","type":"OperandRef"}},{"localId":"355","locator":"158:23-158:38","valueType":"{urn:hl7-org:elm-types:r1}DateTime","type":"MaxValue"}]}]}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"348","locator":"154:33-154:50","type":"IntervalTypeSpecifier","pointType":{"localId":"347","locator":"154:42-154:49","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"369","locator":"162:1-165:24","name":"Latest","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"369","s":[{"value":["/*Given an interval, return the ending point if the interval has an ending boundary specified, otherwise, return the starting point*/\n","define function ","\"Latest\"","(","period"," "]},{"r":"361","s":[{"value":["Interval\u003c"]},{"r":"360","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"368","s":[{"r":"368","s":[{"value":["if "]},{"r":"363","s":[{"value":["( "]},{"r":"363","s":[{"value":["HasEnd","("]},{"r":"362","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":[" then \n  "]},{"r":"365","s":[{"value":["end of "]},{"r":"364","s":[{"value":["period"]}]}]},{"value":[" \n    else "]},{"r":"367","s":[{"value":["start of "]},{"r":"366","s":[{"value":["period"]}]}]}]}]}]}}],"expression":{"localId":"368","locator":"163:3-165:24","type":"If","condition":{"localId":"363","locator":"163:6-163:22","name":"HasEnd","type":"FunctionRef","operand":[{"localId":"362","locator":"163:15-163:20","name":"period","type":"OperandRef"}]},"then":{"localId":"365","locator":"164:3-164:15","type":"End","operand":{"localId":"364","locator":"164:10-164:15","name":"period","type":"OperandRef"}},"else":{"localId":"367","locator":"165:10-165:24","type":"Start","operand":{"localId":"366","locator":"165:19-165:24","name":"period","type":"OperandRef"}}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"361","locator":"162:33-162:50","type":"IntervalTypeSpecifier","pointType":{"localId":"360","locator":"162:42-162:49","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"379","locator":"168:1-171:15","name":"Earliest","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"379","s":[{"value":["/*Given an interval, return the starting point if the interval has a starting boundary specified, otherwise, return the ending point*/\n","define function ","\"Earliest\"","(","period"," "]},{"r":"371","s":[{"value":["Interval\u003c"]},{"r":"370","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"378","s":[{"r":"378","s":[{"value":["if "]},{"r":"373","s":[{"value":["( "]},{"r":"373","s":[{"value":["HasStart","("]},{"r":"372","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":[" then "]},{"r":"375","s":[{"value":["start of "]},{"r":"374","s":[{"value":["period"]}]}]},{"value":[" \n    else \n  "]},{"r":"377","s":[{"value":["end of "]},{"r":"376","s":[{"value":["period"]}]}]}]}]}]}}],"expression":{"localId":"378","locator":"169:3-171:15","type":"If","condition":{"localId":"373","locator":"169:6-169:24","name":"HasStart","type":"FunctionRef","operand":[{"localId":"372","locator":"169:17-169:22","name":"period","type":"OperandRef"}]},"then":{"localId":"375","locator":"169:31-169:45","type":"Start","operand":{"localId":"374","locator":"169:40-169:45","name":"period","type":"OperandRef"}},"else":{"localId":"377","locator":"171:3-171:15","type":"End","operand":{"localId":"376","locator":"171:10-171:15","name":"period","type":"OperandRef"}}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"371","locator":"168:35-168:52","type":"IntervalTypeSpecifier","pointType":{"localId":"370","locator":"168:44-168:51","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"387","locator":"174:1-175:48","name":"LatestOf","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"387","s":[{"value":["/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the ending point of the period if the period has an ending boundary specified, otherwise returns the starting point of the interval*/\n","define function ","\"LatestOf\"","(","pointInTime"," "]},{"r":"380","s":[{"value":["DateTime"]}]},{"value":[", ","period"," "]},{"r":"382","s":[{"value":["Interval\u003c"]},{"r":"381","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"386","s":[{"r":"386","s":[{"value":["Latest","("]},{"r":"385","s":[{"value":["NormalizeInterval","("]},{"r":"383","s":[{"value":["pointInTime"]}]},{"value":[", "]},{"r":"384","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"386","locator":"175:3-175:48","name":"Latest","type":"FunctionRef","operand":[{"localId":"385","locator":"175:10-175:47","name":"NormalizeInterval","type":"FunctionRef","operand":[{"localId":"383","locator":"175:28-175:38","name":"pointInTime","type":"OperandRef"},{"localId":"384","locator":"175:41-175:46","name":"period","type":"OperandRef"}]}]},"operand":[{"name":"pointInTime","operandTypeSpecifier":{"localId":"380","locator":"174:40-174:47","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"name":"period","operandTypeSpecifier":{"localId":"382","locator":"174:57-174:74","type":"IntervalTypeSpecifier","pointType":{"localId":"381","locator":"174:66-174:73","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"395","locator":"178:1-179:50","name":"EarliestOf","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"395","s":[{"value":["/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the starting point of the period if the period has a starting boundary specified, otherwise returns the ending point of the period*/\n","define function ","\"EarliestOf\"","(","pointInTime"," "]},{"r":"388","s":[{"value":["DateTime"]}]},{"value":[", ","period"," "]},{"r":"390","s":[{"value":["Interval\u003c"]},{"r":"389","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"394","s":[{"r":"394","s":[{"value":["Earliest","("]},{"r":"393","s":[{"value":["NormalizeInterval","("]},{"r":"391","s":[{"value":["pointInTime"]}]},{"value":[", "]},{"r":"392","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"394","locator":"179:3-179:50","name":"Earliest","type":"FunctionRef","operand":[{"localId":"393","locator":"179:12-179:49","name":"NormalizeInterval","type":"FunctionRef","operand":[{"localId":"391","locator":"179:30-179:40","name":"pointInTime","type":"OperandRef"},{"localId":"392","locator":"179:43-179:48","name":"period","type":"OperandRef"}]}]},"operand":[{"name":"pointInTime","operandTypeSpecifier":{"localId":"388","locator":"178:42-178:49","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"name":"period","operandTypeSpecifier":{"localId":"390","locator":"178:59-178:76","type":"IntervalTypeSpecifier","pointType":{"localId":"389","locator":"178:68-178:75","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]}]}}},"elm_annotations":{"statements":[{"children":[{"children":[{"children":[{"text":"define \"ED Encounter\":\n  "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"10"}],"ref_id":"11"}],"define_name":"ED Encounter"},{"children":[{"children":[{"children":[{"text":"define \"Inpatient Encounter\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Encounter Inpatient\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"12"}],"node_type":"Retrieve","ref_id":"12"},{"children":[{"text":" EncounterInpatient"}]}],"ref_id":"13"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"EncounterInpatient"}]}],"ref_id":"14"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"15"}],"node_type":"Property","ref_id":"15"},{"children":[{"text":" ends during day of "}],"ref_id":"17"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"16"}],"ref_id":"17"}],"ref_id":"17"}],"node_type":"Query","ref_id":"18"}],"ref_id":"19"}],"define_name":"Inpatient Encounter"},{"children":[{"children":[]},{"children":[]},{"children":[]},{"children":[{"children":[{"text":"/*@description: Returns an interval of date values extracted from the input interval of date-time values\n@comment: This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability.*/\ndefine function \"ToDateInterval\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"20"},{"children":[{"text":"\u003e"}]}],"ref_id":"21"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"22"}],"node_type":"Start","ref_id":"23"}],"ref_id":"24"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"25"}],"node_type":"End","ref_id":"26"}],"ref_id":"27"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"28"}],"node_type":"Interval","ref_id":"28"}],"ref_id":"29"}],"define_name":"ToDateInterval"},{"children":[{"children":[{"children":[{"text":"/*calculates the difference in calendar days between the start and end of the given interval.*/\ndefine function \"LengthInDays\"(Value "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"30"},{"children":[{"text":"\u003e"}]}],"ref_id":"31"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"difference in days between "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"Value"}]}],"node_type":"OperandRef","ref_id":"32"}],"node_type":"Start","ref_id":"33"},{"children":[{"text":" and "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"Value"}]}],"node_type":"OperandRef","ref_id":"34"}],"node_type":"End","ref_id":"35"}],"node_type":"DifferenceBetween","ref_id":"36"}],"node_type":"DifferenceBetween","ref_id":"36"}],"ref_id":"37"}],"define_name":"LengthInDays"},{"children":[{"children":[{"children":[{"text":"/*returns list of all locations within an encounter, including locations for immediately prior ED visit.*/\ndefine function \"HospitalizationLocations\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"38"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"39"},{"children":[{"text":" Visit"}]}],"ref_id":"40"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"41"}],"node_type":"Retrieve","ref_id":"41"},{"children":[{"text":" LastED"}]}],"ref_id":"42"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"43"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"44"}],"node_type":"Property","ref_id":"44"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"48"},{"children":[{"text":" or less on or before"}]}],"ref_id":"49"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"45"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"46"}],"node_type":"Property","ref_id":"46"}],"node_type":"Start","ref_id":"47"}],"ref_id":"49"}],"ref_id":"49"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"50"}],"node_type":"End","ref_id":"51"}],"ref_id":"52"}],"ref_id":"53"}],"ref_id":"54"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"55"}],"ref_id":"56"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"node_type":"QueryLetRef","ref_id":"57"},{"children":[{"text":" is null"}]}],"ref_id":"58"},{"children":[{"text":" then "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"59"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"ref_id":"60"}],"ref_id":"60"},{"children":[{"text":" \n      else "}]},{"children":[{"children":[{"text":"flatten "}]},{"children":[{"children":[{"text":"{ "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"61"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"ref_id":"62"}],"ref_id":"62"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"63"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"ref_id":"64"}],"ref_id":"64"},{"children":[{"text":" }"}]}],"node_type":"List","ref_id":"65"}],"ref_id":"66"}],"node_type":"If","ref_id":"67"}],"ref_id":"68"}],"node_type":"Query","ref_id":"69"}],"node_type":"Query","ref_id":"69"}],"ref_id":"70"}],"define_name":"HospitalizationLocations"},{"children":[{"children":[{"children":[{"text":"/*Returns the arrival time in the ED for the encounter.*/\ndefine function \"EmergencyDepartmentArrivalTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"71"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"\"HospitalizationLocations\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"72"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"73"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"73"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"74"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"HospitalLocation"}]}],"ref_id":"75"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"76"}],"ref_id":"76"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}],"ref_id":"77"}],"ref_id":"78"}],"ref_id":"78"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"79"}],"node_type":"Start","ref_id":"80"}],"ref_id":"81"}],"ref_id":"82"}],"ref_id":"83"},{"children":[{"text":"\n  )"}]}],"ref_id":"84"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"85"}],"node_type":"Property","ref_id":"85"}],"node_type":"Start","ref_id":"86"}],"node_type":"Start","ref_id":"86"}],"ref_id":"87"}],"define_name":"EmergencyDepartmentArrivalTime"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization returns the total interval for admission to discharge for the given encounter, or for the admission of any immediately prior emergency department visit to the discharge of the given encounter.*/\ndefine function \"Hospitalization\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"90"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"91"},{"children":[{"text":" Visit"}]}],"ref_id":"92"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"93"}],"node_type":"Retrieve","ref_id":"93"},{"children":[{"text":" LastED"}]}],"ref_id":"94"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"95"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"96"}],"node_type":"Property","ref_id":"96"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"100"},{"children":[{"text":" or less on or before"}]}],"ref_id":"101"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"97"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"98"}],"node_type":"Property","ref_id":"98"}],"node_type":"Start","ref_id":"99"}],"ref_id":"101"}],"ref_id":"101"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"102"}],"node_type":"End","ref_id":"103"}],"ref_id":"104"}],"ref_id":"105"}],"ref_id":"106"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"107"}],"ref_id":"108"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"109"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"110"}],"node_type":"Property","ref_id":"110"}],"node_type":"Start","ref_id":"111"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"112"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"113"}],"node_type":"Property","ref_id":"113"}],"node_type":"Start","ref_id":"114"},{"children":[{"text":")"}]}],"ref_id":"115"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"116"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"117"}],"node_type":"Property","ref_id":"117"}],"ref_id":"118"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"119"}],"ref_id":"120"}],"node_type":"Query","ref_id":"121"}],"node_type":"Query","ref_id":"121"}],"ref_id":"122"}],"define_name":"Hospitalization"},{"children":[{"children":[{"children":[{"text":"/*Returns admission time for an encounter or for immediately prior emergency department visit.*/\ndefine function \"HospitalAdmissionTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"88"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"\"Hospitalization\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"89"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"123"}],"node_type":"Start","ref_id":"124"}],"node_type":"Start","ref_id":"124"}],"ref_id":"125"}],"define_name":"HospitalAdmissionTime"},{"children":[{"children":[{"children":[{"text":"/*Returns earliest arrival time for an encounter including any prior ED visit.*/\ndefine function \"HospitalArrivalTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"126"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"\"HospitalizationLocations\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"127"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"128"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"128"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"129"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"130"}],"node_type":"Start","ref_id":"131"}],"ref_id":"132"}],"ref_id":"133"}],"ref_id":"134"},{"children":[{"text":"\n  )"}]}],"ref_id":"135"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"136"}],"node_type":"Property","ref_id":"136"}],"node_type":"Start","ref_id":"137"}],"node_type":"Start","ref_id":"137"}],"ref_id":"138"}],"define_name":"HospitalArrivalTime"},{"children":[{"children":[{"children":[{"text":"/*Returns the length of stay in days (i.e. the number of days between admission and discharge) for the given encounter, or from the admission of any immediately prior emergency department visit to the discharge of the encounter*/\ndefine function \"HospitalizationLengthofStay\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"141"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"LengthInDays("}]},{"children":[{"children":[{"text":"\"Hospitalization\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"142"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"143"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"144"}],"node_type":"FunctionRef","ref_id":"144"}],"ref_id":"145"}],"define_name":"HospitalizationLengthofStay"},{"children":[{"children":[{"children":[{"text":"/*Returns the latest departure time for encounter including any prior ED visit.*/\ndefine function \"HospitalDepartureTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"146"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"\"HospitalizationLocations\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"147"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"148"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"148"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"149"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"150"}],"node_type":"Start","ref_id":"151"}],"ref_id":"152"}],"ref_id":"153"}],"ref_id":"154"},{"children":[{"text":"\n  )"}]}],"ref_id":"155"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"156"}],"node_type":"Property","ref_id":"156"}],"node_type":"End","ref_id":"157"}],"node_type":"End","ref_id":"157"}],"ref_id":"158"}],"define_name":"HospitalDepartureTime"},{"children":[{"children":[{"children":[{"text":"/*Hospital Discharge Time returns the discharge time for an encounter*/\ndefine function \"HospitalDischargeTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"159"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"160"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"161"}],"node_type":"Property","ref_id":"161"}],"node_type":"End","ref_id":"162"}],"node_type":"End","ref_id":"162"}],"ref_id":"163"}],"define_name":"HospitalDischargeTime"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization with Observation and Outpatient Surgery Service returns the total interval from the start of any immediately prior emergency department visit, outpatient surgery visit or observation visit to the discharge of the given encounter.*/\ndefine function \"HospitalizationWithObservationAndOutpatientSurgeryService\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"164"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"165"},{"children":[{"text":" Visit"}]}],"ref_id":"166"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"ObsVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Observation Services\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"167"}],"node_type":"Retrieve","ref_id":"167"},{"children":[{"text":" LastObs"}]}],"ref_id":"168"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastObs"}]}],"ref_id":"169"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"170"}],"node_type":"Property","ref_id":"170"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"174"},{"children":[{"text":" or less on or before"}]}],"ref_id":"175"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"171"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"172"}],"node_type":"Property","ref_id":"172"}],"node_type":"Start","ref_id":"173"}],"ref_id":"175"}],"ref_id":"175"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"176"}],"node_type":"End","ref_id":"177"}],"ref_id":"178"}],"ref_id":"179"}],"ref_id":"180"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"181"}],"ref_id":"182"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"VisitStart: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"ObsVisit"}]}],"ref_id":"183"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"184"}],"node_type":"Property","ref_id":"184"}],"node_type":"Start","ref_id":"185"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"186"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"187"}],"node_type":"Property","ref_id":"187"}],"node_type":"Start","ref_id":"188"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"189"}],"ref_id":"190"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"191"}],"node_type":"Retrieve","ref_id":"191"},{"children":[{"text":" LastED"}]}],"ref_id":"192"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"193"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"194"}],"node_type":"Property","ref_id":"194"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"196"},{"children":[{"text":" or less on or before"}]}],"ref_id":"197"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"195"}],"ref_id":"197"}],"ref_id":"197"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"198"}],"node_type":"End","ref_id":"199"}],"ref_id":"200"}],"ref_id":"201"}],"ref_id":"202"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"203"}],"ref_id":"204"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"VisitStartWithED: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"205"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"206"}],"node_type":"Property","ref_id":"206"}],"node_type":"Start","ref_id":"207"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"208"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"209"}],"ref_id":"210"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"OutpatientSurgeryVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Outpatient Surgery Service\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"211"}],"node_type":"Retrieve","ref_id":"211"},{"children":[{"text":" LastSurgeryOP"}]}],"ref_id":"212"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastSurgeryOP"}]}],"ref_id":"213"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"214"}],"node_type":"Property","ref_id":"214"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"216"},{"children":[{"text":" or less on or before"}]}],"ref_id":"217"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"VisitStartWithED"}]}],"node_type":"QueryLetRef","ref_id":"215"}],"ref_id":"217"}],"ref_id":"217"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"218"}],"node_type":"End","ref_id":"219"}],"ref_id":"220"}],"ref_id":"221"}],"ref_id":"222"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"223"}],"ref_id":"224"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"OutpatientSurgeryVisit"}]}],"ref_id":"225"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"226"}],"node_type":"Property","ref_id":"226"}],"node_type":"Start","ref_id":"227"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"VisitStartWithED"}]}],"node_type":"QueryLetRef","ref_id":"228"},{"children":[{"text":")"}]}],"ref_id":"229"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"230"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"231"}],"node_type":"Property","ref_id":"231"}],"ref_id":"232"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"233"}],"ref_id":"234"}],"node_type":"Query","ref_id":"235"}],"node_type":"Query","ref_id":"235"}],"ref_id":"236"}],"define_name":"HospitalizationWithObservationAndOutpatientSurgeryService"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization with Observation returns the total interval from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\ndefine function \"HospitalizationWithObservation\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"237"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"238"},{"children":[{"text":" Visit"}]}],"ref_id":"239"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"ObsVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Observation Services\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"240"}],"node_type":"Retrieve","ref_id":"240"},{"children":[{"text":" LastObs"}]}],"ref_id":"241"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastObs"}]}],"ref_id":"242"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"243"}],"node_type":"Property","ref_id":"243"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"247"},{"children":[{"text":" or less on or before"}]}],"ref_id":"248"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"244"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"245"}],"node_type":"Property","ref_id":"245"}],"node_type":"Start","ref_id":"246"}],"ref_id":"248"}],"ref_id":"248"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"249"}],"node_type":"End","ref_id":"250"}],"ref_id":"251"}],"ref_id":"252"}],"ref_id":"253"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"254"}],"ref_id":"255"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"VisitStart: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"ObsVisit"}]}],"ref_id":"256"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"257"}],"node_type":"Property","ref_id":"257"}],"node_type":"Start","ref_id":"258"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"259"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"260"}],"node_type":"Property","ref_id":"260"}],"node_type":"Start","ref_id":"261"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"262"}],"ref_id":"263"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"264"}],"node_type":"Retrieve","ref_id":"264"},{"children":[{"text":" LastED"}]}],"ref_id":"265"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"266"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"267"}],"node_type":"Property","ref_id":"267"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"269"},{"children":[{"text":" or less on or before"}]}],"ref_id":"270"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"268"}],"ref_id":"270"}],"ref_id":"270"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"271"}],"node_type":"End","ref_id":"272"}],"ref_id":"273"}],"ref_id":"274"}],"ref_id":"275"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"276"}],"ref_id":"277"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"278"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"279"}],"node_type":"Property","ref_id":"279"}],"node_type":"Start","ref_id":"280"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"281"},{"children":[{"text":")"}]}],"ref_id":"282"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"283"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"284"}],"node_type":"Property","ref_id":"284"}],"ref_id":"285"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"286"}],"ref_id":"287"}],"node_type":"Query","ref_id":"288"}],"node_type":"Query","ref_id":"288"}],"ref_id":"289"}],"define_name":"HospitalizationWithObservation"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization with Observation Length of Stay returns the length in days from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\ndefine function \"HospitalizationWithObservationLengthofStay\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"290"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"\"LengthInDays\"("}]},{"children":[{"children":[{"text":"\"HospitalizationWithObservation\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"291"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"292"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"293"}],"node_type":"FunctionRef","ref_id":"293"}],"ref_id":"294"}],"define_name":"HospitalizationWithObservationLengthofStay"},{"children":[{"children":[{"children":[{"text":"/*First Inpatient Intensive Care Unit returns the first intensive care unit for the given encounter, without considering any immediately prior emergency department visit.*/\ndefine function \"FirstInpatientIntensiveCareUnit\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"295"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"296"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"node_type":"Property","ref_id":"297"}],"node_type":"Property","ref_id":"297"},{"children":[{"text":")"}]}],"node_type":"Property","ref_id":"297"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"298"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"HospitalLocation"}]}],"ref_id":"299"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"300"}],"ref_id":"300"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Intensive Care Unit\""}]}],"ref_id":"301"}],"node_type":"InValueSet","ref_id":"302"},{"children":[{"text":"\n        and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"HospitalLocation"}]}],"ref_id":"303"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"304"}],"node_type":"Property","ref_id":"304"},{"children":[{"text":" during "}],"node_type":"IncludedIn","ref_id":"307"},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"305"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"306"}],"node_type":"Property","ref_id":"306"}],"node_type":"IncludedIn","ref_id":"307"}],"ref_id":"308"}],"ref_id":"308"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"309"}],"node_type":"Start","ref_id":"310"}],"ref_id":"311"}],"ref_id":"312"}],"ref_id":"313"},{"children":[{"text":"\n  )"}]}],"node_type":"First","ref_id":"314"}],"node_type":"First","ref_id":"314"}],"ref_id":"315"}],"define_name":"FirstInpatientIntensiveCareUnit"},{"children":[{"children":[{"children":[{"text":"/*Given a datetime and a period, returns the period (if a period is provided) or the interval beginning and ending on the datetime (if a datetime is provided)*/\ndefine function \"NormalizeInterval\"(pointInTime "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"316"},{"children":[{"text":", period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"317"},{"children":[{"text":"\u003e"}]}],"ref_id":"318"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"pointInTime"}]}],"node_type":"OperandRef","ref_id":"319"},{"children":[{"text":" is not null"}]}],"ref_id":"320"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"pointInTime"}]}],"ref_id":"321"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"pointInTime"}]}],"ref_id":"322"},{"children":[{"text":"]"}]}],"ref_id":"323"},{"children":[{"text":"\n    else "}]},{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"324"},{"children":[{"text":" is not null"}]}],"ref_id":"325"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"period"}]}],"ref_id":"326"},{"children":[{"text":" \n    else "}]},{"children":[{"children":[{"text":"null as "}],"node_type":"Null","ref_id":"327"},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"328"},{"children":[{"text":"\u003e"}]}],"ref_id":"329"}],"ref_id":"330"}],"ref_id":"331"}],"node_type":"If","ref_id":"332"}],"node_type":"If","ref_id":"332"}],"ref_id":"333"}],"define_name":"NormalizeInterval"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return true if the interval has a starting boundary specified (i.e. the start of the interval is not null and not the minimum DateTime value)*/\ndefine function \"HasStart\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"334"},{"children":[{"text":"\u003e"}]}],"ref_id":"335"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"not "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"336"}],"node_type":"Start","ref_id":"337"},{"children":[{"text":" is null"}]}],"node_type":"IsNull","ref_id":"338"},{"children":[{"text":"\n      or "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"339"}],"node_type":"Start","ref_id":"340"},{"children":[{"text":" = "}]},{"children":[{"children":[{"text":"minimum "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"341"}],"node_type":"MinValue","ref_id":"342"}],"node_type":"Equal","ref_id":"343"}],"node_type":"Or","ref_id":"344"},{"children":[{"text":"\n  )"}]}],"node_type":"Or","ref_id":"344"}],"node_type":"Not","ref_id":"345"}],"node_type":"Not","ref_id":"345"}],"ref_id":"346"}],"define_name":"HasStart"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return true if the interval has an ending boundary specified (i.e. the end of the interval is not null and not the maximum DateTime value)*/\ndefine function \"HasEnd\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"347"},{"children":[{"text":"\u003e"}]}],"ref_id":"348"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"not "}]},{"children":[{"children":[{"text":"( \n    "}]},{"children":[{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"349"}],"node_type":"End","ref_id":"350"},{"children":[{"text":" is null"}]}],"node_type":"IsNull","ref_id":"351"},{"children":[{"text":"\n      or \n      "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"352"}],"node_type":"End","ref_id":"353"},{"children":[{"text":" = "}]},{"children":[{"children":[{"text":"maximum "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"354"}],"node_type":"MaxValue","ref_id":"355"}],"node_type":"Equal","ref_id":"356"}],"node_type":"Or","ref_id":"357"},{"children":[{"text":"\n  )"}]}],"node_type":"Or","ref_id":"357"}],"node_type":"Not","ref_id":"358"}],"node_type":"Not","ref_id":"358"}],"ref_id":"359"}],"define_name":"HasEnd"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return the ending point if the interval has an ending boundary specified, otherwise, return the starting point*/\ndefine function \"Latest\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"360"},{"children":[{"text":"\u003e"}]}],"ref_id":"361"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"HasEnd("}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"362"},{"children":[{"text":")"}]}],"ref_id":"363"},{"children":[{"text":")"}]}],"ref_id":"363"},{"children":[{"text":" then \n  "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"364"}],"ref_id":"365"},{"children":[{"text":" \n    else "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"366"}],"ref_id":"367"}],"node_type":"If","ref_id":"368"}],"node_type":"If","ref_id":"368"}],"ref_id":"369"}],"define_name":"Latest"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return the starting point if the interval has a starting boundary specified, otherwise, return the ending point*/\ndefine function \"Earliest\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"370"},{"children":[{"text":"\u003e"}]}],"ref_id":"371"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"HasStart("}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"372"},{"children":[{"text":")"}]}],"ref_id":"373"},{"children":[{"text":")"}]}],"ref_id":"373"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"374"}],"ref_id":"375"},{"children":[{"text":" \n    else \n  "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"376"}],"ref_id":"377"}],"node_type":"If","ref_id":"378"}],"node_type":"If","ref_id":"378"}],"ref_id":"379"}],"define_name":"Earliest"},{"children":[{"children":[{"children":[{"text":"/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the ending point of the period if the period has an ending boundary specified, otherwise returns the starting point of the interval*/\ndefine function \"LatestOf\"(pointInTime "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"380"},{"children":[{"text":", period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"381"},{"children":[{"text":"\u003e"}]}],"ref_id":"382"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Latest("}]},{"children":[{"children":[{"text":"NormalizeInterval("}]},{"children":[{"children":[{"text":"pointInTime"}]}],"node_type":"OperandRef","ref_id":"383"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"384"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"385"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"386"}],"node_type":"FunctionRef","ref_id":"386"}],"ref_id":"387"}],"define_name":"LatestOf"},{"children":[{"children":[{"children":[{"text":"/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the starting point of the period if the period has a starting boundary specified, otherwise returns the ending point of the period*/\ndefine function \"EarliestOf\"(pointInTime "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"388"},{"children":[{"text":", period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"389"},{"children":[{"text":"\u003e"}]}],"ref_id":"390"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Earliest("}]},{"children":[{"children":[{"text":"NormalizeInterval("}]},{"children":[{"children":[{"text":"pointInTime"}]}],"node_type":"OperandRef","ref_id":"391"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"392"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"393"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"394"}],"node_type":"FunctionRef","ref_id":"394"}],"ref_id":"395"}],"define_name":"EarliestOf"}],"identifier":{"id":"MATGlobalCommonFunctionsQDM","version":"8.0.000"}},"is_main_library":false,"is_top_level":true,"library_name":"MATGlobalCommonFunctionsQDM","library_version":"8.0.000","statement_dependencies":[{"_id":"68923f6aa83e15671c2e3809","statement_name":"EarliestOf","statement_references":[{"_id":"68923f6aa83e15671c2e3807","hqmf_id":null,"library_name":"MATGlobalCommonFunctionsQDM","statement_name":"Earliest"},{"_id":"68923f6aa83e15671c2e3808","hqmf_id":null,"library_name":"MATGlobalCommonFunctionsQDM","statement_name":"NormalizeInterval"}]},{"_id":"68923f6aa83e15671c2e380a","statement_name":"Earliest","statement_references":[{"_id":"68923f6fa83e15671c2e390e","hqmf_id":null,"library_name":"MATGlobalCommonFunctionsQDM","statement_name":"HasStart"}]},{"_id":"68923f6aa83e15671c2e380b","statement_name":"HasStart"},{"_id":"68923f6aa83e15671c2e380c","statement_name":"NormalizeInterval"}]}],"created_at":null,"description":"Percentage of patients determined as having prostate cancer who are currently starting or undergoing androgen deprivation therapy (ADT), for an anticipated period of 12 months or greater and who receive an initial bone density evaluation. The bone density evaluation must be prior to the start of ADT or within 3 months of the start of ADT.","hqmf_id":"8A6D0454-8DF0-2D9F-018E-3882C43C2059","hqmf_set_id":"977B302E-CDF3-4BA2-8020-5E099D93AD18","hqmf_version_number":"8.2.000","main_cql_library":"BoneDensityProstateCancerAndrogenDeprivationTherapy","measure_attributes":[{"code":"OTH","value":"645","name":"eCQM Identifier (Measure Authoring Tool)","code_obj":{"type":"CD","null_flavor":"OTH","original_text":"eCQM Identifier (Measure Authoring Tool)"},"value_obj":{"type":"ED","value":"645","media_type":"text/plain"}},{"code":"OTH","value":"Not Applicable","name":"CBE Number","code_obj":{"type":"CD","null_flavor":"OTH","original_text":"CBE Number"},"value_obj":{"type":"ED","value":"Not Applicable","media_type":"text/plain"}},{"code":"COPY","value":"Limited proprietary coding is contained in the measure specifications for convenience. Users of the proprietary code sets should obtain all necessary licenses from the owners of these code sets. Oregon Urology Institute (OUI) and Large Urology Group Practice Association (LUGPA) disclaim all liability for use or accuracy of third party codes contained in the specifications.\n\nCPT(R) contained in the Measure specifications is copyright 2004-2023. American Medical Association. LOINC(R) copyright 2004-2023 Regenstrief Institute, Inc. This material contains SNOMED Clinical Terms(R) (SNOMED CT[R]) copyright 2004-2023. International Health Terminology Standards Development Organisation. ICD-10 copyright 2023 World Health Organization. All Rights Reserved.","name":"Copyright","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"COPY","title":"Copyright"},"value_obj":{"type":"ED","value":"Limited proprietary coding is contained in the measure specifications for convenience. Users of the proprietary code sets should obtain all necessary licenses from the owners of these code sets. Oregon Urology Institute (OUI) and Large Urology Group Practice Association (LUGPA) disclaim all liability for use or accuracy of third party codes contained in the specifications.\n\nCPT(R) contained in the Measure specifications is copyright 2004-2023. American Medical Association. LOINC(R) copyright 2004-2023 Regenstrief Institute, Inc. This material contains SNOMED Clinical Terms(R) (SNOMED CT[R]) copyright 2004-2023. International Health Terminology Standards Development Organisation. ICD-10 copyright 2023 World Health Organization. All Rights Reserved.","media_type":"text/plain"}},{"code":"DISC","value":"The performance measure is not a clinical guideline and does not establish a standard of medical care, and has not been tested for all potential applications.\n\nTHE MEASURES AND SPECIFICATIONS ARE PROVIDED \"AS IS\" WITHOUT WARRANTY OF ANY KIND.\n\nDue to technical limitations, registered trademarks are indicated by (R) or [R] and unregistered trademarks are indicated by (TM) or [TM].","name":"Disclaimer","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DISC","title":"Disclaimer"},"value_obj":{"type":"ED","value":"The performance measure is not a clinical guideline and does not establish a standard of medical care, and has not been tested for all potential applications.\n\nTHE MEASURES AND SPECIFICATIONS ARE PROVIDED \"AS IS\" WITHOUT WARRANTY OF ANY KIND.\n\nDue to technical limitations, registered trademarks are indicated by (R) or [R] and unregistered trademarks are indicated by (TM) or [TM].","media_type":"text/plain"}},{"code":"MSRSCORE","name":"Measure Scoring","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRSCORE","title":"Measure Scoring"},"value_obj":{"type":"CD","system":"2.16.840.1.113883.5.1063","code":"PROPOR","title":"Proportion"}},{"code":"MSRTYPE","name":"Measure Type","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRTYPE","title":"Measure Type"},"value_obj":{"type":"CD","system":"2.16.840.1.113883.5.1063","code":"PROCESS","title":"PROCESS"}},{"code":"STRAT","value":"None","name":"Stratification","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"STRAT","title":"Stratification"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"MSRADJ","value":"None","name":"Risk Adjustment","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRADJ","title":"Risk Adjustment"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"MSRAGG","value":"None","name":"Rate Aggregation","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRAGG","title":"Rate Aggregation"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"RAT","value":"Androgen suppression as a treatment for prostate cancer can cause osteoporosis (Qaseem, 2008). Men undergoing prolonged androgen deprivation therapy (ADT) incur bone loss at a rate higher than menopausal women (Guise, 2007). In preserving bone health, the goal is to prevent or treat osteopenia/osteoporosis for the patient on ADT and to prevent or delay skeletal related events. The National Osteoporosis Foundation recommendations including a baseline assessment of bone density with a dual energy X-ray absorptiometry (DEXA) scan and daily calcium and Vitamin D supplementation (Watts, 2012). The DEXA scan is the gold standard for bone density screening. Men at risk for adverse bone consequences from chronic ADT do not always receive care according to evidence-based guidelines. These findings call for improved processes that standardize evidence-based practice including baseline and follow up bone density assessment (Watts, 2012).","name":"Rationale","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"RAT","title":"Rationale"},"value_obj":{"type":"ED","value":"Androgen suppression as a treatment for prostate cancer can cause osteoporosis (Qaseem, 2008). Men undergoing prolonged androgen deprivation therapy (ADT) incur bone loss at a rate higher than menopausal women (Guise, 2007). In preserving bone health, the goal is to prevent or treat osteopenia/osteoporosis for the patient on ADT and to prevent or delay skeletal related events. The National Osteoporosis Foundation recommendations including a baseline assessment of bone density with a dual energy X-ray absorptiometry (DEXA) scan and daily calcium and Vitamin D supplementation (Watts, 2012). The DEXA scan is the gold standard for bone density screening. Men at risk for adverse bone consequences from chronic ADT do not always receive care according to evidence-based guidelines. These findings call for improved processes that standardize evidence-based practice including baseline and follow up bone density assessment (Watts, 2012).","media_type":"text/plain"}},{"code":"CRS","value":"Bone density screening should be performed at the start of Androgen Deprivation Therapy (ADT) for prostate cancer. It should also be performed every 2 years for the patient with continued ADT or for patients with known osteoporosis. Current insurance practice is to possibly cover the cost of bone density screening if osteoporosis is known or if there is a high-risk drug. Some patients choose to delay bone density screening until after ADT is started and they therefore have insurance authorization due to the administration of a high-risk drug.","name":"Clinical Recommendation Statement","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"CRS","title":"Clinical Recommendation Statement"},"value_obj":{"type":"ED","value":"Bone density screening should be performed at the start of Androgen Deprivation Therapy (ADT) for prostate cancer. It should also be performed every 2 years for the patient with continued ADT or for patients with known osteoporosis. Current insurance practice is to possibly cover the cost of bone density screening if osteoporosis is known or if there is a high-risk drug. Some patients choose to delay bone density screening until after ADT is started and they therefore have insurance authorization due to the administration of a high-risk drug.","media_type":"text/plain"}},{"code":"IDUR","value":"A higher score indicates better quality","name":"Improvement Notation","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"IDUR","title":"Improvement Notation"},"value_obj":{"type":"ED","value":"A higher score indicates better quality","media_type":"text/plain"}},{"code":"REF","value":"CITATIONCosman, F., deBeur, S., LeBoff, M., et al. (2014). Clinician’s guide to prevention and treatment of osteoporosis. Osteoporosis International, 25(10), 2359–2381. Retrieved from\nhttp://link.springer.com/article/10.1007/s00198-014-2794-2","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONCosman, F., deBeur, S., LeBoff, M., et al. (2014). Clinician’s guide to prevention and treatment of osteoporosis. Osteoporosis International, 25(10), 2359–2381. Retrieved from\nhttp://link.springer.com/article/10.1007/s00198-014-2794-2","media_type":"text/plain"}},{"code":"REF","value":"CITATIONFinkelstein, J., \u0026 Yu, E. (2017). Clinical manifestations, diagnosis, and evaluation of osteoporosis in men. Retrieved from\nhttps://www.uptodate.com/contents/clinical-manifestations-diagnosis-and-evaluation-of-osteoporosis-in-men/print?source=see_link","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONFinkelstein, J., \u0026 Yu, E. (2017). Clinical manifestations, diagnosis, and evaluation of osteoporosis in men. Retrieved from\nhttps://www.uptodate.com/contents/clinical-manifestations-diagnosis-and-evaluation-of-osteoporosis-in-men/print?source=see_link","media_type":"text/plain"}},{"code":"REF","value":"CITATIONGuise, T., Oefelein, M., Eastham, J., et al. (2007). Estrogenic side effects of androgen deprivation therapy. Reviews in Urology, 9(4), 163-180. Retrieved from\nhttps://www.researchgate.net/profile/Celestia_Higano/publication/5619579_Estrogenic_side_effects_of_androgen_deprivation_therapy/links/0c960526434483fdfd000000.pdf","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONGuise, T., Oefelein, M., Eastham, J., et al. (2007). Estrogenic side effects of androgen deprivation therapy. Reviews in Urology, 9(4), 163-180. Retrieved from\nhttps://www.researchgate.net/profile/Celestia_Higano/publication/5619579_Estrogenic_side_effects_of_androgen_deprivation_therapy/links/0c960526434483fdfd000000.pdf","media_type":"text/plain"}},{"code":"REF","value":"CITATIONQaseem, A., Snow, V., Shekelle, P., et al. (2008). Annals of Internal Medicine. Screening for osteoporosis in men: A clinical practice guideline from the American College of Physicians, 2008. Annals of Internal Medicine, 148(9), 680-684. Retrieved from\nhttp://annals.org/aim/article/740825/screening-osteoporosis-men-clinical-practice-guideline-from-american-college-physicians","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONQaseem, A., Snow, V., Shekelle, P., et al. (2008). Annals of Internal Medicine. Screening for osteoporosis in men: A clinical practice guideline from the American College of Physicians, 2008. Annals of Internal Medicine, 148(9), 680-684. Retrieved from\nhttp://annals.org/aim/article/740825/screening-osteoporosis-men-clinical-practice-guideline-from-american-college-physicians","media_type":"text/plain"}},{"code":"REF","value":"CITATIONWard, R., Roberts, C., Bencardino, J., et al. (2016). American College of Radiology: ACR Appropriateness Criteria (R)—Osteoporosis and bone mineral density. Retrieved from\nhttps://www.jacr.org/article/S1546-1440(17)30198-9/pdf","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONWard, R., Roberts, C., Bencardino, J., et al. (2016). American College of Radiology: ACR Appropriateness Criteria (R)—Osteoporosis and bone mineral density. Retrieved from\nhttps://www.jacr.org/article/S1546-1440(17)30198-9/pdf","media_type":"text/plain"}},{"code":"REF","value":"CITATIONWatts, N., Adler, R., Bilezikian, J., et al. (2012, June). Osteoporosis in men: An Endocrine Society clinical practice guideline, Journal of Clinical Endocrinology \u0026 Metabolism, 97(6), 1802–1822. Retrieved from\nhttps://academic.oup.com/jcem/article-lookup/doi/10.1210/jc.2011-3045","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONWatts, N., Adler, R., Bilezikian, J., et al. (2012, June). Osteoporosis in men: An Endocrine Society clinical practice guideline, Journal of Clinical Endocrinology \u0026 Metabolism, 97(6), 1802–1822. Retrieved from\nhttps://academic.oup.com/jcem/article-lookup/doi/10.1210/jc.2011-3045","media_type":"text/plain"}},{"code":"DEF","value":"DEXA - Dual Energy X-ray Absorptiometry - A scan that measures the bone of the spine, hip or total body and measures bone mineral density. It is considered one of the most accurate measurements.\nPDXA - Peripheral Dual Energy X-ray Absorptiometry - Bone mineral density measurement of the wrist, heel or finger.\n\nFirst Androgen Deprivation Therapy - The first Androgen Deprivation Therapy (ADT) is measured as the first order or administration of ADT for an anticipated period of 12 months or greater to a patient with prostate cancer.","name":"Definition","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DEF","title":"Definition"},"value_obj":{"type":"ED","value":"DEXA - Dual Energy X-ray Absorptiometry - A scan that measures the bone of the spine, hip or total body and measures bone mineral density. It is considered one of the most accurate measurements.\nPDXA - Peripheral Dual Energy X-ray Absorptiometry - Bone mineral density measurement of the wrist, heel or finger.\n\nFirst Androgen Deprivation Therapy - The first Androgen Deprivation Therapy (ADT) is measured as the first order or administration of ADT for an anticipated period of 12 months or greater to a patient with prostate cancer.","media_type":"text/plain"}},{"code":"GUIDE","value":"In order to capture the practitioner's intent of androgen deprivation therapy (ADT) for a period of 12 months or greater, SNOMEDCT 456381000124102 which is Injection of leuprolide acetate for twelve-month period (regime/therapy) is the correct code.\n\nThis eCQM is a patient-based measure.\n\nThis version of the eCQM uses QDM version 5.6. Please refer to the eCQI resource center (https://ecqi.healthit.gov/qdm) for more information on the QDM.","name":"Guidance","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"GUIDE","title":"Guidance"},"value_obj":{"type":"ED","value":"In order to capture the practitioner's intent of androgen deprivation therapy (ADT) for a period of 12 months or greater, SNOMEDCT 456381000124102 which is Injection of leuprolide acetate for twelve-month period (regime/therapy) is the correct code.\n\nThis eCQM is a patient-based measure.\n\nThis version of the eCQM uses QDM version 5.6. Please refer to the eCQI resource center (https://ecqi.healthit.gov/qdm) for more information on the QDM.","media_type":"text/plain"}},{"code":"TRANF","value":"TBD","name":"Transmission Format","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"TRANF","title":"Transmission Format"},"value_obj":{"type":"ED","value":"TBD","media_type":"text/plain"}},{"code":"IPOP","value":"Patients with a qualifying encounter in the measurement period AND with a diagnosis of prostate cancer AND with an order for ADT or an active medication of ADT with an intent for treatment greater than or equal to 12 months during the measurement period AND order for ADT in 3 months before to 9 months after the start of the measurement period","name":"Initial Population","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"IPOP","title":"Initial Population"},"value_obj":{"type":"ED","value":"Patients with a qualifying encounter in the measurement period AND with a diagnosis of prostate cancer AND with an order for ADT or an active medication of ADT with an intent for treatment greater than or equal to 12 months during the measurement period AND order for ADT in 3 months before to 9 months after the start of the measurement period","media_type":"text/plain"}},{"code":"DENOM","value":"Equals Initial Population","name":"Denominator","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DENOM","title":"Denominator"},"value_obj":{"type":"ED","value":"Equals Initial Population","media_type":"text/plain"}},{"code":"DENEX","value":"None","name":"Denominator Exclusions","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DENEX","title":"Denominator Exclusions"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"NUMER","value":"Patients with a bone density evaluation within the two years prior to the start of or less than three months after the start of ADT treatment","name":"Numerator","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"NUMER","title":"Numerator"},"value_obj":{"type":"ED","value":"Patients with a bone density evaluation within the two years prior to the start of or less than three months after the start of ADT treatment","media_type":"text/plain"}},{"code":"NUMEX","value":"Not Applicable","name":"Numerator Exclusions","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"NUMEX","title":"Numerator Exclusions"},"value_obj":{"type":"ED","value":"Not Applicable","media_type":"text/plain"}},{"code":"DENEXCEP","value":"Patient refused the bone density evaluation at the time ordered or did not have it performed within 3 months after the start of ADT","name":"Denominator Exceptions","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DENEXCEP","title":"Denominator Exceptions"},"value_obj":{"type":"ED","value":"Patient refused the bone density evaluation at the time ordered or did not have it performed within 3 months after the start of ADT","media_type":"text/plain"}},{"code":"SDE","value":"For every patient evaluated by this measure also identify payer, race, ethnicity and sex","name":"Supplemental Data Elements","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"SDE","title":"Supplemental Data Elements"},"value_obj":{"type":"ED","value":"For every patient evaluated by this measure also identify payer, race, ethnicity and sex","media_type":"text/plain"}}],"measure_period":{"type":"IVL_TS","low":{"type":"TS","value":"201201010000","inclusive?":true,"derived?":false},"high":{"type":"TS","value":"201212312359","inclusive?":true,"derived?":false},"width":{"type":"PQ","unit":"a","value":"1","inclusive?":true,"derived?":false}},"measure_scoring":"PROPORTION","population_criteria":{"IPP":{"conjunction?":true,"type":"IPP","hqmf_id":"786E05E4-F16E-492D-BAD4-2555F1CA3F40","preconditions":[{"id":2,"preconditions":[{"id":1,"reference":"BoneDensityProstateCancerAndrogenDeprivationTherapy__Initial_Population__544EFF74_C252_4EFD_9A57_B6915B2F1FC0"}],"conjunction_code":"allTrue"}]},"DENOM":{"conjunction?":true,"type":"DENOM","hqmf_id":"B876332D-519E-444E-839F-7FA9C919F1A6","preconditions":[{"id":4,"preconditions":[{"id":3,"reference":"BoneDensityProstateCancerAndrogenDeprivationTherapy__Denominator__544EFF74_C252_4EFD_9A57_B6915B2F1FC0"}],"conjunction_code":"allTrue"}]},"NUMER":{"conjunction?":true,"type":"NUMER","hqmf_id":"474E39BC-B7EA-4BBA-A7ED-62D50806F61D","preconditions":[{"id":6,"preconditions":[{"id":5,"reference":"BoneDensityProstateCancerAndrogenDeprivationTherapy__Numerator__544EFF74_C252_4EFD_9A57_B6915B2F1FC0"}],"conjunction_code":"allTrue"}]},"DENEXCEP":{"conjunction?":true,"type":"DENEXCEP","hqmf_id":"34047550-15EF-4204-9A8F-A0285CFE8F4F","preconditions":[{"id":8,"preconditions":[{"id":7,"reference":"BoneDensityProstateCancerAndrogenDeprivationTherapy__Denominator_Exception__544EFF74_C252_4EFD_9A57_B6915B2F1FC0"}],"conjunction_code":"atLeastOneTrue"}]}},"population_sets":[{"_id":"68923f6fa83e15671c2e390f","population_set_id":"PopulationSet_1","populations":{"DENEXCEP":{"_id":"68923f6fa83e15671c2e3910","hqmf_id":"34047550-15EF-4204-9A8F-A0285CFE8F4F","library_name":"BoneDensityProstateCancerAndrogenDeprivationTherapy","statement_name":"Denominator Exception"},"DENOM":{"_id":"68923f6fa83e15671c2e3911","hqmf_id":"B876332D-519E-444E-839F-7FA9C919F1A6","library_name":"BoneDensityProstateCancerAndrogenDeprivationTherapy","statement_name":"Denominator"},"IPP":{"_id":"68923f6fa83e15671c2e3912","hqmf_id":"786E05E4-F16E-492D-BAD4-2555F1CA3F40","library_name":"BoneDensityProstateCancerAndrogenDeprivationTherapy","statement_name":"Initial Population"},"NUMER":{"_id":"68923f6fa83e15671c2e3913","hqmf_id":"474E39BC-B7EA-4BBA-A7ED-62D50806F61D","library_name":"BoneDensityProstateCancerAndrogenDeprivationTherapy","statement_name":"Numerator"},"_id":"68923f6fa83e15671c2e3914","_type":"CQM::ProportionPopulationMap"},"supplemental_data_elements":[{"_id":"68923f6aa83e15671c2e37e8","hqmf_id":"5031EE3F-DF0A-48EC-B22F-B9D81226C3CA","library_name":"BoneDensityProstateCancerAndrogenDeprivationTherapy","statement_name":"SDE Ethnicity"},{"_id":"68923f6aa83e15671c2e37e9","hqmf_id":"814A9E2B-4203-4E71-B373-A62B35550185","library_name":"BoneDensityProstateCancerAndrogenDeprivationTherapy","statement_name":"SDE Payer"},{"_id":"68923f6aa83e15671c2e37ea","hqmf_id":"3019E58E-C42F-4989-8780-00C04B996541","library_name":"BoneDensityProstateCancerAndrogenDeprivationTherapy","statement_name":"SDE Race"},{"_id":"68923f6aa83e15671c2e37eb","hqmf_id":"DA110EDB-F245-48EF-85E5-FC924D73E2D8","library_name":"BoneDensityProstateCancerAndrogenDeprivationTherapy","statement_name":"SDE Sex"}],"title":"Population Criteria Section"}],"source_data_criteria":[{"_id":"68923f6fa83e15671c2e3915","_type":"QDM::PatientCharacteristicSex","codeListId":"2.16.840.1.113762.1.4.1","dataElementCodes":[],"description":"Patient Characteristic Sex: ONCAdministrativeSex","hqmfOid":"2.16.840.1.113883.10.20.28.4.55","id":"68923f6fa83e15671c2e3915","qdmCategory":"patient_characteristic","qdmStatus":"gender","qdmTitle":"Patient Characteristic Sex","qdmVersion":"5.6"},{"_id":"68923f6fa83e15671c2e3916","_type":"QDM::PatientCharacteristicEthnicity","codeListId":"2.16.840.1.114222.4.11.837","dataElementCodes":[],"description":"Patient Characteristic Ethnicity: Ethnicity","hqmfOid":"2.16.840.1.113883.10.20.28.4.56","id":"68923f6fa83e15671c2e3916","qdmCategory":"patient_characteristic","qdmStatus":"ethnicity","qdmTitle":"Patient Characteristic Ethnicity","qdmVersion":"5.6"},{"_id":"68923f6fa83e15671c2e3917","_type":"QDM::PatientCharacteristicRace","codeListId":"2.16.840.1.114222.4.11.836","dataElementCodes":[],"description":"Patient Characteristic Race: Race","hqmfOid":"2.16.840.1.113883.10.20.28.4.59","id":"68923f6fa83e15671c2e3917","qdmCategory":"patient_characteristic","qdmStatus":"race","qdmTitle":"Patient Characteristic Race","qdmVersion":"5.6"},{"_id":"68923f6fa83e15671c2e3918","_type":"QDM::Diagnosis","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"2.16.840.1.113883.3.526.3.319","dataElementCodes":[],"description":"Diagnosis: ProstateCancer","hqmfOid":"2.16.840.1.113883.10.20.28.4.110","id":"68923f6fa83e15671c2e3918","prevalencePeriod":null,"qdmCategory":"condition","qdmTitle":"Diagnosis","qdmVersion":"5.6","qrdaOid":"2.16.840.1.113883.10.20.24.3.135","severity":null},{"_id":"68923f6fa83e15671c2e3919","_type":"QDM::MedicationActive","codeListId":"2.16.840.1.113762.1.4.1151.48","dataElementCodes":[],"description":"Medication, Active: AndrogendeprivationtherapyforUrologyCare","dosage":null,"frequency":null,"hqmfOid":"2.16.840.1.113883.10.20.28.4.44","id":"68923f6fa83e15671c2e3919","qdmCategory":"medication","qdmStatus":"active","qdmTitle":"Medication, Active","qdmVersion":"5.6","relevantDatetime":null,"relevantPeriod":null,"route":null},{"_id":"68923f6fa83e15671c2e391a","_type":"QDM::MedicationOrder","authorDatetime":null,"codeListId":"2.16.840.1.113762.1.4.1151.48","dataElementCodes":[],"daysSupplied":null,"description":"Medication, Order: AndrogendeprivationtherapyforUrologyCare","dosage":null,"frequency":null,"hqmfOid":"2.16.840.1.113883.10.20.28.4.51","id":"68923f6fa83e15671c2e391a","negationRationale":null,"qdmCategory":"medication","qdmStatus":"order","qdmTitle":"Medication, Order","qdmVersion":"5.6","reason":null,"refills":null,"relatedTo":null,"relevantPeriod":null,"route":null,"setting":null,"supply":null},{"_id":"68923f6fa83e15671c2e391b","_type":"QDM::DiagnosticStudyOrder","authorDatetime":null,"codeListId":"2.16.840.1.113762.1.4.1151.38","dataElementCodes":[],"description":"Diagnostic Study, Order: DEXADualEnergyXrayAbsorptiometryBoneDensityforUrologyCare","hqmfOid":"2.16.840.1.113883.10.20.28.4.22","id":"68923f6fa83e15671c2e391b","negationRationale":null,"qdmCategory":"diagnostic_study","qdmStatus":"order","qdmTitle":"Diagnostic Study, Order","qdmVersion":"5.6","reason":null},{"_id":"68923f6fa83e15671c2e391c","_type":"QDM::DiagnosticStudyPerformed","authorDatetime":null,"codeListId":"2.16.840.1.113762.1.4.1151.38","components":null,"dataElementCodes":[],"description":"Diagnostic Study, Performed: DEXADualEnergyXrayAbsorptiometryBoneDensityforUrologyCare","facilityLocation":null,"hqmfOid":"2.16.840.1.113883.10.20.28.4.23","id":"68923f6fa83e15671c2e391c","interpretation":null,"method":null,"negationRationale":null,"qdmCategory":"diagnostic_study","qdmStatus":"performed","qdmTitle":"Diagnostic Study, Performed","qdmVersion":"5.6","reason":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null,"resultDatetime":null,"status":null},{"_id":"68923f6fa83e15671c2e391d","_type":"QDM::PatientCharacteristicPayer","codeListId":"2.16.840.1.114222.4.11.3591","dataElementCodes":[],"description":"Patient Characteristic Payer: PayerType","hqmfOid":"2.16.840.1.113883.10.20.28.4.58","id":"68923f6fa83e15671c2e391d","qdmCategory":"patient_characteristic","qdmStatus":"payer","qdmTitle":"Patient Characteristic Payer","qdmVersion":"5.6","relevantPeriod":null},{"_id":"68923f6fa83e15671c2e391e","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.464.1003.101.12.1001","dataElementCodes":[],"description":"Encounter, Performed: OfficeVisit","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"68923f6fa83e15671c2e391e","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"68923f6fa83e15671c2e391f","_type":"QDM::ProcedureOrder","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"drc-8b797b6490e30288e068e26af66037243c56b8fc61976aa97b200364f4792b80","dataElementCodes":[],"description":"Procedure, Order: Injection of leuprolide acetate for twelve month period (regime/therapy)","hqmfOid":"2.16.840.1.113883.10.20.28.4.66","id":"68923f6fa83e15671c2e391f","negationRationale":null,"priority":null,"qdmCategory":"procedure","qdmStatus":"order","qdmTitle":"Procedure, Order","qdmVersion":"5.6","rank":null,"reason":null}],"title":"Bone Density Evaluation for Patients with Prostate Cancer and Receiving Androgen Deprivation Therapy","updated_at":null,"value_set_ids":["68923f6aa83e15671c2e380f","68923f6fa83e15671c2e38f4","68923f6fa83e15671c2e38f5","68923f6fa83e15671c2e38f6","68923f6fa83e15671c2e38f7","68923f6fa83e15671c2e38f8","68923f6fa83e15671c2e38f9","68923f6fa83e15671c2e38fa","68923f6fa83e15671c2e38fb","68923f6fa83e15671c2e38fc","68923f6fa83e15671c2e38fd","68923f6fa83e15671c2e38fe","68923f6fa83e15671c2e38ff","68923f6fa83e15671c2e3900","68923f6fa83e15671c2e3901"]}