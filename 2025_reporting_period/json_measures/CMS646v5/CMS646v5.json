{"_id":"68923f77a83e15671c2e3fd9","calculate_sdes":null,"calculation_method":"PATIENT","cms_id":"CMS646v5","component":false,"component_hqmf_set_ids":[],"composite":false,"composite_hqmf_set_id":null,"cql_libraries":[{"_id":"68923f6fa83e15671c2e395e","cql":"library IntravesicalBacillusCalmetteGuerinForBladderCancer version '5.2.000'\r\n\r\nusing QDM version '5.6'\r\n\r\ninclude MATGlobalCommonFunctionsQDM version '8.0.000' called Global\r\n\r\ncodesystem \"SNOMEDCT\": 'urn:oid:2.16.840.1.113883.6.96'\r\ncodesystem \"ICD10CM\": 'urn:oid:2.16.840.1.113883.6.90'\r\ncodesystem \"ActCode\": 'urn:oid:2.16.840.1.113883.5.4'\r\n\r\nvalueset \"Active Tuberculosis for Urology Care\": 'urn:oid:2.16.840.1.113762.1.4.1151.56'\r\nvalueset \"BCG Bacillus Calmette Guerin for Urology Care\": 'urn:oid:2.16.840.1.113762.1.4.1151.52'\r\nvalueset \"Bladder Cancer for Urology Care\": 'urn:oid:2.16.840.1.113762.1.4.1151.45'\r\nvalueset \"Chemotherapy Agents for Advanced Cancer\": 'urn:oid:2.16.840.1.113762.1.4.1151.60'\r\nvalueset \"Cystectomy for Urology Care\": 'urn:oid:2.16.840.1.113762.1.4.1151.55'\r\nvalueset \"Ethnicity\": 'urn:oid:2.16.840.1.114222.4.11.837'\r\nvalueset \"HIV\": 'urn:oid:2.16.840.1.113883.3.464.1003.120.12.1003'\r\nvalueset \"Immunocompromised Conditions\": 'urn:oid:2.16.840.1.113883.3.666.5.1940'\r\nvalueset \"Immunosuppressive Drugs for Urology Care\": 'urn:oid:2.16.840.1.113762.1.4.1151.32'\r\nvalueset \"Mixed histology urothelial cell carcinoma for Urology Care\": 'urn:oid:2.16.840.1.113762.1.4.1151.39'\r\nvalueset \"Office Visit\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1001'\r\nvalueset \"ONC Administrative Sex\": 'urn:oid:2.16.840.1.113762.1.4.1'\r\nvalueset \"Payer Type\": 'urn:oid:2.16.840.1.114222.4.11.3591'\r\nvalueset \"Race\": 'urn:oid:2.16.840.1.114222.4.11.836'\r\nvalueset \"Unavailability of Bacillus Calmette Guerin for urology care\": 'urn:oid:2.16.840.1.113762.1.4.1151.44'\r\n\r\ncode \"American Joint Committee on Cancer cT1 (qualifier value)\": '1228889001' from \"SNOMEDCT\" display 'American Joint Committee on Cancer cT1 (qualifier value)'\r\ncode \"American Joint Committee on Cancer cTa (qualifier value)\": '1228883000' from \"SNOMEDCT\" display 'American Joint Committee on Cancer cTa (qualifier value)'\r\ncode \"American Joint Committee on Cancer cTis (qualifier value)\": '1228884006' from \"SNOMEDCT\" display 'American Joint Committee on Cancer cTis (qualifier value)'\r\ncode \"Carcinoma in situ of bladder\": 'D09.0' from \"ICD10CM\" display 'Carcinoma in situ of bladder'\r\ncode \"Combined radiotherapy (procedure)\": '169331000' from \"SNOMEDCT\" display 'Combined radiotherapy (procedure)'\r\ncode \"Tumor staging (tumor staging)\": '254292007' from \"SNOMEDCT\" display 'Tumor staging (tumor staging)'\r\ncode \"virtual\": 'VR' from \"ActCode\" display 'virtual'\r\n\r\nparameter \"Measurement Period\" Interval\u003cDateTime\u003e\r\n\r\ncontext Patient\r\n\r\ndefine \"Denominator\":\r\n  \"Initial Population\"\r\n\r\ndefine \"Denominator Exception\":\r\n  exists \"BCG Not Available Within 6 Months After Bladder Cancer Staging\"\r\n\r\ndefine \"Numerator\":\r\n  \"First BCG Administered\" is not null\r\n\r\ndefine \"SDE Ethnicity\":\r\n  [\"Patient Characteristic Ethnicity\": \"Ethnicity\"]\r\n\r\ndefine \"SDE Payer\":\r\n  [\"Patient Characteristic Payer\": \"Payer Type\"]\r\n\r\ndefine \"SDE Race\":\r\n  [\"Patient Characteristic Race\": \"Race\"]\r\n\r\ndefine \"SDE Sex\":\r\n  [\"Patient Characteristic Sex\": \"ONC Administrative Sex\"]\r\n\r\ndefine \"July 1 of Year Prior to the Measurement Period\":\r\n  DateTime((year from start of \"Measurement Period\" - 1), 7, 1, 0, 0, 0, 0, 0)\r\n\r\ndefine \"June 30 of the Measurement Period\":\r\n  DateTime((year from start of \"Measurement Period\"), 6, 30, 23, 59, 59, 0, 0)\r\n\r\ndefine \"Denominator Exclusion\":\r\n  exists \"Acute Tuberculosis Diagnosis\"\r\n    or exists \"Immunosuppressive Drugs\"\r\n    or exists \"Cystectomy Done\"\r\n    or \"Has Excluding  HIV, Immunocompromised Conditions or Mixed Histology Before Staging\"\r\n    or \"Has Excluding Chemotherapy or Radiotherapy Procedure Before Staging\"\r\n\r\ndefine \"Acute Tuberculosis Diagnosis\":\r\n  [\"Diagnosis\": \"Active Tuberculosis for Urology Care\"] ActiveTuberculosis\r\n    with \"First Bladder Cancer Staging Procedure\" FirstBladderCancerStaging\r\n      such that ActiveTuberculosis.prevalencePeriod overlaps after day of Global.\"NormalizeInterval\" ( FirstBladderCancerStaging.relevantDatetime, FirstBladderCancerStaging.relevantPeriod )\r\n\r\ndefine \"Cystectomy Done\":\r\n  [\"Procedure, Performed\": \"Cystectomy for Urology Care\"] Cystectomy\r\n    with \"First Bladder Cancer Staging Procedure\" FirstBladderCancerStaging\r\n      such that Global.EarliestOf ( Cystectomy.relevantDatetime, Cystectomy.relevantPeriod ) 6 months or less before start of Global.\"NormalizeInterval\" ( FirstBladderCancerStaging.relevantDatetime, FirstBladderCancerStaging.relevantPeriod )\r\n\r\ndefine \"Has Excluding  HIV, Immunocompromised Conditions or Mixed Histology Before Staging\":\r\n  exists ( ( [\"Diagnosis\": \"HIV\"]\r\n      union [\"Diagnosis\": \"Immunocompromised Conditions\"]\r\n      union [\"Diagnosis\": \"Mixed histology urothelial cell carcinoma for Urology Care\"] ) ExclusionDiagnosis\r\n      with \"First Bladder Cancer Staging Procedure\" FirstBladderCancerStaging\r\n        such that ExclusionDiagnosis.prevalencePeriod starts on or before day of start of Global.\"NormalizeInterval\" ( FirstBladderCancerStaging.relevantDatetime, FirstBladderCancerStaging.relevantPeriod )\r\n  )\r\n\r\ndefine \"Has Excluding Chemotherapy or Radiotherapy Procedure Before Staging\":\r\n  exists ( ( [\"Medication, Active\": \"Chemotherapy Agents for Advanced Cancer\"]\r\n      union [\"Procedure, Performed\": \"Combined radiotherapy (procedure)\"] ) ExclusionMedsProcedures\r\n      with \"First Bladder Cancer Staging Procedure\" FirstBladderCancerStaging\r\n        such that ExclusionMedsProcedures.relevantPeriod starts 6 months or less before Global.\"NormalizeInterval\" ( FirstBladderCancerStaging.relevantDatetime, FirstBladderCancerStaging.relevantPeriod )\r\n  )\r\n\r\ndefine \"First Bladder Cancer Staging Procedure\":\r\n  First([\"Procedure, Performed\": \"Tumor staging (tumor staging)\"] BladderCancerStaging\r\n      with \"Bladder Cancer Diagnosis\" BladderCancer\r\n        such that Global.\"NormalizeInterval\"(BladderCancerStaging.relevantDatetime, BladderCancerStaging.relevantPeriod) starts on or before day of start BladderCancer.prevalencePeriod\r\n      sort by start of Global.\"NormalizeInterval\"(relevantDatetime, relevantPeriod)\r\n  )\r\n\r\ndefine \"Has Qualifying Encounter\":\r\n  exists [\"Encounter, Performed\": \"Office Visit\"] ValidEncounter\r\n    where ValidEncounter.relevantPeriod during day of \"Measurement Period\"\r\n      and ValidEncounter.class !~ \"virtual\"\r\n\r\ndefine \"Bladder Cancer Diagnosis\":\r\n  [\"Diagnosis\": \"Bladder Cancer for Urology Care\"] BladderCancer\r\n    where BladderCancer.prevalencePeriod starts before end of \"Measurement Period\"\r\n\r\ndefine \"BCG Not Available Within 6 Months After Bladder Cancer Staging\":\r\n  ( [\"Medication, Not Administered\": \"BCG Bacillus Calmette Guerin for Urology Care\"] BCGnotGiven\r\n      with \"First Bladder Cancer Staging Procedure\" FirstBladderCancerStaging\r\n        such that BCGnotGiven.authorDatetime 6 months or less after start of Global.\"NormalizeInterval\" ( FirstBladderCancerStaging.relevantDatetime, FirstBladderCancerStaging.relevantPeriod )\r\n      where BCGnotGiven.negationRationale in \"Unavailability of Bacillus Calmette Guerin for urology care\"\r\n  )\r\n\r\ndefine \"First Bladder Cancer Staging Procedure during 6 Months Prior to Measurement Period through the First 6 Months of Measurement Period\":\r\n  \"First Bladder Cancer Staging Procedure\" FirstBladderCancerStaging\r\n    where Global.\"NormalizeInterval\" ( FirstBladderCancerStaging.relevantDatetime, FirstBladderCancerStaging.relevantPeriod ) during day of Interval[\"July 1 of Year Prior to the Measurement Period\", \"June 30 of the Measurement Period\"]\r\n\r\ndefine \"First BCG Administered\":\r\n  First([\"Medication, Administered\": \"BCG Bacillus Calmette Guerin for Urology Care\"] BCG\r\n      with \"First Bladder Cancer Staging Procedure\" FirstBladderCancerStaging\r\n        such that Global.\"NormalizeInterval\"(BCG.relevantDatetime, BCG.relevantPeriod) starts 6 months or less after start of Global.\"NormalizeInterval\"(FirstBladderCancerStaging.relevantDatetime, FirstBladderCancerStaging.relevantPeriod)\r\n      sort by start of Global.\"NormalizeInterval\"(relevantDatetime, relevantPeriod)\r\n  )\r\n\r\ndefine \"Immunosuppressive Drugs\":\r\n  [\"Medication, Active\": \"Immunosuppressive Drugs for Urology Care\"] ImmunosuppressiveDrugs\r\n    with \"First Bladder Cancer Staging Procedure\" FirstBladderCancerStaging\r\n      such that Global.\"NormalizeInterval\" ( ImmunosuppressiveDrugs.relevantDatetime, ImmunosuppressiveDrugs.relevantPeriod ) starts on or before day of start of Global.\"NormalizeInterval\" ( FirstBladderCancerStaging.relevantDatetime, FirstBladderCancerStaging.relevantPeriod )\r\n\r\ndefine \"Initial Population\":\r\n  \"Has Most Recent Bladder Cancer Tumor Staging is Ta HG, Tis, T1\"\r\n    and \"Has Qualifying Encounter\"\n\n/*Ta High Grade only to be included.  Ta low grade is to be excluded from this measure.*/\r\n\r\n\r\ndefine \"Has Most Recent Bladder Cancer Tumor Staging is Ta HG, Tis, T1\":\r\n  ( \"First Bladder Cancer Staging Procedure during 6 Months Prior to Measurement Period through the First 6 Months of Measurement Period\" FirstBladderCancerStagingMP\r\n      where FirstBladderCancerStagingMP.result ~ \"American Joint Committee on Cancer cT1 (qualifier value)\"\r\n        or FirstBladderCancerStagingMP.result ~ \"American Joint Committee on Cancer cTis (qualifier value)\"\r\n        or FirstBladderCancerStagingMP.result ~ \"American Joint Committee on Cancer cTa (qualifier value)\"\r\n        or FirstBladderCancerStagingMP.result ~ \"Carcinoma in situ of bladder\"\r\n  ) is not null","elm":{"library":{"annotation":[{"translatorOptions":"EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion,DisableMethodInvocation","type":"CqlToElmInfo"},{"type":"Annotation","s":{"r":"134","s":[{"value":["","library IntravesicalBacillusCalmetteGuerinForBladderCancer version '5.2.000'"]}]}}],"identifier":{"id":"IntravesicalBacillusCalmetteGuerinForBladderCancer","version":"5.2.000"},"schemaIdentifier":{"id":"urn:hl7-org:elm","version":"r1"},"usings":{"def":[{"localIdentifier":"System","uri":"urn:hl7-org:elm-types:r1"},{"localId":"1","locator":"3:1-3:23","localIdentifier":"QDM","uri":"urn:healthit-gov:qdm:v5_6","version":"5.6","annotation":[{"type":"Annotation","s":{"r":"1","s":[{"value":["","using "]},{"s":[{"value":["QDM"]}]},{"value":[" version ","'5.6'"]}]}}]}]},"includes":{"def":[{"localId":"2","locator":"5:1-5:67","localIdentifier":"Global","path":"MATGlobalCommonFunctionsQDM","version":"8.0.000","annotation":[{"type":"Annotation","s":{"r":"2","s":[{"value":["","include "]},{"s":[{"value":["MATGlobalCommonFunctionsQDM"]}]},{"value":[" version ","'8.0.000'"," called ","Global"]}]}}]}]},"parameters":{"def":[{"localId":"37","locator":"35:1-35:49","name":"Measurement Period","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"37","s":[{"value":["","parameter ","\"Measurement Period\""," "]},{"r":"36","s":[{"value":["Interval\u003c"]},{"r":"35","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}}],"parameterTypeSpecifier":{"localId":"36","locator":"35:32-35:49","type":"IntervalTypeSpecifier","pointType":{"localId":"35","locator":"35:41-35:48","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},"codeSystems":{"def":[{"localId":"3","locator":"7:1-7:55","name":"SNOMEDCT","id":"2.16.840.1.113883.6.96","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"3","s":[{"value":["","codesystem ","\"SNOMEDCT\"",": ","'urn:oid:2.16.840.1.113883.6.96'"]}]}}]},{"localId":"4","locator":"8:1-8:54","name":"ICD10CM","id":"2.16.840.1.113883.6.90","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"4","s":[{"value":["","codesystem ","\"ICD10CM\"",": ","'urn:oid:2.16.840.1.113883.6.90'"]}]}}]},{"localId":"5","locator":"9:1-9:53","name":"ActCode","id":"2.16.840.1.113883.5.4","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"5","s":[{"value":["","codesystem ","\"ActCode\"",": ","'urn:oid:2.16.840.1.113883.5.4'"]}]}}]}]},"valueSets":{"def":[{"localId":"6","locator":"11:1-11:88","name":"Active Tuberculosis for Urology Care","id":"2.16.840.1.113762.1.4.1151.56","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"6","s":[{"value":["","valueset ","\"Active Tuberculosis for Urology Care\"",": ","'urn:oid:2.16.840.1.113762.1.4.1151.56'"]}]}}]},{"localId":"7","locator":"12:1-12:97","name":"BCG Bacillus Calmette Guerin for Urology Care","id":"2.16.840.1.113762.1.4.1151.52","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"7","s":[{"value":["","valueset ","\"BCG Bacillus Calmette Guerin for Urology Care\"",": ","'urn:oid:2.16.840.1.113762.1.4.1151.52'"]}]}}]},{"localId":"8","locator":"13:1-13:83","name":"Bladder Cancer for Urology Care","id":"2.16.840.1.113762.1.4.1151.45","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"8","s":[{"value":["","valueset ","\"Bladder Cancer for Urology Care\"",": ","'urn:oid:2.16.840.1.113762.1.4.1151.45'"]}]}}]},{"localId":"9","locator":"14:1-14:91","name":"Chemotherapy Agents for Advanced Cancer","id":"2.16.840.1.113762.1.4.1151.60","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"9","s":[{"value":["","valueset ","\"Chemotherapy Agents for Advanced Cancer\"",": ","'urn:oid:2.16.840.1.113762.1.4.1151.60'"]}]}}]},{"localId":"10","locator":"15:1-15:79","name":"Cystectomy for Urology Care","id":"2.16.840.1.113762.1.4.1151.55","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"10","s":[{"value":["","valueset ","\"Cystectomy for Urology Care\"",": ","'urn:oid:2.16.840.1.113762.1.4.1151.55'"]}]}}]},{"localId":"11","locator":"16:1-16:58","name":"Ethnicity","id":"2.16.840.1.114222.4.11.837","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"11","s":[{"value":["","valueset ","\"Ethnicity\"",": ","'urn:oid:2.16.840.1.114222.4.11.837'"]}]}}]},{"localId":"12","locator":"17:1-17:66","name":"HIV","id":"2.16.840.1.113883.3.464.1003.120.12.1003","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"12","s":[{"value":["","valueset ","\"HIV\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.120.12.1003'"]}]}}]},{"localId":"13","locator":"18:1-18:81","name":"Immunocompromised Conditions","id":"2.16.840.1.113883.3.666.5.1940","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"13","s":[{"value":["","valueset ","\"Immunocompromised Conditions\"",": ","'urn:oid:2.16.840.1.113883.3.666.5.1940'"]}]}}]},{"localId":"14","locator":"19:1-19:92","name":"Immunosuppressive Drugs for Urology Care","id":"2.16.840.1.113762.1.4.1151.32","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"14","s":[{"value":["","valueset ","\"Immunosuppressive Drugs for Urology Care\"",": ","'urn:oid:2.16.840.1.113762.1.4.1151.32'"]}]}}]},{"localId":"15","locator":"20:1-20:110","name":"Mixed histology urothelial cell carcinoma for Urology Care","id":"2.16.840.1.113762.1.4.1151.39","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"15","s":[{"value":["","valueset ","\"Mixed histology urothelial cell carcinoma for Urology Care\"",": ","'urn:oid:2.16.840.1.113762.1.4.1151.39'"]}]}}]},{"localId":"16","locator":"21:1-21:75","name":"Office Visit","id":"2.16.840.1.113883.3.464.1003.101.12.1001","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"16","s":[{"value":["","valueset ","\"Office Visit\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1001'"]}]}}]},{"localId":"17","locator":"22:1-22:68","name":"ONC Administrative Sex","id":"2.16.840.1.113762.1.4.1","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"17","s":[{"value":["","valueset ","\"ONC Administrative Sex\"",": ","'urn:oid:2.16.840.1.113762.1.4.1'"]}]}}]},{"localId":"18","locator":"23:1-23:60","name":"Payer Type","id":"2.16.840.1.114222.4.11.3591","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"18","s":[{"value":["","valueset ","\"Payer Type\"",": ","'urn:oid:2.16.840.1.114222.4.11.3591'"]}]}}]},{"localId":"19","locator":"24:1-24:53","name":"Race","id":"2.16.840.1.114222.4.11.836","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"19","s":[{"value":["","valueset ","\"Race\"",": ","'urn:oid:2.16.840.1.114222.4.11.836'"]}]}}]},{"localId":"20","locator":"25:1-25:111","name":"Unavailability of Bacillus Calmette Guerin for urology care","id":"2.16.840.1.113762.1.4.1151.44","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"20","s":[{"value":["","valueset ","\"Unavailability of Bacillus Calmette Guerin for urology care\"",": ","'urn:oid:2.16.840.1.113762.1.4.1151.44'"]}]}}]}]},"codes":{"def":[{"localId":"22","locator":"27:1-27:160","name":"American Joint Committee on Cancer cT1 (qualifier value)","id":"1228889001","display":"American Joint Committee on Cancer cT1 (qualifier value)","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"22","s":[{"value":["","code ","\"American Joint Committee on Cancer cT1 (qualifier value)\"",": ","'1228889001'"," from "]},{"r":"21","s":[{"value":["\"SNOMEDCT\""]}]},{"value":[" display ","'American Joint Committee on Cancer cT1 (qualifier value)'"]}]}}],"codeSystem":{"localId":"21","locator":"27:84-27:93","name":"SNOMEDCT"}},{"localId":"24","locator":"28:1-28:160","name":"American Joint Committee on Cancer cTa (qualifier value)","id":"1228883000","display":"American Joint Committee on Cancer cTa (qualifier value)","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"24","s":[{"value":["","code ","\"American Joint Committee on Cancer cTa (qualifier value)\"",": ","'1228883000'"," from "]},{"r":"23","s":[{"value":["\"SNOMEDCT\""]}]},{"value":[" display ","'American Joint Committee on Cancer cTa (qualifier value)'"]}]}}],"codeSystem":{"localId":"23","locator":"28:84-28:93","name":"SNOMEDCT"}},{"localId":"26","locator":"29:1-29:162","name":"American Joint Committee on Cancer cTis (qualifier value)","id":"1228884006","display":"American Joint Committee on Cancer cTis (qualifier value)","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"26","s":[{"value":["","code ","\"American Joint Committee on Cancer cTis (qualifier value)\"",": ","'1228884006'"," from "]},{"r":"25","s":[{"value":["\"SNOMEDCT\""]}]},{"value":[" display ","'American Joint Committee on Cancer cTis (qualifier value)'"]}]}}],"codeSystem":{"localId":"25","locator":"29:85-29:94","name":"SNOMEDCT"}},{"localId":"28","locator":"30:1-30:98","name":"Carcinoma in situ of bladder","id":"D09.0","display":"Carcinoma in situ of bladder","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"28","s":[{"value":["","code ","\"Carcinoma in situ of bladder\"",": ","'D09.0'"," from "]},{"r":"27","s":[{"value":["\"ICD10CM\""]}]},{"value":[" display ","'Carcinoma in situ of bladder'"]}]}}],"codeSystem":{"localId":"27","locator":"30:51-30:59","name":"ICD10CM"}},{"localId":"30","locator":"31:1-31:113","name":"Combined radiotherapy (procedure)","id":"169331000","display":"Combined radiotherapy (procedure)","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"30","s":[{"value":["","code ","\"Combined radiotherapy (procedure)\"",": ","'169331000'"," from "]},{"r":"29","s":[{"value":["\"SNOMEDCT\""]}]},{"value":[" display ","'Combined radiotherapy (procedure)'"]}]}}],"codeSystem":{"localId":"29","locator":"31:60-31:69","name":"SNOMEDCT"}},{"localId":"32","locator":"32:1-32:105","name":"Tumor staging (tumor staging)","id":"254292007","display":"Tumor staging (tumor staging)","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"32","s":[{"value":["","code ","\"Tumor staging (tumor staging)\"",": ","'254292007'"," from "]},{"r":"31","s":[{"value":["\"SNOMEDCT\""]}]},{"value":[" display ","'Tumor staging (tumor staging)'"]}]}}],"codeSystem":{"localId":"31","locator":"32:56-32:65","name":"SNOMEDCT"}},{"localId":"34","locator":"33:1-33:53","name":"virtual","id":"VR","display":"virtual","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"34","s":[{"value":["","code ","\"virtual\"",": ","'VR'"," from "]},{"r":"33","s":[{"value":["\"ActCode\""]}]},{"value":[" display ","'virtual'"]}]}}],"codeSystem":{"localId":"33","locator":"33:27-33:35","name":"ActCode"}}]},"contexts":{"def":[{"locator":"37:1-37:15","name":"Patient"}]},"statements":{"def":[{"locator":"37:1-37:15","name":"Patient","context":"Patient","expression":{"type":"SingletonFrom","operand":{"locator":"37:1-37:15","dataType":"{urn:healthit-gov:qdm:v5_6}Patient","templateId":"Patient","type":"Retrieve"}}},{"localId":"48","locator":"110:1-112:82","name":"Bladder Cancer Diagnosis","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"48","s":[{"value":["","define ","\"Bladder Cancer Diagnosis\"",":\n  "]},{"r":"47","s":[{"s":[{"r":"41","s":[{"r":"40","s":[{"r":"40","s":[{"value":["[","\"Diagnosis\"",": "]},{"s":[{"value":["\"Bladder Cancer for Urology Care\""]}]},{"value":["]"]}]}]},{"value":[" ","BladderCancer"]}]}]},{"value":["\n    "]},{"r":"46","s":[{"value":["where "]},{"r":"46","s":[{"r":"43","s":[{"r":"42","s":[{"value":["BladderCancer"]}]},{"value":["."]},{"r":"43","s":[{"value":["prevalencePeriod"]}]}]},{"r":"46","value":[" ","starts before"," "]},{"r":"45","s":[{"value":["end of "]},{"r":"44","s":[{"value":["\"Measurement Period\""]}]}]}]}]}]}]}}],"expression":{"localId":"47","locator":"111:3-112:82","type":"Query","source":[{"localId":"41","locator":"111:3-111:64","alias":"BladderCancer","expression":{"localId":"40","locator":"111:3-111:50","dataType":"{urn:healthit-gov:qdm:v5_6}Diagnosis","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"111:17-111:49","name":"Bladder Cancer for Urology Care","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"46","locator":"112:5-112:82","type":"Before","operand":[{"locator":"112:42-112:47","type":"Start","operand":{"localId":"43","locator":"112:11-112:40","path":"prevalencePeriod","scope":"BladderCancer","type":"Property"}},{"localId":"45","locator":"112:56-112:82","type":"End","operand":{"localId":"44","locator":"112:63-112:82","name":"Measurement Period","type":"ParameterRef"}}]}}},{"localId":"70","locator":"98:1-103:3","name":"First Bladder Cancer Staging Procedure","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"70","s":[{"value":["","define ","\"First Bladder Cancer Staging Procedure\"",":\n  "]},{"r":"69","s":[{"value":["First","("]},{"r":"68","s":[{"s":[{"r":"39","s":[{"r":"38","s":[{"r":"38","s":[{"value":["[","\"Procedure, Performed\"",": "]},{"s":[{"value":["\"Tumor staging (tumor staging)\""]}]},{"value":["]"]}]}]},{"value":[" ","BladderCancerStaging"]}]}]},{"value":["\n      "]},{"r":"60","s":[{"value":["with "]},{"r":"50","s":[{"r":"49","s":[{"s":[{"value":["\"Bladder Cancer Diagnosis\""]}]}]},{"value":[" ","BladderCancer"]}]},{"value":["\n        such that "]},{"r":"59","s":[{"r":"56","s":[{"r":"51","s":[{"value":["Global"]}]},{"value":["."]},{"r":"56","s":[{"value":["\"NormalizeInterval\"","("]},{"r":"53","s":[{"r":"52","s":[{"value":["BladderCancerStaging"]}]},{"value":["."]},{"r":"53","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"55","s":[{"r":"54","s":[{"value":["BladderCancerStaging"]}]},{"value":["."]},{"r":"55","s":[{"value":["relevantPeriod"]}]}]},{"value":[")"]}]}]},{"r":"59","value":[" ","starts on or before day of start"," "]},{"r":"58","s":[{"r":"57","s":[{"value":["BladderCancer"]}]},{"value":["."]},{"r":"58","s":[{"value":["prevalencePeriod"]}]}]}]}]},{"value":["\n      "]},{"r":"67","s":[{"value":["sort by "]},{"r":"66","s":[{"r":"65","s":[{"value":["start of "]},{"r":"64","s":[{"r":"61","s":[{"value":["Global"]}]},{"value":["."]},{"r":"64","s":[{"value":["\"NormalizeInterval\"","("]},{"r":"62","s":[{"value":["relevantDatetime"]}]},{"value":[", "]},{"r":"63","s":[{"value":["relevantPeriod"]}]},{"value":[")"]}]}]}]}]}]}]},{"value":["\n  )"]}]}]}}],"expression":{"localId":"69","locator":"99:3-103:3","type":"First","source":{"localId":"68","locator":"99:9-102:83","type":"Query","source":[{"localId":"39","locator":"99:9-99:86","alias":"BladderCancerStaging","expression":{"localId":"38","locator":"99:9-99:65","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveProcedurePerformed","templateId":"PositiveProcedurePerformed","codeProperty":"code","codeComparator":"~","type":"Retrieve","codes":{"type":"ToList","operand":{"locator":"99:34-99:64","name":"Tumor staging (tumor staging)","type":"CodeRef"}}}}],"relationship":[{"localId":"60","locator":"100:7-101:184","alias":"BladderCancer","type":"With","expression":{"localId":"49","locator":"100:12-100:37","name":"Bladder Cancer Diagnosis","type":"ExpressionRef"},"suchThat":{"localId":"59","locator":"101:19-101:184","precision":"Day","type":"SameOrBefore","operand":[{"locator":"101:122-101:127","type":"Start","operand":{"localId":"56","locator":"101:19-101:120","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"53","locator":"101:46-101:82","path":"relevantDatetime","scope":"BladderCancerStaging","type":"Property"},{"localId":"55","locator":"101:85-101:119","path":"relevantPeriod","scope":"BladderCancerStaging","type":"Property"}]}},{"locator":"101:149-101:153","type":"Start","operand":{"localId":"58","locator":"101:155-101:184","path":"prevalencePeriod","scope":"BladderCancer","type":"Property"}}]}}],"sort":{"localId":"67","locator":"102:7-102:83","by":[{"localId":"66","locator":"102:15-102:83","direction":"asc","type":"ByExpression","expression":{"localId":"65","locator":"102:15-102:83","type":"Start","operand":{"localId":"64","locator":"102:24-102:83","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"62","locator":"102:51-102:66","name":"relevantDatetime","type":"IdentifierRef"},{"localId":"63","locator":"102:69-102:82","name":"relevantPeriod","type":"IdentifierRef"}]}}}]}}}},{"localId":"92","locator":"60:1-61:78","name":"July 1 of Year Prior to the Measurement Period","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"92","s":[{"value":["","define ","\"July 1 of Year Prior to the Measurement Period\"",":\n  "]},{"r":"91","s":[{"value":["DateTime","("]},{"r":"83","s":[{"value":["("]},{"r":"83","s":[{"r":"81","s":[{"value":["year from "]},{"r":"80","s":[{"value":["start of "]},{"r":"79","s":[{"value":["\"Measurement Period\""]}]}]}]},{"r":"82","value":[" - ","1"]}]},{"value":[")"]}]},{"r":"84","value":[", ","7",", ","1",", ","0",", ","0",", ","0",", ","0",", ","0",")"]}]}]}}],"expression":{"localId":"91","locator":"61:3-61:78","type":"DateTime","year":{"localId":"83","locator":"61:12-61:56","type":"Subtract","operand":[{"localId":"81","locator":"61:13-61:51","precision":"Year","type":"DateTimeComponentFrom","operand":{"localId":"80","locator":"61:23-61:51","type":"Start","operand":{"localId":"79","locator":"61:32-61:51","name":"Measurement Period","type":"ParameterRef"}}},{"localId":"82","locator":"61:55","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"1","type":"Literal"}]},"month":{"localId":"84","locator":"61:59","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"7","type":"Literal"},"day":{"localId":"85","locator":"61:62","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"1","type":"Literal"},"hour":{"localId":"86","locator":"61:65","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"0","type":"Literal"},"minute":{"localId":"87","locator":"61:68","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"0","type":"Literal"},"second":{"localId":"88","locator":"61:71","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"0","type":"Literal"},"millisecond":{"localId":"89","locator":"61:74","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"0","type":"Literal"},"timezoneOffset":{"type":"ToDecimal","operand":{"localId":"90","locator":"61:77","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"0","type":"Literal"}}}},{"localId":"105","locator":"63:1-64:78","name":"June 30 of the Measurement Period","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"105","s":[{"value":["","define ","\"June 30 of the Measurement Period\"",":\n  "]},{"r":"104","s":[{"value":["DateTime","("]},{"r":"96","s":[{"value":["("]},{"r":"96","s":[{"value":["year from "]},{"r":"95","s":[{"value":["start of "]},{"r":"94","s":[{"value":["\"Measurement Period\""]}]}]}]},{"value":[")"]}]},{"r":"97","value":[", ","6",", ","30",", ","23",", ","59",", ","59",", ","0",", ","0",")"]}]}]}}],"expression":{"localId":"104","locator":"64:3-64:78","type":"DateTime","year":{"localId":"96","locator":"64:12-64:52","precision":"Year","type":"DateTimeComponentFrom","operand":{"localId":"95","locator":"64:23-64:51","type":"Start","operand":{"localId":"94","locator":"64:32-64:51","name":"Measurement Period","type":"ParameterRef"}}},"month":{"localId":"97","locator":"64:55","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"6","type":"Literal"},"day":{"localId":"98","locator":"64:58-64:59","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"30","type":"Literal"},"hour":{"localId":"99","locator":"64:62-64:63","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"23","type":"Literal"},"minute":{"localId":"100","locator":"64:66-64:67","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"59","type":"Literal"},"second":{"localId":"101","locator":"64:70-64:71","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"59","type":"Literal"},"millisecond":{"localId":"102","locator":"64:74","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"0","type":"Literal"},"timezoneOffset":{"type":"ToDecimal","operand":{"localId":"103","locator":"64:77","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"0","type":"Literal"}}}},{"localId":"110","locator":"121:1-123:235","name":"First Bladder Cancer Staging Procedure during 6 Months Prior to Measurement Period through the First 6 Months of Measurement Period","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"110","s":[{"value":["","define ","\"First Bladder Cancer Staging Procedure during 6 Months Prior to Measurement Period through the First 6 Months of Measurement Period\"",":\n  "]},{"r":"109","s":[{"s":[{"r":"72","s":[{"r":"71","s":[{"s":[{"value":["\"First Bladder Cancer Staging Procedure\""]}]}]},{"value":[" ","FirstBladderCancerStaging"]}]}]},{"value":["\n    "]},{"r":"108","s":[{"value":["where "]},{"r":"108","s":[{"r":"78","s":[{"r":"73","s":[{"value":["Global"]}]},{"value":["."]},{"r":"78","s":[{"value":["\"NormalizeInterval\""," ( "]},{"r":"75","s":[{"r":"74","s":[{"value":["FirstBladderCancerStaging"]}]},{"value":["."]},{"r":"75","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"77","s":[{"r":"76","s":[{"value":["FirstBladderCancerStaging"]}]},{"value":["."]},{"r":"77","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]},{"r":"108","value":[" ","during day of"," "]},{"r":"107","s":[{"value":["Interval["]},{"r":"93","s":[{"value":["\"July 1 of Year Prior to the Measurement Period\""]}]},{"value":[", "]},{"r":"106","s":[{"value":["\"June 30 of the Measurement Period\""]}]},{"value":["]"]}]}]}]}]}]}}],"expression":{"localId":"109","locator":"122:3-123:235","type":"Query","source":[{"localId":"72","locator":"122:3-122:68","alias":"FirstBladderCancerStaging","expression":{"localId":"71","locator":"122:3-122:42","name":"First Bladder Cancer Staging Procedure","type":"ExpressionRef"}}],"relationship":[],"where":{"localId":"108","locator":"123:5-123:235","precision":"Day","type":"IncludedIn","operand":[{"localId":"78","locator":"123:11-123:125","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"75","locator":"123:40-123:81","path":"relevantDatetime","scope":"FirstBladderCancerStaging","type":"Property"},{"localId":"77","locator":"123:84-123:123","path":"relevantPeriod","scope":"FirstBladderCancerStaging","type":"Property"}]},{"localId":"107","locator":"123:141-123:235","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"93","locator":"123:150-123:197","name":"July 1 of Year Prior to the Measurement Period","type":"ExpressionRef"},"high":{"localId":"106","locator":"123:200-123:234","name":"June 30 of the Measurement Period","type":"ExpressionRef"}}]}}},{"localId":"134","locator":"142:1-148:15","name":"Has Most Recent Bladder Cancer Tumor Staging is Ta HG, Tis, T1","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"134","s":[{"value":["/*Ta High Grade only to be included.  Ta low grade is to be excluded from this measure.*/\n","define ","\"Has Most Recent Bladder Cancer Tumor Staging is Ta HG, Tis, T1\"",":\n  "]},{"r":"133","s":[{"r":"132","s":[{"value":["( "]},{"r":"132","s":[{"s":[{"r":"112","s":[{"r":"111","s":[{"s":[{"value":["\"First Bladder Cancer Staging Procedure during 6 Months Prior to Measurement Period through the First 6 Months of Measurement Period\""]}]}]},{"value":[" ","FirstBladderCancerStagingMP"]}]}]},{"value":["\n      "]},{"r":"131","s":[{"value":["where "]},{"r":"131","s":[{"r":"126","s":[{"r":"121","s":[{"r":"116","s":[{"r":"114","s":[{"r":"113","s":[{"value":["FirstBladderCancerStagingMP"]}]},{"value":["."]},{"r":"114","s":[{"value":["result"]}]}]},{"value":[" ","~"," "]},{"r":"115","s":[{"value":["\"American Joint Committee on Cancer cT1 (qualifier value)\""]}]}]},{"value":["\n        or "]},{"r":"120","s":[{"r":"118","s":[{"r":"117","s":[{"value":["FirstBladderCancerStagingMP"]}]},{"value":["."]},{"r":"118","s":[{"value":["result"]}]}]},{"value":[" ","~"," "]},{"r":"119","s":[{"value":["\"American Joint Committee on Cancer cTis (qualifier value)\""]}]}]}]},{"value":["\n        or "]},{"r":"125","s":[{"r":"123","s":[{"r":"122","s":[{"value":["FirstBladderCancerStagingMP"]}]},{"value":["."]},{"r":"123","s":[{"value":["result"]}]}]},{"value":[" ","~"," "]},{"r":"124","s":[{"value":["\"American Joint Committee on Cancer cTa (qualifier value)\""]}]}]}]},{"value":["\n        or "]},{"r":"130","s":[{"r":"128","s":[{"r":"127","s":[{"value":["FirstBladderCancerStagingMP"]}]},{"value":["."]},{"r":"128","s":[{"value":["result"]}]}]},{"value":[" ","~"," "]},{"r":"129","s":[{"value":["\"Carcinoma in situ of bladder\""]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":[" is not null"]}]}]}}],"expression":{"localId":"133","locator":"143:3-148:15","type":"Not","operand":{"locator":"143:3-148:15","type":"IsNull","operand":{"localId":"132","locator":"143:3-148:3","type":"Query","source":[{"localId":"112","locator":"143:5-143:165","alias":"FirstBladderCancerStagingMP","expression":{"localId":"111","locator":"143:5-143:137","name":"First Bladder Cancer Staging Procedure during 6 Months Prior to Measurement Period through the First 6 Months of Measurement Period","type":"ExpressionRef"}}],"relationship":[],"where":{"localId":"131","locator":"144:7-147:78","type":"Or","operand":[{"localId":"126","locator":"144:13-146:106","type":"Or","operand":[{"localId":"121","locator":"144:13-145:107","type":"Or","operand":[{"localId":"116","locator":"144:13-144:107","type":"Equivalent","operand":[{"asType":"{urn:hl7-org:elm-types:r1}Code","type":"As","operand":{"localId":"114","locator":"144:13-144:46","path":"result","scope":"FirstBladderCancerStagingMP","type":"Property"}},{"localId":"115","locator":"144:50-144:107","name":"American Joint Committee on Cancer cT1 (qualifier value)","type":"CodeRef"}]},{"localId":"120","locator":"145:12-145:107","type":"Equivalent","operand":[{"asType":"{urn:hl7-org:elm-types:r1}Code","type":"As","operand":{"localId":"118","locator":"145:12-145:45","path":"result","scope":"FirstBladderCancerStagingMP","type":"Property"}},{"localId":"119","locator":"145:49-145:107","name":"American Joint Committee on Cancer cTis (qualifier value)","type":"CodeRef"}]}]},{"localId":"125","locator":"146:12-146:106","type":"Equivalent","operand":[{"asType":"{urn:hl7-org:elm-types:r1}Code","type":"As","operand":{"localId":"123","locator":"146:12-146:45","path":"result","scope":"FirstBladderCancerStagingMP","type":"Property"}},{"localId":"124","locator":"146:49-146:106","name":"American Joint Committee on Cancer cTa (qualifier value)","type":"CodeRef"}]}]},{"localId":"130","locator":"147:12-147:78","type":"Equivalent","operand":[{"asType":"{urn:hl7-org:elm-types:r1}Code","type":"As","operand":{"localId":"128","locator":"147:12-147:45","path":"result","scope":"FirstBladderCancerStagingMP","type":"Property"}},{"localId":"129","locator":"147:49-147:78","name":"Carcinoma in situ of bladder","type":"CodeRef"}]}]}}}}},{"localId":"150","locator":"105:1-108:43","name":"Has Qualifying Encounter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"150","s":[{"value":["","define ","\"Has Qualifying Encounter\"",":\n  "]},{"r":"149","s":[{"value":["exists "]},{"r":"148","s":[{"s":[{"r":"137","s":[{"r":"136","s":[{"r":"136","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Office Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","ValidEncounter"]}]}]},{"value":["\n    "]},{"r":"147","s":[{"value":["where "]},{"r":"147","s":[{"r":"141","s":[{"r":"139","s":[{"r":"138","s":[{"value":["ValidEncounter"]}]},{"value":["."]},{"r":"139","s":[{"value":["relevantPeriod"]}]}]},{"r":"141","value":[" ","during day of"," "]},{"r":"140","s":[{"value":["\"Measurement Period\""]}]}]},{"value":["\n      and "]},{"r":"146","s":[{"r":"143","s":[{"r":"142","s":[{"value":["ValidEncounter"]}]},{"value":["."]},{"r":"143","s":[{"value":["class"]}]}]},{"value":[" ","!~"," "]},{"r":"144","s":[{"value":["\"virtual\""]}]}]}]}]}]}]}]}}],"expression":{"localId":"149","locator":"106:3-108:43","type":"Exists","operand":{"localId":"148","locator":"106:10-108:43","type":"Query","source":[{"localId":"137","locator":"106:10-106:64","alias":"ValidEncounter","expression":{"localId":"136","locator":"106:10-106:49","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"106:35-106:48","name":"Office Visit","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"147","locator":"107:5-108:43","type":"And","operand":[{"localId":"141","locator":"107:11-107:74","precision":"Day","type":"IncludedIn","operand":[{"localId":"139","locator":"107:11-107:39","path":"relevantPeriod","scope":"ValidEncounter","type":"Property"},{"localId":"140","locator":"107:55-107:74","name":"Measurement Period","type":"ParameterRef"}]},{"localId":"146","locator":"108:11-108:43","type":"Not","operand":{"localId":"145","locator":"108:11-108:43","type":"Equivalent","operand":[{"localId":"143","locator":"108:11-108:30","path":"class","scope":"ValidEncounter","type":"Property"},{"localId":"144","locator":"108:35-108:43","name":"virtual","type":"CodeRef"}]}}]}}}},{"localId":"153","locator":"137:1-139:34","name":"Initial Population","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"153","s":[{"value":["","define ","\"Initial Population\"",":\n  "]},{"r":"152","s":[{"r":"135","s":[{"value":["\"Has Most Recent Bladder Cancer Tumor Staging is Ta HG, Tis, T1\""]}]},{"value":["\n    and "]},{"r":"151","s":[{"value":["\"Has Qualifying Encounter\""]}]}]}]}}],"expression":{"localId":"152","locator":"138:3-139:34","type":"And","operand":[{"localId":"135","locator":"138:3-138:66","name":"Has Most Recent Bladder Cancer Tumor Staging is Ta HG, Tis, T1","type":"ExpressionRef"},{"localId":"151","locator":"139:9-139:34","name":"Has Qualifying Encounter","type":"ExpressionRef"}]}},{"localId":"155","locator":"39:1-40:22","name":"Denominator","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"155","s":[{"value":["","define ","\"Denominator\"",":\n  "]},{"r":"154","s":[{"value":["\"Initial Population\""]}]}]}}],"expression":{"localId":"154","locator":"40:3-40:22","name":"Initial Population","type":"ExpressionRef"}},{"localId":"177","locator":"114:1-119:3","name":"BCG Not Available Within 6 Months After Bladder Cancer Staging","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"177","s":[{"value":["","define ","\"BCG Not Available Within 6 Months After Bladder Cancer Staging\"",":\n  "]},{"r":"176","s":[{"value":["( "]},{"r":"176","s":[{"s":[{"r":"157","s":[{"r":"156","s":[{"r":"156","s":[{"value":["[","\"Medication, Not Administered\"",": "]},{"s":[{"value":["\"BCG Bacillus Calmette Guerin for Urology Care\""]}]},{"value":["]"]}]}]},{"value":[" ","BCGnotGiven"]}]}]},{"value":["\n      "]},{"r":"171","s":[{"value":["with "]},{"r":"159","s":[{"r":"158","s":[{"s":[{"value":["\"First Bladder Cancer Staging Procedure\""]}]}]},{"value":[" ","FirstBladderCancerStaging"]}]},{"value":["\n        such that "]},{"r":"170","s":[{"r":"161","s":[{"r":"160","s":[{"value":["BCGnotGiven"]}]},{"value":["."]},{"r":"161","s":[{"value":["authorDatetime"]}]}]},{"value":[" "]},{"r":"170","s":[{"r":"169","s":[{"value":["6 ","months"]}]},{"value":[" or less after"]}]},{"value":[" "]},{"r":"168","s":[{"value":["start of "]},{"r":"167","s":[{"r":"162","s":[{"value":["Global"]}]},{"value":["."]},{"r":"167","s":[{"value":["\"NormalizeInterval\""," ( "]},{"r":"164","s":[{"r":"163","s":[{"value":["FirstBladderCancerStaging"]}]},{"value":["."]},{"r":"164","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"166","s":[{"r":"165","s":[{"value":["FirstBladderCancerStaging"]}]},{"value":["."]},{"r":"166","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]}]}]}]},{"value":["\n      "]},{"r":"175","s":[{"value":["where "]},{"r":"175","s":[{"r":"173","s":[{"r":"172","s":[{"value":["BCGnotGiven"]}]},{"value":["."]},{"r":"173","s":[{"value":["negationRationale"]}]}]},{"value":[" in "]},{"r":"174","s":[{"value":["\"Unavailability of Bacillus Calmette Guerin for urology care\""]}]}]}]}]},{"value":["\n  )"]}]}]}}],"expression":{"localId":"176","locator":"115:3-119:3","type":"Query","source":[{"localId":"157","locator":"115:5-115:97","alias":"BCGnotGiven","expression":{"localId":"156","locator":"115:5-115:85","dataType":"{urn:healthit-gov:qdm:v5_6}NegativeMedicationAdministered","templateId":"NegativeMedicationAdministered","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"115:38-115:84","name":"BCG Bacillus Calmette Guerin for Urology Care","preserve":true,"type":"ValueSetRef"}}}],"relationship":[{"localId":"171","locator":"116:7-117:192","alias":"FirstBladderCancerStaging","type":"With","expression":{"localId":"158","locator":"116:12-116:51","name":"First Bladder Cancer Staging Procedure","type":"ExpressionRef"},"suchThat":{"localId":"170","locator":"117:19-117:192","type":"And","operand":[{"locator":"117:46-117:61","type":"In","operand":[{"localId":"161","locator":"117:19-117:44","path":"authorDatetime","scope":"BCGnotGiven","type":"Property"},{"locator":"117:46-117:61","lowClosed":false,"highClosed":true,"type":"Interval","low":{"localId":"168","locator":"117:69-117:192","type":"Start","operand":{"localId":"167","locator":"117:78-117:192","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"164","locator":"117:107-117:148","path":"relevantDatetime","scope":"FirstBladderCancerStaging","type":"Property"},{"localId":"166","locator":"117:151-117:190","path":"relevantPeriod","scope":"FirstBladderCancerStaging","type":"Property"}]}},"high":{"locator":"117:69-117:192","type":"Add","operand":[{"localId":"168","locator":"117:69-117:192","type":"Start","operand":{"localId":"167","locator":"117:78-117:192","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"164","locator":"117:107-117:148","path":"relevantDatetime","scope":"FirstBladderCancerStaging","type":"Property"},{"localId":"166","locator":"117:151-117:190","path":"relevantPeriod","scope":"FirstBladderCancerStaging","type":"Property"}]}},{"localId":"169","locator":"117:46-117:53","value":6,"unit":"months","type":"Quantity"}]}}]},{"locator":"117:46-117:61","type":"Not","operand":{"locator":"117:46-117:61","type":"IsNull","operand":{"localId":"168","locator":"117:69-117:192","type":"Start","operand":{"localId":"167","locator":"117:78-117:192","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"164","locator":"117:107-117:148","path":"relevantDatetime","scope":"FirstBladderCancerStaging","type":"Property"},{"localId":"166","locator":"117:151-117:190","path":"relevantPeriod","scope":"FirstBladderCancerStaging","type":"Property"}]}}}}]}}],"where":{"localId":"175","locator":"118:7-118:106","type":"InValueSet","code":{"localId":"173","locator":"118:13-118:41","path":"negationRationale","scope":"BCGnotGiven","type":"Property"},"valueset":{"localId":"174","locator":"118:46-118:106","name":"Unavailability of Bacillus Calmette Guerin for urology care","preserve":true}}}},{"localId":"180","locator":"42:1-43:73","name":"Denominator Exception","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"180","s":[{"value":["","define ","\"Denominator Exception\"",":\n  "]},{"r":"179","s":[{"value":["exists "]},{"r":"178","s":[{"value":["\"BCG Not Available Within 6 Months After Bladder Cancer Staging\""]}]}]}]}}],"expression":{"localId":"179","locator":"43:3-43:73","type":"Exists","operand":{"localId":"178","locator":"43:10-43:73","name":"BCG Not Available Within 6 Months After Bladder Cancer Staging","type":"ExpressionRef"}}},{"localId":"210","locator":"125:1-130:3","name":"First BCG Administered","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"210","s":[{"value":["","define ","\"First BCG Administered\"",":\n  "]},{"r":"209","s":[{"value":["First","("]},{"r":"208","s":[{"s":[{"r":"182","s":[{"r":"181","s":[{"r":"181","s":[{"value":["[","\"Medication, Administered\"",": "]},{"s":[{"value":["\"BCG Bacillus Calmette Guerin for Urology Care\""]}]},{"value":["]"]}]}]},{"value":[" ","BCG"]}]}]},{"value":["\n      "]},{"r":"200","s":[{"value":["with "]},{"r":"184","s":[{"r":"183","s":[{"s":[{"value":["\"First Bladder Cancer Staging Procedure\""]}]}]},{"value":[" ","FirstBladderCancerStaging"]}]},{"value":["\n        such that "]},{"r":"199","s":[{"r":"190","s":[{"r":"185","s":[{"value":["Global"]}]},{"value":["."]},{"r":"190","s":[{"value":["\"NormalizeInterval\"","("]},{"r":"187","s":[{"r":"186","s":[{"value":["BCG"]}]},{"value":["."]},{"r":"187","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"189","s":[{"r":"188","s":[{"value":["BCG"]}]},{"value":["."]},{"r":"189","s":[{"value":["relevantPeriod"]}]}]},{"value":[")"]}]}]},{"value":[" "]},{"r":"199","s":[{"value":["starts "]},{"r":"198","s":[{"value":["6 ","months"]}]},{"value":[" or less after"]}]},{"value":[" "]},{"r":"197","s":[{"value":["start of "]},{"r":"196","s":[{"r":"191","s":[{"value":["Global"]}]},{"value":["."]},{"r":"196","s":[{"value":["\"NormalizeInterval\"","("]},{"r":"193","s":[{"r":"192","s":[{"value":["FirstBladderCancerStaging"]}]},{"value":["."]},{"r":"193","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"195","s":[{"r":"194","s":[{"value":["FirstBladderCancerStaging"]}]},{"value":["."]},{"r":"195","s":[{"value":["relevantPeriod"]}]}]},{"value":[")"]}]}]}]}]}]},{"value":["\n      "]},{"r":"207","s":[{"value":["sort by "]},{"r":"206","s":[{"r":"205","s":[{"value":["start of "]},{"r":"204","s":[{"r":"201","s":[{"value":["Global"]}]},{"value":["."]},{"r":"204","s":[{"value":["\"NormalizeInterval\"","("]},{"r":"202","s":[{"value":["relevantDatetime"]}]},{"value":[", "]},{"r":"203","s":[{"value":["relevantPeriod"]}]},{"value":[")"]}]}]}]}]}]}]},{"value":["\n  )"]}]}]}}],"expression":{"localId":"209","locator":"126:3-130:3","type":"First","source":{"localId":"208","locator":"126:9-129:83","type":"Query","source":[{"localId":"182","locator":"126:9-126:89","alias":"BCG","expression":{"localId":"181","locator":"126:9-126:85","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveMedicationAdministered","templateId":"PositiveMedicationAdministered","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"126:38-126:84","name":"BCG Bacillus Calmette Guerin for Urology Care","preserve":true,"type":"ValueSetRef"}}}],"relationship":[{"localId":"200","locator":"127:7-128:238","alias":"FirstBladderCancerStaging","type":"With","expression":{"localId":"183","locator":"127:12-127:51","name":"First Bladder Cancer Staging Procedure","type":"ExpressionRef"},"suchThat":{"localId":"199","locator":"128:19-128:238","type":"And","operand":[{"locator":"128:95-128:110","type":"In","operand":[{"locator":"128:88-128:93","type":"Start","operand":{"localId":"190","locator":"128:19-128:86","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"187","locator":"128:46-128:65","path":"relevantDatetime","scope":"BCG","type":"Property"},{"localId":"189","locator":"128:68-128:85","path":"relevantPeriod","scope":"BCG","type":"Property"}]}},{"locator":"128:95-128:110","lowClosed":false,"highClosed":true,"type":"Interval","low":{"localId":"197","locator":"128:118-128:238","type":"Start","operand":{"localId":"196","locator":"128:127-128:238","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"193","locator":"128:154-128:195","path":"relevantDatetime","scope":"FirstBladderCancerStaging","type":"Property"},{"localId":"195","locator":"128:198-128:237","path":"relevantPeriod","scope":"FirstBladderCancerStaging","type":"Property"}]}},"high":{"locator":"128:118-128:238","type":"Add","operand":[{"localId":"197","locator":"128:118-128:238","type":"Start","operand":{"localId":"196","locator":"128:127-128:238","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"193","locator":"128:154-128:195","path":"relevantDatetime","scope":"FirstBladderCancerStaging","type":"Property"},{"localId":"195","locator":"128:198-128:237","path":"relevantPeriod","scope":"FirstBladderCancerStaging","type":"Property"}]}},{"localId":"198","locator":"128:95-128:102","value":6,"unit":"months","type":"Quantity"}]}}]},{"locator":"128:95-128:110","type":"Not","operand":{"locator":"128:95-128:110","type":"IsNull","operand":{"localId":"197","locator":"128:118-128:238","type":"Start","operand":{"localId":"196","locator":"128:127-128:238","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"193","locator":"128:154-128:195","path":"relevantDatetime","scope":"FirstBladderCancerStaging","type":"Property"},{"localId":"195","locator":"128:198-128:237","path":"relevantPeriod","scope":"FirstBladderCancerStaging","type":"Property"}]}}}}]}}],"sort":{"localId":"207","locator":"129:7-129:83","by":[{"localId":"206","locator":"129:15-129:83","direction":"asc","type":"ByExpression","expression":{"localId":"205","locator":"129:15-129:83","type":"Start","operand":{"localId":"204","locator":"129:24-129:83","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"202","locator":"129:51-129:66","name":"relevantDatetime","type":"IdentifierRef"},{"localId":"203","locator":"129:69-129:82","name":"relevantPeriod","type":"IdentifierRef"}]}}}]}}}},{"localId":"213","locator":"45:1-46:38","name":"Numerator","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"213","s":[{"value":["","define ","\"Numerator\"",":\n  "]},{"r":"212","s":[{"r":"211","s":[{"value":["\"First BCG Administered\""]}]},{"value":[" is not null"]}]}]}}],"expression":{"localId":"212","locator":"46:3-46:38","type":"Not","operand":{"locator":"46:3-46:38","type":"IsNull","operand":{"localId":"211","locator":"46:3-46:26","name":"First BCG Administered","type":"ExpressionRef"}}}},{"localId":"215","locator":"48:1-49:51","name":"SDE Ethnicity","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"215","s":[{"value":["","define ","\"SDE Ethnicity\"",":\n  "]},{"r":"214","s":[{"value":["[","\"Patient Characteristic Ethnicity\"",": "]},{"s":[{"value":["\"Ethnicity\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"214","locator":"49:3-49:51","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicEthnicity","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"49:40-49:50","name":"Ethnicity","preserve":true,"type":"ValueSetRef"}}},{"localId":"217","locator":"51:1-52:48","name":"SDE Payer","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"217","s":[{"value":["","define ","\"SDE Payer\"",":\n  "]},{"r":"216","s":[{"value":["[","\"Patient Characteristic Payer\"",": "]},{"s":[{"value":["\"Payer Type\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"216","locator":"52:3-52:48","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicPayer","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"52:36-52:47","name":"Payer Type","preserve":true,"type":"ValueSetRef"}}},{"localId":"219","locator":"54:1-55:41","name":"SDE Race","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"219","s":[{"value":["","define ","\"SDE Race\"",":\n  "]},{"r":"218","s":[{"value":["[","\"Patient Characteristic Race\"",": "]},{"s":[{"value":["\"Race\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"218","locator":"55:3-55:41","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicRace","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"55:35-55:40","name":"Race","preserve":true,"type":"ValueSetRef"}}},{"localId":"221","locator":"57:1-58:58","name":"SDE Sex","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"221","s":[{"value":["","define ","\"SDE Sex\"",":\n  "]},{"r":"220","s":[{"value":["[","\"Patient Characteristic Sex\"",": "]},{"s":[{"value":["\"ONC Administrative Sex\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"220","locator":"58:3-58:58","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicSex","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"58:34-58:57","name":"ONC Administrative Sex","preserve":true,"type":"ValueSetRef"}}},{"localId":"237","locator":"73:1-76:189","name":"Acute Tuberculosis Diagnosis","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"237","s":[{"value":["","define ","\"Acute Tuberculosis Diagnosis\"",":\n  "]},{"r":"236","s":[{"s":[{"r":"223","s":[{"r":"222","s":[{"r":"222","s":[{"value":["[","\"Diagnosis\"",": "]},{"s":[{"value":["\"Active Tuberculosis for Urology Care\""]}]},{"value":["]"]}]}]},{"value":[" ","ActiveTuberculosis"]}]}]},{"value":["\n    "]},{"r":"235","s":[{"value":["with "]},{"r":"225","s":[{"r":"224","s":[{"s":[{"value":["\"First Bladder Cancer Staging Procedure\""]}]}]},{"value":[" ","FirstBladderCancerStaging"]}]},{"value":["\n      such that "]},{"r":"234","s":[{"r":"227","s":[{"r":"226","s":[{"value":["ActiveTuberculosis"]}]},{"value":["."]},{"r":"227","s":[{"value":["prevalencePeriod"]}]}]},{"r":"234","value":[" ","overlaps after day of"," "]},{"r":"233","s":[{"r":"228","s":[{"value":["Global"]}]},{"value":["."]},{"r":"233","s":[{"value":["\"NormalizeInterval\""," ( "]},{"r":"230","s":[{"r":"229","s":[{"value":["FirstBladderCancerStaging"]}]},{"value":["."]},{"r":"230","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"232","s":[{"r":"231","s":[{"value":["FirstBladderCancerStaging"]}]},{"value":["."]},{"r":"232","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]}]}]}]}]}}],"expression":{"localId":"236","locator":"74:3-76:189","type":"Query","source":[{"localId":"223","locator":"74:3-74:74","alias":"ActiveTuberculosis","expression":{"localId":"222","locator":"74:3-74:55","dataType":"{urn:healthit-gov:qdm:v5_6}Diagnosis","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"74:17-74:54","name":"Active Tuberculosis for Urology Care","preserve":true,"type":"ValueSetRef"}}}],"relationship":[{"localId":"235","locator":"75:5-76:189","alias":"FirstBladderCancerStaging","type":"With","expression":{"localId":"224","locator":"75:10-75:49","name":"First Bladder Cancer Staging Procedure","type":"ExpressionRef"},"suchThat":{"localId":"234","locator":"76:17-76:189","precision":"Day","type":"OverlapsAfter","operand":[{"localId":"227","locator":"76:17-76:51","path":"prevalencePeriod","scope":"ActiveTuberculosis","type":"Property"},{"localId":"233","locator":"76:75-76:189","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"230","locator":"76:104-76:145","path":"relevantDatetime","scope":"FirstBladderCancerStaging","type":"Property"},{"localId":"232","locator":"76:148-76:187","path":"relevantPeriod","scope":"FirstBladderCancerStaging","type":"Property"}]}]}}]}},{"localId":"260","locator":"132:1-135:277","name":"Immunosuppressive Drugs","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"260","s":[{"value":["","define ","\"Immunosuppressive Drugs\"",":\n  "]},{"r":"259","s":[{"s":[{"r":"241","s":[{"r":"240","s":[{"r":"240","s":[{"value":["[","\"Medication, Active\"",": "]},{"s":[{"value":["\"Immunosuppressive Drugs for Urology Care\""]}]},{"value":["]"]}]}]},{"value":[" ","ImmunosuppressiveDrugs"]}]}]},{"value":["\n    "]},{"r":"258","s":[{"value":["with "]},{"r":"243","s":[{"r":"242","s":[{"s":[{"value":["\"First Bladder Cancer Staging Procedure\""]}]}]},{"value":[" ","FirstBladderCancerStaging"]}]},{"value":["\n      such that "]},{"r":"257","s":[{"r":"249","s":[{"r":"244","s":[{"value":["Global"]}]},{"value":["."]},{"r":"249","s":[{"value":["\"NormalizeInterval\""," ( "]},{"r":"246","s":[{"r":"245","s":[{"value":["ImmunosuppressiveDrugs"]}]},{"value":["."]},{"r":"246","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"248","s":[{"r":"247","s":[{"value":["ImmunosuppressiveDrugs"]}]},{"value":["."]},{"r":"248","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]},{"r":"257","value":[" ","starts on or before day of"," "]},{"r":"256","s":[{"value":["start of "]},{"r":"255","s":[{"r":"250","s":[{"value":["Global"]}]},{"value":["."]},{"r":"255","s":[{"value":["\"NormalizeInterval\""," ( "]},{"r":"252","s":[{"r":"251","s":[{"value":["FirstBladderCancerStaging"]}]},{"value":["."]},{"r":"252","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"254","s":[{"r":"253","s":[{"value":["FirstBladderCancerStaging"]}]},{"value":["."]},{"r":"254","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]}]}]}]}]}]}}],"expression":{"localId":"259","locator":"133:3-135:277","type":"Query","source":[{"localId":"241","locator":"133:3-133:91","alias":"ImmunosuppressiveDrugs","expression":{"localId":"240","locator":"133:3-133:68","dataType":"{urn:healthit-gov:qdm:v5_6}MedicationActive","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"133:26-133:67","name":"Immunosuppressive Drugs for Urology Care","preserve":true,"type":"ValueSetRef"}}}],"relationship":[{"localId":"258","locator":"134:5-135:277","alias":"FirstBladderCancerStaging","type":"With","expression":{"localId":"242","locator":"134:10-134:49","name":"First Bladder Cancer Staging Procedure","type":"ExpressionRef"},"suchThat":{"localId":"257","locator":"135:17-135:277","precision":"Day","type":"SameOrBefore","operand":[{"locator":"135:127-135:132","type":"Start","operand":{"localId":"249","locator":"135:17-135:125","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"246","locator":"135:46-135:84","path":"relevantDatetime","scope":"ImmunosuppressiveDrugs","type":"Property"},{"localId":"248","locator":"135:87-135:123","path":"relevantPeriod","scope":"ImmunosuppressiveDrugs","type":"Property"}]}},{"localId":"256","locator":"135:154-135:277","type":"Start","operand":{"localId":"255","locator":"135:163-135:277","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"252","locator":"135:192-135:233","path":"relevantDatetime","scope":"FirstBladderCancerStaging","type":"Property"},{"localId":"254","locator":"135:236-135:275","path":"relevantPeriod","scope":"FirstBladderCancerStaging","type":"Property"}]}}]}}]}},{"localId":"285","locator":"78:1-81:241","name":"Cystectomy Done","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"285","s":[{"value":["","define ","\"Cystectomy Done\"",":\n  "]},{"r":"284","s":[{"s":[{"r":"265","s":[{"r":"264","s":[{"r":"264","s":[{"value":["[","\"Procedure, Performed\"",": "]},{"s":[{"value":["\"Cystectomy for Urology Care\""]}]},{"value":["]"]}]}]},{"value":[" ","Cystectomy"]}]}]},{"value":["\n    "]},{"r":"283","s":[{"value":["with "]},{"r":"267","s":[{"r":"266","s":[{"s":[{"value":["\"First Bladder Cancer Staging Procedure\""]}]}]},{"value":[" ","FirstBladderCancerStaging"]}]},{"value":["\n      such that "]},{"r":"282","s":[{"r":"273","s":[{"r":"268","s":[{"value":["Global"]}]},{"value":["."]},{"r":"273","s":[{"value":["EarliestOf"," ( "]},{"r":"270","s":[{"r":"269","s":[{"value":["Cystectomy"]}]},{"value":["."]},{"r":"270","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"272","s":[{"r":"271","s":[{"value":["Cystectomy"]}]},{"value":["."]},{"r":"272","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]},{"value":[" "]},{"r":"282","s":[{"r":"281","s":[{"value":["6 ","months"]}]},{"value":[" or less before"]}]},{"value":[" "]},{"r":"280","s":[{"value":["start of "]},{"r":"279","s":[{"r":"274","s":[{"value":["Global"]}]},{"value":["."]},{"r":"279","s":[{"value":["\"NormalizeInterval\""," ( "]},{"r":"276","s":[{"r":"275","s":[{"value":["FirstBladderCancerStaging"]}]},{"value":["."]},{"r":"276","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"278","s":[{"r":"277","s":[{"value":["FirstBladderCancerStaging"]}]},{"value":["."]},{"r":"278","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]}]}]}]}]}]}}],"expression":{"localId":"284","locator":"79:3-81:241","type":"Query","source":[{"localId":"265","locator":"79:3-79:68","alias":"Cystectomy","expression":{"localId":"264","locator":"79:3-79:57","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveProcedurePerformed","templateId":"PositiveProcedurePerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"79:28-79:56","name":"Cystectomy for Urology Care","preserve":true,"type":"ValueSetRef"}}}],"relationship":[{"localId":"283","locator":"80:5-81:241","alias":"FirstBladderCancerStaging","type":"With","expression":{"localId":"266","locator":"80:10-80:49","name":"First Bladder Cancer Staging Procedure","type":"ExpressionRef"},"suchThat":{"localId":"282","locator":"81:17-81:241","type":"And","operand":[{"locator":"81:94-81:109","type":"In","operand":[{"localId":"273","locator":"81:17-81:92","name":"EarliestOf","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"270","locator":"81:37-81:63","path":"relevantDatetime","scope":"Cystectomy","type":"Property"},{"localId":"272","locator":"81:66-81:90","path":"relevantPeriod","scope":"Cystectomy","type":"Property"}]},{"locator":"81:94-81:109","lowClosed":true,"highClosed":false,"type":"Interval","low":{"locator":"81:118-81:241","type":"Subtract","operand":[{"localId":"280","locator":"81:118-81:241","type":"Start","operand":{"localId":"279","locator":"81:127-81:241","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"276","locator":"81:156-81:197","path":"relevantDatetime","scope":"FirstBladderCancerStaging","type":"Property"},{"localId":"278","locator":"81:200-81:239","path":"relevantPeriod","scope":"FirstBladderCancerStaging","type":"Property"}]}},{"localId":"281","locator":"81:94-81:101","value":6,"unit":"months","type":"Quantity"}]},"high":{"localId":"280","locator":"81:118-81:241","type":"Start","operand":{"localId":"279","locator":"81:127-81:241","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"276","locator":"81:156-81:197","path":"relevantDatetime","scope":"FirstBladderCancerStaging","type":"Property"},{"localId":"278","locator":"81:200-81:239","path":"relevantPeriod","scope":"FirstBladderCancerStaging","type":"Property"}]}}}]},{"locator":"81:94-81:109","type":"Not","operand":{"locator":"81:94-81:109","type":"IsNull","operand":{"localId":"280","locator":"81:118-81:241","type":"Start","operand":{"localId":"279","locator":"81:127-81:241","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"276","locator":"81:156-81:197","path":"relevantDatetime","scope":"FirstBladderCancerStaging","type":"Property"},{"localId":"278","locator":"81:200-81:239","path":"relevantPeriod","scope":"FirstBladderCancerStaging","type":"Property"}]}}}}]}}]}},{"localId":"310","locator":"83:1-89:3","name":"Has Excluding  HIV, Immunocompromised Conditions or Mixed Histology Before Staging","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"310","s":[{"value":["","define ","\"Has Excluding  HIV, Immunocompromised Conditions or Mixed Histology Before Staging\"",":\n  "]},{"r":"309","s":[{"value":["exists "]},{"r":"308","s":[{"value":["( "]},{"r":"308","s":[{"s":[{"r":"294","s":[{"r":"293","s":[{"value":["( "]},{"r":"293","s":[{"r":"291","s":[{"r":"289","s":[{"value":["[","\"Diagnosis\"",": "]},{"s":[{"value":["\"HIV\""]}]},{"value":["]"]}]},{"value":["\n      union "]},{"r":"290","s":[{"value":["[","\"Diagnosis\"",": "]},{"s":[{"value":["\"Immunocompromised Conditions\""]}]},{"value":["]"]}]}]},{"value":["\n      union "]},{"r":"292","s":[{"value":["[","\"Diagnosis\"",": "]},{"s":[{"value":["\"Mixed histology urothelial cell carcinoma for Urology Care\""]}]},{"value":["]"]}]}]},{"value":[" )"]}]},{"value":[" ","ExclusionDiagnosis"]}]}]},{"value":["\n      "]},{"r":"307","s":[{"value":["with "]},{"r":"296","s":[{"r":"295","s":[{"s":[{"value":["\"First Bladder Cancer Staging Procedure\""]}]}]},{"value":[" ","FirstBladderCancerStaging"]}]},{"value":["\n        such that "]},{"r":"306","s":[{"r":"298","s":[{"r":"297","s":[{"value":["ExclusionDiagnosis"]}]},{"value":["."]},{"r":"298","s":[{"value":["prevalencePeriod"]}]}]},{"r":"306","value":[" ","starts on or before day of"," "]},{"r":"305","s":[{"value":["start of "]},{"r":"304","s":[{"r":"299","s":[{"value":["Global"]}]},{"value":["."]},{"r":"304","s":[{"value":["\"NormalizeInterval\""," ( "]},{"r":"301","s":[{"r":"300","s":[{"value":["FirstBladderCancerStaging"]}]},{"value":["."]},{"r":"301","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"303","s":[{"r":"302","s":[{"value":["FirstBladderCancerStaging"]}]},{"value":["."]},{"r":"303","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]}]}]}]}]},{"value":["\n  )"]}]}]}]}}],"expression":{"localId":"309","locator":"84:3-89:3","type":"Exists","operand":{"localId":"308","locator":"84:10-89:3","type":"Query","source":[{"localId":"294","locator":"84:12-86:108","alias":"ExclusionDiagnosis","expression":{"localId":"293","locator":"84:12-86:89","type":"Union","operand":[{"localId":"291","locator":"84:14-85:57","type":"Union","operand":[{"localId":"289","locator":"84:14-84:33","dataType":"{urn:healthit-gov:qdm:v5_6}Diagnosis","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"84:28-84:32","name":"HIV","preserve":true,"type":"ValueSetRef"}},{"localId":"290","locator":"85:13-85:57","dataType":"{urn:healthit-gov:qdm:v5_6}Diagnosis","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"85:27-85:56","name":"Immunocompromised Conditions","preserve":true,"type":"ValueSetRef"}}]},{"localId":"292","locator":"86:13-86:87","dataType":"{urn:healthit-gov:qdm:v5_6}Diagnosis","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"86:27-86:86","name":"Mixed histology urothelial cell carcinoma for Urology Care","preserve":true,"type":"ValueSetRef"}}]}}],"relationship":[{"localId":"307","locator":"87:7-88:205","alias":"FirstBladderCancerStaging","type":"With","expression":{"localId":"295","locator":"87:12-87:51","name":"First Bladder Cancer Staging Procedure","type":"ExpressionRef"},"suchThat":{"localId":"306","locator":"88:19-88:205","precision":"Day","type":"SameOrBefore","operand":[{"locator":"88:55-88:60","type":"Start","operand":{"localId":"298","locator":"88:19-88:53","path":"prevalencePeriod","scope":"ExclusionDiagnosis","type":"Property"}},{"localId":"305","locator":"88:82-88:205","type":"Start","operand":{"localId":"304","locator":"88:91-88:205","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"301","locator":"88:120-88:161","path":"relevantDatetime","scope":"FirstBladderCancerStaging","type":"Property"},{"localId":"303","locator":"88:164-88:203","path":"relevantPeriod","scope":"FirstBladderCancerStaging","type":"Property"}]}}]}}]}}},{"localId":"332","locator":"91:1-96:3","name":"Has Excluding Chemotherapy or Radiotherapy Procedure Before Staging","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"332","s":[{"value":["","define ","\"Has Excluding Chemotherapy or Radiotherapy Procedure Before Staging\"",":\n  "]},{"r":"331","s":[{"value":["exists "]},{"r":"330","s":[{"value":["( "]},{"r":"330","s":[{"s":[{"r":"316","s":[{"r":"315","s":[{"value":["( "]},{"r":"315","s":[{"r":"313","s":[{"value":["[","\"Medication, Active\"",": "]},{"s":[{"value":["\"Chemotherapy Agents for Advanced Cancer\""]}]},{"value":["]"]}]},{"value":["\n      union "]},{"r":"314","s":[{"value":["[","\"Procedure, Performed\"",": "]},{"s":[{"value":["\"Combined radiotherapy (procedure)\""]}]},{"value":["]"]}]}]},{"value":[" )"]}]},{"value":[" ","ExclusionMedsProcedures"]}]}]},{"value":["\n      "]},{"r":"329","s":[{"value":["with "]},{"r":"318","s":[{"r":"317","s":[{"s":[{"value":["\"First Bladder Cancer Staging Procedure\""]}]}]},{"value":[" ","FirstBladderCancerStaging"]}]},{"value":["\n        such that "]},{"r":"328","s":[{"r":"320","s":[{"r":"319","s":[{"value":["ExclusionMedsProcedures"]}]},{"value":["."]},{"r":"320","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"328","s":[{"value":["starts "]},{"r":"327","s":[{"value":["6 ","months"]}]},{"value":[" or less before"]}]},{"value":[" "]},{"r":"326","s":[{"r":"321","s":[{"value":["Global"]}]},{"value":["."]},{"r":"326","s":[{"value":["\"NormalizeInterval\""," ( "]},{"r":"323","s":[{"r":"322","s":[{"value":["FirstBladderCancerStaging"]}]},{"value":["."]},{"r":"323","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"325","s":[{"r":"324","s":[{"value":["FirstBladderCancerStaging"]}]},{"value":["."]},{"r":"325","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]}]}]}]},{"value":["\n  )"]}]}]}]}}],"expression":{"localId":"331","locator":"92:3-96:3","type":"Exists","operand":{"localId":"330","locator":"92:10-96:3","type":"Query","source":[{"localId":"316","locator":"92:12-93:99","alias":"ExclusionMedsProcedures","expression":{"localId":"315","locator":"92:12-93:75","type":"Union","operand":[{"type":"As","operand":{"localId":"313","locator":"92:14-92:78","dataType":"{urn:healthit-gov:qdm:v5_6}MedicationActive","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"92:37-92:77","name":"Chemotherapy Agents for Advanced Cancer","preserve":true,"type":"ValueSetRef"}},"asTypeSpecifier":{"type":"ListTypeSpecifier","elementType":{"type":"ChoiceTypeSpecifier","choice":[{"name":"{urn:healthit-gov:qdm:v5_6}PositiveProcedurePerformed","type":"NamedTypeSpecifier"},{"name":"{urn:healthit-gov:qdm:v5_6}MedicationActive","type":"NamedTypeSpecifier"}]}}},{"type":"As","operand":{"localId":"314","locator":"93:13-93:73","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveProcedurePerformed","templateId":"PositiveProcedurePerformed","codeProperty":"code","codeComparator":"~","type":"Retrieve","codes":{"type":"ToList","operand":{"locator":"93:38-93:72","name":"Combined radiotherapy (procedure)","type":"CodeRef"}}},"asTypeSpecifier":{"type":"ListTypeSpecifier","elementType":{"type":"ChoiceTypeSpecifier","choice":[{"name":"{urn:healthit-gov:qdm:v5_6}PositiveProcedurePerformed","type":"NamedTypeSpecifier"},{"name":"{urn:healthit-gov:qdm:v5_6}MedicationActive","type":"NamedTypeSpecifier"}]}}}]}}],"relationship":[{"localId":"329","locator":"94:7-95:203","alias":"FirstBladderCancerStaging","type":"With","expression":{"localId":"317","locator":"94:12-94:51","name":"First Bladder Cancer Staging Procedure","type":"ExpressionRef"},"suchThat":{"localId":"328","locator":"95:19-95:203","type":"And","operand":[{"locator":"95:65-95:80","type":"In","operand":[{"locator":"95:58-95:63","type":"Start","operand":{"localId":"320","locator":"95:19-95:56","path":"relevantPeriod","scope":"ExclusionMedsProcedures","type":"Property"}},{"locator":"95:65-95:80","lowClosed":true,"highClosed":false,"type":"Interval","low":{"locator":"95:96-95:203","type":"Subtract","operand":[{"locator":"95:96-95:203","type":"Start","operand":{"localId":"326","locator":"95:89-95:203","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"323","locator":"95:118-95:159","path":"relevantDatetime","scope":"FirstBladderCancerStaging","type":"Property"},{"localId":"325","locator":"95:162-95:201","path":"relevantPeriod","scope":"FirstBladderCancerStaging","type":"Property"}]}},{"localId":"327","locator":"95:65-95:72","value":6,"unit":"months","type":"Quantity"}]},"high":{"locator":"95:96-95:203","type":"Start","operand":{"localId":"326","locator":"95:89-95:203","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"323","locator":"95:118-95:159","path":"relevantDatetime","scope":"FirstBladderCancerStaging","type":"Property"},{"localId":"325","locator":"95:162-95:201","path":"relevantPeriod","scope":"FirstBladderCancerStaging","type":"Property"}]}}}]},{"locator":"95:65-95:80","type":"Not","operand":{"locator":"95:65-95:80","type":"IsNull","operand":{"locator":"95:96-95:203","type":"Start","operand":{"localId":"326","locator":"95:89-95:203","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"323","locator":"95:118-95:159","path":"relevantDatetime","scope":"FirstBladderCancerStaging","type":"Property"},{"localId":"325","locator":"95:162-95:201","path":"relevantPeriod","scope":"FirstBladderCancerStaging","type":"Property"}]}}}}]}}]}}},{"localId":"335","locator":"66:1-71:76","name":"Denominator Exclusion","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"335","s":[{"value":["","define ","\"Denominator Exclusion\"",":\n  "]},{"r":"334","s":[{"r":"312","s":[{"r":"288","s":[{"r":"263","s":[{"r":"239","s":[{"value":["exists "]},{"r":"238","s":[{"value":["\"Acute Tuberculosis Diagnosis\""]}]}]},{"value":["\n    or "]},{"r":"262","s":[{"value":["exists "]},{"r":"261","s":[{"value":["\"Immunosuppressive Drugs\""]}]}]}]},{"value":["\n    or "]},{"r":"287","s":[{"value":["exists "]},{"r":"286","s":[{"value":["\"Cystectomy Done\""]}]}]}]},{"value":["\n    or "]},{"r":"311","s":[{"value":["\"Has Excluding  HIV, Immunocompromised Conditions or Mixed Histology Before Staging\""]}]}]},{"value":["\n    or "]},{"r":"333","s":[{"value":["\"Has Excluding Chemotherapy or Radiotherapy Procedure Before Staging\""]}]}]}]}}],"expression":{"localId":"334","locator":"67:3-71:76","type":"Or","operand":[{"localId":"312","locator":"67:3-70:91","type":"Or","operand":[{"localId":"288","locator":"67:3-69:31","type":"Or","operand":[{"localId":"263","locator":"67:3-68:39","type":"Or","operand":[{"localId":"239","locator":"67:3-67:39","type":"Exists","operand":{"localId":"238","locator":"67:10-67:39","name":"Acute Tuberculosis Diagnosis","type":"ExpressionRef"}},{"localId":"262","locator":"68:8-68:39","type":"Exists","operand":{"localId":"261","locator":"68:15-68:39","name":"Immunosuppressive Drugs","type":"ExpressionRef"}}]},{"localId":"287","locator":"69:8-69:31","type":"Exists","operand":{"localId":"286","locator":"69:15-69:31","name":"Cystectomy Done","type":"ExpressionRef"}}]},{"localId":"311","locator":"70:8-70:91","name":"Has Excluding  HIV, Immunocompromised Conditions or Mixed Histology Before Staging","type":"ExpressionRef"}]},{"localId":"333","locator":"71:8-71:76","name":"Has Excluding Chemotherapy or Radiotherapy Procedure Before Staging","type":"ExpressionRef"}]}}]}}},"elm_annotations":{"statements":[{"children":[{"children":[{"children":[{"text":"define \"Bladder Cancer Diagnosis\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Diagnosis\": "}]},{"children":[{"children":[{"text":"\"Bladder Cancer for Urology Care\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"40"}],"node_type":"Retrieve","ref_id":"40"},{"children":[{"text":" BladderCancer"}]}],"ref_id":"41"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"BladderCancer"}]}],"ref_id":"42"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"prevalencePeriod"}]}],"node_type":"Property","ref_id":"43"}],"node_type":"Property","ref_id":"43"},{"children":[{"text":" starts before "}],"ref_id":"46"},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"44"}],"node_type":"End","ref_id":"45"}],"ref_id":"46"}],"ref_id":"46"}],"node_type":"Query","ref_id":"47"}],"ref_id":"48"}],"define_name":"Bladder Cancer Diagnosis"},{"children":[{"children":[{"children":[{"text":"define \"First Bladder Cancer Staging Procedure\":\n  "}]},{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Procedure, Performed\": "}]},{"children":[{"children":[{"text":"\"Tumor staging (tumor staging)\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"38"}],"node_type":"Retrieve","ref_id":"38"},{"children":[{"text":" BladderCancerStaging"}]}],"ref_id":"39"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"Bladder Cancer Diagnosis\""}]}]}],"node_type":"ExpressionRef","ref_id":"49"},{"children":[{"text":" BladderCancer"}]}],"ref_id":"50"},{"children":[{"text":"\n        such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"51"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\"("}]},{"children":[{"children":[{"children":[{"text":"BladderCancerStaging"}]}],"ref_id":"52"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"53"}],"node_type":"Property","ref_id":"53"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"BladderCancerStaging"}]}],"ref_id":"54"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"55"}],"node_type":"Property","ref_id":"55"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"56"}],"node_type":"FunctionRef","ref_id":"56"},{"children":[{"text":" starts on or before day of start "}],"node_type":"SameOrBefore","ref_id":"59"},{"children":[{"children":[{"children":[{"text":"BladderCancer"}]}],"ref_id":"57"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"prevalencePeriod"}]}],"node_type":"Property","ref_id":"58"}],"node_type":"Property","ref_id":"58"}],"node_type":"SameOrBefore","ref_id":"59"}],"ref_id":"60"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"61"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\"("}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"IdentifierRef","ref_id":"62"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"63"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"64"}],"node_type":"FunctionRef","ref_id":"64"}],"node_type":"Start","ref_id":"65"}],"ref_id":"66"}],"ref_id":"67"}],"ref_id":"68"},{"children":[{"text":"\n  )"}]}],"node_type":"First","ref_id":"69"}],"ref_id":"70"}],"define_name":"First Bladder Cancer Staging Procedure"},{"children":[{"children":[{"children":[{"text":"define \"July 1 of Year Prior to the Measurement Period\":\n  "}]},{"children":[{"children":[{"text":"DateTime("}]},{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"children":[{"text":"year from "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"79"}],"node_type":"Start","ref_id":"80"}],"node_type":"DateTimeComponentFrom","ref_id":"81"},{"children":[{"text":" - 1"}],"node_type":"Literal","ref_id":"82"}],"ref_id":"83"},{"children":[{"text":")"}]}],"ref_id":"83"},{"children":[{"text":", 7, 1, 0, 0, 0, 0, 0)"}],"ref_id":"84"}],"node_type":"DateTime","ref_id":"91"}],"ref_id":"92"}],"define_name":"July 1 of Year Prior to the Measurement Period"},{"children":[{"children":[{"children":[{"text":"define \"June 30 of the Measurement Period\":\n  "}]},{"children":[{"children":[{"text":"DateTime("}]},{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"year from "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"94"}],"node_type":"Start","ref_id":"95"}],"ref_id":"96"},{"children":[{"text":")"}]}],"ref_id":"96"},{"children":[{"text":", 6, 30, 23, 59, 59, 0, 0)"}],"ref_id":"97"}],"node_type":"DateTime","ref_id":"104"}],"ref_id":"105"}],"define_name":"June 30 of the Measurement Period"},{"children":[{"children":[{"children":[{"text":"define \"First Bladder Cancer Staging Procedure during 6 Months Prior to Measurement Period through the First 6 Months of Measurement Period\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"First Bladder Cancer Staging Procedure\""}]}]}],"node_type":"ExpressionRef","ref_id":"71"},{"children":[{"text":" FirstBladderCancerStaging"}]}],"ref_id":"72"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"73"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\" ( "}]},{"children":[{"children":[{"children":[{"text":"FirstBladderCancerStaging"}]}],"ref_id":"74"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"75"}],"node_type":"Property","ref_id":"75"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"FirstBladderCancerStaging"}]}],"ref_id":"76"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"77"}],"node_type":"Property","ref_id":"77"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"78"}],"node_type":"FunctionRef","ref_id":"78"},{"children":[{"text":" during day of "}],"ref_id":"108"},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"\"July 1 of Year Prior to the Measurement Period\""}]}],"ref_id":"93"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"\"June 30 of the Measurement Period\""}]}],"ref_id":"106"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"107"}],"ref_id":"108"}],"ref_id":"108"}],"node_type":"Query","ref_id":"109"}],"ref_id":"110"}],"define_name":"First Bladder Cancer Staging Procedure during 6 Months Prior to Measurement Period through the First 6 Months of Measurement Period"},{"children":[{"children":[{"children":[{"text":"/*Ta High Grade only to be included.  Ta low grade is to be excluded from this measure.*/\ndefine \"Has Most Recent Bladder Cancer Tumor Staging is Ta HG, Tis, T1\":\n  "}]},{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"First Bladder Cancer Staging Procedure during 6 Months Prior to Measurement Period through the First 6 Months of Measurement Period\""}]}]}],"node_type":"ExpressionRef","ref_id":"111"},{"children":[{"text":" FirstBladderCancerStagingMP"}]}],"ref_id":"112"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"FirstBladderCancerStagingMP"}]}],"ref_id":"113"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"result"}]}],"node_type":"Property","ref_id":"114"}],"node_type":"Property","ref_id":"114"},{"children":[{"text":" ~ "}]},{"children":[{"children":[{"text":"\"American Joint Committee on Cancer cT1 (qualifier value)\""}]}],"node_type":"CodeRef","ref_id":"115"}],"node_type":"Equivalent","ref_id":"116"},{"children":[{"text":"\n        or "}]},{"children":[{"children":[{"children":[{"children":[{"text":"FirstBladderCancerStagingMP"}]}],"ref_id":"117"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"result"}]}],"node_type":"Property","ref_id":"118"}],"node_type":"Property","ref_id":"118"},{"children":[{"text":" ~ "}]},{"children":[{"children":[{"text":"\"American Joint Committee on Cancer cTis (qualifier value)\""}]}],"node_type":"CodeRef","ref_id":"119"}],"node_type":"Equivalent","ref_id":"120"}],"node_type":"Or","ref_id":"121"},{"children":[{"text":"\n        or "}]},{"children":[{"children":[{"children":[{"children":[{"text":"FirstBladderCancerStagingMP"}]}],"ref_id":"122"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"result"}]}],"node_type":"Property","ref_id":"123"}],"node_type":"Property","ref_id":"123"},{"children":[{"text":" ~ "}]},{"children":[{"children":[{"text":"\"American Joint Committee on Cancer cTa (qualifier value)\""}]}],"node_type":"CodeRef","ref_id":"124"}],"node_type":"Equivalent","ref_id":"125"}],"node_type":"Or","ref_id":"126"},{"children":[{"text":"\n        or "}]},{"children":[{"children":[{"children":[{"children":[{"text":"FirstBladderCancerStagingMP"}]}],"ref_id":"127"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"result"}]}],"node_type":"Property","ref_id":"128"}],"node_type":"Property","ref_id":"128"},{"children":[{"text":" ~ "}]},{"children":[{"children":[{"text":"\"Carcinoma in situ of bladder\""}]}],"node_type":"CodeRef","ref_id":"129"}],"node_type":"Equivalent","ref_id":"130"}],"ref_id":"131"}],"ref_id":"131"}],"node_type":"Query","ref_id":"132"},{"children":[{"text":"\n  )"}]}],"node_type":"Query","ref_id":"132"},{"children":[{"text":" is not null"}]}],"node_type":"Not","ref_id":"133"}],"ref_id":"134"}],"define_name":"Has Most Recent Bladder Cancer Tumor Staging is Ta HG, Tis, T1"},{"children":[{"children":[{"children":[{"text":"define \"Has Qualifying Encounter\":\n  "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Office Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"136"}],"node_type":"Retrieve","ref_id":"136"},{"children":[{"text":" ValidEncounter"}]}],"ref_id":"137"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"ValidEncounter"}]}],"ref_id":"138"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"139"}],"node_type":"Property","ref_id":"139"},{"children":[{"text":" during day of "}],"node_type":"IncludedIn","ref_id":"141"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"140"}],"node_type":"IncludedIn","ref_id":"141"},{"children":[{"text":"\n      and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"ValidEncounter"}]}],"ref_id":"142"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"class"}]}],"node_type":"Property","ref_id":"143"}],"node_type":"Property","ref_id":"143"},{"children":[{"text":" !~ "}]},{"children":[{"children":[{"text":"\"virtual\""}]}],"node_type":"CodeRef","ref_id":"144"}],"node_type":"Not","ref_id":"146"}],"ref_id":"147"}],"ref_id":"147"}],"node_type":"Query","ref_id":"148"}],"node_type":"Exists","ref_id":"149"}],"ref_id":"150"}],"define_name":"Has Qualifying Encounter"},{"children":[{"children":[{"children":[{"text":"define \"Initial Population\":\n  "}]},{"children":[{"children":[{"children":[{"text":"\"Has Most Recent Bladder Cancer Tumor Staging is Ta HG, Tis, T1\""}]}],"node_type":"ExpressionRef","ref_id":"135"},{"children":[{"text":"\n    and "}]},{"children":[{"children":[{"text":"\"Has Qualifying Encounter\""}]}],"node_type":"ExpressionRef","ref_id":"151"}],"node_type":"And","ref_id":"152"}],"ref_id":"153"}],"define_name":"Initial Population"},{"children":[{"children":[{"children":[{"text":"define \"Denominator\":\n  "}]},{"children":[{"children":[{"text":"\"Initial Population\""}]}],"node_type":"ExpressionRef","ref_id":"154"}],"ref_id":"155"}],"define_name":"Denominator"},{"children":[{"children":[{"children":[{"text":"define \"BCG Not Available Within 6 Months After Bladder Cancer Staging\":\n  "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Medication, Not Administered\": "}]},{"children":[{"children":[{"text":"\"BCG Bacillus Calmette Guerin for Urology Care\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"156"}],"node_type":"Retrieve","ref_id":"156"},{"children":[{"text":" BCGnotGiven"}]}],"ref_id":"157"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"First Bladder Cancer Staging Procedure\""}]}]}],"node_type":"ExpressionRef","ref_id":"158"},{"children":[{"text":" FirstBladderCancerStaging"}]}],"ref_id":"159"},{"children":[{"text":"\n        such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"BCGnotGiven"}]}],"ref_id":"160"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"161"}],"node_type":"Property","ref_id":"161"},{"children":[{"text":" "}]},{"children":[{"children":[{"children":[{"text":"6 months"}]}],"node_type":"Quantity","ref_id":"169"},{"children":[{"text":" or less after"}]}],"node_type":"And","ref_id":"170"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"162"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\" ( "}]},{"children":[{"children":[{"children":[{"text":"FirstBladderCancerStaging"}]}],"ref_id":"163"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"164"}],"node_type":"Property","ref_id":"164"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"FirstBladderCancerStaging"}]}],"ref_id":"165"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"166"}],"node_type":"Property","ref_id":"166"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"167"}],"node_type":"FunctionRef","ref_id":"167"}],"node_type":"Start","ref_id":"168"}],"node_type":"And","ref_id":"170"}],"ref_id":"171"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"BCGnotGiven"}]}],"ref_id":"172"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"negationRationale"}]}],"ref_id":"173"}],"ref_id":"173"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Unavailability of Bacillus Calmette Guerin for urology care\""}]}],"ref_id":"174"}],"ref_id":"175"}],"ref_id":"175"}],"node_type":"Query","ref_id":"176"},{"children":[{"text":"\n  )"}]}],"node_type":"Query","ref_id":"176"}],"ref_id":"177"}],"define_name":"BCG Not Available Within 6 Months After Bladder Cancer Staging"},{"children":[{"children":[{"children":[{"text":"define \"Denominator Exception\":\n  "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"\"BCG Not Available Within 6 Months After Bladder Cancer Staging\""}]}],"node_type":"ExpressionRef","ref_id":"178"}],"node_type":"Exists","ref_id":"179"}],"ref_id":"180"}],"define_name":"Denominator Exception"},{"children":[{"children":[{"children":[{"text":"define \"First BCG Administered\":\n  "}]},{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Medication, Administered\": "}]},{"children":[{"children":[{"text":"\"BCG Bacillus Calmette Guerin for Urology Care\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"181"}],"node_type":"Retrieve","ref_id":"181"},{"children":[{"text":" BCG"}]}],"ref_id":"182"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"First Bladder Cancer Staging Procedure\""}]}]}],"node_type":"ExpressionRef","ref_id":"183"},{"children":[{"text":" FirstBladderCancerStaging"}]}],"ref_id":"184"},{"children":[{"text":"\n        such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"185"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\"("}]},{"children":[{"children":[{"children":[{"text":"BCG"}]}],"ref_id":"186"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"187"}],"node_type":"Property","ref_id":"187"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"BCG"}]}],"ref_id":"188"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"189"}],"node_type":"Property","ref_id":"189"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"190"}],"node_type":"FunctionRef","ref_id":"190"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"starts "}]},{"children":[{"children":[{"text":"6 months"}]}],"node_type":"Quantity","ref_id":"198"},{"children":[{"text":" or less after"}]}],"node_type":"And","ref_id":"199"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"191"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\"("}]},{"children":[{"children":[{"children":[{"text":"FirstBladderCancerStaging"}]}],"ref_id":"192"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"193"}],"node_type":"Property","ref_id":"193"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"FirstBladderCancerStaging"}]}],"ref_id":"194"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"195"}],"node_type":"Property","ref_id":"195"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"196"}],"node_type":"FunctionRef","ref_id":"196"}],"node_type":"Start","ref_id":"197"}],"node_type":"And","ref_id":"199"}],"ref_id":"200"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"201"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\"("}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"IdentifierRef","ref_id":"202"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"203"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"204"}],"node_type":"FunctionRef","ref_id":"204"}],"node_type":"Start","ref_id":"205"}],"ref_id":"206"}],"ref_id":"207"}],"ref_id":"208"},{"children":[{"text":"\n  )"}]}],"node_type":"First","ref_id":"209"}],"ref_id":"210"}],"define_name":"First BCG Administered"},{"children":[{"children":[{"children":[{"text":"define \"Numerator\":\n  "}]},{"children":[{"children":[{"children":[{"text":"\"First BCG Administered\""}]}],"node_type":"ExpressionRef","ref_id":"211"},{"children":[{"text":" is not null"}]}],"node_type":"Not","ref_id":"212"}],"ref_id":"213"}],"define_name":"Numerator"},{"children":[{"children":[{"children":[{"text":"define \"SDE Ethnicity\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Ethnicity\": "}]},{"children":[{"children":[{"text":"\"Ethnicity\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"214"}],"ref_id":"215"}],"define_name":"SDE Ethnicity"},{"children":[{"children":[{"children":[{"text":"define \"SDE Payer\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Payer\": "}]},{"children":[{"children":[{"text":"\"Payer Type\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"216"}],"ref_id":"217"}],"define_name":"SDE Payer"},{"children":[{"children":[{"children":[{"text":"define \"SDE Race\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Race\": "}]},{"children":[{"children":[{"text":"\"Race\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"218"}],"ref_id":"219"}],"define_name":"SDE Race"},{"children":[{"children":[{"children":[{"text":"define \"SDE Sex\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Sex\": "}]},{"children":[{"children":[{"text":"\"ONC Administrative Sex\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"220"}],"ref_id":"221"}],"define_name":"SDE Sex"},{"children":[{"children":[{"children":[{"text":"define \"Acute Tuberculosis Diagnosis\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Diagnosis\": "}]},{"children":[{"children":[{"text":"\"Active Tuberculosis for Urology Care\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"222"}],"node_type":"Retrieve","ref_id":"222"},{"children":[{"text":" ActiveTuberculosis"}]}],"ref_id":"223"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"First Bladder Cancer Staging Procedure\""}]}]}],"node_type":"ExpressionRef","ref_id":"224"},{"children":[{"text":" FirstBladderCancerStaging"}]}],"ref_id":"225"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"ActiveTuberculosis"}]}],"ref_id":"226"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"prevalencePeriod"}]}],"node_type":"Property","ref_id":"227"}],"node_type":"Property","ref_id":"227"},{"children":[{"text":" overlaps after day of "}],"node_type":"OverlapsAfter","ref_id":"234"},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"228"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\" ( "}]},{"children":[{"children":[{"children":[{"text":"FirstBladderCancerStaging"}]}],"ref_id":"229"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"230"}],"node_type":"Property","ref_id":"230"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"FirstBladderCancerStaging"}]}],"ref_id":"231"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"232"}],"node_type":"Property","ref_id":"232"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"233"}],"node_type":"FunctionRef","ref_id":"233"}],"node_type":"OverlapsAfter","ref_id":"234"}],"ref_id":"235"}],"node_type":"Query","ref_id":"236"}],"ref_id":"237"}],"define_name":"Acute Tuberculosis Diagnosis"},{"children":[{"children":[{"children":[{"text":"define \"Immunosuppressive Drugs\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Medication, Active\": "}]},{"children":[{"children":[{"text":"\"Immunosuppressive Drugs for Urology Care\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"240"}],"node_type":"Retrieve","ref_id":"240"},{"children":[{"text":" ImmunosuppressiveDrugs"}]}],"ref_id":"241"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"First Bladder Cancer Staging Procedure\""}]}]}],"node_type":"ExpressionRef","ref_id":"242"},{"children":[{"text":" FirstBladderCancerStaging"}]}],"ref_id":"243"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"244"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\" ( "}]},{"children":[{"children":[{"children":[{"text":"ImmunosuppressiveDrugs"}]}],"ref_id":"245"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"246"}],"node_type":"Property","ref_id":"246"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"ImmunosuppressiveDrugs"}]}],"ref_id":"247"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"248"}],"node_type":"Property","ref_id":"248"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"249"}],"node_type":"FunctionRef","ref_id":"249"},{"children":[{"text":" starts on or before day of "}],"node_type":"SameOrBefore","ref_id":"257"},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"250"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\" ( "}]},{"children":[{"children":[{"children":[{"text":"FirstBladderCancerStaging"}]}],"ref_id":"251"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"252"}],"node_type":"Property","ref_id":"252"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"FirstBladderCancerStaging"}]}],"ref_id":"253"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"254"}],"node_type":"Property","ref_id":"254"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"255"}],"node_type":"FunctionRef","ref_id":"255"}],"node_type":"Start","ref_id":"256"}],"node_type":"SameOrBefore","ref_id":"257"}],"ref_id":"258"}],"node_type":"Query","ref_id":"259"}],"ref_id":"260"}],"define_name":"Immunosuppressive Drugs"},{"children":[{"children":[{"children":[{"text":"define \"Cystectomy Done\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Procedure, Performed\": "}]},{"children":[{"children":[{"text":"\"Cystectomy for Urology Care\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"264"}],"node_type":"Retrieve","ref_id":"264"},{"children":[{"text":" Cystectomy"}]}],"ref_id":"265"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"First Bladder Cancer Staging Procedure\""}]}]}],"node_type":"ExpressionRef","ref_id":"266"},{"children":[{"text":" FirstBladderCancerStaging"}]}],"ref_id":"267"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"268"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"EarliestOf ( "}]},{"children":[{"children":[{"children":[{"text":"Cystectomy"}]}],"ref_id":"269"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"270"}],"node_type":"Property","ref_id":"270"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"Cystectomy"}]}],"ref_id":"271"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"272"}],"node_type":"Property","ref_id":"272"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"273"}],"node_type":"FunctionRef","ref_id":"273"},{"children":[{"text":" "}]},{"children":[{"children":[{"children":[{"text":"6 months"}]}],"node_type":"Quantity","ref_id":"281"},{"children":[{"text":" or less before"}]}],"node_type":"And","ref_id":"282"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"274"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\" ( "}]},{"children":[{"children":[{"children":[{"text":"FirstBladderCancerStaging"}]}],"ref_id":"275"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"276"}],"node_type":"Property","ref_id":"276"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"FirstBladderCancerStaging"}]}],"ref_id":"277"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"278"}],"node_type":"Property","ref_id":"278"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"279"}],"node_type":"FunctionRef","ref_id":"279"}],"node_type":"Start","ref_id":"280"}],"node_type":"And","ref_id":"282"}],"ref_id":"283"}],"node_type":"Query","ref_id":"284"}],"ref_id":"285"}],"define_name":"Cystectomy Done"},{"children":[{"children":[{"children":[{"text":"define \"Has Excluding  HIV, Immunocompromised Conditions or Mixed Histology Before Staging\":\n  "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"text":"[\"Diagnosis\": "}]},{"children":[{"children":[{"text":"\"HIV\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"289"},{"children":[{"text":"\n      union "}]},{"children":[{"children":[{"text":"[\"Diagnosis\": "}]},{"children":[{"children":[{"text":"\"Immunocompromised Conditions\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"290"}],"node_type":"Union","ref_id":"291"},{"children":[{"text":"\n      union "}]},{"children":[{"children":[{"text":"[\"Diagnosis\": "}]},{"children":[{"children":[{"text":"\"Mixed histology urothelial cell carcinoma for Urology Care\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"292"}],"node_type":"Union","ref_id":"293"},{"children":[{"text":" )"}]}],"node_type":"Union","ref_id":"293"},{"children":[{"text":" ExclusionDiagnosis"}]}],"ref_id":"294"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"First Bladder Cancer Staging Procedure\""}]}]}],"node_type":"ExpressionRef","ref_id":"295"},{"children":[{"text":" FirstBladderCancerStaging"}]}],"ref_id":"296"},{"children":[{"text":"\n        such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"ExclusionDiagnosis"}]}],"ref_id":"297"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"prevalencePeriod"}]}],"node_type":"Property","ref_id":"298"}],"node_type":"Property","ref_id":"298"},{"children":[{"text":" starts on or before day of "}],"node_type":"SameOrBefore","ref_id":"306"},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"299"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\" ( "}]},{"children":[{"children":[{"children":[{"text":"FirstBladderCancerStaging"}]}],"ref_id":"300"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"301"}],"node_type":"Property","ref_id":"301"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"FirstBladderCancerStaging"}]}],"ref_id":"302"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"303"}],"node_type":"Property","ref_id":"303"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"304"}],"node_type":"FunctionRef","ref_id":"304"}],"node_type":"Start","ref_id":"305"}],"node_type":"SameOrBefore","ref_id":"306"}],"ref_id":"307"}],"node_type":"Query","ref_id":"308"},{"children":[{"text":"\n  )"}]}],"node_type":"Query","ref_id":"308"}],"node_type":"Exists","ref_id":"309"}],"ref_id":"310"}],"define_name":"Has Excluding  HIV, Immunocompromised Conditions or Mixed Histology Before Staging"},{"children":[{"children":[{"children":[{"text":"define \"Has Excluding Chemotherapy or Radiotherapy Procedure Before Staging\":\n  "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"text":"[\"Medication, Active\": "}]},{"children":[{"children":[{"text":"\"Chemotherapy Agents for Advanced Cancer\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"313"},{"children":[{"text":"\n      union "}]},{"children":[{"children":[{"text":"[\"Procedure, Performed\": "}]},{"children":[{"children":[{"text":"\"Combined radiotherapy (procedure)\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"314"}],"node_type":"Union","ref_id":"315"},{"children":[{"text":" )"}]}],"node_type":"Union","ref_id":"315"},{"children":[{"text":" ExclusionMedsProcedures"}]}],"ref_id":"316"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"First Bladder Cancer Staging Procedure\""}]}]}],"node_type":"ExpressionRef","ref_id":"317"},{"children":[{"text":" FirstBladderCancerStaging"}]}],"ref_id":"318"},{"children":[{"text":"\n        such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"ExclusionMedsProcedures"}]}],"ref_id":"319"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"320"}],"node_type":"Property","ref_id":"320"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"starts "}]},{"children":[{"children":[{"text":"6 months"}]}],"node_type":"Quantity","ref_id":"327"},{"children":[{"text":" or less before"}]}],"node_type":"And","ref_id":"328"},{"children":[{"text":" "}]},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"321"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\" ( "}]},{"children":[{"children":[{"children":[{"text":"FirstBladderCancerStaging"}]}],"ref_id":"322"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"323"}],"node_type":"Property","ref_id":"323"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"FirstBladderCancerStaging"}]}],"ref_id":"324"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"325"}],"node_type":"Property","ref_id":"325"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"326"}],"node_type":"FunctionRef","ref_id":"326"}],"node_type":"And","ref_id":"328"}],"ref_id":"329"}],"node_type":"Query","ref_id":"330"},{"children":[{"text":"\n  )"}]}],"node_type":"Query","ref_id":"330"}],"node_type":"Exists","ref_id":"331"}],"ref_id":"332"}],"define_name":"Has Excluding Chemotherapy or Radiotherapy Procedure Before Staging"},{"children":[{"children":[{"children":[{"text":"define \"Denominator Exclusion\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"\"Acute Tuberculosis Diagnosis\""}]}],"node_type":"ExpressionRef","ref_id":"238"}],"node_type":"Exists","ref_id":"239"},{"children":[{"text":"\n    or "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"\"Immunosuppressive Drugs\""}]}],"node_type":"ExpressionRef","ref_id":"261"}],"node_type":"Exists","ref_id":"262"}],"node_type":"Or","ref_id":"263"},{"children":[{"text":"\n    or "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"\"Cystectomy Done\""}]}],"node_type":"ExpressionRef","ref_id":"286"}],"node_type":"Exists","ref_id":"287"}],"node_type":"Or","ref_id":"288"},{"children":[{"text":"\n    or "}]},{"children":[{"children":[{"text":"\"Has Excluding  HIV, Immunocompromised Conditions or Mixed Histology Before Staging\""}]}],"node_type":"ExpressionRef","ref_id":"311"}],"node_type":"Or","ref_id":"312"},{"children":[{"text":"\n    or "}]},{"children":[{"children":[{"text":"\"Has Excluding Chemotherapy or Radiotherapy Procedure Before Staging\""}]}],"node_type":"ExpressionRef","ref_id":"333"}],"node_type":"Or","ref_id":"334"}],"ref_id":"335"}],"define_name":"Denominator Exclusion"}],"identifier":{"id":"IntravesicalBacillusCalmetteGuerinForBladderCancer","version":"5.2.000"}},"is_main_library":true,"is_top_level":true,"library_name":"IntravesicalBacillusCalmetteGuerinForBladderCancer","library_version":"5.2.000","statement_dependencies":[{"_id":"68923f6fa83e15671c2e3940","statement_name":"Patient"},{"_id":"68923f6fa83e15671c2e3941","statement_name":"Bladder Cancer Diagnosis"},{"_id":"68923f6fa83e15671c2e3942","statement_name":"First Bladder Cancer Staging Procedure","statement_references":[{"_id":"68923f6fa83e15671c2e3924","hqmf_id":null,"library_name":"IntravesicalBacillusCalmetteGuerinForBladderCancer","statement_name":"Bladder Cancer Diagnosis"},{"_id":"68923f6fa83e15671c2e3925","hqmf_id":null,"library_name":"MATGlobalCommonFunctionsQDM","statement_name":"NormalizeInterval"}]},{"_id":"68923f6fa83e15671c2e3943","statement_name":"July 1 of Year Prior to the Measurement Period"},{"_id":"68923f6fa83e15671c2e3944","statement_name":"June 30 of the Measurement Period"},{"_id":"68923f6fa83e15671c2e3945","statement_name":"First Bladder Cancer Staging Procedure during 6 Months Prior to Measurement Period through the First 6 Months of Measurement Period","statement_references":[{"_id":"68923f6fa83e15671c2e3926","hqmf_id":null,"library_name":"IntravesicalBacillusCalmetteGuerinForBladderCancer","statement_name":"First Bladder Cancer Staging Procedure"},{"_id":"68923f6fa83e15671c2e3927","hqmf_id":null,"library_name":"MATGlobalCommonFunctionsQDM","statement_name":"NormalizeInterval"},{"_id":"68923f6fa83e15671c2e3928","hqmf_id":null,"library_name":"IntravesicalBacillusCalmetteGuerinForBladderCancer","statement_name":"July 1 of Year Prior to the Measurement Period"},{"_id":"68923f6fa83e15671c2e3929","hqmf_id":null,"library_name":"IntravesicalBacillusCalmetteGuerinForBladderCancer","statement_name":"June 30 of the Measurement Period"}]},{"_id":"68923f6fa83e15671c2e3946","statement_name":"Has Most Recent Bladder Cancer Tumor Staging is Ta HG, Tis, T1","statement_references":[{"_id":"68923f77a83e15671c2e3fe3","hqmf_id":null,"library_name":"IntravesicalBacillusCalmetteGuerinForBladderCancer","statement_name":"First Bladder Cancer Staging Procedure during 6 Months Prior to Measurement Period through the First 6 Months of Measurement Period"}]},{"_id":"68923f6fa83e15671c2e3947","statement_name":"Has Qualifying Encounter"},{"_id":"68923f6fa83e15671c2e3948","statement_name":"Initial Population","statement_references":[{"_id":"68923f6fa83e15671c2e392a","hqmf_id":null,"library_name":"IntravesicalBacillusCalmetteGuerinForBladderCancer","statement_name":"Has Most Recent Bladder Cancer Tumor Staging is Ta HG, Tis, T1"},{"_id":"68923f6fa83e15671c2e392b","hqmf_id":null,"library_name":"IntravesicalBacillusCalmetteGuerinForBladderCancer","statement_name":"Has Qualifying Encounter"}]},{"_id":"68923f6fa83e15671c2e3949","statement_name":"Denominator","statement_references":[{"_id":"68923f77a83e15671c2e3fe4","hqmf_id":null,"library_name":"IntravesicalBacillusCalmetteGuerinForBladderCancer","statement_name":"Initial Population"}]},{"_id":"68923f6fa83e15671c2e394a","statement_name":"BCG Not Available Within 6 Months After Bladder Cancer Staging","statement_references":[{"_id":"68923f6fa83e15671c2e392c","hqmf_id":null,"library_name":"IntravesicalBacillusCalmetteGuerinForBladderCancer","statement_name":"First Bladder Cancer Staging Procedure"},{"_id":"68923f6fa83e15671c2e392d","hqmf_id":null,"library_name":"MATGlobalCommonFunctionsQDM","statement_name":"NormalizeInterval"}]},{"_id":"68923f6fa83e15671c2e394b","statement_name":"Denominator Exception","statement_references":[{"_id":"68923f77a83e15671c2e3fe5","hqmf_id":null,"library_name":"IntravesicalBacillusCalmetteGuerinForBladderCancer","statement_name":"BCG Not Available Within 6 Months After Bladder Cancer Staging"}]},{"_id":"68923f6fa83e15671c2e394c","statement_name":"First BCG Administered","statement_references":[{"_id":"68923f6fa83e15671c2e392e","hqmf_id":null,"library_name":"IntravesicalBacillusCalmetteGuerinForBladderCancer","statement_name":"First Bladder Cancer Staging Procedure"},{"_id":"68923f6fa83e15671c2e392f","hqmf_id":null,"library_name":"MATGlobalCommonFunctionsQDM","statement_name":"NormalizeInterval"}]},{"_id":"68923f6fa83e15671c2e394d","statement_name":"Numerator","statement_references":[{"_id":"68923f77a83e15671c2e3fe6","hqmf_id":null,"library_name":"IntravesicalBacillusCalmetteGuerinForBladderCancer","statement_name":"First BCG Administered"}]},{"_id":"68923f6fa83e15671c2e394e","statement_name":"SDE Ethnicity"},{"_id":"68923f6fa83e15671c2e394f","statement_name":"SDE Payer"},{"_id":"68923f6fa83e15671c2e3950","statement_name":"SDE Race"},{"_id":"68923f6fa83e15671c2e3951","statement_name":"SDE Sex"},{"_id":"68923f6fa83e15671c2e3952","statement_name":"Acute Tuberculosis Diagnosis","statement_references":[{"_id":"68923f6fa83e15671c2e3930","hqmf_id":null,"library_name":"IntravesicalBacillusCalmetteGuerinForBladderCancer","statement_name":"First Bladder Cancer Staging Procedure"},{"_id":"68923f6fa83e15671c2e3931","hqmf_id":null,"library_name":"MATGlobalCommonFunctionsQDM","statement_name":"NormalizeInterval"}]},{"_id":"68923f6fa83e15671c2e3953","statement_name":"Immunosuppressive Drugs","statement_references":[{"_id":"68923f6fa83e15671c2e3932","hqmf_id":null,"library_name":"IntravesicalBacillusCalmetteGuerinForBladderCancer","statement_name":"First Bladder Cancer Staging Procedure"},{"_id":"68923f6fa83e15671c2e3933","hqmf_id":null,"library_name":"MATGlobalCommonFunctionsQDM","statement_name":"NormalizeInterval"}]},{"_id":"68923f6fa83e15671c2e3954","statement_name":"Cystectomy Done","statement_references":[{"_id":"68923f6fa83e15671c2e3934","hqmf_id":null,"library_name":"IntravesicalBacillusCalmetteGuerinForBladderCancer","statement_name":"First Bladder Cancer Staging Procedure"},{"_id":"68923f6fa83e15671c2e3935","hqmf_id":null,"library_name":"MATGlobalCommonFunctionsQDM","statement_name":"EarliestOf"},{"_id":"68923f6fa83e15671c2e3936","hqmf_id":null,"library_name":"MATGlobalCommonFunctionsQDM","statement_name":"NormalizeInterval"}]},{"_id":"68923f6fa83e15671c2e3955","statement_name":"Has Excluding  HIV, Immunocompromised Conditions or Mixed Histology Before Staging","statement_references":[{"_id":"68923f6fa83e15671c2e3937","hqmf_id":null,"library_name":"IntravesicalBacillusCalmetteGuerinForBladderCancer","statement_name":"First Bladder Cancer Staging Procedure"},{"_id":"68923f6fa83e15671c2e3938","hqmf_id":null,"library_name":"MATGlobalCommonFunctionsQDM","statement_name":"NormalizeInterval"}]},{"_id":"68923f6fa83e15671c2e3956","statement_name":"Has Excluding Chemotherapy or Radiotherapy Procedure Before Staging","statement_references":[{"_id":"68923f6fa83e15671c2e3939","hqmf_id":null,"library_name":"IntravesicalBacillusCalmetteGuerinForBladderCancer","statement_name":"First Bladder Cancer Staging Procedure"},{"_id":"68923f6fa83e15671c2e393a","hqmf_id":null,"library_name":"MATGlobalCommonFunctionsQDM","statement_name":"NormalizeInterval"}]},{"_id":"68923f6fa83e15671c2e3957","statement_name":"Denominator Exclusion","statement_references":[{"_id":"68923f6fa83e15671c2e393b","hqmf_id":null,"library_name":"IntravesicalBacillusCalmetteGuerinForBladderCancer","statement_name":"Acute Tuberculosis Diagnosis"},{"_id":"68923f6fa83e15671c2e393c","hqmf_id":null,"library_name":"IntravesicalBacillusCalmetteGuerinForBladderCancer","statement_name":"Immunosuppressive Drugs"},{"_id":"68923f6fa83e15671c2e393d","hqmf_id":null,"library_name":"IntravesicalBacillusCalmetteGuerinForBladderCancer","statement_name":"Cystectomy Done"},{"_id":"68923f6fa83e15671c2e393e","hqmf_id":null,"library_name":"IntravesicalBacillusCalmetteGuerinForBladderCancer","statement_name":"Has Excluding  HIV, Immunocompromised Conditions or Mixed Histology Before Staging"},{"_id":"68923f6fa83e15671c2e393f","hqmf_id":null,"library_name":"IntravesicalBacillusCalmetteGuerinForBladderCancer","statement_name":"Has Excluding Chemotherapy or Radiotherapy Procedure Before Staging"}]}]},{"_id":"68923f6fa83e15671c2e395f","cql":"library MATGlobalCommonFunctionsQDM version '8.0.000'\n\n/*1. Upversion to 8.0.000 to support 2024 AU efforts.  No content changes were made from version 7.2.000 to this version 8.0.000*/\n\nusing QDM version '5.6'\n\nvalueset \"Emergency Department Visit\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.292' \nvalueset \"Encounter Inpatient\": 'urn:oid:2.16.840.1.113883.3.666.5.307' \nvalueset \"Intensive Care Unit\": 'urn:oid:2.16.840.1.113762.1.4.1029.206' \nvalueset \"Observation Services\": 'urn:oid:2.16.840.1.113762.1.4.1111.143' \nvalueset \"Outpatient Surgery Service\": 'urn:oid:2.16.840.1.113762.1.4.1110.38' \n\nparameter \"Measurement Period\" Interval\u003cDateTime\u003e\n\ncontext Patient\n\ndefine \"ED Encounter\":\n  [\"Encounter, Performed\": \"Emergency Department Visit\"]\n\ndefine \"Inpatient Encounter\":\n  [\"Encounter, Performed\": \"Encounter Inpatient\"] EncounterInpatient\n    where EncounterInpatient.relevantPeriod ends during day of \"Measurement Period\"\n\n/*@description: Returns an interval of date values extracted from the input interval of date-time values\n@comment: This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability.*/\ndefine function \"ToDateInterval\"(period Interval\u003cDateTime\u003e ):\n  Interval[date from start of period, date from end of period]\n\n/*calculates the difference in calendar days between the start and end of the given interval.*/\ndefine function \"LengthInDays\"(Value Interval\u003cDateTime\u003e ):\n  difference in days between start of Value and end of Value\n\n/*returns list of all locations within an encounter, including locations for immediately prior ED visit.*/\ndefine function \"HospitalizationLocations\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet EDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn if EDVisit is null then Visit.facilityLocations \n  \t\telse flatten { EDVisit.facilityLocations, Visit.facilityLocations }\n\n/*Returns the arrival time in the ED for the encounter.*/\ndefine function \"EmergencyDepartmentArrivalTime\"(Encounter \"Encounter, Performed\" ):\n  start of First((\"HospitalizationLocations\"(Encounter))HospitalLocation\n  \t\twhere HospitalLocation.code in \"Emergency Department Visit\"\n  \t\tsort by start of locationPeriod\n  ).locationPeriod\n\n/*Returns admission time for an encounter or for immediately prior emergency department visit.*/\ndefine function \"HospitalAdmissionTime\"(Encounter \"Encounter, Performed\" ):\n  start of \"Hospitalization\"(Encounter)\n\n/*Returns earliest arrival time for an encounter including any prior ED visit.*/\ndefine function \"HospitalArrivalTime\"(Encounter \"Encounter, Performed\" ):\n  start of First((\"HospitalizationLocations\"(Encounter))HospitalLocation\n  \t\tsort by start of locationPeriod\n  ).locationPeriod\n\n/*Hospitalization returns the total interval for admission to discharge for the given encounter, or for the admission of any immediately prior emergency department visit to the discharge of the given encounter.*/\ndefine function \"Hospitalization\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet EDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn Interval[Coalesce(start of EDVisit.relevantPeriod, start of Visit.relevantPeriod), \n  \tend of Visit.relevantPeriod]\n\n/*Returns the length of stay in days (i.e. the number of days between admission and discharge) for the given encounter, or from the admission of any immediately prior emergency department visit to the discharge of the encounter*/\ndefine function \"HospitalizationLengthofStay\"(Encounter \"Encounter, Performed\" ):\n  LengthInDays(\"Hospitalization\"(Encounter))\n\n/*Returns the latest departure time for encounter including any prior ED visit.*/\ndefine function \"HospitalDepartureTime\"(Encounter \"Encounter, Performed\" ):\n  end of Last((\"HospitalizationLocations\"(Encounter))HospitalLocation\n  \t\tsort by start of locationPeriod\n  ).locationPeriod\n\n/*Hospital Discharge Time returns the discharge time for an encounter*/\ndefine function \"HospitalDischargeTime\"(Encounter \"Encounter, Performed\" ):\n  end of Encounter.relevantPeriod\n\n/*Hospitalization with Observation and Outpatient Surgery Service returns the total interval from the start of any immediately prior emergency department visit, outpatient surgery visit or observation visit to the discharge of the given encounter.*/\ndefine function \"HospitalizationWithObservationAndOutpatientSurgeryService\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet ObsVisit: Last([\"Encounter, Performed\": \"Observation Services\"] LastObs\n  \t\t\twhere LastObs.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t),\n  \tVisitStart: Coalesce(start of ObsVisit.relevantPeriod, start of Visit.relevantPeriod),\n  \tEDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before VisitStart\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t),\n  \tVisitStartWithED: Coalesce(start of EDVisit.relevantPeriod, VisitStart),\n  \tOutpatientSurgeryVisit: Last([\"Encounter, Performed\": \"Outpatient Surgery Service\"] LastSurgeryOP\n  \t\t\twhere LastSurgeryOP.relevantPeriod ends 1 hour or less on or before VisitStartWithED\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn Interval[Coalesce(start of OutpatientSurgeryVisit.relevantPeriod, VisitStartWithED), \n  \tend of Visit.relevantPeriod]\n\n/*Hospitalization with Observation returns the total interval from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\ndefine function \"HospitalizationWithObservation\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet ObsVisit: Last([\"Encounter, Performed\": \"Observation Services\"] LastObs\n  \t\t\twhere LastObs.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t),\n  \tVisitStart: Coalesce(start of ObsVisit.relevantPeriod, start of Visit.relevantPeriod),\n  \tEDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before VisitStart\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn Interval[Coalesce(start of EDVisit.relevantPeriod, VisitStart), \n  \tend of Visit.relevantPeriod]\n\n/*Hospitalization with Observation Length of Stay returns the length in days from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\ndefine function \"HospitalizationWithObservationLengthofStay\"(Encounter \"Encounter, Performed\" ):\n  \"LengthInDays\"(\"HospitalizationWithObservation\"(Encounter))\n\n/*First Inpatient Intensive Care Unit returns the first intensive care unit for the given encounter, without considering any immediately prior emergency department visit.*/\ndefine function \"FirstInpatientIntensiveCareUnit\"(Encounter \"Encounter, Performed\" ):\n  First((Encounter.facilityLocations)HospitalLocation\n      where HospitalLocation.code in \"Intensive Care Unit\"\n        and HospitalLocation.locationPeriod during Encounter.relevantPeriod\n      sort by start of locationPeriod\n  )\n\n/*Given a datetime and a period, returns the period (if a period is provided) or the interval beginning and ending on the datetime (if a datetime is provided)*/\ndefine function \"NormalizeInterval\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  if pointInTime is not null then Interval[pointInTime, pointInTime]\n    else if period is not null then period \n    else null as Interval\u003cDateTime\u003e\n\n/*Given an interval, return true if the interval has a starting boundary specified (i.e. the start of the interval is not null and not the minimum DateTime value)*/\ndefine function \"HasStart\"(period Interval\u003cDateTime\u003e ):\n  not ( start of period is null\n      or start of period = minimum DateTime\n  )\n\n/*Given an interval, return true if the interval has an ending boundary specified (i.e. the end of the interval is not null and not the maximum DateTime value)*/\ndefine function \"HasEnd\"(period Interval\u003cDateTime\u003e ):\n  not ( \n    end of period is null\n      or \n      end of period = maximum DateTime\n  )\n\n/*Given an interval, return the ending point if the interval has an ending boundary specified, otherwise, return the starting point*/\ndefine function \"Latest\"(period Interval\u003cDateTime\u003e ):\n  if ( HasEnd(period)) then \n  end of period \n    else start of period\n\n/*Given an interval, return the starting point if the interval has a starting boundary specified, otherwise, return the ending point*/\ndefine function \"Earliest\"(period Interval\u003cDateTime\u003e ):\n  if ( HasStart(period)) then start of period \n    else \n  end of period\n\n/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the ending point of the period if the period has an ending boundary specified, otherwise returns the starting point of the interval*/\ndefine function \"LatestOf\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  Latest(NormalizeInterval(pointInTime, period))\n\n/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the starting point of the period if the period has a starting boundary specified, otherwise returns the ending point of the period*/\ndefine function \"EarliestOf\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  Earliest(NormalizeInterval(pointInTime, period))\n\n","elm":{"library":{"annotation":[{"translatorOptions":"EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion,DisableMethodInvocation","type":"CqlToElmInfo"},{"type":"Annotation","s":{"r":"395","s":[{"value":["","library MATGlobalCommonFunctionsQDM version '8.0.000'"]}]}}],"identifier":{"id":"MATGlobalCommonFunctionsQDM","version":"8.0.000"},"schemaIdentifier":{"id":"urn:hl7-org:elm","version":"r1"},"usings":{"def":[{"localIdentifier":"System","uri":"urn:hl7-org:elm-types:r1"},{"localId":"1","locator":"5:1-5:23","localIdentifier":"QDM","uri":"urn:healthit-gov:qdm:v5_6","version":"5.6","annotation":[{"type":"Annotation","s":{"r":"1","s":[{"value":["/*1. Upversion to 8.0.000 to support 2024 AU efforts.  No content changes were made from version 7.2.000 to this version 8.0.000*/\n","using "]},{"s":[{"value":["QDM"]}]},{"value":[" version ","'5.6'"]}]}}]}]},"parameters":{"def":[{"localId":"9","locator":"13:1-13:49","name":"Measurement Period","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"9","s":[{"value":["","parameter ","\"Measurement Period\""," "]},{"r":"8","s":[{"value":["Interval\u003c"]},{"r":"7","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}}],"parameterTypeSpecifier":{"localId":"8","locator":"13:32-13:49","type":"IntervalTypeSpecifier","pointType":{"localId":"7","locator":"13:41-13:48","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},"valueSets":{"def":[{"localId":"2","locator":"7:1-7:82","name":"Emergency Department Visit","id":"2.16.840.1.113883.3.117.1.7.1.292","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"2","s":[{"value":["","valueset ","\"Emergency Department Visit\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.292'"]}]}}]},{"localId":"3","locator":"8:1-8:71","name":"Encounter Inpatient","id":"2.16.840.1.113883.3.666.5.307","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"3","s":[{"value":["","valueset ","\"Encounter Inpatient\"",": ","'urn:oid:2.16.840.1.113883.3.666.5.307'"]}]}}]},{"localId":"4","locator":"9:1-9:72","name":"Intensive Care Unit","id":"2.16.840.1.113762.1.4.1029.206","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"4","s":[{"value":["","valueset ","\"Intensive Care Unit\"",": ","'urn:oid:2.16.840.1.113762.1.4.1029.206'"]}]}}]},{"localId":"5","locator":"10:1-10:73","name":"Observation Services","id":"2.16.840.1.113762.1.4.1111.143","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"5","s":[{"value":["","valueset ","\"Observation Services\"",": ","'urn:oid:2.16.840.1.113762.1.4.1111.143'"]}]}}]},{"localId":"6","locator":"11:1-11:78","name":"Outpatient Surgery Service","id":"2.16.840.1.113762.1.4.1110.38","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"6","s":[{"value":["","valueset ","\"Outpatient Surgery Service\"",": ","'urn:oid:2.16.840.1.113762.1.4.1110.38'"]}]}}]}]},"contexts":{"def":[{"locator":"15:1-15:15","name":"Patient"}]},"statements":{"def":[{"locator":"15:1-15:15","name":"Patient","context":"Patient","expression":{"type":"SingletonFrom","operand":{"locator":"15:1-15:15","dataType":"{urn:healthit-gov:qdm:v5_6}Patient","templateId":"Patient","type":"Retrieve"}}},{"localId":"11","locator":"17:1-18:56","name":"ED Encounter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"11","s":[{"value":["","define ","\"ED Encounter\"",":\n  "]},{"r":"10","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"10","locator":"18:3-18:56","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"18:28-18:55","name":"Emergency Department Visit","preserve":true,"type":"ValueSetRef"}}},{"localId":"19","locator":"20:1-22:83","name":"Inpatient Encounter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"19","s":[{"value":["","define ","\"Inpatient Encounter\"",":\n  "]},{"r":"18","s":[{"s":[{"r":"13","s":[{"r":"12","s":[{"r":"12","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Encounter Inpatient\""]}]},{"value":["]"]}]}]},{"value":[" ","EncounterInpatient"]}]}]},{"value":["\n    "]},{"r":"17","s":[{"value":["where "]},{"r":"17","s":[{"r":"15","s":[{"r":"14","s":[{"value":["EncounterInpatient"]}]},{"value":["."]},{"r":"15","s":[{"value":["relevantPeriod"]}]}]},{"r":"17","value":[" ","ends during day of"," "]},{"r":"16","s":[{"value":["\"Measurement Period\""]}]}]}]}]}]}}],"expression":{"localId":"18","locator":"21:3-22:83","type":"Query","source":[{"localId":"13","locator":"21:3-21:68","alias":"EncounterInpatient","expression":{"localId":"12","locator":"21:3-21:49","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"21:28-21:48","name":"Encounter Inpatient","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"17","locator":"22:5-22:83","precision":"Day","type":"In","operand":[{"locator":"22:45-22:48","type":"End","operand":{"localId":"15","locator":"22:11-22:43","path":"relevantPeriod","scope":"EncounterInpatient","type":"Property"}},{"localId":"16","locator":"22:64-22:83","name":"Measurement Period","type":"ParameterRef"}]}}},{"localId":"29","locator":"29:1-30:62","name":"ToDateInterval","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","t":[{"name":"description","value":"Returns an interval of date values extracted from the input interval of date-time values"},{"name":"description","value":"Returns an interval of date values extracted from the input interval of date-time values"},{"name":"comment","value":"This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability."}],"s":{"r":"29","s":[{"value":["/*@description: Returns an interval of date values extracted from the input interval of date-time values\n@comment: This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability.*/\n","define function ","\"ToDateInterval\"","(","period"," "]},{"r":"21","s":[{"value":["Interval\u003c"]},{"r":"20","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"28","s":[{"r":"28","s":[{"value":["Interval["]},{"r":"24","s":[{"value":["date from "]},{"r":"23","s":[{"value":["start of "]},{"r":"22","s":[{"value":["period"]}]}]}]},{"value":[", "]},{"r":"27","s":[{"value":["date from "]},{"r":"26","s":[{"value":["end of "]},{"r":"25","s":[{"value":["period"]}]}]}]},{"value":["]"]}]}]}]}}],"expression":{"localId":"28","locator":"30:3-30:62","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"24","locator":"30:12-30:36","type":"DateFrom","operand":{"localId":"23","locator":"30:22-30:36","type":"Start","operand":{"localId":"22","locator":"30:31-30:36","name":"period","type":"OperandRef"}}},"high":{"localId":"27","locator":"30:39-30:61","type":"DateFrom","operand":{"localId":"26","locator":"30:49-30:61","type":"End","operand":{"localId":"25","locator":"30:56-30:61","name":"period","type":"OperandRef"}}}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"21","locator":"29:41-29:58","type":"IntervalTypeSpecifier","pointType":{"localId":"20","locator":"29:50-29:57","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"37","locator":"33:1-34:60","name":"LengthInDays","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"37","s":[{"value":["/*calculates the difference in calendar days between the start and end of the given interval.*/\n","define function ","\"LengthInDays\"","(","Value"," "]},{"r":"31","s":[{"value":["Interval\u003c"]},{"r":"30","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"36","s":[{"r":"36","s":[{"value":["difference in days between "]},{"r":"33","s":[{"value":["start of "]},{"r":"32","s":[{"value":["Value"]}]}]},{"value":[" and "]},{"r":"35","s":[{"value":["end of "]},{"r":"34","s":[{"value":["Value"]}]}]}]}]}]}}],"expression":{"localId":"36","locator":"34:3-34:60","precision":"Day","type":"DifferenceBetween","operand":[{"localId":"33","locator":"34:30-34:43","type":"Start","operand":{"localId":"32","locator":"34:39-34:43","name":"Value","type":"OperandRef"}},{"localId":"35","locator":"34:49-34:60","type":"End","operand":{"localId":"34","locator":"34:56-34:60","name":"Value","type":"OperandRef"}}]},"operand":[{"name":"Value","operandTypeSpecifier":{"localId":"31","locator":"33:38-33:55","type":"IntervalTypeSpecifier","pointType":{"localId":"30","locator":"33:47-33:54","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"70","locator":"37:1-45:71","name":"HospitalizationLocations","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"70","s":[{"value":["/*returns list of all locations within an encounter, including locations for immediately prior ED visit.*/\n","define function ","\"HospitalizationLocations\"","(","Encounter"," "]},{"r":"38","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"69","s":[{"r":"69","s":[{"s":[{"r":"40","s":[{"r":"39","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"56","s":[{"value":["EDVisit",": "]},{"r":"55","s":[{"value":["Last","("]},{"r":"54","s":[{"s":[{"r":"42","s":[{"r":"41","s":[{"r":"41","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"49","s":[{"value":["where "]},{"r":"49","s":[{"r":"44","s":[{"r":"43","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"44","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"49","s":[{"value":["ends "]},{"r":"48","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"47","s":[{"value":["start of "]},{"r":"46","s":[{"r":"45","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"46","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"53","s":[{"value":["sort by \n  \t\t\t"]},{"r":"52","s":[{"r":"51","s":[{"value":["end of "]},{"r":"50","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"68","s":[{"value":["return "]},{"r":"67","s":[{"value":["if "]},{"r":"58","s":[{"r":"57","s":[{"value":["EDVisit"]}]},{"value":[" is null"]}]},{"value":[" then "]},{"r":"60","s":[{"r":"59","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"60","s":[{"value":["facilityLocations"]}]}]},{"value":[" \n  \t\telse "]},{"r":"66","s":[{"value":["flatten "]},{"r":"65","s":[{"value":["{ "]},{"r":"62","s":[{"r":"61","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"62","s":[{"value":["facilityLocations"]}]}]},{"value":[", "]},{"r":"64","s":[{"r":"63","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"64","s":[{"value":["facilityLocations"]}]}]},{"value":[" }"]}]}]}]}]}]}]}]}}],"expression":{"localId":"69","locator":"38:3-45:71","type":"Query","source":[{"localId":"40","locator":"38:3-38:17","alias":"Visit","expression":{"localId":"39","locator":"38:3-38:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"56","locator":"39:8-43:4","identifier":"EDVisit","expression":{"localId":"55","locator":"39:17-43:4","type":"Last","source":{"localId":"54","locator":"39:22-42:26","type":"Query","source":[{"localId":"42","locator":"39:22-39:82","alias":"LastED","expression":{"localId":"41","locator":"39:22-39:75","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"39:47-39:74","name":"Emergency Department Visit","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"49","locator":"40:6-40:95","type":"And","operand":[{"locator":"40:39-40:52","type":"In","operand":[{"locator":"40:34-40:37","type":"End","operand":{"localId":"44","locator":"40:12-40:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"40:39-40:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"40:67-40:95","type":"Subtract","operand":[{"localId":"47","locator":"40:67-40:95","type":"Start","operand":{"localId":"46","locator":"40:76-40:95","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"48","locator":"40:39-40:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"47","locator":"40:67-40:95","type":"Start","operand":{"localId":"46","locator":"40:76-40:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"40:39-40:52","type":"Not","operand":{"locator":"40:39-40:52","type":"IsNull","operand":{"localId":"47","locator":"40:67-40:95","type":"Start","operand":{"localId":"46","locator":"40:76-40:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"53","locator":"41:6-42:26","by":[{"localId":"52","locator":"42:6-42:26","direction":"asc","type":"ByExpression","expression":{"localId":"51","locator":"42:6-42:26","type":"End","operand":{"localId":"50","locator":"42:13-42:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"68","locator":"44:4-45:71","expression":{"localId":"67","locator":"44:11-45:71","type":"If","condition":{"localId":"58","locator":"44:14-44:28","type":"IsNull","operand":{"localId":"57","locator":"44:14-44:20","name":"EDVisit","type":"QueryLetRef"}},"then":{"localId":"60","locator":"44:35-44:57","path":"facilityLocations","scope":"Visit","type":"Property"},"else":{"localId":"66","locator":"45:10-45:71","type":"Flatten","operand":{"localId":"65","locator":"45:18-45:71","type":"List","element":[{"localId":"62","locator":"45:20-45:44","path":"facilityLocations","type":"Property","source":{"localId":"61","locator":"45:20-45:26","name":"EDVisit","type":"QueryLetRef"}},{"localId":"64","locator":"45:47-45:69","path":"facilityLocations","scope":"Visit","type":"Property"}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"38","locator":"37:54-37:75","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"87","locator":"48:1-52:18","name":"EmergencyDepartmentArrivalTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"87","s":[{"value":["/*Returns the arrival time in the ED for the encounter.*/\n","define function ","\"EmergencyDepartmentArrivalTime\"","(","Encounter"," "]},{"r":"71","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"86","s":[{"r":"86","s":[{"value":["start of "]},{"r":"85","s":[{"r":"84","s":[{"value":["First","("]},{"r":"83","s":[{"s":[{"r":"74","s":[{"r":"73","s":[{"value":["("]},{"r":"73","s":[{"value":["\"HospitalizationLocations\"","("]},{"r":"72","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n  \t\t"]},{"r":"78","s":[{"value":["where "]},{"r":"78","s":[{"r":"76","s":[{"r":"75","s":[{"value":["HospitalLocation"]}]},{"value":["."]},{"r":"76","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"77","s":[{"value":["\"Emergency Department Visit\""]}]}]}]},{"value":["\n  \t\t"]},{"r":"82","s":[{"value":["sort by "]},{"r":"81","s":[{"r":"80","s":[{"value":["start of "]},{"r":"79","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"85","s":[{"value":["locationPeriod"]}]}]}]}]}]}}],"expression":{"localId":"86","locator":"49:3-52:18","type":"Start","operand":{"localId":"85","locator":"49:12-52:18","path":"locationPeriod","type":"Property","source":{"localId":"84","locator":"49:12-52:3","type":"First","source":{"localId":"83","locator":"49:18-51:35","type":"Query","source":[{"localId":"74","locator":"49:18-49:72","alias":"HospitalLocation","expression":{"localId":"73","locator":"49:18-49:56","name":"HospitalizationLocations","type":"FunctionRef","operand":[{"localId":"72","locator":"49:46-49:54","name":"Encounter","type":"OperandRef"}]}}],"relationship":[],"where":{"localId":"78","locator":"50:5-50:63","type":"InValueSet","code":{"localId":"76","locator":"50:11-50:31","path":"code","scope":"HospitalLocation","type":"Property"},"valueset":{"localId":"77","locator":"50:36-50:63","name":"Emergency Department Visit","preserve":true}},"sort":{"localId":"82","locator":"51:5-51:35","by":[{"localId":"81","locator":"51:13-51:35","direction":"asc","type":"ByExpression","expression":{"localId":"80","locator":"51:13-51:35","type":"Start","operand":{"localId":"79","locator":"51:22-51:35","name":"locationPeriod","type":"IdentifierRef"}}}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"71","locator":"48:60-48:81","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"122","locator":"65:1-73:31","name":"Hospitalization","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"122","s":[{"value":["/*Hospitalization returns the total interval for admission to discharge for the given encounter, or for the admission of any immediately prior emergency department visit to the discharge of the given encounter.*/\n","define function ","\"Hospitalization\"","(","Encounter"," "]},{"r":"90","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"121","s":[{"r":"121","s":[{"s":[{"r":"92","s":[{"r":"91","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"108","s":[{"value":["EDVisit",": "]},{"r":"107","s":[{"value":["Last","("]},{"r":"106","s":[{"s":[{"r":"94","s":[{"r":"93","s":[{"r":"93","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"101","s":[{"value":["where "]},{"r":"101","s":[{"r":"96","s":[{"r":"95","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"96","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"101","s":[{"value":["ends "]},{"r":"100","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"99","s":[{"value":["start of "]},{"r":"98","s":[{"r":"97","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"98","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"105","s":[{"value":["sort by \n  \t\t\t"]},{"r":"104","s":[{"r":"103","s":[{"value":["end of "]},{"r":"102","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"120","s":[{"value":["return "]},{"r":"119","s":[{"value":["Interval["]},{"r":"115","s":[{"value":["Coalesce","("]},{"r":"111","s":[{"value":["start of "]},{"r":"110","s":[{"r":"109","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"110","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"114","s":[{"value":["start of "]},{"r":"113","s":[{"r":"112","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"113","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]},{"value":[", \n  \t"]},{"r":"118","s":[{"value":["end of "]},{"r":"117","s":[{"r":"116","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"117","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["]"]}]}]}]}]}]}}],"expression":{"localId":"121","locator":"66:3-73:31","type":"Query","source":[{"localId":"92","locator":"66:3-66:17","alias":"Visit","expression":{"localId":"91","locator":"66:3-66:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"108","locator":"67:8-71:4","identifier":"EDVisit","expression":{"localId":"107","locator":"67:17-71:4","type":"Last","source":{"localId":"106","locator":"67:22-70:26","type":"Query","source":[{"localId":"94","locator":"67:22-67:82","alias":"LastED","expression":{"localId":"93","locator":"67:22-67:75","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"67:47-67:74","name":"Emergency Department Visit","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"101","locator":"68:6-68:95","type":"And","operand":[{"locator":"68:39-68:52","type":"In","operand":[{"locator":"68:34-68:37","type":"End","operand":{"localId":"96","locator":"68:12-68:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"68:39-68:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"68:67-68:95","type":"Subtract","operand":[{"localId":"99","locator":"68:67-68:95","type":"Start","operand":{"localId":"98","locator":"68:76-68:95","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"100","locator":"68:39-68:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"99","locator":"68:67-68:95","type":"Start","operand":{"localId":"98","locator":"68:76-68:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"68:39-68:52","type":"Not","operand":{"locator":"68:39-68:52","type":"IsNull","operand":{"localId":"99","locator":"68:67-68:95","type":"Start","operand":{"localId":"98","locator":"68:76-68:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"105","locator":"69:6-70:26","by":[{"localId":"104","locator":"70:6-70:26","direction":"asc","type":"ByExpression","expression":{"localId":"103","locator":"70:6-70:26","type":"End","operand":{"localId":"102","locator":"70:13-70:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"120","locator":"72:4-73:31","expression":{"localId":"119","locator":"72:11-73:31","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"115","locator":"72:20-72:91","type":"Coalesce","operand":[{"localId":"111","locator":"72:29-72:59","type":"Start","operand":{"localId":"110","locator":"72:38-72:59","path":"relevantPeriod","type":"Property","source":{"localId":"109","locator":"72:38-72:44","name":"EDVisit","type":"QueryLetRef"}}},{"localId":"114","locator":"72:62-72:90","type":"Start","operand":{"localId":"113","locator":"72:71-72:90","path":"relevantPeriod","scope":"Visit","type":"Property"}}]},"high":{"localId":"118","locator":"73:4-73:30","type":"End","operand":{"localId":"117","locator":"73:11-73:30","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"90","locator":"65:45-65:66","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"125","locator":"55:1-56:39","name":"HospitalAdmissionTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"125","s":[{"value":["/*Returns admission time for an encounter or for immediately prior emergency department visit.*/\n","define function ","\"HospitalAdmissionTime\"","(","Encounter"," "]},{"r":"88","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"124","s":[{"r":"124","s":[{"value":["start of "]},{"r":"123","s":[{"value":["\"Hospitalization\"","("]},{"r":"89","s":[{"value":["Encounter"]}]},{"value":[")"]}]}]}]}]}}],"expression":{"localId":"124","locator":"56:3-56:39","type":"Start","operand":{"localId":"123","locator":"56:12-56:39","name":"Hospitalization","type":"FunctionRef","operand":[{"localId":"89","locator":"56:30-56:38","name":"Encounter","type":"OperandRef"}]}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"88","locator":"55:51-55:72","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"138","locator":"59:1-62:18","name":"HospitalArrivalTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"138","s":[{"value":["/*Returns earliest arrival time for an encounter including any prior ED visit.*/\n","define function ","\"HospitalArrivalTime\"","(","Encounter"," "]},{"r":"126","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"137","s":[{"r":"137","s":[{"value":["start of "]},{"r":"136","s":[{"r":"135","s":[{"value":["First","("]},{"r":"134","s":[{"s":[{"r":"129","s":[{"r":"128","s":[{"value":["("]},{"r":"128","s":[{"value":["\"HospitalizationLocations\"","("]},{"r":"127","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n  \t\t"]},{"r":"133","s":[{"value":["sort by "]},{"r":"132","s":[{"r":"131","s":[{"value":["start of "]},{"r":"130","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"136","s":[{"value":["locationPeriod"]}]}]}]}]}]}}],"expression":{"localId":"137","locator":"60:3-62:18","type":"Start","operand":{"localId":"136","locator":"60:12-62:18","path":"locationPeriod","type":"Property","source":{"localId":"135","locator":"60:12-62:3","type":"First","source":{"localId":"134","locator":"60:18-61:35","type":"Query","source":[{"localId":"129","locator":"60:18-60:72","alias":"HospitalLocation","expression":{"localId":"128","locator":"60:18-60:56","name":"HospitalizationLocations","type":"FunctionRef","operand":[{"localId":"127","locator":"60:46-60:54","name":"Encounter","type":"OperandRef"}]}}],"relationship":[],"sort":{"localId":"133","locator":"61:5-61:35","by":[{"localId":"132","locator":"61:13-61:35","direction":"asc","type":"ByExpression","expression":{"localId":"131","locator":"61:13-61:35","type":"Start","operand":{"localId":"130","locator":"61:22-61:35","name":"locationPeriod","type":"IdentifierRef"}}}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"126","locator":"59:49-59:70","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"145","locator":"76:1-77:44","name":"HospitalizationLengthofStay","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"145","s":[{"value":["/*Returns the length of stay in days (i.e. the number of days between admission and discharge) for the given encounter, or from the admission of any immediately prior emergency department visit to the discharge of the encounter*/\n","define function ","\"HospitalizationLengthofStay\"","(","Encounter"," "]},{"r":"141","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"144","s":[{"r":"144","s":[{"value":["LengthInDays","("]},{"r":"143","s":[{"value":["\"Hospitalization\"","("]},{"r":"142","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"144","locator":"77:3-77:44","name":"LengthInDays","type":"FunctionRef","operand":[{"localId":"143","locator":"77:16-77:43","name":"Hospitalization","type":"FunctionRef","operand":[{"localId":"142","locator":"77:34-77:42","name":"Encounter","type":"OperandRef"}]}]},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"141","locator":"76:57-76:78","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"158","locator":"80:1-83:18","name":"HospitalDepartureTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"158","s":[{"value":["/*Returns the latest departure time for encounter including any prior ED visit.*/\n","define function ","\"HospitalDepartureTime\"","(","Encounter"," "]},{"r":"146","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"157","s":[{"r":"157","s":[{"value":["end of "]},{"r":"156","s":[{"r":"155","s":[{"value":["Last","("]},{"r":"154","s":[{"s":[{"r":"149","s":[{"r":"148","s":[{"value":["("]},{"r":"148","s":[{"value":["\"HospitalizationLocations\"","("]},{"r":"147","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n  \t\t"]},{"r":"153","s":[{"value":["sort by "]},{"r":"152","s":[{"r":"151","s":[{"value":["start of "]},{"r":"150","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"156","s":[{"value":["locationPeriod"]}]}]}]}]}]}}],"expression":{"localId":"157","locator":"81:3-83:18","type":"End","operand":{"localId":"156","locator":"81:10-83:18","path":"locationPeriod","type":"Property","source":{"localId":"155","locator":"81:10-83:3","type":"Last","source":{"localId":"154","locator":"81:15-82:35","type":"Query","source":[{"localId":"149","locator":"81:15-81:69","alias":"HospitalLocation","expression":{"localId":"148","locator":"81:15-81:53","name":"HospitalizationLocations","type":"FunctionRef","operand":[{"localId":"147","locator":"81:43-81:51","name":"Encounter","type":"OperandRef"}]}}],"relationship":[],"sort":{"localId":"153","locator":"82:5-82:35","by":[{"localId":"152","locator":"82:13-82:35","direction":"asc","type":"ByExpression","expression":{"localId":"151","locator":"82:13-82:35","type":"Start","operand":{"localId":"150","locator":"82:22-82:35","name":"locationPeriod","type":"IdentifierRef"}}}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"146","locator":"80:51-80:72","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"163","locator":"86:1-87:33","name":"HospitalDischargeTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"163","s":[{"value":["/*Hospital Discharge Time returns the discharge time for an encounter*/\n","define function ","\"HospitalDischargeTime\"","(","Encounter"," "]},{"r":"159","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"162","s":[{"r":"162","s":[{"value":["end of "]},{"r":"161","s":[{"r":"160","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"161","s":[{"value":["relevantPeriod"]}]}]}]}]}]}}],"expression":{"localId":"162","locator":"87:3-87:33","type":"End","operand":{"localId":"161","locator":"87:10-87:33","path":"relevantPeriod","type":"Property","source":{"localId":"160","locator":"87:10-87:18","name":"Encounter","type":"OperandRef"}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"159","locator":"86:51-86:72","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"236","locator":"90:1-110:31","name":"HospitalizationWithObservationAndOutpatientSurgeryService","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"236","s":[{"value":["/*Hospitalization with Observation and Outpatient Surgery Service returns the total interval from the start of any immediately prior emergency department visit, outpatient surgery visit or observation visit to the discharge of the given encounter.*/\n","define function ","\"HospitalizationWithObservationAndOutpatientSurgeryService\"","(","Encounter"," "]},{"r":"164","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"235","s":[{"r":"235","s":[{"s":[{"r":"166","s":[{"r":"165","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"182","s":[{"value":["ObsVisit",": "]},{"r":"181","s":[{"value":["Last","("]},{"r":"180","s":[{"s":[{"r":"168","s":[{"r":"167","s":[{"r":"167","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Observation Services\""]}]},{"value":["]"]}]}]},{"value":[" ","LastObs"]}]}]},{"value":["\n  \t\t\t"]},{"r":"175","s":[{"value":["where "]},{"r":"175","s":[{"r":"170","s":[{"r":"169","s":[{"value":["LastObs"]}]},{"value":["."]},{"r":"170","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"175","s":[{"value":["ends "]},{"r":"174","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"173","s":[{"value":["start of "]},{"r":"172","s":[{"r":"171","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"172","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"179","s":[{"value":["sort by \n  \t\t\t"]},{"r":"178","s":[{"r":"177","s":[{"value":["end of "]},{"r":"176","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]},{"value":[",\n  \t"]},{"r":"190","s":[{"value":["VisitStart",": "]},{"r":"189","s":[{"value":["Coalesce","("]},{"r":"185","s":[{"value":["start of "]},{"r":"184","s":[{"r":"183","s":[{"value":["ObsVisit"]}]},{"value":["."]},{"r":"184","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"188","s":[{"value":["start of "]},{"r":"187","s":[{"r":"186","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"187","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]}]},{"value":[",\n  \t"]},{"r":"204","s":[{"value":["EDVisit",": "]},{"r":"203","s":[{"value":["Last","("]},{"r":"202","s":[{"s":[{"r":"192","s":[{"r":"191","s":[{"r":"191","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"197","s":[{"value":["where "]},{"r":"197","s":[{"r":"194","s":[{"r":"193","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"194","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"197","s":[{"value":["ends "]},{"r":"196","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"195","s":[{"value":["VisitStart"]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"201","s":[{"value":["sort by \n  \t\t\t"]},{"r":"200","s":[{"r":"199","s":[{"value":["end of "]},{"r":"198","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]},{"value":[",\n  \t"]},{"r":"210","s":[{"value":["VisitStartWithED",": "]},{"r":"209","s":[{"value":["Coalesce","("]},{"r":"207","s":[{"value":["start of "]},{"r":"206","s":[{"r":"205","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"206","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"208","s":[{"value":["VisitStart"]}]},{"value":[")"]}]}]},{"value":[",\n  \t"]},{"r":"224","s":[{"value":["OutpatientSurgeryVisit",": "]},{"r":"223","s":[{"value":["Last","("]},{"r":"222","s":[{"s":[{"r":"212","s":[{"r":"211","s":[{"r":"211","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Outpatient Surgery Service\""]}]},{"value":["]"]}]}]},{"value":[" ","LastSurgeryOP"]}]}]},{"value":["\n  \t\t\t"]},{"r":"217","s":[{"value":["where "]},{"r":"217","s":[{"r":"214","s":[{"r":"213","s":[{"value":["LastSurgeryOP"]}]},{"value":["."]},{"r":"214","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"217","s":[{"value":["ends "]},{"r":"216","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"215","s":[{"value":["VisitStartWithED"]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"221","s":[{"value":["sort by \n  \t\t\t"]},{"r":"220","s":[{"r":"219","s":[{"value":["end of "]},{"r":"218","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"234","s":[{"value":["return "]},{"r":"233","s":[{"value":["Interval["]},{"r":"229","s":[{"value":["Coalesce","("]},{"r":"227","s":[{"value":["start of "]},{"r":"226","s":[{"r":"225","s":[{"value":["OutpatientSurgeryVisit"]}]},{"value":["."]},{"r":"226","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"228","s":[{"value":["VisitStartWithED"]}]},{"value":[")"]}]},{"value":[", \n  \t"]},{"r":"232","s":[{"value":["end of "]},{"r":"231","s":[{"r":"230","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"231","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["]"]}]}]}]}]}]}}],"expression":{"localId":"235","locator":"91:3-110:31","type":"Query","source":[{"localId":"166","locator":"91:3-91:17","alias":"Visit","expression":{"localId":"165","locator":"91:3-91:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"182","locator":"92:8-96:4","identifier":"ObsVisit","expression":{"localId":"181","locator":"92:18-96:4","type":"Last","source":{"localId":"180","locator":"92:23-95:26","type":"Query","source":[{"localId":"168","locator":"92:23-92:78","alias":"LastObs","expression":{"localId":"167","locator":"92:23-92:70","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"92:48-92:69","name":"Observation Services","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"175","locator":"93:6-93:96","type":"And","operand":[{"locator":"93:40-93:53","type":"In","operand":[{"locator":"93:35-93:38","type":"End","operand":{"localId":"170","locator":"93:12-93:33","path":"relevantPeriod","scope":"LastObs","type":"Property"}},{"locator":"93:40-93:53","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"93:68-93:96","type":"Subtract","operand":[{"localId":"173","locator":"93:68-93:96","type":"Start","operand":{"localId":"172","locator":"93:77-93:96","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"174","locator":"93:40-93:45","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"173","locator":"93:68-93:96","type":"Start","operand":{"localId":"172","locator":"93:77-93:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"93:40-93:53","type":"Not","operand":{"locator":"93:40-93:53","type":"IsNull","operand":{"localId":"173","locator":"93:68-93:96","type":"Start","operand":{"localId":"172","locator":"93:77-93:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"179","locator":"94:6-95:26","by":[{"localId":"178","locator":"95:6-95:26","direction":"asc","type":"ByExpression","expression":{"localId":"177","locator":"95:6-95:26","type":"End","operand":{"localId":"176","locator":"95:13-95:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}},{"localId":"190","locator":"97:4-97:88","identifier":"VisitStart","expression":{"localId":"189","locator":"97:16-97:88","type":"Coalesce","operand":[{"localId":"185","locator":"97:25-97:56","type":"Start","operand":{"localId":"184","locator":"97:34-97:56","path":"relevantPeriod","type":"Property","source":{"localId":"183","locator":"97:34-97:41","name":"ObsVisit","type":"QueryLetRef"}}},{"localId":"188","locator":"97:59-97:87","type":"Start","operand":{"localId":"187","locator":"97:68-97:87","path":"relevantPeriod","scope":"Visit","type":"Property"}}]}},{"localId":"204","locator":"98:4-102:4","identifier":"EDVisit","expression":{"localId":"203","locator":"98:13-102:4","type":"Last","source":{"localId":"202","locator":"98:18-101:26","type":"Query","source":[{"localId":"192","locator":"98:18-98:78","alias":"LastED","expression":{"localId":"191","locator":"98:18-98:71","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"98:43-98:70","name":"Emergency Department Visit","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"197","locator":"99:6-99:76","type":"And","operand":[{"locator":"99:39-99:52","type":"In","operand":[{"locator":"99:34-99:37","type":"End","operand":{"localId":"194","locator":"99:12-99:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"99:39-99:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"99:67-99:76","type":"Subtract","operand":[{"localId":"195","locator":"99:67-99:76","name":"VisitStart","type":"QueryLetRef"},{"localId":"196","locator":"99:39-99:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"195","locator":"99:67-99:76","name":"VisitStart","type":"QueryLetRef"}}]},{"locator":"99:39-99:52","type":"Not","operand":{"locator":"99:39-99:52","type":"IsNull","operand":{"localId":"195","locator":"99:67-99:76","name":"VisitStart","type":"QueryLetRef"}}}]},"sort":{"localId":"201","locator":"100:6-101:26","by":[{"localId":"200","locator":"101:6-101:26","direction":"asc","type":"ByExpression","expression":{"localId":"199","locator":"101:6-101:26","type":"End","operand":{"localId":"198","locator":"101:13-101:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}},{"localId":"210","locator":"103:4-103:74","identifier":"VisitStartWithED","expression":{"localId":"209","locator":"103:22-103:74","type":"Coalesce","operand":[{"localId":"207","locator":"103:31-103:61","type":"Start","operand":{"localId":"206","locator":"103:40-103:61","path":"relevantPeriod","type":"Property","source":{"localId":"205","locator":"103:40-103:46","name":"EDVisit","type":"QueryLetRef"}}},{"localId":"208","locator":"103:64-103:73","name":"VisitStart","type":"QueryLetRef"}]}},{"localId":"224","locator":"104:4-108:4","identifier":"OutpatientSurgeryVisit","expression":{"localId":"223","locator":"104:28-108:4","type":"Last","source":{"localId":"222","locator":"104:33-107:26","type":"Query","source":[{"localId":"212","locator":"104:33-104:100","alias":"LastSurgeryOP","expression":{"localId":"211","locator":"104:33-104:86","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"104:58-104:85","name":"Outpatient Surgery Service","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"217","locator":"105:6-105:89","type":"And","operand":[{"locator":"105:46-105:59","type":"In","operand":[{"locator":"105:41-105:44","type":"End","operand":{"localId":"214","locator":"105:12-105:39","path":"relevantPeriod","scope":"LastSurgeryOP","type":"Property"}},{"locator":"105:46-105:59","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"105:74-105:89","type":"Subtract","operand":[{"localId":"215","locator":"105:74-105:89","name":"VisitStartWithED","type":"QueryLetRef"},{"localId":"216","locator":"105:46-105:51","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"215","locator":"105:74-105:89","name":"VisitStartWithED","type":"QueryLetRef"}}]},{"locator":"105:46-105:59","type":"Not","operand":{"locator":"105:46-105:59","type":"IsNull","operand":{"localId":"215","locator":"105:74-105:89","name":"VisitStartWithED","type":"QueryLetRef"}}}]},"sort":{"localId":"221","locator":"106:6-107:26","by":[{"localId":"220","locator":"107:6-107:26","direction":"asc","type":"ByExpression","expression":{"localId":"219","locator":"107:6-107:26","type":"End","operand":{"localId":"218","locator":"107:13-107:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"234","locator":"109:4-110:31","expression":{"localId":"233","locator":"109:11-110:31","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"229","locator":"109:20-109:93","type":"Coalesce","operand":[{"localId":"227","locator":"109:29-109:74","type":"Start","operand":{"localId":"226","locator":"109:38-109:74","path":"relevantPeriod","type":"Property","source":{"localId":"225","locator":"109:38-109:59","name":"OutpatientSurgeryVisit","type":"QueryLetRef"}}},{"localId":"228","locator":"109:77-109:92","name":"VisitStartWithED","type":"QueryLetRef"}]},"high":{"localId":"232","locator":"110:4-110:30","type":"End","operand":{"localId":"231","locator":"110:11-110:30","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"164","locator":"90:87-90:108","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"289","locator":"113:1-127:31","name":"HospitalizationWithObservation","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"289","s":[{"value":["/*Hospitalization with Observation returns the total interval from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\n","define function ","\"HospitalizationWithObservation\"","(","Encounter"," "]},{"r":"237","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"288","s":[{"r":"288","s":[{"s":[{"r":"239","s":[{"r":"238","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"255","s":[{"value":["ObsVisit",": "]},{"r":"254","s":[{"value":["Last","("]},{"r":"253","s":[{"s":[{"r":"241","s":[{"r":"240","s":[{"r":"240","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Observation Services\""]}]},{"value":["]"]}]}]},{"value":[" ","LastObs"]}]}]},{"value":["\n  \t\t\t"]},{"r":"248","s":[{"value":["where "]},{"r":"248","s":[{"r":"243","s":[{"r":"242","s":[{"value":["LastObs"]}]},{"value":["."]},{"r":"243","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"248","s":[{"value":["ends "]},{"r":"247","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"246","s":[{"value":["start of "]},{"r":"245","s":[{"r":"244","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"245","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"252","s":[{"value":["sort by \n  \t\t\t"]},{"r":"251","s":[{"r":"250","s":[{"value":["end of "]},{"r":"249","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]},{"value":[",\n  \t"]},{"r":"263","s":[{"value":["VisitStart",": "]},{"r":"262","s":[{"value":["Coalesce","("]},{"r":"258","s":[{"value":["start of "]},{"r":"257","s":[{"r":"256","s":[{"value":["ObsVisit"]}]},{"value":["."]},{"r":"257","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"261","s":[{"value":["start of "]},{"r":"260","s":[{"r":"259","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"260","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]}]},{"value":[",\n  \t"]},{"r":"277","s":[{"value":["EDVisit",": "]},{"r":"276","s":[{"value":["Last","("]},{"r":"275","s":[{"s":[{"r":"265","s":[{"r":"264","s":[{"r":"264","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"270","s":[{"value":["where "]},{"r":"270","s":[{"r":"267","s":[{"r":"266","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"267","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"270","s":[{"value":["ends "]},{"r":"269","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"268","s":[{"value":["VisitStart"]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"274","s":[{"value":["sort by \n  \t\t\t"]},{"r":"273","s":[{"r":"272","s":[{"value":["end of "]},{"r":"271","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"287","s":[{"value":["return "]},{"r":"286","s":[{"value":["Interval["]},{"r":"282","s":[{"value":["Coalesce","("]},{"r":"280","s":[{"value":["start of "]},{"r":"279","s":[{"r":"278","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"279","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"281","s":[{"value":["VisitStart"]}]},{"value":[")"]}]},{"value":[", \n  \t"]},{"r":"285","s":[{"value":["end of "]},{"r":"284","s":[{"r":"283","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"284","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["]"]}]}]}]}]}]}}],"expression":{"localId":"288","locator":"114:3-127:31","type":"Query","source":[{"localId":"239","locator":"114:3-114:17","alias":"Visit","expression":{"localId":"238","locator":"114:3-114:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"255","locator":"115:8-119:4","identifier":"ObsVisit","expression":{"localId":"254","locator":"115:18-119:4","type":"Last","source":{"localId":"253","locator":"115:23-118:26","type":"Query","source":[{"localId":"241","locator":"115:23-115:78","alias":"LastObs","expression":{"localId":"240","locator":"115:23-115:70","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"115:48-115:69","name":"Observation Services","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"248","locator":"116:6-116:96","type":"And","operand":[{"locator":"116:40-116:53","type":"In","operand":[{"locator":"116:35-116:38","type":"End","operand":{"localId":"243","locator":"116:12-116:33","path":"relevantPeriod","scope":"LastObs","type":"Property"}},{"locator":"116:40-116:53","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"116:68-116:96","type":"Subtract","operand":[{"localId":"246","locator":"116:68-116:96","type":"Start","operand":{"localId":"245","locator":"116:77-116:96","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"247","locator":"116:40-116:45","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"246","locator":"116:68-116:96","type":"Start","operand":{"localId":"245","locator":"116:77-116:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"116:40-116:53","type":"Not","operand":{"locator":"116:40-116:53","type":"IsNull","operand":{"localId":"246","locator":"116:68-116:96","type":"Start","operand":{"localId":"245","locator":"116:77-116:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"252","locator":"117:6-118:26","by":[{"localId":"251","locator":"118:6-118:26","direction":"asc","type":"ByExpression","expression":{"localId":"250","locator":"118:6-118:26","type":"End","operand":{"localId":"249","locator":"118:13-118:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}},{"localId":"263","locator":"120:4-120:88","identifier":"VisitStart","expression":{"localId":"262","locator":"120:16-120:88","type":"Coalesce","operand":[{"localId":"258","locator":"120:25-120:56","type":"Start","operand":{"localId":"257","locator":"120:34-120:56","path":"relevantPeriod","type":"Property","source":{"localId":"256","locator":"120:34-120:41","name":"ObsVisit","type":"QueryLetRef"}}},{"localId":"261","locator":"120:59-120:87","type":"Start","operand":{"localId":"260","locator":"120:68-120:87","path":"relevantPeriod","scope":"Visit","type":"Property"}}]}},{"localId":"277","locator":"121:4-125:4","identifier":"EDVisit","expression":{"localId":"276","locator":"121:13-125:4","type":"Last","source":{"localId":"275","locator":"121:18-124:26","type":"Query","source":[{"localId":"265","locator":"121:18-121:78","alias":"LastED","expression":{"localId":"264","locator":"121:18-121:71","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"121:43-121:70","name":"Emergency Department Visit","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"270","locator":"122:6-122:76","type":"And","operand":[{"locator":"122:39-122:52","type":"In","operand":[{"locator":"122:34-122:37","type":"End","operand":{"localId":"267","locator":"122:12-122:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"122:39-122:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"122:67-122:76","type":"Subtract","operand":[{"localId":"268","locator":"122:67-122:76","name":"VisitStart","type":"QueryLetRef"},{"localId":"269","locator":"122:39-122:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"268","locator":"122:67-122:76","name":"VisitStart","type":"QueryLetRef"}}]},{"locator":"122:39-122:52","type":"Not","operand":{"locator":"122:39-122:52","type":"IsNull","operand":{"localId":"268","locator":"122:67-122:76","name":"VisitStart","type":"QueryLetRef"}}}]},"sort":{"localId":"274","locator":"123:6-124:26","by":[{"localId":"273","locator":"124:6-124:26","direction":"asc","type":"ByExpression","expression":{"localId":"272","locator":"124:6-124:26","type":"End","operand":{"localId":"271","locator":"124:13-124:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"287","locator":"126:4-127:31","expression":{"localId":"286","locator":"126:11-127:31","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"282","locator":"126:20-126:72","type":"Coalesce","operand":[{"localId":"280","locator":"126:29-126:59","type":"Start","operand":{"localId":"279","locator":"126:38-126:59","path":"relevantPeriod","type":"Property","source":{"localId":"278","locator":"126:38-126:44","name":"EDVisit","type":"QueryLetRef"}}},{"localId":"281","locator":"126:62-126:71","name":"VisitStart","type":"QueryLetRef"}]},"high":{"localId":"285","locator":"127:4-127:30","type":"End","operand":{"localId":"284","locator":"127:11-127:30","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"237","locator":"113:60-113:81","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"294","locator":"130:1-131:61","name":"HospitalizationWithObservationLengthofStay","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"294","s":[{"value":["/*Hospitalization with Observation Length of Stay returns the length in days from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\n","define function ","\"HospitalizationWithObservationLengthofStay\"","(","Encounter"," "]},{"r":"290","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"293","s":[{"r":"293","s":[{"value":["\"LengthInDays\"","("]},{"r":"292","s":[{"value":["\"HospitalizationWithObservation\"","("]},{"r":"291","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"293","locator":"131:3-131:61","name":"LengthInDays","type":"FunctionRef","operand":[{"localId":"292","locator":"131:18-131:60","name":"HospitalizationWithObservation","type":"FunctionRef","operand":[{"localId":"291","locator":"131:51-131:59","name":"Encounter","type":"OperandRef"}]}]},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"290","locator":"130:72-130:93","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"315","locator":"134:1-139:3","name":"FirstInpatientIntensiveCareUnit","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"315","s":[{"value":["/*First Inpatient Intensive Care Unit returns the first intensive care unit for the given encounter, without considering any immediately prior emergency department visit.*/\n","define function ","\"FirstInpatientIntensiveCareUnit\"","(","Encounter"," "]},{"r":"295","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"314","s":[{"r":"314","s":[{"value":["First","("]},{"r":"313","s":[{"s":[{"r":"298","s":[{"r":"297","s":[{"value":["("]},{"r":"297","s":[{"r":"296","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"297","s":[{"value":["facilityLocations"]}]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n      "]},{"r":"308","s":[{"value":["where "]},{"r":"308","s":[{"r":"302","s":[{"r":"300","s":[{"r":"299","s":[{"value":["HospitalLocation"]}]},{"value":["."]},{"r":"300","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"301","s":[{"value":["\"Intensive Care Unit\""]}]}]},{"value":["\n        and "]},{"r":"307","s":[{"r":"304","s":[{"r":"303","s":[{"value":["HospitalLocation"]}]},{"value":["."]},{"r":"304","s":[{"value":["locationPeriod"]}]}]},{"r":"307","value":[" ","during"," "]},{"r":"306","s":[{"r":"305","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"306","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n      "]},{"r":"312","s":[{"value":["sort by "]},{"r":"311","s":[{"r":"310","s":[{"value":["start of "]},{"r":"309","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]}]}]}}],"expression":{"localId":"314","locator":"135:3-139:3","type":"First","source":{"localId":"313","locator":"135:9-138:37","type":"Query","source":[{"localId":"298","locator":"135:9-135:53","alias":"HospitalLocation","expression":{"localId":"297","locator":"135:9-135:37","path":"facilityLocations","type":"Property","source":{"localId":"296","locator":"135:10-135:18","name":"Encounter","type":"OperandRef"}}}],"relationship":[],"where":{"localId":"308","locator":"136:7-137:75","type":"And","operand":[{"localId":"302","locator":"136:13-136:58","type":"InValueSet","code":{"localId":"300","locator":"136:13-136:33","path":"code","scope":"HospitalLocation","type":"Property"},"valueset":{"localId":"301","locator":"136:38-136:58","name":"Intensive Care Unit","preserve":true}},{"localId":"307","locator":"137:13-137:75","type":"IncludedIn","operand":[{"localId":"304","locator":"137:13-137:43","path":"locationPeriod","scope":"HospitalLocation","type":"Property"},{"localId":"306","locator":"137:52-137:75","path":"relevantPeriod","type":"Property","source":{"localId":"305","locator":"137:52-137:60","name":"Encounter","type":"OperandRef"}}]}]},"sort":{"localId":"312","locator":"138:7-138:37","by":[{"localId":"311","locator":"138:15-138:37","direction":"asc","type":"ByExpression","expression":{"localId":"310","locator":"138:15-138:37","type":"Start","operand":{"localId":"309","locator":"138:24-138:37","name":"locationPeriod","type":"IdentifierRef"}}}]}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"295","locator":"134:61-134:82","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"333","locator":"142:1-145:35","name":"NormalizeInterval","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"333","s":[{"value":["/*Given a datetime and a period, returns the period (if a period is provided) or the interval beginning and ending on the datetime (if a datetime is provided)*/\n","define function ","\"NormalizeInterval\"","(","pointInTime"," "]},{"r":"316","s":[{"value":["DateTime"]}]},{"value":[", ","period"," "]},{"r":"318","s":[{"value":["Interval\u003c"]},{"r":"317","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"332","s":[{"r":"332","s":[{"value":["if "]},{"r":"320","s":[{"r":"319","s":[{"value":["pointInTime"]}]},{"value":[" is not null"]}]},{"value":[" then "]},{"r":"323","s":[{"value":["Interval["]},{"r":"321","s":[{"value":["pointInTime"]}]},{"value":[", "]},{"r":"322","s":[{"value":["pointInTime"]}]},{"value":["]"]}]},{"value":["\n    else "]},{"r":"331","s":[{"value":["if "]},{"r":"325","s":[{"r":"324","s":[{"value":["period"]}]},{"value":[" is not null"]}]},{"value":[" then "]},{"r":"326","s":[{"value":["period"]}]},{"value":[" \n    else "]},{"r":"330","s":[{"r":"327","value":["null"," as "]},{"r":"329","s":[{"value":["Interval\u003c"]},{"r":"328","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}]}]}]}]}}],"expression":{"localId":"332","locator":"143:3-145:35","type":"If","condition":{"localId":"320","locator":"143:6-143:28","type":"Not","operand":{"locator":"143:6-143:28","type":"IsNull","operand":{"localId":"319","locator":"143:6-143:16","name":"pointInTime","type":"OperandRef"}}},"then":{"localId":"323","locator":"143:35-143:68","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"321","locator":"143:44-143:54","name":"pointInTime","type":"OperandRef"},"high":{"localId":"322","locator":"143:57-143:67","name":"pointInTime","type":"OperandRef"}},"else":{"localId":"331","locator":"144:10-145:35","type":"If","condition":{"localId":"325","locator":"144:13-144:30","type":"Not","operand":{"locator":"144:13-144:30","type":"IsNull","operand":{"localId":"324","locator":"144:13-144:18","name":"period","type":"OperandRef"}}},"then":{"localId":"326","locator":"144:37-144:42","name":"period","type":"OperandRef"},"else":{"localId":"330","locator":"145:10-145:35","strict":false,"type":"As","operand":{"localId":"327","locator":"145:10-145:13","type":"Null"},"asTypeSpecifier":{"localId":"329","locator":"145:18-145:35","type":"IntervalTypeSpecifier","pointType":{"localId":"328","locator":"145:27-145:34","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}},"operand":[{"name":"pointInTime","operandTypeSpecifier":{"localId":"316","locator":"142:49-142:56","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"name":"period","operandTypeSpecifier":{"localId":"318","locator":"142:66-142:83","type":"IntervalTypeSpecifier","pointType":{"localId":"317","locator":"142:75-142:82","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"346","locator":"148:1-151:3","name":"HasStart","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"346","s":[{"value":["/*Given an interval, return true if the interval has a starting boundary specified (i.e. the start of the interval is not null and not the minimum DateTime value)*/\n","define function ","\"HasStart\"","(","period"," "]},{"r":"335","s":[{"value":["Interval\u003c"]},{"r":"334","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"345","s":[{"r":"345","s":[{"value":["not "]},{"r":"344","s":[{"value":["( "]},{"r":"344","s":[{"r":"338","s":[{"r":"337","s":[{"value":["start of "]},{"r":"336","s":[{"value":["period"]}]}]},{"value":[" is null"]}]},{"value":["\n      or "]},{"r":"343","s":[{"r":"340","s":[{"value":["start of "]},{"r":"339","s":[{"value":["period"]}]}]},{"value":[" ","="," "]},{"r":"342","s":[{"value":["minimum"," "]},{"r":"341","s":[{"value":["DateTime"]}]}]}]}]},{"value":["\n  )"]}]}]}]}]}}],"expression":{"localId":"345","locator":"149:3-151:3","type":"Not","operand":{"localId":"344","locator":"149:7-151:3","type":"Or","operand":[{"localId":"338","locator":"149:9-149:31","type":"IsNull","operand":{"localId":"337","locator":"149:9-149:23","type":"Start","operand":{"localId":"336","locator":"149:18-149:23","name":"period","type":"OperandRef"}}},{"localId":"343","locator":"150:10-150:43","type":"Equal","operand":[{"localId":"340","locator":"150:10-150:24","type":"Start","operand":{"localId":"339","locator":"150:19-150:24","name":"period","type":"OperandRef"}},{"localId":"342","locator":"150:28-150:43","valueType":"{urn:hl7-org:elm-types:r1}DateTime","type":"MinValue"}]}]}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"335","locator":"148:35-148:52","type":"IntervalTypeSpecifier","pointType":{"localId":"334","locator":"148:44-148:51","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"359","locator":"154:1-159:3","name":"HasEnd","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"359","s":[{"value":["/*Given an interval, return true if the interval has an ending boundary specified (i.e. the end of the interval is not null and not the maximum DateTime value)*/\n","define function ","\"HasEnd\"","(","period"," "]},{"r":"348","s":[{"value":["Interval\u003c"]},{"r":"347","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"358","s":[{"r":"358","s":[{"value":["not "]},{"r":"357","s":[{"value":["( \n    "]},{"r":"357","s":[{"r":"351","s":[{"r":"350","s":[{"value":["end of "]},{"r":"349","s":[{"value":["period"]}]}]},{"value":[" is null"]}]},{"value":["\n      or \n      "]},{"r":"356","s":[{"r":"353","s":[{"value":["end of "]},{"r":"352","s":[{"value":["period"]}]}]},{"value":[" ","="," "]},{"r":"355","s":[{"value":["maximum"," "]},{"r":"354","s":[{"value":["DateTime"]}]}]}]}]},{"value":["\n  )"]}]}]}]}]}}],"expression":{"localId":"358","locator":"155:3-159:3","type":"Not","operand":{"localId":"357","locator":"155:7-159:3","type":"Or","operand":[{"localId":"351","locator":"156:5-156:25","type":"IsNull","operand":{"localId":"350","locator":"156:5-156:17","type":"End","operand":{"localId":"349","locator":"156:12-156:17","name":"period","type":"OperandRef"}}},{"localId":"356","locator":"158:7-158:38","type":"Equal","operand":[{"localId":"353","locator":"158:7-158:19","type":"End","operand":{"localId":"352","locator":"158:14-158:19","name":"period","type":"OperandRef"}},{"localId":"355","locator":"158:23-158:38","valueType":"{urn:hl7-org:elm-types:r1}DateTime","type":"MaxValue"}]}]}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"348","locator":"154:33-154:50","type":"IntervalTypeSpecifier","pointType":{"localId":"347","locator":"154:42-154:49","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"369","locator":"162:1-165:24","name":"Latest","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"369","s":[{"value":["/*Given an interval, return the ending point if the interval has an ending boundary specified, otherwise, return the starting point*/\n","define function ","\"Latest\"","(","period"," "]},{"r":"361","s":[{"value":["Interval\u003c"]},{"r":"360","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"368","s":[{"r":"368","s":[{"value":["if "]},{"r":"363","s":[{"value":["( "]},{"r":"363","s":[{"value":["HasEnd","("]},{"r":"362","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":[" then \n  "]},{"r":"365","s":[{"value":["end of "]},{"r":"364","s":[{"value":["period"]}]}]},{"value":[" \n    else "]},{"r":"367","s":[{"value":["start of "]},{"r":"366","s":[{"value":["period"]}]}]}]}]}]}}],"expression":{"localId":"368","locator":"163:3-165:24","type":"If","condition":{"localId":"363","locator":"163:6-163:22","name":"HasEnd","type":"FunctionRef","operand":[{"localId":"362","locator":"163:15-163:20","name":"period","type":"OperandRef"}]},"then":{"localId":"365","locator":"164:3-164:15","type":"End","operand":{"localId":"364","locator":"164:10-164:15","name":"period","type":"OperandRef"}},"else":{"localId":"367","locator":"165:10-165:24","type":"Start","operand":{"localId":"366","locator":"165:19-165:24","name":"period","type":"OperandRef"}}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"361","locator":"162:33-162:50","type":"IntervalTypeSpecifier","pointType":{"localId":"360","locator":"162:42-162:49","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"379","locator":"168:1-171:15","name":"Earliest","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"379","s":[{"value":["/*Given an interval, return the starting point if the interval has a starting boundary specified, otherwise, return the ending point*/\n","define function ","\"Earliest\"","(","period"," "]},{"r":"371","s":[{"value":["Interval\u003c"]},{"r":"370","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"378","s":[{"r":"378","s":[{"value":["if "]},{"r":"373","s":[{"value":["( "]},{"r":"373","s":[{"value":["HasStart","("]},{"r":"372","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":[" then "]},{"r":"375","s":[{"value":["start of "]},{"r":"374","s":[{"value":["period"]}]}]},{"value":[" \n    else \n  "]},{"r":"377","s":[{"value":["end of "]},{"r":"376","s":[{"value":["period"]}]}]}]}]}]}}],"expression":{"localId":"378","locator":"169:3-171:15","type":"If","condition":{"localId":"373","locator":"169:6-169:24","name":"HasStart","type":"FunctionRef","operand":[{"localId":"372","locator":"169:17-169:22","name":"period","type":"OperandRef"}]},"then":{"localId":"375","locator":"169:31-169:45","type":"Start","operand":{"localId":"374","locator":"169:40-169:45","name":"period","type":"OperandRef"}},"else":{"localId":"377","locator":"171:3-171:15","type":"End","operand":{"localId":"376","locator":"171:10-171:15","name":"period","type":"OperandRef"}}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"371","locator":"168:35-168:52","type":"IntervalTypeSpecifier","pointType":{"localId":"370","locator":"168:44-168:51","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"387","locator":"174:1-175:48","name":"LatestOf","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"387","s":[{"value":["/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the ending point of the period if the period has an ending boundary specified, otherwise returns the starting point of the interval*/\n","define function ","\"LatestOf\"","(","pointInTime"," "]},{"r":"380","s":[{"value":["DateTime"]}]},{"value":[", ","period"," "]},{"r":"382","s":[{"value":["Interval\u003c"]},{"r":"381","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"386","s":[{"r":"386","s":[{"value":["Latest","("]},{"r":"385","s":[{"value":["NormalizeInterval","("]},{"r":"383","s":[{"value":["pointInTime"]}]},{"value":[", "]},{"r":"384","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"386","locator":"175:3-175:48","name":"Latest","type":"FunctionRef","operand":[{"localId":"385","locator":"175:10-175:47","name":"NormalizeInterval","type":"FunctionRef","operand":[{"localId":"383","locator":"175:28-175:38","name":"pointInTime","type":"OperandRef"},{"localId":"384","locator":"175:41-175:46","name":"period","type":"OperandRef"}]}]},"operand":[{"name":"pointInTime","operandTypeSpecifier":{"localId":"380","locator":"174:40-174:47","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"name":"period","operandTypeSpecifier":{"localId":"382","locator":"174:57-174:74","type":"IntervalTypeSpecifier","pointType":{"localId":"381","locator":"174:66-174:73","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"395","locator":"178:1-179:50","name":"EarliestOf","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"395","s":[{"value":["/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the starting point of the period if the period has a starting boundary specified, otherwise returns the ending point of the period*/\n","define function ","\"EarliestOf\"","(","pointInTime"," "]},{"r":"388","s":[{"value":["DateTime"]}]},{"value":[", ","period"," "]},{"r":"390","s":[{"value":["Interval\u003c"]},{"r":"389","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"394","s":[{"r":"394","s":[{"value":["Earliest","("]},{"r":"393","s":[{"value":["NormalizeInterval","("]},{"r":"391","s":[{"value":["pointInTime"]}]},{"value":[", "]},{"r":"392","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"394","locator":"179:3-179:50","name":"Earliest","type":"FunctionRef","operand":[{"localId":"393","locator":"179:12-179:49","name":"NormalizeInterval","type":"FunctionRef","operand":[{"localId":"391","locator":"179:30-179:40","name":"pointInTime","type":"OperandRef"},{"localId":"392","locator":"179:43-179:48","name":"period","type":"OperandRef"}]}]},"operand":[{"name":"pointInTime","operandTypeSpecifier":{"localId":"388","locator":"178:42-178:49","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"name":"period","operandTypeSpecifier":{"localId":"390","locator":"178:59-178:76","type":"IntervalTypeSpecifier","pointType":{"localId":"389","locator":"178:68-178:75","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]}]}}},"elm_annotations":{"statements":[{"children":[{"children":[{"children":[{"text":"define \"ED Encounter\":\n  "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"10"}],"ref_id":"11"}],"define_name":"ED Encounter"},{"children":[{"children":[{"children":[{"text":"define \"Inpatient Encounter\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Encounter Inpatient\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"12"}],"node_type":"Retrieve","ref_id":"12"},{"children":[{"text":" EncounterInpatient"}]}],"ref_id":"13"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"EncounterInpatient"}]}],"ref_id":"14"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"15"}],"node_type":"Property","ref_id":"15"},{"children":[{"text":" ends during day of "}],"ref_id":"17"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"16"}],"ref_id":"17"}],"ref_id":"17"}],"node_type":"Query","ref_id":"18"}],"ref_id":"19"}],"define_name":"Inpatient Encounter"},{"children":[{"children":[]},{"children":[]},{"children":[]},{"children":[{"children":[{"text":"/*@description: Returns an interval of date values extracted from the input interval of date-time values\n@comment: This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability.*/\ndefine function \"ToDateInterval\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"20"},{"children":[{"text":"\u003e"}]}],"ref_id":"21"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"22"}],"node_type":"Start","ref_id":"23"}],"ref_id":"24"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"25"}],"node_type":"End","ref_id":"26"}],"ref_id":"27"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"28"}],"node_type":"Interval","ref_id":"28"}],"ref_id":"29"}],"define_name":"ToDateInterval"},{"children":[{"children":[{"children":[{"text":"/*calculates the difference in calendar days between the start and end of the given interval.*/\ndefine function \"LengthInDays\"(Value "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"30"},{"children":[{"text":"\u003e"}]}],"ref_id":"31"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"difference in days between "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"Value"}]}],"node_type":"OperandRef","ref_id":"32"}],"node_type":"Start","ref_id":"33"},{"children":[{"text":" and "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"Value"}]}],"node_type":"OperandRef","ref_id":"34"}],"node_type":"End","ref_id":"35"}],"node_type":"DifferenceBetween","ref_id":"36"}],"node_type":"DifferenceBetween","ref_id":"36"}],"ref_id":"37"}],"define_name":"LengthInDays"},{"children":[{"children":[{"children":[{"text":"/*returns list of all locations within an encounter, including locations for immediately prior ED visit.*/\ndefine function \"HospitalizationLocations\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"38"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"39"},{"children":[{"text":" Visit"}]}],"ref_id":"40"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"41"}],"node_type":"Retrieve","ref_id":"41"},{"children":[{"text":" LastED"}]}],"ref_id":"42"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"43"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"44"}],"node_type":"Property","ref_id":"44"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"48"},{"children":[{"text":" or less on or before"}]}],"ref_id":"49"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"45"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"46"}],"node_type":"Property","ref_id":"46"}],"node_type":"Start","ref_id":"47"}],"ref_id":"49"}],"ref_id":"49"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"50"}],"node_type":"End","ref_id":"51"}],"ref_id":"52"}],"ref_id":"53"}],"ref_id":"54"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"55"}],"ref_id":"56"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"node_type":"QueryLetRef","ref_id":"57"},{"children":[{"text":" is null"}]}],"ref_id":"58"},{"children":[{"text":" then "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"59"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"ref_id":"60"}],"ref_id":"60"},{"children":[{"text":" \n      else "}]},{"children":[{"children":[{"text":"flatten "}]},{"children":[{"children":[{"text":"{ "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"61"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"ref_id":"62"}],"ref_id":"62"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"63"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"ref_id":"64"}],"ref_id":"64"},{"children":[{"text":" }"}]}],"node_type":"List","ref_id":"65"}],"ref_id":"66"}],"node_type":"If","ref_id":"67"}],"ref_id":"68"}],"node_type":"Query","ref_id":"69"}],"node_type":"Query","ref_id":"69"}],"ref_id":"70"}],"define_name":"HospitalizationLocations"},{"children":[{"children":[{"children":[{"text":"/*Returns the arrival time in the ED for the encounter.*/\ndefine function \"EmergencyDepartmentArrivalTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"71"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"\"HospitalizationLocations\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"72"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"73"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"73"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"74"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"HospitalLocation"}]}],"ref_id":"75"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"76"}],"ref_id":"76"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}],"ref_id":"77"}],"ref_id":"78"}],"ref_id":"78"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"79"}],"node_type":"Start","ref_id":"80"}],"ref_id":"81"}],"ref_id":"82"}],"ref_id":"83"},{"children":[{"text":"\n  )"}]}],"ref_id":"84"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"85"}],"node_type":"Property","ref_id":"85"}],"node_type":"Start","ref_id":"86"}],"node_type":"Start","ref_id":"86"}],"ref_id":"87"}],"define_name":"EmergencyDepartmentArrivalTime"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization returns the total interval for admission to discharge for the given encounter, or for the admission of any immediately prior emergency department visit to the discharge of the given encounter.*/\ndefine function \"Hospitalization\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"90"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"91"},{"children":[{"text":" Visit"}]}],"ref_id":"92"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"93"}],"node_type":"Retrieve","ref_id":"93"},{"children":[{"text":" LastED"}]}],"ref_id":"94"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"95"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"96"}],"node_type":"Property","ref_id":"96"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"100"},{"children":[{"text":" or less on or before"}]}],"ref_id":"101"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"97"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"98"}],"node_type":"Property","ref_id":"98"}],"node_type":"Start","ref_id":"99"}],"ref_id":"101"}],"ref_id":"101"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"102"}],"node_type":"End","ref_id":"103"}],"ref_id":"104"}],"ref_id":"105"}],"ref_id":"106"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"107"}],"ref_id":"108"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"109"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"110"}],"node_type":"Property","ref_id":"110"}],"node_type":"Start","ref_id":"111"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"112"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"113"}],"node_type":"Property","ref_id":"113"}],"node_type":"Start","ref_id":"114"},{"children":[{"text":")"}]}],"ref_id":"115"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"116"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"117"}],"node_type":"Property","ref_id":"117"}],"ref_id":"118"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"119"}],"ref_id":"120"}],"node_type":"Query","ref_id":"121"}],"node_type":"Query","ref_id":"121"}],"ref_id":"122"}],"define_name":"Hospitalization"},{"children":[{"children":[{"children":[{"text":"/*Returns admission time for an encounter or for immediately prior emergency department visit.*/\ndefine function \"HospitalAdmissionTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"88"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"\"Hospitalization\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"89"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"123"}],"node_type":"Start","ref_id":"124"}],"node_type":"Start","ref_id":"124"}],"ref_id":"125"}],"define_name":"HospitalAdmissionTime"},{"children":[{"children":[{"children":[{"text":"/*Returns earliest arrival time for an encounter including any prior ED visit.*/\ndefine function \"HospitalArrivalTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"126"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"\"HospitalizationLocations\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"127"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"128"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"128"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"129"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"130"}],"node_type":"Start","ref_id":"131"}],"ref_id":"132"}],"ref_id":"133"}],"ref_id":"134"},{"children":[{"text":"\n  )"}]}],"ref_id":"135"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"136"}],"node_type":"Property","ref_id":"136"}],"node_type":"Start","ref_id":"137"}],"node_type":"Start","ref_id":"137"}],"ref_id":"138"}],"define_name":"HospitalArrivalTime"},{"children":[{"children":[{"children":[{"text":"/*Returns the length of stay in days (i.e. the number of days between admission and discharge) for the given encounter, or from the admission of any immediately prior emergency department visit to the discharge of the encounter*/\ndefine function \"HospitalizationLengthofStay\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"141"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"LengthInDays("}]},{"children":[{"children":[{"text":"\"Hospitalization\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"142"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"143"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"144"}],"node_type":"FunctionRef","ref_id":"144"}],"ref_id":"145"}],"define_name":"HospitalizationLengthofStay"},{"children":[{"children":[{"children":[{"text":"/*Returns the latest departure time for encounter including any prior ED visit.*/\ndefine function \"HospitalDepartureTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"146"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"\"HospitalizationLocations\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"147"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"148"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"148"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"149"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"150"}],"node_type":"Start","ref_id":"151"}],"ref_id":"152"}],"ref_id":"153"}],"ref_id":"154"},{"children":[{"text":"\n  )"}]}],"ref_id":"155"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"156"}],"node_type":"Property","ref_id":"156"}],"node_type":"End","ref_id":"157"}],"node_type":"End","ref_id":"157"}],"ref_id":"158"}],"define_name":"HospitalDepartureTime"},{"children":[{"children":[{"children":[{"text":"/*Hospital Discharge Time returns the discharge time for an encounter*/\ndefine function \"HospitalDischargeTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"159"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"160"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"161"}],"node_type":"Property","ref_id":"161"}],"node_type":"End","ref_id":"162"}],"node_type":"End","ref_id":"162"}],"ref_id":"163"}],"define_name":"HospitalDischargeTime"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization with Observation and Outpatient Surgery Service returns the total interval from the start of any immediately prior emergency department visit, outpatient surgery visit or observation visit to the discharge of the given encounter.*/\ndefine function \"HospitalizationWithObservationAndOutpatientSurgeryService\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"164"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"165"},{"children":[{"text":" Visit"}]}],"ref_id":"166"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"ObsVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Observation Services\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"167"}],"node_type":"Retrieve","ref_id":"167"},{"children":[{"text":" LastObs"}]}],"ref_id":"168"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastObs"}]}],"ref_id":"169"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"170"}],"node_type":"Property","ref_id":"170"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"174"},{"children":[{"text":" or less on or before"}]}],"ref_id":"175"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"171"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"172"}],"node_type":"Property","ref_id":"172"}],"node_type":"Start","ref_id":"173"}],"ref_id":"175"}],"ref_id":"175"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"176"}],"node_type":"End","ref_id":"177"}],"ref_id":"178"}],"ref_id":"179"}],"ref_id":"180"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"181"}],"ref_id":"182"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"VisitStart: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"ObsVisit"}]}],"ref_id":"183"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"184"}],"node_type":"Property","ref_id":"184"}],"node_type":"Start","ref_id":"185"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"186"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"187"}],"node_type":"Property","ref_id":"187"}],"node_type":"Start","ref_id":"188"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"189"}],"ref_id":"190"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"191"}],"node_type":"Retrieve","ref_id":"191"},{"children":[{"text":" LastED"}]}],"ref_id":"192"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"193"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"194"}],"node_type":"Property","ref_id":"194"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"196"},{"children":[{"text":" or less on or before"}]}],"ref_id":"197"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"195"}],"ref_id":"197"}],"ref_id":"197"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"198"}],"node_type":"End","ref_id":"199"}],"ref_id":"200"}],"ref_id":"201"}],"ref_id":"202"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"203"}],"ref_id":"204"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"VisitStartWithED: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"205"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"206"}],"node_type":"Property","ref_id":"206"}],"node_type":"Start","ref_id":"207"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"208"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"209"}],"ref_id":"210"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"OutpatientSurgeryVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Outpatient Surgery Service\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"211"}],"node_type":"Retrieve","ref_id":"211"},{"children":[{"text":" LastSurgeryOP"}]}],"ref_id":"212"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastSurgeryOP"}]}],"ref_id":"213"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"214"}],"node_type":"Property","ref_id":"214"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"216"},{"children":[{"text":" or less on or before"}]}],"ref_id":"217"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"VisitStartWithED"}]}],"node_type":"QueryLetRef","ref_id":"215"}],"ref_id":"217"}],"ref_id":"217"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"218"}],"node_type":"End","ref_id":"219"}],"ref_id":"220"}],"ref_id":"221"}],"ref_id":"222"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"223"}],"ref_id":"224"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"OutpatientSurgeryVisit"}]}],"ref_id":"225"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"226"}],"node_type":"Property","ref_id":"226"}],"node_type":"Start","ref_id":"227"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"VisitStartWithED"}]}],"node_type":"QueryLetRef","ref_id":"228"},{"children":[{"text":")"}]}],"ref_id":"229"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"230"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"231"}],"node_type":"Property","ref_id":"231"}],"ref_id":"232"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"233"}],"ref_id":"234"}],"node_type":"Query","ref_id":"235"}],"node_type":"Query","ref_id":"235"}],"ref_id":"236"}],"define_name":"HospitalizationWithObservationAndOutpatientSurgeryService"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization with Observation returns the total interval from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\ndefine function \"HospitalizationWithObservation\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"237"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"238"},{"children":[{"text":" Visit"}]}],"ref_id":"239"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"ObsVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Observation Services\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"240"}],"node_type":"Retrieve","ref_id":"240"},{"children":[{"text":" LastObs"}]}],"ref_id":"241"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastObs"}]}],"ref_id":"242"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"243"}],"node_type":"Property","ref_id":"243"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"247"},{"children":[{"text":" or less on or before"}]}],"ref_id":"248"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"244"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"245"}],"node_type":"Property","ref_id":"245"}],"node_type":"Start","ref_id":"246"}],"ref_id":"248"}],"ref_id":"248"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"249"}],"node_type":"End","ref_id":"250"}],"ref_id":"251"}],"ref_id":"252"}],"ref_id":"253"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"254"}],"ref_id":"255"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"VisitStart: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"ObsVisit"}]}],"ref_id":"256"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"257"}],"node_type":"Property","ref_id":"257"}],"node_type":"Start","ref_id":"258"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"259"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"260"}],"node_type":"Property","ref_id":"260"}],"node_type":"Start","ref_id":"261"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"262"}],"ref_id":"263"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"264"}],"node_type":"Retrieve","ref_id":"264"},{"children":[{"text":" LastED"}]}],"ref_id":"265"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"266"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"267"}],"node_type":"Property","ref_id":"267"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"269"},{"children":[{"text":" or less on or before"}]}],"ref_id":"270"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"268"}],"ref_id":"270"}],"ref_id":"270"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"271"}],"node_type":"End","ref_id":"272"}],"ref_id":"273"}],"ref_id":"274"}],"ref_id":"275"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"276"}],"ref_id":"277"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"278"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"279"}],"node_type":"Property","ref_id":"279"}],"node_type":"Start","ref_id":"280"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"281"},{"children":[{"text":")"}]}],"ref_id":"282"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"283"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"284"}],"node_type":"Property","ref_id":"284"}],"ref_id":"285"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"286"}],"ref_id":"287"}],"node_type":"Query","ref_id":"288"}],"node_type":"Query","ref_id":"288"}],"ref_id":"289"}],"define_name":"HospitalizationWithObservation"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization with Observation Length of Stay returns the length in days from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\ndefine function \"HospitalizationWithObservationLengthofStay\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"290"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"\"LengthInDays\"("}]},{"children":[{"children":[{"text":"\"HospitalizationWithObservation\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"291"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"292"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"293"}],"node_type":"FunctionRef","ref_id":"293"}],"ref_id":"294"}],"define_name":"HospitalizationWithObservationLengthofStay"},{"children":[{"children":[{"children":[{"text":"/*First Inpatient Intensive Care Unit returns the first intensive care unit for the given encounter, without considering any immediately prior emergency department visit.*/\ndefine function \"FirstInpatientIntensiveCareUnit\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"295"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"296"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"node_type":"Property","ref_id":"297"}],"node_type":"Property","ref_id":"297"},{"children":[{"text":")"}]}],"node_type":"Property","ref_id":"297"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"298"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"HospitalLocation"}]}],"ref_id":"299"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"300"}],"ref_id":"300"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Intensive Care Unit\""}]}],"ref_id":"301"}],"node_type":"InValueSet","ref_id":"302"},{"children":[{"text":"\n        and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"HospitalLocation"}]}],"ref_id":"303"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"304"}],"node_type":"Property","ref_id":"304"},{"children":[{"text":" during "}],"node_type":"IncludedIn","ref_id":"307"},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"305"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"306"}],"node_type":"Property","ref_id":"306"}],"node_type":"IncludedIn","ref_id":"307"}],"ref_id":"308"}],"ref_id":"308"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"309"}],"node_type":"Start","ref_id":"310"}],"ref_id":"311"}],"ref_id":"312"}],"ref_id":"313"},{"children":[{"text":"\n  )"}]}],"node_type":"First","ref_id":"314"}],"node_type":"First","ref_id":"314"}],"ref_id":"315"}],"define_name":"FirstInpatientIntensiveCareUnit"},{"children":[{"children":[{"children":[{"text":"/*Given a datetime and a period, returns the period (if a period is provided) or the interval beginning and ending on the datetime (if a datetime is provided)*/\ndefine function \"NormalizeInterval\"(pointInTime "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"316"},{"children":[{"text":", period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"317"},{"children":[{"text":"\u003e"}]}],"ref_id":"318"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"pointInTime"}]}],"node_type":"OperandRef","ref_id":"319"},{"children":[{"text":" is not null"}]}],"ref_id":"320"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"pointInTime"}]}],"ref_id":"321"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"pointInTime"}]}],"ref_id":"322"},{"children":[{"text":"]"}]}],"ref_id":"323"},{"children":[{"text":"\n    else "}]},{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"324"},{"children":[{"text":" is not null"}]}],"ref_id":"325"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"period"}]}],"ref_id":"326"},{"children":[{"text":" \n    else "}]},{"children":[{"children":[{"text":"null as "}],"node_type":"Null","ref_id":"327"},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"328"},{"children":[{"text":"\u003e"}]}],"ref_id":"329"}],"ref_id":"330"}],"ref_id":"331"}],"node_type":"If","ref_id":"332"}],"node_type":"If","ref_id":"332"}],"ref_id":"333"}],"define_name":"NormalizeInterval"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return true if the interval has a starting boundary specified (i.e. the start of the interval is not null and not the minimum DateTime value)*/\ndefine function \"HasStart\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"334"},{"children":[{"text":"\u003e"}]}],"ref_id":"335"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"not "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"336"}],"node_type":"Start","ref_id":"337"},{"children":[{"text":" is null"}]}],"node_type":"IsNull","ref_id":"338"},{"children":[{"text":"\n      or "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"339"}],"node_type":"Start","ref_id":"340"},{"children":[{"text":" = "}]},{"children":[{"children":[{"text":"minimum "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"341"}],"node_type":"MinValue","ref_id":"342"}],"node_type":"Equal","ref_id":"343"}],"node_type":"Or","ref_id":"344"},{"children":[{"text":"\n  )"}]}],"node_type":"Or","ref_id":"344"}],"node_type":"Not","ref_id":"345"}],"node_type":"Not","ref_id":"345"}],"ref_id":"346"}],"define_name":"HasStart"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return true if the interval has an ending boundary specified (i.e. the end of the interval is not null and not the maximum DateTime value)*/\ndefine function \"HasEnd\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"347"},{"children":[{"text":"\u003e"}]}],"ref_id":"348"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"not "}]},{"children":[{"children":[{"text":"( \n    "}]},{"children":[{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"349"}],"node_type":"End","ref_id":"350"},{"children":[{"text":" is null"}]}],"node_type":"IsNull","ref_id":"351"},{"children":[{"text":"\n      or \n      "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"352"}],"node_type":"End","ref_id":"353"},{"children":[{"text":" = "}]},{"children":[{"children":[{"text":"maximum "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"354"}],"node_type":"MaxValue","ref_id":"355"}],"node_type":"Equal","ref_id":"356"}],"node_type":"Or","ref_id":"357"},{"children":[{"text":"\n  )"}]}],"node_type":"Or","ref_id":"357"}],"node_type":"Not","ref_id":"358"}],"node_type":"Not","ref_id":"358"}],"ref_id":"359"}],"define_name":"HasEnd"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return the ending point if the interval has an ending boundary specified, otherwise, return the starting point*/\ndefine function \"Latest\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"360"},{"children":[{"text":"\u003e"}]}],"ref_id":"361"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"HasEnd("}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"362"},{"children":[{"text":")"}]}],"ref_id":"363"},{"children":[{"text":")"}]}],"ref_id":"363"},{"children":[{"text":" then \n  "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"364"}],"ref_id":"365"},{"children":[{"text":" \n    else "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"366"}],"ref_id":"367"}],"node_type":"If","ref_id":"368"}],"node_type":"If","ref_id":"368"}],"ref_id":"369"}],"define_name":"Latest"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return the starting point if the interval has a starting boundary specified, otherwise, return the ending point*/\ndefine function \"Earliest\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"370"},{"children":[{"text":"\u003e"}]}],"ref_id":"371"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"HasStart("}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"372"},{"children":[{"text":")"}]}],"ref_id":"373"},{"children":[{"text":")"}]}],"ref_id":"373"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"374"}],"ref_id":"375"},{"children":[{"text":" \n    else \n  "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"376"}],"ref_id":"377"}],"node_type":"If","ref_id":"378"}],"node_type":"If","ref_id":"378"}],"ref_id":"379"}],"define_name":"Earliest"},{"children":[{"children":[{"children":[{"text":"/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the ending point of the period if the period has an ending boundary specified, otherwise returns the starting point of the interval*/\ndefine function \"LatestOf\"(pointInTime "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"380"},{"children":[{"text":", period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"381"},{"children":[{"text":"\u003e"}]}],"ref_id":"382"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Latest("}]},{"children":[{"children":[{"text":"NormalizeInterval("}]},{"children":[{"children":[{"text":"pointInTime"}]}],"node_type":"OperandRef","ref_id":"383"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"384"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"385"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"386"}],"node_type":"FunctionRef","ref_id":"386"}],"ref_id":"387"}],"define_name":"LatestOf"},{"children":[{"children":[{"children":[{"text":"/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the starting point of the period if the period has a starting boundary specified, otherwise returns the ending point of the period*/\ndefine function \"EarliestOf\"(pointInTime "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"388"},{"children":[{"text":", period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"389"},{"children":[{"text":"\u003e"}]}],"ref_id":"390"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Earliest("}]},{"children":[{"children":[{"text":"NormalizeInterval("}]},{"children":[{"children":[{"text":"pointInTime"}]}],"node_type":"OperandRef","ref_id":"391"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"392"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"393"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"394"}],"node_type":"FunctionRef","ref_id":"394"}],"ref_id":"395"}],"define_name":"EarliestOf"}],"identifier":{"id":"MATGlobalCommonFunctionsQDM","version":"8.0.000"}},"is_main_library":false,"is_top_level":true,"library_name":"MATGlobalCommonFunctionsQDM","library_version":"8.0.000","statement_dependencies":[{"_id":"68923f6fa83e15671c2e395a","statement_name":"NormalizeInterval"},{"_id":"68923f6fa83e15671c2e395b","statement_name":"EarliestOf","statement_references":[{"_id":"68923f6fa83e15671c2e3958","hqmf_id":null,"library_name":"MATGlobalCommonFunctionsQDM","statement_name":"Earliest"},{"_id":"68923f6fa83e15671c2e3959","hqmf_id":null,"library_name":"MATGlobalCommonFunctionsQDM","statement_name":"NormalizeInterval"}]},{"_id":"68923f6fa83e15671c2e395c","statement_name":"Earliest","statement_references":[{"_id":"68923f77a83e15671c2e3fe7","hqmf_id":null,"library_name":"MATGlobalCommonFunctionsQDM","statement_name":"HasStart"}]},{"_id":"68923f6fa83e15671c2e395d","statement_name":"HasStart"}]}],"created_at":null,"description":"Percentage of patients initially diagnosed with non-muscle invasive bladder cancer and who received intravesical Bacillus-Calmette-Guerin (BCG) within 6 months of bladder cancer staging","hqmf_id":"8A6D0454-8DF0-2D9F-018E-32D124A31DBB","hqmf_set_id":"224B1722-AEF9-4E7F-97F8-284267FC1B00","hqmf_version_number":"5.2.000","main_cql_library":"IntravesicalBacillusCalmetteGuerinForBladderCancer","measure_attributes":[{"code":"OTH","value":"646","name":"eCQM Identifier (Measure Authoring Tool)","code_obj":{"type":"CD","null_flavor":"OTH","original_text":"eCQM Identifier (Measure Authoring Tool)"},"value_obj":{"type":"ED","value":"646","media_type":"text/plain"}},{"code":"OTH","value":"Not Applicable","name":"CBE Number","code_obj":{"type":"CD","null_flavor":"OTH","original_text":"CBE Number"},"value_obj":{"type":"ED","value":"Not Applicable","media_type":"text/plain"}},{"code":"COPY","value":"Limited proprietary coding is contained in the measure specifications for convenience. Users of the proprietary code sets should obtain all necessary licenses from the owners of these code sets. Oregon Urology Institute (OUI) and Large Urology Group Practice Association (LUGPA) disclaim all liability for use or accuracy of third party codes contained in the specifications.\n\nCPT(R) contained in the Measure specifications is copyright 2004-2023. American Medical Association. LOINC(R) copyright 2004-2023 Regenstrief Institute, Inc. This material contains SNOMED Clinical Terms(R) (SNOMED CT[R]) copyright 2004-2023 International Health Terminology Standards Development Organisation. ICD-10 copyright 2023 World Health Organization. All Rights Reserved.","name":"Copyright","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"COPY","title":"Copyright"},"value_obj":{"type":"ED","value":"Limited proprietary coding is contained in the measure specifications for convenience. Users of the proprietary code sets should obtain all necessary licenses from the owners of these code sets. Oregon Urology Institute (OUI) and Large Urology Group Practice Association (LUGPA) disclaim all liability for use or accuracy of third party codes contained in the specifications.\n\nCPT(R) contained in the Measure specifications is copyright 2004-2023. American Medical Association. LOINC(R) copyright 2004-2023 Regenstrief Institute, Inc. This material contains SNOMED Clinical Terms(R) (SNOMED CT[R]) copyright 2004-2023 International Health Terminology Standards Development Organisation. ICD-10 copyright 2023 World Health Organization. All Rights Reserved.","media_type":"text/plain"}},{"code":"DISC","value":"The performance measure is not a clinical guideline and does not establish a standard of medical care, and has not been tested for all potential applications.\n\nTHE MEASURES AND SPECIFICATIONS ARE PROVIDED \"AS IS\" WITHOUT WARRANTY OF ANY KIND.\n\nDue to technical limitations, registered trademarks are indicated by (R) or [R] and unregistered trademarks are indicated by TM or [TM].","name":"Disclaimer","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DISC","title":"Disclaimer"},"value_obj":{"type":"ED","value":"The performance measure is not a clinical guideline and does not establish a standard of medical care, and has not been tested for all potential applications.\n\nTHE MEASURES AND SPECIFICATIONS ARE PROVIDED \"AS IS\" WITHOUT WARRANTY OF ANY KIND.\n\nDue to technical limitations, registered trademarks are indicated by (R) or [R] and unregistered trademarks are indicated by TM or [TM].","media_type":"text/plain"}},{"code":"MSRSCORE","name":"Measure Scoring","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRSCORE","title":"Measure Scoring"},"value_obj":{"type":"CD","system":"2.16.840.1.113883.5.1063","code":"PROPOR","title":"Proportion"}},{"code":"MSRTYPE","name":"Measure Type","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRTYPE","title":"Measure Type"},"value_obj":{"type":"CD","system":"2.16.840.1.113883.5.1063","code":"PROCESS","title":"PROCESS"}},{"code":"STRAT","value":"None","name":"Stratification","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"STRAT","title":"Stratification"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"MSRADJ","value":"None","name":"Risk Adjustment","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRADJ","title":"Risk Adjustment"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"MSRAGG","value":"None","name":"Rate Aggregation","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRAGG","title":"Rate Aggregation"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"RAT","value":"Bladder cancer is ranked 10th for new cancer cases in 2020 and is the 9th leading cause of cancer death in the United States. There are 81,400 estimated new cases in 2020 and 17,980 estimated deaths in 2020. In 2016, there were an estimated 699,450 people living with bladder cancer in the United States. Early detection (discovery of cancer in situ or localized to the primary site) is found in 85% of the patients, and with these there is a five-year survival rate of 95.8% for In Situ and 69.2% for Localized. Bladder cancer is rarely found in patients under age 20, with the median age of diagnosis being 73 (NIH, 2020).\nNational Comprehensive Cancer Network (NCCN) Guidelines for Bladder Cancer (version 6.2021) defines intravesical BCG as Category 1 Treatment for Ta - high grade, T1 and Tis non-muscle invasive bladder cancer. Most public data reflects prophylactic or adjuvant use of intravesical therapy with the goal of preventing recurrence or delaying progression to a higher grade or stage. BCG has been shown to be effective as prophylaxis to prevent bladder cancer recurrences following TURBT. The NCCN Bladder Cancer Panel Members recommend BCG as the preferred option over Mitomycin C for adjuvant treatment of high-grade lesions (Ta). BCG is also standard therapy for Primary Tis. Most T1 lesions are high risk and are similarly treated with adjuvant intravesical therapy with BCG being a Category 1 recommendation. (NCCN, 2021).","name":"Rationale","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"RAT","title":"Rationale"},"value_obj":{"type":"ED","value":"Bladder cancer is ranked 10th for new cancer cases in 2020 and is the 9th leading cause of cancer death in the United States. There are 81,400 estimated new cases in 2020 and 17,980 estimated deaths in 2020. In 2016, there were an estimated 699,450 people living with bladder cancer in the United States. Early detection (discovery of cancer in situ or localized to the primary site) is found in 85% of the patients, and with these there is a five-year survival rate of 95.8% for In Situ and 69.2% for Localized. Bladder cancer is rarely found in patients under age 20, with the median age of diagnosis being 73 (NIH, 2020).\nNational Comprehensive Cancer Network (NCCN) Guidelines for Bladder Cancer (version 6.2021) defines intravesical BCG as Category 1 Treatment for Ta - high grade, T1 and Tis non-muscle invasive bladder cancer. Most public data reflects prophylactic or adjuvant use of intravesical therapy with the goal of preventing recurrence or delaying progression to a higher grade or stage. BCG has been shown to be effective as prophylaxis to prevent bladder cancer recurrences following TURBT. The NCCN Bladder Cancer Panel Members recommend BCG as the preferred option over Mitomycin C for adjuvant treatment of high-grade lesions (Ta). BCG is also standard therapy for Primary Tis. Most T1 lesions are high risk and are similarly treated with adjuvant intravesical therapy with BCG being a Category 1 recommendation. (NCCN, 2021).","media_type":"text/plain"}},{"code":"CRS","value":"Intravesical BCG should be administered within 6 months of the initial diagnosis of non-muscle invasive bladder cancer. It may be administered 3-4 weeks after resection, but there needs to be pathological tumor confirmation and must be withheld if there is traumatic catheterization, bacteriuria, persistent gross hematuria, persistent severe local symptoms or systemic symptoms. The normal induction course is 6 weekly instillations of intravesical BCG (AUA Non-Muscle Invasive Bladder Cancer and American Urological Association (AUA) Guideline for the Management of Non-muscle Invasive Bladder Cancer: Stages Ta High Risk, T1 and TIS).","name":"Clinical Recommendation Statement","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"CRS","title":"Clinical Recommendation Statement"},"value_obj":{"type":"ED","value":"Intravesical BCG should be administered within 6 months of the initial diagnosis of non-muscle invasive bladder cancer. It may be administered 3-4 weeks after resection, but there needs to be pathological tumor confirmation and must be withheld if there is traumatic catheterization, bacteriuria, persistent gross hematuria, persistent severe local symptoms or systemic symptoms. The normal induction course is 6 weekly instillations of intravesical BCG (AUA Non-Muscle Invasive Bladder Cancer and American Urological Association (AUA) Guideline for the Management of Non-muscle Invasive Bladder Cancer: Stages Ta High Risk, T1 and TIS).","media_type":"text/plain"}},{"code":"IDUR","value":"A higher score is the preferred result and indicates better quality","name":"Improvement Notation","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"IDUR","title":"Improvement Notation"},"value_obj":{"type":"ED","value":"A higher score is the preferred result and indicates better quality","media_type":"text/plain"}},{"code":"REF","value":"CITATIONChamie, K., Saigal, C.S., Lai, J., Hanley, J.M., Setodji, C.M., Konety, B.R., Litwin, M.S., \u0026 Urologic Diseases in America Project (2011). Compliance with Guidelines for Patients with Bladder Cancer: Variation in the Delivery of Care. Cancer.2011 Dec 1: 117(23): 5392--5401.\nhttps://www.ncbi.nlm.nih.gov/pmc/articles/PMC3206145/","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONChamie, K., Saigal, C.S., Lai, J., Hanley, J.M., Setodji, C.M., Konety, B.R., Litwin, M.S., \u0026 Urologic Diseases in America Project (2011). Compliance with Guidelines for Patients with Bladder Cancer: Variation in the Delivery of Care. Cancer.2011 Dec 1: 117(23): 5392--5401.\nhttps://www.ncbi.nlm.nih.gov/pmc/articles/PMC3206145/","media_type":"text/plain"}},{"code":"REF","value":"CITATIONChang, S.S., Boorjian, S.A., Chou, R., Clark, P.E., Daneshmand, S., Konety, B.R., Pruthi, R., Quale, D.Z., Ritch, C.R., Seigne, J.D., Skinner, E.C., Smith, N.M., \u0026 Mckiernan, J. M., (2016) American Urological Association. Non-Muscle Invasive Bladder Cancer.\nhttps://www.auanet.org/guidelines-and-quality/guidelines/bladder-cancer-non-muscle-invasive-guideline","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONChang, S.S., Boorjian, S.A., Chou, R., Clark, P.E., Daneshmand, S., Konety, B.R., Pruthi, R., Quale, D.Z., Ritch, C.R., Seigne, J.D., Skinner, E.C., Smith, N.M., \u0026 Mckiernan, J. M., (2016) American Urological Association. Non-Muscle Invasive Bladder Cancer.\nhttps://www.auanet.org/guidelines-and-quality/guidelines/bladder-cancer-non-muscle-invasive-guideline","media_type":"text/plain"}},{"code":"REF","value":"CITATIONHall, M.C., Chang, S.S., Dalbagni, G., Pruthi, R.S., Schellhammer, P.F., Seigne, J.D., Skinner, E.C., \u0026 Wolf .S., (2016). American Urological Association. Guideline for the Management of Non-muscle Invasive Bladder Cancer (Stages Ta, T1, and Tis): Update 2016.\nhttps://www.auajournals.org/doi/10.1016/j.juro.2007.09.003","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONHall, M.C., Chang, S.S., Dalbagni, G., Pruthi, R.S., Schellhammer, P.F., Seigne, J.D., Skinner, E.C., \u0026 Wolf .S., (2016). American Urological Association. Guideline for the Management of Non-muscle Invasive Bladder Cancer (Stages Ta, T1, and Tis): Update 2016.\nhttps://www.auajournals.org/doi/10.1016/j.juro.2007.09.003","media_type":"text/plain"}},{"code":"REF","value":"CITATIONKassouf, W., Black, P., (2016) Treatment of primary non-muscle invasive urothelial bladder cancer. Literature review current through Dec. 2016.\nhttps://www.uptodate.com/contents/treatment-of-primary-non-muscle-invasive-urothelial-bladder-cancer?source=search_result\u0026search=Treatment%20of%20primary%20non-muscle%20invasive%20urothelial%20bladder%20cancer\u0026selectedTitle=1~150 T of primary","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONKassouf, W., Black, P., (2016) Treatment of primary non-muscle invasive urothelial bladder cancer. Literature review current through Dec. 2016.\nhttps://www.uptodate.com/contents/treatment-of-primary-non-muscle-invasive-urothelial-bladder-cancer?source=search_result\u0026search=Treatment%20of%20primary%20non-muscle%20invasive%20urothelial%20bladder%20cancer\u0026selectedTitle=1~150 T of primary","media_type":"text/plain"}},{"code":"REF","value":"CITATIONNCCN Clinical Practice Guidelines in Oncology (NCCN Guidelines). (2021). Bladder Cancer. Version 6.2021. https://www.nccn.org/professionals/physician_gls/pdf/bladder.pdf","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONNCCN Clinical Practice Guidelines in Oncology (NCCN Guidelines). (2021). Bladder Cancer. Version 6.2021. https://www.nccn.org/professionals/physician_gls/pdf/bladder.pdf","media_type":"text/plain"}},{"code":"REF","value":"CITATIONNIH National Cancer Institute Surveillance, (2020)  Epidemiology, and End Results Program. SEER Cancer Stat Facts: Bladder Cancer. National Cancer Institute. Bethesda,MD, https://seer.cancer.gov/statfacts/html/urinb.html","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONNIH National Cancer Institute Surveillance, (2020)  Epidemiology, and End Results Program. SEER Cancer Stat Facts: Bladder Cancer. National Cancer Institute. Bethesda,MD, https://seer.cancer.gov/statfacts/html/urinb.html","media_type":"text/plain"}},{"code":"REF","value":"CITATIONPacific Northwest Evidence-based Practice Center, Oregon Health \u0026 Science University. (2016). PCORI Topic Brief. Comparative Effectiveness of Treatments for Non-Muscle-Invasive Bladder Cancer\nhttp://www.pcori.org/sites/default/files/PCORI-Assessment-Options-Advisory-Panel-Fall-2016-Topic-Brief-Non-Muscle-Invasive-Bladder-Cancer.pdf","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONPacific Northwest Evidence-based Practice Center, Oregon Health \u0026 Science University. (2016). PCORI Topic Brief. Comparative Effectiveness of Treatments for Non-Muscle-Invasive Bladder Cancer\nhttp://www.pcori.org/sites/default/files/PCORI-Assessment-Options-Advisory-Panel-Fall-2016-Topic-Brief-Non-Muscle-Invasive-Bladder-Cancer.pdf","media_type":"text/plain"}},{"code":"DEF","value":"Intravesical - Within the urinary bladder\nBacillus Calmette-Guerin (BCG) - A live attenuated strain of Mycobacterium bovis, first indicated as a tuberculosis vaccine, has had widespread use in intravesical immunotherapy since the 1970's.\nTumor location: urinary bladder\nHistology: urothelial carcinoma\nPrimary Tumor (T) stage:\nTa - Noninvasive and high grade\nTis - Carcinoma in situ: \"flat tumor\"\nT1- tumor invades subepithelial connective tissue (high grade or low grade)","name":"Definition","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DEF","title":"Definition"},"value_obj":{"type":"ED","value":"Intravesical - Within the urinary bladder\nBacillus Calmette-Guerin (BCG) - A live attenuated strain of Mycobacterium bovis, first indicated as a tuberculosis vaccine, has had widespread use in intravesical immunotherapy since the 1970's.\nTumor location: urinary bladder\nHistology: urothelial carcinoma\nPrimary Tumor (T) stage:\nTa - Noninvasive and high grade\nTis - Carcinoma in situ: \"flat tumor\"\nT1- tumor invades subepithelial connective tissue (high grade or low grade)","media_type":"text/plain"}},{"code":"GUIDE","value":"Ta bladder cancer must be high grade Ta only and is supported by the 2016 AUA guidelines and 2018 NCCN guidelines.\n\nThe BCG dose can be full or partial and can be from any lot or manufacturer.\n\nThis eCQM is a patient-based measure.\n\nTelehealth encounters are not eligible for this measure because the measure requires a clinical action that cannot be conducted via telehealth.\n\nThis version of the eCQM uses QDM version 5.6. Please refer to the eCQI resource center (https://ecqi.healthit.gov/qdm) for more information on the QDM.","name":"Guidance","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"GUIDE","title":"Guidance"},"value_obj":{"type":"ED","value":"Ta bladder cancer must be high grade Ta only and is supported by the 2016 AUA guidelines and 2018 NCCN guidelines.\n\nThe BCG dose can be full or partial and can be from any lot or manufacturer.\n\nThis eCQM is a patient-based measure.\n\nTelehealth encounters are not eligible for this measure because the measure requires a clinical action that cannot be conducted via telehealth.\n\nThis version of the eCQM uses QDM version 5.6. Please refer to the eCQI resource center (https://ecqi.healthit.gov/qdm) for more information on the QDM.","media_type":"text/plain"}},{"code":"TRANF","value":"TBD","name":"Transmission Format","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"TRANF","title":"Transmission Format"},"value_obj":{"type":"ED","value":"TBD","media_type":"text/plain"}},{"code":"IPOP","value":"All patients initially diagnosed with T1, Tis or high grade Ta non-muscle invasive bladder cancer with bladder cancer staging within 6 months before to 6 months after the start of the measurement period and a qualified encounter in the measurement period","name":"Initial Population","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"IPOP","title":"Initial Population"},"value_obj":{"type":"ED","value":"All patients initially diagnosed with T1, Tis or high grade Ta non-muscle invasive bladder cancer with bladder cancer staging within 6 months before to 6 months after the start of the measurement period and a qualified encounter in the measurement period","media_type":"text/plain"}},{"code":"DENOM","value":"Equals Initial Population","name":"Denominator","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DENOM","title":"Denominator"},"value_obj":{"type":"ED","value":"Equals Initial Population","media_type":"text/plain"}},{"code":"DENEX","value":"Immunosuppressed patients, includes HIV and immunocompromised state, with a diagnosis prior to Bladder Cancer Staging.\n\nImmunosuppressive drug therapy starting on or before Bladder Cancer Staging.\n\nActive Tuberculosis diagnosis during the Bladder Cancer Staging.\n\nMixed histology urothelial cell carcinoma including micropapillary, plasmacytoid, sarcomatoid, adenocarcinoma and squamous disease prior to Bladder Cancer Staging.\n\nPatients who undergo cystectomy, chemotherapy or radiation within 6 months prior to Bladder Cancer Staging.","name":"Denominator Exclusions","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DENEX","title":"Denominator Exclusions"},"value_obj":{"type":"ED","value":"Immunosuppressed patients, includes HIV and immunocompromised state, with a diagnosis prior to Bladder Cancer Staging.\n\nImmunosuppressive drug therapy starting on or before Bladder Cancer Staging.\n\nActive Tuberculosis diagnosis during the Bladder Cancer Staging.\n\nMixed histology urothelial cell carcinoma including micropapillary, plasmacytoid, sarcomatoid, adenocarcinoma and squamous disease prior to Bladder Cancer Staging.\n\nPatients who undergo cystectomy, chemotherapy or radiation within 6 months prior to Bladder Cancer Staging.","media_type":"text/plain"}},{"code":"NUMER","value":"Intravesical Bacillus-Calmette Guerin (BCG) instillation for initial dose or series:\nBCG is initiated within 6 months of the bladder cancer staging","name":"Numerator","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"NUMER","title":"Numerator"},"value_obj":{"type":"ED","value":"Intravesical Bacillus-Calmette Guerin (BCG) instillation for initial dose or series:\nBCG is initiated within 6 months of the bladder cancer staging","media_type":"text/plain"}},{"code":"NUMEX","value":"Not Applicable","name":"Numerator Exclusions","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"NUMEX","title":"Numerator Exclusions"},"value_obj":{"type":"ED","value":"Not Applicable","media_type":"text/plain"}},{"code":"DENEXCEP","value":"Unavailability of BCG within 6 months after Bladder Cancer Staging","name":"Denominator Exceptions","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DENEXCEP","title":"Denominator Exceptions"},"value_obj":{"type":"ED","value":"Unavailability of BCG within 6 months after Bladder Cancer Staging","media_type":"text/plain"}},{"code":"SDE","value":"For every patient evaluated by this measure also identify payer, race, ethnicity and sex","name":"Supplemental Data Elements","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"SDE","title":"Supplemental Data Elements"},"value_obj":{"type":"ED","value":"For every patient evaluated by this measure also identify payer, race, ethnicity and sex","media_type":"text/plain"}}],"measure_period":{"type":"IVL_TS","low":{"type":"TS","value":"201201010000","inclusive?":true,"derived?":false},"high":{"type":"TS","value":"201212312359","inclusive?":true,"derived?":false},"width":{"type":"PQ","unit":"a","value":"1","inclusive?":true,"derived?":false}},"measure_scoring":"PROPORTION","population_criteria":{"IPP":{"conjunction?":true,"type":"IPP","hqmf_id":"AA2E8D12-F5D5-49A4-B15A-5C16B5F18667","preconditions":[{"id":2,"preconditions":[{"id":1,"reference":"IntravesicalBacillusCalmetteGuerinForBladderCancer__Initial_Population__4FB01104_EA44_4840_BB34_B8C5714460B2"}],"conjunction_code":"allTrue"}]},"DENOM":{"conjunction?":true,"type":"DENOM","hqmf_id":"C3968A41-F665-4131-9EF4-E850845E2D1F","preconditions":[{"id":4,"preconditions":[{"id":3,"reference":"IntravesicalBacillusCalmetteGuerinForBladderCancer__Denominator__4FB01104_EA44_4840_BB34_B8C5714460B2"}],"conjunction_code":"allTrue"}]},"NUMER":{"conjunction?":true,"type":"NUMER","hqmf_id":"EAD93629-C7CB-4682-B599-EE13B03FEF38","preconditions":[{"id":6,"preconditions":[{"id":5,"reference":"IntravesicalBacillusCalmetteGuerinForBladderCancer__Numerator__4FB01104_EA44_4840_BB34_B8C5714460B2"}],"conjunction_code":"allTrue"}]},"DENEXCEP":{"conjunction?":true,"type":"DENEXCEP","hqmf_id":"D629A3FE-F02D-40A7-ACE3-99A465A9BE83","preconditions":[{"id":8,"preconditions":[{"id":7,"reference":"IntravesicalBacillusCalmetteGuerinForBladderCancer__Denominator_Exception__4FB01104_EA44_4840_BB34_B8C5714460B2"}],"conjunction_code":"atLeastOneTrue"}]},"DENEX":{"conjunction?":true,"type":"DENEX","hqmf_id":"E1CA1D66-73AB-4CA4-997F-0CBACD08C4B4","preconditions":[{"id":10,"preconditions":[{"id":9,"reference":"IntravesicalBacillusCalmetteGuerinForBladderCancer__Denominator_Exclusion__4FB01104_EA44_4840_BB34_B8C5714460B2"}],"conjunction_code":"atLeastOneTrue"}]}},"population_sets":[{"_id":"68923f77a83e15671c2e3fe8","population_set_id":"PopulationSet_1","populations":{"DENEX":{"_id":"68923f77a83e15671c2e3fe9","hqmf_id":"E1CA1D66-73AB-4CA4-997F-0CBACD08C4B4","library_name":"IntravesicalBacillusCalmetteGuerinForBladderCancer","statement_name":"Denominator Exclusion"},"DENEXCEP":{"_id":"68923f77a83e15671c2e3fea","hqmf_id":"D629A3FE-F02D-40A7-ACE3-99A465A9BE83","library_name":"IntravesicalBacillusCalmetteGuerinForBladderCancer","statement_name":"Denominator Exception"},"DENOM":{"_id":"68923f77a83e15671c2e3feb","hqmf_id":"C3968A41-F665-4131-9EF4-E850845E2D1F","library_name":"IntravesicalBacillusCalmetteGuerinForBladderCancer","statement_name":"Denominator"},"IPP":{"_id":"68923f77a83e15671c2e3fec","hqmf_id":"AA2E8D12-F5D5-49A4-B15A-5C16B5F18667","library_name":"IntravesicalBacillusCalmetteGuerinForBladderCancer","statement_name":"Initial Population"},"NUMER":{"_id":"68923f77a83e15671c2e3fed","hqmf_id":"EAD93629-C7CB-4682-B599-EE13B03FEF38","library_name":"IntravesicalBacillusCalmetteGuerinForBladderCancer","statement_name":"Numerator"},"_id":"68923f77a83e15671c2e3fee","_type":"CQM::ProportionPopulationMap"},"supplemental_data_elements":[{"_id":"68923f6fa83e15671c2e3920","hqmf_id":"E513176D-B2D0-4039-AABB-38D2926274D3","library_name":"IntravesicalBacillusCalmetteGuerinForBladderCancer","statement_name":"SDE Ethnicity"},{"_id":"68923f6fa83e15671c2e3921","hqmf_id":"1E756EAE-BEC5-477D-96C3-120C85C8AE2D","library_name":"IntravesicalBacillusCalmetteGuerinForBladderCancer","statement_name":"SDE Payer"},{"_id":"68923f6fa83e15671c2e3922","hqmf_id":"9D3F864F-6892-4CB9-A54B-C748707A57E2","library_name":"IntravesicalBacillusCalmetteGuerinForBladderCancer","statement_name":"SDE Race"},{"_id":"68923f6fa83e15671c2e3923","hqmf_id":"195CDDE4-0E2B-4862-A193-2723CECE597F","library_name":"IntravesicalBacillusCalmetteGuerinForBladderCancer","statement_name":"SDE Sex"}],"title":"Population Criteria Section"}],"source_data_criteria":[{"_id":"68923f6fa83e15671c2e3960","_type":"QDM::MedicationActive","codeListId":"2.16.840.1.113762.1.4.1151.32","dataElementCodes":[],"description":"Medication, Active: ImmunosuppressiveDrugsforUrologyCare","dosage":null,"frequency":null,"hqmfOid":"2.16.840.1.113883.10.20.28.4.44","id":"68923f6fa83e15671c2e3960","qdmCategory":"medication","qdmStatus":"active","qdmTitle":"Medication, Active","qdmVersion":"5.6","relevantDatetime":null,"relevantPeriod":null,"route":null},{"_id":"68923f6fa83e15671c2e3962","_type":"QDM::Diagnosis","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"2.16.840.1.113762.1.4.1151.39","dataElementCodes":[],"description":"Diagnosis: MixedhistologyurothelialcellcarcinomaforUrologyCare","hqmfOid":"2.16.840.1.113883.10.20.28.4.110","id":"68923f6fa83e15671c2e3962","prevalencePeriod":null,"qdmCategory":"condition","qdmTitle":"Diagnosis","qdmVersion":"5.6","qrdaOid":"2.16.840.1.113883.10.20.24.3.135","severity":null},{"_id":"68923f77a83e15671c2e3fef","_type":"QDM::PatientCharacteristicSex","codeListId":"2.16.840.1.113762.1.4.1","dataElementCodes":[],"description":"Patient Characteristic Sex: ONCAdministrativeSex","hqmfOid":"2.16.840.1.113883.10.20.28.4.55","id":"68923f77a83e15671c2e3fef","qdmCategory":"patient_characteristic","qdmStatus":"gender","qdmTitle":"Patient Characteristic Sex","qdmVersion":"5.6"},{"_id":"68923f6fa83e15671c2e3961","_type":"QDM::MedicationActive","codeListId":"2.16.840.1.113762.1.4.1151.60","dataElementCodes":[],"description":"Medication, Active: ChemotherapyAgentsforAdvancedCancer","dosage":null,"frequency":null,"hqmfOid":"2.16.840.1.113883.10.20.28.4.44","id":"68923f6fa83e15671c2e3961","qdmCategory":"medication","qdmStatus":"active","qdmTitle":"Medication, Active","qdmVersion":"5.6","relevantDatetime":null,"relevantPeriod":null,"route":null},{"_id":"68923f6fa83e15671c2e3967","_type":"QDM::ProcedurePerformed","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"2.16.840.1.113762.1.4.1151.55","components":null,"dataElementCodes":[],"description":"Procedure, Performed: CystectomyforUrologyCare","hqmfOid":"2.16.840.1.113883.10.20.28.4.67","id":"68923f6fa83e15671c2e3967","incisionDatetime":null,"method":null,"negationRationale":null,"qdmCategory":"procedure","qdmStatus":"performed","qdmTitle":"Procedure, Performed","qdmVersion":"5.6","rank":null,"reason":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null,"status":null},{"_id":"68923f6fa83e15671c2e3963","_type":"QDM::Diagnosis","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"2.16.840.1.113762.1.4.1151.56","dataElementCodes":[],"description":"Diagnosis: ActiveTuberculosisforUrologyCare","hqmfOid":"2.16.840.1.113883.10.20.28.4.110","id":"68923f6fa83e15671c2e3963","prevalencePeriod":null,"qdmCategory":"condition","qdmTitle":"Diagnosis","qdmVersion":"5.6","qrdaOid":"2.16.840.1.113883.10.20.24.3.135","severity":null},{"_id":"68923f77a83e15671c2e3ff0","_type":"QDM::PatientCharacteristicEthnicity","codeListId":"2.16.840.1.114222.4.11.837","dataElementCodes":[],"description":"Patient Characteristic Ethnicity: Ethnicity","hqmfOid":"2.16.840.1.113883.10.20.28.4.56","id":"68923f77a83e15671c2e3ff0","qdmCategory":"patient_characteristic","qdmStatus":"ethnicity","qdmTitle":"Patient Characteristic Ethnicity","qdmVersion":"5.6"},{"_id":"68923f77a83e15671c2e3ff1","_type":"QDM::MedicationAdministered","authorDatetime":null,"codeListId":"2.16.840.1.113762.1.4.1151.52","dataElementCodes":[],"description":"Medication, Administered: BCGBacillusCalmetteGuerinforUrologyCare","dosage":null,"frequency":null,"hqmfOid":"2.16.840.1.113883.10.20.28.4.45","id":"68923f77a83e15671c2e3ff1","negationRationale":null,"qdmCategory":"medication","qdmStatus":"administered","qdmTitle":"Medication, Administered","qdmVersion":"5.6","reason":null,"relevantDatetime":null,"relevantPeriod":null,"route":null},{"_id":"68923f6fa83e15671c2e3964","_type":"QDM::Diagnosis","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"2.16.840.1.113883.3.464.1003.120.12.1003","dataElementCodes":[],"description":"Diagnosis: HIV","hqmfOid":"2.16.840.1.113883.10.20.28.4.110","id":"68923f6fa83e15671c2e3964","prevalencePeriod":null,"qdmCategory":"condition","qdmTitle":"Diagnosis","qdmVersion":"5.6","qrdaOid":"2.16.840.1.113883.10.20.24.3.135","severity":null},{"_id":"68923f77a83e15671c2e3ff2","_type":"QDM::PatientCharacteristicRace","codeListId":"2.16.840.1.114222.4.11.836","dataElementCodes":[],"description":"Patient Characteristic Race: Race","hqmfOid":"2.16.840.1.113883.10.20.28.4.59","id":"68923f77a83e15671c2e3ff2","qdmCategory":"patient_characteristic","qdmStatus":"race","qdmTitle":"Patient Characteristic Race","qdmVersion":"5.6"},{"_id":"68923f6fa83e15671c2e3965","_type":"QDM::Diagnosis","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"2.16.840.1.113883.3.666.5.1940","dataElementCodes":[],"description":"Diagnosis: ImmunocompromisedConditions","hqmfOid":"2.16.840.1.113883.10.20.28.4.110","id":"68923f6fa83e15671c2e3965","prevalencePeriod":null,"qdmCategory":"condition","qdmTitle":"Diagnosis","qdmVersion":"5.6","qrdaOid":"2.16.840.1.113883.10.20.24.3.135","severity":null},{"_id":"68923f6fa83e15671c2e3966","_type":"QDM::Diagnosis","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"2.16.840.1.113762.1.4.1151.45","dataElementCodes":[],"description":"Diagnosis: BladderCancerforUrologyCare","hqmfOid":"2.16.840.1.113883.10.20.28.4.110","id":"68923f6fa83e15671c2e3966","prevalencePeriod":null,"qdmCategory":"condition","qdmTitle":"Diagnosis","qdmVersion":"5.6","qrdaOid":"2.16.840.1.113883.10.20.24.3.135","severity":null},{"_id":"68923f77a83e15671c2e3ff3","_type":"QDM::PatientCharacteristicPayer","codeListId":"2.16.840.1.114222.4.11.3591","dataElementCodes":[],"description":"Patient Characteristic Payer: PayerType","hqmfOid":"2.16.840.1.113883.10.20.28.4.58","id":"68923f77a83e15671c2e3ff3","qdmCategory":"patient_characteristic","qdmStatus":"payer","qdmTitle":"Patient Characteristic Payer","qdmVersion":"5.6","relevantPeriod":null},{"_id":"68923f77a83e15671c2e3ff4","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.464.1003.101.12.1001","dataElementCodes":[],"description":"Encounter, Performed: OfficeVisit","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"68923f77a83e15671c2e3ff4","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"68923f6fa83e15671c2e3968","_type":"QDM::ProcedurePerformed","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"drc-abbf8574fa7f29b59dd3f9baee1c4f3ab4dd6c1d0493af5161a7c840f944a178","components":null,"dataElementCodes":[],"description":"Procedure, Performed: Tumor staging (tumor staging)","hqmfOid":"2.16.840.1.113883.10.20.28.4.67","id":"68923f6fa83e15671c2e3968","incisionDatetime":null,"method":null,"negationRationale":null,"qdmCategory":"procedure","qdmStatus":"performed","qdmTitle":"Procedure, Performed","qdmVersion":"5.6","rank":null,"reason":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null,"status":null},{"_id":"68923f6fa83e15671c2e3969","_type":"QDM::ProcedurePerformed","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"drc-c9a367fa0bf8b0679fac96841166619c67a7223013cdbcbaaa367a08cfc03fa4","components":null,"dataElementCodes":[],"description":"Procedure, Performed: Combined radiotherapy (procedure)","hqmfOid":"2.16.840.1.113883.10.20.28.4.67","id":"68923f6fa83e15671c2e3969","incisionDatetime":null,"method":null,"negationRationale":null,"qdmCategory":"procedure","qdmStatus":"performed","qdmTitle":"Procedure, Performed","qdmVersion":"5.6","rank":null,"reason":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null,"status":null}],"title":"Intravesical Bacillus-Calmette-Guerin for Non-Muscle Invasive Bladder Cancer","updated_at":null,"value_set_ids":["68923f6fa83e15671c2e396a","68923f6fa83e15671c2e396b","68923f6fa83e15671c2e396c","68923f6fa83e15671c2e396d","68923f6fa83e15671c2e396e","68923f6fa83e15671c2e396f","68923f6fa83e15671c2e3970","68923f77a83e15671c2e3fc4","68923f77a83e15671c2e3fc5","68923f77a83e15671c2e3fc6","68923f77a83e15671c2e3fc7","68923f77a83e15671c2e3fc8","68923f77a83e15671c2e3fc9","68923f77a83e15671c2e3fca","68923f77a83e15671c2e3fcb","68923f77a83e15671c2e3fcc","68923f77a83e15671c2e3fcd","68923f77a83e15671c2e3fce","68923f77a83e15671c2e3fcf","68923f77a83e15671c2e3fd0","68923f77a83e15671c2e3fd1","68923f77a83e15671c2e3fd2","68923f77a83e15671c2e3fd3","68923f77a83e15671c2e3fd4","68923f77a83e15671c2e3fd5","68923f77a83e15671c2e3fd6","68923f77a83e15671c2e3fd7"]}