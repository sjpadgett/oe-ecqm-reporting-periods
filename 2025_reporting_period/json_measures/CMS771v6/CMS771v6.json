{"_id":"68923fa4a83e15671c2e54ec","calculate_sdes":null,"calculation_method":"PATIENT","cms_id":"CMS771v6","component":false,"component_hqmf_set_ids":[],"composite":false,"composite_hqmf_set_id":null,"cql_libraries":[{"_id":"68923fa0a83e15671c2e53ee","cql":"library UrinarySymptomScoreChangeAfterBenignProstaticHyperplasia version '6.2.000'\r\n\r\nusing QDM version '5.6'\r\n\r\ninclude MATGlobalCommonFunctionsQDM version '8.0.000' called Global\r\n\r\ncodesystem \"LOINC\": 'urn:oid:2.16.840.1.113883.6.1'\r\ncodesystem \"ICD10CM\": 'urn:oid:2.16.840.1.113883.6.90'\r\ncodesystem \"AdministrativeGender\": 'urn:oid:2.16.840.1.113883.5.1'\r\ncodesystem \"ActCode\": 'urn:oid:2.16.840.1.113883.5.4'\r\n\r\nvalueset \"Ethnicity\": 'urn:oid:2.16.840.1.114222.4.11.837'\r\nvalueset \"Hospital Services for Urology\": 'urn:oid:2.16.840.1.113762.1.4.1151.59'\r\nvalueset \"Morbid Obesity\": 'urn:oid:2.16.840.1.113762.1.4.1164.67'\r\nvalueset \"Office Visit\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1001'\r\nvalueset \"ONC Administrative Sex\": 'urn:oid:2.16.840.1.113762.1.4.1'\r\nvalueset \"Payer Type\": 'urn:oid:2.16.840.1.114222.4.11.3591'\r\nvalueset \"Race\": 'urn:oid:2.16.840.1.114222.4.11.836'\r\nvalueset \"Urinary retention\": 'urn:oid:2.16.840.1.113762.1.4.1164.52'\r\n\r\ncode \"American Urological Association Symptom Index [AUASI]\": '80883-2' from \"LOINC\" display 'American Urological Association Symptom Index [AUASI]'\r\ncode \"Benign prostatic hyperplasia with lower urinary tract symptoms\": 'N40.1' from \"ICD10CM\" display 'Benign prostatic hyperplasia with lower urinary tract symptoms'\r\ncode \"Body mass index (BMI) [Ratio]\": '39156-5' from \"LOINC\" display 'Body mass index (BMI) [Ratio]'\r\ncode \"If you were to spend the rest of your life with your urinary condition just the way it is now, how would you feel about that [IPSS]\": '81090-3' from \"LOINC\" display 'If you were to spend the rest of your life with your urinary condition just the way it is now, how would you feel about that [IPSS]'\r\ncode \"International Prostate Symptom Score [IPSS]\": '80976-4' from \"LOINC\" display 'International Prostate Symptom Score [IPSS]'\r\ncode \"Male\": 'M' from \"AdministrativeGender\" display 'Male'\r\ncode \"virtual\": 'VR' from \"ActCode\" display 'virtual'\r\n\r\nparameter \"Measurement Period\" Interval\u003cDateTime\u003e\r\n\r\ncontext Patient\r\n\r\ndefine \"Denominator\":\r\n  \"Initial Population\"\r\n\r\ndefine \"Has Qualifying BPH Diagnosis\":\r\n  \"Initial BPH Diagnosis Starts Within 6 Months Before the Measurement Period\" is not null\r\n\r\ndefine \"Initial Population\":\r\n  ( \"Patient is Male\" )\r\n    and \"Has Qualifying Encounter\"\r\n    and \"Has Qualifying BPH Diagnosis\"\r\n    and \"Urinary Symptom Score Within 1 Month after Initial BPH Diagnosis\" is not null\r\n    and \"Urinary Symptom Score 6 to 12 Months After Initial BPH Diagnosis\" is not null\r\n\r\ndefine \"Numerator\":\r\n  \"Urinary Symptom Score Improvement Greater Than or Equal To 3\"\r\n\r\ndefine \"Patient is Male\":\r\n  exists [\"Patient Characteristic Sex\": \"Male\"]\r\n\r\ndefine \"SDE Ethnicity\":\r\n  [\"Patient Characteristic Ethnicity\": \"Ethnicity\"]\r\n\r\ndefine \"SDE Payer\":\r\n  [\"Patient Characteristic Payer\": \"Payer Type\"]\r\n\r\ndefine \"SDE Race\":\r\n  [\"Patient Characteristic Race\": \"Race\"]\r\n\r\ndefine \"SDE Sex\":\r\n  [\"Patient Characteristic Sex\": \"ONC Administrative Sex\"]\r\n\r\ndefine \"Urinary Symptom Score Assessment\":\r\n  \"Documented IPSS Assessment Result\"\r\n    union \"AUA Symptom Index and Quality of Life Assessment Result\"\r\n\r\ndefine \"Urinary Symptom Score Change\":\r\n  from\r\n    \"Urinary Symptom Score Within 1 Month after Initial BPH Diagnosis\" FirstUSSAssessment,\r\n    \"Urinary Symptom Score 6 to 12 Months After Initial BPH Diagnosis\" FollowUpUSSAssessment\r\n    let USSChange: ( FirstUSSAssessment.result as Integer ) - ( FollowUpUSSAssessment.result as Integer )\r\n    return USSChange\r\n\r\ndefine \"Urinary Symptom Score Improvement Greater Than or Equal To 3\":\r\n  ( \"Urinary Symptom Score Change\" USSImprovement\r\n      where USSImprovement \u003e= 3\r\n  ) is not null\r\n\r\ndefine \"Documented IPSS Assessment Result\":\r\n  [\"Assessment, Performed\": \"International Prostate Symptom Score [IPSS]\"] IPSSAssessment\r\n    where IPSSAssessment.result is not null\r\n    return {\r\n      assessmentDatetime: Global.EarliestOf ( IPSSAssessment.relevantDatetime, IPSSAssessment.relevantPeriod ),\r\n      result: IPSSAssessment.result as Integer\r\n    }\r\n\r\ndefine \"AUA Symptom Index and Quality of Life Assessment Result\":\r\n  [\"Assessment, Performed\": \"American Urological Association Symptom Index [AUASI]\"] AUASIAssessment\r\n    let LastQOLOnDate: Last([\"Assessment, Performed\": \"If you were to spend the rest of your life with your urinary condition just the way it is now, how would you feel about that [IPSS]\"] QOLAssessment\r\n        where Global.EarliestOf(QOLAssessment.relevantDatetime, QOLAssessment.relevantPeriod) same day as Global.EarliestOf(AUASIAssessment.relevantDatetime, AUASIAssessment.relevantPeriod)\r\n          and QOLAssessment.result is not null\r\n        sort by Global.EarliestOf(relevantDatetime, relevantPeriod)\r\n    )\r\n    where AUASIAssessment.result is not null\r\n      and LastQOLOnDate.result is not null\r\n    return Tuple {\r\n      assessmentDatetime: Global.EarliestOf ( AUASIAssessment.relevantDatetime, AUASIAssessment.relevantPeriod ),\r\n      result: ( AUASIAssessment.result as Integer ) + ( LastQOLOnDate.result as Integer )\r\n    }\r\n\r\ndefine \"Has Qualifying Encounter\":\r\n  exists [\"Encounter, Performed\": \"Office Visit\"] ValidEncounter\r\n    where ValidEncounter.relevantPeriod during day of \"Measurement Period\"\r\n      and ValidEncounter.class !~ \"virtual\"\r\n\r\ndefine \"Morbid Obesity Diagnosis or BMI Exam Result Greater Than or Equal to 40 Starts On or Before Follow Up USS Assessment\":\r\n  exists \"Morbid Obesity Diagnosis On or Before Follow Up USS Assessment\"\r\n    or \"BMI Exam Result Greater Than or Equal To 40 During Measurement Period and On or Before Follow Up USS Assessment\"\r\n\r\ndefine \"Denominator Exclusions\":\r\n  exists ( \"Urinary Retention Diagnosis Starts Within 1 Year After Initial BPH Diagnosis\" )\r\n    or ( \"Has Initial BPH Diagnosis Starts During or Within 30 Days After End of Hospitalization\" is not null )\r\n    or ( \"Morbid Obesity Diagnosis or BMI Exam Result Greater Than or Equal to 40 Starts On or Before Follow Up USS Assessment\" )\r\n\r\ndefine \"Urinary Retention Diagnosis Starts Within 1 Year After Initial BPH Diagnosis\":\r\n  [\"Diagnosis\": \"Urinary retention\"] UrinaryRetention\r\n    with \"Initial BPH Diagnosis Starts Within 6 Months Before the Measurement Period\" InitialBPHDiagnosis\r\n      such that UrinaryRetention.prevalencePeriod starts 1 year or less on or after day of start of InitialBPHDiagnosis.prevalencePeriod\r\n\r\ndefine \"Urinary Symptom Score 6 to 12 Months After Initial BPH Diagnosis\":\r\n  Last(\"Urinary Symptom Score Assessment\" USSAssessment\r\n      with \"Initial BPH Diagnosis Starts Within 6 Months Before the Measurement Period\" InitialBPHDiagnosis\r\n        such that months between start of InitialBPHDiagnosis.prevalencePeriod and USSAssessment.assessmentDatetime in Interval[6, 12]\r\n      sort by assessmentDatetime\r\n  )\r\n\r\ndefine \"Urinary Symptom Score Within 1 Month after Initial BPH Diagnosis\":\r\n  First(\"Urinary Symptom Score Assessment\" USSAssessment\r\n      with \"Initial BPH Diagnosis Starts Within 6 Months Before the Measurement Period\" InitialBPHDiagnosis\r\n        such that USSAssessment.assessmentDatetime 1 month or less on or after day of start of InitialBPHDiagnosis.prevalencePeriod\r\n      sort by assessmentDatetime\r\n  )\r\n\r\ndefine \"Has Initial BPH Diagnosis Starts During or Within 30 Days After End of Hospitalization\":\r\n  \"Initial BPH Diagnosis Starts Within 6 Months Before the Measurement Period\" InitialBPHDiagnosis\r\n    with [\"Encounter, Performed\": \"Hospital Services for Urology\"] InHospitalServices\r\n      such that InitialBPHDiagnosis.prevalencePeriod starts during Interval[start of InHospitalServices.relevantPeriod, end of InHospitalServices.relevantPeriod + 31 days )\r\n\r\ndefine \"Initial BPH Diagnosis Starts Within 6 Months Before the Measurement Period\":\r\n  First([\"Diagnosis\": \"Benign prostatic hyperplasia with lower urinary tract symptoms\"] NewBPHDiagnosis\r\n      where NewBPHDiagnosis.prevalencePeriod starts during Interval[start of \"Measurement Period\" - 6 months, start of \"Measurement Period\"]\r\n      sort by start of prevalencePeriod\r\n  )\r\n\r\ndefine \"Morbid Obesity Diagnosis On or Before Follow Up USS Assessment\":\r\n  [\"Diagnosis\": \"Morbid Obesity\"] MorbidObesity\r\n    with \"Urinary Symptom Score 6 to 12 Months After Initial BPH Diagnosis\" FollowUpUSSAssessment\r\n      such that MorbidObesity.prevalencePeriod overlaps day of \"Measurement Period\"\r\n        and MorbidObesity.prevalencePeriod starts on or before FollowUpUSSAssessment.assessmentDatetime\r\n\r\ndefine \"BMI Exam Result Greater Than or Equal To 40 During Measurement Period and On or Before Follow Up USS Assessment\":\r\n  Exists([\"Physical Exam, Performed\": \"Body mass index (BMI) [Ratio]\"] BMIExam\r\n      with \"Urinary Symptom Score 6 to 12 Months After Initial BPH Diagnosis\" FollowUpUSSAssessment\r\n        such that BMIExam.result \u003e= 40 'kg/m2'\r\n          and Global.EarliestOf(BMIExam.relevantDatetime, BMIExam.relevantPeriod) during day of \"Measurement Period\"\r\n          and Global.EarliestOf(BMIExam.relevantDatetime, BMIExam.relevantPeriod) on or before FollowUpUSSAssessment.assessmentDatetime\r\n      return Global.EarliestOf(BMIExam.relevantDatetime, BMIExam.relevantPeriod)\r\n  )","elm":{"library":{"annotation":[{"translatorOptions":"EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion,DisableMethodInvocation","type":"CqlToElmInfo"},{"type":"Annotation","s":{"r":"296","s":[{"value":["","library UrinarySymptomScoreChangeAfterBenignProstaticHyperplasia version '6.2.000'"]}]}}],"identifier":{"id":"UrinarySymptomScoreChangeAfterBenignProstaticHyperplasia","version":"6.2.000"},"schemaIdentifier":{"id":"urn:hl7-org:elm","version":"r1"},"usings":{"def":[{"localIdentifier":"System","uri":"urn:hl7-org:elm-types:r1"},{"localId":"1","locator":"3:1-3:23","localIdentifier":"QDM","uri":"urn:healthit-gov:qdm:v5_6","version":"5.6","annotation":[{"type":"Annotation","s":{"r":"1","s":[{"value":["","using "]},{"s":[{"value":["QDM"]}]},{"value":[" version ","'5.6'"]}]}}]}]},"includes":{"def":[{"localId":"2","locator":"5:1-5:67","localIdentifier":"Global","path":"MATGlobalCommonFunctionsQDM","version":"8.0.000","annotation":[{"type":"Annotation","s":{"r":"2","s":[{"value":["","include "]},{"s":[{"value":["MATGlobalCommonFunctionsQDM"]}]},{"value":[" version ","'8.0.000'"," called ","Global"]}]}}]}]},"parameters":{"def":[{"localId":"31","locator":"29:1-29:49","name":"Measurement Period","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"31","s":[{"value":["","parameter ","\"Measurement Period\""," "]},{"r":"30","s":[{"value":["Interval\u003c"]},{"r":"29","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}}],"parameterTypeSpecifier":{"localId":"30","locator":"29:32-29:49","type":"IntervalTypeSpecifier","pointType":{"localId":"29","locator":"29:41-29:48","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},"codeSystems":{"def":[{"localId":"3","locator":"7:1-7:51","name":"LOINC","id":"2.16.840.1.113883.6.1","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"3","s":[{"value":["","codesystem ","\"LOINC\"",": ","'urn:oid:2.16.840.1.113883.6.1'"]}]}}]},{"localId":"4","locator":"8:1-8:54","name":"ICD10CM","id":"2.16.840.1.113883.6.90","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"4","s":[{"value":["","codesystem ","\"ICD10CM\"",": ","'urn:oid:2.16.840.1.113883.6.90'"]}]}}]},{"localId":"5","locator":"9:1-9:66","name":"AdministrativeGender","id":"2.16.840.1.113883.5.1","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"5","s":[{"value":["","codesystem ","\"AdministrativeGender\"",": ","'urn:oid:2.16.840.1.113883.5.1'"]}]}}]},{"localId":"6","locator":"10:1-10:53","name":"ActCode","id":"2.16.840.1.113883.5.4","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"6","s":[{"value":["","codesystem ","\"ActCode\"",": ","'urn:oid:2.16.840.1.113883.5.4'"]}]}}]}]},"valueSets":{"def":[{"localId":"7","locator":"12:1-12:58","name":"Ethnicity","id":"2.16.840.1.114222.4.11.837","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"7","s":[{"value":["","valueset ","\"Ethnicity\"",": ","'urn:oid:2.16.840.1.114222.4.11.837'"]}]}}]},{"localId":"8","locator":"13:1-13:81","name":"Hospital Services for Urology","id":"2.16.840.1.113762.1.4.1151.59","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"8","s":[{"value":["","valueset ","\"Hospital Services for Urology\"",": ","'urn:oid:2.16.840.1.113762.1.4.1151.59'"]}]}}]},{"localId":"9","locator":"14:1-14:66","name":"Morbid Obesity","id":"2.16.840.1.113762.1.4.1164.67","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"9","s":[{"value":["","valueset ","\"Morbid Obesity\"",": ","'urn:oid:2.16.840.1.113762.1.4.1164.67'"]}]}}]},{"localId":"10","locator":"15:1-15:75","name":"Office Visit","id":"2.16.840.1.113883.3.464.1003.101.12.1001","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"10","s":[{"value":["","valueset ","\"Office Visit\"",": ","'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1001'"]}]}}]},{"localId":"11","locator":"16:1-16:68","name":"ONC Administrative Sex","id":"2.16.840.1.113762.1.4.1","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"11","s":[{"value":["","valueset ","\"ONC Administrative Sex\"",": ","'urn:oid:2.16.840.1.113762.1.4.1'"]}]}}]},{"localId":"12","locator":"17:1-17:60","name":"Payer Type","id":"2.16.840.1.114222.4.11.3591","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"12","s":[{"value":["","valueset ","\"Payer Type\"",": ","'urn:oid:2.16.840.1.114222.4.11.3591'"]}]}}]},{"localId":"13","locator":"18:1-18:53","name":"Race","id":"2.16.840.1.114222.4.11.836","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"13","s":[{"value":["","valueset ","\"Race\"",": ","'urn:oid:2.16.840.1.114222.4.11.836'"]}]}}]},{"localId":"14","locator":"19:1-19:69","name":"Urinary retention","id":"2.16.840.1.113762.1.4.1164.52","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"14","s":[{"value":["","valueset ","\"Urinary retention\"",": ","'urn:oid:2.16.840.1.113762.1.4.1164.52'"]}]}}]}]},"codes":{"def":[{"localId":"16","locator":"21:1-21:148","name":"American Urological Association Symptom Index [AUASI]","id":"80883-2","display":"American Urological Association Symptom Index [AUASI]","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"16","s":[{"value":["","code ","\"American Urological Association Symptom Index [AUASI]\"",": ","'80883-2'"," from "]},{"r":"15","s":[{"value":["\"LOINC\""]}]},{"value":[" display ","'American Urological Association Symptom Index [AUASI]'"]}]}}],"codeSystem":{"localId":"15","locator":"21:78-21:84","name":"LOINC"}},{"localId":"18","locator":"22:1-22:166","name":"Benign prostatic hyperplasia with lower urinary tract symptoms","id":"N40.1","display":"Benign prostatic hyperplasia with lower urinary tract symptoms","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"18","s":[{"value":["","code ","\"Benign prostatic hyperplasia with lower urinary tract symptoms\"",": ","'N40.1'"," from "]},{"r":"17","s":[{"value":["\"ICD10CM\""]}]},{"value":[" display ","'Benign prostatic hyperplasia with lower urinary tract symptoms'"]}]}}],"codeSystem":{"localId":"17","locator":"22:85-22:93","name":"ICD10CM"}},{"localId":"20","locator":"23:1-23:100","name":"Body mass index (BMI) [Ratio]","id":"39156-5","display":"Body mass index (BMI) [Ratio]","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"20","s":[{"value":["","code ","\"Body mass index (BMI) [Ratio]\"",": ","'39156-5'"," from "]},{"r":"19","s":[{"value":["\"LOINC\""]}]},{"value":[" display ","'Body mass index (BMI) [Ratio]'"]}]}}],"codeSystem":{"localId":"19","locator":"23:54-23:60","name":"LOINC"}},{"localId":"22","locator":"24:1-24:304","name":"If you were to spend the rest of your life with your urinary condition just the way it is now, how would you feel about that [IPSS]","id":"81090-3","display":"If you were to spend the rest of your life with your urinary condition just the way it is now, how would you feel about that [IPSS]","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"22","s":[{"value":["","code ","\"If you were to spend the rest of your life with your urinary condition just the way it is now, how would you feel about that [IPSS]\"",": ","'81090-3'"," from "]},{"r":"21","s":[{"value":["\"LOINC\""]}]},{"value":[" display ","'If you were to spend the rest of your life with your urinary condition just the way it is now, how would you feel about that [IPSS]'"]}]}}],"codeSystem":{"localId":"21","locator":"24:156-24:162","name":"LOINC"}},{"localId":"24","locator":"25:1-25:128","name":"International Prostate Symptom Score [IPSS]","id":"80976-4","display":"International Prostate Symptom Score [IPSS]","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"24","s":[{"value":["","code ","\"International Prostate Symptom Score [IPSS]\"",": ","'80976-4'"," from "]},{"r":"23","s":[{"value":["\"LOINC\""]}]},{"value":[" display ","'International Prostate Symptom Score [IPSS]'"]}]}}],"codeSystem":{"localId":"23","locator":"25:68-25:74","name":"LOINC"}},{"localId":"26","locator":"26:1-26:59","name":"Male","id":"M","display":"Male","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"26","s":[{"value":["","code ","\"Male\"",": ","'M'"," from "]},{"r":"25","s":[{"value":["\"AdministrativeGender\""]}]},{"value":[" display ","'Male'"]}]}}],"codeSystem":{"localId":"25","locator":"26:23-26:44","name":"AdministrativeGender"}},{"localId":"28","locator":"27:1-27:53","name":"virtual","id":"VR","display":"virtual","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"28","s":[{"value":["","code ","\"virtual\"",": ","'VR'"," from "]},{"r":"27","s":[{"value":["\"ActCode\""]}]},{"value":[" display ","'virtual'"]}]}}],"codeSystem":{"localId":"27","locator":"27:27-27:35","name":"ActCode"}}]},"contexts":{"def":[{"locator":"31:1-31:15","name":"Patient"}]},"statements":{"def":[{"locator":"31:1-31:15","name":"Patient","context":"Patient","expression":{"type":"SingletonFrom","operand":{"locator":"31:1-31:15","dataType":"{urn:healthit-gov:qdm:v5_6}Patient","templateId":"Patient","type":"Retrieve"}}},{"localId":"34","locator":"49:1-50:47","name":"Patient is Male","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"34","s":[{"value":["","define ","\"Patient is Male\"",":\n  "]},{"r":"33","s":[{"value":["exists "]},{"r":"32","s":[{"value":["[","\"Patient Characteristic Sex\"",": "]},{"s":[{"value":["\"Male\""]}]},{"value":["]"]}]}]}]}}],"expression":{"localId":"33","locator":"50:3-50:47","type":"Exists","operand":{"localId":"32","locator":"50:10-50:47","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicSex","codeProperty":"code","codeComparator":"~","type":"Retrieve","codes":{"type":"ToList","operand":{"locator":"50:41-50:46","name":"Male","type":"CodeRef"}}}}},{"localId":"50","locator":"102:1-105:43","name":"Has Qualifying Encounter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"50","s":[{"value":["","define ","\"Has Qualifying Encounter\"",":\n  "]},{"r":"49","s":[{"value":["exists "]},{"r":"48","s":[{"s":[{"r":"37","s":[{"r":"36","s":[{"r":"36","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Office Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","ValidEncounter"]}]}]},{"value":["\n    "]},{"r":"47","s":[{"value":["where "]},{"r":"47","s":[{"r":"41","s":[{"r":"39","s":[{"r":"38","s":[{"value":["ValidEncounter"]}]},{"value":["."]},{"r":"39","s":[{"value":["relevantPeriod"]}]}]},{"r":"41","value":[" ","during day of"," "]},{"r":"40","s":[{"value":["\"Measurement Period\""]}]}]},{"value":["\n      and "]},{"r":"46","s":[{"r":"43","s":[{"r":"42","s":[{"value":["ValidEncounter"]}]},{"value":["."]},{"r":"43","s":[{"value":["class"]}]}]},{"value":[" ","!~"," "]},{"r":"44","s":[{"value":["\"virtual\""]}]}]}]}]}]}]}]}}],"expression":{"localId":"49","locator":"103:3-105:43","type":"Exists","operand":{"localId":"48","locator":"103:10-105:43","type":"Query","source":[{"localId":"37","locator":"103:10-103:64","alias":"ValidEncounter","expression":{"localId":"36","locator":"103:10-103:49","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"103:35-103:48","name":"Office Visit","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"47","locator":"104:5-105:43","type":"And","operand":[{"localId":"41","locator":"104:11-104:74","precision":"Day","type":"IncludedIn","operand":[{"localId":"39","locator":"104:11-104:39","path":"relevantPeriod","scope":"ValidEncounter","type":"Property"},{"localId":"40","locator":"104:55-104:74","name":"Measurement Period","type":"ParameterRef"}]},{"localId":"46","locator":"105:11-105:43","type":"Not","operand":{"localId":"45","locator":"105:11-105:43","type":"Equivalent","operand":[{"localId":"43","locator":"105:11-105:30","path":"class","scope":"ValidEncounter","type":"Property"},{"localId":"44","locator":"105:35-105:43","name":"virtual","type":"CodeRef"}]}}]}}}},{"localId":"71","locator":"140:1-144:3","name":"Initial BPH Diagnosis Starts Within 6 Months Before the Measurement Period","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"71","s":[{"value":["","define ","\"Initial BPH Diagnosis Starts Within 6 Months Before the Measurement Period\"",":\n  "]},{"r":"70","s":[{"value":["First","("]},{"r":"69","s":[{"s":[{"r":"54","s":[{"r":"53","s":[{"r":"53","s":[{"value":["[","\"Diagnosis\"",": "]},{"s":[{"value":["\"Benign prostatic hyperplasia with lower urinary tract symptoms\""]}]},{"value":["]"]}]}]},{"value":[" ","NewBPHDiagnosis"]}]}]},{"value":["\n      "]},{"r":"64","s":[{"value":["where "]},{"r":"64","s":[{"r":"56","s":[{"r":"55","s":[{"value":["NewBPHDiagnosis"]}]},{"value":["."]},{"r":"56","s":[{"value":["prevalencePeriod"]}]}]},{"r":"64","value":[" ","starts during"," "]},{"r":"63","s":[{"value":["Interval["]},{"r":"60","s":[{"r":"58","s":[{"value":["start of "]},{"r":"57","s":[{"value":["\"Measurement Period\""]}]}]},{"value":[" - "]},{"r":"59","s":[{"value":["6 ","months"]}]}]},{"value":[", "]},{"r":"62","s":[{"value":["start of "]},{"r":"61","s":[{"value":["\"Measurement Period\""]}]}]},{"value":["]"]}]}]}]},{"value":["\n      "]},{"r":"68","s":[{"value":["sort by "]},{"r":"67","s":[{"r":"66","s":[{"value":["start of "]},{"r":"65","s":[{"value":["prevalencePeriod"]}]}]}]}]}]},{"value":["\n  )"]}]}]}}],"expression":{"localId":"70","locator":"141:3-144:3","type":"First","source":{"localId":"69","locator":"141:9-143:39","type":"Query","source":[{"localId":"54","locator":"141:9-141:103","alias":"NewBPHDiagnosis","expression":{"localId":"53","locator":"141:9-141:87","dataType":"{urn:healthit-gov:qdm:v5_6}Diagnosis","codeProperty":"code","codeComparator":"~","type":"Retrieve","codes":{"type":"ToList","operand":{"locator":"141:23-141:86","name":"Benign prostatic hyperplasia with lower urinary tract symptoms","type":"CodeRef"}}}}],"relationship":[],"where":{"localId":"64","locator":"142:7-142:140","type":"In","operand":[{"locator":"142:46-142:51","type":"Start","operand":{"localId":"56","locator":"142:13-142:44","path":"prevalencePeriod","scope":"NewBPHDiagnosis","type":"Property"}},{"localId":"63","locator":"142:60-142:140","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"60","locator":"142:69-142:108","type":"Subtract","operand":[{"localId":"58","locator":"142:69-142:97","type":"Start","operand":{"localId":"57","locator":"142:78-142:97","name":"Measurement Period","type":"ParameterRef"}},{"localId":"59","locator":"142:101-142:108","value":6,"unit":"months","type":"Quantity"}]},"high":{"localId":"62","locator":"142:111-142:139","type":"Start","operand":{"localId":"61","locator":"142:120-142:139","name":"Measurement Period","type":"ParameterRef"}}}]},"sort":{"localId":"68","locator":"143:7-143:39","by":[{"localId":"67","locator":"143:15-143:39","direction":"asc","type":"ByExpression","expression":{"localId":"66","locator":"143:15-143:39","type":"Start","operand":{"localId":"65","locator":"143:24-143:39","name":"prevalencePeriod","type":"IdentifierRef"}}}]}}}},{"localId":"74","locator":"36:1-37:90","name":"Has Qualifying BPH Diagnosis","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"74","s":[{"value":["","define ","\"Has Qualifying BPH Diagnosis\"",":\n  "]},{"r":"73","s":[{"r":"72","s":[{"value":["\"Initial BPH Diagnosis Starts Within 6 Months Before the Measurement Period\""]}]},{"value":[" is not null"]}]}]}}],"expression":{"localId":"73","locator":"37:3-37:90","type":"Not","operand":{"locator":"37:3-37:90","type":"IsNull","operand":{"localId":"72","locator":"37:3-37:78","name":"Initial BPH Diagnosis Starts Within 6 Months Before the Measurement Period","type":"ExpressionRef"}}}},{"localId":"95","locator":"80:1-86:5","name":"Documented IPSS Assessment Result","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"95","s":[{"value":["","define ","\"Documented IPSS Assessment Result\"",":\n  "]},{"r":"94","s":[{"s":[{"r":"78","s":[{"r":"77","s":[{"r":"77","s":[{"value":["[","\"Assessment, Performed\"",": "]},{"s":[{"value":["\"International Prostate Symptom Score [IPSS]\""]}]},{"value":["]"]}]}]},{"value":[" ","IPSSAssessment"]}]}]},{"value":["\n    "]},{"r":"81","s":[{"value":["where "]},{"r":"81","s":[{"r":"80","s":[{"r":"79","s":[{"value":["IPSSAssessment"]}]},{"value":["."]},{"r":"80","s":[{"value":["result"]}]}]},{"value":[" is not null"]}]}]},{"value":["\n    "]},{"r":"93","s":[{"value":["return "]},{"r":"92","s":[{"value":["{\n      "]},{"s":[{"value":["assessmentDatetime",": "]},{"r":"87","s":[{"r":"82","s":[{"value":["Global"]}]},{"value":["."]},{"r":"87","s":[{"value":["EarliestOf"," ( "]},{"r":"84","s":[{"r":"83","s":[{"value":["IPSSAssessment"]}]},{"value":["."]},{"r":"84","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"86","s":[{"r":"85","s":[{"value":["IPSSAssessment"]}]},{"value":["."]},{"r":"86","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]}]},{"value":[",\n      "]},{"s":[{"value":["result",": "]},{"r":"91","s":[{"r":"89","s":[{"r":"88","s":[{"value":["IPSSAssessment"]}]},{"value":["."]},{"r":"89","s":[{"value":["result"]}]}]},{"value":[" as "]},{"r":"90","s":[{"value":["Integer"]}]}]}]},{"value":["\n    }"]}]}]}]}]}}],"expression":{"localId":"94","locator":"81:3-86:5","type":"Query","source":[{"localId":"78","locator":"81:3-81:89","alias":"IPSSAssessment","expression":{"localId":"77","locator":"81:3-81:74","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveAssessmentPerformed","templateId":"PositiveAssessmentPerformed","codeProperty":"code","codeComparator":"~","type":"Retrieve","codes":{"type":"ToList","operand":{"locator":"81:29-81:73","name":"International Prostate Symptom Score [IPSS]","type":"CodeRef"}}}}],"relationship":[],"where":{"localId":"81","locator":"82:5-82:43","type":"Not","operand":{"locator":"82:11-82:43","type":"IsNull","operand":{"localId":"80","locator":"82:11-82:31","path":"result","scope":"IPSSAssessment","type":"Property"}}},"return":{"localId":"93","locator":"83:5-86:5","expression":{"localId":"92","locator":"83:12-86:5","type":"Tuple","element":[{"name":"assessmentDatetime","value":{"localId":"87","locator":"84:27-84:110","name":"EarliestOf","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"84","locator":"84:47-84:77","path":"relevantDatetime","scope":"IPSSAssessment","type":"Property"},{"localId":"86","locator":"84:80-84:108","path":"relevantPeriod","scope":"IPSSAssessment","type":"Property"}]}},{"name":"result","value":{"localId":"91","locator":"85:15-85:46","strict":false,"type":"As","operand":{"localId":"89","locator":"85:15-85:35","path":"result","scope":"IPSSAssessment","type":"Property"},"asTypeSpecifier":{"localId":"90","locator":"85:40-85:46","name":"{urn:hl7-org:elm-types:r1}Integer","type":"NamedTypeSpecifier"}}}]}}}},{"localId":"152","locator":"88:1-100:5","name":"AUA Symptom Index and Quality of Life Assessment Result","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"152","s":[{"value":["","define ","\"AUA Symptom Index and Quality of Life Assessment Result\"",":\n  "]},{"r":"151","s":[{"s":[{"r":"98","s":[{"r":"97","s":[{"r":"97","s":[{"value":["[","\"Assessment, Performed\"",": "]},{"s":[{"value":["\"American Urological Association Symptom Index [AUASI]\""]}]},{"value":["]"]}]}]},{"value":[" ","AUASIAssessment"]}]}]},{"value":["\n    "]},{"s":[{"value":["let "]},{"r":"126","s":[{"value":["LastQOLOnDate",": "]},{"r":"125","s":[{"value":["Last","("]},{"r":"124","s":[{"s":[{"r":"100","s":[{"r":"99","s":[{"r":"99","s":[{"value":["[","\"Assessment, Performed\"",": "]},{"s":[{"value":["\"If you were to spend the rest of your life with your urinary condition just the way it is now, how would you feel about that [IPSS]\""]}]},{"value":["]"]}]}]},{"value":[" ","QOLAssessment"]}]}]},{"value":["\n        "]},{"r":"117","s":[{"value":["where "]},{"r":"117","s":[{"r":"113","s":[{"r":"106","s":[{"r":"101","s":[{"value":["Global"]}]},{"value":["."]},{"r":"106","s":[{"value":["EarliestOf","("]},{"r":"103","s":[{"r":"102","s":[{"value":["QOLAssessment"]}]},{"value":["."]},{"r":"103","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"105","s":[{"r":"104","s":[{"value":["QOLAssessment"]}]},{"value":["."]},{"r":"105","s":[{"value":["relevantPeriod"]}]}]},{"value":[")"]}]}]},{"r":"113","value":[" ","same day as"," "]},{"r":"112","s":[{"r":"107","s":[{"value":["Global"]}]},{"value":["."]},{"r":"112","s":[{"value":["EarliestOf","("]},{"r":"109","s":[{"r":"108","s":[{"value":["AUASIAssessment"]}]},{"value":["."]},{"r":"109","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"111","s":[{"r":"110","s":[{"value":["AUASIAssessment"]}]},{"value":["."]},{"r":"111","s":[{"value":["relevantPeriod"]}]}]},{"value":[")"]}]}]}]},{"value":["\n          and "]},{"r":"116","s":[{"r":"115","s":[{"r":"114","s":[{"value":["QOLAssessment"]}]},{"value":["."]},{"r":"115","s":[{"value":["result"]}]}]},{"value":[" is not null"]}]}]}]},{"value":["\n        "]},{"r":"123","s":[{"value":["sort by "]},{"r":"122","s":[{"r":"121","s":[{"r":"118","s":[{"value":["Global"]}]},{"value":["."]},{"r":"121","s":[{"value":["EarliestOf","("]},{"r":"119","s":[{"value":["relevantDatetime"]}]},{"value":[", "]},{"r":"120","s":[{"value":["relevantPeriod"]}]},{"value":[")"]}]}]}]}]}]},{"value":["\n    )"]}]}]}]},{"value":["\n    "]},{"r":"133","s":[{"value":["where "]},{"r":"133","s":[{"r":"129","s":[{"r":"128","s":[{"r":"127","s":[{"value":["AUASIAssessment"]}]},{"value":["."]},{"r":"128","s":[{"value":["result"]}]}]},{"value":[" is not null"]}]},{"value":["\n      and "]},{"r":"132","s":[{"r":"131","s":[{"r":"130","s":[{"value":["LastQOLOnDate"]}]},{"value":["."]},{"r":"131","s":[{"value":["result"]}]}]},{"value":[" is not null"]}]}]}]},{"value":["\n    "]},{"r":"150","s":[{"value":["return "]},{"r":"149","s":[{"value":["Tuple {\n      "]},{"s":[{"value":["assessmentDatetime",": "]},{"r":"139","s":[{"r":"134","s":[{"value":["Global"]}]},{"value":["."]},{"r":"139","s":[{"value":["EarliestOf"," ( "]},{"r":"136","s":[{"r":"135","s":[{"value":["AUASIAssessment"]}]},{"value":["."]},{"r":"136","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"138","s":[{"r":"137","s":[{"value":["AUASIAssessment"]}]},{"value":["."]},{"r":"138","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]}]},{"value":[",\n      "]},{"s":[{"value":["result",": "]},{"r":"148","s":[{"r":"143","s":[{"value":["( "]},{"r":"143","s":[{"r":"141","s":[{"r":"140","s":[{"value":["AUASIAssessment"]}]},{"value":["."]},{"r":"141","s":[{"value":["result"]}]}]},{"value":[" as "]},{"r":"142","s":[{"value":["Integer"]}]}]},{"value":[" )"]}]},{"value":[" + "]},{"r":"147","s":[{"value":["( "]},{"r":"147","s":[{"r":"145","s":[{"r":"144","s":[{"value":["LastQOLOnDate"]}]},{"value":["."]},{"r":"145","s":[{"value":["result"]}]}]},{"value":[" as "]},{"r":"146","s":[{"value":["Integer"]}]}]},{"value":[" )"]}]}]}]},{"value":["\n    }"]}]}]}]}]}}],"expression":{"localId":"151","locator":"89:3-100:5","type":"Query","source":[{"localId":"98","locator":"89:3-89:100","alias":"AUASIAssessment","expression":{"localId":"97","locator":"89:3-89:84","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveAssessmentPerformed","templateId":"PositiveAssessmentPerformed","codeProperty":"code","codeComparator":"~","type":"Retrieve","codes":{"type":"ToList","operand":{"locator":"89:29-89:83","name":"American Urological Association Symptom Index [AUASI]","type":"CodeRef"}}}}],"let":[{"localId":"126","locator":"90:9-94:5","identifier":"LastQOLOnDate","expression":{"localId":"125","locator":"90:24-94:5","type":"Last","source":{"localId":"124","locator":"90:29-93:67","type":"Query","source":[{"localId":"100","locator":"90:29-90:202","alias":"QOLAssessment","expression":{"localId":"99","locator":"90:29-90:188","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveAssessmentPerformed","templateId":"PositiveAssessmentPerformed","codeProperty":"code","codeComparator":"~","type":"Retrieve","codes":{"type":"ToList","operand":{"locator":"90:55-90:187","name":"If you were to spend the rest of your life with your urinary condition just the way it is now, how would you feel about that [IPSS]","type":"CodeRef"}}}}],"relationship":[],"where":{"localId":"117","locator":"91:9-92:46","type":"And","operand":[{"localId":"113","locator":"91:15-91:189","precision":"Day","type":"SameAs","operand":[{"localId":"106","locator":"91:15-91:93","name":"EarliestOf","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"103","locator":"91:33-91:62","path":"relevantDatetime","scope":"QOLAssessment","type":"Property"},{"localId":"105","locator":"91:65-91:92","path":"relevantPeriod","scope":"QOLAssessment","type":"Property"}]},{"localId":"112","locator":"91:107-91:189","name":"EarliestOf","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"109","locator":"91:125-91:156","path":"relevantDatetime","scope":"AUASIAssessment","type":"Property"},{"localId":"111","locator":"91:159-91:188","path":"relevantPeriod","scope":"AUASIAssessment","type":"Property"}]}]},{"localId":"116","locator":"92:15-92:46","type":"Not","operand":{"locator":"92:15-92:46","type":"IsNull","operand":{"localId":"115","locator":"92:15-92:34","path":"result","scope":"QOLAssessment","type":"Property"}}}]},"sort":{"localId":"123","locator":"93:9-93:67","by":[{"localId":"122","locator":"93:17-93:67","direction":"asc","type":"ByExpression","expression":{"localId":"121","locator":"93:17-93:67","name":"EarliestOf","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"119","locator":"93:35-93:50","name":"relevantDatetime","type":"IdentifierRef"},{"localId":"120","locator":"93:53-93:66","name":"relevantPeriod","type":"IdentifierRef"}]}}]}}}}],"relationship":[],"where":{"localId":"133","locator":"95:5-96:42","type":"And","operand":[{"localId":"129","locator":"95:11-95:44","type":"Not","operand":{"locator":"95:11-95:44","type":"IsNull","operand":{"localId":"128","locator":"95:11-95:32","path":"result","scope":"AUASIAssessment","type":"Property"}}},{"localId":"132","locator":"96:11-96:42","type":"Not","operand":{"locator":"96:11-96:42","type":"IsNull","operand":{"localId":"131","locator":"96:11-96:30","path":"result","type":"Property","source":{"localId":"130","locator":"96:11-96:23","name":"LastQOLOnDate","type":"QueryLetRef"}}}}]},"return":{"localId":"150","locator":"97:5-100:5","expression":{"localId":"149","locator":"97:12-100:5","type":"Tuple","element":[{"name":"assessmentDatetime","value":{"localId":"139","locator":"98:27-98:112","name":"EarliestOf","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"136","locator":"98:47-98:78","path":"relevantDatetime","scope":"AUASIAssessment","type":"Property"},{"localId":"138","locator":"98:81-98:110","path":"relevantPeriod","scope":"AUASIAssessment","type":"Property"}]}},{"name":"result","value":{"localId":"148","locator":"99:15-99:89","type":"Add","operand":[{"localId":"143","locator":"99:15-99:51","strict":false,"type":"As","operand":{"localId":"141","locator":"99:17-99:38","path":"result","scope":"AUASIAssessment","type":"Property"},"asTypeSpecifier":{"localId":"142","locator":"99:43-99:49","name":"{urn:hl7-org:elm-types:r1}Integer","type":"NamedTypeSpecifier"}},{"localId":"147","locator":"99:55-99:89","strict":false,"type":"As","operand":{"localId":"145","locator":"99:57-99:76","path":"result","type":"Property","source":{"localId":"144","locator":"99:57-99:69","name":"LastQOLOnDate","type":"QueryLetRef"}},"asTypeSpecifier":{"localId":"146","locator":"99:81-99:87","name":"{urn:hl7-org:elm-types:r1}Integer","type":"NamedTypeSpecifier"}}]}}]}}}},{"localId":"155","locator":"64:1-66:67","name":"Urinary Symptom Score Assessment","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"155","s":[{"value":["","define ","\"Urinary Symptom Score Assessment\"",":\n  "]},{"r":"154","s":[{"r":"96","s":[{"value":["\"Documented IPSS Assessment Result\""]}]},{"value":["\n    union "]},{"r":"153","s":[{"value":["\"AUA Symptom Index and Quality of Life Assessment Result\""]}]}]}]}}],"expression":{"localId":"154","locator":"65:3-66:67","type":"Union","operand":[{"localId":"96","locator":"65:3-65:37","name":"Documented IPSS Assessment Result","type":"ExpressionRef"},{"localId":"153","locator":"66:11-66:67","name":"AUA Symptom Index and Quality of Life Assessment Result","type":"ExpressionRef"}]}},{"localId":"173","locator":"128:1-133:3","name":"Urinary Symptom Score Within 1 Month after Initial BPH Diagnosis","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"173","s":[{"value":["","define ","\"Urinary Symptom Score Within 1 Month after Initial BPH Diagnosis\"",":\n  "]},{"r":"172","s":[{"value":["First","("]},{"r":"171","s":[{"s":[{"r":"157","s":[{"r":"156","s":[{"s":[{"value":["\"Urinary Symptom Score Assessment\""]}]}]},{"value":[" ","USSAssessment"]}]}]},{"value":["\n      "]},{"r":"167","s":[{"value":["with "]},{"r":"159","s":[{"r":"158","s":[{"s":[{"value":["\"Initial BPH Diagnosis Starts Within 6 Months Before the Measurement Period\""]}]}]},{"value":[" ","InitialBPHDiagnosis"]}]},{"value":["\n        such that "]},{"r":"166","s":[{"r":"161","s":[{"r":"160","s":[{"value":["USSAssessment"]}]},{"value":["."]},{"r":"161","s":[{"value":["assessmentDatetime"]}]}]},{"value":[" "]},{"r":"166","s":[{"r":"165","s":[{"value":["1 ","month"]}]},{"value":[" or less on or after day of"]}]},{"value":[" "]},{"r":"164","s":[{"value":["start of "]},{"r":"163","s":[{"r":"162","s":[{"value":["InitialBPHDiagnosis"]}]},{"value":["."]},{"r":"163","s":[{"value":["prevalencePeriod"]}]}]}]}]}]},{"value":["\n      "]},{"r":"170","s":[{"value":["sort by "]},{"r":"169","s":[{"r":"168","s":[{"value":["assessmentDatetime"]}]}]}]}]},{"value":["\n  )"]}]}]}}],"expression":{"localId":"172","locator":"129:3-133:3","type":"First","source":{"localId":"171","locator":"129:9-132:32","type":"Query","source":[{"localId":"157","locator":"129:9-129:56","alias":"USSAssessment","expression":{"localId":"156","locator":"129:9-129:42","name":"Urinary Symptom Score Assessment","type":"ExpressionRef"}}],"relationship":[{"localId":"167","locator":"130:7-131:131","alias":"InitialBPHDiagnosis","type":"With","expression":{"localId":"158","locator":"130:12-130:87","name":"Initial BPH Diagnosis Starts Within 6 Months Before the Measurement Period","type":"ExpressionRef"},"suchThat":{"localId":"166","locator":"131:19-131:131","type":"And","operand":[{"locator":"131:52-131:66","precision":"Day","type":"In","operand":[{"localId":"161","locator":"131:19-131:50","path":"assessmentDatetime","scope":"USSAssessment","type":"Property"},{"locator":"131:52-131:66","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"164","locator":"131:87-131:131","type":"Start","operand":{"localId":"163","locator":"131:96-131:131","path":"prevalencePeriod","scope":"InitialBPHDiagnosis","type":"Property"}},"high":{"locator":"131:87-131:131","type":"Add","operand":[{"localId":"164","locator":"131:87-131:131","type":"Start","operand":{"localId":"163","locator":"131:96-131:131","path":"prevalencePeriod","scope":"InitialBPHDiagnosis","type":"Property"}},{"localId":"165","locator":"131:52-131:58","value":1,"unit":"month","type":"Quantity"}]}}]},{"locator":"131:52-131:66","type":"Not","operand":{"locator":"131:52-131:66","type":"IsNull","operand":{"localId":"164","locator":"131:87-131:131","type":"Start","operand":{"localId":"163","locator":"131:96-131:131","path":"prevalencePeriod","scope":"InitialBPHDiagnosis","type":"Property"}}}}]}}],"sort":{"localId":"170","locator":"132:7-132:32","by":[{"localId":"169","locator":"132:15-132:32","direction":"asc","path":"assessmentDatetime","type":"ByColumn"}]}}}},{"localId":"197","locator":"121:1-126:3","name":"Urinary Symptom Score 6 to 12 Months After Initial BPH Diagnosis","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"197","s":[{"value":["","define ","\"Urinary Symptom Score 6 to 12 Months After Initial BPH Diagnosis\"",":\n  "]},{"r":"196","s":[{"value":["Last","("]},{"r":"195","s":[{"s":[{"r":"178","s":[{"r":"177","s":[{"s":[{"value":["\"Urinary Symptom Score Assessment\""]}]}]},{"value":[" ","USSAssessment"]}]}]},{"value":["\n      "]},{"r":"191","s":[{"value":["with "]},{"r":"180","s":[{"r":"179","s":[{"s":[{"value":["\"Initial BPH Diagnosis Starts Within 6 Months Before the Measurement Period\""]}]}]},{"value":[" ","InitialBPHDiagnosis"]}]},{"value":["\n        such that "]},{"r":"190","s":[{"r":"186","s":[{"value":["months between "]},{"r":"183","s":[{"value":["start of "]},{"r":"182","s":[{"r":"181","s":[{"value":["InitialBPHDiagnosis"]}]},{"value":["."]},{"r":"182","s":[{"value":["prevalencePeriod"]}]}]}]},{"value":[" and "]},{"r":"185","s":[{"r":"184","s":[{"value":["USSAssessment"]}]},{"value":["."]},{"r":"185","s":[{"value":["assessmentDatetime"]}]}]}]},{"value":[" in "]},{"r":"189","s":[{"r":"187","value":["Interval[","6",", ","12","]"]}]}]}]},{"value":["\n      "]},{"r":"194","s":[{"value":["sort by "]},{"r":"193","s":[{"r":"192","s":[{"value":["assessmentDatetime"]}]}]}]}]},{"value":["\n  )"]}]}]}}],"expression":{"localId":"196","locator":"122:3-126:3","type":"Last","source":{"localId":"195","locator":"122:8-125:32","type":"Query","source":[{"localId":"178","locator":"122:8-122:55","alias":"USSAssessment","expression":{"localId":"177","locator":"122:8-122:41","name":"Urinary Symptom Score Assessment","type":"ExpressionRef"}}],"relationship":[{"localId":"191","locator":"123:7-124:134","alias":"InitialBPHDiagnosis","type":"With","expression":{"localId":"179","locator":"123:12-123:87","name":"Initial BPH Diagnosis Starts Within 6 Months Before the Measurement Period","type":"ExpressionRef"},"suchThat":{"localId":"190","locator":"124:19-124:134","type":"In","operand":[{"localId":"186","locator":"124:19-124:115","precision":"Month","type":"DurationBetween","operand":[{"localId":"183","locator":"124:34-124:78","type":"Start","operand":{"localId":"182","locator":"124:43-124:78","path":"prevalencePeriod","scope":"InitialBPHDiagnosis","type":"Property"}},{"localId":"185","locator":"124:84-124:115","path":"assessmentDatetime","scope":"USSAssessment","type":"Property"}]},{"localId":"189","locator":"124:120-124:134","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"187","locator":"124:129","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"6","type":"Literal"},"high":{"localId":"188","locator":"124:132-124:133","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"12","type":"Literal"}}]}}],"sort":{"localId":"194","locator":"125:7-125:32","by":[{"localId":"193","locator":"125:15-125:32","direction":"asc","path":"assessmentDatetime","type":"ByColumn"}]}}}},{"localId":"201","locator":"39:1-44:86","name":"Initial Population","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"201","s":[{"value":["","define ","\"Initial Population\"",":\n  "]},{"r":"200","s":[{"r":"176","s":[{"r":"76","s":[{"r":"52","s":[{"r":"35","s":[{"value":["( "]},{"r":"35","s":[{"value":["\"Patient is Male\""]}]},{"value":[" )"]}]},{"value":["\n    and "]},{"r":"51","s":[{"value":["\"Has Qualifying Encounter\""]}]}]},{"value":["\n    and "]},{"r":"75","s":[{"value":["\"Has Qualifying BPH Diagnosis\""]}]}]},{"value":["\n    and "]},{"r":"175","s":[{"r":"174","s":[{"value":["\"Urinary Symptom Score Within 1 Month after Initial BPH Diagnosis\""]}]},{"value":[" is not null"]}]}]},{"value":["\n    and "]},{"r":"199","s":[{"r":"198","s":[{"value":["\"Urinary Symptom Score 6 to 12 Months After Initial BPH Diagnosis\""]}]},{"value":[" is not null"]}]}]}]}}],"expression":{"localId":"200","locator":"40:3-44:86","type":"And","operand":[{"localId":"176","locator":"40:3-43:86","type":"And","operand":[{"localId":"76","locator":"40:3-42:38","type":"And","operand":[{"localId":"52","locator":"40:3-41:34","type":"And","operand":[{"localId":"35","locator":"40:3-40:23","name":"Patient is Male","type":"ExpressionRef"},{"localId":"51","locator":"41:9-41:34","name":"Has Qualifying Encounter","type":"ExpressionRef"}]},{"localId":"75","locator":"42:9-42:38","name":"Has Qualifying BPH Diagnosis","type":"ExpressionRef"}]},{"localId":"175","locator":"43:9-43:86","type":"Not","operand":{"locator":"43:9-43:86","type":"IsNull","operand":{"localId":"174","locator":"43:9-43:74","name":"Urinary Symptom Score Within 1 Month after Initial BPH Diagnosis","type":"ExpressionRef"}}}]},{"localId":"199","locator":"44:9-44:86","type":"Not","operand":{"locator":"44:9-44:86","type":"IsNull","operand":{"localId":"198","locator":"44:9-44:74","name":"Urinary Symptom Score 6 to 12 Months After Initial BPH Diagnosis","type":"ExpressionRef"}}}]}},{"localId":"203","locator":"33:1-34:22","name":"Denominator","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"203","s":[{"value":["","define ","\"Denominator\"",":\n  "]},{"r":"202","s":[{"value":["\"Initial Population\""]}]}]}}],"expression":{"localId":"202","locator":"34:3-34:22","name":"Initial Population","type":"ExpressionRef"}},{"localId":"221","locator":"68:1-73:20","name":"Urinary Symptom Score Change","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"221","s":[{"value":["","define ","\"Urinary Symptom Score Change\"",":\n  "]},{"r":"220","s":[{"s":[{"value":["from\n    "]},{"r":"205","s":[{"r":"204","s":[{"s":[{"value":["\"Urinary Symptom Score Within 1 Month after Initial BPH Diagnosis\""]}]}]},{"value":[" ","FirstUSSAssessment"]}]},{"value":[",\n    "]},{"r":"207","s":[{"r":"206","s":[{"s":[{"value":["\"Urinary Symptom Score 6 to 12 Months After Initial BPH Diagnosis\""]}]}]},{"value":[" ","FollowUpUSSAssessment"]}]}]},{"value":["\n    "]},{"s":[{"value":["let "]},{"r":"217","s":[{"value":["USSChange",": "]},{"r":"216","s":[{"r":"211","s":[{"value":["( "]},{"r":"211","s":[{"r":"209","s":[{"r":"208","s":[{"value":["FirstUSSAssessment"]}]},{"value":["."]},{"r":"209","s":[{"value":["result"]}]}]},{"value":[" as "]},{"r":"210","s":[{"value":["Integer"]}]}]},{"value":[" )"]}]},{"value":[" - "]},{"r":"215","s":[{"value":["( "]},{"r":"215","s":[{"r":"213","s":[{"r":"212","s":[{"value":["FollowUpUSSAssessment"]}]},{"value":["."]},{"r":"213","s":[{"value":["result"]}]}]},{"value":[" as "]},{"r":"214","s":[{"value":["Integer"]}]}]},{"value":[" )"]}]}]}]}]},{"value":["\n    "]},{"r":"219","s":[{"value":["return "]},{"r":"218","s":[{"value":["USSChange"]}]}]}]}]}}],"expression":{"localId":"220","locator":"69:3-73:20","type":"Query","source":[{"localId":"205","locator":"70:5-70:89","alias":"FirstUSSAssessment","expression":{"localId":"204","locator":"70:5-70:70","name":"Urinary Symptom Score Within 1 Month after Initial BPH Diagnosis","type":"ExpressionRef"}},{"localId":"207","locator":"71:5-71:92","alias":"FollowUpUSSAssessment","expression":{"localId":"206","locator":"71:5-71:70","name":"Urinary Symptom Score 6 to 12 Months After Initial BPH Diagnosis","type":"ExpressionRef"}}],"let":[{"localId":"217","locator":"72:9-72:105","identifier":"USSChange","expression":{"localId":"216","locator":"72:20-72:105","type":"Subtract","operand":[{"localId":"211","locator":"72:20-72:59","strict":false,"type":"As","operand":{"localId":"209","locator":"72:22-72:46","path":"result","scope":"FirstUSSAssessment","type":"Property"},"asTypeSpecifier":{"localId":"210","locator":"72:51-72:57","name":"{urn:hl7-org:elm-types:r1}Integer","type":"NamedTypeSpecifier"}},{"localId":"215","locator":"72:63-72:105","strict":false,"type":"As","operand":{"localId":"213","locator":"72:65-72:92","path":"result","scope":"FollowUpUSSAssessment","type":"Property"},"asTypeSpecifier":{"localId":"214","locator":"72:97-72:103","name":"{urn:hl7-org:elm-types:r1}Integer","type":"NamedTypeSpecifier"}}]}}],"relationship":[],"return":{"localId":"219","locator":"73:5-73:20","expression":{"localId":"218","locator":"73:12-73:20","name":"USSChange","type":"QueryLetRef"}}}},{"localId":"229","locator":"75:1-78:15","name":"Urinary Symptom Score Improvement Greater Than or Equal To 3","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"229","s":[{"value":["","define ","\"Urinary Symptom Score Improvement Greater Than or Equal To 3\"",":\n  "]},{"r":"228","s":[{"r":"227","s":[{"value":["( "]},{"r":"227","s":[{"s":[{"r":"223","s":[{"r":"222","s":[{"s":[{"value":["\"Urinary Symptom Score Change\""]}]}]},{"value":[" ","USSImprovement"]}]}]},{"value":["\n      "]},{"r":"226","s":[{"value":["where "]},{"r":"226","s":[{"r":"224","s":[{"value":["USSImprovement"]}]},{"r":"225","value":[" ","\u003e="," ","3"]}]}]}]},{"value":["\n  )"]}]},{"value":[" is not null"]}]}]}}],"expression":{"localId":"228","locator":"76:3-78:15","type":"Not","operand":{"locator":"76:3-78:15","type":"IsNull","operand":{"localId":"227","locator":"76:3-78:3","type":"Query","source":[{"localId":"223","locator":"76:5-76:49","alias":"USSImprovement","expression":{"localId":"222","locator":"76:5-76:34","name":"Urinary Symptom Score Change","type":"ExpressionRef"}}],"relationship":[],"where":{"localId":"226","locator":"77:7-77:31","type":"GreaterOrEqual","operand":[{"localId":"224","locator":"77:13-77:26","name":"USSImprovement","type":"AliasRef"},{"localId":"225","locator":"77:31","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"3","type":"Literal"}]}}}}},{"localId":"231","locator":"46:1-47:64","name":"Numerator","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"231","s":[{"value":["","define ","\"Numerator\"",":\n  "]},{"r":"230","s":[{"value":["\"Urinary Symptom Score Improvement Greater Than or Equal To 3\""]}]}]}}],"expression":{"localId":"230","locator":"47:3-47:64","name":"Urinary Symptom Score Improvement Greater Than or Equal To 3","type":"ExpressionRef"}},{"localId":"233","locator":"52:1-53:51","name":"SDE Ethnicity","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"233","s":[{"value":["","define ","\"SDE Ethnicity\"",":\n  "]},{"r":"232","s":[{"value":["[","\"Patient Characteristic Ethnicity\"",": "]},{"s":[{"value":["\"Ethnicity\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"232","locator":"53:3-53:51","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicEthnicity","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"53:40-53:50","name":"Ethnicity","preserve":true,"type":"ValueSetRef"}}},{"localId":"235","locator":"55:1-56:48","name":"SDE Payer","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"235","s":[{"value":["","define ","\"SDE Payer\"",":\n  "]},{"r":"234","s":[{"value":["[","\"Patient Characteristic Payer\"",": "]},{"s":[{"value":["\"Payer Type\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"234","locator":"56:3-56:48","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicPayer","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"56:36-56:47","name":"Payer Type","preserve":true,"type":"ValueSetRef"}}},{"localId":"237","locator":"58:1-59:41","name":"SDE Race","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"237","s":[{"value":["","define ","\"SDE Race\"",":\n  "]},{"r":"236","s":[{"value":["[","\"Patient Characteristic Race\"",": "]},{"s":[{"value":["\"Race\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"236","locator":"59:3-59:41","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicRace","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"59:35-59:40","name":"Race","preserve":true,"type":"ValueSetRef"}}},{"localId":"239","locator":"61:1-62:58","name":"SDE Sex","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"239","s":[{"value":["","define ","\"SDE Sex\"",":\n  "]},{"r":"238","s":[{"value":["[","\"Patient Characteristic Sex\"",": "]},{"s":[{"value":["\"ONC Administrative Sex\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"238","locator":"62:3-62:58","dataType":"{urn:healthit-gov:qdm:v5_6}PatientCharacteristicSex","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"62:34-62:57","name":"ONC Administrative Sex","preserve":true,"type":"ValueSetRef"}}},{"localId":"256","locator":"146:1-150:103","name":"Morbid Obesity Diagnosis On or Before Follow Up USS Assessment","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"256","s":[{"value":["","define ","\"Morbid Obesity Diagnosis On or Before Follow Up USS Assessment\"",":\n  "]},{"r":"255","s":[{"s":[{"r":"241","s":[{"r":"240","s":[{"r":"240","s":[{"value":["[","\"Diagnosis\"",": "]},{"s":[{"value":["\"Morbid Obesity\""]}]},{"value":["]"]}]}]},{"value":[" ","MorbidObesity"]}]}]},{"value":["\n    "]},{"r":"254","s":[{"value":["with "]},{"r":"243","s":[{"r":"242","s":[{"s":[{"value":["\"Urinary Symptom Score 6 to 12 Months After Initial BPH Diagnosis\""]}]}]},{"value":[" ","FollowUpUSSAssessment"]}]},{"value":["\n      such that "]},{"r":"253","s":[{"r":"247","s":[{"r":"245","s":[{"r":"244","s":[{"value":["MorbidObesity"]}]},{"value":["."]},{"r":"245","s":[{"value":["prevalencePeriod"]}]}]},{"r":"247","value":[" ","overlaps day of"," "]},{"r":"246","s":[{"value":["\"Measurement Period\""]}]}]},{"value":["\n        and "]},{"r":"252","s":[{"r":"249","s":[{"r":"248","s":[{"value":["MorbidObesity"]}]},{"value":["."]},{"r":"249","s":[{"value":["prevalencePeriod"]}]}]},{"r":"252","value":[" ","starts on or before"," "]},{"r":"251","s":[{"r":"250","s":[{"value":["FollowUpUSSAssessment"]}]},{"value":["."]},{"r":"251","s":[{"value":["assessmentDatetime"]}]}]}]}]}]}]}]}}],"expression":{"localId":"255","locator":"147:3-150:103","type":"Query","source":[{"localId":"241","locator":"147:3-147:47","alias":"MorbidObesity","expression":{"localId":"240","locator":"147:3-147:33","dataType":"{urn:healthit-gov:qdm:v5_6}Diagnosis","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"147:17-147:32","name":"Morbid Obesity","preserve":true,"type":"ValueSetRef"}}}],"relationship":[{"localId":"254","locator":"148:5-150:103","alias":"FollowUpUSSAssessment","type":"With","expression":{"localId":"242","locator":"148:10-148:75","name":"Urinary Symptom Score 6 to 12 Months After Initial BPH Diagnosis","type":"ExpressionRef"},"suchThat":{"localId":"253","locator":"149:17-150:103","type":"And","operand":[{"localId":"247","locator":"149:17-149:83","precision":"Day","type":"Overlaps","operand":[{"localId":"245","locator":"149:17-149:46","path":"prevalencePeriod","scope":"MorbidObesity","type":"Property"},{"localId":"246","locator":"149:64-149:83","name":"Measurement Period","type":"ParameterRef"}]},{"localId":"252","locator":"150:13-150:103","type":"SameOrBefore","operand":[{"locator":"150:44-150:49","type":"Start","operand":{"localId":"249","locator":"150:13-150:42","path":"prevalencePeriod","scope":"MorbidObesity","type":"Property"}},{"localId":"251","locator":"150:64-150:103","path":"assessmentDatetime","scope":"FollowUpUSSAssessment","type":"Property"}]}]}}]}},{"localId":"296","locator":"152:1-159:3","name":"BMI Exam Result Greater Than or Equal To 40 During Measurement Period and On or Before Follow Up USS Assessment","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"296","s":[{"value":["","define ","\"BMI Exam Result Greater Than or Equal To 40 During Measurement Period and On or Before Follow Up USS Assessment\"",":\n  "]},{"r":"295","s":[{"value":["Exists","("]},{"r":"294","s":[{"s":[{"r":"260","s":[{"r":"259","s":[{"r":"259","s":[{"value":["[","\"Physical Exam, Performed\"",": "]},{"s":[{"value":["\"Body mass index (BMI) [Ratio]\""]}]},{"value":["]"]}]}]},{"value":[" ","BMIExam"]}]}]},{"value":["\n      "]},{"r":"286","s":[{"value":["with "]},{"r":"262","s":[{"r":"261","s":[{"s":[{"value":["\"Urinary Symptom Score 6 to 12 Months After Initial BPH Diagnosis\""]}]}]},{"value":[" ","FollowUpUSSAssessment"]}]},{"value":["\n        such that "]},{"r":"285","s":[{"r":"275","s":[{"r":"266","s":[{"r":"264","s":[{"r":"263","s":[{"value":["BMIExam"]}]},{"value":["."]},{"r":"264","s":[{"value":["result"]}]}]},{"value":[" ","\u003e="," "]},{"r":"265","s":[{"value":["40 ","'kg/m2'"]}]}]},{"value":["\n          and "]},{"r":"274","s":[{"r":"272","s":[{"r":"267","s":[{"value":["Global"]}]},{"value":["."]},{"r":"272","s":[{"value":["EarliestOf","("]},{"r":"269","s":[{"r":"268","s":[{"value":["BMIExam"]}]},{"value":["."]},{"r":"269","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"271","s":[{"r":"270","s":[{"value":["BMIExam"]}]},{"value":["."]},{"r":"271","s":[{"value":["relevantPeriod"]}]}]},{"value":[")"]}]}]},{"r":"274","value":[" ","during day of"," "]},{"r":"273","s":[{"value":["\"Measurement Period\""]}]}]}]},{"value":["\n          and "]},{"r":"284","s":[{"r":"281","s":[{"r":"276","s":[{"value":["Global"]}]},{"value":["."]},{"r":"281","s":[{"value":["EarliestOf","("]},{"r":"278","s":[{"r":"277","s":[{"value":["BMIExam"]}]},{"value":["."]},{"r":"278","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"280","s":[{"r":"279","s":[{"value":["BMIExam"]}]},{"value":["."]},{"r":"280","s":[{"value":["relevantPeriod"]}]}]},{"value":[")"]}]}]},{"r":"284","value":[" ","on or before"," "]},{"r":"283","s":[{"r":"282","s":[{"value":["FollowUpUSSAssessment"]}]},{"value":["."]},{"r":"283","s":[{"value":["assessmentDatetime"]}]}]}]}]}]},{"value":["\n      "]},{"r":"293","s":[{"value":["return "]},{"r":"292","s":[{"r":"287","s":[{"value":["Global"]}]},{"value":["."]},{"r":"292","s":[{"value":["EarliestOf","("]},{"r":"289","s":[{"r":"288","s":[{"value":["BMIExam"]}]},{"value":["."]},{"r":"289","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"291","s":[{"r":"290","s":[{"value":["BMIExam"]}]},{"value":["."]},{"r":"291","s":[{"value":["relevantPeriod"]}]}]},{"value":[")"]}]}]}]}]},{"value":["\n  )"]}]}]}}],"expression":{"localId":"295","locator":"153:3-159:3","type":"Exists","operand":{"localId":"294","locator":"153:10-158:80","type":"Query","source":[{"localId":"260","locator":"153:10-153:78","alias":"BMIExam","expression":{"localId":"259","locator":"153:10-153:70","dataType":"{urn:healthit-gov:qdm:v5_6}PositivePhysicalExamPerformed","templateId":"PositivePhysicalExamPerformed","codeProperty":"code","codeComparator":"~","type":"Retrieve","codes":{"type":"ToList","operand":{"locator":"153:39-153:69","name":"Body mass index (BMI) [Ratio]","type":"CodeRef"}}}}],"relationship":[{"localId":"286","locator":"154:7-157:135","alias":"FollowUpUSSAssessment","type":"With","expression":{"localId":"261","locator":"154:12-154:77","name":"Urinary Symptom Score 6 to 12 Months After Initial BPH Diagnosis","type":"ExpressionRef"},"suchThat":{"localId":"285","locator":"155:19-157:135","type":"And","operand":[{"localId":"275","locator":"155:19-156:116","type":"And","operand":[{"localId":"266","locator":"155:19-155:46","type":"GreaterOrEqual","operand":[{"asType":"{urn:hl7-org:elm-types:r1}Quantity","type":"As","operand":{"localId":"264","locator":"155:19-155:32","path":"result","scope":"BMIExam","type":"Property"}},{"localId":"265","locator":"155:37-155:46","value":40,"unit":"kg/m2","type":"Quantity"}]},{"localId":"274","locator":"156:15-156:116","precision":"Day","type":"In","operand":[{"localId":"272","locator":"156:15-156:81","name":"EarliestOf","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"269","locator":"156:33-156:56","path":"relevantDatetime","scope":"BMIExam","type":"Property"},{"localId":"271","locator":"156:59-156:80","path":"relevantPeriod","scope":"BMIExam","type":"Property"}]},{"localId":"273","locator":"156:97-156:116","name":"Measurement Period","type":"ParameterRef"}]}]},{"localId":"284","locator":"157:15-157:135","type":"SameOrBefore","operand":[{"localId":"281","locator":"157:15-157:81","name":"EarliestOf","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"278","locator":"157:33-157:56","path":"relevantDatetime","scope":"BMIExam","type":"Property"},{"localId":"280","locator":"157:59-157:80","path":"relevantPeriod","scope":"BMIExam","type":"Property"}]},{"localId":"283","locator":"157:96-157:135","path":"assessmentDatetime","scope":"FollowUpUSSAssessment","type":"Property"}]}]}}],"return":{"localId":"293","locator":"158:7-158:80","expression":{"localId":"292","locator":"158:14-158:80","name":"EarliestOf","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"289","locator":"158:32-158:55","path":"relevantDatetime","scope":"BMIExam","type":"Property"},{"localId":"291","locator":"158:58-158:79","path":"relevantPeriod","scope":"BMIExam","type":"Property"}]}}}}},{"localId":"299","locator":"107:1-109:120","name":"Morbid Obesity Diagnosis or BMI Exam Result Greater Than or Equal to 40 Starts On or Before Follow Up USS Assessment","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"299","s":[{"value":["","define ","\"Morbid Obesity Diagnosis or BMI Exam Result Greater Than or Equal to 40 Starts On or Before Follow Up USS Assessment\"",":\n  "]},{"r":"298","s":[{"r":"258","s":[{"value":["exists "]},{"r":"257","s":[{"value":["\"Morbid Obesity Diagnosis On or Before Follow Up USS Assessment\""]}]}]},{"value":["\n    or "]},{"r":"297","s":[{"value":["\"BMI Exam Result Greater Than or Equal To 40 During Measurement Period and On or Before Follow Up USS Assessment\""]}]}]}]}}],"expression":{"localId":"298","locator":"108:3-109:120","type":"Or","operand":[{"localId":"258","locator":"108:3-108:73","type":"Exists","operand":{"localId":"257","locator":"108:10-108:73","name":"Morbid Obesity Diagnosis On or Before Follow Up USS Assessment","type":"ExpressionRef"}},{"localId":"297","locator":"109:8-109:120","name":"BMI Exam Result Greater Than or Equal To 40 During Measurement Period and On or Before Follow Up USS Assessment","type":"ExpressionRef"}]}},{"localId":"313","locator":"116:1-119:136","name":"Urinary Retention Diagnosis Starts Within 1 Year After Initial BPH Diagnosis","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"313","s":[{"value":["","define ","\"Urinary Retention Diagnosis Starts Within 1 Year After Initial BPH Diagnosis\"",":\n  "]},{"r":"312","s":[{"s":[{"r":"301","s":[{"r":"300","s":[{"r":"300","s":[{"value":["[","\"Diagnosis\"",": "]},{"s":[{"value":["\"Urinary retention\""]}]},{"value":["]"]}]}]},{"value":[" ","UrinaryRetention"]}]}]},{"value":["\n    "]},{"r":"311","s":[{"value":["with "]},{"r":"303","s":[{"r":"302","s":[{"s":[{"value":["\"Initial BPH Diagnosis Starts Within 6 Months Before the Measurement Period\""]}]}]},{"value":[" ","InitialBPHDiagnosis"]}]},{"value":["\n      such that "]},{"r":"310","s":[{"r":"305","s":[{"r":"304","s":[{"value":["UrinaryRetention"]}]},{"value":["."]},{"r":"305","s":[{"value":["prevalencePeriod"]}]}]},{"value":[" "]},{"r":"310","s":[{"value":["starts "]},{"r":"309","s":[{"value":["1 ","year"]}]},{"value":[" or less on or after day of"]}]},{"value":[" "]},{"r":"308","s":[{"value":["start of "]},{"r":"307","s":[{"r":"306","s":[{"value":["InitialBPHDiagnosis"]}]},{"value":["."]},{"r":"307","s":[{"value":["prevalencePeriod"]}]}]}]}]}]}]}]}}],"expression":{"localId":"312","locator":"117:3-119:136","type":"Query","source":[{"localId":"301","locator":"117:3-117:53","alias":"UrinaryRetention","expression":{"localId":"300","locator":"117:3-117:36","dataType":"{urn:healthit-gov:qdm:v5_6}Diagnosis","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"117:17-117:35","name":"Urinary retention","preserve":true,"type":"ValueSetRef"}}}],"relationship":[{"localId":"311","locator":"118:5-119:136","alias":"InitialBPHDiagnosis","type":"With","expression":{"localId":"302","locator":"118:10-118:85","name":"Initial BPH Diagnosis Starts Within 6 Months Before the Measurement Period","type":"ExpressionRef"},"suchThat":{"localId":"310","locator":"119:17-119:136","type":"And","operand":[{"locator":"119:58-119:71","precision":"Day","type":"In","operand":[{"locator":"119:51-119:56","type":"Start","operand":{"localId":"305","locator":"119:17-119:49","path":"prevalencePeriod","scope":"UrinaryRetention","type":"Property"}},{"locator":"119:58-119:71","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"308","locator":"119:92-119:136","type":"Start","operand":{"localId":"307","locator":"119:101-119:136","path":"prevalencePeriod","scope":"InitialBPHDiagnosis","type":"Property"}},"high":{"locator":"119:92-119:136","type":"Add","operand":[{"localId":"308","locator":"119:92-119:136","type":"Start","operand":{"localId":"307","locator":"119:101-119:136","path":"prevalencePeriod","scope":"InitialBPHDiagnosis","type":"Property"}},{"localId":"309","locator":"119:58-119:63","value":1,"unit":"year","type":"Quantity"}]}}]},{"locator":"119:58-119:71","type":"Not","operand":{"locator":"119:58-119:71","type":"IsNull","operand":{"localId":"308","locator":"119:92-119:136","type":"Start","operand":{"localId":"307","locator":"119:101-119:136","path":"prevalencePeriod","scope":"InitialBPHDiagnosis","type":"Property"}}}}]}}]}},{"localId":"334","locator":"135:1-138:172","name":"Has Initial BPH Diagnosis Starts During or Within 30 Days After End of Hospitalization","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"334","s":[{"value":["","define ","\"Has Initial BPH Diagnosis Starts During or Within 30 Days After End of Hospitalization\"",":\n  "]},{"r":"333","s":[{"s":[{"r":"317","s":[{"r":"316","s":[{"s":[{"value":["\"Initial BPH Diagnosis Starts Within 6 Months Before the Measurement Period\""]}]}]},{"value":[" ","InitialBPHDiagnosis"]}]}]},{"value":["\n    "]},{"r":"332","s":[{"value":["with "]},{"r":"319","s":[{"r":"318","s":[{"r":"318","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Hospital Services for Urology\""]}]},{"value":["]"]}]}]},{"value":[" ","InHospitalServices"]}]},{"value":["\n      such that "]},{"r":"331","s":[{"r":"321","s":[{"r":"320","s":[{"value":["InitialBPHDiagnosis"]}]},{"value":["."]},{"r":"321","s":[{"value":["prevalencePeriod"]}]}]},{"r":"331","value":[" ","starts during"," "]},{"r":"330","s":[{"value":["Interval["]},{"r":"324","s":[{"value":["start of "]},{"r":"323","s":[{"r":"322","s":[{"value":["InHospitalServices"]}]},{"value":["."]},{"r":"323","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"329","s":[{"r":"327","s":[{"value":["end of "]},{"r":"326","s":[{"r":"325","s":[{"value":["InHospitalServices"]}]},{"value":["."]},{"r":"326","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[" + "]},{"r":"328","s":[{"value":["31 ","days"]}]}]},{"value":[" )"]}]}]}]}]}]}}],"expression":{"localId":"333","locator":"136:3-138:172","type":"Query","source":[{"localId":"317","locator":"136:3-136:98","alias":"InitialBPHDiagnosis","expression":{"localId":"316","locator":"136:3-136:78","name":"Initial BPH Diagnosis Starts Within 6 Months Before the Measurement Period","type":"ExpressionRef"}}],"relationship":[{"localId":"332","locator":"137:5-138:172","alias":"InHospitalServices","type":"With","expression":{"localId":"318","locator":"137:10-137:66","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"137:35-137:65","name":"Hospital Services for Urology","preserve":true,"type":"ValueSetRef"}},"suchThat":{"localId":"331","locator":"138:17-138:172","type":"In","operand":[{"locator":"138:54-138:59","type":"Start","operand":{"localId":"321","locator":"138:17-138:52","path":"prevalencePeriod","scope":"InitialBPHDiagnosis","type":"Property"}},{"localId":"330","locator":"138:68-138:172","lowClosed":true,"highClosed":false,"type":"Interval","low":{"localId":"324","locator":"138:77-138:118","type":"Start","operand":{"localId":"323","locator":"138:86-138:118","path":"relevantPeriod","scope":"InHospitalServices","type":"Property"}},"high":{"localId":"329","locator":"138:121-138:170","type":"Add","operand":[{"localId":"327","locator":"138:121-138:160","type":"End","operand":{"localId":"326","locator":"138:128-138:160","path":"relevantPeriod","scope":"InHospitalServices","type":"Property"}},{"localId":"328","locator":"138:164-138:170","value":31,"unit":"days","type":"Quantity"}]}}]}}]}},{"localId":"340","locator":"111:1-114:129","name":"Denominator Exclusions","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"340","s":[{"value":["","define ","\"Denominator Exclusions\"",":\n  "]},{"r":"339","s":[{"r":"337","s":[{"r":"315","s":[{"value":["exists "]},{"r":"314","s":[{"value":["( "]},{"r":"314","s":[{"value":["\"Urinary Retention Diagnosis Starts Within 1 Year After Initial BPH Diagnosis\""]}]},{"value":[" )"]}]}]},{"value":["\n    or "]},{"r":"336","s":[{"value":["( "]},{"r":"336","s":[{"r":"335","s":[{"value":["\"Has Initial BPH Diagnosis Starts During or Within 30 Days After End of Hospitalization\""]}]},{"value":[" is not null"]}]},{"value":[" )"]}]}]},{"value":["\n    or "]},{"r":"338","s":[{"value":["( "]},{"r":"338","s":[{"value":["\"Morbid Obesity Diagnosis or BMI Exam Result Greater Than or Equal to 40 Starts On or Before Follow Up USS Assessment\""]}]},{"value":[" )"]}]}]}]}}],"expression":{"localId":"339","locator":"112:3-114:129","type":"Or","operand":[{"localId":"337","locator":"112:3-113:111","type":"Or","operand":[{"localId":"315","locator":"112:3-112:91","type":"Exists","operand":{"localId":"314","locator":"112:10-112:91","name":"Urinary Retention Diagnosis Starts Within 1 Year After Initial BPH Diagnosis","type":"ExpressionRef"}},{"localId":"336","locator":"113:8-113:111","type":"Not","operand":{"locator":"113:10-113:109","type":"IsNull","operand":{"localId":"335","locator":"113:10-113:97","name":"Has Initial BPH Diagnosis Starts During or Within 30 Days After End of Hospitalization","type":"ExpressionRef"}}}]},{"localId":"338","locator":"114:8-114:129","name":"Morbid Obesity Diagnosis or BMI Exam Result Greater Than or Equal to 40 Starts On or Before Follow Up USS Assessment","type":"ExpressionRef"}]}}]}}},"elm_annotations":{"statements":[{"children":[{"children":[{"children":[{"text":"define \"Patient is Male\":\n  "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Sex\": "}]},{"children":[{"children":[{"text":"\"Male\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"32"}],"node_type":"Exists","ref_id":"33"}],"ref_id":"34"}],"define_name":"Patient is Male"},{"children":[{"children":[{"children":[{"text":"define \"Has Qualifying Encounter\":\n  "}]},{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Office Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"36"}],"node_type":"Retrieve","ref_id":"36"},{"children":[{"text":" ValidEncounter"}]}],"ref_id":"37"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"ValidEncounter"}]}],"ref_id":"38"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"39"}],"node_type":"Property","ref_id":"39"},{"children":[{"text":" during day of "}],"node_type":"IncludedIn","ref_id":"41"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"40"}],"node_type":"IncludedIn","ref_id":"41"},{"children":[{"text":"\n      and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"ValidEncounter"}]}],"ref_id":"42"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"class"}]}],"node_type":"Property","ref_id":"43"}],"node_type":"Property","ref_id":"43"},{"children":[{"text":" !~ "}]},{"children":[{"children":[{"text":"\"virtual\""}]}],"node_type":"CodeRef","ref_id":"44"}],"node_type":"Not","ref_id":"46"}],"ref_id":"47"}],"ref_id":"47"}],"node_type":"Query","ref_id":"48"}],"node_type":"Exists","ref_id":"49"}],"ref_id":"50"}],"define_name":"Has Qualifying Encounter"},{"children":[{"children":[{"children":[{"text":"define \"Initial BPH Diagnosis Starts Within 6 Months Before the Measurement Period\":\n  "}]},{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Diagnosis\": "}]},{"children":[{"children":[{"text":"\"Benign prostatic hyperplasia with lower urinary tract symptoms\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"53"}],"node_type":"Retrieve","ref_id":"53"},{"children":[{"text":" NewBPHDiagnosis"}]}],"ref_id":"54"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"NewBPHDiagnosis"}]}],"ref_id":"55"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"prevalencePeriod"}]}],"node_type":"Property","ref_id":"56"}],"node_type":"Property","ref_id":"56"},{"children":[{"text":" starts during "}],"ref_id":"64"},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"57"}],"node_type":"Start","ref_id":"58"},{"children":[{"text":" - "}]},{"children":[{"children":[{"text":"6 months"}]}],"node_type":"Quantity","ref_id":"59"}],"ref_id":"60"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"61"}],"ref_id":"62"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"63"}],"ref_id":"64"}],"ref_id":"64"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"prevalencePeriod"}]}],"node_type":"IdentifierRef","ref_id":"65"}],"node_type":"Start","ref_id":"66"}],"ref_id":"67"}],"ref_id":"68"}],"ref_id":"69"},{"children":[{"text":"\n  )"}]}],"node_type":"First","ref_id":"70"}],"ref_id":"71"}],"define_name":"Initial BPH Diagnosis Starts Within 6 Months Before the Measurement Period"},{"children":[{"children":[{"children":[{"text":"define \"Has Qualifying BPH Diagnosis\":\n  "}]},{"children":[{"children":[{"children":[{"text":"\"Initial BPH Diagnosis Starts Within 6 Months Before the Measurement Period\""}]}],"node_type":"ExpressionRef","ref_id":"72"},{"children":[{"text":" is not null"}]}],"node_type":"Not","ref_id":"73"}],"ref_id":"74"}],"define_name":"Has Qualifying BPH Diagnosis"},{"children":[{"children":[{"children":[{"text":"define \"Documented IPSS Assessment Result\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Assessment, Performed\": "}]},{"children":[{"children":[{"text":"\"International Prostate Symptom Score [IPSS]\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"77"}],"node_type":"Retrieve","ref_id":"77"},{"children":[{"text":" IPSSAssessment"}]}],"ref_id":"78"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"IPSSAssessment"}]}],"ref_id":"79"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"result"}]}],"node_type":"Property","ref_id":"80"}],"node_type":"Property","ref_id":"80"},{"children":[{"text":" is not null"}]}],"ref_id":"81"}],"ref_id":"81"},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"{\n      "}]},{"children":[{"children":[{"text":"assessmentDatetime: "}]},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"82"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"EarliestOf ( "}]},{"children":[{"children":[{"children":[{"text":"IPSSAssessment"}]}],"ref_id":"83"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"84"}],"node_type":"Property","ref_id":"84"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"IPSSAssessment"}]}],"ref_id":"85"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"86"}],"node_type":"Property","ref_id":"86"},{"children":[{"text":" )"}]}],"ref_id":"87"}],"ref_id":"87"}]},{"children":[{"text":",\n      "}]},{"children":[{"children":[{"text":"result: "}]},{"children":[{"children":[{"children":[{"children":[{"text":"IPSSAssessment"}]}],"ref_id":"88"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"result"}]}],"node_type":"Property","ref_id":"89"}],"node_type":"Property","ref_id":"89"},{"children":[{"text":" as "}]},{"children":[{"children":[{"text":"Integer"}]}],"ref_id":"90"}],"ref_id":"91"}]},{"children":[{"text":"\n    }"}]}],"node_type":"Tuple","ref_id":"92"}],"ref_id":"93"}],"node_type":"Query","ref_id":"94"}],"ref_id":"95"}],"define_name":"Documented IPSS Assessment Result"},{"children":[{"children":[{"children":[{"text":"define \"AUA Symptom Index and Quality of Life Assessment Result\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Assessment, Performed\": "}]},{"children":[{"children":[{"text":"\"American Urological Association Symptom Index [AUASI]\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"97"}],"node_type":"Retrieve","ref_id":"97"},{"children":[{"text":" AUASIAssessment"}]}],"ref_id":"98"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"LastQOLOnDate: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Assessment, Performed\": "}]},{"children":[{"children":[{"text":"\"If you were to spend the rest of your life with your urinary condition just the way it is now, how would you feel about that [IPSS]\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"99"}],"node_type":"Retrieve","ref_id":"99"},{"children":[{"text":" QOLAssessment"}]}],"ref_id":"100"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"101"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"EarliestOf("}]},{"children":[{"children":[{"children":[{"text":"QOLAssessment"}]}],"ref_id":"102"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"103"}],"node_type":"Property","ref_id":"103"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"QOLAssessment"}]}],"ref_id":"104"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"105"}],"node_type":"Property","ref_id":"105"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"106"}],"node_type":"FunctionRef","ref_id":"106"},{"children":[{"text":" same day as "}],"node_type":"SameAs","ref_id":"113"},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"107"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"EarliestOf("}]},{"children":[{"children":[{"children":[{"text":"AUASIAssessment"}]}],"ref_id":"108"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"109"}],"node_type":"Property","ref_id":"109"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"AUASIAssessment"}]}],"ref_id":"110"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"111"}],"node_type":"Property","ref_id":"111"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"112"}],"node_type":"FunctionRef","ref_id":"112"}],"node_type":"SameAs","ref_id":"113"},{"children":[{"text":"\n          and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"QOLAssessment"}]}],"ref_id":"114"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"result"}]}],"node_type":"Property","ref_id":"115"}],"node_type":"Property","ref_id":"115"},{"children":[{"text":" is not null"}]}],"node_type":"Not","ref_id":"116"}],"ref_id":"117"}],"ref_id":"117"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"118"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"EarliestOf("}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"IdentifierRef","ref_id":"119"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"120"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"121"}],"node_type":"FunctionRef","ref_id":"121"}],"ref_id":"122"}],"ref_id":"123"}],"ref_id":"124"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"125"}],"ref_id":"126"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"AUASIAssessment"}]}],"ref_id":"127"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"result"}]}],"node_type":"Property","ref_id":"128"}],"node_type":"Property","ref_id":"128"},{"children":[{"text":" is not null"}]}],"node_type":"Not","ref_id":"129"},{"children":[{"text":"\n      and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastQOLOnDate"}]}],"ref_id":"130"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"result"}]}],"node_type":"Property","ref_id":"131"}],"node_type":"Property","ref_id":"131"},{"children":[{"text":" is not null"}]}],"node_type":"Not","ref_id":"132"}],"ref_id":"133"}],"ref_id":"133"},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Tuple {\n      "}]},{"children":[{"children":[{"text":"assessmentDatetime: "}]},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"134"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"EarliestOf ( "}]},{"children":[{"children":[{"children":[{"text":"AUASIAssessment"}]}],"ref_id":"135"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"136"}],"node_type":"Property","ref_id":"136"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"AUASIAssessment"}]}],"ref_id":"137"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"138"}],"node_type":"Property","ref_id":"138"},{"children":[{"text":" )"}]}],"ref_id":"139"}],"ref_id":"139"}]},{"children":[{"text":",\n      "}]},{"children":[{"children":[{"text":"result: "}]},{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"text":"AUASIAssessment"}]}],"ref_id":"140"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"result"}]}],"node_type":"Property","ref_id":"141"}],"node_type":"Property","ref_id":"141"},{"children":[{"text":" as "}]},{"children":[{"children":[{"text":"Integer"}]}],"ref_id":"142"}],"node_type":"As","ref_id":"143"},{"children":[{"text":" )"}]}],"node_type":"As","ref_id":"143"},{"children":[{"text":" + "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastQOLOnDate"}]}],"ref_id":"144"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"result"}]}],"node_type":"Property","ref_id":"145"}],"node_type":"Property","ref_id":"145"},{"children":[{"text":" as "}]},{"children":[{"children":[{"text":"Integer"}]}],"ref_id":"146"}],"node_type":"As","ref_id":"147"},{"children":[{"text":" )"}]}],"node_type":"As","ref_id":"147"}],"ref_id":"148"}]},{"children":[{"text":"\n    }"}]}],"node_type":"Tuple","ref_id":"149"}],"ref_id":"150"}],"node_type":"Query","ref_id":"151"}],"ref_id":"152"}],"define_name":"AUA Symptom Index and Quality of Life Assessment Result"},{"children":[{"children":[{"children":[{"text":"define \"Urinary Symptom Score Assessment\":\n  "}]},{"children":[{"children":[{"children":[{"text":"\"Documented IPSS Assessment Result\""}]}],"node_type":"ExpressionRef","ref_id":"96"},{"children":[{"text":"\n    union "}]},{"children":[{"children":[{"text":"\"AUA Symptom Index and Quality of Life Assessment Result\""}]}],"node_type":"ExpressionRef","ref_id":"153"}],"node_type":"Union","ref_id":"154"}],"ref_id":"155"}],"define_name":"Urinary Symptom Score Assessment"},{"children":[{"children":[{"children":[{"text":"define \"Urinary Symptom Score Within 1 Month after Initial BPH Diagnosis\":\n  "}]},{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Urinary Symptom Score Assessment\""}]}]}],"node_type":"ExpressionRef","ref_id":"156"},{"children":[{"text":" USSAssessment"}]}],"ref_id":"157"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"Initial BPH Diagnosis Starts Within 6 Months Before the Measurement Period\""}]}]}],"node_type":"ExpressionRef","ref_id":"158"},{"children":[{"text":" InitialBPHDiagnosis"}]}],"ref_id":"159"},{"children":[{"text":"\n        such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"USSAssessment"}]}],"ref_id":"160"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"assessmentDatetime"}]}],"node_type":"Property","ref_id":"161"}],"node_type":"Property","ref_id":"161"},{"children":[{"text":" "}]},{"children":[{"children":[{"children":[{"text":"1 month"}]}],"node_type":"Quantity","ref_id":"165"},{"children":[{"text":" or less on or after day of"}]}],"node_type":"And","ref_id":"166"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"InitialBPHDiagnosis"}]}],"ref_id":"162"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"prevalencePeriod"}]}],"node_type":"Property","ref_id":"163"}],"node_type":"Property","ref_id":"163"}],"node_type":"Start","ref_id":"164"}],"node_type":"And","ref_id":"166"}],"ref_id":"167"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"assessmentDatetime"}]}],"ref_id":"168"}],"ref_id":"169"}],"ref_id":"170"}],"ref_id":"171"},{"children":[{"text":"\n  )"}]}],"node_type":"First","ref_id":"172"}],"ref_id":"173"}],"define_name":"Urinary Symptom Score Within 1 Month after Initial BPH Diagnosis"},{"children":[{"children":[{"children":[{"text":"define \"Urinary Symptom Score 6 to 12 Months After Initial BPH Diagnosis\":\n  "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Urinary Symptom Score Assessment\""}]}]}],"node_type":"ExpressionRef","ref_id":"177"},{"children":[{"text":" USSAssessment"}]}],"ref_id":"178"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"Initial BPH Diagnosis Starts Within 6 Months Before the Measurement Period\""}]}]}],"node_type":"ExpressionRef","ref_id":"179"},{"children":[{"text":" InitialBPHDiagnosis"}]}],"ref_id":"180"},{"children":[{"text":"\n        such that "}]},{"children":[{"children":[{"children":[{"text":"months between "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"InitialBPHDiagnosis"}]}],"ref_id":"181"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"prevalencePeriod"}]}],"node_type":"Property","ref_id":"182"}],"node_type":"Property","ref_id":"182"}],"node_type":"Start","ref_id":"183"},{"children":[{"text":" and "}]},{"children":[{"children":[{"children":[{"text":"USSAssessment"}]}],"ref_id":"184"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"assessmentDatetime"}]}],"node_type":"Property","ref_id":"185"}],"node_type":"Property","ref_id":"185"}],"node_type":"DurationBetween","ref_id":"186"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"Interval[6, 12]"}],"ref_id":"187"}],"node_type":"Interval","ref_id":"189"}],"node_type":"In","ref_id":"190"}],"ref_id":"191"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"assessmentDatetime"}]}],"ref_id":"192"}],"ref_id":"193"}],"ref_id":"194"}],"ref_id":"195"},{"children":[{"text":"\n  )"}]}],"node_type":"Last","ref_id":"196"}],"ref_id":"197"}],"define_name":"Urinary Symptom Score 6 to 12 Months After Initial BPH Diagnosis"},{"children":[{"children":[{"children":[{"text":"define \"Initial Population\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"\"Patient is Male\""}]}],"node_type":"ExpressionRef","ref_id":"35"},{"children":[{"text":" )"}]}],"node_type":"ExpressionRef","ref_id":"35"},{"children":[{"text":"\n    and "}]},{"children":[{"children":[{"text":"\"Has Qualifying Encounter\""}]}],"node_type":"ExpressionRef","ref_id":"51"}],"node_type":"And","ref_id":"52"},{"children":[{"text":"\n    and "}]},{"children":[{"children":[{"text":"\"Has Qualifying BPH Diagnosis\""}]}],"node_type":"ExpressionRef","ref_id":"75"}],"node_type":"And","ref_id":"76"},{"children":[{"text":"\n    and "}]},{"children":[{"children":[{"children":[{"text":"\"Urinary Symptom Score Within 1 Month after Initial BPH Diagnosis\""}]}],"node_type":"ExpressionRef","ref_id":"174"},{"children":[{"text":" is not null"}]}],"node_type":"Not","ref_id":"175"}],"node_type":"And","ref_id":"176"},{"children":[{"text":"\n    and "}]},{"children":[{"children":[{"children":[{"text":"\"Urinary Symptom Score 6 to 12 Months After Initial BPH Diagnosis\""}]}],"node_type":"ExpressionRef","ref_id":"198"},{"children":[{"text":" is not null"}]}],"node_type":"Not","ref_id":"199"}],"node_type":"And","ref_id":"200"}],"ref_id":"201"}],"define_name":"Initial Population"},{"children":[{"children":[{"children":[{"text":"define \"Denominator\":\n  "}]},{"children":[{"children":[{"text":"\"Initial Population\""}]}],"node_type":"ExpressionRef","ref_id":"202"}],"ref_id":"203"}],"define_name":"Denominator"},{"children":[{"children":[{"children":[{"text":"define \"Urinary Symptom Score Change\":\n  "}]},{"children":[{"children":[{"children":[{"text":"from\n    "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"Urinary Symptom Score Within 1 Month after Initial BPH Diagnosis\""}]}]}],"node_type":"ExpressionRef","ref_id":"204"},{"children":[{"text":" FirstUSSAssessment"}]}],"ref_id":"205"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"Urinary Symptom Score 6 to 12 Months After Initial BPH Diagnosis\""}]}]}],"node_type":"ExpressionRef","ref_id":"206"},{"children":[{"text":" FollowUpUSSAssessment"}]}],"ref_id":"207"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"USSChange: "}]},{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"text":"FirstUSSAssessment"}]}],"ref_id":"208"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"result"}]}],"node_type":"Property","ref_id":"209"}],"node_type":"Property","ref_id":"209"},{"children":[{"text":" as "}]},{"children":[{"children":[{"text":"Integer"}]}],"ref_id":"210"}],"node_type":"As","ref_id":"211"},{"children":[{"text":" )"}]}],"node_type":"As","ref_id":"211"},{"children":[{"text":" - "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"text":"FollowUpUSSAssessment"}]}],"ref_id":"212"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"result"}]}],"node_type":"Property","ref_id":"213"}],"node_type":"Property","ref_id":"213"},{"children":[{"text":" as "}]},{"children":[{"children":[{"text":"Integer"}]}],"ref_id":"214"}],"node_type":"As","ref_id":"215"},{"children":[{"text":" )"}]}],"node_type":"As","ref_id":"215"}],"node_type":"Subtract","ref_id":"216"}],"ref_id":"217"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"USSChange"}]}],"node_type":"QueryLetRef","ref_id":"218"}],"ref_id":"219"}],"node_type":"Query","ref_id":"220"}],"ref_id":"221"}],"define_name":"Urinary Symptom Score Change"},{"children":[{"children":[{"children":[{"text":"define \"Urinary Symptom Score Improvement Greater Than or Equal To 3\":\n  "}]},{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Urinary Symptom Score Change\""}]}]}],"node_type":"ExpressionRef","ref_id":"222"},{"children":[{"text":" USSImprovement"}]}],"ref_id":"223"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"text":"USSImprovement"}]}],"node_type":"AliasRef","ref_id":"224"},{"children":[{"text":" \u003e= 3"}],"node_type":"Literal","ref_id":"225"}],"ref_id":"226"}],"ref_id":"226"}],"node_type":"Query","ref_id":"227"},{"children":[{"text":"\n  )"}]}],"node_type":"Query","ref_id":"227"},{"children":[{"text":" is not null"}]}],"node_type":"Not","ref_id":"228"}],"ref_id":"229"}],"define_name":"Urinary Symptom Score Improvement Greater Than or Equal To 3"},{"children":[{"children":[{"children":[{"text":"define \"Numerator\":\n  "}]},{"children":[{"children":[{"text":"\"Urinary Symptom Score Improvement Greater Than or Equal To 3\""}]}],"node_type":"ExpressionRef","ref_id":"230"}],"ref_id":"231"}],"define_name":"Numerator"},{"children":[{"children":[{"children":[{"text":"define \"SDE Ethnicity\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Ethnicity\": "}]},{"children":[{"children":[{"text":"\"Ethnicity\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"232"}],"ref_id":"233"}],"define_name":"SDE Ethnicity"},{"children":[{"children":[{"children":[{"text":"define \"SDE Payer\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Payer\": "}]},{"children":[{"children":[{"text":"\"Payer Type\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"234"}],"ref_id":"235"}],"define_name":"SDE Payer"},{"children":[{"children":[{"children":[{"text":"define \"SDE Race\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Race\": "}]},{"children":[{"children":[{"text":"\"Race\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"236"}],"ref_id":"237"}],"define_name":"SDE Race"},{"children":[{"children":[{"children":[{"text":"define \"SDE Sex\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Sex\": "}]},{"children":[{"children":[{"text":"\"ONC Administrative Sex\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"238"}],"ref_id":"239"}],"define_name":"SDE Sex"},{"children":[{"children":[{"children":[{"text":"define \"Morbid Obesity Diagnosis On or Before Follow Up USS Assessment\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Diagnosis\": "}]},{"children":[{"children":[{"text":"\"Morbid Obesity\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"240"}],"node_type":"Retrieve","ref_id":"240"},{"children":[{"text":" MorbidObesity"}]}],"ref_id":"241"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"Urinary Symptom Score 6 to 12 Months After Initial BPH Diagnosis\""}]}]}],"node_type":"ExpressionRef","ref_id":"242"},{"children":[{"text":" FollowUpUSSAssessment"}]}],"ref_id":"243"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"MorbidObesity"}]}],"ref_id":"244"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"prevalencePeriod"}]}],"node_type":"Property","ref_id":"245"}],"node_type":"Property","ref_id":"245"},{"children":[{"text":" overlaps day of "}],"node_type":"Overlaps","ref_id":"247"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"246"}],"node_type":"Overlaps","ref_id":"247"},{"children":[{"text":"\n        and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"MorbidObesity"}]}],"ref_id":"248"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"prevalencePeriod"}]}],"node_type":"Property","ref_id":"249"}],"node_type":"Property","ref_id":"249"},{"children":[{"text":" starts on or before "}],"node_type":"SameOrBefore","ref_id":"252"},{"children":[{"children":[{"children":[{"text":"FollowUpUSSAssessment"}]}],"ref_id":"250"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"assessmentDatetime"}]}],"node_type":"Property","ref_id":"251"}],"node_type":"Property","ref_id":"251"}],"node_type":"SameOrBefore","ref_id":"252"}],"node_type":"And","ref_id":"253"}],"ref_id":"254"}],"node_type":"Query","ref_id":"255"}],"ref_id":"256"}],"define_name":"Morbid Obesity Diagnosis On or Before Follow Up USS Assessment"},{"children":[{"children":[{"children":[{"text":"define \"BMI Exam Result Greater Than or Equal To 40 During Measurement Period and On or Before Follow Up USS Assessment\":\n  "}]},{"children":[{"children":[{"text":"Exists("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Physical Exam, Performed\": "}]},{"children":[{"children":[{"text":"\"Body mass index (BMI) [Ratio]\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"259"}],"node_type":"Retrieve","ref_id":"259"},{"children":[{"text":" BMIExam"}]}],"ref_id":"260"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"Urinary Symptom Score 6 to 12 Months After Initial BPH Diagnosis\""}]}]}],"node_type":"ExpressionRef","ref_id":"261"},{"children":[{"text":" FollowUpUSSAssessment"}]}],"ref_id":"262"},{"children":[{"text":"\n        such that "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"BMIExam"}]}],"ref_id":"263"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"result"}]}],"node_type":"Property","ref_id":"264"}],"node_type":"Property","ref_id":"264"},{"children":[{"text":" \u003e= "}]},{"children":[{"children":[{"text":"40 'kg/m2'"}]}],"node_type":"Quantity","ref_id":"265"}],"node_type":"GreaterOrEqual","ref_id":"266"},{"children":[{"text":"\n          and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"267"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"EarliestOf("}]},{"children":[{"children":[{"children":[{"text":"BMIExam"}]}],"ref_id":"268"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"269"}],"node_type":"Property","ref_id":"269"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"BMIExam"}]}],"ref_id":"270"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"271"}],"node_type":"Property","ref_id":"271"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"272"}],"node_type":"FunctionRef","ref_id":"272"},{"children":[{"text":" during day of "}],"node_type":"In","ref_id":"274"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"273"}],"node_type":"In","ref_id":"274"}],"node_type":"And","ref_id":"275"},{"children":[{"text":"\n          and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"276"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"EarliestOf("}]},{"children":[{"children":[{"children":[{"text":"BMIExam"}]}],"ref_id":"277"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"278"}],"node_type":"Property","ref_id":"278"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"BMIExam"}]}],"ref_id":"279"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"280"}],"node_type":"Property","ref_id":"280"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"281"}],"node_type":"FunctionRef","ref_id":"281"},{"children":[{"text":" on or before "}],"node_type":"SameOrBefore","ref_id":"284"},{"children":[{"children":[{"children":[{"text":"FollowUpUSSAssessment"}]}],"ref_id":"282"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"assessmentDatetime"}]}],"node_type":"Property","ref_id":"283"}],"node_type":"Property","ref_id":"283"}],"node_type":"SameOrBefore","ref_id":"284"}],"node_type":"And","ref_id":"285"}],"ref_id":"286"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"287"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"EarliestOf("}]},{"children":[{"children":[{"children":[{"text":"BMIExam"}]}],"ref_id":"288"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"289"}],"node_type":"Property","ref_id":"289"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"BMIExam"}]}],"ref_id":"290"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"291"}],"node_type":"Property","ref_id":"291"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"292"}],"node_type":"FunctionRef","ref_id":"292"}],"ref_id":"293"}],"node_type":"Query","ref_id":"294"},{"children":[{"text":"\n  )"}]}],"node_type":"Exists","ref_id":"295"}],"ref_id":"296"}],"define_name":"BMI Exam Result Greater Than or Equal To 40 During Measurement Period and On or Before Follow Up USS Assessment"},{"children":[{"children":[{"children":[{"text":"define \"Morbid Obesity Diagnosis or BMI Exam Result Greater Than or Equal to 40 Starts On or Before Follow Up USS Assessment\":\n  "}]},{"children":[{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"\"Morbid Obesity Diagnosis On or Before Follow Up USS Assessment\""}]}],"node_type":"ExpressionRef","ref_id":"257"}],"node_type":"Exists","ref_id":"258"},{"children":[{"text":"\n    or "}]},{"children":[{"children":[{"text":"\"BMI Exam Result Greater Than or Equal To 40 During Measurement Period and On or Before Follow Up USS Assessment\""}]}],"node_type":"ExpressionRef","ref_id":"297"}],"node_type":"Or","ref_id":"298"}],"ref_id":"299"}],"define_name":"Morbid Obesity Diagnosis or BMI Exam Result Greater Than or Equal to 40 Starts On or Before Follow Up USS Assessment"},{"children":[{"children":[{"children":[{"text":"define \"Urinary Retention Diagnosis Starts Within 1 Year After Initial BPH Diagnosis\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Diagnosis\": "}]},{"children":[{"children":[{"text":"\"Urinary retention\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"300"}],"node_type":"Retrieve","ref_id":"300"},{"children":[{"text":" UrinaryRetention"}]}],"ref_id":"301"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"Initial BPH Diagnosis Starts Within 6 Months Before the Measurement Period\""}]}]}],"node_type":"ExpressionRef","ref_id":"302"},{"children":[{"text":" InitialBPHDiagnosis"}]}],"ref_id":"303"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"UrinaryRetention"}]}],"ref_id":"304"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"prevalencePeriod"}]}],"node_type":"Property","ref_id":"305"}],"node_type":"Property","ref_id":"305"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"starts "}]},{"children":[{"children":[{"text":"1 year"}]}],"node_type":"Quantity","ref_id":"309"},{"children":[{"text":" or less on or after day of"}]}],"node_type":"And","ref_id":"310"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"InitialBPHDiagnosis"}]}],"ref_id":"306"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"prevalencePeriod"}]}],"node_type":"Property","ref_id":"307"}],"node_type":"Property","ref_id":"307"}],"node_type":"Start","ref_id":"308"}],"node_type":"And","ref_id":"310"}],"ref_id":"311"}],"node_type":"Query","ref_id":"312"}],"ref_id":"313"}],"define_name":"Urinary Retention Diagnosis Starts Within 1 Year After Initial BPH Diagnosis"},{"children":[{"children":[{"children":[{"text":"define \"Has Initial BPH Diagnosis Starts During or Within 30 Days After End of Hospitalization\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Initial BPH Diagnosis Starts Within 6 Months Before the Measurement Period\""}]}]}],"node_type":"ExpressionRef","ref_id":"316"},{"children":[{"text":" InitialBPHDiagnosis"}]}],"ref_id":"317"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Hospital Services for Urology\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"318"}],"node_type":"Retrieve","ref_id":"318"},{"children":[{"text":" InHospitalServices"}]}],"ref_id":"319"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"InitialBPHDiagnosis"}]}],"ref_id":"320"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"prevalencePeriod"}]}],"node_type":"Property","ref_id":"321"}],"node_type":"Property","ref_id":"321"},{"children":[{"text":" starts during "}],"node_type":"In","ref_id":"331"},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"InHospitalServices"}]}],"ref_id":"322"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"323"}],"node_type":"Property","ref_id":"323"}],"ref_id":"324"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"InHospitalServices"}]}],"ref_id":"325"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"326"}],"node_type":"Property","ref_id":"326"}],"node_type":"End","ref_id":"327"},{"children":[{"text":" + "}]},{"children":[{"children":[{"text":"31 days"}]}],"node_type":"Quantity","ref_id":"328"}],"ref_id":"329"},{"children":[{"text":" )"}]}],"node_type":"Interval","ref_id":"330"}],"node_type":"In","ref_id":"331"}],"ref_id":"332"}],"node_type":"Query","ref_id":"333"}],"ref_id":"334"}],"define_name":"Has Initial BPH Diagnosis Starts During or Within 30 Days After End of Hospitalization"},{"children":[{"children":[{"children":[{"text":"define \"Denominator Exclusions\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"text":"exists "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"\"Urinary Retention Diagnosis Starts Within 1 Year After Initial BPH Diagnosis\""}]}],"node_type":"ExpressionRef","ref_id":"314"},{"children":[{"text":" )"}]}],"node_type":"ExpressionRef","ref_id":"314"}],"node_type":"Exists","ref_id":"315"},{"children":[{"text":"\n    or "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"text":"\"Has Initial BPH Diagnosis Starts During or Within 30 Days After End of Hospitalization\""}]}],"node_type":"ExpressionRef","ref_id":"335"},{"children":[{"text":" is not null"}]}],"node_type":"Not","ref_id":"336"},{"children":[{"text":" )"}]}],"node_type":"Not","ref_id":"336"}],"node_type":"Or","ref_id":"337"},{"children":[{"text":"\n    or "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"\"Morbid Obesity Diagnosis or BMI Exam Result Greater Than or Equal to 40 Starts On or Before Follow Up USS Assessment\""}]}],"node_type":"ExpressionRef","ref_id":"338"},{"children":[{"text":" )"}]}],"node_type":"ExpressionRef","ref_id":"338"}],"node_type":"Or","ref_id":"339"}],"ref_id":"340"}],"define_name":"Denominator Exclusions"}],"identifier":{"id":"UrinarySymptomScoreChangeAfterBenignProstaticHyperplasia","version":"6.2.000"}},"is_main_library":true,"is_top_level":true,"library_name":"UrinarySymptomScoreChangeAfterBenignProstaticHyperplasia","library_version":"6.2.000","statement_dependencies":[{"_id":"68923fa0a83e15671c2e53cf","statement_name":"Patient"},{"_id":"68923fa0a83e15671c2e53d0","statement_name":"Patient is Male"},{"_id":"68923fa0a83e15671c2e53d1","statement_name":"Has Qualifying Encounter"},{"_id":"68923fa0a83e15671c2e53d2","statement_name":"Initial BPH Diagnosis Starts Within 6 Months Before the Measurement Period"},{"_id":"68923fa0a83e15671c2e53d3","statement_name":"Has Qualifying BPH Diagnosis","statement_references":[{"_id":"68923fa4a83e15671c2e54f6","hqmf_id":null,"library_name":"UrinarySymptomScoreChangeAfterBenignProstaticHyperplasia","statement_name":"Initial BPH Diagnosis Starts Within 6 Months Before the Measurement Period"}]},{"_id":"68923fa0a83e15671c2e53d4","statement_name":"Documented IPSS Assessment Result","statement_references":[{"_id":"68923fa4a83e15671c2e54f7","hqmf_id":null,"library_name":"MATGlobalCommonFunctionsQDM","statement_name":"EarliestOf"}]},{"_id":"68923fa0a83e15671c2e53d5","statement_name":"AUA Symptom Index and Quality of Life Assessment Result","statement_references":[{"_id":"68923fa4a83e15671c2e54f8","hqmf_id":null,"library_name":"MATGlobalCommonFunctionsQDM","statement_name":"EarliestOf"}]},{"_id":"68923fa0a83e15671c2e53d6","statement_name":"Urinary Symptom Score Assessment","statement_references":[{"_id":"68923fa0a83e15671c2e53bb","hqmf_id":null,"library_name":"UrinarySymptomScoreChangeAfterBenignProstaticHyperplasia","statement_name":"Documented IPSS Assessment Result"},{"_id":"68923fa0a83e15671c2e53bc","hqmf_id":null,"library_name":"UrinarySymptomScoreChangeAfterBenignProstaticHyperplasia","statement_name":"AUA Symptom Index and Quality of Life Assessment Result"}]},{"_id":"68923fa0a83e15671c2e53d7","statement_name":"Urinary Symptom Score Within 1 Month after Initial BPH Diagnosis","statement_references":[{"_id":"68923fa0a83e15671c2e53bd","hqmf_id":null,"library_name":"UrinarySymptomScoreChangeAfterBenignProstaticHyperplasia","statement_name":"Urinary Symptom Score Assessment"},{"_id":"68923fa0a83e15671c2e53be","hqmf_id":null,"library_name":"UrinarySymptomScoreChangeAfterBenignProstaticHyperplasia","statement_name":"Initial BPH Diagnosis Starts Within 6 Months Before the Measurement Period"}]},{"_id":"68923fa0a83e15671c2e53d8","statement_name":"Urinary Symptom Score 6 to 12 Months After Initial BPH Diagnosis","statement_references":[{"_id":"68923fa0a83e15671c2e53bf","hqmf_id":null,"library_name":"UrinarySymptomScoreChangeAfterBenignProstaticHyperplasia","statement_name":"Urinary Symptom Score Assessment"},{"_id":"68923fa0a83e15671c2e53c0","hqmf_id":null,"library_name":"UrinarySymptomScoreChangeAfterBenignProstaticHyperplasia","statement_name":"Initial BPH Diagnosis Starts Within 6 Months Before the Measurement Period"}]},{"_id":"68923fa0a83e15671c2e53d9","statement_name":"Initial Population","statement_references":[{"_id":"68923fa0a83e15671c2e53c1","hqmf_id":null,"library_name":"UrinarySymptomScoreChangeAfterBenignProstaticHyperplasia","statement_name":"Patient is Male"},{"_id":"68923fa0a83e15671c2e53c2","hqmf_id":null,"library_name":"UrinarySymptomScoreChangeAfterBenignProstaticHyperplasia","statement_name":"Has Qualifying Encounter"},{"_id":"68923fa0a83e15671c2e53c3","hqmf_id":null,"library_name":"UrinarySymptomScoreChangeAfterBenignProstaticHyperplasia","statement_name":"Has Qualifying BPH Diagnosis"},{"_id":"68923fa0a83e15671c2e53c4","hqmf_id":null,"library_name":"UrinarySymptomScoreChangeAfterBenignProstaticHyperplasia","statement_name":"Urinary Symptom Score Within 1 Month after Initial BPH Diagnosis"},{"_id":"68923fa0a83e15671c2e53c5","hqmf_id":null,"library_name":"UrinarySymptomScoreChangeAfterBenignProstaticHyperplasia","statement_name":"Urinary Symptom Score 6 to 12 Months After Initial BPH Diagnosis"}]},{"_id":"68923fa0a83e15671c2e53da","statement_name":"Denominator","statement_references":[{"_id":"68923fa4a83e15671c2e54f9","hqmf_id":null,"library_name":"UrinarySymptomScoreChangeAfterBenignProstaticHyperplasia","statement_name":"Initial Population"}]},{"_id":"68923fa0a83e15671c2e53db","statement_name":"Urinary Symptom Score Change","statement_references":[{"_id":"68923fa0a83e15671c2e53c6","hqmf_id":null,"library_name":"UrinarySymptomScoreChangeAfterBenignProstaticHyperplasia","statement_name":"Urinary Symptom Score Within 1 Month after Initial BPH Diagnosis"},{"_id":"68923fa0a83e15671c2e53c7","hqmf_id":null,"library_name":"UrinarySymptomScoreChangeAfterBenignProstaticHyperplasia","statement_name":"Urinary Symptom Score 6 to 12 Months After Initial BPH Diagnosis"}]},{"_id":"68923fa0a83e15671c2e53dc","statement_name":"Urinary Symptom Score Improvement Greater Than or Equal To 3","statement_references":[{"_id":"68923fa4a83e15671c2e54fa","hqmf_id":null,"library_name":"UrinarySymptomScoreChangeAfterBenignProstaticHyperplasia","statement_name":"Urinary Symptom Score Change"}]},{"_id":"68923fa0a83e15671c2e53dd","statement_name":"Numerator","statement_references":[{"_id":"68923fa4a83e15671c2e54fb","hqmf_id":null,"library_name":"UrinarySymptomScoreChangeAfterBenignProstaticHyperplasia","statement_name":"Urinary Symptom Score Improvement Greater Than or Equal To 3"}]},{"_id":"68923fa0a83e15671c2e53de","statement_name":"SDE Ethnicity"},{"_id":"68923fa0a83e15671c2e53df","statement_name":"SDE Payer"},{"_id":"68923fa0a83e15671c2e53e0","statement_name":"SDE Race"},{"_id":"68923fa0a83e15671c2e53e1","statement_name":"SDE Sex"},{"_id":"68923fa0a83e15671c2e53e2","statement_name":"Morbid Obesity Diagnosis On or Before Follow Up USS Assessment","statement_references":[{"_id":"68923fa4a83e15671c2e54fc","hqmf_id":null,"library_name":"UrinarySymptomScoreChangeAfterBenignProstaticHyperplasia","statement_name":"Urinary Symptom Score 6 to 12 Months After Initial BPH Diagnosis"}]},{"_id":"68923fa0a83e15671c2e53e3","statement_name":"BMI Exam Result Greater Than or Equal To 40 During Measurement Period and On or Before Follow Up USS Assessment","statement_references":[{"_id":"68923fa0a83e15671c2e53c8","hqmf_id":null,"library_name":"UrinarySymptomScoreChangeAfterBenignProstaticHyperplasia","statement_name":"Urinary Symptom Score 6 to 12 Months After Initial BPH Diagnosis"},{"_id":"68923fa0a83e15671c2e53c9","hqmf_id":null,"library_name":"MATGlobalCommonFunctionsQDM","statement_name":"EarliestOf"}]},{"_id":"68923fa0a83e15671c2e53e4","statement_name":"Morbid Obesity Diagnosis or BMI Exam Result Greater Than or Equal to 40 Starts On or Before Follow Up USS Assessment","statement_references":[{"_id":"68923fa0a83e15671c2e53ca","hqmf_id":null,"library_name":"UrinarySymptomScoreChangeAfterBenignProstaticHyperplasia","statement_name":"Morbid Obesity Diagnosis On or Before Follow Up USS Assessment"},{"_id":"68923fa0a83e15671c2e53cb","hqmf_id":null,"library_name":"UrinarySymptomScoreChangeAfterBenignProstaticHyperplasia","statement_name":"BMI Exam Result Greater Than or Equal To 40 During Measurement Period and On or Before Follow Up USS Assessment"}]},{"_id":"68923fa0a83e15671c2e53e5","statement_name":"Urinary Retention Diagnosis Starts Within 1 Year After Initial BPH Diagnosis","statement_references":[{"_id":"68923fa4a83e15671c2e54fd","hqmf_id":null,"library_name":"UrinarySymptomScoreChangeAfterBenignProstaticHyperplasia","statement_name":"Initial BPH Diagnosis Starts Within 6 Months Before the Measurement Period"}]},{"_id":"68923fa0a83e15671c2e53e6","statement_name":"Has Initial BPH Diagnosis Starts During or Within 30 Days After End of Hospitalization","statement_references":[{"_id":"68923fa4a83e15671c2e54fe","hqmf_id":null,"library_name":"UrinarySymptomScoreChangeAfterBenignProstaticHyperplasia","statement_name":"Initial BPH Diagnosis Starts Within 6 Months Before the Measurement Period"}]},{"_id":"68923fa0a83e15671c2e53e7","statement_name":"Denominator Exclusions","statement_references":[{"_id":"68923fa0a83e15671c2e53cc","hqmf_id":null,"library_name":"UrinarySymptomScoreChangeAfterBenignProstaticHyperplasia","statement_name":"Urinary Retention Diagnosis Starts Within 1 Year After Initial BPH Diagnosis"},{"_id":"68923fa0a83e15671c2e53cd","hqmf_id":null,"library_name":"UrinarySymptomScoreChangeAfterBenignProstaticHyperplasia","statement_name":"Has Initial BPH Diagnosis Starts During or Within 30 Days After End of Hospitalization"},{"_id":"68923fa0a83e15671c2e53ce","hqmf_id":null,"library_name":"UrinarySymptomScoreChangeAfterBenignProstaticHyperplasia","statement_name":"Morbid Obesity Diagnosis or BMI Exam Result Greater Than or Equal to 40 Starts On or Before Follow Up USS Assessment"}]}]},{"_id":"68923fa0a83e15671c2e53ef","cql":"library MATGlobalCommonFunctionsQDM version '8.0.000'\n\n/*1. Upversion to 8.0.000 to support 2024 AU efforts.  No content changes were made from version 7.2.000 to this version 8.0.000*/\n\nusing QDM version '5.6'\n\nvalueset \"Emergency Department Visit\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.292' \nvalueset \"Encounter Inpatient\": 'urn:oid:2.16.840.1.113883.3.666.5.307' \nvalueset \"Intensive Care Unit\": 'urn:oid:2.16.840.1.113762.1.4.1029.206' \nvalueset \"Observation Services\": 'urn:oid:2.16.840.1.113762.1.4.1111.143' \nvalueset \"Outpatient Surgery Service\": 'urn:oid:2.16.840.1.113762.1.4.1110.38' \n\nparameter \"Measurement Period\" Interval\u003cDateTime\u003e\n\ncontext Patient\n\ndefine \"ED Encounter\":\n  [\"Encounter, Performed\": \"Emergency Department Visit\"]\n\ndefine \"Inpatient Encounter\":\n  [\"Encounter, Performed\": \"Encounter Inpatient\"] EncounterInpatient\n    where EncounterInpatient.relevantPeriod ends during day of \"Measurement Period\"\n\n/*@description: Returns an interval of date values extracted from the input interval of date-time values\n@comment: This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability.*/\ndefine function \"ToDateInterval\"(period Interval\u003cDateTime\u003e ):\n  Interval[date from start of period, date from end of period]\n\n/*calculates the difference in calendar days between the start and end of the given interval.*/\ndefine function \"LengthInDays\"(Value Interval\u003cDateTime\u003e ):\n  difference in days between start of Value and end of Value\n\n/*returns list of all locations within an encounter, including locations for immediately prior ED visit.*/\ndefine function \"HospitalizationLocations\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet EDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn if EDVisit is null then Visit.facilityLocations \n  \t\telse flatten { EDVisit.facilityLocations, Visit.facilityLocations }\n\n/*Returns the arrival time in the ED for the encounter.*/\ndefine function \"EmergencyDepartmentArrivalTime\"(Encounter \"Encounter, Performed\" ):\n  start of First((\"HospitalizationLocations\"(Encounter))HospitalLocation\n  \t\twhere HospitalLocation.code in \"Emergency Department Visit\"\n  \t\tsort by start of locationPeriod\n  ).locationPeriod\n\n/*Returns admission time for an encounter or for immediately prior emergency department visit.*/\ndefine function \"HospitalAdmissionTime\"(Encounter \"Encounter, Performed\" ):\n  start of \"Hospitalization\"(Encounter)\n\n/*Returns earliest arrival time for an encounter including any prior ED visit.*/\ndefine function \"HospitalArrivalTime\"(Encounter \"Encounter, Performed\" ):\n  start of First((\"HospitalizationLocations\"(Encounter))HospitalLocation\n  \t\tsort by start of locationPeriod\n  ).locationPeriod\n\n/*Hospitalization returns the total interval for admission to discharge for the given encounter, or for the admission of any immediately prior emergency department visit to the discharge of the given encounter.*/\ndefine function \"Hospitalization\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet EDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn Interval[Coalesce(start of EDVisit.relevantPeriod, start of Visit.relevantPeriod), \n  \tend of Visit.relevantPeriod]\n\n/*Returns the length of stay in days (i.e. the number of days between admission and discharge) for the given encounter, or from the admission of any immediately prior emergency department visit to the discharge of the encounter*/\ndefine function \"HospitalizationLengthofStay\"(Encounter \"Encounter, Performed\" ):\n  LengthInDays(\"Hospitalization\"(Encounter))\n\n/*Returns the latest departure time for encounter including any prior ED visit.*/\ndefine function \"HospitalDepartureTime\"(Encounter \"Encounter, Performed\" ):\n  end of Last((\"HospitalizationLocations\"(Encounter))HospitalLocation\n  \t\tsort by start of locationPeriod\n  ).locationPeriod\n\n/*Hospital Discharge Time returns the discharge time for an encounter*/\ndefine function \"HospitalDischargeTime\"(Encounter \"Encounter, Performed\" ):\n  end of Encounter.relevantPeriod\n\n/*Hospitalization with Observation and Outpatient Surgery Service returns the total interval from the start of any immediately prior emergency department visit, outpatient surgery visit or observation visit to the discharge of the given encounter.*/\ndefine function \"HospitalizationWithObservationAndOutpatientSurgeryService\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet ObsVisit: Last([\"Encounter, Performed\": \"Observation Services\"] LastObs\n  \t\t\twhere LastObs.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t),\n  \tVisitStart: Coalesce(start of ObsVisit.relevantPeriod, start of Visit.relevantPeriod),\n  \tEDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before VisitStart\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t),\n  \tVisitStartWithED: Coalesce(start of EDVisit.relevantPeriod, VisitStart),\n  \tOutpatientSurgeryVisit: Last([\"Encounter, Performed\": \"Outpatient Surgery Service\"] LastSurgeryOP\n  \t\t\twhere LastSurgeryOP.relevantPeriod ends 1 hour or less on or before VisitStartWithED\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn Interval[Coalesce(start of OutpatientSurgeryVisit.relevantPeriod, VisitStartWithED), \n  \tend of Visit.relevantPeriod]\n\n/*Hospitalization with Observation returns the total interval from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\ndefine function \"HospitalizationWithObservation\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet ObsVisit: Last([\"Encounter, Performed\": \"Observation Services\"] LastObs\n  \t\t\twhere LastObs.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t),\n  \tVisitStart: Coalesce(start of ObsVisit.relevantPeriod, start of Visit.relevantPeriod),\n  \tEDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before VisitStart\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn Interval[Coalesce(start of EDVisit.relevantPeriod, VisitStart), \n  \tend of Visit.relevantPeriod]\n\n/*Hospitalization with Observation Length of Stay returns the length in days from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\ndefine function \"HospitalizationWithObservationLengthofStay\"(Encounter \"Encounter, Performed\" ):\n  \"LengthInDays\"(\"HospitalizationWithObservation\"(Encounter))\n\n/*First Inpatient Intensive Care Unit returns the first intensive care unit for the given encounter, without considering any immediately prior emergency department visit.*/\ndefine function \"FirstInpatientIntensiveCareUnit\"(Encounter \"Encounter, Performed\" ):\n  First((Encounter.facilityLocations)HospitalLocation\n      where HospitalLocation.code in \"Intensive Care Unit\"\n        and HospitalLocation.locationPeriod during Encounter.relevantPeriod\n      sort by start of locationPeriod\n  )\n\n/*Given a datetime and a period, returns the period (if a period is provided) or the interval beginning and ending on the datetime (if a datetime is provided)*/\ndefine function \"NormalizeInterval\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  if pointInTime is not null then Interval[pointInTime, pointInTime]\n    else if period is not null then period \n    else null as Interval\u003cDateTime\u003e\n\n/*Given an interval, return true if the interval has a starting boundary specified (i.e. the start of the interval is not null and not the minimum DateTime value)*/\ndefine function \"HasStart\"(period Interval\u003cDateTime\u003e ):\n  not ( start of period is null\n      or start of period = minimum DateTime\n  )\n\n/*Given an interval, return true if the interval has an ending boundary specified (i.e. the end of the interval is not null and not the maximum DateTime value)*/\ndefine function \"HasEnd\"(period Interval\u003cDateTime\u003e ):\n  not ( \n    end of period is null\n      or \n      end of period = maximum DateTime\n  )\n\n/*Given an interval, return the ending point if the interval has an ending boundary specified, otherwise, return the starting point*/\ndefine function \"Latest\"(period Interval\u003cDateTime\u003e ):\n  if ( HasEnd(period)) then \n  end of period \n    else start of period\n\n/*Given an interval, return the starting point if the interval has a starting boundary specified, otherwise, return the ending point*/\ndefine function \"Earliest\"(period Interval\u003cDateTime\u003e ):\n  if ( HasStart(period)) then start of period \n    else \n  end of period\n\n/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the ending point of the period if the period has an ending boundary specified, otherwise returns the starting point of the interval*/\ndefine function \"LatestOf\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  Latest(NormalizeInterval(pointInTime, period))\n\n/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the starting point of the period if the period has a starting boundary specified, otherwise returns the ending point of the period*/\ndefine function \"EarliestOf\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  Earliest(NormalizeInterval(pointInTime, period))\n\n","elm":{"library":{"annotation":[{"translatorOptions":"EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion,DisableMethodInvocation","type":"CqlToElmInfo"},{"type":"Annotation","s":{"r":"395","s":[{"value":["","library MATGlobalCommonFunctionsQDM version '8.0.000'"]}]}}],"identifier":{"id":"MATGlobalCommonFunctionsQDM","version":"8.0.000"},"schemaIdentifier":{"id":"urn:hl7-org:elm","version":"r1"},"usings":{"def":[{"localIdentifier":"System","uri":"urn:hl7-org:elm-types:r1"},{"localId":"1","locator":"5:1-5:23","localIdentifier":"QDM","uri":"urn:healthit-gov:qdm:v5_6","version":"5.6","annotation":[{"type":"Annotation","s":{"r":"1","s":[{"value":["/*1. Upversion to 8.0.000 to support 2024 AU efforts.  No content changes were made from version 7.2.000 to this version 8.0.000*/\n","using "]},{"s":[{"value":["QDM"]}]},{"value":[" version ","'5.6'"]}]}}]}]},"parameters":{"def":[{"localId":"9","locator":"13:1-13:49","name":"Measurement Period","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"9","s":[{"value":["","parameter ","\"Measurement Period\""," "]},{"r":"8","s":[{"value":["Interval\u003c"]},{"r":"7","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}}],"parameterTypeSpecifier":{"localId":"8","locator":"13:32-13:49","type":"IntervalTypeSpecifier","pointType":{"localId":"7","locator":"13:41-13:48","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},"valueSets":{"def":[{"localId":"2","locator":"7:1-7:82","name":"Emergency Department Visit","id":"2.16.840.1.113883.3.117.1.7.1.292","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"2","s":[{"value":["","valueset ","\"Emergency Department Visit\"",": ","'urn:oid:2.16.840.1.113883.3.117.1.7.1.292'"]}]}}]},{"localId":"3","locator":"8:1-8:71","name":"Encounter Inpatient","id":"2.16.840.1.113883.3.666.5.307","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"3","s":[{"value":["","valueset ","\"Encounter Inpatient\"",": ","'urn:oid:2.16.840.1.113883.3.666.5.307'"]}]}}]},{"localId":"4","locator":"9:1-9:72","name":"Intensive Care Unit","id":"2.16.840.1.113762.1.4.1029.206","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"4","s":[{"value":["","valueset ","\"Intensive Care Unit\"",": ","'urn:oid:2.16.840.1.113762.1.4.1029.206'"]}]}}]},{"localId":"5","locator":"10:1-10:73","name":"Observation Services","id":"2.16.840.1.113762.1.4.1111.143","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"5","s":[{"value":["","valueset ","\"Observation Services\"",": ","'urn:oid:2.16.840.1.113762.1.4.1111.143'"]}]}}]},{"localId":"6","locator":"11:1-11:78","name":"Outpatient Surgery Service","id":"2.16.840.1.113762.1.4.1110.38","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"6","s":[{"value":["","valueset ","\"Outpatient Surgery Service\"",": ","'urn:oid:2.16.840.1.113762.1.4.1110.38'"]}]}}]}]},"contexts":{"def":[{"locator":"15:1-15:15","name":"Patient"}]},"statements":{"def":[{"locator":"15:1-15:15","name":"Patient","context":"Patient","expression":{"type":"SingletonFrom","operand":{"locator":"15:1-15:15","dataType":"{urn:healthit-gov:qdm:v5_6}Patient","templateId":"Patient","type":"Retrieve"}}},{"localId":"11","locator":"17:1-18:56","name":"ED Encounter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"11","s":[{"value":["","define ","\"ED Encounter\"",":\n  "]},{"r":"10","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"10","locator":"18:3-18:56","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"18:28-18:55","name":"Emergency Department Visit","preserve":true,"type":"ValueSetRef"}}},{"localId":"19","locator":"20:1-22:83","name":"Inpatient Encounter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"19","s":[{"value":["","define ","\"Inpatient Encounter\"",":\n  "]},{"r":"18","s":[{"s":[{"r":"13","s":[{"r":"12","s":[{"r":"12","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Encounter Inpatient\""]}]},{"value":["]"]}]}]},{"value":[" ","EncounterInpatient"]}]}]},{"value":["\n    "]},{"r":"17","s":[{"value":["where "]},{"r":"17","s":[{"r":"15","s":[{"r":"14","s":[{"value":["EncounterInpatient"]}]},{"value":["."]},{"r":"15","s":[{"value":["relevantPeriod"]}]}]},{"r":"17","value":[" ","ends during day of"," "]},{"r":"16","s":[{"value":["\"Measurement Period\""]}]}]}]}]}]}}],"expression":{"localId":"18","locator":"21:3-22:83","type":"Query","source":[{"localId":"13","locator":"21:3-21:68","alias":"EncounterInpatient","expression":{"localId":"12","locator":"21:3-21:49","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"21:28-21:48","name":"Encounter Inpatient","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"17","locator":"22:5-22:83","precision":"Day","type":"In","operand":[{"locator":"22:45-22:48","type":"End","operand":{"localId":"15","locator":"22:11-22:43","path":"relevantPeriod","scope":"EncounterInpatient","type":"Property"}},{"localId":"16","locator":"22:64-22:83","name":"Measurement Period","type":"ParameterRef"}]}}},{"localId":"29","locator":"29:1-30:62","name":"ToDateInterval","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","t":[{"name":"description","value":"Returns an interval of date values extracted from the input interval of date-time values"},{"name":"description","value":"Returns an interval of date values extracted from the input interval of date-time values"},{"name":"comment","value":"This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability."}],"s":{"r":"29","s":[{"value":["/*@description: Returns an interval of date values extracted from the input interval of date-time values\n@comment: This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability.*/\n","define function ","\"ToDateInterval\"","(","period"," "]},{"r":"21","s":[{"value":["Interval\u003c"]},{"r":"20","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"28","s":[{"r":"28","s":[{"value":["Interval["]},{"r":"24","s":[{"value":["date from "]},{"r":"23","s":[{"value":["start of "]},{"r":"22","s":[{"value":["period"]}]}]}]},{"value":[", "]},{"r":"27","s":[{"value":["date from "]},{"r":"26","s":[{"value":["end of "]},{"r":"25","s":[{"value":["period"]}]}]}]},{"value":["]"]}]}]}]}}],"expression":{"localId":"28","locator":"30:3-30:62","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"24","locator":"30:12-30:36","type":"DateFrom","operand":{"localId":"23","locator":"30:22-30:36","type":"Start","operand":{"localId":"22","locator":"30:31-30:36","name":"period","type":"OperandRef"}}},"high":{"localId":"27","locator":"30:39-30:61","type":"DateFrom","operand":{"localId":"26","locator":"30:49-30:61","type":"End","operand":{"localId":"25","locator":"30:56-30:61","name":"period","type":"OperandRef"}}}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"21","locator":"29:41-29:58","type":"IntervalTypeSpecifier","pointType":{"localId":"20","locator":"29:50-29:57","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"37","locator":"33:1-34:60","name":"LengthInDays","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"37","s":[{"value":["/*calculates the difference in calendar days between the start and end of the given interval.*/\n","define function ","\"LengthInDays\"","(","Value"," "]},{"r":"31","s":[{"value":["Interval\u003c"]},{"r":"30","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"36","s":[{"r":"36","s":[{"value":["difference in days between "]},{"r":"33","s":[{"value":["start of "]},{"r":"32","s":[{"value":["Value"]}]}]},{"value":[" and "]},{"r":"35","s":[{"value":["end of "]},{"r":"34","s":[{"value":["Value"]}]}]}]}]}]}}],"expression":{"localId":"36","locator":"34:3-34:60","precision":"Day","type":"DifferenceBetween","operand":[{"localId":"33","locator":"34:30-34:43","type":"Start","operand":{"localId":"32","locator":"34:39-34:43","name":"Value","type":"OperandRef"}},{"localId":"35","locator":"34:49-34:60","type":"End","operand":{"localId":"34","locator":"34:56-34:60","name":"Value","type":"OperandRef"}}]},"operand":[{"name":"Value","operandTypeSpecifier":{"localId":"31","locator":"33:38-33:55","type":"IntervalTypeSpecifier","pointType":{"localId":"30","locator":"33:47-33:54","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"70","locator":"37:1-45:71","name":"HospitalizationLocations","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"70","s":[{"value":["/*returns list of all locations within an encounter, including locations for immediately prior ED visit.*/\n","define function ","\"HospitalizationLocations\"","(","Encounter"," "]},{"r":"38","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"69","s":[{"r":"69","s":[{"s":[{"r":"40","s":[{"r":"39","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"56","s":[{"value":["EDVisit",": "]},{"r":"55","s":[{"value":["Last","("]},{"r":"54","s":[{"s":[{"r":"42","s":[{"r":"41","s":[{"r":"41","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"49","s":[{"value":["where "]},{"r":"49","s":[{"r":"44","s":[{"r":"43","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"44","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"49","s":[{"value":["ends "]},{"r":"48","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"47","s":[{"value":["start of "]},{"r":"46","s":[{"r":"45","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"46","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"53","s":[{"value":["sort by \n  \t\t\t"]},{"r":"52","s":[{"r":"51","s":[{"value":["end of "]},{"r":"50","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"68","s":[{"value":["return "]},{"r":"67","s":[{"value":["if "]},{"r":"58","s":[{"r":"57","s":[{"value":["EDVisit"]}]},{"value":[" is null"]}]},{"value":[" then "]},{"r":"60","s":[{"r":"59","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"60","s":[{"value":["facilityLocations"]}]}]},{"value":[" \n  \t\telse "]},{"r":"66","s":[{"value":["flatten "]},{"r":"65","s":[{"value":["{ "]},{"r":"62","s":[{"r":"61","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"62","s":[{"value":["facilityLocations"]}]}]},{"value":[", "]},{"r":"64","s":[{"r":"63","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"64","s":[{"value":["facilityLocations"]}]}]},{"value":[" }"]}]}]}]}]}]}]}]}}],"expression":{"localId":"69","locator":"38:3-45:71","type":"Query","source":[{"localId":"40","locator":"38:3-38:17","alias":"Visit","expression":{"localId":"39","locator":"38:3-38:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"56","locator":"39:8-43:4","identifier":"EDVisit","expression":{"localId":"55","locator":"39:17-43:4","type":"Last","source":{"localId":"54","locator":"39:22-42:26","type":"Query","source":[{"localId":"42","locator":"39:22-39:82","alias":"LastED","expression":{"localId":"41","locator":"39:22-39:75","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"39:47-39:74","name":"Emergency Department Visit","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"49","locator":"40:6-40:95","type":"And","operand":[{"locator":"40:39-40:52","type":"In","operand":[{"locator":"40:34-40:37","type":"End","operand":{"localId":"44","locator":"40:12-40:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"40:39-40:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"40:67-40:95","type":"Subtract","operand":[{"localId":"47","locator":"40:67-40:95","type":"Start","operand":{"localId":"46","locator":"40:76-40:95","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"48","locator":"40:39-40:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"47","locator":"40:67-40:95","type":"Start","operand":{"localId":"46","locator":"40:76-40:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"40:39-40:52","type":"Not","operand":{"locator":"40:39-40:52","type":"IsNull","operand":{"localId":"47","locator":"40:67-40:95","type":"Start","operand":{"localId":"46","locator":"40:76-40:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"53","locator":"41:6-42:26","by":[{"localId":"52","locator":"42:6-42:26","direction":"asc","type":"ByExpression","expression":{"localId":"51","locator":"42:6-42:26","type":"End","operand":{"localId":"50","locator":"42:13-42:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"68","locator":"44:4-45:71","expression":{"localId":"67","locator":"44:11-45:71","type":"If","condition":{"localId":"58","locator":"44:14-44:28","type":"IsNull","operand":{"localId":"57","locator":"44:14-44:20","name":"EDVisit","type":"QueryLetRef"}},"then":{"localId":"60","locator":"44:35-44:57","path":"facilityLocations","scope":"Visit","type":"Property"},"else":{"localId":"66","locator":"45:10-45:71","type":"Flatten","operand":{"localId":"65","locator":"45:18-45:71","type":"List","element":[{"localId":"62","locator":"45:20-45:44","path":"facilityLocations","type":"Property","source":{"localId":"61","locator":"45:20-45:26","name":"EDVisit","type":"QueryLetRef"}},{"localId":"64","locator":"45:47-45:69","path":"facilityLocations","scope":"Visit","type":"Property"}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"38","locator":"37:54-37:75","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"87","locator":"48:1-52:18","name":"EmergencyDepartmentArrivalTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"87","s":[{"value":["/*Returns the arrival time in the ED for the encounter.*/\n","define function ","\"EmergencyDepartmentArrivalTime\"","(","Encounter"," "]},{"r":"71","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"86","s":[{"r":"86","s":[{"value":["start of "]},{"r":"85","s":[{"r":"84","s":[{"value":["First","("]},{"r":"83","s":[{"s":[{"r":"74","s":[{"r":"73","s":[{"value":["("]},{"r":"73","s":[{"value":["\"HospitalizationLocations\"","("]},{"r":"72","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n  \t\t"]},{"r":"78","s":[{"value":["where "]},{"r":"78","s":[{"r":"76","s":[{"r":"75","s":[{"value":["HospitalLocation"]}]},{"value":["."]},{"r":"76","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"77","s":[{"value":["\"Emergency Department Visit\""]}]}]}]},{"value":["\n  \t\t"]},{"r":"82","s":[{"value":["sort by "]},{"r":"81","s":[{"r":"80","s":[{"value":["start of "]},{"r":"79","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"85","s":[{"value":["locationPeriod"]}]}]}]}]}]}}],"expression":{"localId":"86","locator":"49:3-52:18","type":"Start","operand":{"localId":"85","locator":"49:12-52:18","path":"locationPeriod","type":"Property","source":{"localId":"84","locator":"49:12-52:3","type":"First","source":{"localId":"83","locator":"49:18-51:35","type":"Query","source":[{"localId":"74","locator":"49:18-49:72","alias":"HospitalLocation","expression":{"localId":"73","locator":"49:18-49:56","name":"HospitalizationLocations","type":"FunctionRef","operand":[{"localId":"72","locator":"49:46-49:54","name":"Encounter","type":"OperandRef"}]}}],"relationship":[],"where":{"localId":"78","locator":"50:5-50:63","type":"InValueSet","code":{"localId":"76","locator":"50:11-50:31","path":"code","scope":"HospitalLocation","type":"Property"},"valueset":{"localId":"77","locator":"50:36-50:63","name":"Emergency Department Visit","preserve":true}},"sort":{"localId":"82","locator":"51:5-51:35","by":[{"localId":"81","locator":"51:13-51:35","direction":"asc","type":"ByExpression","expression":{"localId":"80","locator":"51:13-51:35","type":"Start","operand":{"localId":"79","locator":"51:22-51:35","name":"locationPeriod","type":"IdentifierRef"}}}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"71","locator":"48:60-48:81","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"122","locator":"65:1-73:31","name":"Hospitalization","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"122","s":[{"value":["/*Hospitalization returns the total interval for admission to discharge for the given encounter, or for the admission of any immediately prior emergency department visit to the discharge of the given encounter.*/\n","define function ","\"Hospitalization\"","(","Encounter"," "]},{"r":"90","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"121","s":[{"r":"121","s":[{"s":[{"r":"92","s":[{"r":"91","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"108","s":[{"value":["EDVisit",": "]},{"r":"107","s":[{"value":["Last","("]},{"r":"106","s":[{"s":[{"r":"94","s":[{"r":"93","s":[{"r":"93","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"101","s":[{"value":["where "]},{"r":"101","s":[{"r":"96","s":[{"r":"95","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"96","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"101","s":[{"value":["ends "]},{"r":"100","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"99","s":[{"value":["start of "]},{"r":"98","s":[{"r":"97","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"98","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"105","s":[{"value":["sort by \n  \t\t\t"]},{"r":"104","s":[{"r":"103","s":[{"value":["end of "]},{"r":"102","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"120","s":[{"value":["return "]},{"r":"119","s":[{"value":["Interval["]},{"r":"115","s":[{"value":["Coalesce","("]},{"r":"111","s":[{"value":["start of "]},{"r":"110","s":[{"r":"109","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"110","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"114","s":[{"value":["start of "]},{"r":"113","s":[{"r":"112","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"113","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]},{"value":[", \n  \t"]},{"r":"118","s":[{"value":["end of "]},{"r":"117","s":[{"r":"116","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"117","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["]"]}]}]}]}]}]}}],"expression":{"localId":"121","locator":"66:3-73:31","type":"Query","source":[{"localId":"92","locator":"66:3-66:17","alias":"Visit","expression":{"localId":"91","locator":"66:3-66:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"108","locator":"67:8-71:4","identifier":"EDVisit","expression":{"localId":"107","locator":"67:17-71:4","type":"Last","source":{"localId":"106","locator":"67:22-70:26","type":"Query","source":[{"localId":"94","locator":"67:22-67:82","alias":"LastED","expression":{"localId":"93","locator":"67:22-67:75","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"67:47-67:74","name":"Emergency Department Visit","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"101","locator":"68:6-68:95","type":"And","operand":[{"locator":"68:39-68:52","type":"In","operand":[{"locator":"68:34-68:37","type":"End","operand":{"localId":"96","locator":"68:12-68:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"68:39-68:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"68:67-68:95","type":"Subtract","operand":[{"localId":"99","locator":"68:67-68:95","type":"Start","operand":{"localId":"98","locator":"68:76-68:95","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"100","locator":"68:39-68:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"99","locator":"68:67-68:95","type":"Start","operand":{"localId":"98","locator":"68:76-68:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"68:39-68:52","type":"Not","operand":{"locator":"68:39-68:52","type":"IsNull","operand":{"localId":"99","locator":"68:67-68:95","type":"Start","operand":{"localId":"98","locator":"68:76-68:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"105","locator":"69:6-70:26","by":[{"localId":"104","locator":"70:6-70:26","direction":"asc","type":"ByExpression","expression":{"localId":"103","locator":"70:6-70:26","type":"End","operand":{"localId":"102","locator":"70:13-70:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"120","locator":"72:4-73:31","expression":{"localId":"119","locator":"72:11-73:31","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"115","locator":"72:20-72:91","type":"Coalesce","operand":[{"localId":"111","locator":"72:29-72:59","type":"Start","operand":{"localId":"110","locator":"72:38-72:59","path":"relevantPeriod","type":"Property","source":{"localId":"109","locator":"72:38-72:44","name":"EDVisit","type":"QueryLetRef"}}},{"localId":"114","locator":"72:62-72:90","type":"Start","operand":{"localId":"113","locator":"72:71-72:90","path":"relevantPeriod","scope":"Visit","type":"Property"}}]},"high":{"localId":"118","locator":"73:4-73:30","type":"End","operand":{"localId":"117","locator":"73:11-73:30","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"90","locator":"65:45-65:66","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"125","locator":"55:1-56:39","name":"HospitalAdmissionTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"125","s":[{"value":["/*Returns admission time for an encounter or for immediately prior emergency department visit.*/\n","define function ","\"HospitalAdmissionTime\"","(","Encounter"," "]},{"r":"88","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"124","s":[{"r":"124","s":[{"value":["start of "]},{"r":"123","s":[{"value":["\"Hospitalization\"","("]},{"r":"89","s":[{"value":["Encounter"]}]},{"value":[")"]}]}]}]}]}}],"expression":{"localId":"124","locator":"56:3-56:39","type":"Start","operand":{"localId":"123","locator":"56:12-56:39","name":"Hospitalization","type":"FunctionRef","operand":[{"localId":"89","locator":"56:30-56:38","name":"Encounter","type":"OperandRef"}]}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"88","locator":"55:51-55:72","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"138","locator":"59:1-62:18","name":"HospitalArrivalTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"138","s":[{"value":["/*Returns earliest arrival time for an encounter including any prior ED visit.*/\n","define function ","\"HospitalArrivalTime\"","(","Encounter"," "]},{"r":"126","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"137","s":[{"r":"137","s":[{"value":["start of "]},{"r":"136","s":[{"r":"135","s":[{"value":["First","("]},{"r":"134","s":[{"s":[{"r":"129","s":[{"r":"128","s":[{"value":["("]},{"r":"128","s":[{"value":["\"HospitalizationLocations\"","("]},{"r":"127","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n  \t\t"]},{"r":"133","s":[{"value":["sort by "]},{"r":"132","s":[{"r":"131","s":[{"value":["start of "]},{"r":"130","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"136","s":[{"value":["locationPeriod"]}]}]}]}]}]}}],"expression":{"localId":"137","locator":"60:3-62:18","type":"Start","operand":{"localId":"136","locator":"60:12-62:18","path":"locationPeriod","type":"Property","source":{"localId":"135","locator":"60:12-62:3","type":"First","source":{"localId":"134","locator":"60:18-61:35","type":"Query","source":[{"localId":"129","locator":"60:18-60:72","alias":"HospitalLocation","expression":{"localId":"128","locator":"60:18-60:56","name":"HospitalizationLocations","type":"FunctionRef","operand":[{"localId":"127","locator":"60:46-60:54","name":"Encounter","type":"OperandRef"}]}}],"relationship":[],"sort":{"localId":"133","locator":"61:5-61:35","by":[{"localId":"132","locator":"61:13-61:35","direction":"asc","type":"ByExpression","expression":{"localId":"131","locator":"61:13-61:35","type":"Start","operand":{"localId":"130","locator":"61:22-61:35","name":"locationPeriod","type":"IdentifierRef"}}}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"126","locator":"59:49-59:70","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"145","locator":"76:1-77:44","name":"HospitalizationLengthofStay","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"145","s":[{"value":["/*Returns the length of stay in days (i.e. the number of days between admission and discharge) for the given encounter, or from the admission of any immediately prior emergency department visit to the discharge of the encounter*/\n","define function ","\"HospitalizationLengthofStay\"","(","Encounter"," "]},{"r":"141","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"144","s":[{"r":"144","s":[{"value":["LengthInDays","("]},{"r":"143","s":[{"value":["\"Hospitalization\"","("]},{"r":"142","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"144","locator":"77:3-77:44","name":"LengthInDays","type":"FunctionRef","operand":[{"localId":"143","locator":"77:16-77:43","name":"Hospitalization","type":"FunctionRef","operand":[{"localId":"142","locator":"77:34-77:42","name":"Encounter","type":"OperandRef"}]}]},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"141","locator":"76:57-76:78","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"158","locator":"80:1-83:18","name":"HospitalDepartureTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"158","s":[{"value":["/*Returns the latest departure time for encounter including any prior ED visit.*/\n","define function ","\"HospitalDepartureTime\"","(","Encounter"," "]},{"r":"146","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"157","s":[{"r":"157","s":[{"value":["end of "]},{"r":"156","s":[{"r":"155","s":[{"value":["Last","("]},{"r":"154","s":[{"s":[{"r":"149","s":[{"r":"148","s":[{"value":["("]},{"r":"148","s":[{"value":["\"HospitalizationLocations\"","("]},{"r":"147","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n  \t\t"]},{"r":"153","s":[{"value":["sort by "]},{"r":"152","s":[{"r":"151","s":[{"value":["start of "]},{"r":"150","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"156","s":[{"value":["locationPeriod"]}]}]}]}]}]}}],"expression":{"localId":"157","locator":"81:3-83:18","type":"End","operand":{"localId":"156","locator":"81:10-83:18","path":"locationPeriod","type":"Property","source":{"localId":"155","locator":"81:10-83:3","type":"Last","source":{"localId":"154","locator":"81:15-82:35","type":"Query","source":[{"localId":"149","locator":"81:15-81:69","alias":"HospitalLocation","expression":{"localId":"148","locator":"81:15-81:53","name":"HospitalizationLocations","type":"FunctionRef","operand":[{"localId":"147","locator":"81:43-81:51","name":"Encounter","type":"OperandRef"}]}}],"relationship":[],"sort":{"localId":"153","locator":"82:5-82:35","by":[{"localId":"152","locator":"82:13-82:35","direction":"asc","type":"ByExpression","expression":{"localId":"151","locator":"82:13-82:35","type":"Start","operand":{"localId":"150","locator":"82:22-82:35","name":"locationPeriod","type":"IdentifierRef"}}}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"146","locator":"80:51-80:72","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"163","locator":"86:1-87:33","name":"HospitalDischargeTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"163","s":[{"value":["/*Hospital Discharge Time returns the discharge time for an encounter*/\n","define function ","\"HospitalDischargeTime\"","(","Encounter"," "]},{"r":"159","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"162","s":[{"r":"162","s":[{"value":["end of "]},{"r":"161","s":[{"r":"160","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"161","s":[{"value":["relevantPeriod"]}]}]}]}]}]}}],"expression":{"localId":"162","locator":"87:3-87:33","type":"End","operand":{"localId":"161","locator":"87:10-87:33","path":"relevantPeriod","type":"Property","source":{"localId":"160","locator":"87:10-87:18","name":"Encounter","type":"OperandRef"}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"159","locator":"86:51-86:72","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"236","locator":"90:1-110:31","name":"HospitalizationWithObservationAndOutpatientSurgeryService","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"236","s":[{"value":["/*Hospitalization with Observation and Outpatient Surgery Service returns the total interval from the start of any immediately prior emergency department visit, outpatient surgery visit or observation visit to the discharge of the given encounter.*/\n","define function ","\"HospitalizationWithObservationAndOutpatientSurgeryService\"","(","Encounter"," "]},{"r":"164","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"235","s":[{"r":"235","s":[{"s":[{"r":"166","s":[{"r":"165","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"182","s":[{"value":["ObsVisit",": "]},{"r":"181","s":[{"value":["Last","("]},{"r":"180","s":[{"s":[{"r":"168","s":[{"r":"167","s":[{"r":"167","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Observation Services\""]}]},{"value":["]"]}]}]},{"value":[" ","LastObs"]}]}]},{"value":["\n  \t\t\t"]},{"r":"175","s":[{"value":["where "]},{"r":"175","s":[{"r":"170","s":[{"r":"169","s":[{"value":["LastObs"]}]},{"value":["."]},{"r":"170","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"175","s":[{"value":["ends "]},{"r":"174","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"173","s":[{"value":["start of "]},{"r":"172","s":[{"r":"171","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"172","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"179","s":[{"value":["sort by \n  \t\t\t"]},{"r":"178","s":[{"r":"177","s":[{"value":["end of "]},{"r":"176","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]},{"value":[",\n  \t"]},{"r":"190","s":[{"value":["VisitStart",": "]},{"r":"189","s":[{"value":["Coalesce","("]},{"r":"185","s":[{"value":["start of "]},{"r":"184","s":[{"r":"183","s":[{"value":["ObsVisit"]}]},{"value":["."]},{"r":"184","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"188","s":[{"value":["start of "]},{"r":"187","s":[{"r":"186","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"187","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]}]},{"value":[",\n  \t"]},{"r":"204","s":[{"value":["EDVisit",": "]},{"r":"203","s":[{"value":["Last","("]},{"r":"202","s":[{"s":[{"r":"192","s":[{"r":"191","s":[{"r":"191","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"197","s":[{"value":["where "]},{"r":"197","s":[{"r":"194","s":[{"r":"193","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"194","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"197","s":[{"value":["ends "]},{"r":"196","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"195","s":[{"value":["VisitStart"]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"201","s":[{"value":["sort by \n  \t\t\t"]},{"r":"200","s":[{"r":"199","s":[{"value":["end of "]},{"r":"198","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]},{"value":[",\n  \t"]},{"r":"210","s":[{"value":["VisitStartWithED",": "]},{"r":"209","s":[{"value":["Coalesce","("]},{"r":"207","s":[{"value":["start of "]},{"r":"206","s":[{"r":"205","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"206","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"208","s":[{"value":["VisitStart"]}]},{"value":[")"]}]}]},{"value":[",\n  \t"]},{"r":"224","s":[{"value":["OutpatientSurgeryVisit",": "]},{"r":"223","s":[{"value":["Last","("]},{"r":"222","s":[{"s":[{"r":"212","s":[{"r":"211","s":[{"r":"211","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Outpatient Surgery Service\""]}]},{"value":["]"]}]}]},{"value":[" ","LastSurgeryOP"]}]}]},{"value":["\n  \t\t\t"]},{"r":"217","s":[{"value":["where "]},{"r":"217","s":[{"r":"214","s":[{"r":"213","s":[{"value":["LastSurgeryOP"]}]},{"value":["."]},{"r":"214","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"217","s":[{"value":["ends "]},{"r":"216","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"215","s":[{"value":["VisitStartWithED"]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"221","s":[{"value":["sort by \n  \t\t\t"]},{"r":"220","s":[{"r":"219","s":[{"value":["end of "]},{"r":"218","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"234","s":[{"value":["return "]},{"r":"233","s":[{"value":["Interval["]},{"r":"229","s":[{"value":["Coalesce","("]},{"r":"227","s":[{"value":["start of "]},{"r":"226","s":[{"r":"225","s":[{"value":["OutpatientSurgeryVisit"]}]},{"value":["."]},{"r":"226","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"228","s":[{"value":["VisitStartWithED"]}]},{"value":[")"]}]},{"value":[", \n  \t"]},{"r":"232","s":[{"value":["end of "]},{"r":"231","s":[{"r":"230","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"231","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["]"]}]}]}]}]}]}}],"expression":{"localId":"235","locator":"91:3-110:31","type":"Query","source":[{"localId":"166","locator":"91:3-91:17","alias":"Visit","expression":{"localId":"165","locator":"91:3-91:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"182","locator":"92:8-96:4","identifier":"ObsVisit","expression":{"localId":"181","locator":"92:18-96:4","type":"Last","source":{"localId":"180","locator":"92:23-95:26","type":"Query","source":[{"localId":"168","locator":"92:23-92:78","alias":"LastObs","expression":{"localId":"167","locator":"92:23-92:70","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"92:48-92:69","name":"Observation Services","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"175","locator":"93:6-93:96","type":"And","operand":[{"locator":"93:40-93:53","type":"In","operand":[{"locator":"93:35-93:38","type":"End","operand":{"localId":"170","locator":"93:12-93:33","path":"relevantPeriod","scope":"LastObs","type":"Property"}},{"locator":"93:40-93:53","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"93:68-93:96","type":"Subtract","operand":[{"localId":"173","locator":"93:68-93:96","type":"Start","operand":{"localId":"172","locator":"93:77-93:96","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"174","locator":"93:40-93:45","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"173","locator":"93:68-93:96","type":"Start","operand":{"localId":"172","locator":"93:77-93:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"93:40-93:53","type":"Not","operand":{"locator":"93:40-93:53","type":"IsNull","operand":{"localId":"173","locator":"93:68-93:96","type":"Start","operand":{"localId":"172","locator":"93:77-93:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"179","locator":"94:6-95:26","by":[{"localId":"178","locator":"95:6-95:26","direction":"asc","type":"ByExpression","expression":{"localId":"177","locator":"95:6-95:26","type":"End","operand":{"localId":"176","locator":"95:13-95:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}},{"localId":"190","locator":"97:4-97:88","identifier":"VisitStart","expression":{"localId":"189","locator":"97:16-97:88","type":"Coalesce","operand":[{"localId":"185","locator":"97:25-97:56","type":"Start","operand":{"localId":"184","locator":"97:34-97:56","path":"relevantPeriod","type":"Property","source":{"localId":"183","locator":"97:34-97:41","name":"ObsVisit","type":"QueryLetRef"}}},{"localId":"188","locator":"97:59-97:87","type":"Start","operand":{"localId":"187","locator":"97:68-97:87","path":"relevantPeriod","scope":"Visit","type":"Property"}}]}},{"localId":"204","locator":"98:4-102:4","identifier":"EDVisit","expression":{"localId":"203","locator":"98:13-102:4","type":"Last","source":{"localId":"202","locator":"98:18-101:26","type":"Query","source":[{"localId":"192","locator":"98:18-98:78","alias":"LastED","expression":{"localId":"191","locator":"98:18-98:71","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"98:43-98:70","name":"Emergency Department Visit","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"197","locator":"99:6-99:76","type":"And","operand":[{"locator":"99:39-99:52","type":"In","operand":[{"locator":"99:34-99:37","type":"End","operand":{"localId":"194","locator":"99:12-99:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"99:39-99:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"99:67-99:76","type":"Subtract","operand":[{"localId":"195","locator":"99:67-99:76","name":"VisitStart","type":"QueryLetRef"},{"localId":"196","locator":"99:39-99:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"195","locator":"99:67-99:76","name":"VisitStart","type":"QueryLetRef"}}]},{"locator":"99:39-99:52","type":"Not","operand":{"locator":"99:39-99:52","type":"IsNull","operand":{"localId":"195","locator":"99:67-99:76","name":"VisitStart","type":"QueryLetRef"}}}]},"sort":{"localId":"201","locator":"100:6-101:26","by":[{"localId":"200","locator":"101:6-101:26","direction":"asc","type":"ByExpression","expression":{"localId":"199","locator":"101:6-101:26","type":"End","operand":{"localId":"198","locator":"101:13-101:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}},{"localId":"210","locator":"103:4-103:74","identifier":"VisitStartWithED","expression":{"localId":"209","locator":"103:22-103:74","type":"Coalesce","operand":[{"localId":"207","locator":"103:31-103:61","type":"Start","operand":{"localId":"206","locator":"103:40-103:61","path":"relevantPeriod","type":"Property","source":{"localId":"205","locator":"103:40-103:46","name":"EDVisit","type":"QueryLetRef"}}},{"localId":"208","locator":"103:64-103:73","name":"VisitStart","type":"QueryLetRef"}]}},{"localId":"224","locator":"104:4-108:4","identifier":"OutpatientSurgeryVisit","expression":{"localId":"223","locator":"104:28-108:4","type":"Last","source":{"localId":"222","locator":"104:33-107:26","type":"Query","source":[{"localId":"212","locator":"104:33-104:100","alias":"LastSurgeryOP","expression":{"localId":"211","locator":"104:33-104:86","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"104:58-104:85","name":"Outpatient Surgery Service","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"217","locator":"105:6-105:89","type":"And","operand":[{"locator":"105:46-105:59","type":"In","operand":[{"locator":"105:41-105:44","type":"End","operand":{"localId":"214","locator":"105:12-105:39","path":"relevantPeriod","scope":"LastSurgeryOP","type":"Property"}},{"locator":"105:46-105:59","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"105:74-105:89","type":"Subtract","operand":[{"localId":"215","locator":"105:74-105:89","name":"VisitStartWithED","type":"QueryLetRef"},{"localId":"216","locator":"105:46-105:51","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"215","locator":"105:74-105:89","name":"VisitStartWithED","type":"QueryLetRef"}}]},{"locator":"105:46-105:59","type":"Not","operand":{"locator":"105:46-105:59","type":"IsNull","operand":{"localId":"215","locator":"105:74-105:89","name":"VisitStartWithED","type":"QueryLetRef"}}}]},"sort":{"localId":"221","locator":"106:6-107:26","by":[{"localId":"220","locator":"107:6-107:26","direction":"asc","type":"ByExpression","expression":{"localId":"219","locator":"107:6-107:26","type":"End","operand":{"localId":"218","locator":"107:13-107:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"234","locator":"109:4-110:31","expression":{"localId":"233","locator":"109:11-110:31","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"229","locator":"109:20-109:93","type":"Coalesce","operand":[{"localId":"227","locator":"109:29-109:74","type":"Start","operand":{"localId":"226","locator":"109:38-109:74","path":"relevantPeriod","type":"Property","source":{"localId":"225","locator":"109:38-109:59","name":"OutpatientSurgeryVisit","type":"QueryLetRef"}}},{"localId":"228","locator":"109:77-109:92","name":"VisitStartWithED","type":"QueryLetRef"}]},"high":{"localId":"232","locator":"110:4-110:30","type":"End","operand":{"localId":"231","locator":"110:11-110:30","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"164","locator":"90:87-90:108","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"289","locator":"113:1-127:31","name":"HospitalizationWithObservation","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"289","s":[{"value":["/*Hospitalization with Observation returns the total interval from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\n","define function ","\"HospitalizationWithObservation\"","(","Encounter"," "]},{"r":"237","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"288","s":[{"r":"288","s":[{"s":[{"r":"239","s":[{"r":"238","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"255","s":[{"value":["ObsVisit",": "]},{"r":"254","s":[{"value":["Last","("]},{"r":"253","s":[{"s":[{"r":"241","s":[{"r":"240","s":[{"r":"240","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Observation Services\""]}]},{"value":["]"]}]}]},{"value":[" ","LastObs"]}]}]},{"value":["\n  \t\t\t"]},{"r":"248","s":[{"value":["where "]},{"r":"248","s":[{"r":"243","s":[{"r":"242","s":[{"value":["LastObs"]}]},{"value":["."]},{"r":"243","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"248","s":[{"value":["ends "]},{"r":"247","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"246","s":[{"value":["start of "]},{"r":"245","s":[{"r":"244","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"245","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"252","s":[{"value":["sort by \n  \t\t\t"]},{"r":"251","s":[{"r":"250","s":[{"value":["end of "]},{"r":"249","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]},{"value":[",\n  \t"]},{"r":"263","s":[{"value":["VisitStart",": "]},{"r":"262","s":[{"value":["Coalesce","("]},{"r":"258","s":[{"value":["start of "]},{"r":"257","s":[{"r":"256","s":[{"value":["ObsVisit"]}]},{"value":["."]},{"r":"257","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"261","s":[{"value":["start of "]},{"r":"260","s":[{"r":"259","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"260","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]}]},{"value":[",\n  \t"]},{"r":"277","s":[{"value":["EDVisit",": "]},{"r":"276","s":[{"value":["Last","("]},{"r":"275","s":[{"s":[{"r":"265","s":[{"r":"264","s":[{"r":"264","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"270","s":[{"value":["where "]},{"r":"270","s":[{"r":"267","s":[{"r":"266","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"267","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"270","s":[{"value":["ends "]},{"r":"269","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"268","s":[{"value":["VisitStart"]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"274","s":[{"value":["sort by \n  \t\t\t"]},{"r":"273","s":[{"r":"272","s":[{"value":["end of "]},{"r":"271","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"287","s":[{"value":["return "]},{"r":"286","s":[{"value":["Interval["]},{"r":"282","s":[{"value":["Coalesce","("]},{"r":"280","s":[{"value":["start of "]},{"r":"279","s":[{"r":"278","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"279","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"281","s":[{"value":["VisitStart"]}]},{"value":[")"]}]},{"value":[", \n  \t"]},{"r":"285","s":[{"value":["end of "]},{"r":"284","s":[{"r":"283","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"284","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["]"]}]}]}]}]}]}}],"expression":{"localId":"288","locator":"114:3-127:31","type":"Query","source":[{"localId":"239","locator":"114:3-114:17","alias":"Visit","expression":{"localId":"238","locator":"114:3-114:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"255","locator":"115:8-119:4","identifier":"ObsVisit","expression":{"localId":"254","locator":"115:18-119:4","type":"Last","source":{"localId":"253","locator":"115:23-118:26","type":"Query","source":[{"localId":"241","locator":"115:23-115:78","alias":"LastObs","expression":{"localId":"240","locator":"115:23-115:70","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"115:48-115:69","name":"Observation Services","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"248","locator":"116:6-116:96","type":"And","operand":[{"locator":"116:40-116:53","type":"In","operand":[{"locator":"116:35-116:38","type":"End","operand":{"localId":"243","locator":"116:12-116:33","path":"relevantPeriod","scope":"LastObs","type":"Property"}},{"locator":"116:40-116:53","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"116:68-116:96","type":"Subtract","operand":[{"localId":"246","locator":"116:68-116:96","type":"Start","operand":{"localId":"245","locator":"116:77-116:96","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"247","locator":"116:40-116:45","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"246","locator":"116:68-116:96","type":"Start","operand":{"localId":"245","locator":"116:77-116:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"116:40-116:53","type":"Not","operand":{"locator":"116:40-116:53","type":"IsNull","operand":{"localId":"246","locator":"116:68-116:96","type":"Start","operand":{"localId":"245","locator":"116:77-116:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"252","locator":"117:6-118:26","by":[{"localId":"251","locator":"118:6-118:26","direction":"asc","type":"ByExpression","expression":{"localId":"250","locator":"118:6-118:26","type":"End","operand":{"localId":"249","locator":"118:13-118:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}},{"localId":"263","locator":"120:4-120:88","identifier":"VisitStart","expression":{"localId":"262","locator":"120:16-120:88","type":"Coalesce","operand":[{"localId":"258","locator":"120:25-120:56","type":"Start","operand":{"localId":"257","locator":"120:34-120:56","path":"relevantPeriod","type":"Property","source":{"localId":"256","locator":"120:34-120:41","name":"ObsVisit","type":"QueryLetRef"}}},{"localId":"261","locator":"120:59-120:87","type":"Start","operand":{"localId":"260","locator":"120:68-120:87","path":"relevantPeriod","scope":"Visit","type":"Property"}}]}},{"localId":"277","locator":"121:4-125:4","identifier":"EDVisit","expression":{"localId":"276","locator":"121:13-125:4","type":"Last","source":{"localId":"275","locator":"121:18-124:26","type":"Query","source":[{"localId":"265","locator":"121:18-121:78","alias":"LastED","expression":{"localId":"264","locator":"121:18-121:71","dataType":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","codeComparator":"in","type":"Retrieve","codes":{"locator":"121:43-121:70","name":"Emergency Department Visit","preserve":true,"type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"270","locator":"122:6-122:76","type":"And","operand":[{"locator":"122:39-122:52","type":"In","operand":[{"locator":"122:34-122:37","type":"End","operand":{"localId":"267","locator":"122:12-122:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"122:39-122:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"122:67-122:76","type":"Subtract","operand":[{"localId":"268","locator":"122:67-122:76","name":"VisitStart","type":"QueryLetRef"},{"localId":"269","locator":"122:39-122:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"268","locator":"122:67-122:76","name":"VisitStart","type":"QueryLetRef"}}]},{"locator":"122:39-122:52","type":"Not","operand":{"locator":"122:39-122:52","type":"IsNull","operand":{"localId":"268","locator":"122:67-122:76","name":"VisitStart","type":"QueryLetRef"}}}]},"sort":{"localId":"274","locator":"123:6-124:26","by":[{"localId":"273","locator":"124:6-124:26","direction":"asc","type":"ByExpression","expression":{"localId":"272","locator":"124:6-124:26","type":"End","operand":{"localId":"271","locator":"124:13-124:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"287","locator":"126:4-127:31","expression":{"localId":"286","locator":"126:11-127:31","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"282","locator":"126:20-126:72","type":"Coalesce","operand":[{"localId":"280","locator":"126:29-126:59","type":"Start","operand":{"localId":"279","locator":"126:38-126:59","path":"relevantPeriod","type":"Property","source":{"localId":"278","locator":"126:38-126:44","name":"EDVisit","type":"QueryLetRef"}}},{"localId":"281","locator":"126:62-126:71","name":"VisitStart","type":"QueryLetRef"}]},"high":{"localId":"285","locator":"127:4-127:30","type":"End","operand":{"localId":"284","locator":"127:11-127:30","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"237","locator":"113:60-113:81","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"294","locator":"130:1-131:61","name":"HospitalizationWithObservationLengthofStay","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"294","s":[{"value":["/*Hospitalization with Observation Length of Stay returns the length in days from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\n","define function ","\"HospitalizationWithObservationLengthofStay\"","(","Encounter"," "]},{"r":"290","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"293","s":[{"r":"293","s":[{"value":["\"LengthInDays\"","("]},{"r":"292","s":[{"value":["\"HospitalizationWithObservation\"","("]},{"r":"291","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"293","locator":"131:3-131:61","name":"LengthInDays","type":"FunctionRef","operand":[{"localId":"292","locator":"131:18-131:60","name":"HospitalizationWithObservation","type":"FunctionRef","operand":[{"localId":"291","locator":"131:51-131:59","name":"Encounter","type":"OperandRef"}]}]},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"290","locator":"130:72-130:93","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"315","locator":"134:1-139:3","name":"FirstInpatientIntensiveCareUnit","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"315","s":[{"value":["/*First Inpatient Intensive Care Unit returns the first intensive care unit for the given encounter, without considering any immediately prior emergency department visit.*/\n","define function ","\"FirstInpatientIntensiveCareUnit\"","(","Encounter"," "]},{"r":"295","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"314","s":[{"r":"314","s":[{"value":["First","("]},{"r":"313","s":[{"s":[{"r":"298","s":[{"r":"297","s":[{"value":["("]},{"r":"297","s":[{"r":"296","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"297","s":[{"value":["facilityLocations"]}]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n      "]},{"r":"308","s":[{"value":["where "]},{"r":"308","s":[{"r":"302","s":[{"r":"300","s":[{"r":"299","s":[{"value":["HospitalLocation"]}]},{"value":["."]},{"r":"300","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"301","s":[{"value":["\"Intensive Care Unit\""]}]}]},{"value":["\n        and "]},{"r":"307","s":[{"r":"304","s":[{"r":"303","s":[{"value":["HospitalLocation"]}]},{"value":["."]},{"r":"304","s":[{"value":["locationPeriod"]}]}]},{"r":"307","value":[" ","during"," "]},{"r":"306","s":[{"r":"305","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"306","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n      "]},{"r":"312","s":[{"value":["sort by "]},{"r":"311","s":[{"r":"310","s":[{"value":["start of "]},{"r":"309","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]}]}]}}],"expression":{"localId":"314","locator":"135:3-139:3","type":"First","source":{"localId":"313","locator":"135:9-138:37","type":"Query","source":[{"localId":"298","locator":"135:9-135:53","alias":"HospitalLocation","expression":{"localId":"297","locator":"135:9-135:37","path":"facilityLocations","type":"Property","source":{"localId":"296","locator":"135:10-135:18","name":"Encounter","type":"OperandRef"}}}],"relationship":[],"where":{"localId":"308","locator":"136:7-137:75","type":"And","operand":[{"localId":"302","locator":"136:13-136:58","type":"InValueSet","code":{"localId":"300","locator":"136:13-136:33","path":"code","scope":"HospitalLocation","type":"Property"},"valueset":{"localId":"301","locator":"136:38-136:58","name":"Intensive Care Unit","preserve":true}},{"localId":"307","locator":"137:13-137:75","type":"IncludedIn","operand":[{"localId":"304","locator":"137:13-137:43","path":"locationPeriod","scope":"HospitalLocation","type":"Property"},{"localId":"306","locator":"137:52-137:75","path":"relevantPeriod","type":"Property","source":{"localId":"305","locator":"137:52-137:60","name":"Encounter","type":"OperandRef"}}]}]},"sort":{"localId":"312","locator":"138:7-138:37","by":[{"localId":"311","locator":"138:15-138:37","direction":"asc","type":"ByExpression","expression":{"localId":"310","locator":"138:15-138:37","type":"Start","operand":{"localId":"309","locator":"138:24-138:37","name":"locationPeriod","type":"IdentifierRef"}}}]}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"295","locator":"134:61-134:82","name":"{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"333","locator":"142:1-145:35","name":"NormalizeInterval","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"333","s":[{"value":["/*Given a datetime and a period, returns the period (if a period is provided) or the interval beginning and ending on the datetime (if a datetime is provided)*/\n","define function ","\"NormalizeInterval\"","(","pointInTime"," "]},{"r":"316","s":[{"value":["DateTime"]}]},{"value":[", ","period"," "]},{"r":"318","s":[{"value":["Interval\u003c"]},{"r":"317","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"332","s":[{"r":"332","s":[{"value":["if "]},{"r":"320","s":[{"r":"319","s":[{"value":["pointInTime"]}]},{"value":[" is not null"]}]},{"value":[" then "]},{"r":"323","s":[{"value":["Interval["]},{"r":"321","s":[{"value":["pointInTime"]}]},{"value":[", "]},{"r":"322","s":[{"value":["pointInTime"]}]},{"value":["]"]}]},{"value":["\n    else "]},{"r":"331","s":[{"value":["if "]},{"r":"325","s":[{"r":"324","s":[{"value":["period"]}]},{"value":[" is not null"]}]},{"value":[" then "]},{"r":"326","s":[{"value":["period"]}]},{"value":[" \n    else "]},{"r":"330","s":[{"r":"327","value":["null"," as "]},{"r":"329","s":[{"value":["Interval\u003c"]},{"r":"328","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}]}]}]}]}}],"expression":{"localId":"332","locator":"143:3-145:35","type":"If","condition":{"localId":"320","locator":"143:6-143:28","type":"Not","operand":{"locator":"143:6-143:28","type":"IsNull","operand":{"localId":"319","locator":"143:6-143:16","name":"pointInTime","type":"OperandRef"}}},"then":{"localId":"323","locator":"143:35-143:68","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"321","locator":"143:44-143:54","name":"pointInTime","type":"OperandRef"},"high":{"localId":"322","locator":"143:57-143:67","name":"pointInTime","type":"OperandRef"}},"else":{"localId":"331","locator":"144:10-145:35","type":"If","condition":{"localId":"325","locator":"144:13-144:30","type":"Not","operand":{"locator":"144:13-144:30","type":"IsNull","operand":{"localId":"324","locator":"144:13-144:18","name":"period","type":"OperandRef"}}},"then":{"localId":"326","locator":"144:37-144:42","name":"period","type":"OperandRef"},"else":{"localId":"330","locator":"145:10-145:35","strict":false,"type":"As","operand":{"localId":"327","locator":"145:10-145:13","type":"Null"},"asTypeSpecifier":{"localId":"329","locator":"145:18-145:35","type":"IntervalTypeSpecifier","pointType":{"localId":"328","locator":"145:27-145:34","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}},"operand":[{"name":"pointInTime","operandTypeSpecifier":{"localId":"316","locator":"142:49-142:56","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"name":"period","operandTypeSpecifier":{"localId":"318","locator":"142:66-142:83","type":"IntervalTypeSpecifier","pointType":{"localId":"317","locator":"142:75-142:82","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"346","locator":"148:1-151:3","name":"HasStart","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"346","s":[{"value":["/*Given an interval, return true if the interval has a starting boundary specified (i.e. the start of the interval is not null and not the minimum DateTime value)*/\n","define function ","\"HasStart\"","(","period"," "]},{"r":"335","s":[{"value":["Interval\u003c"]},{"r":"334","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"345","s":[{"r":"345","s":[{"value":["not "]},{"r":"344","s":[{"value":["( "]},{"r":"344","s":[{"r":"338","s":[{"r":"337","s":[{"value":["start of "]},{"r":"336","s":[{"value":["period"]}]}]},{"value":[" is null"]}]},{"value":["\n      or "]},{"r":"343","s":[{"r":"340","s":[{"value":["start of "]},{"r":"339","s":[{"value":["period"]}]}]},{"value":[" ","="," "]},{"r":"342","s":[{"value":["minimum"," "]},{"r":"341","s":[{"value":["DateTime"]}]}]}]}]},{"value":["\n  )"]}]}]}]}]}}],"expression":{"localId":"345","locator":"149:3-151:3","type":"Not","operand":{"localId":"344","locator":"149:7-151:3","type":"Or","operand":[{"localId":"338","locator":"149:9-149:31","type":"IsNull","operand":{"localId":"337","locator":"149:9-149:23","type":"Start","operand":{"localId":"336","locator":"149:18-149:23","name":"period","type":"OperandRef"}}},{"localId":"343","locator":"150:10-150:43","type":"Equal","operand":[{"localId":"340","locator":"150:10-150:24","type":"Start","operand":{"localId":"339","locator":"150:19-150:24","name":"period","type":"OperandRef"}},{"localId":"342","locator":"150:28-150:43","valueType":"{urn:hl7-org:elm-types:r1}DateTime","type":"MinValue"}]}]}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"335","locator":"148:35-148:52","type":"IntervalTypeSpecifier","pointType":{"localId":"334","locator":"148:44-148:51","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"359","locator":"154:1-159:3","name":"HasEnd","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"359","s":[{"value":["/*Given an interval, return true if the interval has an ending boundary specified (i.e. the end of the interval is not null and not the maximum DateTime value)*/\n","define function ","\"HasEnd\"","(","period"," "]},{"r":"348","s":[{"value":["Interval\u003c"]},{"r":"347","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"358","s":[{"r":"358","s":[{"value":["not "]},{"r":"357","s":[{"value":["( \n    "]},{"r":"357","s":[{"r":"351","s":[{"r":"350","s":[{"value":["end of "]},{"r":"349","s":[{"value":["period"]}]}]},{"value":[" is null"]}]},{"value":["\n      or \n      "]},{"r":"356","s":[{"r":"353","s":[{"value":["end of "]},{"r":"352","s":[{"value":["period"]}]}]},{"value":[" ","="," "]},{"r":"355","s":[{"value":["maximum"," "]},{"r":"354","s":[{"value":["DateTime"]}]}]}]}]},{"value":["\n  )"]}]}]}]}]}}],"expression":{"localId":"358","locator":"155:3-159:3","type":"Not","operand":{"localId":"357","locator":"155:7-159:3","type":"Or","operand":[{"localId":"351","locator":"156:5-156:25","type":"IsNull","operand":{"localId":"350","locator":"156:5-156:17","type":"End","operand":{"localId":"349","locator":"156:12-156:17","name":"period","type":"OperandRef"}}},{"localId":"356","locator":"158:7-158:38","type":"Equal","operand":[{"localId":"353","locator":"158:7-158:19","type":"End","operand":{"localId":"352","locator":"158:14-158:19","name":"period","type":"OperandRef"}},{"localId":"355","locator":"158:23-158:38","valueType":"{urn:hl7-org:elm-types:r1}DateTime","type":"MaxValue"}]}]}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"348","locator":"154:33-154:50","type":"IntervalTypeSpecifier","pointType":{"localId":"347","locator":"154:42-154:49","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"369","locator":"162:1-165:24","name":"Latest","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"369","s":[{"value":["/*Given an interval, return the ending point if the interval has an ending boundary specified, otherwise, return the starting point*/\n","define function ","\"Latest\"","(","period"," "]},{"r":"361","s":[{"value":["Interval\u003c"]},{"r":"360","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"368","s":[{"r":"368","s":[{"value":["if "]},{"r":"363","s":[{"value":["( "]},{"r":"363","s":[{"value":["HasEnd","("]},{"r":"362","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":[" then \n  "]},{"r":"365","s":[{"value":["end of "]},{"r":"364","s":[{"value":["period"]}]}]},{"value":[" \n    else "]},{"r":"367","s":[{"value":["start of "]},{"r":"366","s":[{"value":["period"]}]}]}]}]}]}}],"expression":{"localId":"368","locator":"163:3-165:24","type":"If","condition":{"localId":"363","locator":"163:6-163:22","name":"HasEnd","type":"FunctionRef","operand":[{"localId":"362","locator":"163:15-163:20","name":"period","type":"OperandRef"}]},"then":{"localId":"365","locator":"164:3-164:15","type":"End","operand":{"localId":"364","locator":"164:10-164:15","name":"period","type":"OperandRef"}},"else":{"localId":"367","locator":"165:10-165:24","type":"Start","operand":{"localId":"366","locator":"165:19-165:24","name":"period","type":"OperandRef"}}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"361","locator":"162:33-162:50","type":"IntervalTypeSpecifier","pointType":{"localId":"360","locator":"162:42-162:49","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"379","locator":"168:1-171:15","name":"Earliest","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"379","s":[{"value":["/*Given an interval, return the starting point if the interval has a starting boundary specified, otherwise, return the ending point*/\n","define function ","\"Earliest\"","(","period"," "]},{"r":"371","s":[{"value":["Interval\u003c"]},{"r":"370","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"378","s":[{"r":"378","s":[{"value":["if "]},{"r":"373","s":[{"value":["( "]},{"r":"373","s":[{"value":["HasStart","("]},{"r":"372","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":[" then "]},{"r":"375","s":[{"value":["start of "]},{"r":"374","s":[{"value":["period"]}]}]},{"value":[" \n    else \n  "]},{"r":"377","s":[{"value":["end of "]},{"r":"376","s":[{"value":["period"]}]}]}]}]}]}}],"expression":{"localId":"378","locator":"169:3-171:15","type":"If","condition":{"localId":"373","locator":"169:6-169:24","name":"HasStart","type":"FunctionRef","operand":[{"localId":"372","locator":"169:17-169:22","name":"period","type":"OperandRef"}]},"then":{"localId":"375","locator":"169:31-169:45","type":"Start","operand":{"localId":"374","locator":"169:40-169:45","name":"period","type":"OperandRef"}},"else":{"localId":"377","locator":"171:3-171:15","type":"End","operand":{"localId":"376","locator":"171:10-171:15","name":"period","type":"OperandRef"}}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"371","locator":"168:35-168:52","type":"IntervalTypeSpecifier","pointType":{"localId":"370","locator":"168:44-168:51","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"387","locator":"174:1-175:48","name":"LatestOf","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"387","s":[{"value":["/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the ending point of the period if the period has an ending boundary specified, otherwise returns the starting point of the interval*/\n","define function ","\"LatestOf\"","(","pointInTime"," "]},{"r":"380","s":[{"value":["DateTime"]}]},{"value":[", ","period"," "]},{"r":"382","s":[{"value":["Interval\u003c"]},{"r":"381","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"386","s":[{"r":"386","s":[{"value":["Latest","("]},{"r":"385","s":[{"value":["NormalizeInterval","("]},{"r":"383","s":[{"value":["pointInTime"]}]},{"value":[", "]},{"r":"384","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"386","locator":"175:3-175:48","name":"Latest","type":"FunctionRef","operand":[{"localId":"385","locator":"175:10-175:47","name":"NormalizeInterval","type":"FunctionRef","operand":[{"localId":"383","locator":"175:28-175:38","name":"pointInTime","type":"OperandRef"},{"localId":"384","locator":"175:41-175:46","name":"period","type":"OperandRef"}]}]},"operand":[{"name":"pointInTime","operandTypeSpecifier":{"localId":"380","locator":"174:40-174:47","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"name":"period","operandTypeSpecifier":{"localId":"382","locator":"174:57-174:74","type":"IntervalTypeSpecifier","pointType":{"localId":"381","locator":"174:66-174:73","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"395","locator":"178:1-179:50","name":"EarliestOf","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"395","s":[{"value":["/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the starting point of the period if the period has a starting boundary specified, otherwise returns the ending point of the period*/\n","define function ","\"EarliestOf\"","(","pointInTime"," "]},{"r":"388","s":[{"value":["DateTime"]}]},{"value":[", ","period"," "]},{"r":"390","s":[{"value":["Interval\u003c"]},{"r":"389","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"394","s":[{"r":"394","s":[{"value":["Earliest","("]},{"r":"393","s":[{"value":["NormalizeInterval","("]},{"r":"391","s":[{"value":["pointInTime"]}]},{"value":[", "]},{"r":"392","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"394","locator":"179:3-179:50","name":"Earliest","type":"FunctionRef","operand":[{"localId":"393","locator":"179:12-179:49","name":"NormalizeInterval","type":"FunctionRef","operand":[{"localId":"391","locator":"179:30-179:40","name":"pointInTime","type":"OperandRef"},{"localId":"392","locator":"179:43-179:48","name":"period","type":"OperandRef"}]}]},"operand":[{"name":"pointInTime","operandTypeSpecifier":{"localId":"388","locator":"178:42-178:49","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"name":"period","operandTypeSpecifier":{"localId":"390","locator":"178:59-178:76","type":"IntervalTypeSpecifier","pointType":{"localId":"389","locator":"178:68-178:75","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]}]}}},"elm_annotations":{"statements":[{"children":[{"children":[{"children":[{"text":"define \"ED Encounter\":\n  "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"10"}],"ref_id":"11"}],"define_name":"ED Encounter"},{"children":[{"children":[{"children":[{"text":"define \"Inpatient Encounter\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Encounter Inpatient\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"12"}],"node_type":"Retrieve","ref_id":"12"},{"children":[{"text":" EncounterInpatient"}]}],"ref_id":"13"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"EncounterInpatient"}]}],"ref_id":"14"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"15"}],"node_type":"Property","ref_id":"15"},{"children":[{"text":" ends during day of "}],"ref_id":"17"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"16"}],"ref_id":"17"}],"ref_id":"17"}],"node_type":"Query","ref_id":"18"}],"ref_id":"19"}],"define_name":"Inpatient Encounter"},{"children":[{"children":[]},{"children":[]},{"children":[]},{"children":[{"children":[{"text":"/*@description: Returns an interval of date values extracted from the input interval of date-time values\n@comment: This function returns an interval constructed using the `date from` extractor on the start\nand end values of the input date-time interval. Note that using a precision specifier as part of a\ntiming phrase is preferred to communicate intent to perform day-level comparison, as well as for\ngeneral readability.*/\ndefine function \"ToDateInterval\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"20"},{"children":[{"text":"\u003e"}]}],"ref_id":"21"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"22"}],"node_type":"Start","ref_id":"23"}],"ref_id":"24"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"date from "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"25"}],"node_type":"End","ref_id":"26"}],"ref_id":"27"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"28"}],"node_type":"Interval","ref_id":"28"}],"ref_id":"29"}],"define_name":"ToDateInterval"},{"children":[{"children":[{"children":[{"text":"/*calculates the difference in calendar days between the start and end of the given interval.*/\ndefine function \"LengthInDays\"(Value "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"30"},{"children":[{"text":"\u003e"}]}],"ref_id":"31"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"difference in days between "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"Value"}]}],"node_type":"OperandRef","ref_id":"32"}],"node_type":"Start","ref_id":"33"},{"children":[{"text":" and "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"Value"}]}],"node_type":"OperandRef","ref_id":"34"}],"node_type":"End","ref_id":"35"}],"node_type":"DifferenceBetween","ref_id":"36"}],"node_type":"DifferenceBetween","ref_id":"36"}],"ref_id":"37"}],"define_name":"LengthInDays"},{"children":[{"children":[{"children":[{"text":"/*returns list of all locations within an encounter, including locations for immediately prior ED visit.*/\ndefine function \"HospitalizationLocations\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"38"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"39"},{"children":[{"text":" Visit"}]}],"ref_id":"40"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"41"}],"node_type":"Retrieve","ref_id":"41"},{"children":[{"text":" LastED"}]}],"ref_id":"42"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"43"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"44"}],"node_type":"Property","ref_id":"44"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"48"},{"children":[{"text":" or less on or before"}]}],"ref_id":"49"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"45"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"46"}],"node_type":"Property","ref_id":"46"}],"node_type":"Start","ref_id":"47"}],"ref_id":"49"}],"ref_id":"49"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"50"}],"node_type":"End","ref_id":"51"}],"ref_id":"52"}],"ref_id":"53"}],"ref_id":"54"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"55"}],"ref_id":"56"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"node_type":"QueryLetRef","ref_id":"57"},{"children":[{"text":" is null"}]}],"ref_id":"58"},{"children":[{"text":" then "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"59"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"ref_id":"60"}],"ref_id":"60"},{"children":[{"text":" \n      else "}]},{"children":[{"children":[{"text":"flatten "}]},{"children":[{"children":[{"text":"{ "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"61"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"ref_id":"62"}],"ref_id":"62"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"63"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"ref_id":"64"}],"ref_id":"64"},{"children":[{"text":" }"}]}],"node_type":"List","ref_id":"65"}],"ref_id":"66"}],"node_type":"If","ref_id":"67"}],"ref_id":"68"}],"node_type":"Query","ref_id":"69"}],"node_type":"Query","ref_id":"69"}],"ref_id":"70"}],"define_name":"HospitalizationLocations"},{"children":[{"children":[{"children":[{"text":"/*Returns the arrival time in the ED for the encounter.*/\ndefine function \"EmergencyDepartmentArrivalTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"71"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"\"HospitalizationLocations\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"72"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"73"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"73"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"74"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"HospitalLocation"}]}],"ref_id":"75"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"76"}],"ref_id":"76"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}],"ref_id":"77"}],"ref_id":"78"}],"ref_id":"78"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"79"}],"node_type":"Start","ref_id":"80"}],"ref_id":"81"}],"ref_id":"82"}],"ref_id":"83"},{"children":[{"text":"\n  )"}]}],"ref_id":"84"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"85"}],"node_type":"Property","ref_id":"85"}],"node_type":"Start","ref_id":"86"}],"node_type":"Start","ref_id":"86"}],"ref_id":"87"}],"define_name":"EmergencyDepartmentArrivalTime"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization returns the total interval for admission to discharge for the given encounter, or for the admission of any immediately prior emergency department visit to the discharge of the given encounter.*/\ndefine function \"Hospitalization\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"90"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"91"},{"children":[{"text":" Visit"}]}],"ref_id":"92"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"93"}],"node_type":"Retrieve","ref_id":"93"},{"children":[{"text":" LastED"}]}],"ref_id":"94"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"95"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"96"}],"node_type":"Property","ref_id":"96"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"100"},{"children":[{"text":" or less on or before"}]}],"ref_id":"101"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"97"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"98"}],"node_type":"Property","ref_id":"98"}],"node_type":"Start","ref_id":"99"}],"ref_id":"101"}],"ref_id":"101"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"102"}],"node_type":"End","ref_id":"103"}],"ref_id":"104"}],"ref_id":"105"}],"ref_id":"106"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"107"}],"ref_id":"108"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"109"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"110"}],"node_type":"Property","ref_id":"110"}],"node_type":"Start","ref_id":"111"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"112"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"113"}],"node_type":"Property","ref_id":"113"}],"node_type":"Start","ref_id":"114"},{"children":[{"text":")"}]}],"ref_id":"115"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"116"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"117"}],"node_type":"Property","ref_id":"117"}],"ref_id":"118"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"119"}],"ref_id":"120"}],"node_type":"Query","ref_id":"121"}],"node_type":"Query","ref_id":"121"}],"ref_id":"122"}],"define_name":"Hospitalization"},{"children":[{"children":[{"children":[{"text":"/*Returns admission time for an encounter or for immediately prior emergency department visit.*/\ndefine function \"HospitalAdmissionTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"88"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"\"Hospitalization\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"89"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"123"}],"node_type":"Start","ref_id":"124"}],"node_type":"Start","ref_id":"124"}],"ref_id":"125"}],"define_name":"HospitalAdmissionTime"},{"children":[{"children":[{"children":[{"text":"/*Returns earliest arrival time for an encounter including any prior ED visit.*/\ndefine function \"HospitalArrivalTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"126"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"\"HospitalizationLocations\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"127"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"128"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"128"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"129"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"130"}],"node_type":"Start","ref_id":"131"}],"ref_id":"132"}],"ref_id":"133"}],"ref_id":"134"},{"children":[{"text":"\n  )"}]}],"ref_id":"135"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"136"}],"node_type":"Property","ref_id":"136"}],"node_type":"Start","ref_id":"137"}],"node_type":"Start","ref_id":"137"}],"ref_id":"138"}],"define_name":"HospitalArrivalTime"},{"children":[{"children":[{"children":[{"text":"/*Returns the length of stay in days (i.e. the number of days between admission and discharge) for the given encounter, or from the admission of any immediately prior emergency department visit to the discharge of the encounter*/\ndefine function \"HospitalizationLengthofStay\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"141"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"LengthInDays("}]},{"children":[{"children":[{"text":"\"Hospitalization\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"142"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"143"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"144"}],"node_type":"FunctionRef","ref_id":"144"}],"ref_id":"145"}],"define_name":"HospitalizationLengthofStay"},{"children":[{"children":[{"children":[{"text":"/*Returns the latest departure time for encounter including any prior ED visit.*/\ndefine function \"HospitalDepartureTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"146"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"\"HospitalizationLocations\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"147"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"148"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"148"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"149"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"150"}],"node_type":"Start","ref_id":"151"}],"ref_id":"152"}],"ref_id":"153"}],"ref_id":"154"},{"children":[{"text":"\n  )"}]}],"ref_id":"155"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"156"}],"node_type":"Property","ref_id":"156"}],"node_type":"End","ref_id":"157"}],"node_type":"End","ref_id":"157"}],"ref_id":"158"}],"define_name":"HospitalDepartureTime"},{"children":[{"children":[{"children":[{"text":"/*Hospital Discharge Time returns the discharge time for an encounter*/\ndefine function \"HospitalDischargeTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"159"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"160"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"161"}],"node_type":"Property","ref_id":"161"}],"node_type":"End","ref_id":"162"}],"node_type":"End","ref_id":"162"}],"ref_id":"163"}],"define_name":"HospitalDischargeTime"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization with Observation and Outpatient Surgery Service returns the total interval from the start of any immediately prior emergency department visit, outpatient surgery visit or observation visit to the discharge of the given encounter.*/\ndefine function \"HospitalizationWithObservationAndOutpatientSurgeryService\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"164"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"165"},{"children":[{"text":" Visit"}]}],"ref_id":"166"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"ObsVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Observation Services\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"167"}],"node_type":"Retrieve","ref_id":"167"},{"children":[{"text":" LastObs"}]}],"ref_id":"168"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastObs"}]}],"ref_id":"169"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"170"}],"node_type":"Property","ref_id":"170"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"174"},{"children":[{"text":" or less on or before"}]}],"ref_id":"175"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"171"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"172"}],"node_type":"Property","ref_id":"172"}],"node_type":"Start","ref_id":"173"}],"ref_id":"175"}],"ref_id":"175"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"176"}],"node_type":"End","ref_id":"177"}],"ref_id":"178"}],"ref_id":"179"}],"ref_id":"180"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"181"}],"ref_id":"182"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"VisitStart: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"ObsVisit"}]}],"ref_id":"183"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"184"}],"node_type":"Property","ref_id":"184"}],"node_type":"Start","ref_id":"185"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"186"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"187"}],"node_type":"Property","ref_id":"187"}],"node_type":"Start","ref_id":"188"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"189"}],"ref_id":"190"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"191"}],"node_type":"Retrieve","ref_id":"191"},{"children":[{"text":" LastED"}]}],"ref_id":"192"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"193"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"194"}],"node_type":"Property","ref_id":"194"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"196"},{"children":[{"text":" or less on or before"}]}],"ref_id":"197"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"195"}],"ref_id":"197"}],"ref_id":"197"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"198"}],"node_type":"End","ref_id":"199"}],"ref_id":"200"}],"ref_id":"201"}],"ref_id":"202"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"203"}],"ref_id":"204"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"VisitStartWithED: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"205"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"206"}],"node_type":"Property","ref_id":"206"}],"node_type":"Start","ref_id":"207"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"208"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"209"}],"ref_id":"210"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"OutpatientSurgeryVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Outpatient Surgery Service\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"211"}],"node_type":"Retrieve","ref_id":"211"},{"children":[{"text":" LastSurgeryOP"}]}],"ref_id":"212"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastSurgeryOP"}]}],"ref_id":"213"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"214"}],"node_type":"Property","ref_id":"214"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"216"},{"children":[{"text":" or less on or before"}]}],"ref_id":"217"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"VisitStartWithED"}]}],"node_type":"QueryLetRef","ref_id":"215"}],"ref_id":"217"}],"ref_id":"217"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"218"}],"node_type":"End","ref_id":"219"}],"ref_id":"220"}],"ref_id":"221"}],"ref_id":"222"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"223"}],"ref_id":"224"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"OutpatientSurgeryVisit"}]}],"ref_id":"225"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"226"}],"node_type":"Property","ref_id":"226"}],"node_type":"Start","ref_id":"227"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"VisitStartWithED"}]}],"node_type":"QueryLetRef","ref_id":"228"},{"children":[{"text":")"}]}],"ref_id":"229"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"230"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"231"}],"node_type":"Property","ref_id":"231"}],"ref_id":"232"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"233"}],"ref_id":"234"}],"node_type":"Query","ref_id":"235"}],"node_type":"Query","ref_id":"235"}],"ref_id":"236"}],"define_name":"HospitalizationWithObservationAndOutpatientSurgeryService"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization with Observation returns the total interval from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\ndefine function \"HospitalizationWithObservation\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"237"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"238"},{"children":[{"text":" Visit"}]}],"ref_id":"239"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"ObsVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Observation Services\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"240"}],"node_type":"Retrieve","ref_id":"240"},{"children":[{"text":" LastObs"}]}],"ref_id":"241"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastObs"}]}],"ref_id":"242"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"243"}],"node_type":"Property","ref_id":"243"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"247"},{"children":[{"text":" or less on or before"}]}],"ref_id":"248"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"244"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"245"}],"node_type":"Property","ref_id":"245"}],"node_type":"Start","ref_id":"246"}],"ref_id":"248"}],"ref_id":"248"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"249"}],"node_type":"End","ref_id":"250"}],"ref_id":"251"}],"ref_id":"252"}],"ref_id":"253"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"254"}],"ref_id":"255"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"VisitStart: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"ObsVisit"}]}],"ref_id":"256"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"257"}],"node_type":"Property","ref_id":"257"}],"node_type":"Start","ref_id":"258"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"259"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"260"}],"node_type":"Property","ref_id":"260"}],"node_type":"Start","ref_id":"261"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"262"}],"ref_id":"263"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"264"}],"node_type":"Retrieve","ref_id":"264"},{"children":[{"text":" LastED"}]}],"ref_id":"265"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"266"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"267"}],"node_type":"Property","ref_id":"267"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"269"},{"children":[{"text":" or less on or before"}]}],"ref_id":"270"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"268"}],"ref_id":"270"}],"ref_id":"270"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"271"}],"node_type":"End","ref_id":"272"}],"ref_id":"273"}],"ref_id":"274"}],"ref_id":"275"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"276"}],"ref_id":"277"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"278"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"279"}],"node_type":"Property","ref_id":"279"}],"node_type":"Start","ref_id":"280"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"281"},{"children":[{"text":")"}]}],"ref_id":"282"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"283"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"284"}],"node_type":"Property","ref_id":"284"}],"ref_id":"285"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"286"}],"ref_id":"287"}],"node_type":"Query","ref_id":"288"}],"node_type":"Query","ref_id":"288"}],"ref_id":"289"}],"define_name":"HospitalizationWithObservation"},{"children":[{"children":[{"children":[{"text":"/*Hospitalization with Observation Length of Stay returns the length in days from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\ndefine function \"HospitalizationWithObservationLengthofStay\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"290"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"\"LengthInDays\"("}]},{"children":[{"children":[{"text":"\"HospitalizationWithObservation\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"291"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"292"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"293"}],"node_type":"FunctionRef","ref_id":"293"}],"ref_id":"294"}],"define_name":"HospitalizationWithObservationLengthofStay"},{"children":[{"children":[{"children":[{"text":"/*First Inpatient Intensive Care Unit returns the first intensive care unit for the given encounter, without considering any immediately prior emergency department visit.*/\ndefine function \"FirstInpatientIntensiveCareUnit\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"295"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"296"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"node_type":"Property","ref_id":"297"}],"node_type":"Property","ref_id":"297"},{"children":[{"text":")"}]}],"node_type":"Property","ref_id":"297"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"298"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"HospitalLocation"}]}],"ref_id":"299"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"300"}],"ref_id":"300"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Intensive Care Unit\""}]}],"ref_id":"301"}],"node_type":"InValueSet","ref_id":"302"},{"children":[{"text":"\n        and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"HospitalLocation"}]}],"ref_id":"303"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"304"}],"node_type":"Property","ref_id":"304"},{"children":[{"text":" during "}],"node_type":"IncludedIn","ref_id":"307"},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"305"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"306"}],"node_type":"Property","ref_id":"306"}],"node_type":"IncludedIn","ref_id":"307"}],"ref_id":"308"}],"ref_id":"308"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"309"}],"node_type":"Start","ref_id":"310"}],"ref_id":"311"}],"ref_id":"312"}],"ref_id":"313"},{"children":[{"text":"\n  )"}]}],"node_type":"First","ref_id":"314"}],"node_type":"First","ref_id":"314"}],"ref_id":"315"}],"define_name":"FirstInpatientIntensiveCareUnit"},{"children":[{"children":[{"children":[{"text":"/*Given a datetime and a period, returns the period (if a period is provided) or the interval beginning and ending on the datetime (if a datetime is provided)*/\ndefine function \"NormalizeInterval\"(pointInTime "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"316"},{"children":[{"text":", period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"317"},{"children":[{"text":"\u003e"}]}],"ref_id":"318"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"pointInTime"}]}],"node_type":"OperandRef","ref_id":"319"},{"children":[{"text":" is not null"}]}],"ref_id":"320"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"pointInTime"}]}],"ref_id":"321"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"pointInTime"}]}],"ref_id":"322"},{"children":[{"text":"]"}]}],"ref_id":"323"},{"children":[{"text":"\n    else "}]},{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"324"},{"children":[{"text":" is not null"}]}],"ref_id":"325"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"period"}]}],"ref_id":"326"},{"children":[{"text":" \n    else "}]},{"children":[{"children":[{"text":"null as "}],"node_type":"Null","ref_id":"327"},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"328"},{"children":[{"text":"\u003e"}]}],"ref_id":"329"}],"ref_id":"330"}],"ref_id":"331"}],"node_type":"If","ref_id":"332"}],"node_type":"If","ref_id":"332"}],"ref_id":"333"}],"define_name":"NormalizeInterval"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return true if the interval has a starting boundary specified (i.e. the start of the interval is not null and not the minimum DateTime value)*/\ndefine function \"HasStart\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"334"},{"children":[{"text":"\u003e"}]}],"ref_id":"335"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"not "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"336"}],"node_type":"Start","ref_id":"337"},{"children":[{"text":" is null"}]}],"node_type":"IsNull","ref_id":"338"},{"children":[{"text":"\n      or "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"339"}],"node_type":"Start","ref_id":"340"},{"children":[{"text":" = "}]},{"children":[{"children":[{"text":"minimum "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"341"}],"node_type":"MinValue","ref_id":"342"}],"node_type":"Equal","ref_id":"343"}],"node_type":"Or","ref_id":"344"},{"children":[{"text":"\n  )"}]}],"node_type":"Or","ref_id":"344"}],"node_type":"Not","ref_id":"345"}],"node_type":"Not","ref_id":"345"}],"ref_id":"346"}],"define_name":"HasStart"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return true if the interval has an ending boundary specified (i.e. the end of the interval is not null and not the maximum DateTime value)*/\ndefine function \"HasEnd\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"347"},{"children":[{"text":"\u003e"}]}],"ref_id":"348"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"not "}]},{"children":[{"children":[{"text":"( \n    "}]},{"children":[{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"349"}],"node_type":"End","ref_id":"350"},{"children":[{"text":" is null"}]}],"node_type":"IsNull","ref_id":"351"},{"children":[{"text":"\n      or \n      "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"352"}],"node_type":"End","ref_id":"353"},{"children":[{"text":" = "}]},{"children":[{"children":[{"text":"maximum "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"354"}],"node_type":"MaxValue","ref_id":"355"}],"node_type":"Equal","ref_id":"356"}],"node_type":"Or","ref_id":"357"},{"children":[{"text":"\n  )"}]}],"node_type":"Or","ref_id":"357"}],"node_type":"Not","ref_id":"358"}],"node_type":"Not","ref_id":"358"}],"ref_id":"359"}],"define_name":"HasEnd"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return the ending point if the interval has an ending boundary specified, otherwise, return the starting point*/\ndefine function \"Latest\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"360"},{"children":[{"text":"\u003e"}]}],"ref_id":"361"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"HasEnd("}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"362"},{"children":[{"text":")"}]}],"ref_id":"363"},{"children":[{"text":")"}]}],"ref_id":"363"},{"children":[{"text":" then \n  "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"364"}],"ref_id":"365"},{"children":[{"text":" \n    else "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"366"}],"ref_id":"367"}],"node_type":"If","ref_id":"368"}],"node_type":"If","ref_id":"368"}],"ref_id":"369"}],"define_name":"Latest"},{"children":[{"children":[{"children":[{"text":"/*Given an interval, return the starting point if the interval has a starting boundary specified, otherwise, return the ending point*/\ndefine function \"Earliest\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"370"},{"children":[{"text":"\u003e"}]}],"ref_id":"371"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"HasStart("}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"372"},{"children":[{"text":")"}]}],"ref_id":"373"},{"children":[{"text":")"}]}],"ref_id":"373"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"374"}],"ref_id":"375"},{"children":[{"text":" \n    else \n  "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"376"}],"ref_id":"377"}],"node_type":"If","ref_id":"378"}],"node_type":"If","ref_id":"378"}],"ref_id":"379"}],"define_name":"Earliest"},{"children":[{"children":[{"children":[{"text":"/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the ending point of the period if the period has an ending boundary specified, otherwise returns the starting point of the interval*/\ndefine function \"LatestOf\"(pointInTime "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"380"},{"children":[{"text":", period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"381"},{"children":[{"text":"\u003e"}]}],"ref_id":"382"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Latest("}]},{"children":[{"children":[{"text":"NormalizeInterval("}]},{"children":[{"children":[{"text":"pointInTime"}]}],"node_type":"OperandRef","ref_id":"383"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"384"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"385"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"386"}],"node_type":"FunctionRef","ref_id":"386"}],"ref_id":"387"}],"define_name":"LatestOf"},{"children":[{"children":[{"children":[{"text":"/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the starting point of the period if the period has a starting boundary specified, otherwise returns the ending point of the period*/\ndefine function \"EarliestOf\"(pointInTime "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"388"},{"children":[{"text":", period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"389"},{"children":[{"text":"\u003e"}]}],"ref_id":"390"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Earliest("}]},{"children":[{"children":[{"text":"NormalizeInterval("}]},{"children":[{"children":[{"text":"pointInTime"}]}],"node_type":"OperandRef","ref_id":"391"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"392"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"393"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"394"}],"node_type":"FunctionRef","ref_id":"394"}],"ref_id":"395"}],"define_name":"EarliestOf"}],"identifier":{"id":"MATGlobalCommonFunctionsQDM","version":"8.0.000"}},"is_main_library":false,"is_top_level":true,"library_name":"MATGlobalCommonFunctionsQDM","library_version":"8.0.000","statement_dependencies":[{"_id":"68923fa0a83e15671c2e53ea","statement_name":"EarliestOf","statement_references":[{"_id":"68923fa0a83e15671c2e53e8","hqmf_id":null,"library_name":"MATGlobalCommonFunctionsQDM","statement_name":"Earliest"},{"_id":"68923fa0a83e15671c2e53e9","hqmf_id":null,"library_name":"MATGlobalCommonFunctionsQDM","statement_name":"NormalizeInterval"}]},{"_id":"68923fa0a83e15671c2e53eb","statement_name":"Earliest","statement_references":[{"_id":"68923fa4a83e15671c2e54ff","hqmf_id":null,"library_name":"MATGlobalCommonFunctionsQDM","statement_name":"HasStart"}]},{"_id":"68923fa0a83e15671c2e53ec","statement_name":"HasStart"},{"_id":"68923fa0a83e15671c2e53ed","statement_name":"NormalizeInterval"}]}],"created_at":null,"description":"Percentage of patients with an office visit within the measurement period and with a new diagnosis of clinically significant Benign Prostatic Hyperplasia who have International Prostate Symptoms Score (IPSS) or American Urological Association (AUA) Symptom Index (SI) documented at time of diagnosis and again 6-12 months later with an improvement of 3 points","hqmf_id":"8A6D0454-8DF0-2D9F-018E-388BFC372073","hqmf_set_id":"1C05C6C0-8099-4270-83CE-292CF6E35C51","hqmf_version_number":"6.2.000","main_cql_library":"UrinarySymptomScoreChangeAfterBenignProstaticHyperplasia","measure_attributes":[{"code":"OTH","value":"771","name":"eCQM Identifier (Measure Authoring Tool)","code_obj":{"type":"CD","null_flavor":"OTH","original_text":"eCQM Identifier (Measure Authoring Tool)"},"value_obj":{"type":"ED","value":"771","media_type":"text/plain"}},{"code":"OTH","value":"Not Applicable","name":"CBE Number","code_obj":{"type":"CD","null_flavor":"OTH","original_text":"CBE Number"},"value_obj":{"type":"ED","value":"Not Applicable","media_type":"text/plain"}},{"code":"COPY","value":"Limited proprietary coding is contained in the measure specifications for user convenience. Users of the proprietary code sets should obtain all necessary licenses from the owners of these code sets. Large Urology Group Practice Association (LUGPA) and Oregon Urology Institute (OUI) disclaim all liability for use or accuracy of any third party codes contained in the specifications.\n\nCPT(R) contained in the Measure specifications is copyright 2004-2023. American Medical Association. LOINC(R) copyright 2004-2023 Regenstrief Institute, Inc. This material contains SNOMED Clinical Terms(R) (SNOMED CT[R]) copyright 2004-2023 International Health Terminology Standards Development Organisation. ICD-10 copyright 2023 World Health Organization. All Rights Reserved.","name":"Copyright","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"COPY","title":"Copyright"},"value_obj":{"type":"ED","value":"Limited proprietary coding is contained in the measure specifications for user convenience. Users of the proprietary code sets should obtain all necessary licenses from the owners of these code sets. Large Urology Group Practice Association (LUGPA) and Oregon Urology Institute (OUI) disclaim all liability for use or accuracy of any third party codes contained in the specifications.\n\nCPT(R) contained in the Measure specifications is copyright 2004-2023. American Medical Association. LOINC(R) copyright 2004-2023 Regenstrief Institute, Inc. This material contains SNOMED Clinical Terms(R) (SNOMED CT[R]) copyright 2004-2023 International Health Terminology Standards Development Organisation. ICD-10 copyright 2023 World Health Organization. All Rights Reserved.","media_type":"text/plain"}},{"code":"DISC","value":"The performance measure is not a clinical guideline and does not establish a standard of medical care, and has not been tested for all potential applications.\n\nTHE MEASURE AND SPECIFICATIONS ARE PROVIDED \"AS IS\" WITHOUT WARRANTY OF ANY KIND.\n\nDue to technical limitations, registered trademarks are indicated by (R) or [R], and unregistered trademarks are indicated by (TM) or [TM].","name":"Disclaimer","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DISC","title":"Disclaimer"},"value_obj":{"type":"ED","value":"The performance measure is not a clinical guideline and does not establish a standard of medical care, and has not been tested for all potential applications.\n\nTHE MEASURE AND SPECIFICATIONS ARE PROVIDED \"AS IS\" WITHOUT WARRANTY OF ANY KIND.\n\nDue to technical limitations, registered trademarks are indicated by (R) or [R], and unregistered trademarks are indicated by (TM) or [TM].","media_type":"text/plain"}},{"code":"MSRSCORE","name":"Measure Scoring","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRSCORE","title":"Measure Scoring"},"value_obj":{"type":"CD","system":"2.16.840.1.113883.5.1063","code":"PROPOR","title":"Proportion"}},{"code":"MSRTYPE","name":"Measure Type","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRTYPE","title":"Measure Type"},"value_obj":{"type":"CD","system":"2.16.840.1.113883.5.1063","code":"PRO-PM","title":"PRO-PM"}},{"code":"STRAT","value":"None","name":"Stratification","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"STRAT","title":"Stratification"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"MSRADJ","value":"None","name":"Risk Adjustment","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRADJ","title":"Risk Adjustment"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"MSRAGG","value":"None","name":"Rate Aggregation","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRAGG","title":"Rate Aggregation"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"RAT","value":"Benign prostatic hyperplasia (BPH) is one of the most common conditions affecting older men, with a prevalence of 50% by age 60 years and 90% by the ninth decade of life (Medina et al., 1999). The enlarged gland had been proposed to contribute to the overall lower urinary tract symptoms (LUTS) complex (McVary et al., 2014). Although LUTS secondary to BPH is not often a life-threatening condition, the impact of LUTS/BPH on quality of life can be significant (Wei et al., 2005). The American Urological Association Symptom Index (AUA-SI) and the International Prostate Symptom Score (IPSS) were developed to measure outcomes in studies of different treatments for BPH (Wuerstle et al., 2011). The IPSS uses the same questions as the AUA-SI, but also adds a disease-specific quality of life question (OLeary, 2005). The IPSS was adopted in 1993 by the World Health Organization. It is a reproducible, validated index designed to determine disease severity and response to therapy (D’Silva et al., 2014). It includes 3 storage symptom questions (frequency, nocturia, urgency) and four voiding symptoms (feeling of incomplete emptying, intermittency, straining, and a weak stream) as well as a Bother question: If you were to spend the rest of your life with your urinary condition just the way it is now, how would you feel about that? A three-point improvement in the score is considered meaningful (McVary et al., 2014).","name":"Rationale","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"RAT","title":"Rationale"},"value_obj":{"type":"ED","value":"Benign prostatic hyperplasia (BPH) is one of the most common conditions affecting older men, with a prevalence of 50% by age 60 years and 90% by the ninth decade of life (Medina et al., 1999). The enlarged gland had been proposed to contribute to the overall lower urinary tract symptoms (LUTS) complex (McVary et al., 2014). Although LUTS secondary to BPH is not often a life-threatening condition, the impact of LUTS/BPH on quality of life can be significant (Wei et al., 2005). The American Urological Association Symptom Index (AUA-SI) and the International Prostate Symptom Score (IPSS) were developed to measure outcomes in studies of different treatments for BPH (Wuerstle et al., 2011). The IPSS uses the same questions as the AUA-SI, but also adds a disease-specific quality of life question (OLeary, 2005). The IPSS was adopted in 1993 by the World Health Organization. It is a reproducible, validated index designed to determine disease severity and response to therapy (D’Silva et al., 2014). It includes 3 storage symptom questions (frequency, nocturia, urgency) and four voiding symptoms (feeling of incomplete emptying, intermittency, straining, and a weak stream) as well as a Bother question: If you were to spend the rest of your life with your urinary condition just the way it is now, how would you feel about that? A three-point improvement in the score is considered meaningful (McVary et al., 2014).","media_type":"text/plain"}},{"code":"CRS","value":"The symptoms of BPH are lower urinary tract symptoms (LUTS). There are other disorders with similar symptoms that need to be excluded. History, physical examination, and testing are required prior to a diagnosis of BPH. IPSS by itself is not a reliable diagnostic tool for LUTS suggestive of BPH but serves as a quantitative measure of LUTS after the diagnosis is established (D’Silva et al., 2014). Medical and surgical interventions for BPH recommend a follow up IPSS evaluation to determine effectiveness of treatment. IPSS should be evaluated at the time of diagnosis and after definitive treatment.","name":"Clinical Recommendation Statement","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"CRS","title":"Clinical Recommendation Statement"},"value_obj":{"type":"ED","value":"The symptoms of BPH are lower urinary tract symptoms (LUTS). There are other disorders with similar symptoms that need to be excluded. History, physical examination, and testing are required prior to a diagnosis of BPH. IPSS by itself is not a reliable diagnostic tool for LUTS suggestive of BPH but serves as a quantitative measure of LUTS after the diagnosis is established (D’Silva et al., 2014). Medical and surgical interventions for BPH recommend a follow up IPSS evaluation to determine effectiveness of treatment. IPSS should be evaluated at the time of diagnosis and after definitive treatment.","media_type":"text/plain"}},{"code":"IDUR","value":"A meaningful improvement is a negative 3-point change in the urinary symptom score. The quality improves when a higher proportion of people meet the meaningful improvement definition.","name":"Improvement Notation","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"IDUR","title":"Improvement Notation"},"value_obj":{"type":"ED","value":"A meaningful improvement is a negative 3-point change in the urinary symptom score. The quality improves when a higher proportion of people meet the meaningful improvement definition.","media_type":"text/plain"}},{"code":"REF","value":"CITATIOND'Silva, K. A., Dahm, P., \u0026 Wong, C. L. (2014). Does this man with lower urinary tract symptoms have bladder outlet obstruction? The Rational Clinical Examination: A systematic review. Journal of the American Medical Association, 312(5), 535-542. Retrieved from\nhttps://www.ncbi.nlm.nih.gov/pubmed/25096693","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIOND'Silva, K. A., Dahm, P., \u0026 Wong, C. L. (2014). Does this man with lower urinary tract symptoms have bladder outlet obstruction? The Rational Clinical Examination: A systematic review. Journal of the American Medical Association, 312(5), 535-542. Retrieved from\nhttps://www.ncbi.nlm.nih.gov/pubmed/25096693","media_type":"text/plain"}},{"code":"REF","value":"CITATIONMcVary, K. T., Roehrborn, C. G., Avins, A. L., et al. (2014). Management of benign prostatic hyperplasia. Retrieved from\nhttps://pubmed.ncbi.nlm.nih.gov/21420124/","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONMcVary, K. T., Roehrborn, C. G., Avins, A. L., et al. (2014). Management of benign prostatic hyperplasia. Retrieved from\nhttps://pubmed.ncbi.nlm.nih.gov/21420124/","media_type":"text/plain"}},{"code":"REF","value":"CITATIONMedina, J. J., Parra, R. O., \u0026 Moore, R. G. (1999). Benign prostatic hyperplasia (the aging prostate). Medical Clinics of North America, 83(5), 1213-1229. Retrieved from\nhttp://www.sciencedirect.com/science/article/pii/S0025712505701590","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONMedina, J. J., Parra, R. O., \u0026 Moore, R. G. (1999). Benign prostatic hyperplasia (the aging prostate). Medical Clinics of North America, 83(5), 1213-1229. Retrieved from\nhttp://www.sciencedirect.com/science/article/pii/S0025712505701590","media_type":"text/plain"}},{"code":"REF","value":"CITATIONO’Leary, M. P. (2005). Validity of the Bother Score in the evaluation and treatment of symptomatic benign prostatic hyperplasia. Reviews in Urology, 7(1), 1-10. Retrieved from\nhttps://www.ncbi.nlm.nih.gov/pmc/articles/PMC1477553/","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONO’Leary, M. P. (2005). Validity of the Bother Score in the evaluation and treatment of symptomatic benign prostatic hyperplasia. Reviews in Urology, 7(1), 1-10. Retrieved from\nhttps://www.ncbi.nlm.nih.gov/pmc/articles/PMC1477553/","media_type":"text/plain"}},{"code":"REF","value":"CITATIONWei, J., Calhoun, E., \u0026 Jacobsen, S. (2005). Urologic diseases in America project: Benign prostatic hyperplasia. Journal of Urology, 173(4), 1256-1261. Retrieved from\nhttps://www.ncbi.nlm.nih.gov/pubmed/15758764","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONWei, J., Calhoun, E., \u0026 Jacobsen, S. (2005). Urologic diseases in America project: Benign prostatic hyperplasia. Journal of Urology, 173(4), 1256-1261. Retrieved from\nhttps://www.ncbi.nlm.nih.gov/pubmed/15758764","media_type":"text/plain"}},{"code":"REF","value":"CITATIONWuerstle, M. C., Van Den Eeden, S. K., Poon, K. T., et al. (2011). Contribution of common medications to lower urinary tract symptoms in men. Archives of Internal Medicine, 171(18), 1680-1682.\nRetrieved from https://www.ncbi.nlm.nih.gov/pubmed/21987200","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONWuerstle, M. C., Van Den Eeden, S. K., Poon, K. T., et al. (2011). Contribution of common medications to lower urinary tract symptoms in men. Archives of Internal Medicine, 171(18), 1680-1682.\nRetrieved from https://www.ncbi.nlm.nih.gov/pubmed/21987200","media_type":"text/plain"}},{"code":"DEF","value":"Clinically significant Benign Prostatic Hyperplasia (BPH) is BPH with lower urinary tract symptoms (LUTS).\nIPSS - International Prostate Symptom Score\nAUA-SI - American Urological Association-Symptom Index\nQOL - Quality of Life score","name":"Definition","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DEF","title":"Definition"},"value_obj":{"type":"ED","value":"Clinically significant Benign Prostatic Hyperplasia (BPH) is BPH with lower urinary tract symptoms (LUTS).\nIPSS - International Prostate Symptom Score\nAUA-SI - American Urological Association-Symptom Index\nQOL - Quality of Life score","media_type":"text/plain"}},{"code":"GUIDE","value":"The IPSS is inclusive of the symptom index score and the quality of life score. The AUA-SI is the symptom index score alone and must be added to the QOL score. The AUA-SI with the QOL equals the IPSS. Both of these are the urinary symptom score.\n\nThe patient must have a urinary symptom score (USS) within 1 month after initial diagnosis. If more than one USS in the initial one month, then the first USS counts. The patient must have a USS again at 6-12 months after the initial diagnosis and if more than one USS in this time frame, then the last USS counts. \n\nThe result of the test is a numeric value that relates to a continuous numeric scale. Reported either as an integer, a ratio, a real number, or a range. The test result value may optionally contain a relational operator from the set {\u003c=, \u003c, \u003e, \u003e=}. Valid values for a quantitative test are of the form “7”, “-7”, “7.4”, “-7.4”, “7.8912”, “0.125”, “\u003c10”, “\u003c10.15”, “\u003e12000”, 1-10, 1:256. \n\nHospitalization within 30 days of Initial BPH Diagnosis refers to a 30-day period between the end of the hospitalization and the clinical office setting BPH diagnosis. This is due to aggravating factors from hospitalization, such as bed rest, medications, surgery, and altered body functions.\n\nThis eCQM is a patient-based measure.\n\nTelehealth encounters are not eligible for this measure because the measure requires a clinical action that cannot be conducted via telehealth.\n\nThis version of the eCQM uses QDM version 5.6. Please refer to the eCQI resource center (https://ecqi.healthit.gov/qdm) for more information on the QDM.","name":"Guidance","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"GUIDE","title":"Guidance"},"value_obj":{"type":"ED","value":"The IPSS is inclusive of the symptom index score and the quality of life score. The AUA-SI is the symptom index score alone and must be added to the QOL score. The AUA-SI with the QOL equals the IPSS. Both of these are the urinary symptom score.\n\nThe patient must have a urinary symptom score (USS) within 1 month after initial diagnosis. If more than one USS in the initial one month, then the first USS counts. The patient must have a USS again at 6-12 months after the initial diagnosis and if more than one USS in this time frame, then the last USS counts. \n\nThe result of the test is a numeric value that relates to a continuous numeric scale. Reported either as an integer, a ratio, a real number, or a range. The test result value may optionally contain a relational operator from the set {\u003c=, \u003c, \u003e, \u003e=}. Valid values for a quantitative test are of the form “7”, “-7”, “7.4”, “-7.4”, “7.8912”, “0.125”, “\u003c10”, “\u003c10.15”, “\u003e12000”, 1-10, 1:256. \n\nHospitalization within 30 days of Initial BPH Diagnosis refers to a 30-day period between the end of the hospitalization and the clinical office setting BPH diagnosis. This is due to aggravating factors from hospitalization, such as bed rest, medications, surgery, and altered body functions.\n\nThis eCQM is a patient-based measure.\n\nTelehealth encounters are not eligible for this measure because the measure requires a clinical action that cannot be conducted via telehealth.\n\nThis version of the eCQM uses QDM version 5.6. Please refer to the eCQI resource center (https://ecqi.healthit.gov/qdm) for more information on the QDM.","media_type":"text/plain"}},{"code":"TRANF","value":"TBD","name":"Transmission Format","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"TRANF","title":"Transmission Format"},"value_obj":{"type":"ED","value":"TBD","media_type":"text/plain"}},{"code":"IPOP","value":"Male patients with an initial diagnosis of benign prostatic hyperplasia 6 months prior to the measurement period, and a urinary symptom score assessment within 1 month of initial diagnosis and a follow-up urinary symptom score assessment within 6-12 months, who had a qualifying visit during the measurement period","name":"Initial Population","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"IPOP","title":"Initial Population"},"value_obj":{"type":"ED","value":"Male patients with an initial diagnosis of benign prostatic hyperplasia 6 months prior to the measurement period, and a urinary symptom score assessment within 1 month of initial diagnosis and a follow-up urinary symptom score assessment within 6-12 months, who had a qualifying visit during the measurement period","media_type":"text/plain"}},{"code":"DENOM","value":"Equals Initial Population","name":"Denominator","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DENOM","title":"Denominator"},"value_obj":{"type":"ED","value":"Equals Initial Population","media_type":"text/plain"}},{"code":"DENEX","value":"Patients with urinary retention that starts within 1 year of initial BPH diagnosis.\nPatients with an initial BPH diagnosis that starts during, or within 30 days after end of hospitalization.\nPatients with a diagnosis of morbid obesity, or with a BMI Exam \u003e=40 before the follow up urinary symptom score.","name":"Denominator Exclusions","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DENEX","title":"Denominator Exclusions"},"value_obj":{"type":"ED","value":"Patients with urinary retention that starts within 1 year of initial BPH diagnosis.\nPatients with an initial BPH diagnosis that starts during, or within 30 days after end of hospitalization.\nPatients with a diagnosis of morbid obesity, or with a BMI Exam \u003e=40 before the follow up urinary symptom score.","media_type":"text/plain"}},{"code":"NUMER","value":"Patients with a documented improvement of at least 3 points in their urinary symptom score during the measurement period","name":"Numerator","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"NUMER","title":"Numerator"},"value_obj":{"type":"ED","value":"Patients with a documented improvement of at least 3 points in their urinary symptom score during the measurement period","media_type":"text/plain"}},{"code":"NUMEX","value":"Not Applicable","name":"Numerator Exclusions","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"NUMEX","title":"Numerator Exclusions"},"value_obj":{"type":"ED","value":"Not Applicable","media_type":"text/plain"}},{"code":"DENEXCEP","value":"None","name":"Denominator Exceptions","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DENEXCEP","title":"Denominator Exceptions"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"SDE","value":"For every patient evaluated by this measure also identify payer, race, ethnicity and sex","name":"Supplemental Data Elements","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"SDE","title":"Supplemental Data Elements"},"value_obj":{"type":"ED","value":"For every patient evaluated by this measure also identify payer, race, ethnicity and sex","media_type":"text/plain"}}],"measure_period":{"type":"IVL_TS","low":{"type":"TS","value":"201201010000","inclusive?":true,"derived?":false},"high":{"type":"TS","value":"201212312359","inclusive?":true,"derived?":false},"width":{"type":"PQ","unit":"a","value":"1","inclusive?":true,"derived?":false}},"measure_scoring":"PROPORTION","population_criteria":{"IPP":{"conjunction?":true,"type":"IPP","hqmf_id":"F5F30C86-7504-463A-822F-2A7773AD62E8","preconditions":[{"id":2,"preconditions":[{"id":1,"reference":"UrinarySymptomScoreChangeAfterBenignProstaticHyperplasia__Initial_Population__EC45977D_A93F_4CDE_9FE0_5BAB43A70601"}],"conjunction_code":"allTrue"}]},"DENOM":{"conjunction?":true,"type":"DENOM","hqmf_id":"73DF06D9-B793-4CBC-85D5-AE7D396F23BD","preconditions":[{"id":4,"preconditions":[{"id":3,"reference":"UrinarySymptomScoreChangeAfterBenignProstaticHyperplasia__Denominator__EC45977D_A93F_4CDE_9FE0_5BAB43A70601"}],"conjunction_code":"allTrue"}]},"NUMER":{"conjunction?":true,"type":"NUMER","hqmf_id":"A064DE1F-FC50-4199-AFC4-816074DA3E1F","preconditions":[{"id":6,"preconditions":[{"id":5,"reference":"UrinarySymptomScoreChangeAfterBenignProstaticHyperplasia__Numerator__EC45977D_A93F_4CDE_9FE0_5BAB43A70601"}],"conjunction_code":"allTrue"}]},"DENEX":{"conjunction?":true,"type":"DENEX","hqmf_id":"4D96A847-9BCC-478A-A6E0-D01638CF5F00","preconditions":[{"id":8,"preconditions":[{"id":7,"reference":"UrinarySymptomScoreChangeAfterBenignProstaticHyperplasia__Denominator_Exclusions__EC45977D_A93F_4CDE_9FE0_5BAB43A70601"}],"conjunction_code":"atLeastOneTrue"}]}},"population_sets":[{"_id":"68923fa4a83e15671c2e5500","population_set_id":"PopulationSet_1","populations":{"DENEX":{"_id":"68923fa4a83e15671c2e5501","hqmf_id":"4D96A847-9BCC-478A-A6E0-D01638CF5F00","library_name":"UrinarySymptomScoreChangeAfterBenignProstaticHyperplasia","statement_name":"Denominator Exclusions"},"DENOM":{"_id":"68923fa4a83e15671c2e5502","hqmf_id":"73DF06D9-B793-4CBC-85D5-AE7D396F23BD","library_name":"UrinarySymptomScoreChangeAfterBenignProstaticHyperplasia","statement_name":"Denominator"},"IPP":{"_id":"68923fa4a83e15671c2e5503","hqmf_id":"F5F30C86-7504-463A-822F-2A7773AD62E8","library_name":"UrinarySymptomScoreChangeAfterBenignProstaticHyperplasia","statement_name":"Initial Population"},"NUMER":{"_id":"68923fa4a83e15671c2e5504","hqmf_id":"A064DE1F-FC50-4199-AFC4-816074DA3E1F","library_name":"UrinarySymptomScoreChangeAfterBenignProstaticHyperplasia","statement_name":"Numerator"},"_id":"68923fa4a83e15671c2e5505","_type":"CQM::ProportionPopulationMap"},"supplemental_data_elements":[{"_id":"68923fa0a83e15671c2e53b7","hqmf_id":"51F11974-5E2D-4752-AD02-CC5BD22FB6A4","library_name":"UrinarySymptomScoreChangeAfterBenignProstaticHyperplasia","statement_name":"SDE Ethnicity"},{"_id":"68923fa0a83e15671c2e53b8","hqmf_id":"E846C60E-FADD-4858-B383-1537AD62056C","library_name":"UrinarySymptomScoreChangeAfterBenignProstaticHyperplasia","statement_name":"SDE Payer"},{"_id":"68923fa0a83e15671c2e53b9","hqmf_id":"436A9C43-187B-45B0-92D0-FD1390DF89FE","library_name":"UrinarySymptomScoreChangeAfterBenignProstaticHyperplasia","statement_name":"SDE Race"},{"_id":"68923fa0a83e15671c2e53ba","hqmf_id":"5124DACE-F9BF-409C-9AB2-CFA94D770170","library_name":"UrinarySymptomScoreChangeAfterBenignProstaticHyperplasia","statement_name":"SDE Sex"}],"title":"Population Criteria Section"}],"source_data_criteria":[{"_id":"68923fa0a83e15671c2e53f0","_type":"QDM::Diagnosis","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"2.16.840.1.113762.1.4.1164.67","dataElementCodes":[],"description":"Diagnosis: MorbidObesity","hqmfOid":"2.16.840.1.113883.10.20.28.4.110","id":"68923fa0a83e15671c2e53f0","prevalencePeriod":null,"qdmCategory":"condition","qdmTitle":"Diagnosis","qdmVersion":"5.6","qrdaOid":"2.16.840.1.113883.10.20.24.3.135","severity":null},{"_id":"68923fa0a83e15671c2e53f2","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113762.1.4.1151.59","dataElementCodes":[],"description":"Encounter, Performed: HospitalServicesforUrology","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"68923fa0a83e15671c2e53f2","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"68923fa0a83e15671c2e53f7","_type":"QDM::PatientCharacteristicSex","codeListId":"2.16.840.1.113762.1.4.1","dataElementCodes":[],"description":"Patient Characteristic Sex: ONCAdministrativeSex","hqmfOid":"2.16.840.1.113883.10.20.28.4.55","id":"68923fa0a83e15671c2e53f7","qdmCategory":"patient_characteristic","qdmStatus":"gender","qdmTitle":"Patient Characteristic Sex","qdmVersion":"5.6"},{"_id":"68923fa4a83e15671c2e5506","_type":"QDM::PatientCharacteristicEthnicity","codeListId":"2.16.840.1.114222.4.11.837","dataElementCodes":[],"description":"Patient Characteristic Ethnicity: Ethnicity","hqmfOid":"2.16.840.1.113883.10.20.28.4.56","id":"68923fa4a83e15671c2e5506","qdmCategory":"patient_characteristic","qdmStatus":"ethnicity","qdmTitle":"Patient Characteristic Ethnicity","qdmVersion":"5.6"},{"_id":"68923fa4a83e15671c2e5507","_type":"QDM::PatientCharacteristicRace","codeListId":"2.16.840.1.114222.4.11.836","dataElementCodes":[],"description":"Patient Characteristic Race: Race","hqmfOid":"2.16.840.1.113883.10.20.28.4.59","id":"68923fa4a83e15671c2e5507","qdmCategory":"patient_characteristic","qdmStatus":"race","qdmTitle":"Patient Characteristic Race","qdmVersion":"5.6"},{"_id":"68923fa0a83e15671c2e53f1","_type":"QDM::Diagnosis","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"2.16.840.1.113762.1.4.1164.52","dataElementCodes":[],"description":"Diagnosis: Urinaryretention","hqmfOid":"2.16.840.1.113883.10.20.28.4.110","id":"68923fa0a83e15671c2e53f1","prevalencePeriod":null,"qdmCategory":"condition","qdmTitle":"Diagnosis","qdmVersion":"5.6","qrdaOid":"2.16.840.1.113883.10.20.24.3.135","severity":null},{"_id":"68923fa4a83e15671c2e5508","_type":"QDM::PatientCharacteristicPayer","codeListId":"2.16.840.1.114222.4.11.3591","dataElementCodes":[],"description":"Patient Characteristic Payer: PayerType","hqmfOid":"2.16.840.1.113883.10.20.28.4.58","id":"68923fa4a83e15671c2e5508","qdmCategory":"patient_characteristic","qdmStatus":"payer","qdmTitle":"Patient Characteristic Payer","qdmVersion":"5.6","relevantPeriod":null},{"_id":"68923fa0a83e15671c2e53f3","_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"clazz":null,"codeListId":"2.16.840.1.113883.3.464.1003.101.12.1001","dataElementCodes":[],"description":"Encounter, Performed: OfficeVisit","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":"68923fa0a83e15671c2e53f3","lengthOfStay":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.6","relatedTo":null,"relevantPeriod":null},{"_id":"68923fa0a83e15671c2e53f4","_type":"QDM::AssessmentPerformed","authorDatetime":null,"codeListId":"drc-58c419f14516f732f853f78ae17b10a413a4a7010670edeae1211fd93eaedd2b","components":null,"dataElementCodes":[],"description":"Assessment, Performed: American Urological Association Symptom Index [AUASI]","hqmfOid":"2.16.840.1.113883.10.20.28.4.117","id":"68923fa0a83e15671c2e53f4","interpretation":null,"method":null,"negationRationale":null,"qdmCategory":"assessment","qdmStatus":"performed","qdmTitle":"Assessment, Performed","qdmVersion":"5.6","reason":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null},{"_id":"68923fa0a83e15671c2e53f5","_type":"QDM::AssessmentPerformed","authorDatetime":null,"codeListId":"drc-b159dba4bdc3ce6e8e160d8ceb6b72bbc7265ed7c06d0632dc83217241b589c9","components":null,"dataElementCodes":[],"description":"Assessment, Performed: If you were to spend the rest of your life with your urinary condition just the way it is now, how would you feel about that [IPSS]","hqmfOid":"2.16.840.1.113883.10.20.28.4.117","id":"68923fa0a83e15671c2e53f5","interpretation":null,"method":null,"negationRationale":null,"qdmCategory":"assessment","qdmStatus":"performed","qdmTitle":"Assessment, Performed","qdmVersion":"5.6","reason":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null},{"_id":"68923fa0a83e15671c2e53f6","_type":"QDM::AssessmentPerformed","authorDatetime":null,"codeListId":"drc-e3b696fdf9e85c8e9fe5d13334eb969772613e40e9f058aca948e43308bcaf26","components":null,"dataElementCodes":[],"description":"Assessment, Performed: International Prostate Symptom Score [IPSS]","hqmfOid":"2.16.840.1.113883.10.20.28.4.117","id":"68923fa0a83e15671c2e53f6","interpretation":null,"method":null,"negationRationale":null,"qdmCategory":"assessment","qdmStatus":"performed","qdmTitle":"Assessment, Performed","qdmVersion":"5.6","reason":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null},{"_id":"68923fa0a83e15671c2e53f8","_type":"QDM::PatientCharacteristicSex","codeListId":"drc-500d93067e7ef6ec172198312e0202c7bd80f66d011d4a170c508960d0c7e461","dataElementCodes":[],"description":"Patient Characteristic Sex: Male","hqmfOid":"2.16.840.1.113883.10.20.28.4.55","id":"68923fa0a83e15671c2e53f8","qdmCategory":"patient_characteristic","qdmStatus":"gender","qdmTitle":"Patient Characteristic Sex","qdmVersion":"5.6"},{"_id":"68923fa4a83e15671c2e5509","_type":"QDM::PhysicalExamPerformed","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"drc-284d863bf52cadcd00032a538ca8e24d4ca49a9e2c6b519ea070a10411991f92","components":null,"dataElementCodes":[],"description":"Physical Exam, Performed: Body mass index (BMI) [Ratio]","hqmfOid":"2.16.840.1.113883.10.20.28.4.62","id":"68923fa4a83e15671c2e5509","method":null,"negationRationale":null,"qdmCategory":"physical_exam","qdmStatus":"performed","qdmTitle":"Physical Exam, Performed","qdmVersion":"5.6","reason":null,"relatedTo":null,"relevantDatetime":null,"relevantPeriod":null,"result":null},{"_id":"68923fa0a83e15671c2e53f9","_type":"QDM::Diagnosis","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"drc-b7e60a56347e4a5f50953e098098927e562fdd186d85329cadb314faed67d171","dataElementCodes":[],"description":"Diagnosis: Benign prostatic hyperplasia with lower urinary tract symptoms","hqmfOid":"2.16.840.1.113883.10.20.28.4.110","id":"68923fa0a83e15671c2e53f9","prevalencePeriod":null,"qdmCategory":"condition","qdmTitle":"Diagnosis","qdmVersion":"5.6","qrdaOid":"2.16.840.1.113883.10.20.24.3.135","severity":null}],"title":"Urinary Symptom Score Change 6-12 Months After Diagnosis of Benign Prostatic Hyperplasia","updated_at":null,"value_set_ids":["68923fa0a83e15671c2e53fa","68923fa0a83e15671c2e53fb","68923fa0a83e15671c2e53fc","68923fa0a83e15671c2e53fd","68923fa0a83e15671c2e53fe","68923fa0a83e15671c2e53ff","68923fa0a83e15671c2e5400","68923fa4a83e15671c2e54de","68923fa4a83e15671c2e54df","68923fa4a83e15671c2e54e0","68923fa4a83e15671c2e54e1","68923fa4a83e15671c2e54e2","68923fa4a83e15671c2e54e3","68923fa4a83e15671c2e54e4","68923fa4a83e15671c2e54e5","68923fa4a83e15671c2e54e6","68923fa4a83e15671c2e54e7","68923fa4a83e15671c2e54e8","68923fa4a83e15671c2e54e9","68923fa4a83e15671c2e54ea"]}